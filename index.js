var jscolor={dir:"",bindClass:"color",binding:!0,preloading:!0,install:function(){},init:function(){jscolor.preloading&&jscolor.preload()},getDir:function(){var t;return jscolor.dir||(t=jscolor.detectDir(),jscolor.dir=!1!==t?t:window.RESOURCES_PATH),jscolor.dir},detectDir:function(){for(var t=location.href,e=document.getElementsByTagName("base"),n=0;n<e.length;n+=1)e[n].href&&(t=e[n].href);for(e=document.getElementsByTagName("script"),n=0;n<e.length;n+=1)if(e[n].src&&/(^|\/)jscolor\.js([?#].*)?$/i.test(e[n].src))return(t=new jscolor.URI(e[n].src).toAbsolute(t)).path=t.path.replace(/[^\/]+$/,""),t.query=null,t.fragment=null,t.toString();return!1},preload:function(){for(var t in jscolor.imgRequire)jscolor.imgRequire.hasOwnProperty(t)&&jscolor.loadImage(t)},images:{pad:[181,101],sld:[16,101],cross:[15,15],arrow:[7,11]},imgRequire:{},imgLoaded:{},requireImage:function(t){jscolor.imgRequire[t]=!0},loadImage:function(t){jscolor.imgLoaded[t]||(jscolor.imgLoaded[t]=new Image,jscolor.imgLoaded[t].src=jscolor.getDir()+t)},fetchElement:function(t){return"string"==typeof t?document.getElementById(t):t},addEvent:function(t,e,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent&&t.attachEvent("on"+e,n)},fireEvent:function(t,e){var n;t&&(document.createEvent?((n=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.dispatchEvent(n)):document.createEventObject?(n=document.createEventObject(),t.fireEvent("on"+e,n)):t["on"+e]&&t["on"+e]())},getElementPos:function(t){var e=t,n=0,i=0;if(e.offsetParent)for(;n+=e.offsetLeft,i+=e.offsetTop,e=e.offsetParent;);for(;(t=t.parentNode)&&"BODY"!==t.nodeName.toUpperCase();)n-=t.scrollLeft,i-=t.scrollTop;return[n,i]},getElementSize:function(t){return[t.offsetWidth,t.offsetHeight]},getRelMousePos:function(t){var e=0,n=0;return"number"==typeof(t=t||window.event).offsetX?(e=t.offsetX,n=t.offsetY):"number"==typeof t.layerX&&(e=t.layerX,n=t.layerY),{x:e,y:n}},getViewPos:function(){return"number"==typeof window.pageYOffset?[window.pageXOffset,window.pageYOffset]:document.body&&(document.body.scrollLeft||document.body.scrollTop)?[document.body.scrollLeft,document.body.scrollTop]:document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop)?[document.documentElement.scrollLeft,document.documentElement.scrollTop]:[0,0]},getViewSize:function(){return"number"==typeof window.innerWidth?[window.innerWidth,window.innerHeight]:document.body&&(document.body.clientWidth||document.body.clientHeight)?[document.body.clientWidth,document.body.clientHeight]:document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)?[document.documentElement.clientWidth,document.documentElement.clientHeight]:[0,0]},URI:function(t){function n(t){for(var e,n="";t;)"../"===t.substr(0,3)||"./"===t.substr(0,2)?t=t.replace(/^\.+/,"").substr(1):"/./"===t.substr(0,3)||"/."===t?t="/"+t.substr(3):"/../"===t.substr(0,4)||"/.."===t?(t="/"+t.substr(4),n=n.replace(/\/?[^\/]*$/,"")):"."===t||".."===t?t="":(e=t.match(/^\/?[^\/]*/)[0],t=t.substr(e.length),n+=e);return n}this.authority=this.scheme=null,this.path="",this.fragment=this.query=null,this.parse=function(t){return t=t.match(/^(([A-Za-z][0-9A-Za-z+.-]*)(:))?((\/\/)([^\/?#]*))?([^?#]*)((\?)([^#]*))?((#)(.*))?/),this.scheme=t[3]?t[2]:null,this.authority=t[5]?t[6]:null,this.path=t[7],this.query=t[9]?t[10]:null,this.fragment=t[12]?t[13]:null,this},this.toString=function(){var t="";return null!==this.scheme&&(t=t+this.scheme+":"),null!==this.authority&&(t=t+"//"+this.authority),null!==this.path&&(t+=this.path),null!==this.query&&(t=t+"?"+this.query),t=null!==this.fragment?t+"#"+this.fragment:t},this.toAbsolute=function(t){t=new jscolor.URI(t);var e=new jscolor.URI;return null!==t.scheme&&(null!==this.scheme&&this.scheme.toLowerCase()===t.scheme.toLowerCase()&&(this.scheme=null),null!==this.scheme?(e.scheme=this.scheme,e.authority=this.authority,e.path=n(this.path),e.query=this.query):(null!==this.authority?(e.authority=this.authority,e.path=n(this.path),e.query=this.query):(""===this.path?(e.path=t.path,e.query=(null!==this.query?this:t).query):("/"===this.path.substr(0,1)?e.path=n(this.path):(e.path=null!==t.authority&&""===t.path?"/"+this.path:t.path.replace(/[^\/]+$/,"")+this.path,e.path=n(e.path)),e.query=this.query),e.authority=t.authority),e.scheme=t.scheme),e.fragment=this.fragment,e)},t&&this.parse(t)},color:function(b,e){function a(t,e,n){if(null===t)return[n,n,n];var i=Math.floor(t),l=n*(1-e);switch(t=n*(1-e*(i%2?t-i:1-(t-i))),i){case 6:case 0:return[n,t,l];case 1:return[t,n,l];case 2:return[l,n,t];case 3:return[l,t,n];case 4:return[t,l,n];case 5:return[n,l,t]}}function m(t,e){if(!jscolor.picker){jscolor.picker={box:document.createElement("div"),boxB:document.createElement("div"),pad:document.createElement("div"),padB:document.createElement("div"),padM:document.createElement("div"),sld:document.createElement("div"),sldB:document.createElement("div"),sldM:document.createElement("div"),btn:document.createElement("div"),btnS:document.createElement("span"),btnT:document.createTextNode(d.pickerCloseText)};for(var i=0;i<jscolor.images.sld[1];i+=4){var s=document.createElement("div");s.style.height="4px",s.style.fontSize="1px",s.style.lineHeight="0",jscolor.picker.sld.appendChild(s)}jscolor.picker.sldB.appendChild(jscolor.picker.sld),jscolor.picker.box.appendChild(jscolor.picker.sldB),jscolor.picker.box.appendChild(jscolor.picker.sldM),jscolor.picker.padB.appendChild(jscolor.picker.pad),jscolor.picker.box.appendChild(jscolor.picker.padB),jscolor.picker.box.appendChild(jscolor.picker.padM),jscolor.picker.btnS.appendChild(jscolor.picker.btnT),jscolor.picker.btn.appendChild(jscolor.picker.btnS),jscolor.picker.box.appendChild(jscolor.picker.btn),jscolor.picker.boxB.appendChild(jscolor.picker.box)}var o=jscolor.picker;o.box.onmouseup=o.box.onmouseout=function(){mxClient.IS_TOUCH||b.focus()},o.box.onmousedown=function(){},o.box.onmousemove=function(t){(n||p)&&(n&&z(t),p&&A(t),document.selection?document.selection.empty():window.getSelection&&window.getSelection().removeAllRanges(),r())},o.padM.onmouseup=o.padM.onmouseout=function(){n&&(n=!1,jscolor.fireEvent(h,"change"))},o.padM.onmousedown=function(t){switch(l){case 0:0===d.hsv[2]&&d.fromHSV(null,null,1);break;case 1:0===d.hsv[1]&&d.fromHSV(null,1,null)}n=!0,z(t),r()},o.sldM.onmouseup=o.sldM.onmouseout=function(){p&&(p=!1,jscolor.fireEvent(h,"change"))},o.sldM.onmousedown=function(t){p=!0,A(t),r()},i=y(d),o.box.style.width=i[0]+"px",o.box.style.height=i[1]+"px",o.boxB.style.position="absolute",o.boxB.style.clear="both",o.boxB.style.left=t+"px",o.boxB.style.top=e+"px",o.boxB.style.zIndex=d.pickerZIndex,o.boxB.style.border=d.pickerBorder+"px solid",o.boxB.style.borderColor=d.pickerBorderColor,o.boxB.style.background=d.pickerFaceColor,o.pad.style.width=jscolor.images.pad[0]+"px",o.pad.style.height=jscolor.images.pad[1]+"px",o.padB.style.position="absolute",o.padB.style.left=d.pickerFace+"px",o.padB.style.top=d.pickerFace+"px",o.padB.style.border=d.pickerInset+"px solid",o.padB.style.borderColor=d.pickerInsetColor,o.padM.style.position="absolute",o.padM.style.left="0",o.padM.style.top="0",o.padM.style.width=d.pickerFace+2*d.pickerInset+jscolor.images.pad[0]+jscolor.images.arrow[0]+"px",o.padM.style.height=o.box.style.height,o.padM.style.cursor="crosshair",o.sld.style.overflow="hidden",o.sld.style.width=jscolor.images.sld[0]+"px",o.sld.style.height=jscolor.images.sld[1]+"px",o.sldB.style.display=d.slider?"block":"none",o.sldB.style.position="absolute",o.sldB.style.right=d.pickerFace+"px",o.sldB.style.top=d.pickerFace+"px",o.sldB.style.border=d.pickerInset+"px solid",o.sldB.style.borderColor=d.pickerInsetColor,o.sldM.style.display=d.slider?"block":"none",o.sldM.style.position="absolute",o.sldM.style.right="0",o.sldM.style.top="0",o.sldM.style.width=jscolor.images.sld[0]+jscolor.images.arrow[0]+d.pickerFace+2*d.pickerInset+"px",o.sldM.style.height=o.box.style.height;try{o.sldM.style.cursor="pointer"}catch(t){o.sldM.style.cursor="hand"}o.btn.style.display=d.pickerClosable?"block":"none",o.btn.style.position="absolute",o.btn.style.left=d.pickerFace+"px",o.btn.style.bottom=d.pickerFace+"px",o.btn.style.padding="0 15px",o.btn.style.height="18px",o.btn.style.border=d.pickerInset+"px solid",t=d.pickerInsetColor.split(/\s+/),o.btn.style.borderColor=t.length<2?t[0]:t[1]+" "+t[0]+" "+t[0]+" "+t[1],o.btn.style.color=d.pickerButtonColor,o.btn.style.font="12px sans-serif",o.btn.style.textAlign="center";try{o.btn.style.cursor="pointer"}catch(t){o.btn.style.cursor="hand"}switch(o.btn.onmousedown=function(){d.hidePicker()},o.btnS.style.lineHeight=o.btn.style.height,l){case 0:var a="hs.png";break;case 1:a="hv.png"}o.padM.style.backgroundImage="url('"+jscolor.getDir()+"cross.gif')",o.padM.style.backgroundRepeat="no-repeat",o.sldM.style.backgroundImage="url('"+jscolor.getDir()+"arrow.gif')",o.sldM.style.backgroundRepeat="no-repeat",o.pad.style.backgroundImage="url('"+jscolor.getDir()+a+"')",o.pad.style.backgroundRepeat="no-repeat",o.pad.style.backgroundPosition="0 0",B(),C(),jscolor.picker.owner=d,document.getElementsByTagName("body")[0].appendChild(o.boxB)}function y(t){return[2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[0]+(t.slider?2*t.pickerInset+2*jscolor.images.arrow[0]+jscolor.images.sld[0]:0),t.pickerClosable?4*t.pickerInset+3*t.pickerFace+jscolor.images.pad[1]+t.pickerButtonHeight:2*t.pickerInset+2*t.pickerFace+jscolor.images.pad[1]]}function B(){switch(l){case 0:var t=1;break;case 1:t=2}switch(jscolor.picker.padM.style.backgroundPosition=d.pickerFace+d.pickerInset+Math.round(d.hsv[0]/6*(jscolor.images.pad[0]-1))-Math.floor(jscolor.images.cross[0]/2)+"px "+(d.pickerFace+d.pickerInset+Math.round((1-d.hsv[t])*(jscolor.images.pad[1]-1))-Math.floor(jscolor.images.cross[1]/2))+"px",t=jscolor.picker.sld.childNodes,l){case 0:for(var e=a(d.hsv[0],d.hsv[1],1),n=0;n<t.length;n+=1)t[n].style.backgroundColor="rgb("+e[0]*(1-n/t.length)*100+"%,"+e[1]*(1-n/t.length)*100+"%,"+e[2]*(1-n/t.length)*100+"%)";break;case 1:var i=[d.hsv[2],0,0],s=(n=Math.floor(d.hsv[0]))%2?d.hsv[0]-n:1-(d.hsv[0]-n);switch(n){case 6:case 0:e=[0,1,2];break;case 1:e=[1,0,2];break;case 2:e=[2,0,1];break;case 3:e=[2,1,0];break;case 4:e=[1,2,0];break;case 5:e=[0,2,1]}for(n=0;n<t.length;n+=1){var o=1-1/(t.length-1)*n;i[1]=i[0]*(1-o*s),i[2]=i[0]*(1-o),t[n].style.backgroundColor="rgb("+100*i[e[0]]+"%,"+100*i[e[1]]+"%,"+100*i[e[2]]+"%)"}}}function C(){switch(l){case 0:var t=2;break;case 1:t=1}jscolor.picker.sldM.style.backgroundPosition="0 "+(d.pickerFace+d.pickerInset+Math.round((1-d.hsv[t])*(jscolor.images.sld[1]-1))-Math.floor(jscolor.images.arrow[1]/2))+"px"}function t(){return jscolor.picker&&jscolor.picker.owner===d}function E(){h!==b&&d.importColor()}function z(t){var e=jscolor.getRelMousePos(t);switch(t=e.x-d.pickerFace-d.pickerInset,e=e.y-d.pickerFace-d.pickerInset,l){case 0:d.fromHSV(6/(jscolor.images.pad[0]-1)*t,1-e/(jscolor.images.pad[1]-1),null,u);break;case 1:d.fromHSV(6/(jscolor.images.pad[0]-1)*t,null,1-e/(jscolor.images.pad[1]-1),u)}}function A(t){switch(t=jscolor.getRelMousePos(t).y-d.pickerFace-d.pickerInset,l){case 0:d.fromHSV(null,null,1-t/(jscolor.images.sld[1]-1),v);break;case 1:d.fromHSV(null,1-t/(jscolor.images.sld[1]-1),null,v)}}function r(){d.onImmediateChange&&("string"==typeof d.onImmediateChange?eval(d.onImmediateChange):d.onImmediateChange(d))}for(var w in this.adjust=this.required=!0,this.hash=!1,this.slider=this.caps=!0,this.styleElement=this.valueElement=b,this.onImmediateChange=null,this.hsv=[0,0,1],this.rgb=[1,1,1],this.pickerOnfocus=!0,this.pickerMode="HSV",this.pickerPosition="bottom",this.pickerSmartPosition=!0,this.pickerButtonHeight=20,this.pickerClosable=!1,this.pickerCloseText="Close",this.pickerButtonColor="ButtonText",this.pickerFace=0,this.pickerFaceColor="ThreeDFace",this.pickerBorder=1,this.pickerBorderColor="ThreeDHighlight ThreeDShadow ThreeDShadow ThreeDHighlight",this.pickerInset=1,this.pickerInsetColor="ThreeDShadow ThreeDHighlight ThreeDHighlight ThreeDShadow",this.pickerZIndex=1e4,e)e.hasOwnProperty(w)&&(this[w]=e[w]);this.hidePicker=function(){t()&&(delete jscolor.picker.owner,document.getElementsByTagName("body")[0].removeChild(jscolor.picker.boxB))},this.showPicker=function(){t()||(jscolor.getElementPos(b),jscolor.getElementSize(b),jscolor.getViewPos(),jscolor.getViewSize(),y(this),this.pickerPosition.toLowerCase(),m(0,0))},this.importColor=function(){h?this.adjust?!this.required&&/^\s*$/.test(h.value)?(h.value="",f.style.backgroundImage=f.jscStyle.backgroundImage,f.style.backgroundColor=f.jscStyle.backgroundColor,f.style.color=f.jscStyle.color,this.exportColor(q|x)):this.fromString(h.value)||this.exportColor():this.fromString(h.value,q)||(f.style.backgroundImage=f.jscStyle.backgroundImage,f.style.backgroundColor=f.jscStyle.backgroundColor,f.style.color=f.jscStyle.color,this.exportColor(q|x)):this.exportColor()},this.exportColor=function(e){var n;e&q||!h||(n=this.toString(),this.caps&&(n=n.toUpperCase()),this.hash&&(n="#"+n),h.value=n),e&x||!f||(f.style.backgroundImage="none",f.style.backgroundColor="#"+this.toString(),f.style.color=.213*this.rgb[0]+.715*this.rgb[1]+.072*this.rgb[2]<.5?"#FFF":"#000"),e&v||!t()||B(),e&u||!t()||C()},this.fromHSV=function(t,e,n,i){1<(e=e<0?0:e)&&(e=1),1<(n=n<0?0:n)&&(n=1),this.rgb=a(null===(t=6<(t=t<0?0:t)?6:t)?this.hsv[0]:this.hsv[0]=t,null===e?this.hsv[1]:this.hsv[1]=e,null===n?this.hsv[2]:this.hsv[2]=n),this.exportColor(i)},this.fromRGB=function(t,e,n,i){1<(e=e<0?0:e)&&(e=1),1<(n=n<0?0:n)&&(n=1),t=null===(t=1<(t=t<0?0:t)?1:t)?this.rgb[0]:this.rgb[0]=t,e=null===e?this.rgb[1]:this.rgb[1]=e;var l=null===n?this.rgb[2]:this.rgb[2]=n,s=Math.min(Math.min(t,e),l),o=(n=Math.max(Math.max(t,e),l))-s;null!==(t=0==o?[null,0,n]:[6===(t=t===s?3+(l-e)/o:e===s?5+(t-l)/o:1+(e-t)/o)?0:t,o/n,n])[0]&&(this.hsv[0]=t[0]),0!==t[2]&&(this.hsv[1]=t[1]),this.hsv[2]=t[2],this.exportColor(i)},this.fromString=function(t,e){return!!(t=t.match(/^\W*([0-9A-F]{3}([0-9A-F]{3})?)\W*$/i))&&(6===t[1].length?this.fromRGB(parseInt(t[1].substr(0,2),16)/255,parseInt(t[1].substr(2,2),16)/255,parseInt(t[1].substr(4,2),16)/255,e):this.fromRGB(parseInt(t[1].charAt(0)+t[1].charAt(0),16)/255,parseInt(t[1].charAt(1)+t[1].charAt(1),16)/255,parseInt(t[1].charAt(2)+t[1].charAt(2),16)/255,e),!0)},this.toString=function(){return(256|Math.round(255*this.rgb[0])).toString(16).substr(1)+(256|Math.round(255*this.rgb[1])).toString(16).substr(1)+(256|Math.round(255*this.rgb[2])).toString(16).substr(1)};var d=this,l="hvs"===this.pickerMode.toLowerCase()?1:0,h=jscolor.fetchElement(this.valueElement),f=jscolor.fetchElement(this.styleElement),n=!1,p=!1,q=1,x=2,v=4,u=8;switch(h&&(e=function(){d.fromString(h.value,q),r()},jscolor.addEvent(h,"keyup",e),jscolor.addEvent(h,"input",e),jscolor.addEvent(h,"blur",E),h.setAttribute("autocomplete","off")),f&&(f.jscStyle={backgroundImage:f.style.backgroundImage,backgroundColor:f.style.backgroundColor,color:f.style.color}),l){case 0:jscolor.requireImage("./images/hs.png");break;case 1:jscolor.requireImage("./images/hv.png")}jscolor.requireImage("./images/cross.gif"),jscolor.requireImage("./images/arrow.gif"),this.importColor()}},urlParams=(jscolor.install(),!function(){var t,s,b,e,n,G,D,_,x=void 0,v=!0,f=null,C=!1,i=["aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,snow,springgreen,steelblue,tan,teal,thistle,tomato,transparent,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen".split(","),"all-scroll,col-resize,crosshair,default,e-resize,hand,help,move,n-resize,ne-resize,no-drop,not-allowed,nw-resize,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,vertical-text,w-resize,wait".split(","),"armenian,decimal,decimal-leading-zero,disc,georgian,lower-alpha,lower-greek,lower-latin,lower-roman,square,upper-alpha,upper-latin,upper-roman".split(","),"100,200,300,400,500,600,700,800,900,bold,bolder,lighter".split(","),"block-level,inline-level,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row,table-row-group".split(","),"condensed,expanded,extra-condensed,extra-expanded,narrower,semi-condensed,semi-expanded,ultra-condensed,ultra-expanded,wider".split(","),"inherit,inline,inline-block,inline-box,inline-flex,inline-grid,inline-list-item,inline-stack,inline-table,run-in".split(","),"behind,center-left,center-right,far-left,far-right,left-side,leftwards,right-side,rightwards".split(","),"large,larger,small,smaller,x-large,x-small,xx-large,xx-small".split(","),"dashed,dotted,double,groove,outset,ridge,solid".split(","),"ease,ease-in,ease-in-out,ease-out,linear,step-end,step-start".split(","),"at,closest-corner,closest-side,ellipse,farthest-corner,farthest-side".split(","),"baseline,middle,sub,super,text-bottom,text-top".split(","),"caption,icon,menu,message-box,small-caption,status-bar".split(","),"fast,faster,slow,slower,x-fast,x-slow".split(","),["above","below","higher","level","lower"],["cursive","fantasy","monospace","sans-serif","serif"],["loud","silent","soft","x-loud","x-soft"],["no-repeat","repeat-x","repeat-y","round","space"],["blink","line-through","overline","underline"],["block","flex","grid","table"],["high","low","x-high","x-low"],["nowrap","pre","pre-line","pre-wrap"],["absolute","relative","static"],["alternate","alternate-reverse","reverse"],["border-box","content-box","padding-box"],["capitalize","lowercase","uppercase"],["child","female","male"],["=","opacity"],["backwards","forwards"],["bidi-override","embed"],["bottom","top"],["break-all","keep-all"],["clip","ellipsis"],["contain","cover"],["continuous","digits"],["end","start"],["flat","preserve-3d"],["hide","show"],["horizontal","vertical"],["inside","outside"],["italic","oblique"],["left","right"],["ltr","rtl"],["no-content","no-display"],["paused","running"],["suppress","unrestricted"],["thick","thin"],[","],["/"],["all"],["always"],["auto"],["avoid"],["both"],["break-word"],["center"],["circle"],["code"],["collapse"],["contents"],["fixed"],["hidden"],["infinite"],["inset"],["invert"],["justify"],["list-item"],["local"],["medium"],["mix"],["none"],["normal"],["once"],["repeat"],["scroll"],["separate"],["small-caps"],["spell-out"],["to"],["visible"]],w={animation:{cssPropBits:517,cssLitGroup:[i[10],i[24],i[29],i[45],i[48],i[54],i[63],i[71],i[72]],cssFns:["cubic-bezier()","steps()"]},"animation-delay":{cssPropBits:5,cssLitGroup:[i[48]],cssFns:[]},"animation-direction":{cssPropBits:0,cssLitGroup:[i[24],i[48],i[72]],cssFns:[]},"animation-duration":"animation-delay","animation-fill-mode":{cssPropBits:0,cssLitGroup:[i[29],i[48],i[54],i[71]],cssFns:[]},"animation-iteration-count":{cssPropBits:5,cssLitGroup:[i[48],i[63]],cssFns:[]},"animation-name":{cssPropBits:512,cssLitGroup:[i[48],i[71]],cssFns:[]},"animation-play-state":{cssPropBits:0,cssLitGroup:[i[45],i[48]],cssFns:[]},"animation-timing-function":{cssPropBits:0,cssLitGroup:[i[10],i[48]],cssFns:["cubic-bezier()","steps()"]},appearance:{cssPropBits:0,cssLitGroup:[i[71]],cssFns:[]},azimuth:{cssPropBits:5,cssLitGroup:[i[7],i[42],i[56]],cssFns:[]},"backface-visibility":{cssPropBits:0,cssLitGroup:[i[59],i[62],i[80]],cssFns:[]},background:{cssPropBits:23,cssLitGroup:[i[0],i[18],i[25],i[31],i[34],i[42],i[48],i[49],i[52],i[56],i[61],i[68],i[71],i[74],i[75]],cssFns:"image(),linear-gradient(),radial-gradient(),repeating-linear-gradient(),repeating-radial-gradient(),rgb(),rgba()".split(",")},"background-attachment":{cssPropBits:0,cssLitGroup:[i[48],i[61],i[68],i[75]],cssFns:[]},"background-color":{cssPropBits:2,cssLitGroup:[i[0]],cssFns:["rgb()","rgba()"]},"background-image":{cssPropBits:16,cssLitGroup:[i[48],i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"background-position":{cssPropBits:5,cssLitGroup:[i[31],i[42],i[48],i[56]],cssFns:[]},"background-repeat":{cssPropBits:0,cssLitGroup:[i[18],i[48],i[74]],cssFns:[]},"background-size":{cssPropBits:5,cssLitGroup:[i[34],i[48],i[52]],cssFns:[]},border:{cssPropBits:7,cssLitGroup:[i[0],i[9],i[47],i[62],i[64],i[69],i[71]],cssFns:["rgb()","rgba()"]},"border-bottom":"border","border-bottom-color":"background-color","border-bottom-left-radius":{cssPropBits:5,cssFns:[]},"border-bottom-right-radius":"border-bottom-left-radius","border-bottom-style":{cssPropBits:0,cssLitGroup:[i[9],i[62],i[64],i[71]],cssFns:[]},"border-bottom-width":{cssPropBits:5,cssLitGroup:[i[47],i[69]],cssFns:[]},"border-collapse":{cssPropBits:0,cssLitGroup:[i[59],i[76]],cssFns:[]},"border-color":"background-color","border-left":"border","border-left-color":"background-color","border-left-style":"border-bottom-style","border-left-width":"border-bottom-width","border-radius":{cssPropBits:5,cssLitGroup:[i[49]],cssFns:[]},"border-right":"border","border-right-color":"background-color","border-right-style":"border-bottom-style","border-right-width":"border-bottom-width","border-spacing":"border-bottom-left-radius","border-style":"border-bottom-style","border-top":"border","border-top-color":"background-color","border-top-left-radius":"border-bottom-left-radius","border-top-right-radius":"border-bottom-left-radius","border-top-style":"border-bottom-style","border-top-width":"border-bottom-width","border-width":"border-bottom-width",bottom:{cssPropBits:5,cssLitGroup:[i[52]],cssFns:[]},box:{cssPropBits:0,cssLitGroup:[i[60],i[71],i[72]],cssFns:[]},"box-shadow":{cssPropBits:7,cssLitGroup:[i[0],i[48],i[64],i[71]],cssFns:["rgb()","rgba()"]},"box-sizing":{cssPropBits:0,cssLitGroup:[i[25]],cssFns:[]},"caption-side":{cssPropBits:0,cssLitGroup:[i[31]],cssFns:[]},clear:{cssPropBits:0,cssLitGroup:[i[42],i[54],i[71]],cssFns:[]},clip:{cssPropBits:0,cssLitGroup:[i[52]],cssFns:["rect()"]},color:"background-color",content:{cssPropBits:8,cssLitGroup:[i[71],i[72]],cssFns:[]},cue:{cssPropBits:16,cssLitGroup:[i[71]],cssFns:[]},"cue-after":"cue","cue-before":"cue",cursor:{cssPropBits:16,cssLitGroup:[i[1],i[48],i[52]],cssFns:[]},direction:{cssPropBits:0,cssLitGroup:[i[43]],cssFns:[]},display:{cssPropBits:0,cssLitGroup:[i[4],i[6],i[20],i[52],i[67],i[71]],cssFns:[]},"display-extras":{cssPropBits:0,cssLitGroup:[i[67],i[71]],cssFns:[]},"display-inside":{cssPropBits:0,cssLitGroup:[i[20],i[52]],cssFns:[]},"display-outside":{cssPropBits:0,cssLitGroup:[i[4],i[71]],cssFns:[]},elevation:{cssPropBits:5,cssLitGroup:[i[15]],cssFns:[]},"empty-cells":{cssPropBits:0,cssLitGroup:[i[38]],cssFns:[]},filter:{cssPropBits:0,cssFns:["alpha()"]},float:{cssPropBits:0,cssLitGroup:[i[42],i[71]],cssFns:[]},font:{cssPropBits:73,cssLitGroup:[i[3],i[8],i[13],i[16],i[41],i[48],i[49],i[69],i[72],i[77]],cssFns:[]},"font-family":{cssPropBits:72,cssLitGroup:[i[16],i[48]],cssFns:[]},"font-size":{cssPropBits:1,cssLitGroup:[i[8],i[69]],cssFns:[]},"font-stretch":{cssPropBits:0,cssLitGroup:[i[5],i[72]],cssFns:[]},"font-style":{cssPropBits:0,cssLitGroup:[i[41],i[72]],cssFns:[]},"font-variant":{cssPropBits:0,cssLitGroup:[i[72],i[77]],cssFns:[]},"font-weight":{cssPropBits:0,cssLitGroup:[i[3],i[72]],cssFns:[]},height:"bottom",left:"bottom","letter-spacing":{cssPropBits:5,cssLitGroup:[i[72]],cssFns:[]},"line-height":{cssPropBits:1,cssLitGroup:[i[72]],cssFns:[]},"list-style":{cssPropBits:16,cssLitGroup:[i[2],i[40],i[57],i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-image":{cssPropBits:16,cssLitGroup:[i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-position":{cssPropBits:0,cssLitGroup:[i[40]],cssFns:[]},"list-style-type":{cssPropBits:0,cssLitGroup:[i[2],i[57],i[71]],cssFns:[]},margin:"bottom","margin-bottom":"bottom","margin-left":"bottom","margin-right":"bottom","margin-top":"bottom","max-height":{cssPropBits:1,cssLitGroup:[i[52],i[71]],cssFns:[]},"max-width":"max-height","min-height":{cssPropBits:1,cssLitGroup:[i[52]],cssFns:[]},"min-width":"min-height",opacity:{cssPropBits:1,cssFns:[]},outline:{cssPropBits:7,cssLitGroup:[i[0],i[9],i[47],i[62],i[64],i[65],i[69],i[71]],cssFns:["rgb()","rgba()"]},"outline-color":{cssPropBits:2,cssLitGroup:[i[0],i[65]],cssFns:["rgb()","rgba()"]},"outline-style":"border-bottom-style","outline-width":"border-bottom-width",overflow:{cssPropBits:0,cssLitGroup:[i[52],i[62],i[75],i[80]],cssFns:[]},"overflow-wrap":{cssPropBits:0,cssLitGroup:[i[55],i[72]],cssFns:[]},"overflow-x":{cssPropBits:0,cssLitGroup:[i[44],i[52],i[62],i[75],i[80]],cssFns:[]},"overflow-y":"overflow-x",padding:"opacity","padding-bottom":"opacity","padding-left":"opacity","padding-right":"opacity","padding-top":"opacity","page-break-after":{cssPropBits:0,cssLitGroup:[i[42],i[51],i[52],i[53]],cssFns:[]},"page-break-before":"page-break-after","page-break-inside":{cssPropBits:0,cssLitGroup:[i[52],i[53]],cssFns:[]},pause:"border-bottom-left-radius","pause-after":"border-bottom-left-radius","pause-before":"border-bottom-left-radius",perspective:{cssPropBits:5,cssLitGroup:[i[71]],cssFns:[]},"perspective-origin":{cssPropBits:5,cssLitGroup:[i[31],i[42],i[56]],cssFns:[]},pitch:{cssPropBits:5,cssLitGroup:[i[21],i[69]],cssFns:[]},"pitch-range":"border-bottom-left-radius","play-during":{cssPropBits:16,cssLitGroup:[i[52],i[70],i[71],i[74]],cssFns:[]},position:{cssPropBits:0,cssLitGroup:[i[23]],cssFns:[]},quotes:{cssPropBits:8,cssLitGroup:[i[71]],cssFns:[]},resize:{cssPropBits:0,cssLitGroup:[i[39],i[54],i[71]],cssFns:[]},richness:"border-bottom-left-radius",right:"bottom",speak:{cssPropBits:0,cssLitGroup:[i[71],i[72],i[78]],cssFns:[]},"speak-header":{cssPropBits:0,cssLitGroup:[i[51],i[73]],cssFns:[]},"speak-numeral":{cssPropBits:0,cssLitGroup:[i[35]],cssFns:[]},"speak-punctuation":{cssPropBits:0,cssLitGroup:[i[58],i[71]],cssFns:[]},"speech-rate":{cssPropBits:5,cssLitGroup:[i[14],i[69]],cssFns:[]},stress:"border-bottom-left-radius","table-layout":{cssPropBits:0,cssLitGroup:[i[52],i[61]],cssFns:[]},"text-align":{cssPropBits:0,cssLitGroup:[i[42],i[56],i[66]],cssFns:[]},"text-decoration":{cssPropBits:0,cssLitGroup:[i[19],i[71]],cssFns:[]},"text-indent":"border-bottom-left-radius","text-overflow":{cssPropBits:8,cssLitGroup:[i[33]],cssFns:[]},"text-shadow":"box-shadow","text-transform":{cssPropBits:0,cssLitGroup:[i[26],i[71]],cssFns:[]},"text-wrap":{cssPropBits:0,cssLitGroup:[i[46],i[71],i[72]],cssFns:[]},top:"bottom",transform:{cssPropBits:0,cssLitGroup:[i[71]],cssFns:"matrix(),perspective(),rotate(),rotate3d(),rotatex(),rotatey(),rotatez(),scale(),scale3d(),scalex(),scaley(),scalez(),skew(),skewx(),skewy(),translate(),translate3d(),translatex(),translatey(),translatez()".split(",")},"transform-origin":"perspective-origin","transform-style":{cssPropBits:0,cssLitGroup:[i[37]],cssFns:[]},transition:{cssPropBits:1029,cssLitGroup:[i[10],i[48],i[50],i[71]],cssFns:["cubic-bezier()","steps()"]},"transition-delay":"animation-delay","transition-duration":"animation-delay","transition-property":{cssPropBits:1024,cssLitGroup:[i[48],i[50]],cssFns:[]},"transition-timing-function":"animation-timing-function","unicode-bidi":{cssPropBits:0,cssLitGroup:[i[30],i[72]],cssFns:[]},"vertical-align":{cssPropBits:5,cssLitGroup:[i[12],i[31]],cssFns:[]},visibility:"backface-visibility","voice-family":{cssPropBits:8,cssLitGroup:[i[27],i[48]],cssFns:[]},volume:{cssPropBits:1,cssLitGroup:[i[17],i[69]],cssFns:[]},"white-space":{cssPropBits:0,cssLitGroup:[i[22],i[72]],cssFns:[]},width:"min-height","word-break":{cssPropBits:0,cssLitGroup:[i[32],i[72],i[55]],cssFns:[]},"word-spacing":"letter-spacing","word-wrap":"overflow-wrap","z-index":"bottom",zoom:"line-height","cubic-bezier()":"animation-delay","steps()":{cssPropBits:5,cssLitGroup:[i[36],i[48]],cssFns:[]},"image()":{cssPropBits:18,cssLitGroup:[i[0],i[48]],cssFns:["rgb()","rgba()"]},"linear-gradient()":{cssPropBits:7,cssLitGroup:[i[0],i[31],i[42],i[48],i[79]],cssFns:["rgb()","rgba()"]},"radial-gradient()":{cssPropBits:7,cssLitGroup:[i[0],i[11],i[31],i[42],i[48],i[56],i[57]],cssFns:["rgb()","rgba()"]},"repeating-linear-gradient()":"linear-gradient()","repeating-radial-gradient()":"radial-gradient()","rgb()":{cssPropBits:1,cssLitGroup:[i[48]],cssFns:[]},"rgba()":"rgb()","rect()":{cssPropBits:5,cssLitGroup:[i[48],i[52]],cssFns:[]},"alpha()":{cssPropBits:1,cssLitGroup:[i[28]],cssFns:[]},"matrix()":"animation-delay","perspective()":"border-bottom-left-radius","rotate()":"border-bottom-left-radius","rotate3d()":"animation-delay","rotatex()":"border-bottom-left-radius","rotatey()":"border-bottom-left-radius","rotatez()":"border-bottom-left-radius","scale()":"animation-delay","scale3d()":"animation-delay","scalex()":"border-bottom-left-radius","scaley()":"border-bottom-left-radius","scalez()":"border-bottom-left-radius","skew()":"animation-delay","skewx()":"border-bottom-left-radius","skewy()":"border-bottom-left-radius","translate()":"animation-delay","translate3d()":"animation-delay","translatex()":"border-bottom-left-radius","translatey()":"border-bottom-left-radius","translatez()":"border-bottom-left-radius"};for(t in w)"string"==typeof w[t]&&Object.hasOwnProperty.call(w,t)&&(w[t]=w[w[t]]);function k(t){var e=parseInt(t.substring(1),16);return 65535<e?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):e==e?String.fromCharCode(e):t[1]<" "?"":t[1]}function V(t,e){return'"'+t.replace(/[\u0000-\u001f\\\"<>]/g,e)+'"'}function F(t){return e[t]||(e[t]="\\"+t.charCodeAt(0).toString(16)+" ")}function B(t){return n[t]||(n[t]=(t<""?"%0":"%")+t.charCodeAt(0).toString(16))}"undefined"!=typeof window&&(window.cssSchema=w),e={"\\":"\\\\"},n={"\\":"%5c"},G=RegExp("\\uFEFF|U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?|url[(][\\t\\n\\f ]*(?:\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)[\\t\\n\\f ]*[)]|(?!url[(])-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*[(]|(?:@?-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))|#)(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*|\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)(?:%|-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)?|\x3c!--|--\x3e|[\\t\\n\\f ]+|/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)|[~|^$*]=|[^\"'\\\\/]|/(?![/*])","gi"),D=RegExp("\\\\(?:(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff])|[\\n\\f])","g"),_=RegExp("^url\\([\\t\\n\\f ]*[\"']?|[\"']?[\\t\\n\\f ]*\\)$","gi"),b=function(t){return t.replace(D,k)},s=function(t){for(var e=0,n=" ",i=0,l=(t=(""+t).replace(/\r\n?/g,"\n").match(G)||[]).length;i<l;++i){var s=b(t[i]),o=s.length,r=s.charCodeAt(0);n==(s=34==r||39==r?V(s.substring(1,o-1),F):47==r&&1<o||"\\"==s||"--\x3e"==s||"\x3c!--"==s||"\ufeff"==s||r<=32?" ":/url\(/i.test(s)?"url("+V(s.replace(_,""),B)+")":s)&&" "==s||(t[e++]=n=s)}return t.length=e,t},"undefined"!=typeof window&&(window.lexCss=s,window.decodeCss=b);z=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),o=/^(?:\.\.\/)*(?:\.\.$)?/,u.prototype.toString=function(){var t=[];return f!==this.j&&t.push(this.j,":"),f!==this.k&&(t.push("//"),f!==this.n&&t.push(this.n,"@"),t.push(this.k),f!==this.h)&&t.push(":",this.h.toString()),f!==this.g&&t.push(this.g),f!==this.l&&t.push("?",this.l),f!==this.o&&t.push("#",this.o),t.join("")},u.prototype.T=function(){return new u(this.j,this.n,this.k,this.h,this.g,this.l,this.o)},u.prototype.W=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()},u.prototype.ga=function(t){this.j=t||f},u.prototype.K=function(){return f!==this.j},u.prototype.da=function(t){this.n=t||f},u.prototype.X=function(){return f!==this.n},u.prototype.ea=function(t){this.k=t||f,this.G(this.g)},u.prototype.Y=function(){return f!==this.k},u.prototype.V=function(){return this.h&&decodeURIComponent(this.h)},u.prototype.ca=function(t){if(t){if((t=Number(t))!==(65535&t))throw Error("Bad port number "+t);this.h=""+t}else this.h=f},u.prototype.$=function(){return f!==this.h},u.prototype.U=function(){return this.g&&decodeURIComponent(this.g)},u.prototype.G=function(t){t?(t=""+t,this.g=!this.k||/^\//.test(t)?t:"/"+t):this.g=f},u.prototype.O=function(t){this.l=t||f},u.prototype.aa=function(){return f!==this.l},u.prototype.ba=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e,n=[],i=-1;for(e in t){var l=t[e];"string"==typeof l&&(n[++i]=e,n[++i]=l)}t=n}for(var n=[],i="",s=0;s<t.length;)e=t[s++],l=t[s++],n.push(i,encodeURIComponent(e.toString())),i="&",l&&n.push("=",encodeURIComponent(l.toString()));this.l=n.join("")},u.prototype.fa=function(t){this.o=t||f},u.prototype.Z=function(){return f!==this.o},Y=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,r=/[#\/\?@]/g,W=/[\#\?]/g,u.parse=l,u.create=function(t,e,n,i,l,s,o){return t=new u(h(t,r),h(e,r),"string"==typeof n?encodeURIComponent(n):f,0<i?i.toString():f,h(l,W),f,"string"==typeof o?encodeURIComponent(o):f),s&&("string"==typeof s?t.O(s.replace(/[^?&=0-9A-Za-z_\-~.%]/g,j)):t.ba(s)),t},u.N=X,u.ma=d,u.ha={ua:function(t){return/\.html$/.test(l(t).U())?"text/html":"application/javascript"},N:function(t,e){return t?X(l(t),l(e)).toString():""+e}};var z,o,Y,r,W,a=u;function l(t){return(t=(""+t).match(Y))?new u(p(t[1]),p(t[2]),p(t[3]),p(t[4]),p(t[5]),p(t[6]),p(t[7])):f}function h(t,e){return"string"==typeof t?encodeURI(t).replace(e,j):f}function j(t){return t=t.charCodeAt(0),"%"+"0123456789ABCDEF".charAt(t>>4&15)+"0123456789ABCDEF".charAt(15&t)}function d(t){if(t===f)return f;for(var e,t=t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/"),n=z;(e=t.replace(n,"$1"))!=t;t=e);return t}function X(t,e){var n,t=t.T(),i=e.K(),l=(i?t.ga(e.j):i=e.X(),i?t.da(e.n):i=e.Y(),i?t.ea(e.k):i=e.$(),e.g),s=d(l);return i?(t.ca(e.V()),s=s&&s.replace(o,"")):(i=!!l)?47!==s.charCodeAt(0)&&(s=d(t.g||"").replace(o,""),s=d(((n=s.lastIndexOf("/")+1)?s.substring(0,n):"")+d(l)).replace(o,"")):(s=s&&s.replace(o,""))!==l&&t.G(s),i?t.G(s):i=e.aa(),i?t.O(e.l):i=e.Z(),i&&t.fa(e.o),t}function u(t,e,n,i,l,s,o){this.j=t,this.n=e,this.k=n,this.h=i,this.g=l,this.l=s,this.o=o}function p(t){return"string"==typeof t&&0<t.length?t:f}"undefined"!=typeof window&&(window.URI=a);var T,Z,K,q,Q,J,$,tt,E,y,et,S=x,A=x,L=x;function nt(t){return"string"==typeof t?'url("'+t.replace(q,it)+'")':'url("about:blank")'}function it(t){return Q[t]}function M(t,e){return t?a.ha.N(t,e):e}function R(t,e,n){var i;return!n||!(i=(""+t).match(J))||i[1]&&!$.test(i[1])?f:n(t,e)}function I(t){return t.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,"")}function lt(r,t,a,h,d,u,e){function n(){g=m.length&&m[m.length-1]===f}var p=x,c=e||[0],m=[],g=C;return y(t,{startStylesheet:function(){p=[]},endStylesheet:function(){},startAtrule:function(t,e){var n,i,l,s,o;g?t=f:"@media"===t?p.push("@media"," ",L(e)):"@keyframes"===t||"@-webkit-keyframes"===t?(s=e[0],t=1!==e.length||/__$|[^\w\-]/.test(s)?f:(p.push(t," ",s+a.L),"@keyframes")):"@import"===t&&0<e.length&&(t=f,"function"==typeof u?"not all"!==(n=L(e.slice(1)))&&(++c[0],i=[],p.push(i),l=R(M(r,(s=e[0],(o=(o=(o=(o=(o=/^\s*["]([^"]*)["]\s*$/.exec(s))||/^\s*[']([^']*)[']\s*$/.exec(s))||/^\s*url\s*[(]["]([^"]*)["][)]\s*$/.exec(s))||/^\s*url\s*[(][']([^']*)['][)]\s*$/.exec(s))||/^\s*url\s*[(]([^)]*)[)]\s*$/.exec(s))?o[1]:f)),function(t){var e=lt(l,t.qa,a,h,d,u,c);--c[0],t=n?{toString:function(){return"@media "+n+" {"+e.result+"}"}}:e.result,i[0]=t,u(t,!!c[0])},d)):window.console&&window.console.log("@import "+e.join(" ")+" elided")),g=!t,m.push(t)},endAtrule:function(){m.pop(),g||p.push(";"),n()},startBlock:function(){g||p.push("{")},endBlock:function(){g||(p.push("}"),g=v)},startRuleset:function(t){var e;g||(e=x,"@keyframes"===m[m.length-1]?(e=t.join(" ").match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),g=!e,e=e&&e[0].replace(/ +/g,"")):(t=A(t,a))&&t.length?e=t.join(", "):g=v,g)||p.push(e,"{"),m.push(f)},endRuleset:function(){m.pop(),g||p.push("}"),n()},declaration:function(t,e){var n,i;g||(n=C,2<=(i=e.length)&&"!"===e[i-2]&&"important"===e[i-1].toLowerCase()&&(n=v,e.length-=2),S(t,e,h,r,a.L),e.length&&p.push(t,":",e.join(" "),n?" !important;":";"))}}),{result:{toString:function(){return p.join("")}},va:!!c[0]}}function st(t,e,n,i,l){for(var s,o=e++;e<n&&"{"!==t[e]&&";"!==t[e];)++e;return e<n&&(l||";"===t[e])&&(s=e,(l=1+o)<n&&" "===t[l]&&++l,l<s&&" "===t[s-1]&&--s,i.startAtrule&&i.startAtrule(t[o].toLowerCase(),t.slice(l,s)),e="{"===t[e]?function t(e,n,i,l){++n;for(l.startBlock&&l.startBlock();n<i;){var s=e[n].charAt(0);if("}"==s){++n;break}n=" "===s||";"===s?n+1:"@"===s?st(e,n,i,l,C):("{"===s?t:ot)(e,n,i,l)}l.endBlock&&l.endBlock();return n}(t,e,n,i):e+1,i.endAtrule)&&i.endAtrule(),e}function ot(t,e,n,i){var l,s=e,o=rt(t,e,n,v);if(o<0)return(o=~o)===s?o+1:o;if("{"!==t[o])return o===s?o+1:o;for(e=o+1,s<o&&" "===t[o-1]&&--o,i.startRuleset&&i.startRuleset(t.slice(s,o));e<n;){if("}"===(l=t[e])){++e;break}e=" "===l?e+1:ht(t,e,n,i)}return i.endRuleset&&i.endRuleset(),e}function rt(t,e,n,i){for(var l,s=[],o=-1;e<n;++e)if("["===(l=t[e].charAt(0))||"("===l)s[++o]=l;else if("]"===l&&"["===s[o]||")"===l&&"("===s[o])--o;else if("{"===l||"}"===l||";"===l||"@"===l||":"===l&&!i)break;return e=0<=o?~(e+1):e}function at(t,e,n){for(;e<n&&";"!==t[e]&&"}"!==t[e];)++e;return e<n&&";"===t[e]?e+1:e}function ht(t,e,n,i){var l=t[e++];if(!et.test(l))return at(t,e,n);if(e<n&&" "===t[e]&&++e,e==n||":"!==t[e])return at(t,e,n);++e<n&&" "===t[e]&&++e;var s=rt(t,e,n,C);if(s<0)s=~s;else{for(var o=[],r=0,a=e;a<s;++a)" "!==(e=t[a])&&(o[r++]=e);if(s<n){for(;";"!==(e=t[s])&&"}"!==e&&(r=0,++s<n););";"===e&&++s}r&&i.declaration&&i.declaration(l.toLowerCase(),o)}return s}q=/[\n\f\r\"\'()*<>]/g,Q={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"},J=/^(?:([^:/?# ]+):)?/,$=/^(?:https?|mailto|data)$/i,T={},S=function t(e,n,i,l,s){var e=I(e),o=w[e];if(o&&"object"==typeof o){for(var r=o.cssPropBits,a=80&r,h=1536&r,d=NaN,u=0,p=0;u<n.length;++u){var c,m,g,x,y=n[u].toLowerCase(),f=y.charCodeAt(0);if(32===f)y="";else if(34===f)y=16==a?i?nt(R(M(l,b(n[u].substring(1,y.length-1))),e,i)):"":8&r&&!(a&a-1)?y:"";else if("inherit"!==y){if(x=o.cssLitGroup){if(!(C=o.cssLitMap)){for(var C={},E=x.length;0<=--E;)for(var v=x[E],S=v.length;0<=--S;)C[v[S]]=T;C=o.cssLitMap=C}x=C}else x=T;if(x[I(y)]!==T)if(35===f&&/^#(?:[0-9a-f]{3}){1,2}$/.test(y))y=2&r?y:"";else if(48<=f&&f<=57)y=1&r?y:"";else if(m=48<=(c=y.charCodeAt(1))&&c<=57,g=48<=(g=y.charCodeAt(2))&&g<=57,43===f&&(m||46===c&&g))y=1&r?(m?"":"0")+y.substring(1):"";else if(45===f&&(m||46===c&&g))y=4&r?(m?"-":"-0")+y.substring(1):1&r?"0":"";else if(46===f&&m)y=1&r?"0"+y:"";else if('url("'===y.substring(0,5))y=i&&16&r?nt(R(M(l,n[u].substring(5,y.length-2)),e,i)):"";else if("("===y.charAt(y.length-1))t:{for(E=(C=u)+(y=1),f=(x=n).length;E<f&&y;)y+=")"===(v=x[E++])?-1:/^[^"']*\($/.test(v);if(!y)for(f=I(y=x[C].toLowerCase()),x=x.splice(C,E-C,""),E=0,v=(C=o.cssFns).length;E<v;++E)if(C[E].substring(0,f.length)==f){x[0]=x[x.length-1]="",t(C[E],x,i,l),y=y+x.join(" ")+")";break t}y=""}else y=h&&/^-?[a-z_][\w\-]*$/.test(y)&&!/__$/.test(y)?s&&512==h?n[u]+s:1024==h&&w[y]&&"number"==typeof w[y].oa?y:"":/^\w+$/.test(y)&&64==a&&8&r?d+1===p?(n[d]=n[d].substring(0,n[d].length-1)+" "+y+'"',""):(d=p,'"'+y+'"'):""}y&&(n[p++]=y)}1===p&&'url("about:blank")'===n[0]&&(p=0),n.length=p}else n.length=0},tt=RegExp("^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$"),(E={})[">"]=E["+"]=E["~"]=E,A=function(m,g,r){function t(t,e){function n(t,e,n){var i,l,s,o=v,r="";t<e&&("*"===(h=m[t])?(++t,r=h):/^[a-zA-Z]/.test(h)&&(i=y(h.toLowerCase(),[]))&&(++t,r=h="tagName"in i?i.tagName:h));for(s=l=i="";o&&t<e;++t)if("#"===(h=m[t]).charAt(0))/^#_|__$|[^\w#:\-]/.test(h)?o=C:i+=h+x;else if("."===h)++t<e&&/^[0-9A-Za-z:_\-]+$/.test(h=m[t])&&!/^_|__$/.test(h)?i+="."+h:o=C;else if(t+1<e&&"["===m[t]){++t;var a,h,d=m[t++].toLowerCase(),u=((h=N.m[r+"::"+d])!==+h&&(h=N.m["*::"+d]),g.ia?("string"!=typeof(a=g.ia(r,d))&&(o=C,a=d),o&&h!==+h&&(h=N.d.NONE)):(a=d,h!==+h&&(o=C)),d=""),p=C;switch(/^[~^$*|]?=$/.test(m[t])&&(d=m[t++],u=m[t++],/^[0-9A-Za-z:_\-]+$/.test(u)?u='"'+u+'"':"]"===u&&(u='""',--t),/^"([^\"\\]|\\.)*"$/.test(u)||(o=C),p="i"===m[t])&&++t,"]"!==m[t]&&(++t,o=C),h){case N.d.CLASSES:case N.d.LOCAL_NAME:case N.d.NONE:break;case N.d.GLOBAL_NAME:case N.d.ID:case N.d.IDREF:"="!==d&&"~="!==d&&"$="!==d||'""'==u||p?"|="!==d&&""!==d&&(o=C):u='"'+u.substring(1,u.length-1)+x+'"';break;case N.d.URI:case N.d.URI_FRAGMENT:""!==d&&(o=C);break;default:o=C}o&&(l+="["+a.replace(/[^\w-]/g,"\\$&")+d+u+(p?" i]":"]"))}else{if(!(t<e&&":"===m[t]))break;if(h=m[++t],!tt.test(h))break;s+=":"+h}return(o=t!==e?C:o)&&(t=(r+i).replace(/[^ .*#\w-]/g,"\\$&")+l+s+n)&&c.push(t),o}" "===m[t]&&++t,e-1!==t&&" "===m[e]&&--e;for(var c=[],i=t,l=v,s=t;l&&s<e;++s){var o=m[s];E[o]!==E&&" "!==o||(n(i,s,o)?i=s+1:l=C)}return(l=n(i,e,"")?l:C)?(c.length&&(i=c.join(""),h.push(i=a!==f?"."+a+" "+i:i)),v):!r||r(m.slice(t,e))}for(var e,a=g.na,x=g.L,y=g.Aa,h=[],n=0,i=0,l=0;l<m.length;++l)("("==(e=m[l])||"["==e?(++i,v):")"==e||"]"==e?(i&&--i,v):" "!=m[l]||!i&&E[m[l-1]]!==E&&E[m[l+1]]!==E)&&(m[n++]=m[l]);for(m.length=n,n=m.length,l=i=0;l<n;++l)if(","===m[l]){if(!t(i,l))return f;i=l+1}return t(i,n)?h:f},Z=/^\w/,K=RegExp("^(?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*)(?: , (?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*))*$","i"),L=function(t){for(var e=(t=t.slice()).length,n=0,i=0;i<e;++i){var l=t[i];" "!=l&&(t[n++]=l)}return t.length=n,(t=t.join(" ")).length?K.test(t)?Z.test(t)?t:"not all , "+t:"not all":""},i=function(t,e,n,i){return lt(t,e,n,i,x,x).result.toString()},"undefined"!=typeof window&&(window.sanitizeCssProperty=S,window.sanitizeCssSelectorList=A,window.sanitizeStylesheet=i,window.sanitizeMediaQuery=L),y=function(t,e){var n=s(t);e.startStylesheet&&e.startStylesheet();for(var i=0,l=n.length;i<l;)i=" "===n[i]?i+1:i<l?"@"===n[i].charAt(0)?st(n,i,l,e,v):ot(n,i,l,e):i;e.endStylesheet&&e.endStylesheet()},et=/^-?[a-z]/i,i=function(t,e){for(var n=s(t),i=0,l=n.length;i<l;)i=" "!==n[i]?ht(n,i,l,e):i+1},"undefined"!=typeof window&&(window.parseCssStylesheet=y,window.parseCssDeclarations=i);var P,dt,ut,c,pt,ct,mt,m,gt,xt,yt,ft,Ct,Et,vt,St,bt,wt,Tt,O,g,At,N={d:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}},Lt=(N.atype=N.d,N.m={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0},N.ATTRIBS=N.m,N.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},N.eflags=N.c,N.f={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,var:0,video:0,wbr:2},N.ELEMENTS=N.f,N.Q={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},N.ELEMENT_DOM_INTERFACES=N.Q,N.P={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},N.ueffects=N.P,N.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1},N.URIEFFECTS=N.J,N.M={UNSANDBOXED:2,SANDBOXED:1,DATA:0},N.ltypes=N.M,N.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2},N.LOADERTYPES=N.I,"undefined"!=typeof window&&(window.html4=N),P=N,"undefined"!=typeof window&&(dt=window.parseCssDeclarations,ut=window.sanitizeCssProperty),c={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:" "},pt=/^#(\d+)$/,ct=/^#x([0-9A-Fa-f]+)$/,mt=/^[A-Za-z][A-za-z0-9]+$/,m="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):f,gt=/\0/g,xt=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,yt=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,ft=/&/g,Ct=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,Et=/[<]/g,vt=/>/g,St=/\"/g,bt=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,wt=3==="a,b".split(/(,)/).length,Tt=P.c.CDATA|P.c.RCDATA,O={},g={},At=/^(?:https?|mailto|data)$/i,(i={}).pa=i.escapeAttrib=It,i.ra=i.makeHtmlSanitizer=Gt,i.sa=i.makeSaxParser=Ot,i.ta=i.makeTagPolicy=Vt,i.wa=i.normalizeRCData=Pt,i.xa=i.sanitize=function(t,e,n,i){return Ft(t,Vt(e,n,i))},i.ya=i.sanitizeAttribs=kt,i.za=i.sanitizeWithPolicy=Ft,i.Ba=i.unescapeEntities=Rt,i.sanitize);function Mt(t,e){return e=e,c.hasOwnProperty(e)?c[e]:(n=e.match(pt))?String.fromCharCode(parseInt(n[1],10)):(n=e.match(ct))?String.fromCharCode(parseInt(n[1],16)):m&&mt.test(e)?(m.innerHTML="&"+e+";",n=m.textContent,c[e]=n):"&"+e+";";var n}function Rt(t){return t.replace(xt,Mt)}function It(t){return(""+t).replace(ft,"&amp;").replace(Et,"&lt;").replace(vt,"&gt;").replace(St,"&#34;")}function Pt(t){return t.replace(Ct,"&amp;$1").replace(Et,"&lt;").replace(vt,"&gt;")}function Ot(t){var r={z:t.z||t.cdata,A:t.A||t.comment,B:t.B||t.endDoc,t:t.t||t.endTag,e:t.e||t.pcdata,F:t.F||t.rcdata,H:t.H||t.startDoc,w:t.w||t.startTag};return function(t,e){var n=/(<\/|<\!--|<[!?]|[&<>])/g,i=t+"";if(wt)i=i.split(n);else{for(var l,s=[],o=0;(l=n.exec(i))!==f;)s.push(i.substring(o,l.index)),s.push(l[0]),o=l.index+l[0].length;s.push(i.substring(o)),i=s}Nt(r,i,0,{r:C,C:C},e)}}function H(t,e,n,i,l){return function(){Nt(t,e,n,i,l)}}function Nt(t,e,n,i,l){try{t.H&&0==n&&t.H(l);for(var s,o,r,a=e.length;n<a;){var h,d,u,p,c,m,g,x,y,f,C=e[n++],E=e[n];switch(C){case"&":yt.test(E)?(t.e&&t.e("&"+E,l,O,H(t,e,n,i,l)),n++):t.e&&t.e("&amp;",l,O,H(t,e,n,i,l));break;case"</":(s=/^([-\w:]+)[^\'\"]*/.exec(E))?s[0].length===E.length&&">"===e[n+1]?(n+=2,r=s[1].toLowerCase(),t.t&&t.t(r,l,O,H(t,e,n,i,l))):(m=t,g=l,x=O,h=i,n=(d=Ut(p=e,c=n))?(m.t&&m.t(d.name,g,x,H(m,p,c,h,g)),d.next):p.length):t.e&&t.e("&lt;/",l,O,H(t,e,n,i,l));break;case"<":(s=/^([-\w:]+)\s*\/?/.exec(E))?s[0].length===E.length&&">"===e[n+1]?(n+=2,r=s[1].toLowerCase(),t.w&&t.w(r,[],l,O,H(t,e,n,i,l)),(u=P.f[r])&Tt&&(n=Ht(e,{name:r,next:n,c:u},t,l,O,i))):(c=t,m=l,g=O,x=i,n=(y=Ut(p=e,n))?(c.w&&c.w(y.name,y.R,m,g,H(c,p,y.next,x,m)),y.c&Tt?Ht(p,y,c,m,g,x):y.next):p.length):t.e&&t.e("&lt;",l,O,H(t,e,n,i,l));break;case"\x3c!--":if(!i.C){for(o=n+1;o<a&&(">"!==e[o]||!/--$/.test(e[o-1]));o++);o<a?(t.A&&(f=e.slice(n,o).join(""),t.A(f.substr(0,f.length-2),l,O,H(t,e,o+1,i,l))),n=o+1):i.C=v}i.C&&t.e&&t.e("&lt;!--",l,O,H(t,e,n,i,l));break;case"<!":if(/^\w/.test(E)){if(!i.r){for(o=n+1;o<a&&">"!==e[o];o++);o<a?n=o+1:i.r=v}i.r&&t.e&&t.e("&lt;!",l,O,H(t,e,n,i,l))}else t.e&&t.e("&lt;!",l,O,H(t,e,n,i,l));break;case"<?":if(!i.r){for(o=n+1;o<a&&">"!==e[o];o++);o<a?n=o+1:i.r=v}i.r&&t.e&&t.e("&lt;?",l,O,H(t,e,n,i,l));break;case">":t.e&&t.e("&gt;",l,O,H(t,e,n,i,l));break;case"":break;default:t.e&&t.e(C,l,O,H(t,e,n,i,l))}}t.B&&t.B(l)}catch(t){if(t!==O)throw t}}function Ht(t,e,n,i,l,s){var o=t.length;g.hasOwnProperty(e.name)||(g[e.name]=RegExp("^"+e.name+"(?:[\\s\\/]|$)","i"));for(var r=g[e.name],a=e.next,h=e.next+1;h<o&&("</"!==t[h-1]||!r.test(t[h]));h++);if(h<o&&--h,o=t.slice(a,h).join(""),e.c&P.c.CDATA)n.z&&n.z(o,i,l,H(n,t,h,s,i));else{if(!(e.c&P.c.RCDATA))throw Error("bug");n.F&&n.F(Pt(o),i,l,H(n,t,h,s,i))}return h}function Ut(t,e){var n=/^([-\w:]+)/.exec(t[e]),i={};i.name=n[1].toLowerCase(),i.c=P.f[i.name];for(var l=t[e].substr(n[0].length),s=e+1,o=t.length;s<o&&">"!==t[s];s++)l+=t[s];if(!(o<=s)){for(var r=[];""!==l;)if(n=bt.exec(l))if(n[4]&&!n[5]||n[6]&&!n[7]){for(var n=n[4]||n[6],a=C,l=[l,t[s++]];s<o;s++){if(a){if(">"===t[s])break}else 0<=t[s].indexOf(n)&&(a=v);l.push(t[s])}if(o<=s)break;l=l.join("")}else{var h,d,a=n[1].toLowerCase();h=n[2]?Rt((h=34!==(d=(h=n[3]).charCodeAt(0))&&39!==d?h:h.substr(1,h.length-2)).replace(gt,"")):"",r.push(a,h),l=l.substr(n[0].length)}else l=l.replace(/^[\s\S][^a-z\s]*/,"");return i.R=r,i.next=s+1,i}}function Gt(h){function t(t,e){u||e.push(t)}var d,u;return Ot({startDoc:function(){d=[],u=C},startTag:function(t,e,n){if(!u&&P.f.hasOwnProperty(t)){var i=P.f[t];if(!(i&P.c.FOLDABLE)){var l,s,o=h(t,e);if(o){if("object"!=typeof o)throw Error("tagPolicy did not return object (old API?)");if(!("attribs"in o))throw Error("tagPolicy gave no attribs");e=o.attribs,o="tagName"in o?(l=o.tagName,P.f[l]):(l=t,i),i&P.c.OPTIONAL_ENDTAG&&(!(s=d[d.length-1])||s.D!==t||s.v===l&&t===l||n.push("</",s.v,">")),i&P.c.EMPTY||d.push({D:t,v:l}),n.push("<",l),t=0;for(s=e.length;t<s;t+=2){var r=e[t],a=e[t+1];a!==f&&a!==x&&n.push(" ",r,'="',It(a),'"')}n.push(">"),i&P.c.EMPTY&&!(o&P.c.EMPTY)&&n.push("</",l,">")}else u=!(i&P.c.EMPTY)}}},endTag:function(t,e){if(u)u=C;else if(P.f.hasOwnProperty(t)){var n=P.f[t];if(!(n&(P.c.EMPTY|P.c.FOLDABLE))){if(n&P.c.OPTIONAL_ENDTAG)for(n=d.length;0<=--n;){var i=d[n].D;if(i===t)break;if(!(P.f[i]&P.c.OPTIONAL_ENDTAG))return}else for(n=d.length;0<=--n&&d[n].D!==t;);if(!(n<0)){for(i=d.length;--i>n;){var l=d[i].v;P.f[l]&P.c.OPTIONAL_ENDTAG||e.push("</",l,">")}n<d.length&&(t=d[n].v),d.length=n,e.push("</",t,">")}}}},pcdata:t,rcdata:t,cdata:t,endDoc:function(t){for(;d.length;d.length--)t.push("</",d[d.length-1].v,">")}})}function Dt(t,e,n,i,l){if(l)try{var s,o=a.parse(""+t);if(o&&(!o.K()||At.test(o.W())))return(s=l(o,e,n,i))?s.toString():f}catch(t){}return f}function U(t,e,n,i,l){var s;n||t(e+" removed",{S:"removed",tagName:e}),i!==l&&(s="changed",i&&!l?s="removed":!i&&l&&(s="added"),t(e+"."+n+" "+s,{S:s,tagName:e,la:n,oldValue:i,newValue:l}))}function _t(t,e,n){return t.hasOwnProperty(e=e+"::"+n)||t.hasOwnProperty(e="*::"+n)?t[e]:void 0}function kt(t,e,i,n,l){for(var s=0;s<e.length;s+=2){var o,r,a=e[s],h=e[s+1],d=h,u=f;if((u=P.m.hasOwnProperty(o=t+"::"+a)||P.m.hasOwnProperty(o="*::"+a)?P.m[o]:u)!==f)switch(u){case P.d.NONE:break;case P.d.SCRIPT:h=f,l&&U(l,t,a,d,h);break;case P.d.STYLE:void 0===dt?(h=f,l&&U(l,t,a,d,h)):(r=[],dt(h,{declaration:function(t,e){var n=t.toLowerCase();ut(n,e,i?function(t){return Dt(t,P.P.ja,P.M.ka,{TYPE:"CSS",CSS_PROP:n},i)}:f),e.length&&r.push(n+": "+e.join(" "))}}),h=0<r.length?r.join(" ; "):f,l&&U(l,t,a,d,h));break;case P.d.ID:case P.d.IDREF:case P.d.IDREFS:case P.d.GLOBAL_NAME:case P.d.LOCAL_NAME:case P.d.CLASSES:h=n?n(h):h,l&&U(l,t,a,d,h);break;case P.d.URI:h=Dt(h,_t(P.J,t,a),_t(P.I,t,a),{TYPE:"MARKUP",XML_ATTR:a,XML_TAG:t},i),l&&U(l,t,a,d,h);break;case P.d.URI_FRAGMENT:h&&"#"===h.charAt(0)?(h=h.substring(1),(h=n?n(h):h)!==f&&h!==x&&(h="#"+h)):h=f,l&&U(l,t,a,d,h);break;default:h=f,l&&U(l,t,a,d,h)}else h=f,l&&U(l,t,a,d,h);e[s+1]=h}return e}function Vt(n,i,l){return function(t,e){if(!(P.f[t]&P.c.UNSAFE))return{attribs:kt(t,e,n,i,l)};l&&U(l,t,x,x,x)}}function Ft(t,e){var n=[];return Gt(e)(t,n),n.join("")}"undefined"!=typeof window&&(window.html=i,window.html_sanitize=Lt)}(),function(){var t,s,v,e,n,G,D,_,x=void 0,S=!0,f=null,C=!1,i=["aliceblue,antiquewhite,aqua,aquamarine,azure,beige,bisque,black,blanchedalmond,blue,blueviolet,brown,burlywood,cadetblue,chartreuse,chocolate,coral,cornflowerblue,cornsilk,crimson,cyan,darkblue,darkcyan,darkgoldenrod,darkgray,darkgreen,darkkhaki,darkmagenta,darkolivegreen,darkorange,darkorchid,darkred,darksalmon,darkseagreen,darkslateblue,darkslategray,darkturquoise,darkviolet,deeppink,deepskyblue,dimgray,dodgerblue,firebrick,floralwhite,forestgreen,fuchsia,gainsboro,ghostwhite,gold,goldenrod,gray,green,greenyellow,honeydew,hotpink,indianred,indigo,ivory,khaki,lavender,lavenderblush,lawngreen,lemonchiffon,lightblue,lightcoral,lightcyan,lightgoldenrodyellow,lightgreen,lightgrey,lightpink,lightsalmon,lightseagreen,lightskyblue,lightslategray,lightsteelblue,lightyellow,lime,limegreen,linen,magenta,maroon,mediumaquamarine,mediumblue,mediumorchid,mediumpurple,mediumseagreen,mediumslateblue,mediumspringgreen,mediumturquoise,mediumvioletred,midnightblue,mintcream,mistyrose,moccasin,navajowhite,navy,oldlace,olive,olivedrab,orange,orangered,orchid,palegoldenrod,palegreen,paleturquoise,palevioletred,papayawhip,peachpuff,peru,pink,plum,powderblue,purple,red,rosybrown,royalblue,saddlebrown,salmon,sandybrown,seagreen,seashell,sienna,silver,skyblue,slateblue,slategray,snow,springgreen,steelblue,tan,teal,thistle,tomato,transparent,turquoise,violet,wheat,white,whitesmoke,yellow,yellowgreen".split(","),"all-scroll,col-resize,crosshair,default,e-resize,hand,help,move,n-resize,ne-resize,no-drop,not-allowed,nw-resize,pointer,progress,row-resize,s-resize,se-resize,sw-resize,text,vertical-text,w-resize,wait".split(","),"armenian,decimal,decimal-leading-zero,disc,georgian,lower-alpha,lower-greek,lower-latin,lower-roman,square,upper-alpha,upper-latin,upper-roman".split(","),"100,200,300,400,500,600,700,800,900,bold,bolder,lighter".split(","),"block-level,inline-level,table-caption,table-cell,table-column,table-column-group,table-footer-group,table-header-group,table-row,table-row-group".split(","),"condensed,expanded,extra-condensed,extra-expanded,narrower,semi-condensed,semi-expanded,ultra-condensed,ultra-expanded,wider".split(","),"inherit,inline,inline-block,inline-box,inline-flex,inline-grid,inline-list-item,inline-stack,inline-table,run-in".split(","),"behind,center-left,center-right,far-left,far-right,left-side,leftwards,right-side,rightwards".split(","),"large,larger,small,smaller,x-large,x-small,xx-large,xx-small".split(","),"dashed,dotted,double,groove,outset,ridge,solid".split(","),"ease,ease-in,ease-in-out,ease-out,linear,step-end,step-start".split(","),"at,closest-corner,closest-side,ellipse,farthest-corner,farthest-side".split(","),"baseline,middle,sub,super,text-bottom,text-top".split(","),"caption,icon,menu,message-box,small-caption,status-bar".split(","),"fast,faster,slow,slower,x-fast,x-slow".split(","),["above","below","higher","level","lower"],["cursive","fantasy","monospace","sans-serif","serif"],["loud","silent","soft","x-loud","x-soft"],["no-repeat","repeat-x","repeat-y","round","space"],["blink","line-through","overline","underline"],["block","flex","grid","table"],["high","low","x-high","x-low"],["nowrap","pre","pre-line","pre-wrap"],["absolute","relative","static"],["alternate","alternate-reverse","reverse"],["border-box","content-box","padding-box"],["capitalize","lowercase","uppercase"],["child","female","male"],["=","opacity"],["backwards","forwards"],["bidi-override","embed"],["bottom","top"],["break-all","keep-all"],["clip","ellipsis"],["contain","cover"],["continuous","digits"],["end","start"],["flat","preserve-3d"],["hide","show"],["horizontal","vertical"],["inside","outside"],["italic","oblique"],["left","right"],["ltr","rtl"],["no-content","no-display"],["paused","running"],["suppress","unrestricted"],["thick","thin"],[","],["/"],["all"],["always"],["auto"],["avoid"],["both"],["break-word"],["center"],["circle"],["code"],["collapse"],["contents"],["fixed"],["hidden"],["infinite"],["inset"],["invert"],["justify"],["list-item"],["local"],["medium"],["mix"],["none"],["normal"],["once"],["repeat"],["scroll"],["separate"],["small-caps"],["spell-out"],["to"],["visible"]],b={animation:{cssPropBits:517,cssLitGroup:[i[10],i[24],i[29],i[45],i[48],i[54],i[63],i[71],i[72]],cssFns:["cubic-bezier()","steps()"]},"animation-delay":{cssPropBits:5,cssLitGroup:[i[48]],cssFns:[]},"animation-direction":{cssPropBits:0,cssLitGroup:[i[24],i[48],i[72]],cssFns:[]},"animation-duration":"animation-delay","animation-fill-mode":{cssPropBits:0,cssLitGroup:[i[29],i[48],i[54],i[71]],cssFns:[]},"animation-iteration-count":{cssPropBits:5,cssLitGroup:[i[48],i[63]],cssFns:[]},"animation-name":{cssPropBits:512,cssLitGroup:[i[48],i[71]],cssFns:[]},"animation-play-state":{cssPropBits:0,cssLitGroup:[i[45],i[48]],cssFns:[]},"animation-timing-function":{cssPropBits:0,cssLitGroup:[i[10],i[48]],cssFns:["cubic-bezier()","steps()"]},appearance:{cssPropBits:0,cssLitGroup:[i[71]],cssFns:[]},azimuth:{cssPropBits:5,cssLitGroup:[i[7],i[42],i[56]],cssFns:[]},"backface-visibility":{cssPropBits:0,cssLitGroup:[i[59],i[62],i[80]],cssFns:[]},background:{cssPropBits:23,cssLitGroup:[i[0],i[18],i[25],i[31],i[34],i[42],i[48],i[49],i[52],i[56],i[61],i[68],i[71],i[74],i[75]],cssFns:"image(),linear-gradient(),radial-gradient(),repeating-linear-gradient(),repeating-radial-gradient(),rgb(),rgba()".split(",")},"background-attachment":{cssPropBits:0,cssLitGroup:[i[48],i[61],i[68],i[75]],cssFns:[]},"background-color":{cssPropBits:2,cssLitGroup:[i[0]],cssFns:["rgb()","rgba()"]},"background-image":{cssPropBits:16,cssLitGroup:[i[48],i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"background-position":{cssPropBits:5,cssLitGroup:[i[31],i[42],i[48],i[56]],cssFns:[]},"background-repeat":{cssPropBits:0,cssLitGroup:[i[18],i[48],i[74]],cssFns:[]},"background-size":{cssPropBits:5,cssLitGroup:[i[34],i[48],i[52]],cssFns:[]},border:{cssPropBits:7,cssLitGroup:[i[0],i[9],i[47],i[62],i[64],i[69],i[71]],cssFns:["rgb()","rgba()"]},"border-bottom":"border","border-bottom-color":"background-color","border-bottom-left-radius":{cssPropBits:5,cssFns:[]},"border-bottom-right-radius":"border-bottom-left-radius","border-bottom-style":{cssPropBits:0,cssLitGroup:[i[9],i[62],i[64],i[71]],cssFns:[]},"border-bottom-width":{cssPropBits:5,cssLitGroup:[i[47],i[69]],cssFns:[]},"border-collapse":{cssPropBits:0,cssLitGroup:[i[59],i[76]],cssFns:[]},"border-color":"background-color","border-left":"border","border-left-color":"background-color","border-left-style":"border-bottom-style","border-left-width":"border-bottom-width","border-radius":{cssPropBits:5,cssLitGroup:[i[49]],cssFns:[]},"border-right":"border","border-right-color":"background-color","border-right-style":"border-bottom-style","border-right-width":"border-bottom-width","border-spacing":"border-bottom-left-radius","border-style":"border-bottom-style","border-top":"border","border-top-color":"background-color","border-top-left-radius":"border-bottom-left-radius","border-top-right-radius":"border-bottom-left-radius","border-top-style":"border-bottom-style","border-top-width":"border-bottom-width","border-width":"border-bottom-width",bottom:{cssPropBits:5,cssLitGroup:[i[52]],cssFns:[]},box:{cssPropBits:0,cssLitGroup:[i[60],i[71],i[72]],cssFns:[]},"box-shadow":{cssPropBits:7,cssLitGroup:[i[0],i[48],i[64],i[71]],cssFns:["rgb()","rgba()"]},"box-sizing":{cssPropBits:0,cssLitGroup:[i[25]],cssFns:[]},"caption-side":{cssPropBits:0,cssLitGroup:[i[31]],cssFns:[]},clear:{cssPropBits:0,cssLitGroup:[i[42],i[54],i[71]],cssFns:[]},clip:{cssPropBits:0,cssLitGroup:[i[52]],cssFns:["rect()"]},color:"background-color",content:{cssPropBits:8,cssLitGroup:[i[71],i[72]],cssFns:[]},cue:{cssPropBits:16,cssLitGroup:[i[71]],cssFns:[]},"cue-after":"cue","cue-before":"cue",cursor:{cssPropBits:16,cssLitGroup:[i[1],i[48],i[52]],cssFns:[]},direction:{cssPropBits:0,cssLitGroup:[i[43]],cssFns:[]},display:{cssPropBits:0,cssLitGroup:[i[4],i[6],i[20],i[52],i[67],i[71]],cssFns:[]},"display-extras":{cssPropBits:0,cssLitGroup:[i[67],i[71]],cssFns:[]},"display-inside":{cssPropBits:0,cssLitGroup:[i[20],i[52]],cssFns:[]},"display-outside":{cssPropBits:0,cssLitGroup:[i[4],i[71]],cssFns:[]},elevation:{cssPropBits:5,cssLitGroup:[i[15]],cssFns:[]},"empty-cells":{cssPropBits:0,cssLitGroup:[i[38]],cssFns:[]},filter:{cssPropBits:0,cssFns:["alpha()"]},float:{cssPropBits:0,cssLitGroup:[i[42],i[71]],cssFns:[]},font:{cssPropBits:73,cssLitGroup:[i[3],i[8],i[13],i[16],i[41],i[48],i[49],i[69],i[72],i[77]],cssFns:[]},"font-family":{cssPropBits:72,cssLitGroup:[i[16],i[48]],cssFns:[]},"font-size":{cssPropBits:1,cssLitGroup:[i[8],i[69]],cssFns:[]},"font-stretch":{cssPropBits:0,cssLitGroup:[i[5],i[72]],cssFns:[]},"font-style":{cssPropBits:0,cssLitGroup:[i[41],i[72]],cssFns:[]},"font-variant":{cssPropBits:0,cssLitGroup:[i[72],i[77]],cssFns:[]},"font-weight":{cssPropBits:0,cssLitGroup:[i[3],i[72]],cssFns:[]},height:"bottom",left:"bottom","letter-spacing":{cssPropBits:5,cssLitGroup:[i[72]],cssFns:[]},"line-height":{cssPropBits:1,cssLitGroup:[i[72]],cssFns:[]},"list-style":{cssPropBits:16,cssLitGroup:[i[2],i[40],i[57],i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-image":{cssPropBits:16,cssLitGroup:[i[71]],cssFns:["image()","linear-gradient()","radial-gradient()","repeating-linear-gradient()","repeating-radial-gradient()"]},"list-style-position":{cssPropBits:0,cssLitGroup:[i[40]],cssFns:[]},"list-style-type":{cssPropBits:0,cssLitGroup:[i[2],i[57],i[71]],cssFns:[]},margin:"bottom","margin-bottom":"bottom","margin-left":"bottom","margin-right":"bottom","margin-top":"bottom","max-height":{cssPropBits:1,cssLitGroup:[i[52],i[71]],cssFns:[]},"max-width":"max-height","min-height":{cssPropBits:1,cssLitGroup:[i[52]],cssFns:[]},"min-width":"min-height",opacity:{cssPropBits:1,cssFns:[]},outline:{cssPropBits:7,cssLitGroup:[i[0],i[9],i[47],i[62],i[64],i[65],i[69],i[71]],cssFns:["rgb()","rgba()"]},"outline-color":{cssPropBits:2,cssLitGroup:[i[0],i[65]],cssFns:["rgb()","rgba()"]},"outline-style":"border-bottom-style","outline-width":"border-bottom-width",overflow:{cssPropBits:0,cssLitGroup:[i[52],i[62],i[75],i[80]],cssFns:[]},"overflow-wrap":{cssPropBits:0,cssLitGroup:[i[55],i[72]],cssFns:[]},"overflow-x":{cssPropBits:0,cssLitGroup:[i[44],i[52],i[62],i[75],i[80]],cssFns:[]},"overflow-y":"overflow-x",padding:"opacity","padding-bottom":"opacity","padding-left":"opacity","padding-right":"opacity","padding-top":"opacity","page-break-after":{cssPropBits:0,cssLitGroup:[i[42],i[51],i[52],i[53]],cssFns:[]},"page-break-before":"page-break-after","page-break-inside":{cssPropBits:0,cssLitGroup:[i[52],i[53]],cssFns:[]},pause:"border-bottom-left-radius","pause-after":"border-bottom-left-radius","pause-before":"border-bottom-left-radius",perspective:{cssPropBits:5,cssLitGroup:[i[71]],cssFns:[]},"perspective-origin":{cssPropBits:5,cssLitGroup:[i[31],i[42],i[56]],cssFns:[]},pitch:{cssPropBits:5,cssLitGroup:[i[21],i[69]],cssFns:[]},"pitch-range":"border-bottom-left-radius","play-during":{cssPropBits:16,cssLitGroup:[i[52],i[70],i[71],i[74]],cssFns:[]},position:{cssPropBits:0,cssLitGroup:[i[23]],cssFns:[]},quotes:{cssPropBits:8,cssLitGroup:[i[71]],cssFns:[]},resize:{cssPropBits:0,cssLitGroup:[i[39],i[54],i[71]],cssFns:[]},richness:"border-bottom-left-radius",right:"bottom",speak:{cssPropBits:0,cssLitGroup:[i[71],i[72],i[78]],cssFns:[]},"speak-header":{cssPropBits:0,cssLitGroup:[i[51],i[73]],cssFns:[]},"speak-numeral":{cssPropBits:0,cssLitGroup:[i[35]],cssFns:[]},"speak-punctuation":{cssPropBits:0,cssLitGroup:[i[58],i[71]],cssFns:[]},"speech-rate":{cssPropBits:5,cssLitGroup:[i[14],i[69]],cssFns:[]},stress:"border-bottom-left-radius","table-layout":{cssPropBits:0,cssLitGroup:[i[52],i[61]],cssFns:[]},"text-align":{cssPropBits:0,cssLitGroup:[i[42],i[56],i[66]],cssFns:[]},"text-decoration":{cssPropBits:0,cssLitGroup:[i[19],i[71]],cssFns:[]},"text-indent":"border-bottom-left-radius","text-overflow":{cssPropBits:8,cssLitGroup:[i[33]],cssFns:[]},"text-shadow":"box-shadow","text-transform":{cssPropBits:0,cssLitGroup:[i[26],i[71]],cssFns:[]},"text-wrap":{cssPropBits:0,cssLitGroup:[i[46],i[71],i[72]],cssFns:[]},top:"bottom",transform:{cssPropBits:0,cssLitGroup:[i[71]],cssFns:"matrix(),perspective(),rotate(),rotate3d(),rotatex(),rotatey(),rotatez(),scale(),scale3d(),scalex(),scaley(),scalez(),skew(),skewx(),skewy(),translate(),translate3d(),translatex(),translatey(),translatez()".split(",")},"transform-origin":"perspective-origin","transform-style":{cssPropBits:0,cssLitGroup:[i[37]],cssFns:[]},transition:{cssPropBits:1029,cssLitGroup:[i[10],i[48],i[50],i[71]],cssFns:["cubic-bezier()","steps()"]},"transition-delay":"animation-delay","transition-duration":"animation-delay","transition-property":{cssPropBits:1024,cssLitGroup:[i[48],i[50]],cssFns:[]},"transition-timing-function":"animation-timing-function","unicode-bidi":{cssPropBits:0,cssLitGroup:[i[30],i[72]],cssFns:[]},"vertical-align":{cssPropBits:5,cssLitGroup:[i[12],i[31]],cssFns:[]},visibility:"backface-visibility","voice-family":{cssPropBits:8,cssLitGroup:[i[27],i[48]],cssFns:[]},volume:{cssPropBits:1,cssLitGroup:[i[17],i[69]],cssFns:[]},"white-space":{cssPropBits:0,cssLitGroup:[i[22],i[72]],cssFns:[]},width:"min-height","word-break":{cssPropBits:0,cssLitGroup:[i[32],i[72],i[55]],cssFns:[]},"word-spacing":"letter-spacing","word-wrap":"overflow-wrap","z-index":"bottom",zoom:"line-height","cubic-bezier()":"animation-delay","steps()":{cssPropBits:5,cssLitGroup:[i[36],i[48]],cssFns:[]},"image()":{cssPropBits:18,cssLitGroup:[i[0],i[48]],cssFns:["rgb()","rgba()"]},"linear-gradient()":{cssPropBits:7,cssLitGroup:[i[0],i[31],i[42],i[48],i[79]],cssFns:["rgb()","rgba()"]},"radial-gradient()":{cssPropBits:7,cssLitGroup:[i[0],i[11],i[31],i[42],i[48],i[56],i[57]],cssFns:["rgb()","rgba()"]},"repeating-linear-gradient()":"linear-gradient()","repeating-radial-gradient()":"radial-gradient()","rgb()":{cssPropBits:1,cssLitGroup:[i[48]],cssFns:[]},"rgba()":"rgb()","rect()":{cssPropBits:5,cssLitGroup:[i[48],i[52]],cssFns:[]},"alpha()":{cssPropBits:1,cssLitGroup:[i[28]],cssFns:[]},"matrix()":"animation-delay","perspective()":"border-bottom-left-radius","rotate()":"border-bottom-left-radius","rotate3d()":"animation-delay","rotatex()":"border-bottom-left-radius","rotatey()":"border-bottom-left-radius","rotatez()":"border-bottom-left-radius","scale()":"animation-delay","scale3d()":"animation-delay","scalex()":"border-bottom-left-radius","scaley()":"border-bottom-left-radius","scalez()":"border-bottom-left-radius","skew()":"animation-delay","skewx()":"border-bottom-left-radius","skewy()":"border-bottom-left-radius","translate()":"animation-delay","translate3d()":"animation-delay","translatex()":"border-bottom-left-radius","translatey()":"border-bottom-left-radius","translatez()":"border-bottom-left-radius"};for(t in b)"string"==typeof b[t]&&Object.hasOwnProperty.call(b,t)&&(b[t]=b[b[t]]);function k(t){var e=parseInt(t.substring(1),16);return 65535<e?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):e==e?String.fromCharCode(e):t[1]<" "?"":t[1]}function V(t,e){return'"'+t.replace(/[\u0000-\u001f\\\"<>]/g,e)+'"'}function F(t){return e[t]||(e[t]="\\"+t.charCodeAt(0).toString(16)+" ")}function B(t){return n[t]||(n[t]=(t<""?"%0":"%")+t.charCodeAt(0).toString(16))}"undefined"!=typeof window&&(window.cssSchema=b),e={"\\":"\\\\"},n={"\\":"%5c"},G=RegExp("\\uFEFF|U[+][0-9A-F?]{1,6}(?:-[0-9A-F]{1,6})?|url[(][\\t\\n\\f ]*(?:\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|(?:[\\t\\x21\\x23-\\x26\\x28-\\x5b\\x5d-\\x7e]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)[\\t\\n\\f ]*[)]|(?!url[(])-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*[(]|(?:@?-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))|#)(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*|\"(?:'|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*\"|'(?:\"|[^'\"\\n\\f\\\\]|\\\\[\\s\\S])*'|[-+]?(?:[0-9]+(?:[.][0-9]+)?|[.][0-9]+)(?:%|-?(?:[a-zA-Z_]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))(?:[a-zA-Z0-9_-]|[\\u0080-\\ud7ff\\ue000-\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]|\\\\(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff]))*)?|\x3c!--|--\x3e|[\\t\\n\\f ]+|/(?:[*][^*]*[*]+(?:[^/][^*]*[*]+)*/|/[^\\n\\f]*)|[~|^$*]=|[^\"'\\\\/]|/(?![/*])","gi"),D=RegExp("\\\\(?:(?:[0-9a-fA-F]{1,6}[\\t\\n\\f ]?|[\\u0020-\\u007e\\u0080-\\ud7ff\\ue000\\ufffd]|[\\ud800-\\udbff][\\udc00-\\udfff])|[\\n\\f])","g"),_=RegExp("^url\\([\\t\\n\\f ]*[\"']?|[\"']?[\\t\\n\\f ]*\\)$","gi"),v=function(t){return t.replace(D,k)},s=function(t){for(var e=0,n=" ",i=0,l=(t=(""+t).replace(/\r\n?/g,"\n").match(G)||[]).length;i<l;++i){var s=v(t[i]),o=s.length,r=s.charCodeAt(0);n==(s=34==r||39==r?V(s.substring(1,o-1),F):47==r&&1<o||"\\"==s||"--\x3e"==s||"\x3c!--"==s||"\ufeff"==s||r<=32?" ":/url\(/i.test(s)?"url("+V(s.replace(_,""),B)+")":s)&&" "==s||(t[e++]=n=s)}return t.length=e,t},"undefined"!=typeof window&&(window.lexCss=s,window.decodeCss=v);z=RegExp(/(\/|^)(?:[^./][^/]*|\.{2,}(?:[^./][^/]*)|\.{3,}[^/]*)\/\.\.(?:\/|$)/),o=/^(?:\.\.\/)*(?:\.\.$)?/,u.prototype.toString=function(){var t=[];return f!==this.j&&t.push(this.j,":"),f!==this.k&&(t.push("//"),f!==this.n&&t.push(this.n,"@"),t.push(this.k),f!==this.h)&&t.push(":",this.h.toString()),f!==this.g&&t.push(this.g),f!==this.l&&t.push("?",this.l),f!==this.o&&t.push("#",this.o),t.join("")},u.prototype.T=function(){return new u(this.j,this.n,this.k,this.h,this.g,this.l,this.o)},u.prototype.W=function(){return this.j&&decodeURIComponent(this.j).toLowerCase()},u.prototype.ga=function(t){this.j=t||f},u.prototype.K=function(){return f!==this.j},u.prototype.da=function(t){this.n=t||f},u.prototype.X=function(){return f!==this.n},u.prototype.ea=function(t){this.k=t||f,this.G(this.g)},u.prototype.Y=function(){return f!==this.k},u.prototype.V=function(){return this.h&&decodeURIComponent(this.h)},u.prototype.ca=function(t){if(t){if((t=Number(t))!==(65535&t))throw Error("Bad port number "+t);this.h=""+t}else this.h=f},u.prototype.$=function(){return f!==this.h},u.prototype.U=function(){return this.g&&decodeURIComponent(this.g)},u.prototype.G=function(t){t?(t=""+t,this.g=!this.k||/^\//.test(t)?t:"/"+t):this.g=f},u.prototype.O=function(t){this.l=t||f},u.prototype.aa=function(){return f!==this.l},u.prototype.ba=function(t){if("object"==typeof t&&!(t instanceof Array)&&(t instanceof Object||"[object Array]"!==Object.prototype.toString.call(t))){var e,n=[],i=-1;for(e in t){var l=t[e];"string"==typeof l&&(n[++i]=e,n[++i]=l)}t=n}for(var n=[],i="",s=0;s<t.length;)e=t[s++],l=t[s++],n.push(i,encodeURIComponent(e.toString())),i="&",l&&n.push("=",encodeURIComponent(l.toString()));this.l=n.join("")},u.prototype.fa=function(t){this.o=t||f},u.prototype.Z=function(){return f!==this.o},Y=/^(?:([^:/?#]+):)?(?:\/\/(?:([^/?#]*)@)?([^/?#:@]*)(?::([0-9]+))?)?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,r=/[#\/\?@]/g,W=/[\#\?]/g,u.parse=l,u.create=function(t,e,n,i,l,s,o){return t=new u(h(t,r),h(e,r),"string"==typeof n?encodeURIComponent(n):f,0<i?i.toString():f,h(l,W),f,"string"==typeof o?encodeURIComponent(o):f),s&&("string"==typeof s?t.O(s.replace(/[^?&=0-9A-Za-z_\-~.%]/g,j)):t.ba(s)),t},u.N=X,u.ma=d,u.ha={ua:function(t){return/\.html$/.test(l(t).U())?"text/html":"application/javascript"},N:function(t,e){return t?X(l(t),l(e)).toString():""+e}};var z,o,Y,r,W,a=u;function l(t){return(t=(""+t).match(Y))?new u(p(t[1]),p(t[2]),p(t[3]),p(t[4]),p(t[5]),p(t[6]),p(t[7])):f}function h(t,e){return"string"==typeof t?encodeURI(t).replace(e,j):f}function j(t){return t=t.charCodeAt(0),"%"+"0123456789ABCDEF".charAt(t>>4&15)+"0123456789ABCDEF".charAt(15&t)}function d(t){if(t===f)return f;for(var e,t=t.replace(/(^|\/)\.(?:\/|$)/g,"$1").replace(/\/{2,}/g,"/"),n=z;(e=t.replace(n,"$1"))!=t;t=e);return t}function X(t,e){var n,t=t.T(),i=e.K(),l=(i?t.ga(e.j):i=e.X(),i?t.da(e.n):i=e.Y(),i?t.ea(e.k):i=e.$(),e.g),s=d(l);return i?(t.ca(e.V()),s=s&&s.replace(o,"")):(i=!!l)?47!==s.charCodeAt(0)&&(s=d(t.g||"").replace(o,""),s=d(((n=s.lastIndexOf("/")+1)?s.substring(0,n):"")+d(l)).replace(o,"")):(s=s&&s.replace(o,""))!==l&&t.G(s),i?t.G(s):i=e.aa(),i?t.O(e.l):i=e.Z(),i&&t.fa(e.o),t}function u(t,e,n,i,l,s,o){this.j=t,this.n=e,this.k=n,this.h=i,this.g=l,this.l=s,this.o=o}function p(t){return"string"==typeof t&&0<t.length?t:f}"undefined"!=typeof window&&(window.URI=a);var w,Z,K,q,Q,J,$,tt,E,y,et,T=x,A=x,L=x;function nt(t){return"string"==typeof t?'url("'+t.replace(q,it)+'")':'url("about:blank")'}function it(t){return Q[t]}function M(t,e){return t?a.ha.N(t,e):e}function R(t,e,n){var i;return!n||!(i=(""+t).match(J))||i[1]&&!$.test(i[1])?f:n(t,e)}function I(t){return t.replace(/^-(?:apple|css|epub|khtml|moz|mso?|o|rim|wap|webkit|xv)-(?=[a-z])/,"")}function lt(r,t,a,h,d,u,e){function n(){g=m.length&&m[m.length-1]===f}var p=x,c=e||[0],m=[],g=C;return y(t,{startStylesheet:function(){p=[]},endStylesheet:function(){},startAtrule:function(t,e){var n,i,l,s,o;g?t=f:"@media"===t?p.push("@media"," ",L(e)):"@keyframes"===t||"@-webkit-keyframes"===t?(s=e[0],t=1!==e.length||/__$|[^\w\-]/.test(s)?f:(p.push(t," ",s+a.L),"@keyframes")):"@import"===t&&0<e.length&&(t=f,"function"==typeof u?"not all"!==(n=L(e.slice(1)))&&(++c[0],i=[],p.push(i),l=R(M(r,(s=e[0],(o=(o=(o=(o=(o=/^\s*["]([^"]*)["]\s*$/.exec(s))||/^\s*[']([^']*)[']\s*$/.exec(s))||/^\s*url\s*[(]["]([^"]*)["][)]\s*$/.exec(s))||/^\s*url\s*[(][']([^']*)['][)]\s*$/.exec(s))||/^\s*url\s*[(]([^)]*)[)]\s*$/.exec(s))?o[1]:f)),function(t){var e=lt(l,t.qa,a,h,d,u,c);--c[0],t=n?{toString:function(){return"@media "+n+" {"+e.result+"}"}}:e.result,i[0]=t,u(t,!!c[0])},d)):window.console&&window.console.log("@import "+e.join(" ")+" elided")),g=!t,m.push(t)},endAtrule:function(){m.pop(),g||p.push(";"),n()},startBlock:function(){g||p.push("{")},endBlock:function(){g||(p.push("}"),g=S)},startRuleset:function(t){var e;g||(e=x,"@keyframes"===m[m.length-1]?(e=t.join(" ").match(/^ *(?:from|to|\d+(?:\.\d+)?%) *(?:, *(?:from|to|\d+(?:\.\d+)?%) *)*$/i),g=!e,e=e&&e[0].replace(/ +/g,"")):(t=A(t,a))&&t.length?e=t.join(", "):g=S,g)||p.push(e,"{"),m.push(f)},endRuleset:function(){m.pop(),g||p.push("}"),n()},declaration:function(t,e){var n,i;g||(n=C,2<=(i=e.length)&&"!"===e[i-2]&&"important"===e[i-1].toLowerCase()&&(n=S,e.length-=2),T(t,e,h,r,a.L),e.length&&p.push(t,":",e.join(" "),n?" !important;":";"))}}),{result:{toString:function(){return p.join("")}},va:!!c[0]}}function st(t,e,n,i,l){for(var s,o=e++;e<n&&"{"!==t[e]&&";"!==t[e];)++e;return e<n&&(l||";"===t[e])&&(s=e,(l=1+o)<n&&" "===t[l]&&++l,l<s&&" "===t[s-1]&&--s,i.startAtrule&&i.startAtrule(t[o].toLowerCase(),t.slice(l,s)),e="{"===t[e]?function t(e,n,i,l){++n;for(l.startBlock&&l.startBlock();n<i;){var s=e[n].charAt(0);if("}"==s){++n;break}n=" "===s||";"===s?n+1:"@"===s?st(e,n,i,l,C):("{"===s?t:ot)(e,n,i,l)}l.endBlock&&l.endBlock();return n}(t,e,n,i):e+1,i.endAtrule)&&i.endAtrule(),e}function ot(t,e,n,i){var l,s=e,o=rt(t,e,n,S);if(o<0)return(o=~o)===s?o+1:o;if("{"!==t[o])return o===s?o+1:o;for(e=o+1,s<o&&" "===t[o-1]&&--o,i.startRuleset&&i.startRuleset(t.slice(s,o));e<n;){if("}"===(l=t[e])){++e;break}e=" "===l?e+1:ht(t,e,n,i)}return i.endRuleset&&i.endRuleset(),e}function rt(t,e,n,i){for(var l,s=[],o=-1;e<n;++e)if("["===(l=t[e].charAt(0))||"("===l)s[++o]=l;else if("]"===l&&"["===s[o]||")"===l&&"("===s[o])--o;else if("{"===l||"}"===l||";"===l||"@"===l||":"===l&&!i)break;return e=0<=o?~(e+1):e}function at(t,e,n){for(;e<n&&";"!==t[e]&&"}"!==t[e];)++e;return e<n&&";"===t[e]?e+1:e}function ht(t,e,n,i){var l=t[e++];if(!et.test(l))return at(t,e,n);if(e<n&&" "===t[e]&&++e,e==n||":"!==t[e])return at(t,e,n);++e<n&&" "===t[e]&&++e;var s=rt(t,e,n,C);if(s<0)s=~s;else{for(var o=[],r=0,a=e;a<s;++a)" "!==(e=t[a])&&(o[r++]=e);if(s<n){for(;";"!==(e=t[s])&&"}"!==e&&(r=0,++s<n););";"===e&&++s}r&&i.declaration&&i.declaration(l.toLowerCase(),o)}return s}q=/[\n\f\r\"\'()*<>]/g,Q={"\n":"%0a","\f":"%0c","\r":"%0d",'"':"%22","'":"%27","(":"%28",")":"%29","*":"%2a","<":"%3c",">":"%3e"},J=/^(?:([^:/?# ]+):)?/,$=/^(?:https?|mailto|data)$/i,w={},T=function t(e,n,i,l,s){var e=I(e),o=b[e];if(o&&"object"==typeof o){for(var r=o.cssPropBits,a=80&r,h=1536&r,d=NaN,u=0,p=0;u<n.length;++u){var c,m,g=n[u].toLowerCase(),x=g.charCodeAt(0);if(32===x)g="";else if(34===x)g=16==a?i?nt(R(M(l,v(n[u].substring(1,g.length-1))),e,i)):"":8&r&&!(a&a-1)?g:"";else if("inherit"!==g){if(m=o.cssLitGroup){if(!(y=o.cssLitMap)){for(var y={},f=m.length;0<=--f;)for(var C=m[f],E=C.length;0<=--E;)y[C[E]]=w;y=o.cssLitMap=y}m=y}else m=w;if(m[I(g)]!==w)if(35===x&&/^#(?:[0-9a-f]{3}){1,2}$/.test(g))g=2&r?g:"";else if(48<=x&&x<=57)g=1&r?g:"";else if(c=g.charCodeAt(1),window.Pv=g.charCodeAt(2),c=48<=c&&c<=57,43===x&&c)g=1&r?(c?"":"0")+g.substring(1):"";else if(45===x&&c)g=4&r?(c?"-":"-0")+g.substring(1):1&r?"0":"";else if(46===x&&c)g=1&r?"0"+g:"";else if('url("'===g.substring(0,5))g=i&&16&r?nt(R(M(l,n[u].substring(5,g.length-2)),e,i)):"";else if("("===g.charAt(g.length-1))t:{for(f=(y=u)+(g=1),x=(m=n).length;f<x&&g;)g+=")"===(C=m[f++])?-1:/^[^"']*\($/.test(C);if(!g)for(x=I(g=m[y].toLowerCase()),m=m.splice(y,f-y,""),f=0,C=(y=o.cssFns).length;f<C;++f)if(y[f].substring(0,x.length)==x){m[0]=m[m.length-1]="",t(y[f],m,i,l),g=g+m.join(" ")+")";break t}g=""}else g=h&&/^-?[a-z_][\w\-]*$/.test(g)&&!/__$/.test(g)?s&&512==h?n[u]+s:1024==h&&b[g]&&"number"==typeof b[g].oa?g:"":/^\w+$/.test(g)&&64==a&&8&r?d+1===p?(n[d]=n[d].substring(0,n[d].length-1)+" "+g+'"',""):(d=p,'"'+g+'"'):""}g&&(n[p++]=g)}1===p&&'url("about:blank")'===n[0]&&(p=0),n.length=p}else n.length=0},tt=RegExp("^(active|after|before|blank|checked|default|disabled|drop|empty|enabled|first|first-child|first-letter|first-line|first-of-type|fullscreen|focus|hover|in-range|indeterminate|invalid|last-child|last-of-type|left|link|only-child|only-of-type|optional|out-of-range|placeholder-shown|read-only|read-write|required|right|root|scope|user-error|valid|visited)$"),(E={})[">"]=E["+"]=E["~"]=E,A=function(m,g,r){function t(t,e){function n(t,e,n){var i,l,s,o=S,r="";t<e&&("*"===(h=m[t])?(++t,r=h):/^[a-zA-Z]/.test(h)&&(i=y(h.toLowerCase(),[]))&&(++t,r=h="tagName"in i?i.tagName:h));for(s=l=i="";o&&t<e;++t)if("#"===(h=m[t]).charAt(0))/^#_|__$|[^\w#:\-]/.test(h)?o=C:i+=h+x;else if("."===h)++t<e&&/^[0-9A-Za-z:_\-]+$/.test(h=m[t])&&!/^_|__$/.test(h)?i+="."+h:o=C;else if(t+1<e&&"["===m[t]){++t;var a,h,d=m[t++].toLowerCase(),u=((h=N.m[r+"::"+d])!==+h&&(h=N.m["*::"+d]),g.ia?("string"!=typeof(a=g.ia(r,d))&&(o=C,a=d),o&&h!==+h&&(h=N.d.NONE)):(a=d,h!==+h&&(o=C)),d=""),p=C;switch(/^[~^$*|]?=$/.test(m[t])&&(d=m[t++],u=m[t++],/^[0-9A-Za-z:_\-]+$/.test(u)?u='"'+u+'"':"]"===u&&(u='""',--t),/^"([^\"\\]|\\.)*"$/.test(u)||(o=C),p="i"===m[t])&&++t,"]"!==m[t]&&(++t,o=C),h){case N.d.CLASSES:case N.d.LOCAL_NAME:case N.d.NONE:break;case N.d.GLOBAL_NAME:case N.d.ID:case N.d.IDREF:"="!==d&&"~="!==d&&"$="!==d||'""'==u||p?"|="!==d&&""!==d&&(o=C):u='"'+u.substring(1,u.length-1)+x+'"';break;case N.d.URI:case N.d.URI_FRAGMENT:""!==d&&(o=C);break;default:o=C}o&&(l+="["+a.replace(/[^\w-]/g,"\\$&")+d+u+(p?" i]":"]"))}else{if(!(t<e&&":"===m[t]))break;if(h=m[++t],!tt.test(h))break;s+=":"+h}return(o=t!==e?C:o)&&(t=(r+i).replace(/[^ .*#\w-]/g,"\\$&")+l+s+n)&&c.push(t),o}" "===m[t]&&++t,e-1!==t&&" "===m[e]&&--e;for(var c=[],i=t,l=S,s=t;l&&s<e;++s){var o=m[s];E[o]!==E&&" "!==o||(n(i,s,o)?i=s+1:l=C)}return(l=n(i,e,"")?l:C)?(c.length&&(i=c.join(""),h.push(i=a!==f?"."+a+" "+i:i)),S):!r||r(m.slice(t,e))}for(var e,a=g.na,x=g.L,y=g.Aa,h=[],n=0,i=0,l=0;l<m.length;++l)("("==(e=m[l])||"["==e?(++i,S):")"==e||"]"==e?(i&&--i,S):" "!=m[l]||!i&&E[m[l-1]]!==E&&E[m[l+1]]!==E)&&(m[n++]=m[l]);for(m.length=n,n=m.length,l=i=0;l<n;++l)if(","===m[l]){if(!t(i,l))return f;i=l+1}return t(i,n)?h:f},Z=/^\w/,K=RegExp("^(?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*)(?: , (?:(?:(?:(?:only|not) )?(?:all|aural|braille|embossed|handheld|print|projection|screen|speech|tty|tv)|\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))(?: and ?\\( (?:(?:min-|max-)?(?:(?:device-)?(?:aspect-ratio|height|width)|color(?:-index)?|monochrome|orientation|resolution)|grid|hover|luminosity|pointer|scan|script) (?:: -?(?:[a-z]\\w+(?:-\\w+)*|\\d+(?: / \\d+|(?:\\.\\d+)?(?:p[cxt]|[cem]m|in|dpi|dppx|dpcm|%)?)) )?\\))*))*$","i"),L=function(t){for(var e=(t=t.slice()).length,n=0,i=0;i<e;++i){var l=t[i];" "!=l&&(t[n++]=l)}return t.length=n,(t=t.join(" ")).length?K.test(t)?Z.test(t)?t:"not all , "+t:"not all":""},i=function(t,e,n,i){return lt(t,e,n,i,x,x).result.toString()},"undefined"!=typeof window&&(window.sanitizeCssProperty=T,window.sanitizeCssSelectorList=A,window.sanitizeStylesheet=i,window.sanitizeMediaQuery=L),y=function(t,e){var n=s(t);e.startStylesheet&&e.startStylesheet();for(var i=0,l=n.length;i<l;)i=" "===n[i]?i+1:i<l?"@"===n[i].charAt(0)?st(n,i,l,e,S):ot(n,i,l,e):i;e.endStylesheet&&e.endStylesheet()},et=/^-?[a-z]/i,i=function(t,e){for(var n=s(t),i=0,l=n.length;i<l;)i=" "!==n[i]?ht(n,i,l,e):i+1},"undefined"!=typeof window&&(window.parseCssStylesheet=y,window.parseCssDeclarations=i);var P,dt,ut,c,pt,ct,mt,m,gt,xt,yt,ft,Ct,Et,vt,St,bt,wt,Tt,O,g,At,N={d:{NONE:0,URI:1,URI_FRAGMENT:11,SCRIPT:2,STYLE:3,HTML:12,ID:4,IDREF:5,IDREFS:6,GLOBAL_NAME:7,LOCAL_NAME:8,CLASSES:9,FRAME_TARGET:10,MEDIA_QUERY:13}},Lt=(N.atype=N.d,N.m={"*::class":9,"*::dir":0,"*::draggable":0,"*::hidden":0,"*::id":4,"*::inert":0,"*::itemprop":0,"*::itemref":6,"*::itemscope":0,"*::lang":0,"*::onblur":2,"*::onchange":2,"*::onclick":2,"*::ondblclick":2,"*::onerror":2,"*::onfocus":2,"*::onkeydown":2,"*::onkeypress":2,"*::onkeyup":2,"*::onload":2,"*::onmousedown":2,"*::onmousemove":2,"*::onmouseout":2,"*::onmouseover":2,"*::onmouseup":2,"*::onreset":2,"*::onscroll":2,"*::onselect":2,"*::onsubmit":2,"*::ontouchcancel":2,"*::ontouchend":2,"*::ontouchenter":2,"*::ontouchleave":2,"*::ontouchmove":2,"*::ontouchstart":2,"*::onunload":2,"*::spellcheck":0,"*::style":3,"*::tabindex":0,"*::title":0,"*::translate":0,"a::accesskey":0,"a::coords":0,"a::href":1,"a::hreflang":0,"a::name":7,"a::onblur":2,"a::onfocus":2,"a::shape":0,"a::target":10,"a::type":0,"area::accesskey":0,"area::alt":0,"area::coords":0,"area::href":1,"area::nohref":0,"area::onblur":2,"area::onfocus":2,"area::shape":0,"area::target":10,"audio::controls":0,"audio::loop":0,"audio::mediagroup":5,"audio::muted":0,"audio::preload":0,"audio::src":1,"bdo::dir":0,"blockquote::cite":1,"br::clear":0,"button::accesskey":0,"button::disabled":0,"button::name":8,"button::onblur":2,"button::onfocus":2,"button::type":0,"button::value":0,"canvas::height":0,"canvas::width":0,"caption::align":0,"col::align":0,"col::char":0,"col::charoff":0,"col::span":0,"col::valign":0,"col::width":0,"colgroup::align":0,"colgroup::char":0,"colgroup::charoff":0,"colgroup::span":0,"colgroup::valign":0,"colgroup::width":0,"command::checked":0,"command::command":5,"command::disabled":0,"command::icon":1,"command::label":0,"command::radiogroup":0,"command::type":0,"data::value":0,"del::cite":1,"del::datetime":0,"details::open":0,"dir::compact":0,"div::align":0,"dl::compact":0,"fieldset::disabled":0,"font::color":0,"font::face":0,"font::size":0,"form::accept":0,"form::action":1,"form::autocomplete":0,"form::enctype":0,"form::method":0,"form::name":7,"form::novalidate":0,"form::onreset":2,"form::onsubmit":2,"form::target":10,"h1::align":0,"h2::align":0,"h3::align":0,"h4::align":0,"h5::align":0,"h6::align":0,"hr::align":0,"hr::noshade":0,"hr::size":0,"hr::width":0,"iframe::align":0,"iframe::frameborder":0,"iframe::height":0,"iframe::marginheight":0,"iframe::marginwidth":0,"iframe::width":0,"img::align":0,"img::alt":0,"img::border":0,"img::height":0,"img::hspace":0,"img::ismap":0,"img::name":7,"img::src":1,"img::usemap":11,"img::vspace":0,"img::width":0,"input::accept":0,"input::accesskey":0,"input::align":0,"input::alt":0,"input::autocomplete":0,"input::checked":0,"input::disabled":0,"input::inputmode":0,"input::ismap":0,"input::list":5,"input::max":0,"input::maxlength":0,"input::min":0,"input::multiple":0,"input::name":8,"input::onblur":2,"input::onchange":2,"input::onfocus":2,"input::onselect":2,"input::pattern":0,"input::placeholder":0,"input::readonly":0,"input::required":0,"input::size":0,"input::src":1,"input::step":0,"input::type":0,"input::usemap":11,"input::value":0,"ins::cite":1,"ins::datetime":0,"label::accesskey":0,"label::for":5,"label::onblur":2,"label::onfocus":2,"legend::accesskey":0,"legend::align":0,"li::type":0,"li::value":0,"map::name":7,"menu::compact":0,"menu::label":0,"menu::type":0,"meter::high":0,"meter::low":0,"meter::max":0,"meter::min":0,"meter::value":0,"ol::compact":0,"ol::reversed":0,"ol::start":0,"ol::type":0,"optgroup::disabled":0,"optgroup::label":0,"option::disabled":0,"option::label":0,"option::selected":0,"option::value":0,"output::for":6,"output::name":8,"p::align":0,"pre::width":0,"progress::max":0,"progress::min":0,"progress::value":0,"q::cite":1,"select::autocomplete":0,"select::disabled":0,"select::multiple":0,"select::name":8,"select::onblur":2,"select::onchange":2,"select::onfocus":2,"select::required":0,"select::size":0,"source::type":0,"table::align":0,"table::bgcolor":0,"table::border":0,"table::cellpadding":0,"table::cellspacing":0,"table::frame":0,"table::rules":0,"table::summary":0,"table::width":0,"tbody::align":0,"tbody::char":0,"tbody::charoff":0,"tbody::valign":0,"td::abbr":0,"td::align":0,"td::axis":0,"td::bgcolor":0,"td::char":0,"td::charoff":0,"td::colspan":0,"td::headers":6,"td::height":0,"td::nowrap":0,"td::rowspan":0,"td::scope":0,"td::valign":0,"td::width":0,"textarea::accesskey":0,"textarea::autocomplete":0,"textarea::cols":0,"textarea::disabled":0,"textarea::inputmode":0,"textarea::name":8,"textarea::onblur":2,"textarea::onchange":2,"textarea::onfocus":2,"textarea::onselect":2,"textarea::placeholder":0,"textarea::readonly":0,"textarea::required":0,"textarea::rows":0,"textarea::wrap":0,"tfoot::align":0,"tfoot::char":0,"tfoot::charoff":0,"tfoot::valign":0,"th::abbr":0,"th::align":0,"th::axis":0,"th::bgcolor":0,"th::char":0,"th::charoff":0,"th::colspan":0,"th::headers":6,"th::height":0,"th::nowrap":0,"th::rowspan":0,"th::scope":0,"th::valign":0,"th::width":0,"thead::align":0,"thead::char":0,"thead::charoff":0,"thead::valign":0,"tr::align":0,"tr::bgcolor":0,"tr::char":0,"tr::charoff":0,"tr::valign":0,"track::default":0,"track::kind":0,"track::label":0,"track::srclang":0,"ul::compact":0,"ul::type":0,"video::controls":0,"video::height":0,"video::loop":0,"video::mediagroup":5,"video::muted":0,"video::poster":1,"video::preload":0,"video::src":1,"video::width":0},N.ATTRIBS=N.m,N.c={OPTIONAL_ENDTAG:1,EMPTY:2,CDATA:4,RCDATA:8,UNSAFE:16,FOLDABLE:32,SCRIPT:64,STYLE:128,VIRTUALIZED:256},N.eflags=N.c,N.f={a:0,abbr:0,acronym:0,address:0,applet:272,area:2,article:0,aside:0,audio:0,b:0,base:274,basefont:274,bdi:0,bdo:0,big:0,blockquote:0,body:305,br:2,button:0,canvas:0,caption:0,center:0,cite:0,code:0,col:2,colgroup:1,command:2,data:0,datalist:0,dd:1,del:0,details:0,dfn:0,dialog:272,dir:0,div:0,dl:0,dt:1,em:0,fieldset:0,figcaption:0,figure:0,font:0,footer:0,form:0,frame:274,frameset:272,h1:0,h2:0,h3:0,h4:0,h5:0,h6:0,head:305,header:0,hgroup:0,hr:2,html:305,i:0,iframe:4,img:2,input:2,ins:0,isindex:274,kbd:0,keygen:274,label:0,legend:0,li:1,link:274,map:0,mark:0,menu:0,meta:274,meter:0,nav:0,nobr:0,noembed:276,noframes:276,noscript:276,object:272,ol:0,optgroup:0,option:1,output:0,p:1,param:274,pre:0,progress:0,q:0,s:0,samp:0,script:84,section:0,select:0,small:0,source:2,span:0,strike:0,strong:0,style:148,sub:0,summary:0,sup:0,table:0,tbody:1,td:1,textarea:8,tfoot:1,th:1,thead:1,time:0,title:280,tr:1,track:2,tt:0,u:0,ul:0,var:0,video:0,wbr:2},N.ELEMENTS=N.f,N.Q={a:"HTMLAnchorElement",abbr:"HTMLElement",acronym:"HTMLElement",address:"HTMLElement",applet:"HTMLAppletElement",area:"HTMLAreaElement",article:"HTMLElement",aside:"HTMLElement",audio:"HTMLAudioElement",b:"HTMLElement",base:"HTMLBaseElement",basefont:"HTMLBaseFontElement",bdi:"HTMLElement",bdo:"HTMLElement",big:"HTMLElement",blockquote:"HTMLQuoteElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",center:"HTMLElement",cite:"HTMLElement",code:"HTMLElement",col:"HTMLTableColElement",colgroup:"HTMLTableColElement",command:"HTMLCommandElement",data:"HTMLElement",datalist:"HTMLDataListElement",dd:"HTMLElement",del:"HTMLModElement",details:"HTMLDetailsElement",dfn:"HTMLElement",dialog:"HTMLDialogElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",dt:"HTMLElement",em:"HTMLElement",fieldset:"HTMLFieldSetElement",figcaption:"HTMLElement",figure:"HTMLElement",font:"HTMLFontElement",footer:"HTMLElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",h2:"HTMLHeadingElement",h3:"HTMLHeadingElement",h4:"HTMLHeadingElement",h5:"HTMLHeadingElement",h6:"HTMLHeadingElement",head:"HTMLHeadElement",header:"HTMLElement",hgroup:"HTMLElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",i:"HTMLElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",ins:"HTMLModElement",isindex:"HTMLUnknownElement",kbd:"HTMLElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",mark:"HTMLElement",menu:"HTMLMenuElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",nav:"HTMLElement",nobr:"HTMLElement",noembed:"HTMLElement",noframes:"HTMLElement",noscript:"HTMLElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",s:"HTMLElement",samp:"HTMLElement",script:"HTMLScriptElement",section:"HTMLElement",select:"HTMLSelectElement",small:"HTMLElement",source:"HTMLSourceElement",span:"HTMLSpanElement",strike:"HTMLElement",strong:"HTMLElement",style:"HTMLStyleElement",sub:"HTMLElement",summary:"HTMLElement",sup:"HTMLElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",td:"HTMLTableDataCellElement",textarea:"HTMLTextAreaElement",tfoot:"HTMLTableSectionElement",th:"HTMLTableHeaderCellElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",tt:"HTMLElement",u:"HTMLElement",ul:"HTMLUListElement",var:"HTMLElement",video:"HTMLVideoElement",wbr:"HTMLElement"},N.ELEMENT_DOM_INTERFACES=N.Q,N.P={NOT_LOADED:0,SAME_DOCUMENT:1,NEW_DOCUMENT:2},N.ueffects=N.P,N.J={"a::href":2,"area::href":2,"audio::src":1,"blockquote::cite":0,"command::icon":1,"del::cite":0,"form::action":2,"img::src":1,"input::src":1,"ins::cite":0,"q::cite":0,"video::poster":1,"video::src":1},N.URIEFFECTS=N.J,N.M={UNSANDBOXED:2,SANDBOXED:1,DATA:0},N.ltypes=N.M,N.I={"a::href":2,"area::href":2,"audio::src":2,"blockquote::cite":2,"command::icon":1,"del::cite":2,"form::action":2,"img::src":1,"input::src":1,"ins::cite":2,"q::cite":2,"video::poster":1,"video::src":2},N.LOADERTYPES=N.I,"undefined"!=typeof window&&(window.html4=N),P=N,"undefined"!=typeof window&&(dt=window.parseCssDeclarations,ut=window.sanitizeCssProperty),c={lt:"<",LT:"<",gt:">",GT:">",amp:"&",AMP:"&",quot:'"',apos:"'",nbsp:" "},pt=/^#(\d+)$/,ct=/^#x([0-9A-Fa-f]+)$/,mt=/^[A-Za-z][A-za-z0-9]+$/,m="undefined"!=typeof window&&window.document?window.document.createElement("textarea"):f,gt=/\0/g,xt=/&(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/g,yt=/^(#[0-9]+|#[xX][0-9A-Fa-f]+|\w+);/,ft=/&/g,Ct=/&([^a-z#]|#(?:[^0-9x]|x(?:[^0-9a-f]|$)|$)|$)/gi,Et=/[<]/g,vt=/>/g,St=/\"/g,bt=/^\s*([-.:\w]+)(?:\s*(=)\s*((")[^"]*("|$)|(')[^']*('|$)|(?=[a-z][-\w]*\s*=)|[^"'\s]*))?/i,wt=3==="a,b".split(/(,)/).length,Tt=P.c.CDATA|P.c.RCDATA,O={},g={},At=/^(?:https?|mailto|data)$/i,(i={}).pa=i.escapeAttrib=It,i.ra=i.makeHtmlSanitizer=Gt,i.sa=i.makeSaxParser=Ot,i.ta=i.makeTagPolicy=Vt,i.wa=i.normalizeRCData=Pt,i.xa=i.sanitize=function(t,e,n,i){return Ft(t,Vt(e,n,i))},i.ya=i.sanitizeAttribs=kt,i.za=i.sanitizeWithPolicy=Ft,i.Ba=i.unescapeEntities=Rt,i.sanitize);function Mt(t,e){return e=e,c.hasOwnProperty(e)?c[e]:(n=e.match(pt))?String.fromCharCode(parseInt(n[1],10)):(n=e.match(ct))?String.fromCharCode(parseInt(n[1],16)):m&&mt.test(e)?(m.innerHTML="&"+e+";",n=m.textContent,c[e]=n):"&"+e+";";var n}function Rt(t){return t.replace(xt,Mt)}function It(t){return(""+t).replace(ft,"&amp;").replace(Et,"&lt;").replace(vt,"&gt;").replace(St,"&#34;")}function Pt(t){return t.replace(Ct,"&amp;$1").replace(Et,"&lt;").replace(vt,"&gt;")}function Ot(t){var r={z:t.z||t.cdata,A:t.A||t.comment,B:t.B||t.endDoc,t:t.t||t.endTag,e:t.e||t.pcdata,F:t.F||t.rcdata,H:t.H||t.startDoc,w:t.w||t.startTag};return function(t,e){var n=/(<\/|<\!--|<[!?]|[&<>])/g,i=t+"";if(wt)i=i.split(n);else{for(var l,s=[],o=0;(l=n.exec(i))!==f;)s.push(i.substring(o,l.index)),s.push(l[0]),o=l.index+l[0].length;s.push(i.substring(o)),i=s}Nt(r,i,0,{r:C,C:C},e)}}function H(t,e,n,i,l){return function(){Nt(t,e,n,i,l)}}function Nt(t,e,n,i,l){try{t.H&&0==n&&t.H(l);for(var s,o,r,a=e.length;n<a;){var h,d,u,p,c,m,g,x,y,f,C=e[n++],E=e[n];switch(C){case"&":yt.test(E)?(t.e&&t.e("&"+E,l,O,H(t,e,n,i,l)),n++):t.e&&t.e("&amp;",l,O,H(t,e,n,i,l));break;case"</":(s=/^([-\w:]+)[^\'\"]*/.exec(E))?s[0].length===E.length&&">"===e[n+1]?(n+=2,r=s[1].toLowerCase(),t.t&&t.t(r,l,O,H(t,e,n,i,l))):(m=t,g=l,x=O,h=i,n=(d=Ut(p=e,c=n))?(m.t&&m.t(d.name,g,x,H(m,p,c,h,g)),d.next):p.length):t.e&&t.e("&lt;/",l,O,H(t,e,n,i,l));break;case"<":(s=/^([-\w:]+)\s*\/?/.exec(E))?s[0].length===E.length&&">"===e[n+1]?(n+=2,r=s[1].toLowerCase(),t.w&&t.w(r,[],l,O,H(t,e,n,i,l)),(u=P.f[r])&Tt&&(n=Ht(e,{name:r,next:n,c:u},t,l,O,i))):(c=t,m=l,g=O,x=i,n=(y=Ut(p=e,n))?(c.w&&c.w(y.name,y.R,m,g,H(c,p,y.next,x,m)),y.c&Tt?Ht(p,y,c,m,g,x):y.next):p.length):t.e&&t.e("&lt;",l,O,H(t,e,n,i,l));break;case"\x3c!--":if(!i.C){for(o=n+1;o<a&&(">"!==e[o]||!/--$/.test(e[o-1]));o++);o<a?(t.A&&(f=e.slice(n,o).join(""),t.A(f.substr(0,f.length-2),l,O,H(t,e,o+1,i,l))),n=o+1):i.C=S}i.C&&t.e&&t.e("&lt;!--",l,O,H(t,e,n,i,l));break;case"<!":if(/^\w/.test(E)){if(!i.r){for(o=n+1;o<a&&">"!==e[o];o++);o<a?n=o+1:i.r=S}i.r&&t.e&&t.e("&lt;!",l,O,H(t,e,n,i,l))}else t.e&&t.e("&lt;!",l,O,H(t,e,n,i,l));break;case"<?":if(!i.r){for(o=n+1;o<a&&">"!==e[o];o++);o<a?n=o+1:i.r=S}i.r&&t.e&&t.e("&lt;?",l,O,H(t,e,n,i,l));break;case">":t.e&&t.e("&gt;",l,O,H(t,e,n,i,l));break;case"":break;default:t.e&&t.e(C,l,O,H(t,e,n,i,l))}}t.B&&t.B(l)}catch(t){if(t!==O)throw t}}function Ht(t,e,n,i,l,s){var o=t.length;g.hasOwnProperty(e.name)||(g[e.name]=RegExp("^"+e.name+"(?:[\\s\\/]|$)","i"));for(var r=g[e.name],a=e.next,h=e.next+1;h<o&&("</"!==t[h-1]||!r.test(t[h]));h++);if(h<o&&--h,o=t.slice(a,h).join(""),e.c&P.c.CDATA)n.z&&n.z(o,i,l,H(n,t,h,s,i));else{if(!(e.c&P.c.RCDATA))throw Error("bug");n.F&&n.F(Pt(o),i,l,H(n,t,h,s,i))}return h}function Ut(t,e){var n=/^([-\w:]+)/.exec(t[e]),i={};i.name=n[1].toLowerCase(),i.c=P.f[i.name];for(var l=t[e].substr(n[0].length),s=e+1,o=t.length;s<o&&">"!==t[s];s++)l+=t[s];if(!(o<=s)){for(var r=[];""!==l;)if(n=bt.exec(l))if(n[4]&&!n[5]||n[6]&&!n[7]){for(var n=n[4]||n[6],a=C,l=[l,t[s++]];s<o;s++){if(a){if(">"===t[s])break}else 0<=t[s].indexOf(n)&&(a=S);l.push(t[s])}if(o<=s)break;l=l.join("")}else{var h,d,a=n[1].toLowerCase();h=n[2]?Rt((h=34!==(d=(h=n[3]).charCodeAt(0))&&39!==d?h:h.substr(1,h.length-2)).replace(gt,"")):"",r.push(a,h),l=l.substr(n[0].length)}else l=l.replace(/^[\s\S][^a-z\s]*/,"");return i.R=r,i.next=s+1,i}}function Gt(h){function t(t,e){u||e.push(t)}var d,u;return Ot({startDoc:function(){d=[],u=C},startTag:function(t,e,n){if(!u&&P.f.hasOwnProperty(t)){var i=P.f[t];if(!(i&P.c.FOLDABLE)){var l,s,o=h(t,e);if(o){if("object"!=typeof o)throw Error("tagPolicy did not return object (old API?)");if(!("attribs"in o))throw Error("tagPolicy gave no attribs");e=o.attribs,o="tagName"in o?(l=o.tagName,P.f[l]):(l=t,i),i&P.c.OPTIONAL_ENDTAG&&(!(s=d[d.length-1])||s.D!==t||s.v===l&&t===l||n.push("</",s.v,">")),i&P.c.EMPTY||d.push({D:t,v:l}),n.push("<",l),t=0;for(s=e.length;t<s;t+=2){var r=e[t],a=e[t+1];a!==f&&a!==x&&n.push(" ",r,'="',It(a),'"')}n.push(">"),i&P.c.EMPTY&&!(o&P.c.EMPTY)&&n.push("</",l,">")}else u=!(i&P.c.EMPTY)}}},endTag:function(t,e){if(u)u=C;else if(P.f.hasOwnProperty(t)){var n=P.f[t];if(!(n&(P.c.EMPTY|P.c.FOLDABLE))){if(n&P.c.OPTIONAL_ENDTAG)for(n=d.length;0<=--n;){var i=d[n].D;if(i===t)break;if(!(P.f[i]&P.c.OPTIONAL_ENDTAG))return}else for(n=d.length;0<=--n&&d[n].D!==t;);if(!(n<0)){for(i=d.length;--i>n;){var l=d[i].v;P.f[l]&P.c.OPTIONAL_ENDTAG||e.push("</",l,">")}n<d.length&&(t=d[n].v),d.length=n,e.push("</",t,">")}}}},pcdata:t,rcdata:t,cdata:t,endDoc:function(t){for(;d.length;d.length--)t.push("</",d[d.length-1].v,">")}})}function Dt(t,e,n,i,l){if(l)try{var s,o=a.parse(""+t);if(o&&(!o.K()||At.test(o.W())))return(s=l(o,e,n,i))?s.toString():f}catch(t){}return f}function U(t,e,n,i,l){var s;n||t(e+" removed",{S:"removed",tagName:e}),i!==l&&(s="changed",i&&!l?s="removed":!i&&l&&(s="added"),t(e+"."+n+" "+s,{S:s,tagName:e,la:n,oldValue:i,newValue:l}))}function _t(t,e,n){return t.hasOwnProperty(e=e+"::"+n)||t.hasOwnProperty(e="*::"+n)?t[e]:void 0}function kt(t,e,i,n,l){for(var s=0;s<e.length;s+=2){var o,r,a=e[s],h=e[s+1],d=h,u=f;if((u=P.m.hasOwnProperty(o=t+"::"+a)||P.m.hasOwnProperty(o="*::"+a)?P.m[o]:u)!==f)switch(u){case P.d.NONE:break;case P.d.SCRIPT:h=f,l&&U(l,t,a,d,h);break;case P.d.STYLE:void 0===dt?(h=f,l&&U(l,t,a,d,h)):(r=[],dt(h,{declaration:function(t,e){var n=t.toLowerCase();ut(n,e,i?function(t){return Dt(t,P.P.ja,P.M.ka,{TYPE:"CSS",CSS_PROP:n},i)}:f),e.length&&r.push(n+": "+e.join(" "))}}),h=0<r.length?r.join(" ; "):f,l&&U(l,t,a,d,h));break;case P.d.ID:case P.d.IDREF:case P.d.IDREFS:case P.d.GLOBAL_NAME:case P.d.LOCAL_NAME:case P.d.CLASSES:h=n?n(h):h,l&&U(l,t,a,d,h);break;case P.d.URI:h=Dt(h,_t(P.J,t,a),_t(P.I,t,a),{TYPE:"MARKUP",XML_ATTR:a,XML_TAG:t},i),l&&U(l,t,a,d,h);break;case P.d.URI_FRAGMENT:h&&"#"===h.charAt(0)?(h=h.substring(1),(h=n?n(h):h)!==f&&h!==x&&(h="#"+h)):h=f,l&&U(l,t,a,d,h);break;default:h=f,l&&U(l,t,a,d,h)}else h=f,l&&U(l,t,a,d,h);e[s+1]=h}return e}function Vt(n,i,l){return function(t,e){if(!(P.f[t]&P.c.UNSAFE))return{attribs:kt(t,e,n,i,l)};l&&U(l,t,x,x,x)}}function Ft(t,e){var n=[];return Gt(e)(t,n),n.join("")}"undefined"!=typeof window&&(window.html=i,window.html_sanitize=Lt)}(),function(t){var e={},n=t.lastIndexOf("?");if(0<n){t=t.substring(n+1).split("&");for(var i=0;i<t.length;i++)0<(n=t[i].indexOf("="))&&(e[t[i].substring(0,n)]=t[i].substring(n+1))}return e}(window.location.href)),mxClient={VERSION:"14.6.6",IS_IE:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("MSIE"),IS_IE11:null!=navigator.userAgent&&!!navigator.userAgent.match(/Trident\/7\./),IS_EDGE:null!=navigator.userAgent&&!!navigator.userAgent.match(/Edge\//),IS_EM:"spellcheck"in document.createElement("textarea")&&8==document.documentMode,VML_PREFIX:"v",OFFICE_PREFIX:"o",IS_NS:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Mozilla/")&&navigator.userAgent.indexOf("MSIE")<0&&navigator.userAgent.indexOf("Edge/")<0,IS_OP:null!=navigator.userAgent&&(0<=navigator.userAgent.indexOf("Opera/")||0<=navigator.userAgent.indexOf("OPR/")),IS_OT:null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Presto/")&&navigator.userAgent.indexOf("Presto/2.4.")<0&&navigator.userAgent.indexOf("Presto/2.3.")<0&&navigator.userAgent.indexOf("Presto/2.2.")<0&&navigator.userAgent.indexOf("Presto/2.1.")<0&&navigator.userAgent.indexOf("Presto/2.0.")<0&&navigator.userAgent.indexOf("Presto/1.")<0,IS_SF:/Apple Computer, Inc/.test(navigator.vendor),IS_ANDROID:0<=navigator.appVersion.indexOf("Android"),IS_IOS:/iP(hone|od|ad)/.test(navigator.platform),IS_GC:/Google Inc/.test(navigator.vendor),IS_CHROMEAPP:null!=window.chrome&&null!=chrome.app&&null!=chrome.app.runtime,IS_FF:"undefined"!=typeof InstallTrigger,IS_MT:0<=navigator.userAgent.indexOf("Firefox/")&&navigator.userAgent.indexOf("Firefox/1.")<0&&navigator.userAgent.indexOf("Firefox/2.")<0||0<=navigator.userAgent.indexOf("Iceweasel/")&&navigator.userAgent.indexOf("Iceweasel/1.")<0&&navigator.userAgent.indexOf("Iceweasel/2.")<0||0<=navigator.userAgent.indexOf("SeaMonkey/")&&navigator.userAgent.indexOf("SeaMonkey/1.")<0||0<=navigator.userAgent.indexOf("Iceape/")&&navigator.userAgent.indexOf("Iceape/1.")<0,IS_SVG:"MICROSOFT INTERNET EXPLORER"!=navigator.appName.toUpperCase(),NO_FO:!document.createElementNS||"[object SVGForeignObjectElement]"!=document.createElementNS("http://www.w3.org/2000/svg","foreignObject")||0<=navigator.userAgent.indexOf("Opera/"),IS_WIN:0<navigator.appVersion.indexOf("Win"),IS_MAC:0<navigator.appVersion.indexOf("Mac"),IS_CHROMEOS:/\bCrOS\b/.test(navigator.appVersion),IS_TOUCH:"ontouchstart"in document.documentElement,IS_POINTER:null!=window.PointerEvent&&!(0<navigator.appVersion.indexOf("Mac")),IS_LOCAL:document.location.href.indexOf("http://")<0&&document.location.href.indexOf("https://")<0,defaultBundles:[],isBrowserSupported:function(){return mxClient.IS_SVG},link:function(t,e,n,i){var l=(n=n||document).createElement("link");l.setAttribute("rel",t),l.setAttribute("href",e),l.setAttribute("charset","UTF-8"),l.setAttribute("type","text/css"),i&&l.setAttribute("id",i),n.getElementsByTagName("head")[0].appendChild(l)},loadResources:function(t,e){function n(){0==--i&&t()}for(var i=mxClient.defaultBundles.length,l=0;l<mxClient.defaultBundles.length;l++)mxResources.add(mxClient.defaultBundles[l],e,n)},include:function(t){document.write('<script src="'+t+'"><\/script>')}},mxLog=("undefined"==typeof mxLoadResources&&(window.mxLoadResources=!0),"undefined"==typeof mxForceIncludes&&(window.mxForceIncludes=!1),"undefined"==typeof mxResourceExtension&&(window.mxResourceExtension=".txt"),"undefined"==typeof mxLoadStylesheets&&(window.mxLoadStylesheets=!0),"undefined"!=typeof mxBasePath&&0<window.mxBasePath.length?("/"==window.mxBasePath.substring(window.mxBasePath.length-1)&&(window.mxBasePath=window.mxBasePath.substring(0,window.mxBasePath.length-1)),mxClient.basePath=mxBasePath):mxClient.basePath="/assets/library/scada","undefined"!=typeof mxImageBasePath&&0<mxImageBasePath.length?("/"==mxImageBasePath.substring(mxImageBasePath.length-1)&&(mxImageBasePath=mxImageBasePath.substring(0,mxImageBasePath.length-1)),mxClient.imageBasePath=mxImageBasePath):mxClient.imageBasePath="/assets/library/scada/resources/images/",mxClient.language="undefined"!=typeof mxLanguage&&null!=mxLanguage?mxLanguage:mxClient.IS_IE?navigator.userLanguage:navigator.language,mxClient.defaultLanguage="undefined"!=typeof mxDefaultLanguage&&null!=mxDefaultLanguage?mxDefaultLanguage:"en",mxLoadStylesheets,"undefined"!=typeof mxLanguages&&null!=mxLanguages&&(mxClient.languages=mxLanguages),{consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:"",init:function(){var t,e,n,i,l,s;null==mxLog.window&&null!=document.body&&(s=mxLog.consoleName+" - mxGraph "+mxClient.VERSION,(t=document.createElement("table")).setAttribute("width","100%"),t.setAttribute("height","100%"),e=document.createElement("tbody"),n=document.createElement("tr"),(i=document.createElement("td")).style.verticalAlign="top",mxLog.textarea=document.createElement("textarea"),mxLog.textarea.setAttribute("wrap","off"),mxLog.textarea.setAttribute("readOnly","true"),mxLog.textarea.style.height="100%",mxLog.textarea.style.resize="none",mxLog.textarea.value=mxLog.buffer,mxLog.textarea.style.width=mxClient.IS_NS&&"BackCompat"!=document.compatMode?"99%":"100%",i.appendChild(mxLog.textarea),n.appendChild(i),e.appendChild(n),n=document.createElement("tr"),mxLog.td=document.createElement("td"),mxLog.td.style.verticalAlign="top",mxLog.td.setAttribute("height","30px"),n.appendChild(mxLog.td),e.appendChild(n),t.appendChild(e),mxLog.addButton("Info",function(t){mxLog.info()}),mxLog.addButton("DOM",function(t){t=mxUtils.getInnerHtml(document.body),mxLog.debug(t)}),mxLog.addButton("Trace",function(t){mxLog.TRACE=!mxLog.TRACE,mxLog.TRACE?mxLog.debug("Tracing enabled"):mxLog.debug("Tracing disabled")}),mxLog.addButton("Copy",function(t){try{mxUtils.copy(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Show",function(t){try{mxUtils.popup(mxLog.textarea.value)}catch(t){mxUtils.alert(t)}}),mxLog.addButton("Clear",function(t){mxLog.textarea.value=""}),n=e=0,n="number"==typeof window.innerWidth?(e=window.innerHeight,window.innerWidth):(e=document.documentElement.clientHeight||document.body.clientHeight,document.body.clientWidth),mxLog.window=new mxWindow(s,t,Math.max(0,n-320),Math.max(0,e-210),300,160),mxLog.window.setMaximizable(!0),mxLog.window.setScrollable(!1),mxLog.window.setResizable(!0),mxLog.window.setClosable(!0),mxLog.window.destroyOnClose=!1,(!mxClient.IS_NS&&!mxClient.IS_IE||mxClient.IS_GC||mxClient.IS_SF||"BackCompat"==document.compatMode)&&11!=document.documentMode||(l=mxLog.window.getElement(),mxLog.window.addListener(mxEvent.RESIZE_END,s=function(t,e){mxLog.textarea.style.height=Math.max(0,l.offsetHeight-70)+"px"}),mxLog.window.addListener(mxEvent.MAXIMIZE,s),mxLog.window.addListener(mxEvent.NORMALIZE,s),mxLog.textarea.style.height="92px"))},info:function(){mxLog.writeln(mxUtils.toString(navigator))},addButton:function(t,e){var n=document.createElement("button");mxUtils.write(n,t),mxEvent.addListener(n,"click",e),mxLog.td.appendChild(n)},isVisible:function(){return null!=mxLog.window&&mxLog.window.isVisible()},show:function(){mxLog.setVisible(!0)},setVisible:function(t){null==mxLog.window&&mxLog.init(),null!=mxLog.window&&mxLog.window.setVisible(t)},enter:function(t){if(mxLog.TRACE)return mxLog.writeln("Entering "+t),(new Date).getTime()},leave:function(t,e){mxLog.TRACE&&(e=0!=e?" ("+((new Date).getTime()-e)+" ms)":"",mxLog.writeln("Leaving "+t+e))},debug:function(){mxLog.DEBUG&&mxLog.writeln.apply(this,arguments)},warn:function(){mxLog.WARN&&mxLog.writeln.apply(this,arguments)},write:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");null!=mxLog.textarea?(mxLog.textarea.value+=t,null!=navigator.userAgent&&0<=navigator.userAgent.indexOf("Presto/2.5")&&(mxLog.textarea.style.visibility="hidden",mxLog.textarea.style.visibility="visible"),mxLog.textarea.scrollTop=mxLog.textarea.scrollHeight):mxLog.buffer+=t},writeln:function(){for(var t="",e=0;e<arguments.length;e++)t+=arguments[e],e<arguments.length-1&&(t+=" ");mxLog.write(t+"\n")}}),mxObjectIdentity={FIELD_NAME:"mxObjectId",counter:0,get:function(t){var e;return null!=t?(null==t[mxObjectIdentity.FIELD_NAME]&&("object"==typeof t?(e=mxUtils.getFunctionName(t.constructor),t[mxObjectIdentity.FIELD_NAME]=e+"#"+mxObjectIdentity.counter++):"function"==typeof t&&(t[mxObjectIdentity.FIELD_NAME]="Function#"+mxObjectIdentity.counter++)),t[mxObjectIdentity.FIELD_NAME]):null},clear:function(t){"object"!=typeof t&&"function"!=typeof t||delete t[mxObjectIdentity.FIELD_NAME]}};function mxDictionary(){this.clear()}mxDictionary.prototype.map=null,mxDictionary.prototype.clear=function(){this.map={}},mxDictionary.prototype.get=function(t){return t=mxObjectIdentity.get(t),this.map[t]},mxDictionary.prototype.put=function(t,e){var t=mxObjectIdentity.get(t),n=this.map[t];return this.map[t]=e,n},mxDictionary.prototype.remove=function(t){t=mxObjectIdentity.get(t);var e=this.map[t];return delete this.map[t],e},mxDictionary.prototype.getKeys=function(){var t,e=[];for(t in this.map)e.push(t);return e},mxDictionary.prototype.getValues=function(){var t,e=[];for(t in this.map)e.push(this.map[t]);return e},mxDictionary.prototype.visit=function(t){for(var e in this.map)t(e,this.map[e])};var mxResources={resources:{},extension:mxResourceExtension,resourcesEncoded:!1,loadDefaultBundle:!0,loadSpecialBundle:!0,isLanguageSupported:function(t){return null==mxClient.languages||0<=mxUtils.indexOf(mxClient.languages,t)},getDefaultBundle:function(t,e){return mxResources.loadDefaultBundle||!mxResources.isLanguageSupported(e)?t+mxResources.extension:null},getSpecialBundle:function(t,e){var n;return null!=mxClient.languages&&this.isLanguageSupported(e)||0<(n=e.indexOf("-"))&&(e=e.substring(0,n)),mxResources.loadSpecialBundle&&mxResources.isLanguageSupported(e)&&e!=mxClient.defaultLanguage?t+"_"+e+mxResources.extension:null},add:function(t,e,n){if((e=null!=e?e:null!=mxClient.language?mxClient.language.toLowerCase():mxConstants.NONE)!=mxConstants.NONE){var i=mxResources.getDefaultBundle(t,e),l=mxResources.getSpecialBundle(t,e),s=function(){if(null!=l)if(n)mxUtils.get(l,function(t){mxResources.parse(t.getText()),n()},function(){n()});else try{var t=mxUtils.load(l);t.isReady()&&mxResources.parse(t.getText())}catch(t){}else null!=n&&n()};if(null!=i)if(n)mxUtils.get(i,function(t){mxResources.parse(t.getText()),s()},function(){s()});else try{var o=mxUtils.load(i);o.isReady()&&mxResources.parse(o.getText()),s()}catch(t){}else s()}},parse:function(t){if(null!=t){t=t.split("\n");for(var e,n,i,l=0;l<t.length;l++)"#"!=t[l].charAt(0)&&0<(e=t[l].indexOf("="))&&(n=t[l].substring(0,e),i=t[l].length,13==t[l].charCodeAt(i-1)&&i--,e=t[l].substring(e+1,i),this.resourcesEncoded?(e=e.replace(/\\(?=u[a-fA-F\d]{4})/g,"%"),mxResources.resources[n]=unescape(e)):mxResources.resources[n]=e)}},get:function(t,e,n){return t=null!=(t=null==(t=mxResources.resources[t])?n:t)&&null!=e?mxResources.replacePlaceholders(t,e):t},replacePlaceholders:function(t,e){for(var n=[],i=null,l=0;l<t.length;l++){var s=t.charAt(l);"{"==s?i="":null!=i&&"}"==s?(0<=(i=parseInt(i)-1)&&i<e.length&&n.push(e[i]),i=null):null!=i?i+=s:n.push(s)}return n.join("")},loadResources:function(t){mxResources.add(mxClient.basePath+"/resources/editor",null,function(){mxResources.add(mxClient.basePath+"/resources/graph",null,t)})}};function mxPoint(t,e){this.x=null!=t?t:0,this.y=null!=e?e:0}function mxRectangle(t,e,n,i){mxPoint.call(this,t,e),this.width=null!=n?n:0,this.height=null!=i?i:0}mxPoint.prototype.x=null,mxPoint.prototype.y=null,mxPoint.prototype.equals=function(t){return null!=t&&t.x==this.x&&t.y==this.y},mxPoint.prototype.clone=function(){return mxUtils.clone(this)},mxRectangle.prototype=new mxPoint,mxRectangle.prototype.constructor=mxRectangle,mxRectangle.prototype.width=null,mxRectangle.prototype.height=null,mxRectangle.prototype.setRect=function(t,e,n,i){this.x=t,this.y=e,this.width=n,this.height=i},mxRectangle.prototype.getCenterX=function(){return this.x+this.width/2},mxRectangle.prototype.getCenterY=function(){return this.y+this.height/2},mxRectangle.prototype.add=function(t){var e,n,i;null!=t&&(e=Math.min(this.x,t.x),n=Math.min(this.y,t.y),i=Math.max(this.x+this.width,t.x+t.width),t=Math.max(this.y+this.height,t.y+t.height),this.x=e,this.y=n,this.width=i-e,this.height=t-n)},mxRectangle.prototype.intersect=function(t){var e,n,i,l;null!=t&&(e=this.x+this.width,n=t.x+t.width,i=this.y+this.height,l=t.y+t.height,this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.width=Math.min(e,n)-this.x,this.height=Math.min(i,l)-this.y)},mxRectangle.prototype.grow=function(t){return this.x-=t,this.y-=t,this.width+=2*t,this.height+=2*t,this},mxRectangle.prototype.getPoint=function(){return new mxPoint(this.x,this.y)},mxRectangle.prototype.rotate90=function(){var t=(this.width-this.height)/2;this.x+=t,this.y-=t,t=this.width,this.width=this.height,this.height=t},mxRectangle.prototype.equals=function(t){return null!=t&&t.x==this.x&&t.y==this.y&&t.width==this.width&&t.height==this.height},mxRectangle.fromRectangle=function(t){return new mxRectangle(t.x,t.y,t.width,t.height)};var mxEffects={animateChanges:function(a,h,d){function u(){for(var t=!1,e=0;e<h.length;e++){var n,i,l,s,o,r=h[e];(r instanceof mxGeometryChange||r instanceof mxTerminalChange||r instanceof mxValueChange||r instanceof mxChildChange||r instanceof mxStyleChange)&&null!=(n=a.getView().getState(r.cell||r.child,!1))&&(t=!0,r.constructor!=mxGeometryChange||a.model.isEdge(r.cell)?mxUtils.setOpacity(n.shape.node,100*p/10):(o=a.getView().scale,i=(r.geometry.x-r.previous.x)*o,l=(r.geometry.y-r.previous.y)*o,s=(r.geometry.width-r.previous.width)*o,o=(r.geometry.height-r.previous.height)*o,0==p?(n.x-=i,n.y-=l,n.width-=s,n.height-=o):(n.x+=i/10,n.y+=l/10,n.width+=s/10,n.height+=o/10),a.cellRenderer.redraw(n),mxEffects.cascadeOpacity(a,r.cell,100*p/10)))}p<10&&t?(p++,window.setTimeout(u,30)):null!=d&&d()}var p=0;u()},cascadeOpacity:function(t,e,n){for(var i=t.model.getChildCount(e),l=0;l<i;l++){var s=t.model.getChildAt(e,l),o=t.getView().getState(s);null!=o&&(mxUtils.setOpacity(o.shape.node,n),mxEffects.cascadeOpacity(t,s,n))}if(null!=(e=t.model.getEdges(e)))for(l=0;l<e.length;l++)null!=(i=t.getView().getState(e[l]))&&mxUtils.setOpacity(i.shape.node,n)},fadeOut:function(t,e,n,i,l,s){i=i||40,l=l||30;var o,r=e||100;mxUtils.setOpacity(t,r),s||null==s?(o=function(){r=Math.max(r-i,0),mxUtils.setOpacity(t,r),0<r?window.setTimeout(o,l):(t.style.visibility="hidden",n&&t.parentNode&&t.parentNode.removeChild(t))},window.setTimeout(o,l)):(t.style.visibility="hidden",n&&t.parentNode&&t.parentNode.removeChild(t))}},mxUtils={errorResource:"none"!=mxClient.language?"error":"",closeResource:"none"!=mxClient.language?"close":"",errorImage:mxClient.imageBasePath+"/error.gif",removeCursors:function(t){if(null!=t.style&&(t.style.cursor=""),null!=(t=t.childNodes))for(var e=t.length,n=0;n<e;n+=1)mxUtils.removeCursors(t[n])},getCurrentStyle:mxClient.IS_IE&&(null==document.documentMode||document.documentMode<9)?function(t){return null!=t?t.currentStyle:null}:function(t){return null!=t?window.getComputedStyle(t,""):null},parseCssNumber:function(t){return"thin"==t?t="2":"medium"==t?t="4":"thick"==t&&(t="6"),t=parseFloat(t),t=isNaN(t)?0:t},setPrefixedStyle:function(){var i=null;return mxClient.IS_OT?i="O":mxClient.IS_SF||mxClient.IS_GC?i="Webkit":mxClient.IS_MT?i="Moz":mxClient.IS_IE&&9<=document.documentMode&&document.documentMode<10&&(i="ms"),function(t,e,n){t[e]=n,null!=i&&0<e.length&&(t[e=i+e.substring(0,1).toUpperCase()+e.substring(1)]=n)}}(),hasScrollbars:function(t){return null!=(t=mxUtils.getCurrentStyle(t))&&("scroll"==t.overflow||"auto"==t.overflow)},bind:function(t,e){return function(){return e.apply(t,arguments)}},eval:function(a){var b=null;if(0<=a.indexOf("function"))try{eval("var _mxJavaScriptExpression="+a),b=_mxJavaScriptExpression,_mxJavaScriptExpression=null}catch(c){mxLog.warn(c.message+" while evaluating "+a)}else try{b=eval(a)}catch(c){mxLog.warn(c.message+" while evaluating "+a)}return b},findNode:function(t,e,n){if(t.nodeType==mxConstants.NODETYPE_ELEMENT){var i=t.getAttribute(e);if(null!=i&&i==n)return t}for(t=t.firstChild;null!=t;){if(null!=(i=mxUtils.findNode(t,e,n)))return i;t=t.nextSibling}return null},getFunctionName:function(t){var e=null;return null!=t&&(null!=t.name?e=t.name:(e=mxUtils.trim(t.toString()),/^function\s/.test(e)&&0<(t=(e=mxUtils.ltrim(e.substring(9))).indexOf("("))&&(e=e.substring(0,t)))),e},indexOf:function(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(t[n]==e)return n;return-1},forEach:function(t,e){if(null!=t&&null!=e)for(var n=0;n<t.length;n++)e(t[n]);return t},remove:function(t,e){var n,i=null;if("object"==typeof e)for(var l=mxUtils.indexOf(e,t);0<=l;)e.splice(l,1),l=mxUtils.indexOf(e,i=t);for(n in e)e[n]==t&&(delete e[n],i=t);return i},isNode:function(t,e,n,i){return!(null==t||isNaN(t.nodeType)||null!=e&&t.nodeName.toLowerCase()!=e.toLowerCase()||null!=n&&t.getAttribute(n)!=i)},isAncestorNode:function(t,e){for(var n=e;null!=n;){if(n==t)return!0;n=n.parentNode}return!1},getChildNodes:function(t,e){e=e||mxConstants.NODETYPE_ELEMENT;for(var n=[],i=t.firstChild;null!=i;)i.nodeType==e&&n.push(i),i=i.nextSibling;return n},importNode:function(t,e,n){return mxClient.IS_IE&&(null==document.documentMode||document.documentMode<10)?mxUtils.importNodeImplementation(t,e,n):t.importNode(e,n)},importNodeImplementation:function(t,e,n){switch(e.nodeType){case 1:var i=t.createElement(e.nodeName);if(e.attributes&&0<e.attributes.length)for(var l=0;l<e.attributes.length;l++)i.setAttribute(e.attributes[l].nodeName,e.getAttribute(e.attributes[l].nodeName));if(n&&e.childNodes&&0<e.childNodes.length)for(l=0;l<e.childNodes.length;l++)i.appendChild(mxUtils.importNodeImplementation(t,e.childNodes[l],n));return i;case 3:case 4:case 8:return t.createTextNode(null!=e.nodeValue?e.nodeValue:e.value)}},createXmlDocument:function(){var t=null;return document.implementation&&document.implementation.createDocument?t=document.implementation.createDocument("","",null):"ActiveXObject"in window&&(t=mxUtils.createMsXmlDocument()),t},createMsXmlDocument:function(){var t=new ActiveXObject("Microsoft.XMLDOM");return t.async=!1,t.validateOnParse=!1,t.resolveExternals=!1,t},parseXml:window.DOMParser?function(t){return(new DOMParser).parseFromString(t,"text/xml")}:function(t){var e=mxUtils.createMsXmlDocument();return e.loadXML(t),e},clearSelection:document.selection?function(){document.selection.empty()}:window.getSelection?function(){window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges()}:function(){},removeWhitespace:function(t,e){for(var n=e?t.previousSibling:t.nextSibling;null!=n&&n.nodeType==mxConstants.NODETYPE_TEXT;){var i=e?n.previousSibling:n.nextSibling,l=mxUtils.getTextContent(n);0==mxUtils.trim(l).length&&n.parentNode.removeChild(n),n=i}},htmlEntities:function(t,e){return t=(t=(t=(t=(t=(t=String(t||"")).replace(/&/g,"&amp;")).replace(/"/g,"&quot;")).replace(/\'/g,"&#39;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),t=null!=e&&!e?t:t.replace(/\n/g,"&#xa;")},getXml:function(t,e){var n="";return mxClient.IS_IE||mxClient.IS_IE11?n=mxUtils.getPrettyXml(t,"","",""):null!=window.XMLSerializer?n=(new XMLSerializer).serializeToString(t):null!=t.xml&&(n=t.xml.replace(/\r\n\t[\t]*/g,"").replace(/>\r\n/g,">").replace(/\r\n/g,"\n")),n.replace(/\n/g,e||"&#xa;")},getPrettyXml:function(t,e,n,i,l){var s,o=[];if(null!=t)if(e=null!=e?e:"  ",n=null!=n?n:"",i=null!=i?i:"\n",null!=t.namespaceURI&&t.namespaceURI!=l&&(l=t.namespaceURI,null==t.getAttribute("xmlns"))&&t.setAttribute("xmlns",t.namespaceURI),t.nodeType==mxConstants.NODETYPE_DOCUMENT)o.push(mxUtils.getPrettyXml(t.documentElement,e,n,i,l));else if(t.nodeType==mxConstants.NODETYPE_DOCUMENT_FRAGMENT){if(null!=(r=t.firstChild))for(;null!=r;)o.push(mxUtils.getPrettyXml(r,e,n,i,l)),r=r.nextSibling}else if(t.nodeType==mxConstants.NODETYPE_COMMENT)0<(s=mxUtils.getTextContent(t)).length&&o.push(n+"\x3c!--"+s+"--\x3e"+i);else if(t.nodeType==mxConstants.NODETYPE_TEXT)0<(s=mxUtils.getTextContent(t)).length&&o.push(n+mxUtils.htmlEntities(mxUtils.trim(s),!1)+i);else{o.push(n+"<"+t.nodeName);var r,a=t.attributes;if(null!=a)for(var h=0;h<a.length;h++){var d=mxUtils.htmlEntities(a[h].value);o.push(" "+a[h].nodeName+'="'+d+'"')}if(null!=(r=t.firstChild)){for(o.push(">"+i);null!=r;)o.push(mxUtils.getPrettyXml(r,e,n+e,i,l)),r=r.nextSibling;o.push(n+"</"+t.nodeName+">"+i)}else o.push(" />"+i)}return o.join("")},extractTextWithWhitespace:function(t){var l="BLOCKQUOTE DIV H1 H2 H3 H4 H5 H6 OL P PRE TABLE UL".split(" "),s=[];return function t(e){if(1!=e.length||"BR"!=e[0].nodeName&&"\n"!=e[0].innerHTML)for(var n=0;n<e.length;n++){var i=e[n];("BR"==i.nodeName||"\n"==i.innerHTML||(1==e.length||0==n)&&"DIV"==i.nodeName&&"<br>"==i.innerHTML.toLowerCase()||(3===i.nodeType||4===i.nodeType?0<i.nodeValue.length&&s.push(i.nodeValue):8!==i.nodeType&&0<i.childNodes.length&&t(i.childNodes),n<e.length-1&&0<=mxUtils.indexOf(l,e[n+1].nodeName)))&&s.push("\n")}}(t),s.join("")},replaceTrailingNewlines:function(t,e){for(var n="";0<t.length&&"\n"==t.charAt(t.length-1);)t=t.substring(0,t.length-1),n+=e;return t+n},getTextContent:function(t){return mxClient.IS_IE&&void 0!==t.innerText?t.innerText:null!=t?t[void 0===t.textContent?"text":"textContent"]:""},setTextContent:function(t,e){void 0!==t.innerText?t.innerText=e:t[void 0===t.textContent?"text":"textContent"]=e},getInnerHtml:mxClient.IS_IE?function(t){return null!=t?t.innerHTML:""}:function(t){return null!=t?(new XMLSerializer).serializeToString(t):""},getOuterHtml:mxClient.IS_IE?function(t){if(null==t)return"";if(null!=t.outerHTML)return t.outerHTML;var e=[],n=(e.push("<"+t.nodeName),t.attributes);if(null!=n)for(var i=0;i<n.length;i++){var l=n[i].value;null!=l&&0<l.length&&(e.push(" "),e.push(n[i].nodeName),e.push('="'),e.push(l),e.push('"'))}return 0==t.innerHTML.length?e.push("/>"):(e.push(">"),e.push(t.innerHTML),e.push("</"+t.nodeName+">")),e.join("")}:function(t){return null!=t?(new XMLSerializer).serializeToString(t):""},write:function(t,e){e=t.ownerDocument.createTextNode(e);return null!=t&&t.appendChild(e),e},writeln:function(t,e){e=t.ownerDocument.createTextNode(e);return null!=t&&(t.appendChild(e),t.appendChild(document.createElement("br"))),e},br:function(t,e){e=e||1;for(var n=null,i=0;i<e;i++)null!=t&&(n=t.ownerDocument.createElement("br"),t.appendChild(n));return n},button:function(t,e,n){return n=(n=null!=n?n:document).createElement("button"),mxUtils.write(n,t),mxEvent.addListener(n,"click",function(t){e(t)}),n},para:function(t,e){var n=document.createElement("p");return mxUtils.write(n,e),null!=t&&t.appendChild(n),n},addTransparentBackgroundFilter:function(t){t.style.filter+="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+mxClient.imageBasePath+"/transparent.gif', sizingMethod='scale')"},linkAction:function(t,e,n,i,l){return mxUtils.link(t,e,function(){n.execute(i)},l)},linkInvoke:function(t,e,n,i,l,s){return mxUtils.link(t,e,function(){n[i](l)},s)},link:function(t,e,n,i){var l=document.createElement("span");return l.style.color="blue",l.style.textDecoration="underline",l.style.cursor="pointer",null!=i&&(l.style.paddingLeft=i+"px"),mxEvent.addListener(l,"click",n),mxUtils.write(l,e),null!=t&&t.appendChild(l),l},getDocumentSize:function(){var t=document.body,e=document.documentElement;try{return new mxRectangle(0,0,t.clientWidth||e.clientWidth,Math.max(t.clientHeight||0,e.clientHeight))}catch(t){return new mxRectangle}},fit:function(t){var e=mxUtils.getDocumentSize(),n=parseInt(t.offsetLeft),i=parseInt(t.offsetWidth),l=(s=mxUtils.getDocumentScrollOrigin(t.ownerDocument)).x,s=s.y,o=l+e.width;o<n+i&&(t.style.left=Math.max(l,o-i)+"px"),n=parseInt(t.offsetTop),i=parseInt(t.offsetHeight),(e=s+e.height)<n+i&&(t.style.top=Math.max(s,e-i)+"px")},load:function(t){return(t=new mxXmlRequest(t,null,"GET",!1)).send(),t},get:function(t,e,n,i,l,s,o){var r=(t=new mxXmlRequest(t,null,"GET")).setRequestHeaders;return o&&(t.setRequestHeaders=function(t,e){for(var n in r.apply(this,arguments),o)t.setRequestHeader(n,o[n])}),null!=i&&t.setBinary(i),t.send(e,n,l,s),t},getAll:function(t,i,e){for(var l=t.length,s=[],n=0,o=function(){0==n&&null!=e&&e(),n++},r=0;r<t.length;r++)!function(t,n){mxUtils.get(t,function(t){var e=t.getStatus();e<200||299<e?o():(s[n]=t,0==--l&&i(s))},o)}(t[r],r);0==l&&i(s)},post:function(t,e,n,i){return new mxXmlRequest(t,e).send(n,i)},submit:function(t,e,n,i){return new mxXmlRequest(t,e).simulate(n,i)},loadInto:function(t,e,n){mxClient.IS_IE?e.onreadystatechange=function(){4==e.readyState&&n()}:e.addEventListener("load",n,!1),e.load(t)},getValue:function(t,e,n){return t=null==(t=null!=t?t[e]:null)?n:t},getNumber:function(t,e,n){return null==(t=null!=t?t[e]:null)&&(t=n||0),Number(t)},getColor:function(t,e,n){return null==(t=null!=t?t[e]:null)?t=n:t==mxConstants.NONE&&(t=null),t},clone:function(t,e,n){n=null!=n&&n;var i=null;if(null!=t&&"function"==typeof t.constructor){var l,i=new t.constructor;for(l in t)l!=mxObjectIdentity.FIELD_NAME&&(null==e||mxUtils.indexOf(e,l)<0)&&(i[l]=n||"object"!=typeof t[l]?t[l]:mxUtils.clone(t[l]))}return i},equalPoints:function(t,e){if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!=e.length)return!1;if(null!=t&&null!=e)for(var n=0;n<t.length;n++)if(null!=t[n]&&null==e[n]||null==t[n]&&null!=e[n]||null!=t[n]&&null!=e[n]&&(t[n].x!=e[n].x||t[n].y!=e[n].y))return!1;return!0},equalEntries:function(t,e){var n=0;if(null==t&&null!=e||null!=t&&null==e||null!=t&&null!=e&&t.length!=e.length)return!1;if(null!=t&&null!=e){for(var i in e)n++;for(i in t)if(n--,!(mxUtils.isNaN(t[i])&&mxUtils.isNaN(e[i])||t[i]==e[i]))return!1}return 0==n},removeDuplicates:function(t){for(var e=new mxDictionary,n=[],i=0;i<t.length;i++)e.get(t[i])||(n.push(t[i]),e.put(t[i],!0));return n},isNaN:function(t){return"number"==typeof t&&isNaN(t)},extend:function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t},toString:function(t){var e,n="";for(e in t)try{null==t[e]?n+=e+" = [null]\n":"function"==typeof t[e]?n+=e+" => [Function]\n":"object"==typeof t[e]?n=n+(e+" => [")+mxUtils.getFunctionName(t[e].constructor)+"]\n":n+=e+" = "+t[e]+"\n"}catch(t){n+=e+"="+t.message}return n},toRadians:function(t){return Math.PI*t/180},toDegree:function(t){return 180*t/Math.PI},arcToCurves:function(t,e,n,i,l,s,o,r,a){if(r-=t,a-=e,0!==n&&0!==i){n=Math.abs(n),i=Math.abs(i);var h=-r/2,d=-a/2,u=Math.cos(l*Math.PI/180),h=(l=u*h+(g=Math.sin(l*Math.PI/180))*d,-1*g*h+u*d);r=u*(d=(s=1<(C=(d=l*l)/(m=n*n)+(c=h*h)/(f=i*i))?(n*=Math.sqrt(C),i*=Math.sqrt(C),0):(C=s===o?-1:1)*Math.sqrt((m*f-m*c-f*d)/(m*c+f*d)))*n*h/i)-g*(c=-1*s*i*l/n)+r/2,a=g*d+u*c+a/2,s=0<=(m=Math.atan2((h-c)/i,(l-d)/n)-Math.atan2(0,1))?m:2*Math.PI+m,l=0<=(m=Math.atan2((-h-c)/i,(-l-d)/n)-Math.atan2((h-c)/i,(l-d)/n))?m:2*Math.PI+m,0==o&&0<l?l-=2*Math.PI:0!=o&&l<0&&(l+=2*Math.PI),o=2*l/Math.PI,l/=o=Math.ceil(o<0?-1*o:o),h=8/3*Math.sin(l/4)*Math.sin(l/4)/Math.sin(l/2),d=u*n,u*=i,n*=g,i*=g;for(var p=Math.cos(s),c=-h*(d*(y=Math.sin(s))+i*p),m=-h*(n*y-u*p),g=[],x=0;x<o;++x){s+=l;var y,f=d*(p=Math.cos(s))-i*(y=Math.sin(s))+r,C=n*p+u*y+a,E=-h*(d*y+i*p),p=-h*(n*y-u*p);g[y=6*x]=Number(c+t),g[1+y]=Number(m+e),g[2+y]=Number(f-E+t),g[3+y]=Number(C-p+e),g[4+y]=Number(f+t),g[5+y]=Number(C+e),c=f+E,m=C+p}}return g},getBoundingBox:function(t,e,n){var i,l,s,o=null;return null!=t&&null!=e&&0!=e&&(e=mxUtils.toRadians(e),o=Math.cos(e),i=Math.sin(e),n=null!=n?n:new mxPoint(t.x+t.width/2,t.y+t.height/2),l=new mxPoint(t.x,t.y),e=new mxPoint(t.x+t.width,t.y),s=new mxPoint(e.x,t.y+t.height),t=new mxPoint(t.x,s.y),l=mxUtils.getRotatedPoint(l,o,i,n),e=mxUtils.getRotatedPoint(e,o,i,n),s=mxUtils.getRotatedPoint(s,o,i,n),t=mxUtils.getRotatedPoint(t,o,i,n),(o=new mxRectangle(l.x,l.y,0,0)).add(new mxRectangle(e.x,e.y,0,0)),o.add(new mxRectangle(s.x,s.y,0,0)),o.add(new mxRectangle(t.x,t.y,0,0))),o},getRotatedPoint:function(t,e,n,i){i=null!=i?i:new mxPoint;var l=t.x-i.x;return new mxPoint(l*e-(t=t.y-i.y)*n+i.x,t*e+l*n+i.y)},getPortConstraints:function(t,e,n,i){if(null==(e=mxUtils.getValue(t.style,mxConstants.STYLE_PORT_CONSTRAINT,mxUtils.getValue(e.style,n?mxConstants.STYLE_SOURCE_PORT_CONSTRAINT:mxConstants.STYLE_TARGET_PORT_CONSTRAINT,null))))return i;if(i=e.toString(),e=mxConstants.DIRECTION_MASK_NONE,1==mxUtils.getValue(t.style,mxConstants.STYLE_PORT_CONSTRAINT_ROTATION,n=0)&&(n=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0)),t=0,45<n?t=135<=n?2:1:n<-45&&(t=3,n<=-135)&&(t=2),0<=i.indexOf(mxConstants.DIRECTION_NORTH))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_NORTH;break;case 1:e|=mxConstants.DIRECTION_MASK_EAST;break;case 2:e|=mxConstants.DIRECTION_MASK_SOUTH;break;case 3:e|=mxConstants.DIRECTION_MASK_WEST}if(0<=i.indexOf(mxConstants.DIRECTION_WEST))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_WEST;break;case 1:e|=mxConstants.DIRECTION_MASK_NORTH;break;case 2:e|=mxConstants.DIRECTION_MASK_EAST;break;case 3:e|=mxConstants.DIRECTION_MASK_SOUTH}if(0<=i.indexOf(mxConstants.DIRECTION_SOUTH))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_SOUTH;break;case 1:e|=mxConstants.DIRECTION_MASK_WEST;break;case 2:e|=mxConstants.DIRECTION_MASK_NORTH;break;case 3:e|=mxConstants.DIRECTION_MASK_EAST}if(0<=i.indexOf(mxConstants.DIRECTION_EAST))switch(t){case 0:e|=mxConstants.DIRECTION_MASK_EAST;break;case 1:e|=mxConstants.DIRECTION_MASK_SOUTH;break;case 2:e|=mxConstants.DIRECTION_MASK_WEST;break;case 3:e|=mxConstants.DIRECTION_MASK_NORTH}return e},reversePortConstraints:function(t){var e=(t&mxConstants.DIRECTION_MASK_WEST)<<3;return(e=(e|=(t&mxConstants.DIRECTION_MASK_NORTH)<<1)|(t&mxConstants.DIRECTION_MASK_SOUTH)>>1)|(t&mxConstants.DIRECTION_MASK_EAST)>>3},findNearestSegment:function(t,e,n){var i=-1;if(0<t.absolutePoints.length)for(var l=t.absolutePoints[0],s=null,o=1;o<t.absolutePoints.length;o++){var r=t.absolutePoints[o],l=mxUtils.ptSegDistSq(l.x,l.y,r.x,r.y,e,n);(null==s||l<s)&&(s=l,i=o-1),l=r}return i},getDirectedBounds:function(t,e,n,i,l){var s=mxUtils.getValue(n,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST);return i=null!=i?i:mxUtils.getValue(n,mxConstants.STYLE_FLIPH,!1),l=null!=l?l:mxUtils.getValue(n,mxConstants.STYLE_FLIPV,!1),e.x=Math.round(Math.max(0,Math.min(t.width,e.x))),e.y=Math.round(Math.max(0,Math.min(t.height,e.y))),e.width=Math.round(Math.max(0,Math.min(t.width,e.width))),e.height=Math.round(Math.max(0,Math.min(t.height,e.height))),(l&&(s==mxConstants.DIRECTION_SOUTH||s==mxConstants.DIRECTION_NORTH)||i&&(s==mxConstants.DIRECTION_EAST||s==mxConstants.DIRECTION_WEST))&&(n=e.x,e.x=e.width,e.width=n),(i&&(s==mxConstants.DIRECTION_SOUTH||s==mxConstants.DIRECTION_NORTH)||l&&(s==mxConstants.DIRECTION_EAST||s==mxConstants.DIRECTION_WEST))&&(n=e.y,e.y=e.height,e.height=n),i=mxRectangle.fromRectangle(e),s==mxConstants.DIRECTION_SOUTH?(i.y=e.x,i.x=e.height,i.width=e.y,i.height=e.width):s==mxConstants.DIRECTION_WEST?(i.y=e.height,i.x=e.width,i.width=e.x,i.height=e.y):s==mxConstants.DIRECTION_NORTH&&(i.y=e.width,i.x=e.y,i.width=e.height,i.height=e.x),new mxRectangle(t.x+i.x,t.y+i.y,t.width-i.width-i.x,t.height-i.height-i.y)},getPerimeterPoint:function(t,e,n){for(var i=null,l=0;l<t.length-1;l++){var s,o,r=mxUtils.intersection(t[l].x,t[l].y,t[l+1].x,t[l+1].y,e.x,e.y,n.x,n.y);null!=r&&(s=n.x-r.x,null!=(r={p:r,distSq:(o=n.y-r.y)*o+s*s}))&&(null==i||i.distSq>r.distSq)&&(i=r)}return null!=i?i.p:null},rectangleIntersectsSegment:function(t,e,n){var i,l=t.y,s=t.x,o=l+t.height,r=s+t.width,a=(t=e.x,n.x);return e.x>n.x&&(t=n.x,a=e.x),!((a=r<a?r:a)<(t=t<s?s:t)||(s=e.y,r=n.y,i=n.x-e.x,1e-7<Math.abs(i)&&(s=(n=(n.y-e.y)/i)*t+(e=e.y-n*e.x),r=n*a+e),r<s&&(e=r,r=s,s=e),(r=o<r?o:r)<(s=s<l?l:s)))},contains:function(t,e,n){return t.x<=e&&t.x+t.width>=e&&t.y<=n&&t.y+t.height>=n},intersects:function(t,e){var n,i,l=t.width,s=t.height,o=e.width,r=e.height;return!(o<=0||r<=0||l<=0||s<=0)&&(n=t.x,t=t.y,i=e.x,r+=e=e.y,l+=n,s+=t,(o=o+i)<i||n<o)&&(r<e||t<r)&&(l<n||i<l)&&(s<t||e<s)},intersectsHotspot:function(t,e,n,i,l,s){var o,r,a,h,d;return l=null!=l?l:0,s=null!=s?s:0,!(0<(i=null!=i?i:1))||(o=t.getCenterX(),r=t.getCenterY(),a=t.width,h=t.height,0<(d=mxUtils.getValue(t.style,mxConstants.STYLE_STARTSIZE)*t.view.scale)&&(mxUtils.getValue(t.style,mxConstants.STYLE_HORIZONTAL,!0)?(r=t.y+d/2,h=d):(o=t.x+d/2,a=d)),a=Math.max(l,a*i),h=Math.max(l,h*i),0<s&&(a=Math.min(a,s),h=Math.min(h,s)),i=new mxRectangle(o-a/2,r-h/2,a,h),0!=(o=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0))&&(l=Math.cos(-o),s=Math.sin(-o),o=new mxPoint(t.getCenterX(),t.getCenterY()),e=(t=mxUtils.getRotatedPoint(new mxPoint(e,n),l,s,o)).x,n=t.y),mxUtils.contains(i,e,n))},getOffset:function(t,e){for(var n=0,i=0,l=!1,s=t,o=document.body,r=document.documentElement;null!=s&&s!=o&&s!=r&&!l;){var a=mxUtils.getCurrentStyle(s);null!=a&&(l=l||"fixed"==a.position),s=s.parentNode}return e||l||(n+=(l=mxUtils.getDocumentScrollOrigin(t.ownerDocument)).x,i+=l.y),null!=(l=t.getBoundingClientRect())&&(n+=l.left,i+=l.top),new mxPoint(n,i)},getDocumentScrollOrigin:function(t){return new mxPoint(null!=(t=t.defaultView||t.parentWindow)&&void 0!==window.pageXOffset?window.pageXOffset:(document.documentElement||document.body.parentNode||document.body).scrollLeft,null!=t&&void 0!==window.pageYOffset?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop)},getScrollOrigin:function(t,e,n){e=null!=e&&e,n=null==n||n;for(var i=null!=t?t.ownerDocument:document,l=i.body,s=i.documentElement,o=new mxPoint,r=!1;null!=t&&t!=l&&t!=s;){isNaN(t.scrollLeft)||isNaN(t.scrollTop)||(o.x+=t.scrollLeft,o.y+=t.scrollTop);var a=mxUtils.getCurrentStyle(t);null!=a&&(r=r||"fixed"==a.position),t=e?t.parentNode:null}return!r&&n&&(t=mxUtils.getDocumentScrollOrigin(i),o.x+=t.x,o.y+=t.y),o},convertPoint:function(t,e,n){var i=mxUtils.getScrollOrigin(t,!1);return(t=mxUtils.getOffset(t)).x-=i.x,t.y-=i.y,new mxPoint(e-t.x,n-t.y)},ltrim:function(t,e){return null!=t?t.replace(new RegExp("^["+(e||"\\s")+"]+","g"),""):null},rtrim:function(t,e){return null!=t?t.replace(new RegExp("["+(e||"\\s")+"]+$","g"),""):null},trim:function(t,e){return mxUtils.ltrim(mxUtils.rtrim(t,e),e)},isNumeric:function(t){return!isNaN(parseFloat(t))&&isFinite(t)&&("string"!=typeof t||t.toLowerCase().indexOf("0x")<0)},isInteger:function(t){return String(parseInt(t))===String(t)},mod:function(t,e){return(t%e+e)%e},intersection:function(t,e,n,i,l,s,o,r){var a=(r-s)*(n-t)-(o-l)*(i-e);return o=((o-l)*(e-s)-(r-s)*(t-l))/a,l=((n-t)*(e-s)-(i-e)*(t-l))/a,0<=o&&o<=1&&0<=l&&l<=1?new mxPoint(t+o*(n-t),e+o*(i-e)):null},ptSegDistSq:function(t,e,n,i,l,s){return n=(l-=t)*(n-=t)+(s-=e)*(i-=e)<=0||(t=(l=n-l)*n+(s=i-s)*i)<=0?0:t*t/(n*n+i*i),l=(l=l*l+s*s-n)<0?0:l},ptLineDist:function(t,e,n,i,l,s){return Math.abs((i-e)*l-(n-t)*s+n*e-i*t)/Math.sqrt((i-e)*(i-e)+(n-t)*(n-t))},relativeCcw:function(t,e,n,i,l,s){return(t=0==(t=(l-=t)*(i-=e)-(s-=e)*(n-=t))&&0<(t=l*n+s*i)&&(t=(l-n)*n+(s-i)*i)<0?0:t)<0?-1:0<t?1:0},animateChanges:function(t,e){mxEffects.animateChanges.apply(this,arguments)},cascadeOpacity:function(t,e,n){mxEffects.cascadeOpacity.apply(this,arguments)},fadeOut:function(t,e,n,i,l,s){mxEffects.fadeOut.apply(this,arguments)},setOpacity:function(t,e){mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?t.style.filter=100<=e?"":"alpha(opacity="+e+")":t.style.opacity=e/100},createImage:function(t){var e=document.createElement("img");return e.setAttribute("src",t),e.setAttribute("border","0"),e},sortCells:function(t,i){i=null==i||i;var l=new mxDictionary;return t.sort(function(t,e){var n=l.get(t),t=(null==n&&(n=mxCellPath.create(t).split(mxCellPath.PATH_SEPARATOR),l.put(t,n)),l.get(e));return null==t&&(t=mxCellPath.create(e).split(mxCellPath.PATH_SEPARATOR),l.put(e,t)),0==(n=mxCellPath.compare(n,t))?0:0<n==i?1:-1}),t},getStylename:function(t){return null!=t&&(t=t.split(";")[0]).indexOf("=")<0?t:""},getStylenames:function(t){var e=[];if(null!=t){t=t.split(";");for(var n=0;n<t.length;n++)t[n].indexOf("=")<0&&e.push(t[n])}return e},indexOfStylename:function(t,e){if(null!=t&&null!=e)for(var n=t.split(";"),i=0,l=0;l<n.length;l++){if(n[l]==e)return i;i+=n[l].length+1}return-1},addStylename:function(t,e){return mxUtils.indexOfStylename(t,e)<0&&(null==t?t="":0<t.length&&";"!=t.charAt(t.length-1)&&(t+=";"),t+=e),t},removeStylename:function(t,e){var n=[];if(null!=t)for(var i=t.split(";"),l=0;l<i.length;l++)i[l]!=e&&n.push(i[l]);return n.join(";")},removeAllStylenames:function(t){var e=[];if(null!=t){t=t.split(";");for(var n=0;n<t.length;n++)0<=t[n].indexOf("=")&&e.push(t[n])}return e.join(";")},setCellStyles:function(t,e,n,i){if(null!=e&&0<e.length){t.beginUpdate();try{for(var l,s=0;s<e.length;s++)null!=e[s]&&(l=mxUtils.setStyle(t.getStyle(e[s]),n,i),t.setStyle(e[s],l))}finally{t.endUpdate()}}},setStyle:function(t,e,n){var i,l,s=null!=n&&(void 0===n.length||0<n.length);return null==t||0==t.length?s&&(t=e+"="+n+";"):t.substring(0,e.length+1)==e+"="?(i=t.indexOf(";"),t=s?e+"="+n+(i<0?";":t.substring(i)):i<0||i==t.length-1?"":t.substring(i+1)):(l=t.indexOf(";"+e+"="))<0?s&&(s=";"==t.charAt(t.length-1)?"":";",t=t+s+e+"="+n+";"):(i=t.indexOf(";",l+1),t=s?t.substring(0,l+1)+e+"="+n+(i<0?";":t.substring(i)):t.substring(0,l)+(i<0?";":t.substring(i))),t},setCellStyleFlags:function(t,e,n,i,l){if(null!=e&&0<e.length){t.beginUpdate();try{for(var s,o=0;o<e.length;o++)null!=e[o]&&(s=mxUtils.setStyleFlag(t.getStyle(e[o]),n,i,l),t.setStyle(e[o],s))}finally{t.endUpdate()}}},setStyleFlag:function(t,e,n,i){var l,s,o;return t=null==t||0==t.length?i||null==i?e+"="+n:e+"=0":(l=t.indexOf(e+"="))<0?(l=";"==t.charAt(t.length-1)?"":";",i||null==i?t+l+e+"="+n:t+l+e+"=0"):(o=(s=t.indexOf(";",l))<0?t.substring(l+e.length+1):t.substring(l+e.length+1,s),o=null==i?parseInt(o)^n:i?parseInt(o)|n:parseInt(o)&~n,t.substring(0,l)+e+"="+o+(0<=s?t.substring(s):""))},getAlignmentAsPoint:function(t,e){var n=-.5,i=-.5;return t==mxConstants.ALIGN_LEFT?n=0:t==mxConstants.ALIGN_RIGHT&&(n=-1),e==mxConstants.ALIGN_TOP?i=0:e==mxConstants.ALIGN_BOTTOM&&(i=-1),new mxPoint(n,i)},getSizeForString:function(t,e,n,i,l){e=null!=e?e:mxConstants.DEFAULT_FONTSIZE,n=null!=n?n:mxConstants.DEFAULT_FONTFAMILY;var s=document.createElement("div");return s.style.fontFamily=n,s.style.fontSize=Math.round(e)+"px",s.style.lineHeight=Math.round(e*mxConstants.LINE_HEIGHT)+"px",null!=l&&((l&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(s.style.fontWeight="bold"),(l&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(s.style.fontStyle="italic"),e=[],(l&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(l&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),0<e.length)&&(s.style.textDecoration=e.join(" ")),s.style.position="absolute",s.style.visibility="hidden",s.style.display="inline-block",s.style.zoom="1",null!=i?(s.style.width=i+"px",s.style.whiteSpace="normal"):s.style.whiteSpace="nowrap",s.innerHTML=t,document.body.appendChild(s),t=new mxRectangle(0,0,s.offsetWidth,s.offsetHeight),document.body.removeChild(s),t},getViewXml:function(t,e,n,i,l){i=null!=i?i:0,l=null!=l?l:0,e=null!=e?e:1,null==n&&(n=[t.getModel().getRoot()]);var s=t.getView(),o=null,r=s.isEventsEnabled(),a=(s.setEventsEnabled(!1),s.drawPane),h=s.overlayPane,d=(t.dialect==mxConstants.DIALECT_SVG?(s.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),s.canvas.appendChild(s.drawPane),s.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g")):(s.drawPane=s.drawPane.cloneNode(!1),s.canvas.appendChild(s.drawPane),s.overlayPane=s.overlayPane.cloneNode(!1)),s.canvas.appendChild(s.overlayPane),s.getTranslate());s.translate=new mxPoint(i,l),e=new mxTemporaryCellStates(t.getView(),e,n);try{o=(new mxCodec).encode(t.getView())}finally{e.destroy(),s.translate=d,s.canvas.removeChild(s.drawPane),s.canvas.removeChild(s.overlayPane),s.drawPane=a,s.overlayPane=h,s.setEventsEnabled(r)}return o},getScaleForPageCount:function(t,e,n,i){if(t<1)return 1;var l=(n=null!=n?n:mxConstants.PAGE_FORMAT_A4_PORTRAIT).width-2*(i=null!=i?i:0),s=(n=n.height-2*i,i=e.getGraphBounds().clone(),e=e.getView().getScale(),i.width/=e,i.height/=e,e=i.width,Math.sqrt(t));for(n=s*(i=Math.sqrt(e/i.height/(l/n))),i=s/i,n<1&&t<i&&(o=i/t,i=t,n/=o),i<1&&t<n&&(o=n/t,n=t,i/=o),o=Math.ceil(n)*Math.ceil(i),s=0;t<o;){var o=Math.floor(n)/n,r=Math.floor(i)/i;if(1==o&&(o=Math.floor(n-1)/n),n*=o=(r=1==r?Math.floor(i-1)/i:r)<o?o:r,i*=o,o=Math.ceil(n)*Math.ceil(i),10<++s)break}return l*n/e*.99999},show:function(t,e,n,i,l,s){n=null!=n?n:0,i=null!=i?i:0,null==e?e=window.open().document:e.open(),9==document.documentMode&&e.writeln('\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=9"><![endif]--\x3e');var o=t.getGraphBounds(),r=Math.ceil(n-o.x),a=Math.ceil(i-o.y);if(null==l&&(l=Math.ceil(o.width+n)+Math.ceil(Math.ceil(o.x)-o.x)),null==s&&(s=Math.ceil(o.height+i)+Math.ceil(Math.ceil(o.y)-o.y)),mxClient.IS_IE||11==document.documentMode){for(i="<html><head>",o=document.getElementsByTagName("base"),n=0;n<o.length;n++)i+=o[n].outerHTML;for(i+="<style>",n=0;n<document.styleSheets.length;n++)try{i+=document.styleSheets[n].cssText}catch(t){}i=i+'</style></head><body style="margin:0px;"><div style="position:absolute;overflow:hidden;width:'+l+"px;height:"+s+'px;"><div style="position:relative;left:'+r+"px;top:"+a+'px;">'+t.container.innerHTML,e.writeln(i+"</div></div></body><html>"),e.close()}else{for(e.writeln("<html><head>"),o=document.getElementsByTagName("base"),n=0;n<o.length;n++)e.writeln(mxUtils.getOuterHtml(o[n]));for(i=document.getElementsByTagName("link"),n=0;n<i.length;n++)e.writeln(mxUtils.getOuterHtml(i[n]));for(i=document.getElementsByTagName("style"),n=0;n<i.length;n++)e.writeln(mxUtils.getOuterHtml(i[n]));for(e.writeln('</head><body style="margin:0px;"></body></html>'),e.close(),(n=e.createElement("div")).position="absolute",n.overflow="hidden",n.style.width=l+"px",n.style.height=s+"px",(l=e.createElement("div")).style.position="absolute",l.style.left=r+"px",l.style.top=a+"px",s=t.container.firstChild,i=null;null!=s;)o=s.cloneNode(!0),s==t.view.drawPane.ownerSVGElement?(n.appendChild(o),i=o):l.appendChild(o),s=s.nextSibling;e.body.appendChild(n),null!=l.firstChild&&e.body.appendChild(l),null!=i&&(i.style.minWidth="",i.style.minHeight="",i.firstChild.setAttribute("transform","translate("+r+","+a+")"))}return mxUtils.removeCursors(e.body),e},printScreen:function(t){var e=window.open();t.getGraphBounds(),mxUtils.show(t,e.document),t=function(){e.focus(),e.print(),e.close()},mxClient.IS_GC?e.setTimeout(t,500):t()},popup:function(t,e){var n,i;e?((n=document.createElement("div")).style.overflow="scroll",n.style.width="636px",n.style.height="460px",(i=document.createElement("pre")).innerHTML=mxUtils.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.appendChild(i),(n=new mxWindow("Popup Window",n,document.body.clientWidth/2-320,Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)/2-240,640,480,!1,!0)).setClosable(!0),n.setVisible(!0)):mxClient.IS_NS?((n=window.open()).document.writeln("<pre>"+mxUtils.htmlEntities(t)+"</pre"),n.document.close()):((i=(n=window.open()).document.createElement("pre")).innerHTML=mxUtils.htmlEntities(t,!1).replace(/\n/g,"<br>").replace(/ /g,"&nbsp;"),n.document.body.appendChild(i))},alert:function(t){alert(t)},prompt:function(t,e){return prompt(t,null!=e?e:"")},confirm:function(t){return confirm(t)},error:function(t,e,n,i){var l=document.createElement("div"),s=(l.style.padding="20px",document.createElement("img")),o=(s.setAttribute("src",i||mxUtils.errorImage),s.setAttribute("valign","bottom"),s.style.verticalAlign="middle",l.appendChild(s),l.appendChild(document.createTextNode(" ")),l.appendChild(document.createTextNode(" ")),l.appendChild(document.createTextNode(" ")),mxUtils.write(l,t),t=document.body.clientWidth,i=document.body.clientHeight||document.documentElement.clientHeight,new mxWindow(mxResources.get(mxUtils.errorResource)||mxUtils.errorResource,l,(t-e)/2,i/4,e,null,!1,!0));return n&&(mxUtils.br(l),e=document.createElement("p"),n=document.createElement("button"),mxClient.IS_IE?n.style.cssText="float:right":n.setAttribute("style","float:right"),mxEvent.addListener(n,"click",function(t){o.destroy()}),mxUtils.write(n,mxResources.get(mxUtils.closeResource)||mxUtils.closeResource),e.appendChild(n),l.appendChild(e),mxUtils.br(l),o.setClosable(!0)),o.setVisible(!0),o},makeDraggable:function(t,e,n,l,i,s,o,r,a,h){return(t=new mxDragSource(t,n)).dragOffset=new mxPoint(null!=i?i:0,null!=s?s:mxConstants.TOOLTIP_VERTICAL_OFFSET),t.autoscroll=o,t.setGuidesEnabled(!1),null!=a&&(t.highlightDropTargets=a),null!=h&&(t.getDropTarget=h),t.getGraphForEvent=function(t){return"function"==typeof e?e(t):e},null!=l&&(t.createDragElement=function(){return l.cloneNode(!0)},r)&&(t.createPreviewElement=function(t){var e=l.cloneNode(!0),n=parseInt(e.style.width),i=parseInt(e.style.height);return e.style.width=Math.round(n*t.view.scale)+"px",e.style.height=Math.round(i*t.view.scale)+"px",e}),t}},mxConstants={DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster",RENDERING_HINT_FASTEST:"fastest",DIALECT_SVG:"svg",DIALECT_MIXEDHTML:"mixedHtml",DIALECT_PREFERHTML:"preferHtml",DIALECT_STRICTHTML:"strictHtml",NS_SVG:"http://www.w3.org/2000/svg",NS_XHTML:"http://www.w3.org/1999/xhtml",NS_XLINK:"http://www.w3.org/1999/xlink",SHADOWCOLOR:"gray",VML_SHADOWCOLOR:"gray",SHADOW_OFFSET_X:2,SHADOW_OFFSET_Y:3,SHADOW_OPACITY:1,NODETYPE_ELEMENT:1,NODETYPE_ATTRIBUTE:2,NODETYPE_TEXT:3,NODETYPE_CDATA:4,NODETYPE_ENTITY_REFERENCE:5,NODETYPE_ENTITY:6,NODETYPE_PROCESSING_INSTRUCTION:7,NODETYPE_COMMENT:8,NODETYPE_DOCUMENT:9,NODETYPE_DOCUMENTTYPE:10,NODETYPE_DOCUMENT_FRAGMENT:11,NODETYPE_NOTATION:12,TOOLTIP_VERTICAL_OFFSET:16,DEFAULT_VALID_COLOR:"#00FF00",DEFAULT_INVALID_COLOR:"#FF0000",OUTLINE_HIGHLIGHT_COLOR:"#00FF00",OUTLINE_HIGHLIGHT_STROKEWIDTH:5,HIGHLIGHT_STROKEWIDTH:3,HIGHLIGHT_SIZE:2,HIGHLIGHT_OPACITY:100,CURSOR_MOVABLE_VERTEX:"move",CURSOR_MOVABLE_EDGE:"move",CURSOR_LABEL_HANDLE:"default",CURSOR_TERMINAL_HANDLE:"pointer",CURSOR_BEND_HANDLE:"crosshair",CURSOR_VIRTUAL_BEND_HANDLE:"crosshair",CURSOR_CONNECT:"pointer",HIGHLIGHT_COLOR:"#00FF00",CONNECT_TARGET_COLOR:"#0000FF",INVALID_CONNECT_TARGET_COLOR:"#FF0000",DROP_TARGET_COLOR:"#0000FF",VALID_COLOR:"#00FF00",INVALID_COLOR:"#FF0000",EDGE_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_COLOR:"#00FF00",VERTEX_SELECTION_STROKEWIDTH:1,EDGE_SELECTION_STROKEWIDTH:1,VERTEX_SELECTION_DASHED:!0,EDGE_SELECTION_DASHED:!0,GUIDE_COLOR:"#FF0000",GUIDE_STROKEWIDTH:1,OUTLINE_COLOR:"#0099FF",OUTLINE_STROKEWIDTH:mxClient.IS_IE?2:3,HANDLE_SIZE:6,LABEL_HANDLE_SIZE:4,HANDLE_FILLCOLOR:"#00FF00",HANDLE_STROKECOLOR:"black",LABEL_HANDLE_FILLCOLOR:"yellow",CONNECT_HANDLE_FILLCOLOR:"#0000FF",LOCKED_HANDLE_FILLCOLOR:"#FF0000",OUTLINE_HANDLE_FILLCOLOR:"#00FFFF",OUTLINE_HANDLE_STROKECOLOR:"#0033FF",DEFAULT_FONTFAMILY:"Arial,Helvetica",DEFAULT_FONTSIZE:11,DEFAULT_TEXT_DIRECTION:"",LINE_HEIGHT:1.2,WORD_WRAP:"normal",ABSOLUTE_LINE_HEIGHT:!1,DEFAULT_FONTSTYLE:0,DEFAULT_STARTSIZE:40,DEFAULT_MARKERSIZE:6,DEFAULT_IMAGESIZE:24,ENTITY_SEGMENT:30,RECTANGLE_ROUNDING_FACTOR:.15,LINE_ARCSIZE:20,ARROW_SPACING:0,ARROW_WIDTH:30,ARROW_SIZE:30,PAGE_FORMAT_A4_PORTRAIT:new mxRectangle(0,0,827,1169),PAGE_FORMAT_A4_LANDSCAPE:new mxRectangle(0,0,1169,827),PAGE_FORMAT_LETTER_PORTRAIT:new mxRectangle(0,0,850,1100),PAGE_FORMAT_LETTER_LANDSCAPE:new mxRectangle(0,0,1100,850),NONE:"none",STYLE_PERIMETER:"perimeter",STYLE_SOURCE_PORT:"sourcePort",STYLE_TARGET_PORT:"targetPort",STYLE_PORT_CONSTRAINT:"portConstraint",STYLE_PORT_CONSTRAINT_ROTATION:"portConstraintRotation",STYLE_SOURCE_PORT_CONSTRAINT:"sourcePortConstraint",STYLE_TARGET_PORT_CONSTRAINT:"targetPortConstraint",STYLE_OPACITY:"opacity",STYLE_FILL_OPACITY:"fillOpacity",STYLE_STROKE_OPACITY:"strokeOpacity",STYLE_TEXT_OPACITY:"textOpacity",STYLE_TEXT_DIRECTION:"textDirection",STYLE_OVERFLOW:"overflow",STYLE_BLOCK_SPACING:"blockSpacing",STYLE_ORTHOGONAL:"orthogonal",STYLE_EXIT_X:"exitX",STYLE_EXIT_Y:"exitY",STYLE_EXIT_DX:"exitDx",STYLE_EXIT_DY:"exitDy",STYLE_EXIT_PERIMETER:"exitPerimeter",STYLE_ENTRY_X:"entryX",STYLE_ENTRY_Y:"entryY",STYLE_ENTRY_DX:"entryDx",STYLE_ENTRY_DY:"entryDy",STYLE_ENTRY_PERIMETER:"entryPerimeter",STYLE_WHITE_SPACE:"whiteSpace",STYLE_ROTATION:"rotation",STYLE_FILLCOLOR:"fillColor",STYLE_POINTER_EVENTS:"pointerEvents",STYLE_SWIMLANE_FILLCOLOR:"swimlaneFillColor",STYLE_MARGIN:"margin",STYLE_GRADIENTCOLOR:"gradientColor",STYLE_GRADIENT_DIRECTION:"gradientDirection",STYLE_STROKECOLOR:"strokeColor",STYLE_SEPARATORCOLOR:"separatorColor",STYLE_STROKEWIDTH:"strokeWidth",STYLE_ALIGN:"align",STYLE_VERTICAL_ALIGN:"verticalAlign",STYLE_LABEL_WIDTH:"labelWidth",STYLE_LABEL_POSITION:"labelPosition",STYLE_VERTICAL_LABEL_POSITION:"verticalLabelPosition",STYLE_IMAGE_ASPECT:"imageAspect",STYLE_IMAGE_ALIGN:"imageAlign",STYLE_IMAGE_VERTICAL_ALIGN:"imageVerticalAlign",STYLE_GLASS:"glass",STYLE_IMAGE:"image",STYLE_IMAGE_WIDTH:"imageWidth",STYLE_IMAGE_HEIGHT:"imageHeight",STYLE_IMAGE_BACKGROUND:"imageBackground",STYLE_IMAGE_BORDER:"imageBorder",STYLE_FLIPH:"flipH",STYLE_FLIPV:"flipV",STYLE_NOLABEL:"noLabel",STYLE_NOEDGESTYLE:"noEdgeStyle",STYLE_LABEL_BACKGROUNDCOLOR:"labelBackgroundColor",STYLE_LABEL_BORDERCOLOR:"labelBorderColor",STYLE_LABEL_PADDING:"labelPadding",STYLE_INDICATOR_SHAPE:"indicatorShape",STYLE_INDICATOR_IMAGE:"indicatorImage",STYLE_INDICATOR_COLOR:"indicatorColor",STYLE_INDICATOR_STROKECOLOR:"indicatorStrokeColor",STYLE_INDICATOR_GRADIENTCOLOR:"indicatorGradientColor",STYLE_INDICATOR_SPACING:"indicatorSpacing",STYLE_INDICATOR_WIDTH:"indicatorWidth",STYLE_INDICATOR_HEIGHT:"indicatorHeight",STYLE_INDICATOR_DIRECTION:"indicatorDirection",STYLE_SHADOW:"shadow",STYLE_SEGMENT:"segment",STYLE_ENDARROW:"endArrow",STYLE_STARTARROW:"startArrow",STYLE_ENDSIZE:"endSize",STYLE_STARTSIZE:"startSize",STYLE_SWIMLANE_LINE:"swimlaneLine",STYLE_ENDFILL:"endFill",STYLE_STARTFILL:"startFill",STYLE_DASHED:"dashed",STYLE_DASH_PATTERN:"dashPattern",STYLE_FIX_DASH:"fixDash",STYLE_ROUNDED:"rounded",STYLE_CURVED:"curved",STYLE_ARCSIZE:"arcSize",STYLE_ABSOLUTE_ARCSIZE:"absoluteArcSize",STYLE_SOURCE_PERIMETER_SPACING:"sourcePerimeterSpacing",STYLE_TARGET_PERIMETER_SPACING:"targetPerimeterSpacing",STYLE_PERIMETER_SPACING:"perimeterSpacing",STYLE_SPACING:"spacing",STYLE_SPACING_TOP:"spacingTop",STYLE_SPACING_LEFT:"spacingLeft",STYLE_SPACING_BOTTOM:"spacingBottom",STYLE_SPACING_RIGHT:"spacingRight",STYLE_HORIZONTAL:"horizontal",STYLE_DIRECTION:"direction",STYLE_ANCHOR_POINT_DIRECTION:"anchorPointDirection",STYLE_ELBOW:"elbow",STYLE_FONTCOLOR:"fontColor",STYLE_FONTFAMILY:"fontFamily",STYLE_FONTSIZE:"fontSize",STYLE_FONTSTYLE:"fontStyle",STYLE_ASPECT:"aspect",STYLE_AUTOSIZE:"autosize",STYLE_FOLDABLE:"foldable",STYLE_EDITABLE:"editable",STYLE_BACKGROUND_OUTLINE:"backgroundOutline",STYLE_BENDABLE:"bendable",STYLE_MOVABLE:"movable",STYLE_RESIZABLE:"resizable",STYLE_RESIZE_WIDTH:"resizeWidth",STYLE_RESIZE_HEIGHT:"resizeHeight",STYLE_ROTATABLE:"rotatable",STYLE_CLONEABLE:"cloneable",STYLE_DELETABLE:"deletable",STYLE_SHAPE:"shape",STYLE_EDGE:"edgeStyle",STYLE_JETTY_SIZE:"jettySize",STYLE_SOURCE_JETTY_SIZE:"sourceJettySize",STYLE_TARGET_JETTY_SIZE:"targetJettySize",STYLE_LOOP:"loopStyle",STYLE_ORTHOGONAL_LOOP:"orthogonalLoop",STYLE_ROUTING_CENTER_X:"routingCenterX",STYLE_ROUTING_CENTER_Y:"routingCenterY",FONT_BOLD:1,FONT_ITALIC:2,FONT_UNDERLINE:4,FONT_STRIKETHROUGH:8,SHAPE_RECTANGLE:"rectangle",SHAPE_ELLIPSE:"ellipse",SHAPE_DOUBLE_ELLIPSE:"doubleEllipse",SHAPE_RHOMBUS:"rhombus",SHAPE_LINE:"line",SHAPE_IMAGE:"image",SHAPE_ARROW:"arrow",SHAPE_ARROW_CONNECTOR:"arrowConnector",SHAPE_LABEL:"label",SHAPE_CYLINDER:"cylinder",SHAPE_SWIMLANE:"swimlane",SHAPE_CONNECTOR:"connector",SHAPE_ACTOR:"actor",SHAPE_CLOUD:"cloud",SHAPE_TRIANGLE:"triangle",SHAPE_HEXAGON:"hexagon",ARROW_CLASSIC:"classic",ARROW_CLASSIC_THIN:"classicThin",ARROW_BLOCK:"block",ARROW_BLOCK_THIN:"blockThin",ARROW_OPEN:"open",ARROW_OPEN_THIN:"openThin",ARROW_OVAL:"oval",ARROW_DIAMOND:"diamond",ARROW_DIAMOND_THIN:"diamondThin",ALIGN_LEFT:"left",ALIGN_CENTER:"center",ALIGN_RIGHT:"right",ALIGN_TOP:"top",ALIGN_MIDDLE:"middle",ALIGN_BOTTOM:"bottom",DIRECTION_NORTH:"north",DIRECTION_SOUTH:"south",DIRECTION_EAST:"east",DIRECTION_WEST:"west",TEXT_DIRECTION_DEFAULT:"",TEXT_DIRECTION_AUTO:"auto",TEXT_DIRECTION_LTR:"ltr",TEXT_DIRECTION_RTL:"rtl",DIRECTION_MASK_NONE:0,DIRECTION_MASK_WEST:1,DIRECTION_MASK_NORTH:2,DIRECTION_MASK_SOUTH:4,DIRECTION_MASK_EAST:8,DIRECTION_MASK_ALL:15,ELBOW_VERTICAL:"vertical",ELBOW_HORIZONTAL:"horizontal",EDGESTYLE_ELBOW:"elbowEdgeStyle",EDGESTYLE_ENTITY_RELATION:"entityRelationEdgeStyle",EDGESTYLE_LOOP:"loopEdgeStyle",EDGESTYLE_SIDETOSIDE:"sideToSideEdgeStyle",EDGESTYLE_TOPTOBOTTOM:"topToBottomEdgeStyle",EDGESTYLE_ORTHOGONAL:"orthogonalEdgeStyle",EDGESTYLE_SEGMENT:"segmentEdgeStyle",PERIMETER_ELLIPSE:"ellipsePerimeter",PERIMETER_RECTANGLE:"rectanglePerimeter",PERIMETER_RHOMBUS:"rhombusPerimeter",PERIMETER_HEXAGON:"hexagonPerimeter",PERIMETER_TRIANGLE:"trianglePerimeter"};function mxEventObject(t){this.name=t,this.properties=[];for(var e=1;e<arguments.length;e+=2)null!=arguments[e+1]&&(this.properties[arguments[e]]=arguments[e+1])}function mxMouseEvent(t,e){this.evt=t,this.sourceState=this.state=e}function mxEventSource(t){this.setEventSource(t)}mxEventObject.prototype.name=null,mxEventObject.prototype.properties=null,mxEventObject.prototype.consumed=!1,mxEventObject.prototype.getName=function(){return this.name},mxEventObject.prototype.getProperties=function(){return this.properties},mxEventObject.prototype.getProperty=function(t){return this.properties[t]},mxEventObject.prototype.isConsumed=function(){return this.consumed},mxEventObject.prototype.consume=function(){this.consumed=!0},mxMouseEvent.prototype.consumed=!1,mxMouseEvent.prototype.evt=null,mxMouseEvent.prototype.graphX=null,mxMouseEvent.prototype.graphY=null,mxMouseEvent.prototype.state=null,mxMouseEvent.prototype.sourceState=null,mxMouseEvent.prototype.getEvent=function(){return this.evt},mxMouseEvent.prototype.getSource=function(){return mxEvent.getSource(this.evt)},mxMouseEvent.prototype.isSource=function(t){return null!=t&&mxUtils.isAncestorNode(t.node,this.getSource())},mxMouseEvent.prototype.getX=function(){return mxEvent.getClientX(this.getEvent())},mxMouseEvent.prototype.getY=function(){return mxEvent.getClientY(this.getEvent())},mxMouseEvent.prototype.getGraphX=function(){return this.graphX},mxMouseEvent.prototype.getGraphY=function(){return this.graphY},mxMouseEvent.prototype.getState=function(){return this.state},mxMouseEvent.prototype.getCell=function(){var t=this.getState();return null!=t?t.cell:null},mxMouseEvent.prototype.isPopupTrigger=function(){return mxEvent.isPopupTrigger(this.getEvent())},mxMouseEvent.prototype.isConsumed=function(){return this.consumed},mxMouseEvent.prototype.consume=function(t){(t=null!=t?t:null!=this.evt.touches||mxEvent.isMouseEvent(this.evt))&&this.evt.preventDefault&&this.evt.preventDefault(),mxClient.IS_IE&&(this.evt.returnValue=!0),this.consumed=!0},mxEventSource.prototype.eventListeners=null,mxEventSource.prototype.eventsEnabled=!0,mxEventSource.prototype.eventSource=null,mxEventSource.prototype.isEventsEnabled=function(){return this.eventsEnabled},mxEventSource.prototype.setEventsEnabled=function(t){this.eventsEnabled=t},mxEventSource.prototype.getEventSource=function(){return this.eventSource},mxEventSource.prototype.setEventSource=function(t){this.eventSource=t},mxEventSource.prototype.addListener=function(t,e){null==this.eventListeners&&(this.eventListeners=[]),this.eventListeners.push(t),this.eventListeners.push(e)},mxEventSource.prototype.removeListener=function(t){if(null!=this.eventListeners)for(var e=0;e<this.eventListeners.length;)this.eventListeners[e+1]==t?this.eventListeners.splice(e,2):e+=2},mxEventSource.prototype.fireEvent=function(t,e){if(null!=this.eventListeners&&this.isEventsEnabled()){null==t&&(t=new mxEventObject);for(var n=[e=null==(e=null==e?this.getEventSource():e)?this:e,t],i=0;i<this.eventListeners.length;i+=2){var l=this.eventListeners[i];null!=l&&l!=t.getName()||this.eventListeners[i+1].apply(this,n)}}};var mxEvent={addListener:function(){if(window.addEventListener){var i=!1;try{document.addEventListener("test",function(){},Object.defineProperty&&Object.defineProperty({},"passive",{get:function(){i=!0}}))}catch(t){}return function(t,e,n){t.addEventListener(e,n,!!i&&{passive:!1}),null==t.mxListenerList&&(t.mxListenerList=[]),t.mxListenerList.push({name:e,f:n})}}return function(t,e,n){t.attachEvent("on"+e,n),null==t.mxListenerList&&(t.mxListenerList=[]),t.mxListenerList.push({name:e,f:n})}}(),removeListener:function(){function i(t,e,n){if(null!=t.mxListenerList){e=t.mxListenerList.length;for(var i=0;i<e;i++)if(t.mxListenerList[i].f==n){t.mxListenerList.splice(i,1);break}0==t.mxListenerList.length&&(t.mxListenerList=null)}}return window.removeEventListener?function(t,e,n){t.removeEventListener(e,n,!1),i(t,0,n)}:function(t,e,n){t.detachEvent("on"+e,n),i(t,0,n)}}(),removeAllListeners:function(t){var e=t.mxListenerList;if(null!=e)for(;0<e.length;){var n=e[0];mxEvent.removeListener(t,n.name,n.f)}},addGestureListeners:function(t,e,n,i){null!=e&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",e),null!=n&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=i&&mxEvent.addListener(t,mxClient.IS_POINTER?"pointerup":"mouseup",i),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=e&&mxEvent.addListener(t,"touchstart",e),null!=n&&mxEvent.addListener(t,"touchmove",n),null!=i)&&mxEvent.addListener(t,"touchend",i)},removeGestureListeners:function(t,e,n,i){null!=e&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointerdown":"mousedown",e),null!=n&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointermove":"mousemove",n),null!=i&&mxEvent.removeListener(t,mxClient.IS_POINTER?"pointerup":"mouseup",i),!mxClient.IS_POINTER&&mxClient.IS_TOUCH&&(null!=e&&mxEvent.removeListener(t,"touchstart",e),null!=n&&mxEvent.removeListener(t,"touchmove",n),null!=i)&&mxEvent.removeListener(t,"touchend",i)},redirectMouseEvents:function(t,n,e,i,l,s,o){function r(t){return"function"==typeof e?e(t):e}mxEvent.addGestureListeners(t,function(t){null!=i?i(t):mxEvent.isConsumed(t)||n.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,r(t)))},function(t){null!=l?l(t):mxEvent.isConsumed(t)||n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,r(t)))},function(t){null!=s?s(t):mxEvent.isConsumed(t)||n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,r(t)))}),mxEvent.addListener(t,"dblclick",function(t){var e;null!=o?o(t):mxEvent.isConsumed(t)||(e=r(t),n.dblClick(t,null!=e?e.cell:null))})},release:function(t){try{if(null!=t){mxEvent.removeAllListeners(t);var e=t.childNodes;if(null!=e){var n=e.length;for(t=0;t<n;t+=1)mxEvent.release(e[t])}}}catch(t){}},addMouseWheelListener:function(l,t){var n,s,o,r;null!=l&&(t=null!=t?t:window,mxClient.IS_SF&&!mxClient.IS_TOUCH?(n=1,mxEvent.addListener(t,"gesturestart",function(t){mxEvent.consume(t),n=1}),mxEvent.addListener(t,"gesturechange",function(t){mxEvent.consume(t);var e=n-t.scale;.2<Math.abs(e)&&(l(t,e<0,!0),n=t.scale)}),mxEvent.addListener(t,"gestureend",function(t){mxEvent.consume(t)})):(s=[],r=o=0,mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)||null==t.pointerId||s.push(t)}),mxUtils.bind(this,function(t){if(!mxEvent.isMouseEvent(t)&&2==s.length){for(var e=0;e<s.length;e++)if(t.pointerId==s[e].pointerId){s[e]=t;break}t=Math.abs(s[0].clientX-s[1].clientX);var e=Math.abs(s[0].clientY-s[1].clientY),n=Math.abs(t-o),i=Math.abs(e-r);(n>mxEvent.PINCH_THRESHOLD||i>mxEvent.PINCH_THRESHOLD)&&(l(s[0],i<n?o<t:r<e,!0,s[0].clientX+(s[1].clientX-s[0].clientX)/2,s[0].clientY+(s[1].clientY-s[0].clientY)/2),o=t,r=e)}}),mxUtils.bind(this,function(t){s=[],r=o=0}))),mxEvent.addListener(t,"wheel",function(t){(t=null==t?window.event:t).ctrlKey&&t.preventDefault(),(.5<Math.abs(t.deltaX)||.5<Math.abs(t.deltaY))&&l(t,0==t.deltaY?0<-t.deltaX:0<-t.deltaY)}))},disableContextMenu:function(t){mxEvent.addListener(t,"contextmenu",function(t){return t.preventDefault&&t.preventDefault(),!1})},getSource:function(t){return null!=t.srcElement?t.srcElement:t.target},isConsumed:function(t){return null!=t.isConsumed&&t.isConsumed},isTouchEvent:function(t){return null!=t.pointerType?"touch"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_TOUCH:null!=t.mozInputSource?5==t.mozInputSource:0==t.type.indexOf("touch")},isPenEvent:function(t){return null!=t.pointerType?"pen"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_PEN:null!=t.mozInputSource?2==t.mozInputSource:0==t.type.indexOf("pen")},isMultiTouchEvent:function(t){return null!=t.type&&0==t.type.indexOf("touch")&&null!=t.touches&&1<t.touches.length},isMouseEvent:function(t){return null!=t.pointerType?"mouse"==t.pointerType||t.pointerType===t.MSPOINTER_TYPE_MOUSE:null!=t.mozInputSource?1==t.mozInputSource:0==t.type.indexOf("mouse")},isLeftMouseButton:function(t){return"buttons"in t&&("mousedown"==t.type||"mousemove"==t.type)?1==t.buttons:"which"in t?1===t.which:1===t.button},isMiddleMouseButton:function(t){return"which"in t?2===t.which:4===t.button},isRightMouseButton:function(t){return"which"in t?3===t.which:2===t.button},isPopupTrigger:function(t){return mxEvent.isRightMouseButton(t)||mxClient.IS_MAC&&mxEvent.isControlDown(t)&&!mxEvent.isShiftDown(t)&&!mxEvent.isMetaDown(t)&&!mxEvent.isAltDown(t)},isShiftDown:function(t){return null!=t&&t.shiftKey},isAltDown:function(t){return null!=t&&t.altKey},isControlDown:function(t){return null!=t&&t.ctrlKey},isMetaDown:function(t){return null!=t&&t.metaKey},getMainEvent:function(t){return"touchstart"!=t.type&&"touchmove"!=t.type||null==t.touches||null==t.touches[0]?"touchend"==t.type&&null!=t.changedTouches&&null!=t.changedTouches[0]&&(t=t.changedTouches[0]):t=t.touches[0],t},getClientX:function(t){return mxEvent.getMainEvent(t).clientX},getClientY:function(t){return mxEvent.getMainEvent(t).clientY},consume:function(t,e,n){n=null==n||n,null!=e&&!e||(t.preventDefault?(n&&t.stopPropagation(),t.preventDefault()):n&&(t.cancelBubble=!0)),t.isConsumed=!0,t.preventDefault||(t.returnValue=!1)},LABEL_HANDLE:-1,ROTATION_HANDLE:-2,CUSTOM_HANDLE:-100,VIRTUAL_HANDLE:-1e5,MOUSE_DOWN:"mouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",ACTIVATE:"activate",RESIZE_START:"resizeStart",RESIZE:"resize",RESIZE_END:"resizeEnd",MOVE_START:"moveStart",MOVE:"move",MOVE_END:"moveEnd",PAN_START:"panStart",PAN:"pan",PAN_END:"panEnd",MINIMIZE:"minimize",NORMALIZE:"normalize",MAXIMIZE:"maximize",HIDE:"hide",SHOW:"show",CLOSE:"close",DESTROY:"destroy",REFRESH:"refresh",SIZE:"size",SELECT:"select",FIRED:"fired",FIRE_MOUSE_EVENT:"fireMouseEvent",GESTURE:"gesture",TAP_AND_HOLD:"tapAndHold",GET:"get",RECEIVE:"receive",CONNECT:"connect",DISCONNECT:"disconnect",SUSPEND:"suspend",RESUME:"resume",MARK:"mark",ROOT:"root",POST:"post",OPEN:"open",SAVE:"save",BEFORE_ADD_VERTEX:"beforeAddVertex",ADD_VERTEX:"addVertex",AFTER_ADD_VERTEX:"afterAddVertex",DONE:"done",EXECUTE:"execute",EXECUTED:"executed",BEGIN_UPDATE:"beginUpdate",START_EDIT:"startEdit",END_UPDATE:"endUpdate",END_EDIT:"endEdit",BEFORE_UNDO:"beforeUndo",UNDO:"undo",REDO:"redo",CHANGE:"change",NOTIFY:"notify",LAYOUT_CELLS:"layoutCells",CLICK:"click",SCALE:"scale",TRANSLATE:"translate",SCALE_AND_TRANSLATE:"scaleAndTranslate",UP:"up",DOWN:"down",ADD:"add",REMOVE:"remove",CLEAR:"clear",ADD_CELLS:"addCells",CELLS_ADDED:"cellsAdded",MOVE_CELLS:"moveCells",CELLS_MOVED:"cellsMoved",RESIZE_CELLS:"resizeCells",CELLS_RESIZED:"cellsResized",TOGGLE_CELLS:"toggleCells",CELLS_TOGGLED:"cellsToggled",ORDER_CELLS:"orderCells",CELLS_ORDERED:"cellsOrdered",REMOVE_CELLS:"removeCells",CELLS_REMOVED:"cellsRemoved",GROUP_CELLS:"groupCells",UNGROUP_CELLS:"ungroupCells",REMOVE_CELLS_FROM_PARENT:"removeCellsFromParent",FOLD_CELLS:"foldCells",CELLS_FOLDED:"cellsFolded",ALIGN_CELLS:"alignCells",LABEL_CHANGED:"labelChanged",CONNECT_CELL:"connectCell",CELL_CONNECTED:"cellConnected",SPLIT_EDGE:"splitEdge",FLIP_EDGE:"flipEdge",START_EDITING:"startEditing",EDITING_STARTED:"editingStarted",EDITING_STOPPED:"editingStopped",ADD_OVERLAY:"addOverlay",REMOVE_OVERLAY:"removeOverlay",UPDATE_CELL_SIZE:"updateCellSize",ESCAPE:"escape",DOUBLE_CLICK:"doubleClick",START:"start",RESET:"reset",PINCH_THRESHOLD:10};function mxXmlRequest(t,e,n,i,l,s){this.url=t,this.params=e,this.method=n||"POST",this.async=null==i||i,this.username=l,this.password=s}mxXmlRequest.prototype.url=null,mxXmlRequest.prototype.params=null,mxXmlRequest.prototype.method=null,mxXmlRequest.prototype.async=null,mxXmlRequest.prototype.binary=!1,mxXmlRequest.prototype.withCredentials=!1,mxXmlRequest.prototype.username=null,mxXmlRequest.prototype.password=null,mxXmlRequest.prototype.request=null,mxXmlRequest.prototype.decodeSimulateValues=!1,mxXmlRequest.prototype.isBinary=function(){return this.binary},mxXmlRequest.prototype.setBinary=function(t){this.binary=t},mxXmlRequest.prototype.getText=function(){return this.request.responseText},mxXmlRequest.prototype.isReady=function(){return 4==this.request.readyState},mxXmlRequest.prototype.getDocumentElement=function(){var t=this.getXml();return null!=t?t.documentElement:null},mxXmlRequest.prototype.getXml=function(){var t=this.request.responseXML;return t=9<=document.documentMode||null==t||null==t.documentElement?mxUtils.parseXml(this.request.responseText):t},mxXmlRequest.prototype.getStatus=function(){return null!=this.request?this.request.status:null},mxXmlRequest.prototype.create=window.XMLHttpRequest?function(){var t=new XMLHttpRequest;return this.isBinary()&&t.overrideMimeType&&t.overrideMimeType("text/plain; charset=x-user-defined"),t}:"undefined"!=typeof ActiveXObject?function(){return new ActiveXObject("Microsoft.XMLHTTP")}:void 0,mxXmlRequest.prototype.send=function(t,e,n,i){this.request=this.create(),null!=this.request&&(null!=t&&(this.request.onreadystatechange=mxUtils.bind(this,function(){this.isReady()&&(t(this),this.request.onreadystatechange=null)})),this.request.open(this.method,this.url,this.async,this.username,this.password),this.setRequestHeaders(this.request,this.params),window.XMLHttpRequest&&this.withCredentials&&(this.request.withCredentials="true"),(null==document.documentMode||9<document.documentMode)&&window.XMLHttpRequest&&null!=n&&null!=i&&(this.request.timeout=n,this.request.ontimeout=i),this.request.send(this.params))},mxXmlRequest.prototype.setRequestHeaders=function(t,e){null!=e&&t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")},mxXmlRequest.prototype.simulate=function(t,e){var n=null,i=((t=t||document)==document&&(n=window.onbeforeunload,window.onbeforeunload=null),t.createElement("form"));i.setAttribute("method",this.method),i.setAttribute("action",this.url),null!=e&&i.setAttribute("target",e),i.style.display="none",i.style.visibility="hidden";for(var l=0<this.params.indexOf("&")?this.params.split("&"):this.params.split(),s=0;s<l.length;s++){var o,r,a=l[s].indexOf("=");0<a&&(o=l[s].substring(0,a),a=l[s].substring(a+1),this.decodeSimulateValues&&(a=decodeURIComponent(a)),(r=t.createElement("textarea")).setAttribute("wrap","off"),r.setAttribute("name",o),mxUtils.write(r,a),i.appendChild(r))}t.body.appendChild(i),i.submit(),null!=i.parentNode&&i.parentNode.removeChild(i),null!=n&&(window.onbeforeunload=n)};var mxClipboard={STEPSIZE:10,insertCount:1,cells:null,setCells:function(t){mxClipboard.cells=t},getCells:function(){return mxClipboard.cells},isEmpty:function(){return null==mxClipboard.getCells()},cut:function(t,e){return e=mxClipboard.copy(t,e),mxClipboard.insertCount=0,mxClipboard.removeCells(t,e),e},removeCells:function(t,e){t.removeCells(e)},copy:function(t,e){e=e||t.getSelectionCells();e=t.getExportableCells(t.model.getTopmostCells(e));return mxClipboard.insertCount=1,mxClipboard.setCells(t.cloneCells(e)),e},paste:function(t){var e,n,i=null;return mxClipboard.isEmpty()||(i=t.getImportableCells(mxClipboard.getCells()),e=mxClipboard.insertCount*mxClipboard.STEPSIZE,n=t.getDefaultParent(),i=t.importCells(i,e,e,n),mxClipboard.insertCount++,t.setSelectionCells(i)),i}};function mxWindow(t,e,n,i,l,s,o,r,a,h){null!=e&&(o=null==o||o,this.content=e,this.init(n,i,l,s,h),this.installMaximizeHandler(),this.installMinimizeHandler(),this.installCloseHandler(),this.setMinimizable(o),this.setTitle(t),null!=r&&!r||this.installMoveHandler(),null!=a&&null!=a.parentNode?a.parentNode.replaceChild(this.div,a):document.body.appendChild(this.div))}function mxForm(t){this.table=document.createElement("table"),this.table.className=t,this.body=document.createElement("tbody"),this.table.appendChild(this.body)}function mxImage(t,e,n){this.src=t,this.width=e,this.height=n}function mxDivResizer(t,e){"div"==t.nodeName.toLowerCase()&&(null==e&&(e=window),this.div=t,null!=(t=mxUtils.getCurrentStyle(t))&&(this.resizeWidth="auto"==t.width,this.resizeHeight="auto"==t.height),mxEvent.addListener(e,"resize",mxUtils.bind(this,function(t){this.handlingResize||(this.handlingResize=!0,this.resize(),this.handlingResize=!1)})),this.resize())}function mxDragSource(t,e){this.element=t,this.dropHandler=e,mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){this.mouseDown(t)})),mxEvent.addListener(t,"dragstart",function(t){mxEvent.consume(t)}),this.eventConsumer=function(t,e){var n=e.getProperty("eventName"),e=e.getProperty("event");n!=mxEvent.MOUSE_DOWN&&e.consume()}}function mxToolbar(t){this.container=t}function mxUndoableEdit(t,e){this.source=t,this.changes=[],this.significant=null==e||e}function mxUndoManager(t){this.size=null!=t?t:100,this.clear()}mxWindow.prototype=new mxEventSource,mxWindow.prototype.constructor=mxWindow,mxWindow.prototype.closeImage=mxClient.imageBasePath+"/close.gif",mxWindow.prototype.minimizeImage=mxClient.imageBasePath+"/minimize.gif",mxWindow.prototype.normalizeImage=mxClient.imageBasePath+"/normalize.gif",mxWindow.prototype.maximizeImage=mxClient.imageBasePath+"/maximize.gif",mxWindow.prototype.resizeImage=mxClient.imageBasePath+"/resize.gif",mxWindow.prototype.visible=!1,mxWindow.prototype.minimumSize=new mxRectangle(0,0,50,40),mxWindow.prototype.destroyOnClose=!0,mxWindow.prototype.contentHeightCorrection=8==document.documentMode||7==document.documentMode?6:2,mxWindow.prototype.title=null,mxWindow.prototype.content=null,mxWindow.prototype.init=function(t,e,n,i,l){l=null!=l?l:"mxWindow",this.div=document.createElement("div"),this.div.className=l,this.div.style.left=t+"px",this.div.style.top=e+"px",this.table=document.createElement("table"),this.table.className=l,mxClient.IS_POINTER&&(this.div.style.touchAction="none"),null!=n&&(this.div.style.width=n+"px",this.table.style.width=n+"px"),null!=i&&(this.div.style.height=i+"px",this.table.style.height=i+"px"),t=document.createElement("tbody"),e=document.createElement("tr"),this.title=document.createElement("td"),this.title.className=l+"Title",this.buttons=document.createElement("div"),this.buttons.style.position="absolute",this.buttons.style.display="inline-block",this.buttons.style.right="4px",this.buttons.style.top="5px",this.title.appendChild(this.buttons),e.appendChild(this.title),t.appendChild(e),e=document.createElement("tr"),this.td=document.createElement("td"),this.td.className=l+"Pane",7==document.documentMode&&(this.td.style.height="100%"),this.contentWrapper=document.createElement("div"),this.contentWrapper.className=l+"Pane",this.contentWrapper.style.width="100%",this.contentWrapper.appendChild(this.content),"DIV"!=this.content.nodeName.toUpperCase()&&(this.contentWrapper.style.height="100%"),this.td.appendChild(this.contentWrapper),e.appendChild(this.td),t.appendChild(e),this.table.appendChild(t),this.div.appendChild(this.table),l=mxUtils.bind(this,function(t){this.activate()}),mxEvent.addGestureListeners(this.title,l),mxEvent.addGestureListeners(this.table,l),this.hide()},mxWindow.prototype.setTitle=function(t){for(var e=this.title.firstChild;null!=e;){var n=e.nextSibling;e.nodeType==mxConstants.NODETYPE_TEXT&&e.parentNode.removeChild(e),e=n}mxUtils.write(this.title,t||""),this.title.appendChild(this.buttons)},mxWindow.prototype.setScrollable=function(t){(null==navigator.userAgent||navigator.userAgent.indexOf("Presto/2.5")<0)&&(this.contentWrapper.style.overflow=t?"auto":"hidden")},mxWindow.prototype.activate=function(){var t,e;mxWindow.activeWindow!=this&&(t=null!=(t=mxUtils.getCurrentStyle(this.getElement()))?t.zIndex:3,mxWindow.activeWindow&&null!=(e=mxWindow.activeWindow.getElement())&&null!=e.style&&(e.style.zIndex=t),e=mxWindow.activeWindow,this.getElement().style.zIndex=parseInt(t)+1,(mxWindow.activeWindow=this).fireEvent(new mxEventObject(mxEvent.ACTIVATE,"previousWindow",e)))},mxWindow.prototype.getElement=function(){return this.div},mxWindow.prototype.fit=function(){mxUtils.fit(this.div)},mxWindow.prototype.isResizable=function(){return null!=this.resize&&"none"!=this.resize.style.display},mxWindow.prototype.setResizable=function(t){var i,l,s,o,e,n;t?null==this.resize?(this.resize=document.createElement("img"),this.resize.style.position="absolute",this.resize.style.bottom="2px",this.resize.style.right="2px",this.resize.setAttribute("src",this.resizeImage),this.resize.style.cursor="nw-resize",o=s=l=i=null,t=mxUtils.bind(this,function(t){this.activate(),i=mxEvent.getClientX(t),l=mxEvent.getClientY(t),s=this.div.offsetWidth,o=this.div.offsetHeight,mxEvent.addGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.RESIZE_START,"event",t)),mxEvent.consume(t)}),e=mxUtils.bind(this,function(t){var e,n;null!=i&&null!=l&&(e=mxEvent.getClientX(t)-i,n=mxEvent.getClientY(t)-l,this.setSize(s+e,o+n),this.fireEvent(new mxEventObject(mxEvent.RESIZE,"event",t)),mxEvent.consume(t))}),n=mxUtils.bind(this,function(t){null!=i&&null!=l&&(l=i=null,mxEvent.removeGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.RESIZE_END,"event",t)),mxEvent.consume(t))}),mxEvent.addGestureListeners(this.resize,t,e,n),this.div.appendChild(this.resize)):this.resize.style.display="inline":null!=this.resize&&(this.resize.style.display="none")},mxWindow.prototype.setSize=function(t,e){t=Math.max(this.minimumSize.width,t),e=Math.max(this.minimumSize.height,e),this.div.style.width=t+"px",this.div.style.height=e+"px",this.table.style.width=t+"px",this.table.style.height=e+"px",this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"},mxWindow.prototype.setMinimizable=function(t){this.minimizeImg.style.display=t?"":"none"},mxWindow.prototype.getMinimumSize=function(){return new mxRectangle(0,0,0,this.title.offsetHeight)},mxWindow.prototype.toggleMinimized=function(t){var e;this.activate(),this.minimized?(this.minimized=!1,this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.contentWrapper.style.display="",this.maximize.style.display=this.maxDisplay,this.div.style.height=this.height,this.table.style.height=this.height,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",t))):(this.minimized=!0,this.minimizeImg.setAttribute("src",this.normalizeImage),this.minimizeImg.setAttribute("title","Normalize"),this.contentWrapper.style.display="none",this.maxDisplay=this.maximize.style.display,this.maximize.style.display="none",this.height=this.table.style.height,0<(e=this.getMinimumSize()).height&&(this.div.style.height=e.height+"px",this.table.style.height=e.height+"px"),0<e.width&&(this.div.style.width=e.width+"px",this.table.style.width=e.width+"px"),null!=this.resize&&(this.resize.style.visibility="hidden"),this.fireEvent(new mxEventObject(mxEvent.MINIMIZE,"event",t)))},mxWindow.prototype.installMinimizeHandler=function(){this.minimizeImg=document.createElement("img"),this.minimizeImg.setAttribute("src",this.minimizeImage),this.minimizeImg.setAttribute("title","Minimize"),this.minimizeImg.style.cursor="pointer",this.minimizeImg.style.marginLeft="2px",this.minimizeImg.style.display="none",this.buttons.appendChild(this.minimizeImg),this.minimized=!1,this.height=this.maxDisplay=null;var t=mxUtils.bind(this,function(t){this.toggleMinimized(t),mxEvent.consume(t)});mxEvent.addGestureListeners(this.minimizeImg,t)},mxWindow.prototype.setMaximizable=function(t){this.maximize.style.display=t?"":"none"},mxWindow.prototype.installMaximizeHandler=function(){this.maximize=document.createElement("img"),this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.maximize.style.cursor="default",this.maximize.style.marginLeft="2px",this.maximize.style.cursor="pointer",this.maximize.style.display="none",this.buttons.appendChild(this.maximize);var n=!1,i=null,l=null,s=null,o=null,r=null,t=mxUtils.bind(this,function(t){var e;this.activate(),"none"!=this.maximize.style.display&&(n?(n=!1,this.maximize.setAttribute("src",this.maximizeImage),this.maximize.setAttribute("title","Maximize"),this.contentWrapper.style.display="",this.minimizeImg.style.display=r,this.div.style.left=i+"px",this.div.style.top=l+"px",this.div.style.height=s,this.div.style.width=o,"auto"!=(e=mxUtils.getCurrentStyle(this.contentWrapper)).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.table.style.height=s,this.table.style.width=o,null!=this.resize&&(this.resize.style.visibility=""),this.fireEvent(new mxEventObject(mxEvent.NORMALIZE,"event",t))):(n=!0,this.maximize.setAttribute("src",this.normalizeImage),this.maximize.setAttribute("title","Normalize"),this.contentWrapper.style.display="",r=this.minimizeImg.style.display,this.minimizeImg.style.display="none",i=parseInt(this.div.style.left),l=parseInt(this.div.style.top),s=this.table.style.height,o=this.table.style.width,this.div.style.left="0px",this.div.style.top="0px",e=Math.max(document.body.clientHeight||0,document.documentElement.clientHeight||0),this.div.style.width=document.body.clientWidth-2+"px",this.div.style.height=e-2+"px",this.table.style.width=document.body.clientWidth-2+"px",this.table.style.height=e-2+"px",null!=this.resize&&(this.resize.style.visibility="hidden"),"auto"!=(e=mxUtils.getCurrentStyle(this.contentWrapper)).overflow&&null==this.resize||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.MAXIMIZE,"event",t))),mxEvent.consume(t))});mxEvent.addGestureListeners(this.maximize,t),mxEvent.addListener(this.title,"dblclick",t)},mxWindow.prototype.installMoveHandler=function(){this.title.style.cursor="move",mxEvent.addGestureListeners(this.title,mxUtils.bind(this,function(t){var i=mxEvent.getClientX(t),l=mxEvent.getClientY(t),s=this.getX(),o=this.getY(),e=mxUtils.bind(this,function(t){var e=mxEvent.getClientX(t)-i,n=mxEvent.getClientY(t)-l;this.setLocation(s+e,o+n),this.fireEvent(new mxEventObject(mxEvent.MOVE,"event",t)),mxEvent.consume(t)}),n=mxUtils.bind(this,function(t){mxEvent.removeGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.MOVE_END,"event",t)),mxEvent.consume(t)});mxEvent.addGestureListeners(document,null,e,n),this.fireEvent(new mxEventObject(mxEvent.MOVE_START,"event",t)),mxEvent.consume(t)})),mxClient.IS_POINTER&&(this.title.style.touchAction="none")},mxWindow.prototype.setLocation=function(t,e){this.div.style.left=t+"px",this.div.style.top=e+"px"},mxWindow.prototype.getX=function(){return parseInt(this.div.style.left)},mxWindow.prototype.getY=function(){return parseInt(this.div.style.top)},mxWindow.prototype.installCloseHandler=function(){this.closeImg=document.createElement("img"),this.closeImg.setAttribute("src",this.closeImage),this.closeImg.setAttribute("title","Close"),this.closeImg.style.marginLeft="2px",this.closeImg.style.cursor="pointer",this.closeImg.style.display="none",this.buttons.appendChild(this.closeImg),mxEvent.addGestureListeners(this.closeImg,mxUtils.bind(this,function(t){this.fireEvent(new mxEventObject(mxEvent.CLOSE,"event",t)),this.destroyOnClose?this.destroy():this.setVisible(!1),mxEvent.consume(t)}))},mxWindow.prototype.setImage=function(t){this.image=document.createElement("img"),this.image.setAttribute("src",t),this.image.setAttribute("align","left"),this.image.style.marginRight="4px",this.image.style.marginLeft="0px",this.image.style.marginTop="-2px",this.title.insertBefore(this.image,this.title.firstChild)},mxWindow.prototype.setClosable=function(t){this.closeImg.style.display=t?"":"none"},mxWindow.prototype.isVisible=function(){return null!=this.div&&"none"!=this.div.style.display},mxWindow.prototype.setVisible=function(t){null!=this.div&&this.isVisible()!=t&&(t?this.show():this.hide())},mxWindow.prototype.show=function(){this.div.style.display="",this.activate(),"auto"!=mxUtils.getCurrentStyle(this.contentWrapper).overflow&&null==this.resize||"none"==this.contentWrapper.style.display||(this.contentWrapper.style.height=this.div.offsetHeight-this.title.offsetHeight-this.contentHeightCorrection+"px"),this.fireEvent(new mxEventObject(mxEvent.SHOW))},mxWindow.prototype.hide=function(){this.div.style.display="none",this.fireEvent(new mxEventObject(mxEvent.HIDE))},mxWindow.prototype.destroy=function(){this.fireEvent(new mxEventObject(mxEvent.DESTROY)),null!=this.div&&(mxEvent.release(this.div),this.div.parentNode.removeChild(this.div),this.div=null),this.contentWrapper=this.content=this.title=null},mxForm.prototype.table=null,mxForm.prototype.body=!1,mxForm.prototype.getTable=function(){return this.table},mxForm.prototype.addButtons=function(t,e){var n=document.createElement("tr"),i=document.createElement("td"),i=(n.appendChild(i),document.createElement("td")),l=document.createElement("button");mxUtils.write(l,mxResources.get("ok")||"OK"),i.appendChild(l),mxEvent.addListener(l,"click",function(){t()}),l=document.createElement("button"),mxUtils.write(l,mxResources.get("cancel")||"Cancel"),i.appendChild(l),mxEvent.addListener(l,"click",function(){e()}),n.appendChild(i),this.body.appendChild(n)},mxForm.prototype.addText=function(t,e,n){var i=document.createElement("input");return i.setAttribute("type",n||"text"),i.value=e,this.addField(t,i)},mxForm.prototype.addCheckbox=function(t,e){var n=document.createElement("input");return n.setAttribute("type","checkbox"),this.addField(t,n),e&&(n.checked=!0),n},mxForm.prototype.addTextarea=function(t,e,n){var i=document.createElement("textarea");return mxClient.IS_NS&&n--,i.setAttribute("rows",n||2),i.value=e,this.addField(t,i)},mxForm.prototype.addCombo=function(t,e,n){var i=document.createElement("select");return null!=n&&i.setAttribute("size",n),e&&i.setAttribute("multiple","true"),this.addField(t,i)},mxForm.prototype.addOption=function(t,e,n,i){var l=document.createElement("option");mxUtils.writeln(l,e),l.setAttribute("value",n),i&&l.setAttribute("selected",i),t.appendChild(l)},mxForm.prototype.addField=function(t,e){var n=document.createElement("tr"),i=document.createElement("td");return mxUtils.write(i,t),n.appendChild(i),(i=document.createElement("td")).appendChild(e),n.appendChild(i),this.body.appendChild(n),e},mxImage.prototype.src=null,mxImage.prototype.width=null,mxImage.prototype.height=null,mxDivResizer.prototype.resizeWidth=!0,mxDivResizer.prototype.resizeHeight=!0,mxDivResizer.prototype.handlingResize=!1,mxDivResizer.prototype.resize=function(){var t=this.getDocumentWidth(),e=this.getDocumentHeight(),n=parseInt(this.div.style.left),i=parseInt(this.div.style.right),l=parseInt(this.div.style.top),s=parseInt(this.div.style.bottom);this.resizeWidth&&!isNaN(n)&&!isNaN(i)&&0<=n&&0<=i&&0<t-i-n&&(this.div.style.width=t-i-n+"px"),this.resizeHeight&&!isNaN(l)&&!isNaN(s)&&0<=l&&0<=s&&0<e-l-s&&(this.div.style.height=e-l-s+"px")},mxDivResizer.prototype.getDocumentWidth=function(){return document.body.clientWidth},mxDivResizer.prototype.getDocumentHeight=function(){return document.body.clientHeight},mxDragSource.prototype.element=null,mxDragSource.prototype.dropHandler=null,mxDragSource.prototype.dragOffset=null,mxDragSource.prototype.dragElement=null,mxDragSource.prototype.previewElement=null,mxDragSource.prototype.previewOffset=null,mxDragSource.prototype.enabled=!0,mxDragSource.prototype.currentGraph=null,mxDragSource.prototype.currentDropTarget=null,mxDragSource.prototype.currentPoint=null,mxDragSource.prototype.currentGuide=null,mxDragSource.prototype.currentHighlight=null,mxDragSource.prototype.autoscroll=!0,mxDragSource.prototype.guidesEnabled=!0,mxDragSource.prototype.gridEnabled=!0,mxDragSource.prototype.highlightDropTargets=!0,mxDragSource.prototype.dragElementZIndex=100,mxDragSource.prototype.dragElementOpacity=70,mxDragSource.prototype.checkEventSource=!0,mxDragSource.prototype.isEnabled=function(){return this.enabled},mxDragSource.prototype.setEnabled=function(t){this.enabled=t},mxDragSource.prototype.isGuidesEnabled=function(){return this.guidesEnabled},mxDragSource.prototype.setGuidesEnabled=function(t){this.guidesEnabled=t},mxDragSource.prototype.isGridEnabled=function(){return this.gridEnabled},mxDragSource.prototype.setGridEnabled=function(t){this.gridEnabled=t},mxDragSource.prototype.getGraphForEvent=function(t){return null},mxDragSource.prototype.getDropTarget=function(t,e,n,i){return t.getCellAt(e,n)},mxDragSource.prototype.createDragElement=function(t){return this.element.cloneNode(!0)},mxDragSource.prototype.createPreviewElement=function(t){return null},mxDragSource.prototype.isActive=function(){return null!=this.mouseMoveHandler},mxDragSource.prototype.reset=function(){null!=this.currentGraph&&(this.dragExit(this.currentGraph),this.currentGraph=null),this.removeDragElement(),this.removeListeners(),this.stopDrag()},mxDragSource.prototype.mouseDown=function(t){this.enabled&&!mxEvent.isConsumed(t)&&null==this.mouseMoveHandler&&(this.startDrag(t),this.mouseMoveHandler=mxUtils.bind(this,this.mouseMove),this.mouseUpHandler=mxUtils.bind(this,this.mouseUp),mxEvent.addGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),mxClient.IS_TOUCH)&&!mxEvent.isMouseEvent(t)&&(this.eventSource=mxEvent.getSource(t),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler))},mxDragSource.prototype.startDrag=function(t){this.dragElement=this.createDragElement(t),this.dragElement.style.position="absolute",this.dragElement.style.zIndex=this.dragElementZIndex,mxUtils.setOpacity(this.dragElement,this.dragElementOpacity),this.checkEventSource&&mxClient.IS_SVG&&(this.dragElement.style.pointerEvents="none")},mxDragSource.prototype.stopDrag=function(){this.removeDragElement()},mxDragSource.prototype.removeDragElement=function(){null!=this.dragElement&&(null!=this.dragElement.parentNode&&this.dragElement.parentNode.removeChild(this.dragElement),this.dragElement=null)},mxDragSource.prototype.getElementForEvent=function(t){return mxEvent.isTouchEvent(t)||mxEvent.isPenEvent(t)?document.elementFromPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)):mxEvent.getSource(t)},mxDragSource.prototype.graphContainsEvent=function(t,e){var n=mxEvent.getClientX(e),i=mxEvent.getClientY(e),l=mxUtils.getOffset(t.container),s=mxUtils.getScrollOrigin(),o=this.getElementForEvent(e);if(this.checkEventSource)for(;null!=o&&o!=t.container;)o=o.parentNode;return null!=o&&n>=l.x-s.x&&i>=l.y-s.y&&n<=l.x-s.x+t.container.offsetWidth&&i<=l.y-s.y+t.container.offsetHeight},mxDragSource.prototype.mouseMove=function(t){var e,n,i=this.getGraphForEvent(t);(i=null==i||this.graphContainsEvent(i,t)?i:null)!=this.currentGraph&&(null!=this.currentGraph&&this.dragExit(this.currentGraph,t),this.currentGraph=i,null!=this.currentGraph)&&this.dragEnter(this.currentGraph,t),null!=this.currentGraph&&this.dragOver(this.currentGraph,t),null==this.dragElement||null!=this.previewElement&&"visible"==this.previewElement.style.visibility?null!=this.dragElement&&(this.dragElement.style.visibility="hidden"):(i=mxEvent.getClientX(t),e=mxEvent.getClientY(t),null==this.dragElement.parentNode&&document.body.appendChild(this.dragElement),this.dragElement.style.visibility="visible",null!=this.dragOffset&&(i+=this.dragOffset.x,e+=this.dragOffset.y),n=mxUtils.getDocumentScrollOrigin(document),this.dragElement.style.left=i+n.x+"px",this.dragElement.style.top=e+n.y+"px"),mxEvent.consume(t)},mxDragSource.prototype.mouseUp=function(t){var e,n;null!=this.currentGraph&&(null==this.currentPoint||null!=this.previewElement&&"hidden"==this.previewElement.style.visibility||(e=this.currentGraph.view.scale,n=this.currentGraph.view.translate,this.drop(this.currentGraph,t,this.currentDropTarget,this.currentPoint.x/e-n.x,this.currentPoint.y/e-n.y)),this.dragExit(this.currentGraph),this.currentGraph=null),this.stopDrag(),this.removeListeners(),mxEvent.consume(t)},mxDragSource.prototype.removeListeners=function(){null!=this.eventSource&&(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveHandler,this.mouseUpHandler),this.eventSource=null),mxEvent.removeGestureListeners(document,null,this.mouseMoveHandler,this.mouseUpHandler),this.mouseUpHandler=this.mouseMoveHandler=null},mxDragSource.prototype.dragEnter=function(t,e){t.isMouseDown=!0,t.isMouseTrigger=mxEvent.isMouseEvent(e),this.previewElement=this.createPreviewElement(t),null!=this.previewElement&&this.checkEventSource&&mxClient.IS_SVG&&(this.previewElement.style.pointerEvents="none"),this.isGuidesEnabled()&&null!=this.previewElement&&(this.currentGuide=new mxGuide(t,t.graphHandler.getGuideStates())),this.highlightDropTargets&&(this.currentHighlight=new mxCellHighlight(t,mxConstants.DROP_TARGET_COLOR)),t.addListener(mxEvent.FIRE_MOUSE_EVENT,this.eventConsumer)},mxDragSource.prototype.dragExit=function(t,e){this.currentPoint=this.currentDropTarget=null,t.isMouseDown=!1,t.removeListener(this.eventConsumer),null!=this.previewElement&&(null!=this.previewElement.parentNode&&this.previewElement.parentNode.removeChild(this.previewElement),this.previewElement=null),null!=this.currentGuide&&(this.currentGuide.destroy(),this.currentGuide=null),null!=this.currentHighlight&&(this.currentHighlight.destroy(),this.currentHighlight=null)},mxDragSource.prototype.dragOver=function(t,e){var n,i,l=mxUtils.getOffset(t.container),s=mxUtils.getScrollOrigin(t.container),o=mxEvent.getClientX(e)-l.x+s.x-t.panDx,l=mxEvent.getClientY(e)-l.y+s.y-t.panDy;t.autoScroll&&(null==this.autoscroll||this.autoscroll)&&t.scrollPointToVisible(o,l,t.autoExtend),null!=this.currentHighlight&&t.isDropEnabled()&&(this.currentDropTarget=this.getDropTarget(t,o,l,e),s=t.getView().getState(this.currentDropTarget),this.currentHighlight.highlight(s)),null!=this.previewElement&&(null==this.previewElement.parentNode&&(t.container.appendChild(this.previewElement),this.previewElement.style.zIndex="3",this.previewElement.style.position="absolute"),s=this.isGridEnabled()&&t.isGridEnabledEvent(e),n=!0,null!=this.currentGuide&&this.currentGuide.isEnabledForEvent(e)?(n=new mxRectangle(0,0,n=parseInt(this.previewElement.style.width),i=parseInt(this.previewElement.style.height)),l=new mxPoint(o,l),l=this.currentGuide.move(n,l,s,!0),n=!1,o=l.x,l=l.y):s&&(s=t.view.scale,i=t.view.translate,e=t.gridSize/2,o=(t.snap(o/s-i.x-e)+i.x)*s,l=(t.snap(l/s-i.y-e)+i.y)*s),null!=this.currentGuide&&n&&this.currentGuide.hide(),null!=this.previewOffset&&(o+=this.previewOffset.x,l+=this.previewOffset.y),this.previewElement.style.left=Math.round(o)+"px",this.previewElement.style.top=Math.round(l)+"px",this.previewElement.style.visibility="visible"),this.currentPoint=new mxPoint(o,l)},mxDragSource.prototype.drop=function(t,e,n,i,l){this.dropHandler.apply(this,arguments),"hidden"!=t.container.style.visibility&&t.container.focus()},mxToolbar.prototype=new mxEventSource,mxToolbar.prototype.constructor=mxToolbar,mxToolbar.prototype.container=null,mxToolbar.prototype.enabled=!0,mxToolbar.prototype.noReset=!1,mxToolbar.prototype.updateDefaultMode=!0,mxToolbar.prototype.addItem=function(t,e,n,i,l,s){var o=document.createElement(null!=e?"img":"button"),r=l||(null!=s?"mxToolbarMode":"mxToolbarItem");return o.className=r,o.setAttribute("src",e),null!=t&&(null!=e?o.setAttribute("title",t):mxUtils.write(o,t)),this.container.appendChild(o),null!=n&&(mxEvent.addListener(o,"click",n),mxClient.IS_TOUCH)&&mxEvent.addListener(o,"touchend",n),t=mxUtils.bind(this,function(t){null!=i?o.setAttribute("src",e):o.style.backgroundColor=""}),mxEvent.addGestureListeners(o,mxUtils.bind(this,function(t){var e;null!=i?o.setAttribute("src",i):o.style.backgroundColor="gray",null!=s&&(null==this.menu&&(this.menu=new mxPopupMenu,this.menu.init()),e=this.currentImg,this.menu.isMenuShowing()&&this.menu.hideMenu(),e!=o)&&(this.currentImg=o,this.menu.factoryMethod=s,e=new mxPoint(o.offsetLeft,o.offsetTop+o.offsetHeight),this.menu.popup(e.x,e.y,null,t),this.menu.isMenuShowing())&&(o.className=r+"Selected",this.menu.hideMenu=function(){mxPopupMenu.prototype.hideMenu.apply(this),o.className=r,this.currentImg=null})}),null,t),mxEvent.addListener(o,"mouseout",t),o},mxToolbar.prototype.addCombo=function(t){var e=document.createElement("div"),n=(e.style.display="inline",e.className="mxToolbarComboContainer",document.createElement("select"));return n.className=t||"mxToolbarCombo",e.appendChild(n),this.container.appendChild(e),n},mxToolbar.prototype.addActionCombo=function(t,e){var n=document.createElement("select");return n.className=e||"mxToolbarCombo",this.addOption(n,t,null),mxEvent.addListener(n,"change",function(t){var e=n.options[n.selectedIndex];n.selectedIndex=0,null!=e.funct&&e.funct(t)}),this.container.appendChild(n),n},mxToolbar.prototype.addOption=function(t,e,n){var i=document.createElement("option");return mxUtils.writeln(i,e),"function"==typeof n?i.funct=n:i.setAttribute("value",n),t.appendChild(i),i},mxToolbar.prototype.addSwitchMode=function(t,e,n,i,l){var s=document.createElement("img");return s.initialClassName=l||"mxToolbarMode",s.className=s.initialClassName,s.setAttribute("src",e),s.altIcon=i,null!=t&&s.setAttribute("title",t),mxEvent.addListener(s,"click",mxUtils.bind(this,function(t){null!=(t=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",t)):this.selectedMode.className=this.selectedMode.initialClassName,this.updateDefaultMode&&(this.defaultMode=s),null!=(t=(this.selectedMode=s).altIcon)?(s.altIcon=s.getAttribute("src"),s.setAttribute("src",t)):s.className=s.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT)),n()})),this.container.appendChild(s),null==this.defaultMode&&(this.defaultMode=s,this.selectMode(s),n()),s},mxToolbar.prototype.addMode=function(t,e,n,i,l,s){s=null==s||s;var o=document.createElement(null!=e?"img":"button");return o.initialClassName=l||"mxToolbarMode",o.className=o.initialClassName,o.setAttribute("src",e),o.altIcon=i,null!=t&&o.setAttribute("title",t),this.enabled&&s&&(mxEvent.addListener(o,"click",mxUtils.bind(this,function(t){this.selectMode(o,n),this.noReset=!1})),mxEvent.addListener(o,"dblclick",mxUtils.bind(this,function(t){this.selectMode(o,n),this.noReset=!0})),null==this.defaultMode)&&(this.defaultMode=o,this.defaultFunction=n,this.selectMode(o,n)),this.container.appendChild(o),o},mxToolbar.prototype.selectMode=function(t,e){var n;this.selectedMode!=t&&(null!=this.selectedMode&&(null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName),this.selectedMode=t,null!=(n=this.selectedMode.altIcon)?(this.selectedMode.altIcon=this.selectedMode.getAttribute("src"),this.selectedMode.setAttribute("src",n)):this.selectedMode.className=this.selectedMode.initialClassName+"Selected",this.fireEvent(new mxEventObject(mxEvent.SELECT,"function",e)))},mxToolbar.prototype.resetMode=function(t){!t&&this.noReset||this.selectedMode==this.defaultMode||this.selectMode(this.defaultMode,this.defaultFunction)},mxToolbar.prototype.addSeparator=function(t){return this.addItem(null,t,null)},mxToolbar.prototype.addBreak=function(){mxUtils.br(this.container)},mxToolbar.prototype.addLine=function(){var t=document.createElement("hr");t.style.marginRight="6px",t.setAttribute("size","1"),this.container.appendChild(t)},mxToolbar.prototype.destroy=function(){mxEvent.release(this.container),(this.selectedMode=this.defaultFunction=this.defaultMode=this.container=null)!=this.menu&&this.menu.destroy()},mxUndoableEdit.prototype.source=null,mxUndoableEdit.prototype.changes=null,mxUndoableEdit.prototype.significant=null,mxUndoableEdit.prototype.undone=!1,mxUndoableEdit.prototype.redone=!1,mxUndoableEdit.prototype.isEmpty=function(){return 0==this.changes.length},mxUndoableEdit.prototype.isSignificant=function(){return this.significant},mxUndoableEdit.prototype.add=function(t){this.changes.push(t)},mxUndoableEdit.prototype.notify=function(){},mxUndoableEdit.prototype.die=function(){},mxUndoableEdit.prototype.undo=function(){if(!this.undone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length-1;0<=t;t--){var e=this.changes[t];null!=e.execute?e.execute():null!=e.undo&&e.undo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",e))}this.undone=!0,this.redone=!1,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoableEdit.prototype.redo=function(){if(!this.redone){this.source.fireEvent(new mxEventObject(mxEvent.START_EDIT));for(var t=this.changes.length,e=0;e<t;e++){var n=this.changes[e];null!=n.execute?n.execute():null!=n.redo&&n.redo(),this.source.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",n))}this.undone=!1,this.redone=!0,this.source.fireEvent(new mxEventObject(mxEvent.END_EDIT))}this.notify()},mxUndoManager.prototype=new mxEventSource,mxUndoManager.prototype.constructor=mxUndoManager,mxUndoManager.prototype.size=null,mxUndoManager.prototype.history=null,mxUndoManager.prototype.indexOfNextAdd=0,mxUndoManager.prototype.isEmpty=function(){return 0==this.history.length},mxUndoManager.prototype.clear=function(){this.history=[],this.indexOfNextAdd=0,this.fireEvent(new mxEventObject(mxEvent.CLEAR))},mxUndoManager.prototype.canUndo=function(){return 0<this.indexOfNextAdd},mxUndoManager.prototype.undo=function(){for(;0<this.indexOfNextAdd;){var t=this.history[--this.indexOfNextAdd];if(t.undo(),t.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",t));break}}},mxUndoManager.prototype.canRedo=function(){return this.indexOfNextAdd<this.history.length},mxUndoManager.prototype.redo=function(){for(var t=this.history.length;this.indexOfNextAdd<t;){var e=this.history[this.indexOfNextAdd++];if(e.redo(),e.isSignificant()){this.fireEvent(new mxEventObject(mxEvent.REDO,"edit",e));break}}},mxUndoManager.prototype.undoableEditHappened=function(t){this.trim(),0<this.size&&this.size==this.history.length&&this.history.shift(),this.history.push(t),this.indexOfNextAdd=this.history.length,this.fireEvent(new mxEventObject(mxEvent.ADD,"edit",t))},mxUndoManager.prototype.trim=function(){if(this.history.length>this.indexOfNextAdd)for(var t=this.history.splice(this.indexOfNextAdd,this.history.length-this.indexOfNextAdd),e=0;e<t.length;e++)t[e].die()};var mxUrlConverter=function(){};function mxPanningManager(s){this.thread=null,this.active=!1,this.dy=this.dx=this.t0y=this.t0x=this.tdy=this.tdx=0,this.scrollbars=!1,this.scrollTop=this.scrollLeft=0,this.mouseListener={mouseDown:function(t,e){},mouseMove:function(t,e){},mouseUp:mxUtils.bind(this,function(t,e){this.active&&this.stop()})},s.addMouseListener(this.mouseListener),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.stop()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener);var o=mxUtils.bind(this,function(){return this.scrollbars=mxUtils.hasScrollbars(s.container),this.scrollLeft=s.container.scrollLeft,this.scrollTop=s.container.scrollTop,window.setInterval(mxUtils.bind(this,function(){this.tdx-=this.dx,this.tdy-=this.dy,this.scrollbars?(s.panGraph(-s.container.scrollLeft-Math.ceil(this.dx),-s.container.scrollTop-Math.ceil(this.dy)),s.panDx=this.scrollLeft-s.container.scrollLeft,s.panDy=this.scrollTop-s.container.scrollTop,s.fireEvent(new mxEventObject(mxEvent.PAN))):s.panGraph(this.getDx(),this.getDy())}),this.delay)});this.isActive=function(){return active},this.getDx=function(){return Math.round(this.tdx)},this.getDy=function(){return Math.round(this.tdy)},this.start=function(){this.t0x=s.view.translate.x,this.t0y=s.view.translate.y,this.active=!0},this.panTo=function(t,e,n,i){this.active||this.start(),this.scrollLeft=s.container.scrollLeft,this.scrollTop=s.container.scrollTop;var l=s.container;this.dx=t+(null!=n?n:0)-l.scrollLeft-l.clientWidth,this.dx=this.dx<0&&Math.abs(this.dx)<this.border?this.border+this.dx:this.handleMouseOut?Math.max(this.dx,0):0,0==this.dx&&(this.dx=t-l.scrollLeft,this.dx=0<this.dx&&this.dx<this.border?this.dx-this.border:this.handleMouseOut?Math.min(0,this.dx):0),this.dy=e+(null!=i?i:0)-l.scrollTop-l.clientHeight,this.dy=this.dy<0&&Math.abs(this.dy)<this.border?this.border+this.dy:this.handleMouseOut?Math.max(this.dy,0):0,0==this.dy&&(this.dy=e-l.scrollTop,this.dy=0<this.dy&&this.dy<this.border?this.dy-this.border:this.handleMouseOut?Math.min(0,this.dy):0),0!=this.dx||0!=this.dy?(this.dx*=this.damper,this.dy*=this.damper,null==this.thread&&(this.thread=o())):null!=this.thread&&(window.clearInterval(this.thread),this.thread=null)},this.stop=function(){var t,e;this.active&&(this.active=!1,null!=this.thread&&(window.clearInterval(this.thread),this.thread=null),this.tdy=this.tdx=0,this.scrollbars?(s.panDx=0,s.panDy=0,s.fireEvent(new mxEventObject(mxEvent.PAN))):(t=s.panDx,e=s.panDy,0==t&&0==e||(s.panGraph(0,0),s.view.setTranslate(this.t0x+t/s.view.scale,this.t0y+e/s.view.scale))))},this.destroy=function(){s.removeMouseListener(this.mouseListener),mxEvent.removeListener(document,"mouseup",this.mouseUpListener)}}function mxPopupMenu(t){null!=(this.factoryMethod=t)&&this.init()}function mxAutoSaveManager(t){this.changeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.graphModelChanged(e.getProperty("edit").changes)}),this.setGraph(t)}function mxAnimation(t){this.delay=null!=t?t:20}function mxMorphing(t,e,n,i){mxAnimation.call(this,i),this.graph=t,this.steps=null!=e?e:6,this.ease=null!=n?n:1.5}function mxImageBundle(t){this.images=[],this.alt=null!=t&&t}function mxImageExport(){}function mxAbstractCanvas2D(){this.converter=this.createUrlConverter(),this.reset()}function mxXmlCanvas2D(t){mxAbstractCanvas2D.call(this),this.root=t,this.writeDefaults()}function mxSvgCanvas2D(t,e){mxAbstractCanvas2D.call(this),this.root=t,this.gradients=[],this.defs=null,this.styleEnabled=null!=e&&e;var n=null;if(t.ownerDocument!=document)for(n=t;null!=n&&"svg"!=n.nodeName;)n=n.parentNode;null!=n&&(0<n.getElementsByTagName("defs").length&&(this.defs=n.getElementsByTagName("defs")[0]),null==this.defs&&(this.defs=this.createElement("defs"),null!=n.firstChild?n.insertBefore(this.defs,n.firstChild):n.appendChild(this.defs)),this.styleEnabled)&&this.defs.appendChild(this.createStyle())}function mxGuide(t,e){this.graph=t,this.setStates(e)}function mxShape(t){this.stencil=t,this.initStyles()}function mxStencil(t){this.desc=t,this.parseDescription(),this.parseConstraints()}mxUrlConverter.prototype.enabled=!0,mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null,mxUrlConverter.prototype.updateBaseUrl=function(){this.baseDomain=location.protocol+"//"+location.host,this.baseUrl=this.baseDomain+location.pathname;var t=this.baseUrl.lastIndexOf("/");0<t&&(this.baseUrl=this.baseUrl.substring(0,t+1))},mxUrlConverter.prototype.isEnabled=function(){return this.enabled},mxUrlConverter.prototype.setEnabled=function(t){this.enabled=t},mxUrlConverter.prototype.getBaseUrl=function(){return this.baseUrl},mxUrlConverter.prototype.setBaseUrl=function(t){this.baseUrl=t},mxUrlConverter.prototype.getBaseDomain=function(){return this.baseDomain},mxUrlConverter.prototype.setBaseDomain=function(t){this.baseDomain=t},mxUrlConverter.prototype.isRelativeUrl=function(t){return null!=t&&"//"!=t.substring(0,2)&&"http://"!=t.substring(0,7)&&"https://"!=t.substring(0,8)&&"data:image"!=t.substring(0,10)&&"file://"!=t.substring(0,7)},mxUrlConverter.prototype.convert=function(t){return this.isEnabled()&&this.isRelativeUrl(t)&&(null==this.getBaseUrl()&&this.updateBaseUrl(),t="/"==t.charAt(0)?this.getBaseDomain()+t:this.getBaseUrl()+t),t},mxPanningManager.prototype.damper=1/6,mxPanningManager.prototype.delay=10,mxPanningManager.prototype.handleMouseOut=!0,mxPanningManager.prototype.border=0,mxPopupMenu.prototype=new mxEventSource,mxPopupMenu.prototype.constructor=mxPopupMenu,mxPopupMenu.prototype.submenuImage=mxClient.imageBasePath+"/submenu.gif",mxPopupMenu.prototype.zIndex=10006,mxPopupMenu.prototype.factoryMethod=null,mxPopupMenu.prototype.useLeftButtonForPopup=!1,mxPopupMenu.prototype.enabled=!0,mxPopupMenu.prototype.itemCount=0,mxPopupMenu.prototype.autoExpand=!1,mxPopupMenu.prototype.smartSeparators=!1,mxPopupMenu.prototype.labels=!0,mxPopupMenu.prototype.init=function(){this.table=document.createElement("table"),this.table.className="mxPopupMenu",this.tbody=document.createElement("tbody"),this.table.appendChild(this.tbody),this.div=document.createElement("div"),this.div.className="mxPopupMenu",this.div.style.display="inline",this.div.style.zIndex=this.zIndex,this.div.appendChild(this.table),mxEvent.disableContextMenu(this.div)},mxPopupMenu.prototype.isEnabled=function(){return this.enabled},mxPopupMenu.prototype.setEnabled=function(t){this.enabled=t},mxPopupMenu.prototype.isPopupTrigger=function(t){return t.isPopupTrigger()||this.useLeftButtonForPopup&&mxEvent.isLeftMouseButton(t.getEvent())},mxPopupMenu.prototype.addItem=function(t,e,n,i,l,s,o,r){i=i||this,this.itemCount++,i.willAddSeparator&&(i.containsItems&&this.addSeparator(i,!0),i.willAddSeparator=!1),i.containsItems=!0;var a,h=document.createElement("tr"),d=(h.className="mxPopupMenuItem",document.createElement("td"));return d.className="mxPopupMenuIcon",null!=e?((l=document.createElement("img")).src=e,d.appendChild(l)):null!=l&&((e=document.createElement("div")).className=l,d.appendChild(e)),h.appendChild(d),this.labels&&((d=document.createElement("td")).className="mxPopupMenuItem"+(null==s||s?"":" mxDisabled"),mxUtils.write(d,t),d.align="left",h.appendChild(d),(t=document.createElement("td")).className="mxPopupMenuItem"+(null==s||s?"":" mxDisabled"),t.style.paddingRight="6px",t.style.textAlign="right",h.appendChild(t),null==i.div)&&this.createSubmenu(i),i.tbody.appendChild(h),0!=o&&0!=s&&(a=null,mxEvent.addGestureListeners(h,mxUtils.bind(this,function(t){this.eventReceiver=h,i.activeRow!=h&&i.activeRow!=i&&(null!=i.activeRow&&null!=i.activeRow.div.parentNode&&this.hideSubmenu(i),null!=h.div)&&(this.showSubmenu(i,h),i.activeRow=h),null!=document.selection&&8==document.documentMode&&(a=document.selection.createRange()),mxEvent.consume(t)}),mxUtils.bind(this,function(t){i.activeRow!=h&&i.activeRow!=i&&(null!=i.activeRow&&null!=i.activeRow.div.parentNode&&this.hideSubmenu(i),this.autoExpand)&&null!=h.div&&(this.showSubmenu(i,h),i.activeRow=h),r||(h.className="mxPopupMenuItemHover")}),mxUtils.bind(this,function(t){if(this.eventReceiver==h){if(i.activeRow!=h&&this.hideMenu(),null!=a){try{a.select()}catch(t){}a=null}null!=n&&n(t)}this.eventReceiver=null,mxEvent.consume(t)})),r||mxEvent.addListener(h,"mouseout",mxUtils.bind(this,function(t){h.className="mxPopupMenuItem"}))),h},mxPopupMenu.prototype.addCheckmark=function(t,e){t=t.firstChild.nextSibling;t.style.backgroundImage="url('"+e+"')",t.style.backgroundRepeat="no-repeat",t.style.backgroundPosition="2px 50%"},mxPopupMenu.prototype.createSubmenu=function(t){t.table=document.createElement("table"),t.table.className="mxPopupMenu",t.tbody=document.createElement("tbody"),t.table.appendChild(t.tbody),t.div=document.createElement("div"),t.div.className="mxPopupMenu",t.div.style.position="absolute",t.div.style.display="inline",t.div.style.zIndex=this.zIndex,t.div.appendChild(t.table);var e=document.createElement("img");e.setAttribute("src",this.submenuImage),window.td=t.firstChild.nextSibling.nextSibling,td.appendChild(e)},mxPopupMenu.prototype.showSubmenu=function(t,e){var n,i,l,s;null!=e.div&&(e.div.style.left=t.div.offsetLeft+e.offsetLeft+e.offsetWidth-1+"px",e.div.style.top=t.div.offsetTop+e.offsetTop+"px",document.body.appendChild(e.div),n=parseInt(e.div.offsetLeft),i=parseInt(e.div.offsetWidth),l=mxUtils.getDocumentScrollOrigin(document),s=document.documentElement,n+i>l.x+(document.body.clientWidth||s.clientWidth)&&(e.div.style.left=Math.max(0,t.div.offsetLeft-i+(mxClient.IS_IE?6:-6))+"px"),e.div.style.overflowY="auto",e.div.style.overflowX="hidden",e.div.style.maxHeight=Math.max(document.body.clientHeight,document.documentElement.clientHeight)-10+"px",mxUtils.fit(e.div))},mxPopupMenu.prototype.addSeparator=function(t,e){var n,i;t=t||this,this.smartSeparators&&!e?t.willAddSeparator=!0:null!=t.tbody&&(t.willAddSeparator=!1,e=document.createElement("tr"),(n=document.createElement("td")).className="mxPopupMenuIcon",n.style.padding="0 0 0 0px",e.appendChild(n),(n=document.createElement("td")).style.padding="0 0 0 0px",n.setAttribute("colSpan","2"),(i=document.createElement("hr")).setAttribute("size","1"),n.appendChild(i),e.appendChild(n),t.tbody.appendChild(e))},mxPopupMenu.prototype.popup=function(t,e,n,i){if(null!=this.div&&null!=this.tbody&&null!=this.factoryMethod){for(this.div.style.left=t+"px",this.div.style.top=e+"px";null!=this.tbody.firstChild;)mxEvent.release(this.tbody.firstChild),this.tbody.removeChild(this.tbody.firstChild);this.itemCount=0,this.factoryMethod(this,n,i),0<this.itemCount&&(this.showMenu(),this.fireEvent(new mxEventObject(mxEvent.SHOW)))}},mxPopupMenu.prototype.isMenuShowing=function(){return null!=this.div&&this.div.parentNode==document.body},mxPopupMenu.prototype.showMenu=function(){9<=document.documentMode&&(this.div.style.filter="none"),document.body.appendChild(this.div),mxUtils.fit(this.div)},mxPopupMenu.prototype.hideMenu=function(){null!=this.div&&(null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.hideSubmenu(this),this.containsItems=!1,this.fireEvent(new mxEventObject(mxEvent.HIDE)))},mxPopupMenu.prototype.hideSubmenu=function(t){null!=t.activeRow&&(this.hideSubmenu(t.activeRow),null!=t.activeRow.div.parentNode&&t.activeRow.div.parentNode.removeChild(t.activeRow.div),t.activeRow=null)},mxPopupMenu.prototype.destroy=function(){null!=this.div&&(mxEvent.release(this.div),null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.div=null)},mxAutoSaveManager.prototype=new mxEventSource,mxAutoSaveManager.prototype.constructor=mxAutoSaveManager,mxAutoSaveManager.prototype.graph=null,mxAutoSaveManager.prototype.autoSaveDelay=10,mxAutoSaveManager.prototype.autoSaveThrottle=2,mxAutoSaveManager.prototype.autoSaveThreshold=5,mxAutoSaveManager.prototype.ignoredChanges=0,mxAutoSaveManager.prototype.lastSnapshot=0,mxAutoSaveManager.prototype.enabled=!0,mxAutoSaveManager.prototype.changeHandler=null,mxAutoSaveManager.prototype.isEnabled=function(){return this.enabled},mxAutoSaveManager.prototype.setEnabled=function(t){this.enabled=t},mxAutoSaveManager.prototype.setGraph=function(t){null!=this.graph&&this.graph.getModel().removeListener(this.changeHandler),this.graph=t,null!=this.graph&&this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)},mxAutoSaveManager.prototype.save=function(){},mxAutoSaveManager.prototype.graphModelChanged=function(t){(t=((new Date).getTime()-this.lastSnapshot)/1e3)>this.autoSaveDelay||this.ignoredChanges>=this.autoSaveThreshold&&t>this.autoSaveThrottle?(this.save(),this.reset()):this.ignoredChanges++},mxAutoSaveManager.prototype.reset=function(){this.lastSnapshot=(new Date).getTime(),this.ignoredChanges=0},mxAutoSaveManager.prototype.destroy=function(){this.setGraph(null)},mxAnimation.prototype=new mxEventSource,mxAnimation.prototype.constructor=mxAnimation,mxAnimation.prototype.delay=null,mxAnimation.prototype.thread=null,mxAnimation.prototype.isRunning=function(){return null!=this.thread},mxAnimation.prototype.startAnimation=function(){null==this.thread&&(this.thread=window.setInterval(mxUtils.bind(this,this.updateAnimation),this.delay))},mxAnimation.prototype.updateAnimation=function(){this.fireEvent(new mxEventObject(mxEvent.EXECUTE))},mxAnimation.prototype.stopAnimation=function(){null!=this.thread&&(window.clearInterval(this.thread),this.thread=null,this.fireEvent(new mxEventObject(mxEvent.DONE)))},mxMorphing.prototype=new mxAnimation,mxMorphing.prototype.constructor=mxMorphing,mxMorphing.prototype.graph=null,mxMorphing.prototype.steps=null,mxMorphing.prototype.step=0,mxMorphing.prototype.ease=null,mxMorphing.prototype.cells=null,mxMorphing.prototype.updateAnimation=function(){mxAnimation.prototype.updateAnimation.apply(this,arguments);var t=new mxCellStatePreview(this.graph);if(null!=this.cells)for(var e=0;e<this.cells.length;e++)this.animateCell(this.cells[e],t,!1);else this.animateCell(this.graph.getModel().getRoot(),t,!0);this.show(t),(t.isEmpty()||this.step++>=this.steps)&&this.stopAnimation()},mxMorphing.prototype.show=function(t){t.show()},mxMorphing.prototype.animateCell=function(t,e,n){var i,l,s=this.graph.getView().getState(t),o=null;if(null==s||(o=this.getDelta(s),!this.graph.getModel().isVertex(t))||0==o.x&&0==o.y||(i=this.graph.view.getTranslate(),l=this.graph.view.getScale(),o.x+=i.x*l,o.y+=i.y*l,e.moveState(s,-o.x/this.ease,-o.y/this.ease)),n&&!this.stopRecursion(s,o))for(s=this.graph.getModel().getChildCount(t),o=0;o<s;o++)this.animateCell(this.graph.getModel().getChildAt(t,o),e,n)},mxMorphing.prototype.stopRecursion=function(t,e){return null!=e&&(0!=e.x||0!=e.y)},mxMorphing.prototype.getDelta=function(t){var e=this.getOriginForCell(t.cell),n=this.graph.getView().getTranslate(),i=this.graph.getView().getScale();return new mxPoint((e.x-(t.x/i-n.x))*i,(e.y-(t.y/i-n.y))*i)},mxMorphing.prototype.getOriginForCell=function(t){var e,n=null;return null!=t&&(e=this.graph.getModel().getParent(t),t=this.graph.getCellGeometry(t),n=this.getOriginForCell(e),null!=t)&&(t.relative?null!=(e=this.graph.getCellGeometry(e))&&(n.x+=t.x*e.width,n.y+=t.y*e.height):(n.x+=t.x,n.y+=t.y)),n=null==n?new mxPoint(-(n=this.graph.view.getTranslate()).x,-n.y):n},mxImageBundle.prototype.images=null,mxImageBundle.prototype.alt=null,mxImageBundle.prototype.putImage=function(t,e,n){this.images[t]={value:e,fallback:n}},mxImageBundle.prototype.getImage=function(t){var e=null;return e=null!=t&&null!=(t=this.images[t])?this.alt?t.fallback:t.value:e},mxImageExport.prototype.includeOverlays=!1,mxImageExport.prototype.drawState=function(t,e){null!=t&&(this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawCellState.apply(this,arguments)})),this.includeOverlays)&&this.visitStatesRecursive(t,e,mxUtils.bind(this,function(){this.drawOverlays.apply(this,arguments)}))},mxImageExport.prototype.visitStatesRecursive=function(t,e,n){if(null!=t){n(t,e);for(var i=t.view.graph,l=i.model.getChildCount(t.cell),s=0;s<l;s++){var o=i.view.getState(i.model.getChildAt(t.cell,s));this.visitStatesRecursive(o,e,n)}}},mxImageExport.prototype.getLinkForCellState=function(t,e){return null},mxImageExport.prototype.getLinkTargetForCellState=function(t,e){return null},mxImageExport.prototype.drawCellState=function(t,e){var n=this.getLinkForCellState(t,e);null!=n&&e.setLink(n,this.getLinkTargetForCellState(t,e)),this.drawShape(t,e),this.drawText(t,e),null!=n&&e.setLink(null)},mxImageExport.prototype.drawShape=function(t,e){t.shape instanceof mxShape&&t.shape.checkBounds()&&(e.save(),t.shape.beforePaint(e),t.shape.paint(e),t.shape.afterPaint(e),e.restore())},mxImageExport.prototype.drawText=function(t,e){null!=t.text&&t.text.checkBounds()&&(e.save(),t.text.beforePaint(e),t.text.paint(e),t.text.afterPaint(e),e.restore())},mxImageExport.prototype.drawOverlays=function(t,n){null!=t.overlays&&t.overlays.visit(function(t,e){e instanceof mxShape&&e.paint(n)})},mxAbstractCanvas2D.prototype.state=null,mxAbstractCanvas2D.prototype.states=null,mxAbstractCanvas2D.prototype.path=null,mxAbstractCanvas2D.prototype.rotateHtml=!0,mxAbstractCanvas2D.prototype.lastX=0,mxAbstractCanvas2D.prototype.lastY=0,mxAbstractCanvas2D.prototype.moveOp="M",mxAbstractCanvas2D.prototype.lineOp="L",mxAbstractCanvas2D.prototype.quadOp="Q",mxAbstractCanvas2D.prototype.curveOp="C",mxAbstractCanvas2D.prototype.closeOp="Z",mxAbstractCanvas2D.prototype.pointerEvents=!1,mxAbstractCanvas2D.prototype.createUrlConverter=function(){return new mxUrlConverter},mxAbstractCanvas2D.prototype.reset=function(){this.state=this.createState(),this.states=[]},mxAbstractCanvas2D.prototype.createState=function(){return{dx:0,dy:0,scale:1,alpha:1,fillAlpha:1,strokeAlpha:1,fillColor:null,gradientFillAlpha:1,gradientColor:null,gradientAlpha:1,gradientDirection:null,strokeColor:null,strokeWidth:1,dashed:!1,dashPattern:"3 3",fixDash:!1,lineCap:"flat",lineJoin:"miter",miterLimit:10,fontColor:"#000000",fontBackgroundColor:null,fontBorderColor:null,fontSize:mxConstants.DEFAULT_FONTSIZE,fontFamily:mxConstants.DEFAULT_FONTFAMILY,fontStyle:0,shadow:!1,shadowColor:mxConstants.SHADOWCOLOR,shadowAlpha:mxConstants.SHADOW_OPACITY,shadowDx:mxConstants.SHADOW_OFFSET_X,shadowDy:mxConstants.SHADOW_OFFSET_Y,rotation:0,rotationCx:0,rotationCy:0}},mxAbstractCanvas2D.prototype.format=function(t){return Math.round(parseFloat(t))},mxAbstractCanvas2D.prototype.addOp=function(){if(null!=this.path&&(this.path.push(arguments[0]),2<arguments.length))for(var t=this.state,e=2;e<arguments.length;e+=2)this.lastX=arguments[e-1],this.lastY=arguments[e],this.path.push(this.format((this.lastX+t.dx)*t.scale)),this.path.push(this.format((this.lastY+t.dy)*t.scale))},mxAbstractCanvas2D.prototype.rotatePoint=function(t,e,n,i,l){return n*=Math.PI/180,mxUtils.getRotatedPoint(new mxPoint(t,e),Math.cos(n),Math.sin(n),new mxPoint(i,l))},mxAbstractCanvas2D.prototype.save=function(){this.states.push(this.state),this.state=mxUtils.clone(this.state)},mxAbstractCanvas2D.prototype.restore=function(){0<this.states.length&&(this.state=this.states.pop())},mxAbstractCanvas2D.prototype.setLink=function(t,e){},mxAbstractCanvas2D.prototype.scale=function(t){this.state.scale*=t,this.state.strokeWidth*=t},mxAbstractCanvas2D.prototype.translate=function(t,e){this.state.dx+=t,this.state.dy+=e},mxAbstractCanvas2D.prototype.rotate=function(t,e,n,i,l){},mxAbstractCanvas2D.prototype.setAlpha=function(t){this.state.alpha=t},mxAbstractCanvas2D.prototype.setFillAlpha=function(t){this.state.fillAlpha=t},mxAbstractCanvas2D.prototype.setStrokeAlpha=function(t){this.state.strokeAlpha=t},mxAbstractCanvas2D.prototype.setFillColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fillColor=t,this.state.gradientColor=null},mxAbstractCanvas2D.prototype.setGradient=function(t,e,n,i,l,s,o,r,a){(n=this.state).fillColor=t,n.gradientFillAlpha=null!=r?r:1,n.gradientColor=e,n.gradientAlpha=null!=a?a:1,n.gradientDirection=o},mxAbstractCanvas2D.prototype.setStrokeColor=function(t){t==mxConstants.NONE&&(t=null),this.state.strokeColor=t},mxAbstractCanvas2D.prototype.setStrokeWidth=function(t){this.state.strokeWidth=t},mxAbstractCanvas2D.prototype.setDashed=function(t,e){this.state.dashed=t,this.state.fixDash=e},mxAbstractCanvas2D.prototype.setDashPattern=function(t){this.state.dashPattern=t},mxAbstractCanvas2D.prototype.setLineCap=function(t){this.state.lineCap=t},mxAbstractCanvas2D.prototype.setLineJoin=function(t){this.state.lineJoin=t},mxAbstractCanvas2D.prototype.setMiterLimit=function(t){this.state.miterLimit=t},mxAbstractCanvas2D.prototype.setFontColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontColor=t},mxAbstractCanvas2D.prototype.setFontBackgroundColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontBackgroundColor=t},mxAbstractCanvas2D.prototype.setFontBorderColor=function(t){t==mxConstants.NONE&&(t=null),this.state.fontBorderColor=t},mxAbstractCanvas2D.prototype.setFontSize=function(t){this.state.fontSize=parseFloat(t)},mxAbstractCanvas2D.prototype.setFontFamily=function(t){this.state.fontFamily=t},mxAbstractCanvas2D.prototype.setFontStyle=function(t){this.state.fontStyle=t=null==t?0:t},mxAbstractCanvas2D.prototype.setShadow=function(t){this.state.shadow=t},mxAbstractCanvas2D.prototype.setShadowColor=function(t){t==mxConstants.NONE&&(t=null),this.state.shadowColor=t},mxAbstractCanvas2D.prototype.setShadowAlpha=function(t){this.state.shadowAlpha=t},mxAbstractCanvas2D.prototype.setShadowOffset=function(t,e){this.state.shadowDx=t,this.state.shadowDy=e},mxAbstractCanvas2D.prototype.begin=function(){this.lastY=this.lastX=0,this.path=[]},mxAbstractCanvas2D.prototype.moveTo=function(t,e){this.addOp(this.moveOp,t,e)},mxAbstractCanvas2D.prototype.lineTo=function(t,e){this.addOp(this.lineOp,t,e)},mxAbstractCanvas2D.prototype.quadTo=function(t,e,n,i){this.addOp(this.quadOp,t,e,n,i)},mxAbstractCanvas2D.prototype.curveTo=function(t,e,n,i,l,s){this.addOp(this.curveOp,t,e,n,i,l,s)},mxAbstractCanvas2D.prototype.arcTo=function(t,e,n,i,l,s,o){if(null!=(t=mxUtils.arcToCurves(this.lastX,this.lastY,t,e,n,i,l,s,o)))for(e=0;e<t.length;e+=6)this.curveTo(t[e],t[e+1],t[e+2],t[e+3],t[e+4],t[e+5])},mxAbstractCanvas2D.prototype.close=function(t,e,n,i,l,s){this.addOp(this.closeOp)},mxAbstractCanvas2D.prototype.end=function(){},mxUtils.extend(mxXmlCanvas2D,mxAbstractCanvas2D),mxXmlCanvas2D.prototype.textEnabled=!0,mxXmlCanvas2D.prototype.compressed=!0,mxXmlCanvas2D.prototype.writeDefaults=function(){var t=this.createElement("fontfamily");t.setAttribute("family",mxConstants.DEFAULT_FONTFAMILY),this.root.appendChild(t),(t=this.createElement("fontsize")).setAttribute("size",mxConstants.DEFAULT_FONTSIZE),this.root.appendChild(t),(t=this.createElement("shadowcolor")).setAttribute("color",mxConstants.SHADOWCOLOR),this.root.appendChild(t),(t=this.createElement("shadowalpha")).setAttribute("alpha",mxConstants.SHADOW_OPACITY),this.root.appendChild(t),(t=this.createElement("shadowoffset")).setAttribute("dx",mxConstants.SHADOW_OFFSET_X),t.setAttribute("dy",mxConstants.SHADOW_OFFSET_Y),this.root.appendChild(t)},mxXmlCanvas2D.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))},mxXmlCanvas2D.prototype.createElement=function(t){return this.root.ownerDocument.createElement(t)},mxXmlCanvas2D.prototype.save=function(){this.compressed&&mxAbstractCanvas2D.prototype.save.apply(this,arguments),this.root.appendChild(this.createElement("save"))},mxXmlCanvas2D.prototype.restore=function(){this.compressed&&mxAbstractCanvas2D.prototype.restore.apply(this,arguments),this.root.appendChild(this.createElement("restore"))},mxXmlCanvas2D.prototype.scale=function(t){var e=this.createElement("scale");e.setAttribute("scale",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.translate=function(t,e){var n=this.createElement("translate");n.setAttribute("dx",this.format(t)),n.setAttribute("dy",this.format(e)),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rotate=function(t,e,n,i,l){var s=this.createElement("rotate");(0!=t||e||n)&&(s.setAttribute("theta",this.format(t)),s.setAttribute("flipH",e?"1":"0"),s.setAttribute("flipV",n?"1":"0"),s.setAttribute("cx",this.format(i)),s.setAttribute("cy",this.format(l)),this.root.appendChild(s))},mxXmlCanvas2D.prototype.setAlpha=function(t){if(this.compressed){if(this.state.alpha==t)return;mxAbstractCanvas2D.prototype.setAlpha.apply(this,arguments)}var e=this.createElement("alpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFillAlpha=function(t){if(this.compressed){if(this.state.fillAlpha==t)return;mxAbstractCanvas2D.prototype.setFillAlpha.apply(this,arguments)}var e=this.createElement("fillalpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setStrokeAlpha=function(t){if(this.compressed){if(this.state.strokeAlpha==t)return;mxAbstractCanvas2D.prototype.setStrokeAlpha.apply(this,arguments)}var e=this.createElement("strokealpha");e.setAttribute("alpha",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFillColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fillColor==t)return;mxAbstractCanvas2D.prototype.setFillColor.apply(this,arguments)}var e=this.createElement("fillcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setGradient=function(t,e,n,i,l,s,o,r,a){var h;null!=t&&null!=e&&(mxAbstractCanvas2D.prototype.setGradient.apply(this,arguments),(h=this.createElement("gradient")).setAttribute("c1",t),h.setAttribute("c2",e),h.setAttribute("x",this.format(n)),h.setAttribute("y",this.format(i)),h.setAttribute("w",this.format(l)),h.setAttribute("h",this.format(s)),null!=o&&h.setAttribute("direction",o),null!=r&&h.setAttribute("alpha1",r),null!=a&&h.setAttribute("alpha2",a),this.root.appendChild(h))},mxXmlCanvas2D.prototype.setStrokeColor=function(t){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.strokeColor==t)return;mxAbstractCanvas2D.prototype.setStrokeColor.apply(this,arguments)}var e=this.createElement("strokecolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setStrokeWidth=function(t){if(this.compressed){if(this.state.strokeWidth==t)return;mxAbstractCanvas2D.prototype.setStrokeWidth.apply(this,arguments)}var e=this.createElement("strokewidth");e.setAttribute("width",this.format(t)),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setDashed=function(t,e){if(this.compressed){if(this.state.dashed==t)return;mxAbstractCanvas2D.prototype.setDashed.apply(this,arguments)}var n=this.createElement("dashed");n.setAttribute("dashed",t?"1":"0"),null!=e&&n.setAttribute("fixDash",e?"1":"0"),this.root.appendChild(n)},mxXmlCanvas2D.prototype.setDashPattern=function(t){if(this.compressed){if(this.state.dashPattern==t)return;mxAbstractCanvas2D.prototype.setDashPattern.apply(this,arguments)}var e=this.createElement("dashpattern");e.setAttribute("pattern",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setLineCap=function(t){if(this.compressed){if(this.state.lineCap==t)return;mxAbstractCanvas2D.prototype.setLineCap.apply(this,arguments)}var e=this.createElement("linecap");e.setAttribute("cap",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setLineJoin=function(t){if(this.compressed){if(this.state.lineJoin==t)return;mxAbstractCanvas2D.prototype.setLineJoin.apply(this,arguments)}var e=this.createElement("linejoin");e.setAttribute("join",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setMiterLimit=function(t){if(this.compressed){if(this.state.miterLimit==t)return;mxAbstractCanvas2D.prototype.setMiterLimit.apply(this,arguments)}var e=this.createElement("miterlimit");e.setAttribute("limit",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setFontColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontColor==t)return;mxAbstractCanvas2D.prototype.setFontColor.apply(this,arguments)}var e=this.createElement("fontcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontBackgroundColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBackgroundColor==t)return;mxAbstractCanvas2D.prototype.setFontBackgroundColor.apply(this,arguments)}var e=this.createElement("fontbackgroundcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontBorderColor=function(t){if(this.textEnabled){if(t==mxConstants.NONE&&(t=null),this.compressed){if(this.state.fontBorderColor==t)return;mxAbstractCanvas2D.prototype.setFontBorderColor.apply(this,arguments)}var e=this.createElement("fontbordercolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontSize=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontSize==t)return;mxAbstractCanvas2D.prototype.setFontSize.apply(this,arguments)}var e=this.createElement("fontsize");e.setAttribute("size",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontFamily=function(t){if(this.textEnabled){if(this.compressed){if(this.state.fontFamily==t)return;mxAbstractCanvas2D.prototype.setFontFamily.apply(this,arguments)}var e=this.createElement("fontfamily");e.setAttribute("family",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setFontStyle=function(t){if(this.textEnabled){if(null==t&&(t=0),this.compressed){if(this.state.fontStyle==t)return;mxAbstractCanvas2D.prototype.setFontStyle.apply(this,arguments)}var e=this.createElement("fontstyle");e.setAttribute("style",t),this.root.appendChild(e)}},mxXmlCanvas2D.prototype.setShadow=function(t){if(this.compressed){if(this.state.shadow==t)return;mxAbstractCanvas2D.prototype.setShadow.apply(this,arguments)}var e=this.createElement("shadow");e.setAttribute("enabled",t?"1":"0"),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowColor=function(t){if(this.compressed){if(t==mxConstants.NONE&&(t=null),this.state.shadowColor==t)return;mxAbstractCanvas2D.prototype.setShadowColor.apply(this,arguments)}var e=this.createElement("shadowcolor");e.setAttribute("color",null!=t?t:mxConstants.NONE),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowAlpha=function(t){if(this.compressed){if(this.state.shadowAlpha==t)return;mxAbstractCanvas2D.prototype.setShadowAlpha.apply(this,arguments)}var e=this.createElement("shadowalpha");e.setAttribute("alpha",t),this.root.appendChild(e)},mxXmlCanvas2D.prototype.setShadowOffset=function(t,e){if(this.compressed){if(this.state.shadowDx==t&&this.state.shadowDy==e)return;mxAbstractCanvas2D.prototype.setShadowOffset.apply(this,arguments)}var n=this.createElement("shadowoffset");n.setAttribute("dx",t),n.setAttribute("dy",e),this.root.appendChild(n)},mxXmlCanvas2D.prototype.rect=function(t,e,n,i){var l=this.createElement("rect");l.setAttribute("x",this.format(t)),l.setAttribute("y",this.format(e)),l.setAttribute("w",this.format(n)),l.setAttribute("h",this.format(i)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.roundrect=function(t,e,n,i,l,s){var o=this.createElement("roundrect");o.setAttribute("x",this.format(t)),o.setAttribute("y",this.format(e)),o.setAttribute("w",this.format(n)),o.setAttribute("h",this.format(i)),o.setAttribute("dx",this.format(l)),o.setAttribute("dy",this.format(s)),this.root.appendChild(o)},mxXmlCanvas2D.prototype.ellipse=function(t,e,n,i){var l=this.createElement("ellipse");l.setAttribute("x",this.format(t)),l.setAttribute("y",this.format(e)),l.setAttribute("w",this.format(n)),l.setAttribute("h",this.format(i)),this.root.appendChild(l)},mxXmlCanvas2D.prototype.image=function(t,e,n,i,l,s,o,r){l=this.converter.convert(l);var a=this.createElement("image");a.setAttribute("x",this.format(t)),a.setAttribute("y",this.format(e)),a.setAttribute("w",this.format(n)),a.setAttribute("h",this.format(i)),a.setAttribute("src",l),a.setAttribute("aspect",s?"1":"0"),a.setAttribute("flipH",o?"1":"0"),a.setAttribute("flipV",r?"1":"0"),this.root.appendChild(a)},mxXmlCanvas2D.prototype.begin=function(){this.root.appendChild(this.createElement("begin")),this.lastY=this.lastX=0},mxXmlCanvas2D.prototype.moveTo=function(t,e){var n=this.createElement("move");n.setAttribute("x",this.format(t)),n.setAttribute("y",this.format(e)),this.root.appendChild(n),this.lastX=t,this.lastY=e},mxXmlCanvas2D.prototype.lineTo=function(t,e){var n=this.createElement("line");n.setAttribute("x",this.format(t)),n.setAttribute("y",this.format(e)),this.root.appendChild(n),this.lastX=t,this.lastY=e},mxXmlCanvas2D.prototype.quadTo=function(t,e,n,i){var l=this.createElement("quad");l.setAttribute("x1",this.format(t)),l.setAttribute("y1",this.format(e)),l.setAttribute("x2",this.format(n)),l.setAttribute("y2",this.format(i)),this.root.appendChild(l),this.lastX=n,this.lastY=i},mxXmlCanvas2D.prototype.curveTo=function(t,e,n,i,l,s){var o=this.createElement("curve");o.setAttribute("x1",this.format(t)),o.setAttribute("y1",this.format(e)),o.setAttribute("x2",this.format(n)),o.setAttribute("y2",this.format(i)),o.setAttribute("x3",this.format(l)),o.setAttribute("y3",this.format(s)),this.root.appendChild(o),this.lastX=l,this.lastY=s},mxXmlCanvas2D.prototype.close=function(){this.root.appendChild(this.createElement("close"))},mxXmlCanvas2D.prototype.text=function(t,e,n,i,l,s,o,r,a,h,d,u,p){var c;this.textEnabled&&null!=l&&(mxUtils.isNode(l)&&(l=mxUtils.getOuterHtml(l)),(c=this.createElement("text")).setAttribute("x",this.format(t)),c.setAttribute("y",this.format(e)),c.setAttribute("w",this.format(n)),c.setAttribute("h",this.format(i)),c.setAttribute("str",l),null!=s&&c.setAttribute("align",s),null!=o&&c.setAttribute("valign",o),c.setAttribute("wrap",r?"1":"0"),c.setAttribute("format",a=null==a?"":a),null!=h&&c.setAttribute("overflow",h),null!=d&&c.setAttribute("clip",d?"1":"0"),null!=u&&c.setAttribute("rotation",u),null!=p&&c.setAttribute("dir",p),this.root.appendChild(c))},mxXmlCanvas2D.prototype.stroke=function(){this.root.appendChild(this.createElement("stroke"))},mxXmlCanvas2D.prototype.fill=function(){this.root.appendChild(this.createElement("fill"))},mxXmlCanvas2D.prototype.fillAndStroke=function(){this.root.appendChild(this.createElement("fillstroke"))},mxUtils.extend(mxSvgCanvas2D,mxAbstractCanvas2D),!function(){if(mxSvgCanvas2D.prototype.useDomParser=!mxClient.IS_IE&&"function"==typeof DOMParser&&"function"==typeof XMLSerializer,mxSvgCanvas2D.prototype.useDomParser)try{var t=(new DOMParser).parseFromString("test text","text/html");mxSvgCanvas2D.prototype.useDomParser=null!=t}catch(t){mxSvgCanvas2D.prototype.useDomParser=!1}mxSvgCanvas2D.prototype.useAbsoluteIds=!mxClient.IS_CHROMEAPP&&!mxClient.IS_IE&&!mxClient.IS_IE11&&!mxClient.IS_EDGE&&0<document.getElementsByTagName("base").length}(),mxSvgCanvas2D.prototype.node=null,mxSvgCanvas2D.prototype.matchHtmlAlignment=!0,mxSvgCanvas2D.prototype.textEnabled=!0,mxSvgCanvas2D.prototype.foEnabled=!0,mxSvgCanvas2D.prototype.foAltText="[Object]",mxSvgCanvas2D.prototype.foOffset=0,mxSvgCanvas2D.prototype.textOffset=0,mxSvgCanvas2D.prototype.imageOffset=0,mxSvgCanvas2D.prototype.strokeTolerance=0,mxSvgCanvas2D.prototype.minStrokeWidth=1,mxSvgCanvas2D.prototype.refCount=0,mxSvgCanvas2D.prototype.lineHeightCorrection=1,mxSvgCanvas2D.prototype.pointerEventsValue="all",mxSvgCanvas2D.prototype.fontMetricsPadding=10,mxSvgCanvas2D.prototype.cacheOffsetSize=!0,mxSvgCanvas2D.prototype.format=function(t){return parseFloat(parseFloat(t).toFixed(2))},mxSvgCanvas2D.prototype.getBaseUrl=function(){var t=window.location.href,e=t.lastIndexOf("#");return t=0<e?t.substring(0,e):t},mxSvgCanvas2D.prototype.reset=function(){mxAbstractCanvas2D.prototype.reset.apply(this,arguments),this.gradients=[]},mxSvgCanvas2D.prototype.createStyle=function(t){return(t=this.createElement("style")).setAttribute("type","text/css"),mxUtils.write(t,"svg{font-family:"+mxConstants.DEFAULT_FONTFAMILY+";font-size:"+mxConstants.DEFAULT_FONTSIZE+";fill:none;stroke-miterlimit:10}"),t},mxSvgCanvas2D.prototype.createElement=function(t,e){return null!=this.root.ownerDocument.createElementNS?this.root.ownerDocument.createElementNS(e||mxConstants.NS_SVG,t):(t=this.root.ownerDocument.createElement(t),null!=e&&t.setAttribute("xmlns",e),t)},mxSvgCanvas2D.prototype.getAlternateText=function(t,e,n,i,l,s,o,r,a,h,d,u,p){return null!=s?this.foAltText:null},mxSvgCanvas2D.prototype.createAlternateContent=function(t,e,n,i,l,s,o,r,a,h,d,u,p){return t=this.getAlternateText(t,e,n,i,l,s,o,r,a,h,d,u,p),i=this.state,null!=t&&0<i.fontSize?(r=r==mxConstants.ALIGN_TOP?1:r==mxConstants.ALIGN_BOTTOM?0:.3,l=o==mxConstants.ALIGN_RIGHT?"end":o==mxConstants.ALIGN_LEFT?"start":"middle",(o=this.createElement("text")).setAttribute("x",Math.round(e+i.dx)),o.setAttribute("y",Math.round(n+i.dy+r*i.fontSize)),o.setAttribute("fill",i.fontColor||"black"),o.setAttribute("font-family",i.fontFamily),o.setAttribute("font-size",Math.round(i.fontSize)+"px"),"start"!=l&&o.setAttribute("text-anchor",l),(i.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&o.setAttribute("font-weight","bold"),(i.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&o.setAttribute("font-style","italic"),e=[],(i.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(i.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),0<e.length&&o.setAttribute("text-decoration",e.join(" ")),mxUtils.write(o,t),o):null},mxSvgCanvas2D.prototype.createGradientId=function(t,e,n,i,l){return"#"==t.charAt(0)&&(t=t.substring(1)),"#"==e.charAt(0)&&(e=e.substring(1)),t=t.toLowerCase()+"-"+n,e=e.toLowerCase()+"-"+i,(n=null)==l||l==mxConstants.DIRECTION_SOUTH?n="s":l==mxConstants.DIRECTION_EAST?n="e":(i=t,t=e,e=i,l==mxConstants.DIRECTION_NORTH?n="s":l==mxConstants.DIRECTION_WEST&&(n="e")),"mx-gradient-"+t+"-"+e+"-"+n},mxSvgCanvas2D.prototype.getSvgGradient=function(t,e,n,i,l){var s=this.createGradientId(t,e,n,i,l),o=this.gradients[s];if(null==o){var r=this.root.ownerSVGElement,a=0,h=s+"-"+a;if(null!=r)for(o=r.ownerDocument.getElementById(h);null!=o&&o.ownerSVGElement!=r;)h=s+"-"+a++,o=r.ownerDocument.getElementById(h);else h="id"+ ++this.refCount;null==o&&((o=this.createSvgGradient(t,e,n,i,l)).setAttribute("id",h),(null!=this.defs?this.defs:r).appendChild(o)),this.gradients[s]=o}return o.getAttribute("id")},mxSvgCanvas2D.prototype.createSvgGradient=function(t,e,n,i,l){var s=this.createElement("linearGradient");return s.setAttribute("x1","0%"),s.setAttribute("y1","0%"),s.setAttribute("x2","0%"),s.setAttribute("y2","0%"),null==l||l==mxConstants.DIRECTION_SOUTH?s.setAttribute("y2","100%"):l==mxConstants.DIRECTION_EAST?s.setAttribute("x2","100%"):l==mxConstants.DIRECTION_NORTH?s.setAttribute("y1","100%"):l==mxConstants.DIRECTION_WEST&&s.setAttribute("x1","100%"),n=n<1?";stop-opacity:"+n:"",(l=this.createElement("stop")).setAttribute("offset","0%"),l.setAttribute("style","stop-color:"+t+n),s.appendChild(l),n=i<1?";stop-opacity:"+i:"",(l=this.createElement("stop")).setAttribute("offset","100%"),l.setAttribute("style","stop-color:"+e+n),s.appendChild(l),s},mxSvgCanvas2D.prototype.addNode=function(t,e){var n=this.node,i=this.state;if(null!=n){if("path"==n.nodeName){if(!(null!=this.path&&0<this.path.length))return;n.setAttribute("d",this.path.join(" "))}t&&null!=i.fillColor?this.updateFill():this.styleEnabled||("ellipse"==n.nodeName&&mxClient.IS_FF?n.setAttribute("fill","transparent"):n.setAttribute("fill","none"),t=!1),e&&null!=i.strokeColor?this.updateStroke():this.styleEnabled||n.setAttribute("stroke","none"),null!=i.transform&&0<i.transform.length&&n.setAttribute("transform",i.transform),this.pointerEvents?n.setAttribute("pointer-events",this.pointerEventsValue):this.pointerEvents||null!=this.originalRoot||n.setAttribute("pointer-events","none"),i.shadow&&this.root.appendChild(this.createShadow(n)),0<this.strokeTolerance&&!t&&this.addTolerance(n),("rect"!=n.nodeName&&"path"!=n.nodeName&&"ellipse"!=n.nodeName||"none"!=n.getAttribute("fill")&&"transparent"!=n.getAttribute("fill")||"none"!=n.getAttribute("stroke")||"none"!=n.getAttribute("pointer-events"))&&this.root.appendChild(n),this.node=null}},mxSvgCanvas2D.prototype.addTolerance=function(t){this.root.appendChild(this.createTolerance(t))},mxSvgCanvas2D.prototype.updateFill=function(){var t,e=this.state;(e.alpha<1||e.fillAlpha<1)&&this.node.setAttribute("fill-opacity",e.alpha*e.fillAlpha),null!=e.fillColor&&(null!=e.gradientColor?(e=this.getSvgGradient(String(e.fillColor),String(e.gradientColor),e.gradientFillAlpha,e.gradientAlpha,e.gradientDirection),this.root.ownerDocument==document&&this.useAbsoluteIds?(t=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"),this.node.setAttribute("fill","url("+t+"#"+e+")")):this.node.setAttribute("fill","url(#"+e+")")):this.node.setAttribute("fill",String(e.fillColor).toLowerCase()))},mxSvgCanvas2D.prototype.getCurrentStrokeWidth=function(){return Math.max(this.minStrokeWidth,Math.max(.01,this.format(this.state.strokeWidth*this.state.scale)))},mxSvgCanvas2D.prototype.updateStroke=function(){var t=this.state,e=(this.node.setAttribute("stroke",String(t.strokeColor).toLowerCase()),(t.alpha<1||t.strokeAlpha<1)&&this.node.setAttribute("stroke-opacity",t.alpha*t.strokeAlpha),this.getCurrentStrokeWidth());1!=e&&this.node.setAttribute("stroke-width",e),"path"==this.node.nodeName&&this.updateStrokeAttributes(),t.dashed&&this.node.setAttribute("stroke-dasharray",this.createDashPattern((t.fixDash?1:t.strokeWidth)*t.scale))},mxSvgCanvas2D.prototype.updateStrokeAttributes=function(){var t,e=this.state;null!=e.lineJoin&&"miter"!=e.lineJoin&&this.node.setAttribute("stroke-linejoin",e.lineJoin),null!=e.lineCap&&"butt"!=(t="flat"==(t=e.lineCap)?"butt":t)&&this.node.setAttribute("stroke-linecap",t),null==e.miterLimit||this.styleEnabled&&10==e.miterLimit||this.node.setAttribute("stroke-miterlimit",e.miterLimit)},mxSvgCanvas2D.prototype.createDashPattern=function(t){var e=[];if("string"==typeof this.state.dashPattern){var n=this.state.dashPattern.split(" ");if(0<n.length)for(var i=0;i<n.length;i++)e[i]=Number(n[i])*t}return e.join(" ")},mxSvgCanvas2D.prototype.createTolerance=function(t){t=t.cloneNode(!0);var e=parseFloat(t.getAttribute("stroke-width")||1)+this.strokeTolerance;return t.setAttribute("pointer-events","stroke"),t.setAttribute("visibility","hidden"),t.removeAttribute("stroke-dasharray"),t.setAttribute("stroke-width",e),t.setAttribute("fill","none"),t.setAttribute("stroke",mxClient.IS_OT?"none":"white"),t},mxSvgCanvas2D.prototype.createShadow=function(t){t=t.cloneNode(!0);var e=this.state;return"none"==t.getAttribute("fill")||mxClient.IS_FF&&"transparent"==t.getAttribute("fill")||t.setAttribute("fill",e.shadowColor),"none"!=t.getAttribute("stroke")&&t.setAttribute("stroke",e.shadowColor),t.setAttribute("transform","translate("+this.format(e.shadowDx*e.scale)+","+this.format(e.shadowDy*e.scale)+")"+(e.transform||"")),t.setAttribute("opacity",e.shadowAlpha),t},mxSvgCanvas2D.prototype.setLink=function(t,e){var n;null==t?this.root=this.originalRoot:(this.originalRoot=this.root,null==(n=this.createElement("a")).setAttributeNS||this.root.ownerDocument!=document&&null==document.documentMode?n.setAttribute("xlink:href",t):n.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",t),null!=e&&n.setAttribute("target",e),this.root.appendChild(n),this.root=n)},mxSvgCanvas2D.prototype.rotate=function(t,e,n,i,l){var s,o,r,a,h;(0!=t||e||n)&&(i+=(s=this.state).dx,l+=s.dy,i*=s.scale,l*=s.scale,s.transform=s.transform||"",e&&n?t+=180:e!=n&&(r=e?-1:1,a=n?l:0,h=n?-1:1,s.transform+="translate("+this.format(o=e?i:0)+","+this.format(a)+")scale("+this.format(r)+","+this.format(h)+")translate("+this.format(-o)+","+this.format(-a)+")"),(e?!n:n)&&(t*=-1),0!=t&&(s.transform+="rotate("+this.format(t)+","+this.format(i)+","+this.format(l)+")"),s.rotation+=t,s.rotationCx=i,s.rotationCy=l)},mxSvgCanvas2D.prototype.begin=function(){mxAbstractCanvas2D.prototype.begin.apply(this,arguments),this.node=this.createElement("path")},mxSvgCanvas2D.prototype.rect=function(t,e,n,i){var l=this.state,s=this.createElement("rect");s.setAttribute("x",this.format((t+l.dx)*l.scale)),s.setAttribute("y",this.format((e+l.dy)*l.scale)),s.setAttribute("width",this.format(n*l.scale)),s.setAttribute("height",this.format(i*l.scale)),this.node=s},mxSvgCanvas2D.prototype.roundrect=function(t,e,n,i,l,s){this.rect(t,e,n,i),0<l&&this.node.setAttribute("rx",this.format(l*this.state.scale)),0<s&&this.node.setAttribute("ry",this.format(s*this.state.scale))},mxSvgCanvas2D.prototype.ellipse=function(t,e,n,i){var l=this.state,s=this.createElement("ellipse");s.setAttribute("cx",this.format((t+n/2+l.dx)*l.scale)),s.setAttribute("cy",this.format((e+i/2+l.dy)*l.scale)),s.setAttribute("rx",n/2*l.scale),s.setAttribute("ry",i/2*l.scale),this.node=s},mxSvgCanvas2D.prototype.image=function(t,e,n,i,l,s,o,r){l=this.converter.convert(l),s=null==s||s,o=null!=o&&o,r=null!=r&&r;var a,h,d,u=this.state,p=(t+=u.dx,e+=u.dy,this.createElement("image"));p.setAttribute("x",this.format(t*u.scale)+this.imageOffset),p.setAttribute("y",this.format(e*u.scale)+this.imageOffset),p.setAttribute("width",this.format(n*u.scale)),p.setAttribute("height",this.format(i*u.scale)),null==p.setAttributeNS?p.setAttribute("xlink:href",l):p.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",l),s||p.setAttribute("preserveAspectRatio","none"),(u.alpha<1||u.fillAlpha<1)&&p.setAttribute("opacity",u.alpha*u.fillAlpha),l=this.state.transform||"",(o||r)&&(a=s=1,d=h=0,o&&(s=-1,h=-n-2*t),r&&(a=-1,d=-i-2*e),l+="scale("+s+","+a+")translate("+h*u.scale+","+d*u.scale+")"),0<l.length&&p.setAttribute("transform",l),this.pointerEvents||p.setAttribute("pointer-events","none"),this.root.appendChild(p)},mxSvgCanvas2D.prototype.convertHtml=function(t){if(this.useDomParser)null!=(e=(new DOMParser).parseFromString(t,"text/html"))&&"</body>"==(t="<body"==(t=(new XMLSerializer).serializeToString(e.body)).substring(0,5)?t.substring(t.indexOf(">",5)+1):t).substring(t.length-7,t.length)&&(t=t.substring(0,t.length-7));else{if(null!=document.implementation&&null!=document.implementation.createDocument){var e,n=(e=document.implementation.createDocument("http://www.w3.org/1999/xhtml","html",null)).createElement("body"),i=(e.documentElement.appendChild(n),document.createElement("div"));for(i.innerHTML=t,t=i.firstChild;null!=t;)i=t.nextSibling,n.appendChild(e.adoptNode(t)),t=i;return n.innerHTML}(e=document.createElement("textarea")).innerHTML=t.replace(/&amp;/g,"&amp;amp;").replace(/&#60;/g,"&amp;lt;").replace(/&#62;/g,"&amp;gt;").replace(/&lt;/g,"&amp;lt;").replace(/&gt;/g,"&amp;gt;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),t=e.value.replace(/&/g,"&amp;").replace(/&amp;lt;/g,"&lt;").replace(/&amp;gt;/g,"&gt;").replace(/&amp;amp;/g,"&amp;").replace(/<br>/g,"<br />").replace(/<hr>/g,"<hr />").replace(/(<img[^>]+)>/gm,"$1 />")}return t},mxSvgCanvas2D.prototype.createDiv=function(t){var e,n,i;return mxUtils.isNode(t)||(t="<div><div>"+this.convertHtml(t)+"</div></div>"),mxClient.IS_IE||mxClient.IS_IE11||!document.createElementNS?(mxUtils.isNode(t)&&(t="<div><div>"+mxUtils.getXml(t)+"</div></div>"),mxUtils.parseXml('<div xmlns="http://www.w3.org/1999/xhtml">'+t+"</div>").documentElement):(e=document.createElementNS("http://www.w3.org/1999/xhtml","div"),mxUtils.isNode(t)?(i=(n=document.createElement("div")).cloneNode(!1),this.root.ownerDocument!=document?n.appendChild(t.cloneNode(!0)):n.appendChild(t),i.appendChild(n),e.appendChild(i)):e.innerHTML=t,e)},mxSvgCanvas2D.prototype.updateText=function(t,e,n,i,l,s,o,r,a,h,d){null!=d&&null!=d.firstChild&&null!=d.firstChild.firstChild&&this.updateTextNodes(t,e,n,i,l,s,o,r,a,h,d.firstChild)},mxSvgCanvas2D.prototype.addForeignObject=function(t,e,n,i,l,s,o,r,a,h,d,u,p,c,m){p=this.createElement("g");var g=this.createElement("foreignObject");g.setAttribute("style","overflow: visible; text-align: left;"),g.setAttribute("pointer-events","none"),c.ownerDocument!=document&&(c=mxUtils.importNodeImplementation(g.ownerDocument,c,!0)),g.appendChild(c),p.appendChild(g),this.updateTextNodes(t,e,n,i,s,o,r,h,d,u,p),this.root.ownerDocument!=document&&null!=(t=this.createAlternateContent(g,t,e,n,i,l,s,o,r,a,h,d,u))&&(g.setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility"),(e=this.createElement("switch")).appendChild(g),e.appendChild(t),p.appendChild(e)),m.appendChild(p)},mxSvgCanvas2D.prototype.updateTextNodes=function(d,u,t,e,n,i,l,s,o,p,c){var m=this.state.scale;mxSvgCanvas2D.createCss(t+2,e,n,i,l,s,o,null!=this.state.fontBackgroundColor?this.state.fontBackgroundColor:null,null!=this.state.fontBorderColor?this.state.fontBorderColor:null,"display: flex; align-items: unsafe "+(i==mxConstants.ALIGN_TOP?"flex-start":i==mxConstants.ALIGN_BOTTOM?"flex-end":"center")+"; justify-content: unsafe "+(n==mxConstants.ALIGN_LEFT?"flex-start":n==mxConstants.ALIGN_RIGHT?"flex-end":"center")+"; ",this.getTextCss(),m,mxUtils.bind(this,function(t,e,n,i,l){d+=this.state.dx,u+=this.state.dy;var s=c.firstChild,o=s.firstChild,r=o.firstChild,a=(this.rotateHtml?this.state.rotation:0)+(null!=p?p:0),h=(0!=this.foOffset?"translate("+this.foOffset+" "+this.foOffset+")":"")+(1!=m?"scale("+m+")":"");r.firstChild.setAttribute("style",l),r.setAttribute("style",i),s.setAttribute("width",Math.ceil(1/Math.min(1,m)*100)+"%"),s.setAttribute("height",Math.ceil(1/Math.min(1,m)*100)+"%"),(e=Math.round(u+e))<0?s.setAttribute("y",e):(s.removeAttribute("y"),n+="padding-top: "+e+"px; "),o.setAttribute("style",n+"margin-left: "+Math.round(d+t)+"px;"),(h+=0!=a?"rotate("+a+" "+d+" "+u+")":"")?c.setAttribute("transform",h):c.removeAttribute("transform"),1!=this.state.alpha?c.setAttribute("opacity",this.state.alpha):c.removeAttribute("opacity")}))},mxSvgCanvas2D.createCss=function(t,e,n,i,l,s,o,r,a,h,d,u,p){u="box-sizing: border-box; font-size: 0; text-align: "+(n==mxConstants.ALIGN_LEFT?"left":n==mxConstants.ALIGN_RIGHT?"right":"center")+"; ";var c=mxUtils.getAlignmentAsPoint(n,i),m=(n="overflow: hidden; ","width: 1px; "),g="height: 1px; ",x=c.x*t,c=c.y*e;o?(m="width: "+Math.round(t)+"px; ",u+="max-height: "+Math.round(e)+"px; ",c=0):"fill"==s?(m="width: "+Math.round(t)+"px; ",g="height: "+Math.round(e)+"px; ",d+="width: 100%; height: 100%; ",u+="width: "+Math.round(t-2)+"px; "+g):"width"==s?(d+="width: 100%; ",u+=m="width: "+Math.round(t-2)+"px; ",(c=0)<e&&(u+="max-height: "+Math.round(e)+"px; ")):"block"==s?(d+="width: 100%; ",n="",c=0,u+=m="width: "+Math.round(t-2)+"px; ","middle"==i&&(u+="max-height: "+Math.round(e)+"px; ")):(n="",c=0),e="",null!=r&&(e+="background-color: "+r+"; "),null!=a&&(e+="border: 1px solid "+a+"; "),""==n||o?d+=e:u+=e,l&&0<t?(d+="white-space: normal; word-wrap: "+mxConstants.WORD_WRAP+"; ",m="width: "+Math.round(t)+"px; ",""!=n&&"fill"!=s&&(c=0)):(d+="white-space: nowrap; ",""==n&&"block"!=s&&(x=0)),p(x,c,h+m+g,u+n,d,n)},mxSvgCanvas2D.prototype.getTextCss=function(){var t=this.state,e="display: inline-block; font-size: "+t.fontSize+"px; font-family: "+t.fontFamily+"; color: "+t.fontColor+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?t.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT*this.lineHeightCorrection)+"; pointer-events: "+(this.pointerEvents?this.pointerEventsValue:"none")+"; ",n=((t.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(e+="font-weight: bold; "),(t.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(e+="font-style: italic; "),[]);return(t.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&n.push("underline"),(t.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&n.push("line-through"),0<n.length&&(e+="text-decoration: "+n.join(" ")+"; "),e},mxSvgCanvas2D.prototype.text=function(t,e,n,i,l,s,o,r,a,h,d,u,p){var c;this.textEnabled&&null!=l&&(u=null!=u?u:0,this.foEnabled&&"html"==a?null!=(c=this.createDiv(l))&&(null!=p&&c.setAttribute("dir",p),this.addForeignObject(t,e,n,i,l,s,o,r,a,h,d,u,p,c,this.root)):this.plainText(t+this.state.dx,e+this.state.dy,n,i,l,s,o,r,h,d,u,p))},mxSvgCanvas2D.prototype.createClip=function(t,e,n,i){for(var l="mx-clip-"+(t=Math.round(t))+"-"+(e=Math.round(e))+"-"+(n=Math.round(n))+"-"+(i=Math.round(i)),s=0,o=l+"-"+s;null!=document.getElementById(o);)o=l+"-"+ ++s;return(clip=this.createElement("clipPath")).setAttribute("id",o),(l=this.createElement("rect")).setAttribute("x",t),l.setAttribute("y",e),l.setAttribute("width",n),l.setAttribute("height",i),clip.appendChild(l),clip},mxSvgCanvas2D.prototype.plainText=function(t,e,n,i,l,s,o,r,a,h,d,u){d=null!=d?d:0;var p=(r=this.state).fontSize,c=this.createElement("g"),m=r.transform||"",g=(this.updateFont(c),this.pointerEvents||null!=this.originalRoot||c.setAttribute("pointer-events","none"),0!=d&&(m+="rotate("+d+","+this.format(t*r.scale)+","+this.format(e*r.scale)+")"),null!=u&&c.setAttribute("direction",u),h&&0<n&&0<i&&(u=t,d=e,s==mxConstants.ALIGN_CENTER?u-=n/2:s==mxConstants.ALIGN_RIGHT&&(u-=n),"fill"!=a&&(o==mxConstants.ALIGN_MIDDLE?d-=i/2:o==mxConstants.ALIGN_BOTTOM&&(d-=i)),d=this.createClip(u*r.scale-2,d*r.scale-2,n*r.scale+4,i*r.scale+4),(null!=this.defs?this.defs:this.root).appendChild(d),mxClient.IS_CHROMEAPP||mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_EDGE||this.root.ownerDocument!=document?c.setAttribute("clip-path","url(#"+d.getAttribute("id")+")"):(u=this.getBaseUrl().replace(/([\(\)])/g,"\\$1"),c.setAttribute("clip-path","url("+u+"#"+d.getAttribute("id")+")"))),"start"!=(d=s==mxConstants.ALIGN_RIGHT?"end":s==mxConstants.ALIGN_CENTER?"middle":"start")&&c.setAttribute("text-anchor",d),this.styleEnabled&&p==mxConstants.DEFAULT_FONTSIZE||c.setAttribute("font-size",p*r.scale+"px"),0<m.length&&c.setAttribute("transform",m),r.alpha<1&&c.setAttribute("opacity",r.alpha),m=l.split("\n"),u=Math.round(p*mxConstants.LINE_HEIGHT),p+(m.length-1)*u);for(d=e+p-1,o==mxConstants.ALIGN_MIDDLE?"fill"==a?d-=i/2:d-=h=(this.matchHtmlAlignment&&h&&0<i?Math.min(g,i):g)/2:o==mxConstants.ALIGN_BOTTOM&&("fill"==a?d-=i:d-=(h=this.matchHtmlAlignment&&h&&0<i?Math.min(g,i):g)+1),h=0;h<m.length;h++)0<m[h].length&&0<mxUtils.trim(m[h]).length&&((p=this.createElement("text")).setAttribute("x",this.format(t*r.scale)+this.textOffset),p.setAttribute("y",this.format(d*r.scale)+this.textOffset),mxUtils.write(p,m[h]),c.appendChild(p)),d+=u;this.root.appendChild(c),this.addTextBackground(c,l,t,e,n,"fill"==a?i:g,s,o,a)},mxSvgCanvas2D.prototype.updateFont=function(t){var e=this.state,n=(t.setAttribute("fill",e.fontColor),this.styleEnabled&&e.fontFamily==mxConstants.DEFAULT_FONTFAMILY||t.setAttribute("font-family",e.fontFamily),(e.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&t.setAttribute("font-weight","bold"),(e.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&t.setAttribute("font-style","italic"),[]);(e.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&n.push("underline"),(e.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&n.push("line-through"),0<n.length&&t.setAttribute("text-decoration",n.join(" "))},mxSvgCanvas2D.prototype.addTextBackground=function(t,e,n,i,l,s,o,r,a){var h=this.state;if(null!=h.fontBackgroundColor||null!=h.fontBorderColor){var d=null;if("fill"==a||"width"==a)o==mxConstants.ALIGN_CENTER?n-=l/2:o==mxConstants.ALIGN_RIGHT&&(n-=l),r==mxConstants.ALIGN_MIDDLE?i-=s/2:r==mxConstants.ALIGN_BOTTOM&&(i-=s),d=new mxRectangle((n+1)*h.scale,i*h.scale,(l-2)*h.scale,(s+2)*h.scale);else if(null!=t.getBBox&&this.root.ownerDocument==document)try{var d=t.getBBox(),u=mxClient.IS_IE&&mxClient.IS_SVG,d=new mxRectangle(d.x,d.y+(u?0:1),d.width,d.height+(u?1:0))}catch(t){}null!=d&&0!=d.width&&0!=d.height||((d=document.createElement("div")).style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?h.fontSize*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,d.style.fontSize=h.fontSize+"px",d.style.fontFamily=h.fontFamily,d.style.whiteSpace="nowrap",d.style.position="absolute",d.style.visibility="hidden",d.style.display="inline-block",d.style.zoom="1",(h.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(d.style.fontWeight="bold"),(h.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(d.style.fontStyle="italic"),e=mxUtils.htmlEntities(e,!1),d.innerHTML=e.replace(/\n/g,"<br/>"),document.body.appendChild(d),l=d.offsetWidth,s=d.offsetHeight,d.parentNode.removeChild(d),o==mxConstants.ALIGN_CENTER?n-=l/2:o==mxConstants.ALIGN_RIGHT&&(n-=l),r==mxConstants.ALIGN_MIDDLE?i-=s/2:r==mxConstants.ALIGN_BOTTOM&&(i-=s),d=new mxRectangle((n+1)*h.scale,(i+2)*h.scale,l*h.scale,(s+1)*h.scale)),null!=d&&((e=this.createElement("rect")).setAttribute("fill",h.fontBackgroundColor||"none"),e.setAttribute("stroke",h.fontBorderColor||"none"),e.setAttribute("x",Math.floor(d.x-1)),e.setAttribute("y",Math.floor(d.y-1)),e.setAttribute("width",Math.ceil(d.width+2)),e.setAttribute("height",Math.ceil(d.height)),h=null!=h.fontBorderColor?Math.max(1,this.format(h.scale)):0,e.setAttribute("stroke-width",h),this.root.ownerDocument==document&&1==mxUtils.mod(h,2)&&e.setAttribute("transform","translate(0.5, 0.5)"),t.insertBefore(e,t.firstChild))}},mxSvgCanvas2D.prototype.stroke=function(){this.addNode(!1,!0)},mxSvgCanvas2D.prototype.fill=function(){this.addNode(!0,!1)},mxSvgCanvas2D.prototype.fillAndStroke=function(){this.addNode(!0,!0)},mxGuide.prototype.graph=null,mxGuide.prototype.states=null,mxGuide.prototype.horizontal=!0,mxGuide.prototype.vertical=!0,mxGuide.prototype.guideX=null,mxGuide.prototype.guideY=null,mxGuide.prototype.rounded=!1,mxGuide.prototype.tolerance=2,mxGuide.prototype.setStates=function(t){this.states=t},mxGuide.prototype.isEnabledForEvent=function(t){return!0},mxGuide.prototype.getGuideTolerance=function(t){return t&&this.graph.gridEnabled?this.graph.gridSize/2:this.tolerance},mxGuide.prototype.createGuideShape=function(t){return(t=new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH)).isDashed=!0,t},mxGuide.prototype.isStateIgnored=function(t){return!1},mxGuide.prototype.move=function(l,s,t,e){if(null!=this.states&&(this.horizontal||this.vertical)&&null!=l&&null!=s){e=function(t,e,n){var i=!1;n&&Math.abs(t-E)<m?(s.y=t-l.getCenterY(),m=Math.abs(t-E),i=!0):n||(Math.abs(t-f)<m?(s.y=t-l.y,m=Math.abs(t-f),i=!0):Math.abs(t-C)<m&&(s.y=t-l.y-l.height,m=Math.abs(t-C),i=!0)),i&&(u=e,p=t,null==this.guideY)&&(this.guideY=this.createGuideShape(!1),this.guideY.dialect=mxConstants.DIALECT_SVG,this.guideY.pointerEvents=!1,this.guideY.init(this.graph.getView().getOverlayPane())),d=d||i};var n=function(t,e,n){var i=!1;n&&Math.abs(t-y)<c?(s.x=t-l.getCenterX(),c=Math.abs(t-y),i=!0):n||(Math.abs(t-g)<c?(s.x=t-l.x,c=Math.abs(t-g),i=!0):Math.abs(t-x)<c&&(s.x=t-l.x-l.width,c=Math.abs(t-x),i=!0)),i&&(a=e,h=t,null==this.guideX)&&(this.guideX=this.createGuideShape(!0),this.guideX.dialect=mxConstants.DIALECT_SVG,this.guideX.pointerEvents=!1,this.guideX.init(this.graph.getView().getOverlayPane())),r=r||i},i=this.graph.getView().scale,i=this.getGuideTolerance(t)*i,o=l.clone();o.x+=s.x,o.y+=s.y;for(var r=!1,a=null,h=null,d=!1,u=null,p=null,c=i,m=i,g=o.x,x=o.x+o.width,y=o.getCenterX(),f=o.y,C=o.y+o.height,E=o.getCenterY(),i=0;i<this.states.length;i++)null==(o=this.states[i])||this.isStateIgnored(o)||(this.horizontal&&(n.call(this,o.getCenterX(),o,!0),n.call(this,o.x,o,!1),n.call(this,o.x+o.width,o,!1),null==o.cell)&&n.call(this,o.getCenterX(),o,!1),this.vertical&&(e.call(this,o.getCenterY(),o,!0),e.call(this,o.y,o,!1),e.call(this,o.y+o.height,o,!1),null==o.cell)&&e.call(this,o.getCenterY(),o,!1));this.graph.snapDelta(s,l,!t,r,d),s=this.getDelta(l,a,s.x,u,s.y),t=this.graph.container,r||null==this.guideX?null!=this.guideX&&((n=e=null)!=a&&null!=l&&(e=Math.min(l.y+s.y-this.graph.panDy,a.y),n=Math.max(l.y+l.height+s.y-this.graph.panDy,a.y+a.height)),this.guideX.points=null!=e&&null!=n?[new mxPoint(h,e),new mxPoint(h,n)]:[new mxPoint(h,-this.graph.panDy),new mxPoint(h,t.scrollHeight-3-this.graph.panDy)],this.guideX.stroke=this.getGuideColor(a,!0),this.guideX.node.style.visibility="visible",this.guideX.redraw()):this.guideX.node.style.visibility="hidden",d||null==this.guideY?null!=this.guideY&&((n=e=null)!=u&&null!=l&&(e=Math.min(l.x+s.x-this.graph.panDx,u.x),n=Math.max(l.x+l.width+s.x-this.graph.panDx,u.x+u.width)),this.guideY.points=null!=e&&null!=n?[new mxPoint(e,p),new mxPoint(n,p)]:[new mxPoint(-this.graph.panDx,p),new mxPoint(t.scrollWidth-3-this.graph.panDx,p)],this.guideY.stroke=this.getGuideColor(u,!1),this.guideY.node.style.visibility="visible",this.guideY.redraw()):this.guideY.node.style.visibility="hidden"}return s},mxGuide.prototype.getDelta=function(t,e,n,i,l){var s=this.graph.view.scale;return new mxPoint(n=this.rounded||null!=e&&null==e.cell?Math.round((t.x+n)/s)*s-t.x:n,l=this.rounded||null!=i&&null==i.cell?Math.round((t.y+l)/s)*s-t.y:l)},mxGuide.prototype.getGuideColor=function(t,e){return mxConstants.GUIDE_COLOR},mxGuide.prototype.hide=function(){this.setVisible(!1)},mxGuide.prototype.setVisible=function(t){null!=this.guideX&&(this.guideX.node.style.visibility=t?"visible":"hidden"),null!=this.guideY&&(this.guideY.node.style.visibility=t?"visible":"hidden")},mxGuide.prototype.destroy=function(){null!=this.guideX&&(this.guideX.destroy(),this.guideX=null),null!=this.guideY&&(this.guideY.destroy(),this.guideY=null)},mxShape.prototype.dialect=null,mxShape.prototype.scale=1,mxShape.prototype.antiAlias=!0,mxShape.prototype.minSvgStrokeWidth=1,mxShape.prototype.bounds=null,mxShape.prototype.points=null,mxShape.prototype.node=null,mxShape.prototype.state=null,mxShape.prototype.style=null,mxShape.prototype.boundingBox=null,mxShape.prototype.stencil=null,mxShape.prototype.svgStrokeTolerance=8,mxShape.prototype.pointerEvents=!0,mxShape.prototype.svgPointerEvents="all",mxShape.prototype.shapePointerEvents=!1,mxShape.prototype.stencilPointerEvents=!1,mxShape.prototype.outline=!1,mxShape.prototype.visible=!0,mxShape.prototype.useSvgBoundingBox=!1,mxShape.prototype.init=function(t){null==this.node&&(this.node=this.create(t),null!=t)&&t.appendChild(this.node)},mxShape.prototype.initStyles=function(t){this.strokewidth=1,this.rotation=0,this.strokeOpacity=this.fillOpacity=this.opacity=100,this.flipV=this.flipH=!1},mxShape.prototype.isHtmlAllowed=function(){return!1},mxShape.prototype.getSvgScreenOffset=function(){return 1==mxUtils.mod(Math.max(1,Math.round((this.stencil&&"inherit"!=this.stencil.strokewidth?Number(this.stencil.strokewidth):this.strokewidth)*this.scale)),2)?.5:0},mxShape.prototype.create=function(t){return null!=t&&null!=t.ownerSVGElement?this.createSvg(t):this.createHtml(t)},mxShape.prototype.createSvg=function(){return document.createElementNS(mxConstants.NS_SVG,"g")},mxShape.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t},mxShape.prototype.reconfigure=function(){this.redraw()},mxShape.prototype.redraw=function(){this.updateBoundsFromPoints(),this.visible&&this.checkBounds()?(this.node.style.visibility="visible",this.clear(),"DIV"==this.node.nodeName?this.redrawHtmlShape():this.redrawShape(),this.updateBoundingBox()):(this.node.style.visibility="hidden",this.boundingBox=null)},mxShape.prototype.clear=function(){if(null!=this.node.ownerSVGElement)for(;null!=this.node.lastChild;)this.node.removeChild(this.node.lastChild);else this.node.style.cssText="position:absolute;"+(null!=this.cursor?"cursor:"+this.cursor+";":""),this.node.innerHTML=""},mxShape.prototype.updateBoundsFromPoints=function(){var t=this.points;if(null!=t&&0<t.length&&null!=t[0]){this.bounds=new mxRectangle(Number(t[0].x),Number(t[0].y),1,1);for(var e=1;e<this.points.length;e++)null!=t[e]&&this.bounds.add(new mxRectangle(Number(t[e].x),Number(t[e].y),1,1))}},mxShape.prototype.getLabelBounds=function(t){var e,n,i=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),l=t;return i!=mxConstants.DIRECTION_SOUTH&&i!=mxConstants.DIRECTION_NORTH&&null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(i=(l=l.clone()).width,l.width=l.height,l.height=i),null!=(l=this.getLabelMargins(l))?(e="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,!1),n="1"==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,!1),null!=this.state&&null!=this.state.text&&this.state.text.isPaintBoundsInverted()&&(i=l.x,l.x=l.height,l.height=l.width,l.width=l.y,l.y=i,i=e,e=n,n=i),mxUtils.getDirectedBounds(t,l,this.style,e,n)):t},mxShape.prototype.getLabelMargins=function(t){return null},mxShape.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)&&0<this.bounds.width&&0<this.bounds.height},mxShape.prototype.redrawShape=function(){var t=this.createCanvas();null!=t&&(t.pointerEvents=this.pointerEvents,this.beforePaint(t),this.paint(t),this.afterPaint(t),this.node!=t.root&&this.node.insertAdjacentHTML("beforeend",t.root.outerHTML),"DIV"==this.node.nodeName&&8==document.documentMode&&(this.node.style.filter="",mxUtils.addTransparentBackgroundFilter(this.node)),this.destroyCanvas(t))},mxShape.prototype.createCanvas=function(){var t=null;return null!=(t=null!=this.node.ownerSVGElement?this.createSvgCanvas():t)&&this.outline&&(t.setStrokeWidth(this.strokewidth),t.setStrokeColor(this.stroke),null!=this.isDashed&&t.setDashed(this.isDashed),t.setStrokeWidth=function(){},t.setStrokeColor=function(){},t.setFillColor=function(){},t.setGradient=function(){},t.setDashed=function(){},t.text=function(){}),t},mxShape.prototype.createSvgCanvas=function(){var t=new mxSvgCanvas2D(this.node,!1),e=(t.strokeTolerance=this.pointerEvents?this.svgStrokeTolerance:0,t.pointerEventsValue=this.svgPointerEvents,this.getSvgScreenOffset());return 0!=e?this.node.setAttribute("transform","translate("+e+","+e+")"):this.node.removeAttribute("transform"),t.minStrokeWidth=this.minSvgStrokeWidth,this.antiAlias||(t.format=function(t){return Math.round(parseFloat(t))}),t},mxShape.prototype.redrawHtmlShape=function(){this.updateHtmlBounds(this.node),this.updateHtmlFilters(this.node),this.updateHtmlColors(this.node)},mxShape.prototype.updateHtmlFilters=function(t){var e,n,i,l,s,o="";this.opacity<100&&(o+="alpha(opacity="+this.opacity+")"),this.isShadow&&(o+="progid:DXImageTransform.Microsoft.dropShadow (OffX='"+Math.round(mxConstants.SHADOW_OFFSET_X*this.scale)+"', OffY='"+Math.round(mxConstants.SHADOW_OFFSET_Y*this.scale)+"', Color='"+mxConstants.VML_SHADOWCOLOR+"')"),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE&&(e=this.fill,n=this.gradient,i="0",l={east:0,south:1,west:2,north:3},s=null!=this.direction?l[this.direction]:0,1==(s=null!=this.gradientDirection?mxUtils.mod(s+l[this.gradientDirection]-1,4):s)?(i="1",l=e,e=n,n=l):2==s?(l=e,e=n,n=l):3==s&&(i="1"),o+="progid:DXImageTransform.Microsoft.gradient(startColorStr='"+e+"', endColorStr='"+n+"', gradientType='"+i+"')"),t.style.filter=o},mxShape.prototype.updateHtmlColors=function(t){var e=this.stroke;null!=e&&e!=mxConstants.NONE?(t.style.borderColor=e,this.isDashed?t.style.borderStyle="dashed":0<this.strokewidth&&(t.style.borderStyle="solid"),t.style.borderWidth=Math.max(1,Math.ceil(this.strokewidth*this.scale))+"px"):t.style.borderWidth="0px",null!=(e=this.outline?null:this.fill)&&e!=mxConstants.NONE?(t.style.backgroundColor=e,t.style.backgroundImage="none"):this.pointerEvents?t.style.backgroundColor="transparent":8==document.documentMode?mxUtils.addTransparentBackgroundFilter(t):this.setTransparentBackgroundImage(t)},mxShape.prototype.updateHtmlBounds=function(t){var e=9<=document.documentMode?0:Math.ceil(this.strokewidth*this.scale);t.style.borderWidth=Math.max(1,e)+"px",t.style.overflow="hidden",t.style.left=Math.round(this.bounds.x-e/2)+"px",t.style.top=Math.round(this.bounds.y-e/2)+"px","CSS1Compat"==document.compatMode&&(e=-e),t.style.width=Math.round(Math.max(0,this.bounds.width+e))+"px",t.style.height=Math.round(Math.max(0,this.bounds.height+e))+"px"},mxShape.prototype.destroyCanvas=function(t){if(t instanceof mxSvgCanvas2D){for(var e in t.gradients){e=t.gradients[e];null!=e&&(e.mxRefCount=(e.mxRefCount||0)+1)}this.releaseSvgGradients(this.oldGradients),this.oldGradients=t.gradients}},mxShape.prototype.beforePaint=function(t){},mxShape.prototype.afterPaint=function(t){},mxShape.prototype.paint=function(t){var e,n,i,l,s=!1,o=(null!=t&&this.outline&&(e=t.stroke,t.stroke=function(){s=!0,e.apply(this,arguments)},n=t.fillAndStroke,t.fillAndStroke=function(){s=!0,n.apply(this,arguments)}),this.scale),r=this.bounds.x/o,a=this.bounds.y/o,h=this.bounds.width/o,d=this.bounds.height/o;this.isPaintBoundsInverted()&&(r+=i=(h-d)/2,a-=i,i=h,h=d,d=i),this.updateTransform(t,r,a,h,d),this.configureCanvas(t,r,a,h,d),((i=null)==this.stencil&&null==this.points&&this.shapePointerEvents||null!=this.stencil&&this.stencilPointerEvents)&&(l=this.createBoundingBox(),this.dialect==mxConstants.DIALECT_SVG?(i=this.createTransparentSvgRectangle(l.x,l.y,l.width,l.height),this.node.appendChild(i)):((o=t.createRect("rect",l.x/o,l.y/o,l.width/o,l.height/o)).appendChild(t.createTransparentFill()),o.stroked="false",t.root.appendChild(o))),null!=this.stencil?this.stencil.drawShape(t,this,r,a,h,d):(t.setStrokeWidth(this.strokewidth),null!=(o=this.getWaypoints())?1<o.length&&this.paintEdgeShape(t,o):this.paintVertexShape(t,r,a,h,d)),null!=i&&null!=t.state&&null!=t.state.transform&&i.setAttribute("transform",t.state.transform),null!=t&&this.outline&&!s&&(t.rect(r,a,h,d),t.stroke())},mxShape.prototype.getWaypoints=function(){var t=this.points,e=null;if(null!=t&&(e=[],0<t.length)){var n=this.scale,i=Math.max(n,1),l=t[0];e.push(new mxPoint(l.x/n,l.y/n));for(var s=1;s<t.length;s++){var o=t[s];(Math.abs(l.x-o.x)>=i||Math.abs(l.y-o.y)>=i)&&e.push(new mxPoint(o.x/n,o.y/n)),l=o}}return e},mxShape.prototype.configureCanvas=function(t,e,n,i,l){var s=null;null!=this.style&&(s=this.style.dashPattern),t.setAlpha(this.opacity/100),t.setFillAlpha(this.fillOpacity/100),t.setStrokeAlpha(this.strokeOpacity/100),null!=this.isShadow&&t.setShadow(this.isShadow),null!=this.isDashed&&t.setDashed(this.isDashed,null!=this.style&&1==mxUtils.getValue(this.style,mxConstants.STYLE_FIX_DASH,!1)),null!=s&&t.setDashPattern(s),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(e=this.getGradientBounds(t,e,n,i,l),t.setGradient(this.fill,this.gradient,e.x,e.y,e.width,e.height,this.gradientDirection)):t.setFillColor(this.fill),t.setStrokeColor(this.stroke),null==this.style||null!=this.fill&&this.fill!=mxConstants.NONE||"0"!=mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")||(t.pointerEvents=!1)},mxShape.prototype.getGradientBounds=function(t,e,n,i,l){return new mxRectangle(e,n,i,l)},mxShape.prototype.updateTransform=function(t,e,n,i,l){t.scale(this.scale),t.rotate(this.getShapeRotation(),this.flipH,this.flipV,e+i/2,n+l/2)},mxShape.prototype.paintVertexShape=function(t,e,n,i,l){this.paintBackground(t,e,n,i,l),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(t.setShadow(!1),this.paintForeground(t,e,n,i,l))},mxShape.prototype.paintBackground=function(t,e,n,i,l){},mxShape.prototype.paintForeground=function(t,e,n,i,l){},mxShape.prototype.paintEdgeShape=function(t,e){},mxShape.prototype.getArcSize=function(t,e){var n="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(t/2,Math.min(e/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(n=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(t*n,e*n));return n},mxShape.prototype.paintGlassEffect=function(t,e,n,i,l,s){var o=Math.ceil(this.strokewidth/2);t.setGradient("#ffffff","#ffffff",e,n,i,.6*l,"south",.9,.1),t.begin(),s+=2*o,this.isRounded?(t.moveTo(e-o+s,n-o),t.quadTo(e-o,n-o,e-o,n-o+s),t.lineTo(e-o,n+.4*l),t.quadTo(e+.5*i,n+.7*l,e+i+o,n+.4*l),t.lineTo(e+i+o,n-o+s),t.quadTo(e+i+o,n-o,e+i+o-s,n-o)):(t.moveTo(e-o,n-o),t.lineTo(e-o,n+.4*l),t.quadTo(e+.5*i,n+.7*l,e+i+o,n+.4*l),t.lineTo(e+i+o,n-o)),t.close(),t.fill()},mxShape.prototype.addPoints=function(t,e,n,i,l,s,o){if(null!=e&&0<e.length){o=null==o||o;var r=e[e.length-1],a=(l&&n&&(h=(e=e.slice())[0],h=new mxPoint(r.x+(h.x-r.x)/2,r.y+(h.y-r.y)/2),e.splice(0,0,h)),e[0]),h=1;for(o?t.moveTo(a.x,a.y):t.lineTo(a.x,a.y);h<(l?e.length:e.length-1);){o=e[mxUtils.mod(h,e.length)];var d=a.x-o.x,a=a.y-o.y;if(n&&(0!=d||0!=a)&&(null==s||mxUtils.indexOf(s,h-1)<0)){var u=Math.sqrt(d*d+a*a);for(t.lineTo(o.x+d*Math.min(i,u/2)/u,o.y+a*Math.min(i,u/2)/u),a=e[mxUtils.mod(h+1,e.length)];h<e.length-2&&0==Math.round(a.x-o.x)&&0==Math.round(a.y-o.y);)a=e[mxUtils.mod(h+2,e.length)],h++;d=a.x-o.x,a=a.y-o.y,u=Math.max(1,Math.sqrt(d*d+a*a)),d=o.x+d*Math.min(i,u/2)/u,a=o.y+a*Math.min(i,u/2)/u,t.quadTo(o.x,o.y,d,a),o=new mxPoint(d,a)}else t.lineTo(o.x,o.y);a=o,h++}l?t.close():t.lineTo(r.x,r.y)}},mxShape.prototype.resetStyles=function(){this.initStyles(),this.spacing=0,delete this.fill,delete this.gradient,delete this.gradientDirection,delete this.stroke,delete this.startSize,delete this.endSize,delete this.startArrow,delete this.endArrow,delete this.direction,delete this.isShadow,delete this.isDashed,delete this.isRounded,delete this.glass},mxShape.prototype.apply=function(t){this.state=t,this.style=t.style,null!=this.style&&(this.fill=mxUtils.getValue(this.style,mxConstants.STYLE_FILLCOLOR,this.fill),this.gradient=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENTCOLOR,this.gradient),this.gradientDirection=mxUtils.getValue(this.style,mxConstants.STYLE_GRADIENT_DIRECTION,this.gradientDirection),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_OPACITY,this.opacity),this.fillOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_FILL_OPACITY,this.fillOpacity),this.strokeOpacity=mxUtils.getValue(this.style,mxConstants.STYLE_STROKE_OPACITY,this.strokeOpacity),this.stroke=mxUtils.getValue(this.style,mxConstants.STYLE_STROKECOLOR,this.stroke),this.strokewidth=mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth),this.spacing=mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing),this.startSize=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,this.startSize),this.endSize=mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,this.endSize),this.startArrow=mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,this.startArrow),this.endArrow=mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,this.endArrow),this.rotation=mxUtils.getValue(this.style,mxConstants.STYLE_ROTATION,this.rotation),this.direction=mxUtils.getValue(this.style,mxConstants.STYLE_DIRECTION,this.direction),this.flipH=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),this.flipV=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),null!=this.stencil&&(this.flipH=1==mxUtils.getValue(this.style,"stencilFlipH",0)||this.flipH,this.flipV=1==mxUtils.getValue(this.style,"stencilFlipV",0)||this.flipV),this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH||(t=this.flipH,this.flipH=this.flipV,this.flipV=t),this.isShadow=1==mxUtils.getValue(this.style,mxConstants.STYLE_SHADOW,this.isShadow),this.isDashed=1==mxUtils.getValue(this.style,mxConstants.STYLE_DASHED,this.isDashed),this.isRounded=1==mxUtils.getValue(this.style,mxConstants.STYLE_ROUNDED,this.isRounded),this.glass=1==mxUtils.getValue(this.style,mxConstants.STYLE_GLASS,this.glass),this.fill==mxConstants.NONE&&(this.fill=null),this.gradient==mxConstants.NONE&&(this.gradient=null),this.stroke==mxConstants.NONE)&&(this.stroke=null)},mxShape.prototype.setCursor=function(t){this.cursor=t=null==t?"":t,null!=this.node&&(this.node.style.cursor=t)},mxShape.prototype.getCursor=function(){return this.cursor},mxShape.prototype.isRoundable=function(){return!1},mxShape.prototype.updateBoundingBox=function(){if(this.useSvgBoundingBox&&null!=this.node&&null!=this.node.ownerSVGElement)try{var t=this.node.getBBox();if(0<t.width&&0<t.height)return this.boundingBox=new mxRectangle(t.x,t.y,t.width,t.height),void this.boundingBox.grow(this.strokewidth*this.scale/2)}catch(t){}var e;null!=this.bounds&&(null!=(t=this.createBoundingBox())&&(this.augmentBoundingBox(t),0!=(e=this.getShapeRotation()))&&(t=mxUtils.getBoundingBox(t,e)),this.boundingBox=t)},mxShape.prototype.createBoundingBox=function(){var t=this.bounds.clone();return(null==this.stencil||this.direction!=mxConstants.DIRECTION_NORTH&&this.direction!=mxConstants.DIRECTION_SOUTH)&&!this.isPaintBoundsInverted()||t.rotate90(),t},mxShape.prototype.augmentBoundingBox=function(t){this.isShadow&&(t.width+=Math.ceil(mxConstants.SHADOW_OFFSET_X*this.scale),t.height+=Math.ceil(mxConstants.SHADOW_OFFSET_Y*this.scale)),t.grow(this.strokewidth*this.scale/2)},mxShape.prototype.isPaintBoundsInverted=function(){return null==this.stencil&&(this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH)},mxShape.prototype.getRotation=function(){return null!=this.rotation?this.rotation:0},mxShape.prototype.getTextRotation=function(){var t=this.getRotation();return 1!=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)&&(t+=mxText.prototype.verticalTextRotation),t},mxShape.prototype.getShapeRotation=function(){var t=this.getRotation();return null!=this.direction&&(this.direction==mxConstants.DIRECTION_NORTH?t+=270:this.direction==mxConstants.DIRECTION_WEST?t+=180:this.direction==mxConstants.DIRECTION_SOUTH&&(t+=90)),t},mxShape.prototype.createTransparentSvgRectangle=function(t,e,n,i){var l=document.createElementNS(mxConstants.NS_SVG,"rect");return l.setAttribute("x",t),l.setAttribute("y",e),l.setAttribute("width",n),l.setAttribute("height",i),l.setAttribute("fill","none"),l.setAttribute("stroke","none"),l.setAttribute("pointer-events","all"),l},mxShape.prototype.setTransparentBackgroundImage=function(t){t.style.backgroundImage="url('"+mxClient.imageBasePath+"/transparent.gif')"},mxShape.prototype.releaseSvgGradients=function(t){if(null!=t)for(var e in t){e=t[e];null!=e&&(e.mxRefCount=(e.mxRefCount||0)-1,0==e.mxRefCount)&&null!=e.parentNode&&e.parentNode.removeChild(e)}},mxShape.prototype.destroy=function(){null!=this.node&&(mxEvent.release(this.node),null!=this.node.parentNode&&this.node.parentNode.removeChild(this.node),this.node=null),this.releaseSvgGradients(this.oldGradients),this.oldGradients=null},mxUtils.extend(mxStencil,mxShape),mxStencil.defaultLocalized=!1,mxStencil.allowEval=!1,mxStencil.prototype.desc=null,mxStencil.prototype.constraints=null,mxStencil.prototype.aspect=null,mxStencil.prototype.w0=null,mxStencil.prototype.h0=null,mxStencil.prototype.bgNode=null,mxStencil.prototype.fgNode=null,mxStencil.prototype.strokewidth=null,mxStencil.prototype.parseDescription=function(){this.fgNode=this.desc.getElementsByTagName("foreground")[0],this.bgNode=this.desc.getElementsByTagName("background")[0],this.w0=Number(this.desc.getAttribute("w")||100),this.h0=Number(this.desc.getAttribute("h")||100);var t=this.desc.getAttribute("aspect");this.aspect=null!=t?t:"variable",t=this.desc.getAttribute("strokewidth"),this.strokewidth=null!=t?t:"1"},mxStencil.prototype.parseConstraints=function(){var t=this.desc.getElementsByTagName("connections")[0];if(null!=t&&null!=(t=mxUtils.getChildNodes(t))&&0<t.length){this.constraints=[];for(var e=0;e<t.length;e++)this.constraints.push(this.parseConstraint(t[e]))}},mxStencil.prototype.parseConstraint=function(t){var e=Number(t.getAttribute("x")),n=Number(t.getAttribute("y")),i="1"==t.getAttribute("perimeter");return t=t.getAttribute("name"),new mxConnectionConstraint(new mxPoint(e,n),i,t)},mxStencil.prototype.evaluateTextAttribute=function(t,e,n){return e=this.evaluateAttribute(t,e,n),t=t.getAttribute("localized"),e=mxStencil.defaultLocalized&&null==t||"1"==t?mxResources.get(e):e},mxStencil.prototype.evaluateAttribute=function(t,e,n){return e=null==(e=t.getAttribute(e))&&null!=(t=mxUtils.getTextContent(t))&&mxStencil.allowEval&&"function"==typeof(t=mxUtils.eval(t))?t(n):e},mxStencil.prototype.drawShape=function(t,e,n,i,l,s){var o=t.states.slice(),r=mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,null),r=this.computeAspect(e.style,n,i,l,s,r),a=Math.min(r.width,r.height),a="inherit"==this.strokewidth?Number(mxUtils.getNumber(e.style,mxConstants.STYLE_STROKEWIDTH,1)):Number(this.strokewidth)*a;t.setStrokeWidth(a),null!=e.style&&"1"==mxUtils.getValue(e.style,mxConstants.STYLE_POINTER_EVENTS,"0")&&(t.setStrokeColor(mxConstants.NONE),t.rect(n,i,l,s),t.stroke(),t.setStrokeColor(e.stroke)),this.drawChildren(t,e,n,i,l,s,this.bgNode,r,!1,!0),this.drawChildren(t,e,n,i,l,s,this.fgNode,r,!0,!e.outline||null==e.style||0==mxUtils.getValue(e.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)),t.states.length!=o.length&&(t.states=o)},mxStencil.prototype.drawChildren=function(t,e,n,i,l,s,o,r,a,h){if(null!=o&&0<l&&0<s)for(n=o.firstChild;null!=n;)n.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(t,e,n,r,a,h),n=n.nextSibling},mxStencil.prototype.computeAspect=function(t,e,n,i,l,s){t=e,e=i/this.w0;var o,r=l/this.h0;return(s=s==mxConstants.DIRECTION_NORTH||s==mxConstants.DIRECTION_SOUTH)&&(r=i/this.h0,e=l/this.w0,t+=o=(i-l)/2,n-=o),"fixed"==this.aspect&&(e=r=Math.min(e,r),s?(t+=(l-this.w0*e)/2,n+=(i-this.h0*r)/2):(t+=(i-this.w0*e)/2,n+=(l-this.h0*r)/2)),new mxRectangle(t,n,e,r)},mxStencil.prototype.drawNode=function(t,e,n,i,l,s){var o=n.nodeName,r=i.x,a=i.y,h=i.width,d=i.height,u=Math.min(h,d);if("save"==o)t.save();else if("restore"==o)t.restore();else if(s){if("path"==o){if(t.begin(),u=!0,"1"==n.getAttribute("rounded")){for(var u=!1,p=Number(n.getAttribute("arcSize")),c=0,m=[],g=n.firstChild;null!=g;){if(g.nodeType==mxConstants.NODETYPE_ELEMENT){var x=g.nodeName;if("move"!=x&&"line"!=x){u=!0;break}"move"!=x&&0!=m.length||m.push([]),m[m.length-1].push(new mxPoint(r+Number(g.getAttribute("x"))*h,a+Number(g.getAttribute("y"))*d)),c++}g=g.nextSibling}if(!u&&0<c)for(h=0;h<m.length;h++)d=!1,a=m[h][0],r=m[h][m[h].length-1],a.x==r.x&&a.y==r.y&&(m[h].pop(),d=!0),this.addPoints(t,m[h],!0,p,d);else u=!0}if(u)for(g=n.firstChild;null!=g;)g.nodeType==mxConstants.NODETYPE_ELEMENT&&this.drawNode(t,e,g,i,l,s),g=g.nextSibling}else if("close"==o)t.close();else if("move"==o)t.moveTo(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d);else if("line"==o)t.lineTo(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d);else if("quad"==o)t.quadTo(r+Number(n.getAttribute("x1"))*h,a+Number(n.getAttribute("y1"))*d,r+Number(n.getAttribute("x2"))*h,a+Number(n.getAttribute("y2"))*d);else if("curve"==o)t.curveTo(r+Number(n.getAttribute("x1"))*h,a+Number(n.getAttribute("y1"))*d,r+Number(n.getAttribute("x2"))*h,a+Number(n.getAttribute("y2"))*d,r+Number(n.getAttribute("x3"))*h,a+Number(n.getAttribute("y3"))*d);else if("arc"==o)t.arcTo(Number(n.getAttribute("rx"))*h,Number(n.getAttribute("ry"))*d,Number(n.getAttribute("x-axis-rotation")),Number(n.getAttribute("large-arc-flag")),Number(n.getAttribute("sweep-flag")),r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d);else if("rect"==o)t.rect(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*d);else if("roundrect"==o)0==(e=Number(n.getAttribute("arcsize")))&&(e=100*mxConstants.RECTANGLE_ROUNDING_FACTOR),i=Number(n.getAttribute("w"))*h,s=Number(n.getAttribute("h"))*d,e=Number(e)/100,e=Math.min(i*e,s*e),t.roundrect(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d,i,s,e,e);else if("ellipse"==o)t.ellipse(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*d);else if("image"==o)e.outline||(e=this.evaluateAttribute(n,"src",e),t.image(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d,Number(n.getAttribute("w"))*h,Number(n.getAttribute("h"))*d,e,!1,"1"==n.getAttribute("flipH"),"1"==n.getAttribute("flipV")));else if("text"==o)e.outline||(i=this.evaluateTextAttribute(n,"str",e),s="1"==n.getAttribute("vertical")?-90:0,"0"==n.getAttribute("align-shape")&&(u=e.rotation,p=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPH,0),e=1==mxUtils.getValue(e.style,mxConstants.STYLE_FLIPV,0),s=(!p||!e)&&(p||e)?s+u:s-u),s-=n.getAttribute("rotation"),t.text(r+Number(n.getAttribute("x"))*h,a+Number(n.getAttribute("y"))*d,0,0,i,n.getAttribute("align")||"left",n.getAttribute("valign")||"top",!1,"",null,!1,s));else if("include-shape"==o)null!=(u=mxStencilRegistry.getStencil(n.getAttribute("name")))&&(r+=Number(n.getAttribute("x"))*h,a+=Number(n.getAttribute("y"))*d,i=Number(n.getAttribute("w"))*h,s=Number(n.getAttribute("h"))*d,u.drawShape(t,e,r,a,i,s));else if("fillstroke"==o)t.fillAndStroke();else if("fill"==o)t.fill();else if("stroke"==o)t.stroke();else if("strokewidth"==o)h="1"==n.getAttribute("fixed")?1:u,t.setStrokeWidth(Number(n.getAttribute("width"))*h);else if("dashed"==o)t.setDashed("1"==n.getAttribute("dashed"));else if("dashpattern"==o){if(null!=(n=n.getAttribute("pattern"))){for(n=n.split(" "),d=[],h=0;h<n.length;h++)0<n[h].length&&d.push(Number(n[h])*u);n=d.join(" "),t.setDashPattern(n)}}else"strokecolor"==o?t.setStrokeColor(n.getAttribute("color")):"linecap"==o?t.setLineCap(n.getAttribute("cap")):"linejoin"==o?t.setLineJoin(n.getAttribute("join")):"miterlimit"==o?t.setMiterLimit(Number(n.getAttribute("limit"))):"fillcolor"==o?t.setFillColor(n.getAttribute("color")):"alpha"==o||"fillalpha"==o||"strokealpha"==o?t.setAlpha(n.getAttribute("alpha")):"fontcolor"==o?t.setFontColor(n.getAttribute("color")):"fontstyle"==o?t.setFontStyle(n.getAttribute("style")):"fontfamily"==o?t.setFontFamily(n.getAttribute("family")):"fontsize"==o&&t.setFontSize(Number(n.getAttribute("size"))*u);!l||"fillstroke"!=o&&"fill"!=o&&"stroke"!=o||t.setShadow(!1)}};var mxStencilRegistry={stencils:{},addStencil:function(t,e){mxStencilRegistry.stencils[t]=e},getStencil:function(t){return mxStencilRegistry.stencils[t]}},mxMarker={markers:[],addMarker:function(t,e){mxMarker.markers[t]=e},createMarker:function(t,e,n,i,l,s,o,r,a,h){var d=mxMarker.markers[n];return null!=d?d(t,e,n,i,l,s,o,r,a,h):null}};function mxActor(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxCloud(t,e,n,i){mxActor.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxRectangleShape(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxEllipse(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxDoubleEllipse(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxRhombus(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxPolyline(t,e,n){mxShape.call(this),this.points=t,this.stroke=e,this.strokewidth=null!=n?n:1}function mxArrow(t,e,n,i,l,s,o){mxShape.call(this),this.points=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.spacing=null!=s?s:mxConstants.ARROW_SPACING,this.endSize=null!=o?o:mxConstants.ARROW_SIZE}function mxArrowConnector(t,e,n,i,l,s,o){mxShape.call(this),this.points=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1,this.arrowWidth=null!=l?l:mxConstants.ARROW_WIDTH,this.arrowSpacing=null!=s?s:mxConstants.ARROW_SPACING,this.startSize=mxConstants.ARROW_SIZE/5,this.endSize=mxConstants.ARROW_SIZE/5}function mxText(t,e,n,i,l,s,o,r,a,h,d,u,p,c,m,g,x,y,f,C,E){mxShape.call(this),this.value=t,this.bounds=e,this.color=null!=l?l:"black",this.align=null!=n?n:mxConstants.ALIGN_CENTER,this.valign=null!=i?i:mxConstants.ALIGN_MIDDLE,this.family=null!=s?s:mxConstants.DEFAULT_FONTFAMILY,this.size=null!=o?o:mxConstants.DEFAULT_FONTSIZE,this.fontStyle=null!=r?r:mxConstants.DEFAULT_FONTSTYLE,this.spacing=parseInt(a||2),this.spacingTop=this.spacing+parseInt(h||0),this.spacingRight=this.spacing+parseInt(d||0),this.spacingBottom=this.spacing+parseInt(u||0),this.spacingLeft=this.spacing+parseInt(p||0),this.horizontal=null==c||c,this.background=m,this.border=g,this.wrap=null!=x&&x,this.clipped=null!=y&&y,this.overflow=null!=f?f:"visible",this.labelPadding=null!=C?C:0,this.textDirection=E,this.rotation=0,this.updateMargin()}function mxTriangle(){mxActor.call(this)}function mxHexagon(){mxActor.call(this)}function mxLine(t,e,n,i){mxShape.call(this),this.bounds=t,this.stroke=e,this.strokewidth=null!=n?n:1,this.vertical=null!=i?i:this.vertical}function mxImageShape(t,e,n,i,l){mxShape.call(this),this.bounds=t,this.image=e,this.fill=n,this.stroke=i,this.strokewidth=null!=l?l:1,this.shadow=!1}function mxLabel(t,e,n,i){mxRectangleShape.call(this,t,e,n,i)}function mxCylinder(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxConnector(t,e,n){mxPolyline.call(this,t,e,n)}function mxSwimlane(t,e,n,i){mxShape.call(this),this.bounds=t,this.fill=e,this.stroke=n,this.strokewidth=null!=i?i:1}function mxGraphLayout(t){this.graph=t}function WeightedCellSorter(t,e){this.cell=t,this.weightedValue=e}function mxStackLayout(t,e,n,i,l,s){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.spacing=null!=n?n:0,this.x0=null!=i?i:0,this.y0=null!=l?l:0,this.border=null!=s?s:0}function mxPartitionLayout(t,e,n,i){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.spacing=n||0,this.border=i||0}function mxCompactTreeLayout(t,e,n){mxGraphLayout.call(this,t),this.horizontal=null==e||e,this.invert=null!=n&&n}function mxRadialTreeLayout(t){mxCompactTreeLayout.call(this,t,!1)}function mxFastOrganicLayout(t){mxGraphLayout.call(this,t)}function mxCircleLayout(t,e){mxGraphLayout.call(this,t),this.radius=null!=e?e:100}function mxParallelEdgeLayout(t){mxGraphLayout.call(this,t)}function mxCompositeLayout(t,e,n){mxGraphLayout.call(this,t),this.layouts=e,this.master=n}function mxEdgeLabelLayout(t,e){mxGraphLayout.call(this,t)}function mxGraphAbstractHierarchyCell(){this.x=[],this.y=[],this.temp=[]}function mxGraphHierarchyNode(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.cell=t,this.id=mxObjectIdentity.get(t),this.connectsAsTarget=[],this.connectsAsSource=[]}function mxGraphHierarchyEdge(t){mxGraphAbstractHierarchyCell.apply(this,arguments),this.edges=t,this.ids=[];for(var e=0;e<t.length;e++)this.ids.push(mxObjectIdentity.get(t[e]))}function mxGraphHierarchyModel(t,e,n,i,l){for(t.getGraph(),this.tightenToSource=l,this.roots=n,this.parent=i,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0,n=[],null==e&&(e=this.graph.getChildVertices(i)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(t,e,n),i=0;i<e.length;i++){l=n[i].connectsAsSource;for(var s=0;s<l.length;s++){var o,r=l[s],a=r.edges;null!=a&&0<a.length&&(a=a[0],o=t.getVisibleTerminal(a,!1),o=this.vertexMapper.get(o),n[i]==o&&(o=t.getVisibleTerminal(a,!0),o=this.vertexMapper.get(o)),null!=o)&&n[i]!=o&&(0==(r.target=o).connectsAsTarget.length&&(o.connectsAsTarget=[]),mxUtils.indexOf(o.connectsAsTarget,r)<0)&&o.connectsAsTarget.push(r)}n[i].temp[0]=1}}function mxSwimlaneModel(t,e,n,i,l){for(t.getGraph(),this.tightenToSource=l,this.roots=n,this.parent=i,this.vertexMapper=new mxDictionary,this.edgeMapper=new mxDictionary,this.maxRank=0,n=[],null==e&&(e=this.graph.getChildVertices(i)),this.maxRank=this.SOURCESCANSTARTRANK,this.createInternalCells(t,e,n),i=0;i<e.length;i++){l=n[i].connectsAsSource;for(var s=0;s<l.length;s++){var o,r=l[s],a=r.edges;null!=a&&0<a.length&&(a=a[0],o=t.getVisibleTerminal(a,!1),o=this.vertexMapper.get(o),n[i]==o&&(o=t.getVisibleTerminal(a,!0),o=this.vertexMapper.get(o)),null!=o)&&n[i]!=o&&(0==(r.target=o).connectsAsTarget.length&&(o.connectsAsTarget=[]),mxUtils.indexOf(o.connectsAsTarget,r)<0)&&o.connectsAsTarget.push(r)}n[i].temp[0]=1}}function mxHierarchicalLayoutStage(){}function mxMedianHybridCrossingReduction(t){this.layout=t}function MedianCellSorter(){}function mxMinimumCycleRemover(t){this.layout=t}function mxCoordinateAssignment(t,e,n,i,l,s){this.layout=t,this.intraCellSpacing=e,this.interRankCellSpacing=n,this.orientation=i,this.initialX=l,this.parallelEdgeSpacing=s}function mxSwimlaneOrdering(t){this.layout=t}function mxHierarchicalLayout(t,e,n){mxGraphLayout.call(this,t),this.orientation=null!=e?e:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}!function(){function t(u){return u=null!=u?u:2,function(t,e,n,i,l,s,o,r,a,h){e=l*a*1.118,r=s*a*1.118,l*=o+a,s*=o+a;var d=i.clone();return d.x-=e,d.y-=r,o=n!=mxConstants.ARROW_CLASSIC&&n!=mxConstants.ARROW_CLASSIC_THIN?1:.75,i.x+=-l*o-e,i.y+=-s*o-r,function(){t.begin(),t.moveTo(d.x,d.y),t.lineTo(d.x-l-s/u,d.y-s+l/u),n!=mxConstants.ARROW_CLASSIC&&n!=mxConstants.ARROW_CLASSIC_THIN||t.lineTo(d.x-3*l/4,d.y-3*s/4),t.lineTo(d.x+s/u-l,d.y-s-l/u),t.close(),h?t.fillAndStroke():t.stroke()}}}function e(u){return u=null!=u?u:2,function(t,e,n,i,l,s,o,r,a,h){e=l*a*1.118,n=s*a*1.118,l*=o+a,s*=o+a;var d=i.clone();return d.x-=e,d.y-=n,i.x+=2*-e,i.y+=2*-n,function(){t.begin(),t.moveTo(d.x-l-s/u,d.y-s+l/u),t.lineTo(d.x,d.y),t.lineTo(d.x+s/u-l,d.y-s-l/u),t.stroke()}}}function n(t,e,n,i,l,s,o,r,a,h){r=n==mxConstants.ARROW_DIAMOND?.7071:.9862,e=l*a*r,r*=s*a,l*=o+a,s*=o+a;var d=i.clone(),u=(d.x-=e,d.y-=r,i.x+=-l-e,i.y+=-s-r,n==mxConstants.ARROW_DIAMOND?2:3.4);return function(){t.begin(),t.moveTo(d.x,d.y),t.lineTo(d.x-l/2-s/u,d.y+l/u-s/2),t.lineTo(d.x-l,d.y-s),t.lineTo(d.x-l/2+s/u,d.y-s/2-l/u),t.close(),h?t.fillAndStroke():t.stroke()}}mxMarker.addMarker("classic",t(2)),mxMarker.addMarker("classicThin",t(3)),mxMarker.addMarker("block",t(2)),mxMarker.addMarker("blockThin",t(3)),mxMarker.addMarker("open",e(2)),mxMarker.addMarker("openThin",e(3)),mxMarker.addMarker("oval",function(t,e,n,i,l,s,o,r,a,h){var d=o/2,u=i.clone();return i.x-=l*d,i.y-=s*d,function(){t.ellipse(u.x-d,u.y-d,o,o),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("diamond",n),mxMarker.addMarker("diamondThin",n)}(),mxUtils.extend(mxActor,mxShape),mxActor.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),this.redrawPath(t,e,n,i,l),t.fillAndStroke()},mxActor.prototype.redrawPath=function(t,e,n,i,l){e=i/3,t.moveTo(0,l),t.curveTo(0,3*l/5,0,2*l/5,i/2,2*l/5),t.curveTo(i/2-e,2*l/5,i/2-e,0,i/2,0),t.curveTo(i/2+e,0,i/2+e,2*l/5,i/2,2*l/5),t.curveTo(i,2*l/5,i,3*l/5,i,l),t.close()},mxUtils.extend(mxCloud,mxActor),mxCloud.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(.25*i,.25*l),t.curveTo(.05*i,.25*l,0,.5*l,.16*i,.55*l),t.curveTo(0,.66*l,.18*i,.9*l,.31*i,.8*l),t.curveTo(.4*i,l,.7*i,l,.8*i,.8*l),t.curveTo(i,.8*l,i,.6*l,.875*i,.5*l),t.curveTo(i,.3*l,.8*i,.1*l,.625*i,.2*l),t.curveTo(.5*i,.05*l,.3*i,.05*l,.25*i,.25*l),t.close()},mxUtils.extend(mxRectangleShape,mxShape),mxRectangleShape.prototype.isHtmlAllowed=function(){var t=!0;return null!=this.style&&(t="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),!this.isRounded&&!this.glass&&0==this.rotation&&(t||null!=this.fill&&this.fill!=mxConstants.NONE)},mxRectangleShape.prototype.paintBackground=function(t,e,n,i,l){var s=!0;((s=null!=this.style?"1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"):s)||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE)&&(this.isRounded?(s="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(i/2,Math.min(l/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(i*s,l*s)),t.roundrect(e,n,i,l,s,s)):t.rect(e,n,i,l),t.fillAndStroke())},mxRectangleShape.prototype.isRoundable=function(t,e,n,i,l){return!0},mxRectangleShape.prototype.paintForeground=function(t,e,n,i,l){this.glass&&!this.outline&&null!=this.fill&&this.fill!=mxConstants.NONE&&this.paintGlassEffect(t,e,n,i,l,this.getArcSize(i+this.strokewidth,l+this.strokewidth))},mxUtils.extend(mxEllipse,mxShape),mxEllipse.prototype.paintVertexShape=function(t,e,n,i,l){t.ellipse(e,n,i,l),t.fillAndStroke()},mxUtils.extend(mxDoubleEllipse,mxShape),mxDoubleEllipse.prototype.paintBackground=function(t,e,n,i,l){t.ellipse(e,n,i,l),t.fillAndStroke()},mxDoubleEllipse.prototype.paintForeground=function(t,e,n,i,l){var s;this.outline||(l-=2*(s=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(i/5,l/5)))),0<(i-=2*s)&&0<l&&t.ellipse(e+s,n+s,i,l),t.stroke())},mxDoubleEllipse.prototype.getLabelBounds=function(t){var e=mxUtils.getValue(this.style,mxConstants.STYLE_MARGIN,Math.min(3+this.strokewidth,Math.min(t.width/5/this.scale,t.height/5/this.scale)))*this.scale;return new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)},mxUtils.extend(mxRhombus,mxShape),mxRhombus.prototype.isRoundable=function(){return!0},mxRhombus.prototype.paintVertexShape=function(t,e,n,i,l){var s=i/2,o=l/2,r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,[new mxPoint(e+s,n),new mxPoint(e+i,n+o),new mxPoint(e+s,n+l),new mxPoint(e,n+o)],this.isRounded,r,!0),t.fillAndStroke()},mxUtils.extend(mxPolyline,mxShape),mxPolyline.prototype.getRotation=function(){return 0},mxPolyline.prototype.getShapeRotation=function(){return 0},mxPolyline.prototype.isPaintBoundsInverted=function(){return!1},mxPolyline.prototype.paintEdgeShape=function(t,e){var n=t.pointerEventsValue;t.pointerEventsValue="stroke",null==this.style||1!=this.style[mxConstants.STYLE_CURVED]?this.paintLine(t,e,this.isRounded):this.paintCurvedLine(t,e),t.pointerEventsValue=n},mxPolyline.prototype.paintLine=function(t,e,n){var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,e,n,i,!1),t.stroke()},mxPolyline.prototype.paintCurvedLine=function(t,e){t.begin();var n=e[0],i=e.length;for(t.moveTo(n.x,n.y),n=1;n<i-2;n++){var l=e[n],s=e[n+1];t.quadTo(l.x,l.y,(l.x+s.x)/2,(l.y+s.y)/2)}l=e[i-2],s=e[i-1],t.quadTo(l.x,l.y,s.x,s.y),t.stroke()},mxUtils.extend(mxArrow,mxShape),mxArrow.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments),t.grow((Math.max(this.arrowWidth,this.endSize)/2+this.strokewidth)*this.scale)},mxArrow.prototype.paintEdgeShape=function(t,e){var n=mxConstants.ARROW_SPACING,i=mxConstants.ARROW_WIDTH,l=e[0],e=e[e.length-1],s=e.x-l.x,o=e.y-l.y,r=Math.sqrt(s*s+o*o),a=r-2*n-mxConstants.ARROW_SIZE,s=s/r,h=l.x-(r=i*(o=o/r)/3)/2+n*s,d=h+r,u=(l=l.y-(i=-i*s/3)/2+n*o)+i,p=d+a*s,c=p+r,m=(a=u+a*o)+i,g=c-3*r,x=m-3*i;t.begin(),t.moveTo(h,l),t.lineTo(d,u),t.lineTo(p,a),t.lineTo(c,m),t.lineTo(e.x-n*s,e.y-n*o),t.lineTo(g,x),t.lineTo(g+r,x+i),t.close(),t.fillAndStroke()},mxUtils.extend(mxArrowConnector,mxShape),mxArrowConnector.prototype.useSvgBoundingBox=!0,mxArrowConnector.prototype.isRoundable=function(){return!0},mxArrowConnector.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.arrowSpacing=mxConstants.ARROW_SPACING},mxArrowConnector.prototype.apply=function(t){mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.startSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5),this.endSize=3*mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5))},mxArrowConnector.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var e=this.getEdgeWidth();this.isMarkerStart()&&(e=Math.max(e,this.getStartArrowWidth())),this.isMarkerEnd()&&(e=Math.max(e,this.getEndArrowWidth())),t.grow((e/2+this.strokewidth)*this.scale)},mxArrowConnector.prototype.paintEdgeShape=function(o,t){var e=this.strokewidth,n=(this.outline&&(e=Math.max(1,mxUtils.getNumber(this.style,mxConstants.STYLE_STROKEWIDTH,this.strokewidth))),this.getStartArrowWidth()+e),i=this.getEndArrowWidth()+e,r=this.outline?this.getEdgeWidth()+e:this.getEdgeWidth(),l=this.isOpenEnded(),s=this.isMarkerStart(),a=this.isMarkerEnd(),h=l?0:this.arrowSpacing+e/2,d=this.startSize+e,e=this.endSize+e,u=this.isArrowRounded(),p=t[t.length-1],c=t[1].x-t[0].x,m=t[1].y-t[0].y;if(0!=(b=Math.sqrt(c*c+m*m))){var g,x,y,f,C=c/b,E=C,v=m/b,S=v,b=r*v,w=-r*C,T=[];u?o.setLineJoin("round"):2<t.length&&o.setMiterLimit(1.42),o.begin(),c=C,m=v,s&&!l?this.paintMarker(o,t[0].x,t[0].y,C,v,d,n,r,h,!0):(g=t[0].x+b/2+h*C,x=t[0].y+w/2+h*v,y=t[0].x-b/2+h*C,f=t[0].y-w/2+h*v,l?(o.moveTo(g,x),T.push(function(){o.lineTo(y,f)})):(o.moveTo(y,f),o.lineTo(g,x)));for(var A,L,M=x=g=0,b=0;b<t.length-2;b++){var R,I,P,w=mxUtils.relativeCcw(t[b].x,t[b].y,t[b+1].x,t[b+1].y,t[b+2].x,t[b+2].y);g=t[b+2].x-t[b+1].x,x=t[b+2].y-t[b+1].y,0!=(M=Math.sqrt(g*g+x*x))&&(E=g/M,S=x/M,M=Math.max(Math.sqrt((C*E+v*S+1)/2),.04),g=C+E,x=v+S,0!=(R=Math.sqrt(g*g+x*x)))&&(g/=R,x/=R,R=Math.max(M,Math.min(this.strokewidth/200+.04,.35)),M=0!=w&&u?Math.max(.1,R):Math.max(M,.06),I=t[b+1].x+x*r/2/M,P=t[b+1].y-g*r/2/M,x=t[b+1].x-x*r/2/M,g=t[b+1].y+g*r/2/M,(0!=w&&u?-1==w?(w=x+S*r,M=g-E*r,o.lineTo(x+v*r,g-C*r),o.quadTo(I,P,w,M),function(t,e){T.push(function(){o.lineTo(t,e)})}):(o.lineTo(I,P),function(t,e){var n=I-v*r,i=P+C*r,l=I-S*r,s=P+E*r;T.push(function(){o.quadTo(t,e,n,i)}),T.push(function(){o.lineTo(l,s)})}):(o.lineTo(I,P),function(t,e){T.push(function(){o.lineTo(t,e)})}))(x,g),C=E,v=S)}for(b=r*S,w=-r*E,a&&!l?this.paintMarker(o,p.x,p.y,-C,-v,e,i,r,h,!1):(o.lineTo(p.x-h*E+b/2,p.y-h*S+w/2),A=p.x-h*E-b/2,L=p.y-h*S-w/2,l?(o.moveTo(A,L),T.splice(0,0,function(){o.moveTo(A,L)})):o.lineTo(A,L)),b=T.length-1;0<=b;b--)T[b]();l?(o.end(),o.stroke()):(o.close(),o.fillAndStroke()),o.setShadow(!1),o.setMiterLimit(4),u&&o.setLineJoin("flat"),2<t.length&&(o.setMiterLimit(4),s&&!l&&(o.begin(),this.paintMarker(o,t[0].x,t[0].y,c,m,d,n,r,h,!0),o.stroke(),o.end()),a)&&!l&&(o.begin(),this.paintMarker(o,p.x,p.y,-C,-v,e,i,r,h,!0),o.stroke(),o.end())}},mxArrowConnector.prototype.paintMarker=function(t,e,n,i,l,s,o,r,a,h){o=r/o;var d=r*l/2,u=(r=-r*i/2,(a+s)*i);s=(a+s)*l,h?t.moveTo(e-d+u,n-r+s):t.lineTo(e-d+u,n-r+s),t.lineTo(e-d/o+u,n-r/o+s),t.lineTo(e+a*i,n+a*l),t.lineTo(e+d/o+u,n+r/o+s),t.lineTo(e+d+u,n+r+s)},mxArrowConnector.prototype.isArrowRounded=function(){return this.isRounded},mxArrowConnector.prototype.getStartArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEndArrowWidth=function(){return mxConstants.ARROW_WIDTH},mxArrowConnector.prototype.getEdgeWidth=function(){return mxConstants.ARROW_WIDTH/3},mxArrowConnector.prototype.isOpenEnded=function(){return!1},mxArrowConnector.prototype.isMarkerStart=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE},mxArrowConnector.prototype.isMarkerEnd=function(){return mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE},mxUtils.extend(mxText,mxShape),mxText.prototype.baseSpacingTop=0,mxText.prototype.baseSpacingBottom=0,mxText.prototype.baseSpacingLeft=0,mxText.prototype.baseSpacingRight=0,mxText.prototype.replaceLinefeeds=!0,mxText.prototype.verticalTextRotation=-90,mxText.prototype.ignoreClippedStringSize=!0,mxText.prototype.ignoreStringSize=!1,mxText.prototype.textWidthPadding=8!=document.documentMode||mxClient.IS_EM?3:4,mxText.prototype.lastValue=null,mxText.prototype.cacheEnabled=!0,mxText.prototype.isHtmlAllowed=function(){return 8!=document.documentMode||mxClient.IS_EM},mxText.prototype.getSvgScreenOffset=function(){return 0},mxText.prototype.checkBounds=function(){return!isNaN(this.scale)&&isFinite(this.scale)&&0<this.scale&&null!=this.bounds&&!isNaN(this.bounds.x)&&!isNaN(this.bounds.y)&&!isNaN(this.bounds.width)&&!isNaN(this.bounds.height)},mxText.prototype.paint=function(t,e){var n,i,l,s=this.scale,o=this.bounds.x/s,r=this.bounds.y/s,a=this.bounds.width/s,s=this.bounds.height/s;this.updateTransform(t,o,r,a,s),this.configureCanvas(t,o,r,a,s),e?t.updateText(o,r,a,s,this.align,this.valign,this.wrap,this.overflow,this.clipped,this.getTextRotation(),this.node):(n=(e=mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML)?"html":"",i=this.value,e||"html"!=n||(i=mxUtils.htmlEntities(i,!1)),"html"!=n||mxUtils.isNode(this.value)||(i=mxUtils.replaceTrailingNewlines(i,"<div><br></div>")),i=!mxUtils.isNode(this.value)&&this.replaceLinefeeds&&"html"==n?i.replace(/\n/g,"<br/>"):i,(l=(l=this.textDirection)!=mxConstants.TEXT_DIRECTION_AUTO||e?l:this.getAutoDirection())!=mxConstants.TEXT_DIRECTION_LTR&&l!=mxConstants.TEXT_DIRECTION_RTL&&(l=null),t.text(o,r,a,s,i,this.align,this.valign,this.wrap,n,this.overflow,this.clipped,this.getTextRotation(),l))},mxText.prototype.redraw=function(){var t;this.visible&&this.checkBounds()&&this.cacheEnabled&&this.lastValue==this.value&&(mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML)?"DIV"==this.node.nodeName?(mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():(this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform()),this.updateBoundingBox()):null!=(t=this.createCanvas())&&null!=t.updateText?(t.pointerEvents=this.pointerEvents,this.paint(t,!0),this.destroyCanvas(t),this.updateBoundingBox()):mxShape.prototype.redraw.apply(this,arguments):(mxShape.prototype.redraw.apply(this,arguments),mxUtils.isNode(this.value)||this.dialect==mxConstants.DIALECT_STRICTHTML?this.lastValue=this.value:this.lastValue=null)},mxText.prototype.resetStyles=function(){mxShape.prototype.resetStyles.apply(this,arguments),this.color="black",this.align=mxConstants.ALIGN_CENTER,this.valign=mxConstants.ALIGN_MIDDLE,this.family=mxConstants.DEFAULT_FONTFAMILY,this.size=mxConstants.DEFAULT_FONTSIZE,this.fontStyle=mxConstants.DEFAULT_FONTSTYLE,this.spacingLeft=this.spacingBottom=this.spacingRight=this.spacingTop=this.spacing=2,this.horizontal=!0,delete this.background,delete this.border,this.textDirection=mxConstants.DEFAULT_TEXT_DIRECTION,delete this.margin},mxText.prototype.apply=function(t){var e=this.spacing;mxShape.prototype.apply.apply(this,arguments),null!=this.style&&(this.fontStyle=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSTYLE,this.fontStyle),this.family=mxUtils.getValue(this.style,mxConstants.STYLE_FONTFAMILY,this.family),this.size=mxUtils.getValue(this.style,mxConstants.STYLE_FONTSIZE,this.size),this.color=mxUtils.getValue(this.style,mxConstants.STYLE_FONTCOLOR,this.color),this.align=mxUtils.getValue(this.style,mxConstants.STYLE_ALIGN,this.align),this.valign=mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_ALIGN,this.valign),this.spacing=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING,this.spacing)),this.spacingTop=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_TOP,this.spacingTop-e))+this.spacing,this.spacingRight=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_RIGHT,this.spacingRight-e))+this.spacing,this.spacingBottom=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_BOTTOM,this.spacingBottom-e))+this.spacing,this.spacingLeft=parseInt(mxUtils.getValue(this.style,mxConstants.STYLE_SPACING_LEFT,this.spacingLeft-e))+this.spacing,this.horizontal=mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,this.horizontal),this.background=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,this.background),this.border=mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_BORDERCOLOR,this.border),this.textDirection=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION),this.opacity=mxUtils.getValue(this.style,mxConstants.STYLE_TEXT_OPACITY,100),this.updateMargin()),this.flipH=this.flipV=null},mxText.prototype.getAutoDirection=function(){var t=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(this.value);return null!=t&&0<t.length&&"z"<t[0]?mxConstants.TEXT_DIRECTION_RTL:mxConstants.TEXT_DIRECTION_LTR},mxText.prototype.getContentNode=function(){var t=this.node;return t=null!=t?(null==t.ownerSVGElement?this.node:t.firstChild.firstChild.firstChild).firstChild.firstChild:t},mxText.prototype.updateBoundingBox=function(){var t=this.node,e=(this.boundingBox=this.bounds.clone(),this.getTextRotation()),n=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER):null,i=null!=this.style?mxUtils.getValue(this.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE):null;if(!(this.ignoreStringSize||null==t||"fill"==this.overflow||this.clipped&&this.ignoreClippedStringSize&&n==mxConstants.ALIGN_CENTER&&i==mxConstants.ALIGN_MIDDLE)){if((i=n=null)!=t.ownerSVGElement)if(null!=t.firstChild&&null!=t.firstChild.firstChild&&"foreignObject"==t.firstChild.firstChild.nodeName)i=(t=t.firstChild.firstChild.firstChild.firstChild).offsetHeight*this.scale,n="width"==this.overflow?this.boundingBox.width:t.offsetWidth*this.scale;else try{var l=t.getBBox();return void("string"==typeof this.value&&0==mxUtils.trim(this.value)?this.boundingBox=null:this.boundingBox=0==l.width&&0==l.height?null:new mxRectangle(l.x,l.y,l.width,l.height))}catch(t){}else n=null!=this.state?this.state.view.textDiv:null,null!=this.offsetWidth&&null!=this.offsetHeight||(null!=n&&(this.updateFont(n),this.updateSize(n,!1),this.updateInnerHtml(n),t=n),l=t,8!=document.documentMode||mxClient.IS_EM?null!=l.firstChild&&"DIV"==l.firstChild.nodeName&&(l=l.firstChild):(i=Math.round(this.bounds.width/this.scale),this.wrap&&0<i?(t.style.wordWrap=mxConstants.WORD_WRAP,t.style.whiteSpace="normal","break-word"!=t.style.wordWrap&&(n=(l=0<(t=l.getElementsByTagName("div")).length?t[t.length-1]:l).offsetWidth+2,t=this.node.getElementsByTagName("div"),this.clipped&&(n=Math.min(i,n)),1<t.length)&&(t[t.length-2].style.width=n+"px")):t.style.whiteSpace="nowrap"),this.offsetWidth=l.offsetWidth+this.textWidthPadding,this.offsetHeight=l.offsetHeight),n=this.offsetWidth*this.scale,i=this.offsetHeight*this.scale;null!=n&&null!=i&&(this.boundingBox=new mxRectangle(this.bounds.x,this.bounds.y,n,i))}null!=this.boundingBox&&(0!=e?(e=mxUtils.getBoundingBox(new mxRectangle(this.margin.x*this.boundingBox.width,this.margin.y*this.boundingBox.height,this.boundingBox.width,this.boundingBox.height),e,new mxPoint(0,0)),this.unrotatedBoundingBox=mxRectangle.fromRectangle(this.boundingBox),this.unrotatedBoundingBox.x+=this.margin.x*this.unrotatedBoundingBox.width,this.unrotatedBoundingBox.y+=this.margin.y*this.unrotatedBoundingBox.height,this.boundingBox.x+=e.x,this.boundingBox.y+=e.y,this.boundingBox.width=e.width,this.boundingBox.height=e.height):(this.boundingBox.x+=this.margin.x*this.boundingBox.width,this.boundingBox.y+=this.margin.y*this.boundingBox.height,this.unrotatedBoundingBox=null))},mxText.prototype.getShapeRotation=function(){return 0},mxText.prototype.getTextRotation=function(){return null!=this.state&&null!=this.state.shape?this.state.shape.getTextRotation():0},mxText.prototype.isPaintBoundsInverted=function(){return!this.horizontal&&null!=this.state&&this.state.view.graph.model.isVertex(this.state.cell)},mxText.prototype.configureCanvas=function(t,e,n,i,l){mxShape.prototype.configureCanvas.apply(this,arguments),t.setFontColor(this.color),t.setFontBackgroundColor(this.background),t.setFontBorderColor(this.border),t.setFontFamily(this.family),t.setFontSize(this.size),t.setFontStyle(this.fontStyle)},mxText.prototype.getHtmlValue=function(){var t=this.value;return this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div><br></div>"),this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t},mxText.prototype.getTextCss=function(){var t="display: inline-block; font-size: "+this.size+"px; font-family: "+this.family+"; color: "+this.color+"; line-height: "+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+"; pointer-events: "+(this.pointerEvents?"all":"none")+"; ",e=((this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD&&(t+="font-weight: bold; "),(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC&&(t+="font-style: italic; "),[]);return(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),0<e.length&&(t+="text-decoration: "+e.join(" ")+"; "),t},mxText.prototype.redrawHtmlShape=function(){var t;mxClient.IS_SVG?this.redrawHtmlShapeWithCss3():((t=this.node.style).whiteSpace="normal",t.overflow="",t.width="",t.height="",this.updateValue(),this.updateFont(this.node),this.updateSize(this.node,null==this.state||null==this.state.view.textDiv),this.offsetHeight=this.offsetWidth=null,mxClient.IS_IE&&(null==document.documentMode||document.documentMode<=8)?this.updateHtmlFilter():this.updateHtmlTransform())},mxText.prototype.redrawHtmlShapeWithCss3=function(){var t=Math.max(0,Math.round(this.bounds.width/this.scale)),o=Math.max(0,Math.round(this.bounds.height/this.scale)),e="position: absolute; left: "+Math.round(this.bounds.x)+"px; top: "+Math.round(this.bounds.y)+"px; pointer-events: none; ",n=this.getTextCss();mxSvgCanvas2D.createCss(t+2,o,this.align,this.valign,this.wrap,this.overflow,this.clipped,null!=this.background?mxUtils.htmlEntities(this.background):null,null!=this.border?mxUtils.htmlEntities(this.border):null,e,n,this.scale,mxUtils.bind(this,function(t,e,n,i,l,s){t=this.getTextRotation(),""!=(t=(1!=this.scale?"scale("+this.scale+") ":"")+(0!=t?"rotate("+t+"deg) ":"")+(0!=this.margin.x||0!=this.margin.y?"translate("+100*this.margin.x+"%,"+100*this.margin.y+"%)":""))&&(t="transform-origin: 0 0; transform: "+t+"; "),"block"==this.overflow&&this.valign==mxConstants.ALIGN_MIDDLE&&(t+="max-height: "+(o+1)+"px;"),""==s?(n+=i,i="display:inline-block; min-width: 100%; "+t):(i+=t,mxClient.IS_SF&&(i+="-webkit-clip-path: content-box;")),"block"==this.overflow&&(i+="width: 100%; "),this.opacity<100&&(l+="opacity: "+this.opacity/100+"; "),this.node.setAttribute("style",n),n=mxUtils.isNode(this.value)?this.value.outerHTML:this.getHtmlValue(),null==this.node.firstChild&&(this.node.innerHTML="<div><div>"+n+"</div></div>",mxClient.IS_IE11)&&this.fixFlexboxForIe11(this.node),this.node.firstChild.firstChild.setAttribute("style",l),this.node.firstChild.setAttribute("style",i)}))},mxText.prototype.fixFlexboxForIe11=function(t){for(var e=t.querySelectorAll('div[style*="display: flex; justify-content: flex-end;"]'),n=0;n<e.length;n++)e[n].style.justifyContent="flex-start",e[n].style.flexDirection="row-reverse";if(!this.wrap)for(e=t.querySelectorAll('div[style*="display: flex; justify-content: center;"]'),t=-window.innerWidth,n=0;n<e.length;n++)e[n].style.marginLeft=t+"px",e[n].style.marginRight=t+"px"},mxText.prototype.updateHtmlTransform=function(){var t=this.getTextRotation(),e=this.node.style,n=this.margin.x,i=this.margin.y;0!=t?(mxUtils.setPrefixedStyle(e,"transformOrigin",100*-n+"% "+100*-i+"%"),mxUtils.setPrefixedStyle(e,"transform","translate("+100*n+"%,"+100*i+"%) scale("+this.scale+") rotate("+t+"deg)")):(mxUtils.setPrefixedStyle(e,"transformOrigin","0% 0%"),mxUtils.setPrefixedStyle(e,"transform","scale("+this.scale+") translate("+100*n+"%,"+100*i+"%)")),e.left=Math.round(this.bounds.x-Math.ceil(n*("fill"!=this.overflow&&"width"!=this.overflow?3:1)))+"px",e.top=Math.round(this.bounds.y-i*("fill"!=this.overflow?3:1))+"px",e.opacity=this.opacity<100?this.opacity/100:""},mxText.prototype.updateInnerHtml=function(t){var e;mxUtils.isNode(this.value)?t.innerHTML=this.value.outerHTML:(e=this.value,this.dialect!=mxConstants.DIALECT_STRICTHTML&&(e=mxUtils.htmlEntities(e,!1)),e=mxUtils.replaceTrailingNewlines(e,"<div>&nbsp;</div>"),e=this.replaceLinefeeds?e.replace(/\n/g,"<br/>"):e,t.innerHTML='<div style="display:inline-block;_display:inline;">'+e+"</div>")},mxText.prototype.updateHtmlFilter=function(){var t=this.node.style,e=this.margin.x,n=this.margin.y,i=this.scale;mxUtils.setOpacity(this.node,this.opacity);var l=0,s=null!=this.state?this.state.view.textDiv:null,o=this.node,s=(null!=s?(s.style.overflow="",s.style.height="",s.style.width="",this.updateFont(s),this.updateSize(s,!1),this.updateInnerHtml(s),r=Math.round(this.bounds.width/this.scale),this.wrap&&0<r?(s.style.whiteSpace="normal",s.style.wordWrap=mxConstants.WORD_WRAP,h=r,this.clipped&&(h=Math.min(h,this.bounds.width)),s.style.width=h+"px"):s.style.whiteSpace="nowrap",null!=(o=s).firstChild&&"DIV"==o.firstChild.nodeName&&(o=o.firstChild,this.wrap)&&"break-word"==s.style.wordWrap&&(o.style.width="100%"),!this.clipped&&this.wrap&&0<r&&(h=o.offsetWidth+this.textWidthPadding,s.style.width=h+"px"),l=o.offsetHeight+2):null!=o.firstChild&&"DIV"==o.firstChild.nodeName&&(l=(o=o.firstChild).offsetHeight),h=o.offsetWidth+this.textWidthPadding,this.clipped&&(l=Math.min(l,this.bounds.height)),r=this.bounds.width/i,s=this.bounds.height/i,"fill"==this.overflow?(l=s,h=r):"width"==this.overflow&&(l=o.scrollHeight,h=r),this.offsetWidth=h,this.offsetHeight=l,"fill"!=this.overflow&&"width"!=this.overflow&&(r=h=this.clipped?Math.min(r,h):h,this.wrap)&&(t.width=Math.round(r)+"px"),l*i),r=r*i,a=this.getTextRotation()*(Math.PI/180),h=parseFloat(parseFloat(Math.cos(a)).toFixed(8)),l=parseFloat(parseFloat(Math.sin(-a)).toFixed(8)),o=((a%=2*Math.PI)<0&&(a+=2*Math.PI),(a%=Math.PI)>Math.PI/2&&(a=Math.PI-a),Math.cos(a)),d=Math.sin(-a),e=r*-(e+.5),n=s*-(n+.5);0!=a&&(a="progid:DXImageTransform.Microsoft.Matrix(M11="+h+", M12="+l+", M21="+-l+", M22="+h+", sizingMethod='auto expand')",t.filter=null!=t.filter&&0<t.filter.length?t.filter+" "+a:a),t.zoom=i,t.left=Math.round(this.bounds.x+((r-r*o+s*d)/2-h*e-l*n)-r/2)+"px",t.top=Math.round(this.bounds.y+((s-s*o+r*d)/2+l*e-h*n)-s/2)+"px"},mxText.prototype.updateValue=function(){var t,e,n,i;mxUtils.isNode(this.value)?(this.node.innerHTML="",this.node.appendChild(this.value)):(t=this.value,this.dialect!=mxConstants.DIALECT_STRICTHTML&&(t=mxUtils.htmlEntities(t,!1)),t=mxUtils.replaceTrailingNewlines(t,"<div><br></div>"),t=this.replaceLinefeeds?t.replace(/\n/g,"<br/>"):t,e=null!=this.background&&this.background!=mxConstants.NONE?this.background:null,n=null!=this.border&&this.border!=mxConstants.NONE?this.border:null,"fill"==this.overflow||"width"==this.overflow?(null!=e&&(this.node.style.backgroundColor=e),null!=n&&(this.node.style.border="1px solid "+n)):(i="",null!=e&&(i+="background-color:"+mxUtils.htmlEntities(e)+";"),null!=n&&(i+="border:1px solid "+mxUtils.htmlEntities(n)+";"),t='<div style="zoom:1;'+i+"display:inline-block;_display:inline;text-decoration:inherit;padding-bottom:1px;padding-right:1px;line-height:"+(mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT)+'">'+t+"</div>"),this.node.innerHTML=t,0<(t=this.node.getElementsByTagName("div")).length&&((e=(e=this.textDirection)==mxConstants.TEXT_DIRECTION_AUTO&&this.dialect!=mxConstants.DIALECT_STRICTHTML?this.getAutoDirection():e)==mxConstants.TEXT_DIRECTION_LTR||e==mxConstants.TEXT_DIRECTION_RTL?t[t.length-1].setAttribute("dir",e):t[t.length-1].removeAttribute("dir")))},mxText.prototype.updateFont=function(t){(t=t.style).lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?this.size*mxConstants.LINE_HEIGHT+"px":mxConstants.LINE_HEIGHT,t.fontSize=this.size+"px",t.fontFamily=this.family,t.verticalAlign="top",t.color=this.color,t.fontWeight=(this.fontStyle&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?"bold":"",t.fontStyle=(this.fontStyle&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?"italic":"";var e=[];(this.fontStyle&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&e.push("underline"),(this.fontStyle&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&e.push("line-through"),t.textDecoration=e.join(" "),t.textAlign=this.align==mxConstants.ALIGN_CENTER?"center":this.align==mxConstants.ALIGN_RIGHT?"right":"left"},mxText.prototype.updateSize=function(t,e){var n,i=Math.max(0,Math.round(this.bounds.width/this.scale)),l=Math.max(0,Math.round(this.bounds.height/this.scale)),s=t.style;this.clipped?(s.overflow="hidden",s.maxHeight=l+"px",s.maxWidth=i+"px"):"fill"==this.overflow?(s.width=i+1+"px",s.height=l+1+"px",s.overflow="hidden"):"width"==this.overflow?(s.width=i+1+"px",s.maxHeight=l+1+"px",s.overflow="hidden"):"block"==this.overflow&&(s.width=i+1+"px"),this.wrap&&0<i?(s.wordWrap=mxConstants.WORD_WRAP,s.whiteSpace="normal",s.width=i+"px",e&&"fill"!=this.overflow&&"width"!=this.overflow&&(null!=(l=t).firstChild&&"DIV"==l.firstChild.nodeName&&(l=l.firstChild,"break-word"==t.style.wordWrap)&&(l.style.width="100%"),0==(e=l.offsetWidth)&&(n=t.parentNode,t.style.visibility="hidden",document.body.appendChild(t),e=l.offsetWidth,t.style.visibility="",n.appendChild(t)),e+=3,this.clipped&&(e=Math.min(e,i)),s.width=e+"px")):s.whiteSpace="nowrap"},mxText.prototype.updateMargin=function(){this.margin=mxUtils.getAlignmentAsPoint(this.align,this.valign)},mxText.prototype.getSpacing=function(t){return new mxPoint(this.align==mxConstants.ALIGN_CENTER?(this.spacingLeft-this.spacingRight)/2:this.align==mxConstants.ALIGN_RIGHT?-this.spacingRight-(t?0:this.baseSpacingRight):this.spacingLeft+(t?0:this.baseSpacingLeft),this.valign==mxConstants.ALIGN_MIDDLE?(this.spacingTop-this.spacingBottom)/2:this.valign==mxConstants.ALIGN_BOTTOM?-this.spacingBottom-(t?0:this.baseSpacingBottom):this.spacingTop+(t?0:this.baseSpacingTop))},mxUtils.extend(mxTriangle,mxActor),mxTriangle.prototype.isRoundable=function(){return!0},mxTriangle.prototype.redrawPath=function(t,e,n,i,l){e=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,.5*l),new mxPoint(0,l)],this.isRounded,e,!0)},mxUtils.extend(mxHexagon,mxActor),mxHexagon.prototype.redrawPath=function(t,e,n,i,l){e=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,this.addPoints(t,[new mxPoint(.25*i,0),new mxPoint(.75*i,0),new mxPoint(i,.5*l),new mxPoint(.75*i,l),new mxPoint(.25*i,l),new mxPoint(0,.5*l)],this.isRounded,e,!0)},mxUtils.extend(mxLine,mxShape),mxLine.prototype.vertical=!1,mxLine.prototype.paintVertexShape=function(t,e,n,i,l){var s;t.begin(),this.vertical?(t.moveTo(s=e+i/2,n),t.lineTo(s,n+l)):(t.moveTo(e,s=n+l/2),t.lineTo(e+i,s)),t.stroke()},mxUtils.extend(mxImageShape,mxRectangleShape),mxImageShape.prototype.preserveImageAspect=!0,mxImageShape.prototype.getSvgScreenOffset=function(){return 0},mxImageShape.prototype.apply=function(t){mxShape.prototype.apply.apply(this,arguments),(this.gradient=this.stroke=this.fill=null)!=this.style&&(this.preserveImageAspect=1==mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_ASPECT,1),this.flipH=this.flipH||1==mxUtils.getValue(this.style,"imageFlipH",0),this.flipV=this.flipV||1==mxUtils.getValue(this.style,"imageFlipV",0))},mxImageShape.prototype.isHtmlAllowed=function(){return!this.preserveImageAspect},mxImageShape.prototype.createHtml=function(){var t=document.createElement("div");return t.style.position="absolute",t},mxImageShape.prototype.isRoundable=function(t,e,n,i,l){return!1},mxImageShape.prototype.getImageDataUri=function(){return this.image},mxImageShape.prototype.paintVertexShape=function(t,e,n,i,l){var s,o;null!=this.image?(s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,null),o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null),null!=s&&(t.setFillColor(s),t.setStrokeColor(o),t.rect(e,n,i,l),t.fillAndStroke()),t.image(e,n,i,l,this.getImageDataUri(),this.preserveImageAspect,!1,!1),null!=(o=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,null))&&(t.setShadow(!1),t.setStrokeColor(o),t.rect(e,n,i,l),t.stroke())):mxRectangleShape.prototype.paintBackground.apply(this,arguments)},mxImageShape.prototype.redrawHtmlShape=function(){var t,e;this.node.style.left=Math.round(this.bounds.x)+"px",this.node.style.top=Math.round(this.bounds.y)+"px",this.node.style.width=Math.max(0,Math.round(this.bounds.width))+"px",this.node.style.height=Math.max(0,Math.round(this.bounds.height))+"px",this.node.innerHTML="",null!=this.image?(t=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BACKGROUND,""),e=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_BORDER,""),this.node.style.backgroundColor=t,this.node.style.borderColor=e,(t=document.createElement("img")).setAttribute("border","0"),t.style.position="absolute",t.src=this.image,e=this.opacity<100?"alpha(opacity="+this.opacity+")":"",this.node.style.filter=e,this.flipH&&this.flipV?e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2)":this.flipH?e+="progid:DXImageTransform.Microsoft.BasicImage(mirror=1)":this.flipV&&(e+="progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)"),t.style.filter!=e&&(t.style.filter=e),"image"==t.nodeName?t.style.rotation=this.rotation:0!=this.rotation?mxUtils.setPrefixedStyle(t.style,"transform","rotate("+this.rotation+"deg)"):mxUtils.setPrefixedStyle(t.style,"transform",""),t.style.width=this.node.style.width,t.style.height=this.node.style.height,this.node.style.backgroundImage="",this.node.appendChild(t)):this.setTransparentBackgroundImage(this.node)},mxUtils.extend(mxLabel,mxRectangleShape),mxLabel.prototype.imageSize=mxConstants.DEFAULT_IMAGESIZE,mxLabel.prototype.spacing=2,mxLabel.prototype.indicatorSize=10,mxLabel.prototype.indicatorSpacing=2,mxLabel.prototype.init=function(t){mxShape.prototype.init.apply(this,arguments),null!=this.indicatorShape&&(this.indicator=new this.indicatorShape,this.indicator.dialect=this.dialect,this.indicator.init(this.node))},mxLabel.prototype.redraw=function(){null!=this.indicator&&(this.indicator.fill=this.indicatorColor,this.indicator.stroke=this.indicatorStrokeColor,this.indicator.gradient=this.indicatorGradientColor,this.indicator.direction=this.indicatorDirection,this.indicator.redraw()),mxShape.prototype.redraw.apply(this,arguments)},mxLabel.prototype.isHtmlAllowed=function(){return mxRectangleShape.prototype.isHtmlAllowed.apply(this,arguments)&&null==this.indicatorColor&&null==this.indicatorShape},mxLabel.prototype.paintForeground=function(t,e,n,i,l){this.paintImage(t,e,n,i,l),this.paintIndicator(t,e,n,i,l),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxLabel.prototype.paintImage=function(t,e,n,i,l){null!=this.image&&(e=this.getImageBounds(e,n,i,l),t.image(e.x,e.y,e.width,e.height,this.image,!1,!1,!1))},mxLabel.prototype.getImageBounds=function(t,e,n,i){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),o=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_WIDTH,mxConstants.DEFAULT_IMAGESIZE),r=mxUtils.getNumber(this.style,mxConstants.STYLE_IMAGE_HEIGHT,mxConstants.DEFAULT_IMAGESIZE),a=mxUtils.getNumber(this.style,mxConstants.STYLE_SPACING,this.spacing)+5;return new mxRectangle(t=l==mxConstants.ALIGN_CENTER?t+(n-o)/2:l==mxConstants.ALIGN_RIGHT?t+(n-o-a):t+a,e=s==mxConstants.ALIGN_TOP?e+a:s==mxConstants.ALIGN_BOTTOM?e+(i-r-a):e+(i-r)/2,o,r)},mxLabel.prototype.paintIndicator=function(t,e,n,i,l){null!=this.indicator?(this.indicator.bounds=this.getIndicatorBounds(e,n,i,l),this.indicator.paint(t)):null!=this.indicatorImage&&(e=this.getIndicatorBounds(e,n,i,l),t.image(e.x,e.y,e.width,e.height,this.indicatorImage,!1,!1,!1))},mxLabel.prototype.getIndicatorBounds=function(t,e,n,i){var l=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_ALIGN,mxConstants.ALIGN_LEFT),s=mxUtils.getValue(this.style,mxConstants.STYLE_IMAGE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),o=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_WIDTH,this.indicatorSize),r=mxUtils.getNumber(this.style,mxConstants.STYLE_INDICATOR_HEIGHT,this.indicatorSize),a=this.spacing+5;return new mxRectangle(t=l==mxConstants.ALIGN_RIGHT?t+(n-o-a):l==mxConstants.ALIGN_CENTER?t+(n-o)/2:t+a,e=s==mxConstants.ALIGN_BOTTOM?e+(i-r-a):s==mxConstants.ALIGN_TOP?e+a:e+(i-r)/2,o,r)},mxLabel.prototype.redrawHtmlShape=function(){for(mxRectangleShape.prototype.redrawHtmlShape.apply(this,arguments);this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);var t,e;null!=this.image&&((t=document.createElement("img")).style.position="relative",t.setAttribute("border","0"),(e=this.getImageBounds(this.bounds.x,this.bounds.y,this.bounds.width,this.bounds.height)).x-=this.bounds.x,e.y-=this.bounds.y,t.style.left=Math.round(e.x)+"px",t.style.top=Math.round(e.y)+"px",t.style.width=Math.round(e.width)+"px",t.style.height=Math.round(e.height)+"px",t.src=this.image,this.node.appendChild(t))},mxUtils.extend(mxCylinder,mxShape),mxCylinder.prototype.maxHeight=40,mxCylinder.prototype.svgStrokeTolerance=0,mxCylinder.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),this.redrawPath(t,e,n,i,l,!1),t.fillAndStroke(),this.outline&&null!=this.style&&0!=mxUtils.getValue(this.style,mxConstants.STYLE_BACKGROUND_OUTLINE,0)||(t.setShadow(!1),t.begin(),this.redrawPath(t,e,n,i,l,!0),t.stroke())},mxCylinder.prototype.getCylinderSize=function(t,e,n,i){return Math.min(this.maxHeight,Math.round(i/5))},mxCylinder.prototype.redrawPath=function(t,e,n,i,l,s){e=this.getCylinderSize(e,n,i,l),(s&&null!=this.fill||!s&&null==this.fill)&&(t.moveTo(0,e),t.curveTo(0,2*e,i,2*e,i,e),s||(t.stroke(),t.begin())),s||(t.moveTo(0,e),t.curveTo(0,-e/3,i,-e/3,i,e),t.lineTo(i,l-e),t.curveTo(i,l+e/3,0,l+e/3,0,l-e),t.close())},mxUtils.extend(mxConnector,mxPolyline),mxConnector.prototype.updateBoundingBox=function(){this.useSvgBoundingBox=null!=this.style&&1==this.style[mxConstants.STYLE_CURVED],mxShape.prototype.updateBoundingBox.apply(this,arguments)},mxConnector.prototype.paintEdgeShape=function(t,e){var n=this.createMarker(t,e,!0),e=this.createMarker(t,e,!1);mxPolyline.prototype.paintEdgeShape.apply(this,arguments),t.setFillColor(this.stroke),t.setShadow(!1),t.setDashed(!1),null!=n&&n(),null!=e&&e()},mxConnector.prototype.createMarker=function(t,e,n){var i,l=null,s=e.length,o=mxUtils.getValue(this.style,n?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW),r=n?e[1]:e[s-2];return e=n?e[0]:e[s-1],null!=o&&null!=r&&null!=e&&(l=e.x-r.x,s=e.y-r.y,r=l/(i=Math.sqrt(l*l+s*s)),l=s/i,s=mxUtils.getNumber(this.style,n?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),l=mxMarker.createMarker(t,this,o,e,r,l,s,n,this.strokewidth,0!=this.style[n?mxConstants.STYLE_STARTFILL:mxConstants.STYLE_ENDFILL])),l},mxConnector.prototype.augmentBoundingBox=function(t){mxShape.prototype.augmentBoundingBox.apply(this,arguments);var e=0;mxUtils.getValue(this.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(e=mxUtils.getNumber(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)+1),mxUtils.getValue(this.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(e=Math.max(e,mxUtils.getNumber(this.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE))+1),t.grow(e*this.scale)},mxUtils.extend(mxSwimlane,mxShape),mxSwimlane.prototype.imageSize=16,mxSwimlane.prototype.isRoundable=function(t,e,n,i,l){return!0},mxSwimlane.prototype.getTitleSize=function(){return Math.max(0,mxUtils.getValue(this.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE))},mxSwimlane.prototype.getLabelBounds=function(t){var e=this.getTitleSize(),n=(t=new mxRectangle(t.x,t.y,t.width,t.height),this.isHorizontal()),i=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPH,0),l=1==mxUtils.getValue(this.style,mxConstants.STYLE_FLIPV,0),s=this.direction==mxConstants.DIRECTION_NORTH||this.direction==mxConstants.DIRECTION_SOUTH,i=!(n=n==!s)&&i!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST),l=n&&l!=(this.direction==mxConstants.DIRECTION_SOUTH||this.direction==mxConstants.DIRECTION_WEST);return s?(e=Math.min(t.width,e*this.scale),(i||l)&&(t.x+=t.width-e),t.width=e):(e=Math.min(t.height,e*this.scale),(i||l)&&(t.y+=t.height-e),t.height=e),t},mxSwimlane.prototype.getGradientBounds=function(t,e,n,i,l){return t=this.getTitleSize(),this.isHorizontal()?new mxRectangle(e,n,i,t=Math.min(t,l)):new mxRectangle(e,n,t=Math.min(t,i),l)},mxSwimlane.prototype.getSwimlaneArcSize=function(t,e,n){return"1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?Math.min(t/2,Math.min(e/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):n*(t=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100)*3},mxSwimlane.prototype.isHorizontal=function(){return 1==mxUtils.getValue(this.style,mxConstants.STYLE_HORIZONTAL,1)},mxSwimlane.prototype.paintVertexShape=function(t,e,n,i,l){var s=this.getTitleSize(),o=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE),r=1==mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_LINE,1),a=0,s=this.isHorizontal()?Math.min(s,l):Math.min(s,i);t.translate(e,n),this.isRounded?(a=this.getSwimlaneArcSize(i,l,s),a=Math.min((this.isHorizontal()?l:i)-s,Math.min(s,a)),this.paintRoundedSwimlane(t,e,n,i,l,s,a,o,r)):this.paintSwimlane(t,e,n,i,l,s,o,r),o=mxUtils.getValue(this.style,mxConstants.STYLE_SEPARATORCOLOR,mxConstants.NONE),this.paintSeparator(t,e,n,i,l,s,o),null!=this.image&&(l=this.getImageBounds(e,n,i,l),t.image(l.x-e,l.y-n,l.width,l.height,this.image,!1,!1,!1)),this.glass&&(t.setShadow(!1),this.paintGlassEffect(t,0,0,i,s,a))},mxSwimlane.prototype.paintSwimlane=function(t,e,n,i,l,s,o,r){t.begin();var a=!0;null!=this.style&&(a="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),this.isHorizontal()?(t.moveTo(0,s),t.lineTo(0,0),t.lineTo(i,0),t.lineTo(i,s),t.fillAndStroke(),s<l&&(o!=mxConstants.NONE&&a||(t.pointerEvents=!1),o!=mxConstants.NONE&&t.setFillColor(o),t.begin(),t.moveTo(0,s),t.lineTo(0,l),t.lineTo(i,l),t.lineTo(i,s),o==mxConstants.NONE?t.stroke():t.fillAndStroke())):(t.moveTo(s,0),t.lineTo(0,0),t.lineTo(0,l),t.lineTo(s,l),t.fillAndStroke(),s<i&&(o!=mxConstants.NONE&&a||(t.pointerEvents=!1),o!=mxConstants.NONE&&t.setFillColor(o),t.begin(),t.moveTo(s,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(s,l),o==mxConstants.NONE?t.stroke():t.fillAndStroke())),r&&this.paintDivider(t,e,n,i,l,s,o==mxConstants.NONE)},mxSwimlane.prototype.paintRoundedSwimlane=function(t,e,n,i,l,s,o,r,a){t.begin();var h=!0;null!=this.style&&(h="1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1")),this.isHorizontal()?(t.moveTo(i,s),t.lineTo(i,o),t.quadTo(i,0,i-Math.min(i/2,o),0),t.lineTo(Math.min(i/2,o),0),t.quadTo(0,0,0,o),t.lineTo(0,s),t.fillAndStroke(),s<l&&(r!=mxConstants.NONE&&h||(t.pointerEvents=!1),r!=mxConstants.NONE&&t.setFillColor(r),t.begin(),t.moveTo(0,s),t.lineTo(0,l-o),t.quadTo(0,l,Math.min(i/2,o),l),t.lineTo(i-Math.min(i/2,o),l),t.quadTo(i,l,i,l-o),t.lineTo(i,s),r==mxConstants.NONE?t.stroke():t.fillAndStroke())):(t.moveTo(s,0),t.lineTo(o,0),t.quadTo(0,0,0,Math.min(l/2,o)),t.lineTo(0,l-Math.min(l/2,o)),t.quadTo(0,l,o,l),t.lineTo(s,l),t.fillAndStroke(),s<i&&(r!=mxConstants.NONE&&h||(t.pointerEvents=!1),r!=mxConstants.NONE&&t.setFillColor(r),t.begin(),t.moveTo(s,l),t.lineTo(i-o,l),t.quadTo(i,l,i,l-Math.min(l/2,o)),t.lineTo(i,Math.min(l/2,o)),t.quadTo(i,0,i-o,0),t.lineTo(s,0),r==mxConstants.NONE?t.stroke():t.fillAndStroke())),a&&this.paintDivider(t,e,n,i,l,s,r==mxConstants.NONE)},mxSwimlane.prototype.paintDivider=function(t,e,n,i,l,s,o){o||t.setShadow(!1),t.begin(),this.isHorizontal()?(t.moveTo(0,s),t.lineTo(i,s)):(t.moveTo(s,0),t.lineTo(s,l)),t.stroke()},mxSwimlane.prototype.paintSeparator=function(t,e,n,i,l,s,o){o!=mxConstants.NONE&&(t.setStrokeColor(o),t.setDashed(!0),t.begin(),this.isHorizontal()?(t.moveTo(i,s),t.lineTo(i,l)):(t.moveTo(s,0),t.lineTo(i,0)),t.stroke(),t.setDashed(!1))},mxSwimlane.prototype.getImageBounds=function(t,e,n,i){return this.isHorizontal()?new mxRectangle(t+n-this.imageSize,e,this.imageSize,this.imageSize):new mxRectangle(t,e,this.imageSize,this.imageSize)},mxGraphLayout.prototype.graph=null,mxGraphLayout.prototype.useBoundingBox=!0,mxGraphLayout.prototype.parent=null,mxGraphLayout.prototype.moveCell=function(t,e,n){},mxGraphLayout.prototype.resizeCell=function(t,e){},mxGraphLayout.prototype.execute=function(t){},mxGraphLayout.prototype.getGraph=function(){return this.graph},mxGraphLayout.prototype.getConstraint=function(t,e,n,i){return this.graph.getCurrentCellStyle(e)[t]},mxGraphLayout.traverse=function(t,e,n,i,l){if(null!=n&&null!=t&&(e=null==e||e,!(l=l||new mxDictionary).get(t))&&(l.put(t,!0),null==(i=n(t,i))||i)&&0<(i=this.graph.model.getEdgeCount(t)))for(var s=0;s<i;s++){var o=this.graph.model.getEdgeAt(t,s),r=this.graph.model.getTerminal(o,!0)==t;e&&!r||(r=this.graph.view.getVisibleTerminal(o,!r),this.traverse(r,e,n,o,l))}},mxGraphLayout.prototype.isAncestor=function(t,e,n){if(!n)return this.graph.model.getParent(e)==t;if(e==t)return!1;for(;null!=e&&e!=t;)e=this.graph.model.getParent(e);return e==t},mxGraphLayout.prototype.isVertexMovable=function(t){return this.graph.isCellMovable(t)},mxGraphLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.isCellVisible(t)},mxGraphLayout.prototype.isEdgeIgnored=function(t){var e=this.graph.getModel();return!e.isEdge(t)||!this.graph.isCellVisible(t)||null==e.getTerminal(t,!0)||null==e.getTerminal(t,!1)},mxGraphLayout.prototype.setEdgeStyleEnabled=function(t,e){this.graph.setCellStyles(mxConstants.STYLE_NOEDGESTYLE,e?"0":"1",[t])},mxGraphLayout.prototype.setOrthogonalEdge=function(t,e){this.graph.setCellStyles(mxConstants.STYLE_ORTHOGONAL,e?"1":"0",[t])},mxGraphLayout.prototype.getParentOffset=function(t){var e=new mxPoint;if(null!=t&&t!=this.parent){var n=this.graph.getModel();if(n.isAncestor(this.parent,t))for(var i=n.getGeometry(t);t!=this.parent;)e.x+=i.x,e.y+=i.y,t=n.getParent(t),i=n.getGeometry(t)}return e},mxGraphLayout.prototype.setEdgePoints=function(t,e){if(null!=t){var n=this.graph.model,i=n.getGeometry(t);if(null==i?(i=new mxGeometry).setRelative(!0):i=i.clone(),null!=this.parent&&null!=e)for(var l=n.getParent(t),l=this.getParentOffset(l),s=0;s<e.length;s++)e[s].x-=l.x,e[s].y-=l.y;i.points=e,n.setGeometry(t,i)}},mxGraphLayout.prototype.setVertexLocation=function(t,e,n){var i,l,s,o=this.graph.getModel(),r=o.getGeometry(t),a=null;return null!=r&&(a=new mxRectangle(e,n,r.width,r.height),this.useBoundingBox&&null!=(i=this.graph.getView().getState(t))&&null!=i.text&&null!=i.text.boundingBox&&(l=this.graph.getView().scale,s=i.text.boundingBox,i.text.boundingBox.x<i.x&&(e+=(i.x-s.x)/l,a.width=s.width),i.text.boundingBox.y<i.y)&&(n+=(i.y-s.y)/l,a.height=s.height),null!=this.parent&&null!=(i=o.getParent(t))&&i!=this.parent&&(e-=(i=this.getParentOffset(i)).x,n-=i.y),r.x==e&&r.y==n||((r=r.clone()).x=e,r.y=n,o.setGeometry(t,r))),a},mxGraphLayout.prototype.getVertexBounds=function(t){var e,n,i,l,s,o=this.graph.getModel().getGeometry(t);return this.useBoundingBox&&null!=(e=this.graph.getView().getState(t))&&null!=e.text&&null!=e.text.boundingBox&&(n=this.graph.getView().scale,i=e.text.boundingBox,l=Math.max(e.x-i.x,0)/n,s=Math.max(e.y-i.y,0)/n,o=new mxRectangle(o.x-l,o.y-s,o.width+l+Math.max(i.x+i.width-(e.x+e.width),0)/n,o.height+s+Math.max(i.y+i.height-(e.y+e.height),0)/n)),null!=this.parent&&(t=this.graph.getModel().getParent(t),o=o.clone(),null!=t)&&t!=this.parent&&(t=this.getParentOffset(t),o.x+=t.x,o.y+=t.y),new mxRectangle(o.x,o.y,o.width,o.height)},mxGraphLayout.prototype.arrangeGroups=function(t,e,n,i,l,s){return this.graph.updateGroupBounds(t,e,!0,n,i,l,s)},WeightedCellSorter.prototype.weightedValue=0,WeightedCellSorter.prototype.nudge=!1,WeightedCellSorter.prototype.visited=!1,WeightedCellSorter.prototype.rankIndex=null,WeightedCellSorter.prototype.cell=null,WeightedCellSorter.prototype.compare=function(t,e){return null!=t&&null!=e?e.weightedValue>t.weightedValue||!(e.weightedValue<t.weightedValue)&&e.nudge?-1:1:0},mxStackLayout.prototype=new mxGraphLayout,mxStackLayout.prototype.constructor=mxStackLayout,mxStackLayout.prototype.horizontal=null,mxStackLayout.prototype.spacing=null,mxStackLayout.prototype.x0=null,mxStackLayout.prototype.y0=null,mxStackLayout.prototype.border=0,mxStackLayout.prototype.marginTop=0,mxStackLayout.prototype.marginLeft=0,mxStackLayout.prototype.marginRight=0,mxStackLayout.prototype.marginBottom=0,mxStackLayout.prototype.keepFirstLocation=!1,mxStackLayout.prototype.fill=!1,mxStackLayout.prototype.resizeParent=!1,mxStackLayout.prototype.resizeParentMax=!1,mxStackLayout.prototype.resizeLast=!1,mxStackLayout.prototype.wrap=null,mxStackLayout.prototype.borderCollapse=!0,mxStackLayout.prototype.allowGaps=!1,mxStackLayout.prototype.gridSize=0,mxStackLayout.prototype.isHorizontal=function(){return this.horizontal},mxStackLayout.prototype.moveCell=function(t,e,n){var i=this.graph.getModel(),l=i.getParent(t),s=this.isHorizontal();if(null!=t&&null!=l){var o=0,r=i.getChildCount(l);for(n=s?e:n,null!=(e=this.graph.getView().getState(l))&&(n-=s?e.x:e.y),n/=this.graph.view.scale,e=0;e<r;e++){var a=i.getChildAt(l,e);if(a!=t&&null!=(a=i.getGeometry(a))){if(a=s?a.x+a.width/2:a.y+a.height/2,o<=n&&n<a)break;o=a}}s=l.getIndex(t),s=Math.max(0,e-(s<e?1:0)),i.add(l,t,s)}},mxStackLayout.prototype.getParentSize=function(t){var e=this.graph.getModel(),n=e.getGeometry(t);return n=null!=this.graph.container&&(null==n&&e.isLayer(t)||t==this.graph.getView().currentRoot)?new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1):n},mxStackLayout.prototype.getLayoutCells=function(t){for(var e=this.graph.getModel(),n=e.getChildCount(t),i=[],l=0;l<n;l++){var s=e.getChildAt(t,l);!this.isVertexIgnored(s)&&this.isVertexMovable(s)&&i.push(s)}return this.allowGaps&&i.sort(mxUtils.bind(this,function(t,e){t=this.graph.getCellGeometry(t),e=this.graph.getCellGeometry(e);return this.horizontal?t.x==e.x?0:0<(t.x>e.x)?1:-1:t.y==e.y?0:0<(t.y>e.y)?1:-1})),i},mxStackLayout.prototype.snap=function(t){var e;return null!=this.gridSize&&0<this.gridSize&&1<(t=Math.max(t,this.gridSize))/this.gridSize&&(t+=(e=t%this.gridSize)>this.gridSize/2?this.gridSize-e:-e),t},mxStackLayout.prototype.execute=function(t){if(null!=t){var e=this.getParentSize(t),n=this.isHorizontal(),i=this.graph.getModel(),l=null,l=(l=null!=e?n?e.height-this.marginTop-this.marginBottom:e.width-this.marginLeft-this.marginRight:l)-2*this.border,s=this.x0+this.border+this.marginLeft,o=this.y0+this.border+this.marginTop;this.graph.isSwimlane(t)&&(a=this.graph.getCellStyle(t),r=mxUtils.getNumber(a,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),a=1==mxUtils.getValue(a,mxConstants.STYLE_HORIZONTAL,!0),null!=e&&(r=a?Math.min(r,e.height):Math.min(r,e.width)),n==a&&(l-=r),a?o+=r:s+=r),i.beginUpdate();try{for(var r=0,a=null,h=0,d=null,u=this.getLayoutCells(t),p=0;p<u.length;p++){var c,m,g,x=u[p],y=i.getGeometry(x);null!=y&&(y=y.clone(),null!=this.wrap&&null!=a&&(n&&a.x+a.width+y.width+2*this.spacing>this.wrap||!n&&a.y+a.height+y.height+2*this.spacing>this.wrap)&&(a=null,n?o+=r+this.spacing:s+=r+this.spacing,r=0),r=Math.max(r,n?y.height:y.width),m=0,this.borderCollapse||(c=this.graph.getCellStyle(x),m=mxUtils.getNumber(c,mxConstants.STYLE_STROKEWIDTH,1)),null!=a?(g=h+this.spacing+Math.floor(m/2),n?y.x=this.snap((this.allowGaps?Math.max(g,y.x):g)-this.marginLeft)+this.marginLeft:y.y=this.snap((this.allowGaps?Math.max(g,y.y):g)-this.marginTop)+this.marginTop):this.keepFirstLocation||(n?y.x=this.allowGaps&&y.x>s?Math.max(this.snap(y.x-this.marginLeft)+this.marginLeft,s):s:y.y=this.allowGaps&&y.y>o?Math.max(this.snap(y.y-this.marginTop)+this.marginTop,o):o),n?y.y=o:y.x=s,this.fill&&null!=l&&(n?y.height=l:y.width=l),n?y.width=this.snap(y.width):y.height=this.snap(y.height),this.setChildGeometry(x,y),d=x,a=y,h=n?a.x+a.width+Math.floor(m/2):a.y+a.height+Math.floor(m/2))}this.resizeParent&&null!=e&&null!=a&&!this.graph.isCellCollapsed(t)?this.updateParentGeometry(t,e,a):this.resizeLast&&null!=e&&null!=a&&null!=d&&(n?a.width=e.width-a.x-this.spacing-this.marginRight-this.marginLeft:a.height=e.height-a.y-this.spacing-this.marginBottom,this.setChildGeometry(d,a))}finally{i.endUpdate()}}},mxStackLayout.prototype.setChildGeometry=function(t,e){var n=this.graph.getCellGeometry(t);null!=n&&e.x==n.x&&e.y==n.y&&e.width==n.width&&e.height==n.height||this.graph.getModel().setGeometry(t,e)},mxStackLayout.prototype.updateParentGeometry=function(t,e,n){var i=this.isHorizontal(),l=this.graph.getModel(),s=e.clone();i?(n=n.x+n.width+this.marginRight+this.border,s.width=this.resizeParentMax?Math.max(s.width,n):n):(n=n.y+n.height+this.marginBottom+this.border,s.height=this.resizeParentMax?Math.max(s.height,n):n),e.x==s.x&&e.y==s.y&&e.width==s.width&&e.height==s.height||l.setGeometry(t,s)},mxPartitionLayout.prototype=new mxGraphLayout,mxPartitionLayout.prototype.constructor=mxPartitionLayout,mxPartitionLayout.prototype.horizontal=null,mxPartitionLayout.prototype.spacing=null,mxPartitionLayout.prototype.border=null,mxPartitionLayout.prototype.resizeVertices=!0,mxPartitionLayout.prototype.isHorizontal=function(){return this.horizontal},mxPartitionLayout.prototype.moveCell=function(t,e,n){var i=(n=this.graph.getModel()).getParent(t);if(null!=t&&null!=i){for(var l=0,s=n.getChildCount(i),o=0;o<s;o++){var r=n.getChildAt(i,o);if(null!=(r=this.getVertexBounds(r))){if(r=r.x+r.width/2,l<e&&e<r)break;l=r}}e=i.getIndex(t),e=Math.max(0,o-(e<o?1:0)),n.add(i,t,e)}},mxPartitionLayout.prototype.execute=function(t){var e=this.isHorizontal(),n=this.graph.getModel(),i=n.getGeometry(t);if(null!=(i=null!=this.graph.container&&(null==i&&n.isLayer(t)||t==this.graph.getView().currentRoot)?new mxRectangle(0,0,this.graph.container.offsetWidth-1,this.graph.container.offsetHeight-1):i)){for(var l=[],s=n.getChildCount(t),o=0;o<s;o++){var r=n.getChildAt(t,o);!this.isVertexIgnored(r)&&this.isVertexMovable(r)&&l.push(r)}if(0<(s=l.length)){var a=this.border,h=this.border,d=(e?i.height:i.width)-2*this.border;if(t=this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle,d-=e?t.height:t.width,a+=t.width,h+=t.height,t=this.border+(s-1)*this.spacing,0<(i=e?(i.width-a-t)/s:(i.height-h-t)/s)){n.beginUpdate();try{for(o=0;o<s;o++){var r=l[o],u=n.getGeometry(r);null!=u&&((u=u.clone()).x=a,u.y=h,e?(this.resizeVertices&&(u.width=i,u.height=d),a+=i+this.spacing):(this.resizeVertices&&(u.height=i,u.width=d),h+=i+this.spacing),n.setGeometry(r,u))}}finally{n.endUpdate()}}}}},mxCompactTreeLayout.prototype=new mxGraphLayout,mxCompactTreeLayout.prototype.constructor=mxCompactTreeLayout,mxCompactTreeLayout.prototype.horizontal=null,mxCompactTreeLayout.prototype.invert=null,mxCompactTreeLayout.prototype.resizeParent=!0,mxCompactTreeLayout.prototype.maintainParentLocation=!1,mxCompactTreeLayout.prototype.groupPadding=10,mxCompactTreeLayout.prototype.groupPaddingTop=0,mxCompactTreeLayout.prototype.groupPaddingRight=0,mxCompactTreeLayout.prototype.groupPaddingBottom=0,mxCompactTreeLayout.prototype.groupPaddingLeft=0,mxCompactTreeLayout.prototype.parentsChanged=null,mxCompactTreeLayout.prototype.moveTree=!1,mxCompactTreeLayout.prototype.visited=null,mxCompactTreeLayout.prototype.levelDistance=10,mxCompactTreeLayout.prototype.nodeDistance=20,mxCompactTreeLayout.prototype.resetEdges=!0,mxCompactTreeLayout.prototype.prefHozEdgeSep=5,mxCompactTreeLayout.prototype.prefVertEdgeOff=4,mxCompactTreeLayout.prototype.minEdgeJetty=8,mxCompactTreeLayout.prototype.channelBuffer=4,mxCompactTreeLayout.prototype.edgeRouting=!0,mxCompactTreeLayout.prototype.sortEdges=!1,mxCompactTreeLayout.prototype.alignRanks=!1,mxCompactTreeLayout.prototype.maxRankHeight=null,mxCompactTreeLayout.prototype.root=null,mxCompactTreeLayout.prototype.node=null,mxCompactTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxCompactTreeLayout.prototype.isHorizontal=function(){return this.horizontal},mxCompactTreeLayout.prototype.execute=function(t,e){this.parent=t;var n,i,l,s,o,r=this.graph.getModel();if(null==e){if(0<this.graph.getEdges(t,r.getParent(t),this.invert,!this.invert,!1).length)this.root=t;else if(0<(l=this.graph.findTreeRoots(t,!0,this.invert)).length)for(var a=0;a<l.length;a++)if(!this.isVertexIgnored(l[a])&&0<this.graph.getEdges(l[a],null,this.invert,!this.invert,!1).length){this.root=l[a];break}}else this.root=e;if(null!=this.root){this.parentsChanged=this.resizeParent?{}:null,this.parentY=this.parentX=null,t!=this.root&&null!=r.isVertex(t)&&this.maintainParentLocation&&null!=(n=this.graph.getCellGeometry(t))&&(this.parentX=n.x,this.parentY=n.y),r.beginUpdate();try{this.visited={},this.node=this.dfs(this.root,t),this.alignRanks&&(this.maxRankHeight=[],this.findRankHeights(this.node,0),this.setCellHeights(this.node,0)),null!=this.node&&(this.layout(this.node),l=i=this.graph.gridSize,this.moveTree||null!=(s=this.getVertexBounds(this.root))&&(i=s.x,l=s.y),(s=null)!=(s=this.isHorizontal()?this.horizontalLayout(this.node,i,l):this.verticalLayout(this.node,null,i,l))&&(o=a=0,s.x<0&&(a=Math.abs(i-s.x)),s.y<0&&(o=Math.abs(l-s.y)),0==a&&0==o||this.moveNode(this.node,a,o),this.resizeParent&&this.adjustParents(),this.edgeRouting)&&this.localEdgeProcessing(this.node),null!=this.parentX)&&null!=this.parentY&&null!=(n=this.graph.getCellGeometry(t))&&((n=n.clone()).x=this.parentX,n.y=this.parentY,r.setGeometry(t,n))}finally{r.endUpdate()}}},mxCompactTreeLayout.prototype.moveNode=function(t,e,n){for(t.x+=e,t.y+=n,this.apply(t),t=t.child;null!=t;)this.moveNode(t,e,n),t=t.next},mxCompactTreeLayout.prototype.sortOutgoingEdges=function(i,t){var l=new mxDictionary;t.sort(function(t,e){var t=t.getTerminal(t.getTerminal(!1)==i),n=l.get(t),t=(null==n&&(n=mxCellPath.create(t).split(mxCellPath.PATH_SEPARATOR),l.put(t,n)),e.getTerminal(e.getTerminal(!1)==i)),e=l.get(t);return null==e&&(e=mxCellPath.create(t).split(mxCellPath.PATH_SEPARATOR),l.put(t,e)),mxCellPath.compare(n,e)})},mxCompactTreeLayout.prototype.findRankHeights=function(t,e){(null==this.maxRankHeight[e]||this.maxRankHeight[e]<t.height)&&(this.maxRankHeight[e]=t.height);for(var n=t.child;null!=n;)this.findRankHeights(n,e+1),n=n.next},mxCompactTreeLayout.prototype.setCellHeights=function(t,e){null!=this.maxRankHeight[e]&&this.maxRankHeight[e]>t.height&&(t.height=this.maxRankHeight[e]);for(var n=t.child;null!=n;)this.setCellHeights(n,e+1),n=n.next},mxCompactTreeLayout.prototype.dfs=function(t,e){var n=mxCellPath.create(t),i=null;if(null!=t&&null==this.visited[n]&&!this.isVertexIgnored(t)){this.visited[n]=t;var i=this.createNode(t),n=this.graph.getModel(),l=null,s=this.graph.getEdges(t,e,this.invert,!this.invert,!1,!0),o=this.graph.getView();this.sortEdges&&this.sortOutgoingEdges(t,s);for(var r=0;r<s.length;r++){var a,h=s[r];this.isEdgeIgnored(h)||(this.resetEdges&&this.setEdgePoints(h,null),this.edgeRouting&&(this.setEdgeStyleEnabled(h,!1),this.setEdgePoints(h,null)),h=null!=(a=o.getState(h))?a.getVisibleTerminal(this.invert):o.getVisibleTerminal(h,this.invert),null!=(a=this.dfs(h,e))&&null!=n.getGeometry(h)&&(null==l?i.child=a:l.next=a,l=a))}}return i},mxCompactTreeLayout.prototype.layout=function(t){if(null!=t){for(var e=t.child;null!=e;)this.layout(e),e=e.next;null!=t.child?this.attachParent(t,this.join(t)):this.layoutLeaf(t)}},mxCompactTreeLayout.prototype.horizontalLayout=function(t,e,n,i){if(t.x+=e+t.offsetX,t.y+=n+t.offsetY,i=this.apply(t,i),null!=(e=t.child)){i=this.horizontalLayout(e,t.x,t.y,i),n=t.y+e.offsetY;for(var l=e.next;null!=l;)i=this.horizontalLayout(l,t.x+e.offsetX,n,i),n+=l.offsetY,l=l.next}return i},mxCompactTreeLayout.prototype.verticalLayout=function(t,e,n,i,l){if(t.x+=n+t.offsetY,t.y+=i+t.offsetX,l=this.apply(t,l),null!=(e=t.child))for(l=this.verticalLayout(e,t,t.x,t.y,l),n=t.x+e.offsetY,i=e.next;null!=i;)l=this.verticalLayout(i,t,n,t.y+e.offsetX,l),n+=i.offsetY,i=i.next;return l},mxCompactTreeLayout.prototype.attachParent=function(t,e){var n=this.nodeDistance+this.levelDistance,i=(e-t.width)/2-this.nodeDistance,e=i+t.width+2*this.nodeDistance-e;t.child.offsetX=n+t.height,t.child.offsetY=e,t.contour.upperHead=this.createLine(t.height,0,this.createLine(n,e,t.contour.upperHead)),t.contour.lowerHead=this.createLine(t.height,0,this.createLine(n,i,t.contour.lowerHead))},mxCompactTreeLayout.prototype.layoutLeaf=function(t){var e=2*this.nodeDistance;t.contour.upperTail=this.createLine(t.height+e,0),t.contour.upperHead=t.contour.upperTail,t.contour.lowerTail=this.createLine(0,-t.width-e),t.contour.lowerHead=this.createLine(t.height+e,0,t.contour.lowerTail)},mxCompactTreeLayout.prototype.join=function(t){var e=2*this.nodeDistance,n=t.child;t.contour=n.contour;for(var i=n.width+e,l=i,n=n.next;null!=n;){var s=this.merge(t.contour,n.contour);n.offsetY=s+i,n.offsetX=0,l+=s+(i=n.width+e),n=n.next}return l},mxCompactTreeLayout.prototype.merge=function(t,e){for(var n=0,i=0,l=0,s=t.lowerHead,o=e.upperHead;null!=o&&null!=s;){var r=this.offset(n,i,o.dx,o.dy,s.dx,s.dy),i=i+r,l=l+r;n+o.dx<=s.dx?(n+=o.dx,i+=o.dy,o=o.next):(n-=s.dx,i-=s.dy,s=s.next)}return null!=o?(n=this.bridge(t.upperTail,0,0,o,n,i),t.upperTail=null!=n.next?e.upperTail:n,t.lowerTail=e.lowerTail):null==(n=this.bridge(e.lowerTail,n,i,s,0,0)).next&&(t.lowerTail=n),t.lowerHead=e.lowerHead,l},mxCompactTreeLayout.prototype.offset=function(t,e,n,i,l,s){return!(l<=t||t+n<=0)&&0<(t=0<l*i-n*s?t<0?t*i/n-e:0<t?t*s/l-e:-e:l<t+n?s-(e+(l-t)*i/n):t+n<l?(n+t)*s/l-(e+i):s-(e+i))?t:0},mxCompactTreeLayout.prototype.bridge=function(t,e,n,i,l,s){return e=l+i.dx-e,0==i.dx?l=i.dy:(l=e*i.dy,l/=i.dx),e=this.createLine(e,l,i.next),t.next=this.createLine(0,s+i.dy-l-n,e),e},mxCompactTreeLayout.prototype.createNode=function(t){var e={};return e.cell=t,e.x=0,e.y=0,e.width=0,e.height=0,null!=(t=this.getVertexBounds(t))&&(this.isHorizontal()?(e.width=t.height,e.height=t.width):(e.width=t.width,e.height=t.height)),e.offsetX=0,e.offsetY=0,e.contour={},e},mxCompactTreeLayout.prototype.apply=function(t,e){var n=this.graph.getModel(),i=t.cell,l=n.getGeometry(i);return null!=i&&null!=l&&(this.isVertexMovable(i)&&(l=this.setVertexLocation(i,t.x,t.y),this.resizeParent)&&(n=n.getParent(i),i=mxCellPath.create(n),null==this.parentsChanged[i])&&(this.parentsChanged[i]=n),e=null==e?new mxRectangle(l.x,l.y,l.width,l.height):new mxRectangle(Math.min(e.x,l.x),Math.min(e.y,l.y),Math.max(e.x+e.width,l.x+l.width),Math.max(e.y+e.height,l.y+l.height))),e},mxCompactTreeLayout.prototype.createLine=function(t,e,n){var i={};return i.dx=t,i.dy=e,i.next=n,i},mxCompactTreeLayout.prototype.adjustParents=function(){var t,e=[];for(t in this.parentsChanged)e.push(this.parentsChanged[t]);this.arrangeGroups(mxUtils.sortCells(e,!0),this.groupPadding,this.groupPaddingTop,this.groupPaddingRight,this.groupPaddingBottom,this.groupPaddingLeft)},mxCompactTreeLayout.prototype.localEdgeProcessing=function(t){for(this.processNodeOutgoing(t),t=t.child;null!=t;)this.localEdgeProcessing(t),t=t.next},mxCompactTreeLayout.prototype.processNodeOutgoing=function(t){for(var e=t.child,n=t.cell,i=0,l=[];null!=e;){i++;var s=e.x;this.horizontal&&(s=e.y),l.push(new WeightedCellSorter(e,s)),e=e.next}l.sort(WeightedCellSorter.prototype.compare),(s=t.width)>(o=(i+1)*this.prefHozEdgeSep)+2*this.prefHozEdgeSep&&(s-=2*this.prefHozEdgeSep),e=(t=s/i)/2,s>o+2*this.prefHozEdgeSep&&(e+=this.prefHozEdgeSep);for(var s=this.minEdgeJetty-this.prefVertEdgeOff,o=this.getVertexBounds(n),r=0;r<l.length;r++){for(var a,h,d=l[r].cell.cell,u=this.getVertexBounds(d),d=this.graph.getEdgesBetween(n,d,!1),p=[],c=0;c<d.length;c++)this.horizontal?(a=o.x+o.width,h=o.y+e,p.push(new mxPoint(a,h)),a=o.x+o.width+s,p.push(new mxPoint(a,h)),h=u.y+u.height/2):(a=o.x+e,h=o.y+o.height,p.push(new mxPoint(a,h)),h=o.y+o.height+s,p.push(new mxPoint(a,h)),a=u.x+u.width/2),p.push(new mxPoint(a,h)),this.setEdgePoints(d[c],p);r<i/2?s+=this.prefVertEdgeOff:i/2<r&&(s-=this.prefVertEdgeOff),e+=t}},mxUtils.extend(mxRadialTreeLayout,mxCompactTreeLayout),mxRadialTreeLayout.prototype.angleOffset=.5,mxRadialTreeLayout.prototype.rootx=0,mxRadialTreeLayout.prototype.rooty=0,mxRadialTreeLayout.prototype.levelDistance=120,mxRadialTreeLayout.prototype.nodeDistance=10,mxRadialTreeLayout.prototype.autoRadius=!1,mxRadialTreeLayout.prototype.sortEdges=!1,mxRadialTreeLayout.prototype.rowMinX=[],mxRadialTreeLayout.prototype.rowMaxX=[],mxRadialTreeLayout.prototype.rowMinCenX=[],mxRadialTreeLayout.prototype.rowMaxCenX=[],mxRadialTreeLayout.prototype.rowRadi=[],mxRadialTreeLayout.prototype.row=[],mxRadialTreeLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxRadialTreeLayout.prototype.execute=function(t,e){this.parent=t,this.edgeRouting=this.useBoundingBox=!1,mxCompactTreeLayout.prototype.execute.apply(this,arguments);var n=null,i=this.getVertexBounds(this.root);for(h in this.centerX=i.x+i.width/2,this.centerY=i.y+i.height/2,this.visited){var l=this.getVertexBounds(this.visited[h]);(n=null!=n?n:l.clone()).add(l)}this.calcRowDims([this.node],0);for(var s=0,o=0,n=0;n<this.row.length;n++)h=(this.rowMaxX[n]-this.centerX-this.nodeDistance)/this.rowRadi[n],s=Math.max(s,(this.centerX-this.rowMinX[n]-this.nodeDistance)/this.rowRadi[n]),o=Math.max(o,h);for(n=0;n<this.row.length;n++)for(var r=this.centerX-this.nodeDistance-s*this.rowRadi[n],a=this.centerX+this.nodeDistance+o*this.rowRadi[n]-r,h=0;h<this.row[n].length;h++)i=(l=this.row[n])[h],l=this.getVertexBounds(i.cell),i.theta=(l.x+l.width/2-r)/a*Math.PI*2;for(n=this.row.length-2;0<=n;n--)for(l=this.row[n],h=0;h<l.length;h++){for(s=(i=l[h]).child,r=o=0;null!=s;)r+=s.theta,o++,s=s.next;0<o&&((s=r/o)>i.theta&&h<l.length-1?i.theta=Math.min(s,l[h+1].theta-Math.PI/10):s<i.theta&&0<h&&(i.theta=Math.max(s,l[h-1].theta+Math.PI/10)))}for(n=0;n<this.row.length;n++)for(h=0;h<this.row[n].length;h++)i=(l=this.row[n])[h],l=this.getVertexBounds(i.cell),this.setVertexLocation(i.cell,this.centerX-l.width/2+this.rowRadi[n]*Math.cos(i.theta),this.centerY-l.height/2+this.rowRadi[n]*Math.sin(i.theta))},mxRadialTreeLayout.prototype.calcRowDims=function(t,e){if(null!=t&&0!=t.length){this.rowMinX[e]=this.centerX,this.rowMaxX[e]=this.centerX,this.rowMinCenX[e]=this.centerX,this.rowMaxCenX[e]=this.centerX;for(var n=!(this.row[e]=[]),i=0;i<t.length;i++)for(var l=null!=t[i]?t[i].child:null;null!=l;){var s=this.getVertexBounds(l.cell);this.rowMinX[e]=Math.min(s.x,this.rowMinX[e]),this.rowMaxX[e]=Math.max(s.x+s.width,this.rowMaxX[e]),this.rowMinCenX[e]=Math.min(s.x+s.width/2,this.rowMinCenX[e]),this.rowMaxCenX[e]=Math.max(s.x+s.width/2,this.rowMaxCenX[e]),this.rowRadi[e]=s.y-this.getVertexBounds(this.root).y,null!=l.child&&(n=!0),this.row[e].push(l),l=l.next}n&&this.calcRowDims(this.row[e],e+1)}},mxFastOrganicLayout.prototype=new mxGraphLayout,mxFastOrganicLayout.prototype.constructor=mxFastOrganicLayout,mxFastOrganicLayout.prototype.useInputOrigin=!0,mxFastOrganicLayout.prototype.resetEdges=!0,mxFastOrganicLayout.prototype.disableEdgeStyle=!0,mxFastOrganicLayout.prototype.forceConstant=50,mxFastOrganicLayout.prototype.forceConstantSquared=0,mxFastOrganicLayout.prototype.minDistanceLimit=2,mxFastOrganicLayout.prototype.maxDistanceLimit=500,mxFastOrganicLayout.prototype.minDistanceLimitSquared=4,mxFastOrganicLayout.prototype.initialTemp=200,mxFastOrganicLayout.prototype.temperature=0,mxFastOrganicLayout.prototype.maxIterations=0,mxFastOrganicLayout.prototype.iteration=0,mxFastOrganicLayout.prototype.allowedToRun=!0,mxFastOrganicLayout.prototype.isVertexIgnored=function(t){return mxGraphLayout.prototype.isVertexIgnored.apply(this,arguments)||0==this.graph.getConnections(t).length},mxFastOrganicLayout.prototype.execute=function(t){var e=this.graph.getModel();this.vertexArray=[];for(var n=this.graph.getChildVertices(t),i=0;i<n.length;i++)this.isVertexIgnored(n[i])||this.vertexArray.push(n[i]);var l=this.useInputOrigin?this.graph.getBoundingBoxFromGeometry(this.vertexArray):null,s=this.vertexArray.length;for(this.indices=[],this.dispX=[],this.dispY=[],this.cellLocation=[],this.isMoveable=[],this.neighbours=[],this.radius=[],this.radiusSquared=[],this.forceConstant<.001&&(this.forceConstant=.001),this.forceConstantSquared=this.forceConstant*this.forceConstant,i=0;i<this.vertexArray.length;i++){var o=this.vertexArray[i],r=(this.cellLocation[i]=[],mxObjectIdentity.get(o)),a=(this.indices[r]=i,this.getVertexBounds(o)),h=a.width,d=a.height,u=a.x,p=a.y;this.cellLocation[i][0]=u+h/2,this.cellLocation[i][1]=p+d/2,this.radius[i]=Math.min(h,d),this.radiusSquared[i]=this.radius[i]*this.radius[i]}e.beginUpdate();try{for(i=0;i<s;i++){this.dispX[i]=0,this.dispY[i]=0,this.isMoveable[i]=this.isVertexMovable(this.vertexArray[i]);var c=this.graph.getConnections(this.vertexArray[i],t),n=this.graph.getOpposites(c,this.vertexArray[i]);for(this.neighbours[i]=[],h=0;h<n.length;h++){this.resetEdges&&this.graph.resetEdge(c[h]),this.disableEdgeStyle&&this.setEdgeStyleEnabled(c[h],!1);var r=mxObjectIdentity.get(n[h]),m=this.indices[r];this.neighbours[i][h]=null!=m?m:i}}for(this.temperature=this.initialTemp,0==this.maxIterations&&(this.maxIterations=20*Math.sqrt(s)),this.iteration=0;this.iteration<this.maxIterations;this.iteration++){if(!this.allowedToRun)return;this.calcRepulsion(),this.calcAttraction(),this.calcPositions(),this.reduceTemperature()}for(t=n=null,i=0;i<this.vertexArray.length;i++)o=this.vertexArray[i],this.isVertexMovable(o)&&null!=(a=this.getVertexBounds(o))&&(this.cellLocation[i][0]-=a.width/2,this.cellLocation[i][1]-=a.height/2,u=this.graph.snap(Math.round(this.cellLocation[i][0])),p=this.graph.snap(Math.round(this.cellLocation[i][1])),this.setVertexLocation(o,u,p),n=null==n?u:Math.min(n,u),t=null==t?p:Math.min(t,p));i=1-(n||0),o=1-(t||0),null!=l&&(i+=l.x,o+=l.y),this.graph.moveCells(this.vertexArray,i,o)}finally{e.endUpdate()}},mxFastOrganicLayout.prototype.calcPositions=function(){for(var t,e,n=0;n<this.vertexArray.length;n++)this.isMoveable[n]&&((e=Math.sqrt(this.dispX[n]*this.dispX[n]+this.dispY[n]*this.dispY[n]))<.001&&(e=.001),t=this.dispX[n]/e*Math.min(e,this.temperature),e=this.dispY[n]/e*Math.min(e,this.temperature),this.dispX[n]=0,this.dispY[n]=0,this.cellLocation[n][0]+=t,this.cellLocation[n][1]+=e)},mxFastOrganicLayout.prototype.calcAttraction=function(){for(var t=0;t<this.vertexArray.length;t++)for(var e=0;e<this.neighbours[t].length;e++){var n,i,l,s,o=this.neighbours[t][e];t!=o&&this.isMoveable[t]&&this.isMoveable[o]&&((i=(l=this.cellLocation[t][0]-this.cellLocation[o][0])*l+(s=this.cellLocation[t][1]-this.cellLocation[o][1])*s-this.radiusSquared[t]-this.radiusSquared[o])<this.minDistanceLimitSquared&&(i=this.minDistanceLimitSquared),s=s/(n=Math.sqrt(i))*(i=i/this.forceConstant),this.dispX[t]-=l=l/n*i,this.dispY[t]-=s,this.dispX[o]+=l,this.dispY[o]+=s)}},mxFastOrganicLayout.prototype.calcRepulsion=function(){for(var t,e,n,i,l=this.vertexArray.length,s=0;s<l;s++)for(var o=s;o<l;o++){if(!this.allowedToRun)return;o!=s&&this.isMoveable[s]&&this.isMoveable[o]&&(t=this.cellLocation[s][0]-this.cellLocation[o][0],e=this.cellLocation[s][1]-this.cellLocation[o][1],0==t&&(t=.01+Math.random()),0==e&&(e=.01+Math.random()),(i=(n=Math.sqrt(t*t+e*e))-this.radius[s]-this.radius[o])>this.maxDistanceLimit||(i<this.minDistanceLimit&&(i=this.minDistanceLimit),e=e/n*(i=this.forceConstantSquared/i),this.dispX[s]+=t=t/n*i,this.dispY[s]+=e,this.dispX[o]-=t,this.dispY[o]-=e))}},mxFastOrganicLayout.prototype.reduceTemperature=function(){this.temperature=this.initialTemp*(1-this.iteration/this.maxIterations)},mxCircleLayout.prototype=new mxGraphLayout,mxCircleLayout.prototype.constructor=mxCircleLayout,mxCircleLayout.prototype.radius=null,mxCircleLayout.prototype.moveCircle=!1,mxCircleLayout.prototype.x0=0,mxCircleLayout.prototype.y0=0,mxCircleLayout.prototype.resetEdges=!0,mxCircleLayout.prototype.disableEdgeStyle=!0,mxCircleLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var n=0,i=null,l=null,s=[],o=e.getChildCount(t),r=0;r<o;r++){var a,h=e.getChildAt(t,r);this.isVertexIgnored(h)?this.isEdgeIgnored(h)||(this.resetEdges&&this.graph.resetEdge(h),this.disableEdgeStyle&&this.setEdgeStyleEnabled(h,!1)):(s.push(h),a=this.getVertexBounds(h),i=null==i?a.y:Math.min(i,a.y),l=null==l?a.x:Math.min(l,a.x),n=Math.max(n,Math.max(a.width,a.height)))}var d=this.getRadius(s.length,n);this.moveCircle&&(l=this.x0,i=this.y0),this.circle(s,d,l,i)}finally{e.endUpdate()}},mxCircleLayout.prototype.getRadius=function(t,e){return Math.max(t*e/Math.PI,this.radius)},mxCircleLayout.prototype.circle=function(t,e,n,i){for(var l=t.length,s=2*Math.PI/l,o=0;o<l;o++)this.isVertexMovable(t[o])&&this.setVertexLocation(t[o],Math.round(n+e+e*Math.sin(o*s)),Math.round(i+e+e*Math.cos(o*s)))},mxParallelEdgeLayout.prototype=new mxGraphLayout,mxParallelEdgeLayout.prototype.constructor=mxParallelEdgeLayout,mxParallelEdgeLayout.prototype.spacing=20,mxParallelEdgeLayout.prototype.checkOverlap=!1,mxParallelEdgeLayout.prototype.execute=function(t,e){var n=this.findParallels(t,e);this.graph.model.beginUpdate();try{for(var i in n){var l=n[i];1<l.length&&this.layout(l)}}finally{this.graph.model.endUpdate()}},mxParallelEdgeLayout.prototype.findParallels=function(t,e){var n=[],i=mxUtils.bind(this,function(t){var e;this.isEdgeIgnored(t)||null!=(e=this.getEdgeId(t))&&(null==n[e]&&(n[e]=[]),n[e].push(t))});if(null!=e)for(var l=0;l<e.length;l++)i(e[l]);else for(var s=this.graph.getModel(),o=s.getChildCount(t),l=0;l<o;l++)i(s.getChildAt(t,l));return n},mxParallelEdgeLayout.prototype.getEdgeId=function(t){var e=(n=this.graph.getView()).getVisibleTerminal(t,!0),n=n.getVisibleTerminal(t,!1),i="";if(null==e||null==n)return null;if(e=mxObjectIdentity.get(e),n=mxObjectIdentity.get(n),this.checkOverlap&&null!=(t=this.graph.view.getState(t))&&null!=t.absolutePoints){for(var i=[],l=0;l<t.absolutePoints.length;l++){var s=t.absolutePoints[l];null!=s&&i.push(s.x,s.y)}i=i.join(",")}return(n<e?n+"-"+e:e+"-"+n)+i},mxParallelEdgeLayout.prototype.layout=function(t){var e=t[0],n=this.graph.getView(),i=(s=this.graph.getModel()).getGeometry(n.getVisibleTerminal(e,!0));if(i==(s=s.getGeometry(n.getVisibleTerminal(e,!1))))for(var e=i.x+i.width+this.spacing,n=i.y+i.height/2,l=0;l<t.length;l++)this.route(t[l],e,n),e+=this.spacing;else if(null!=i&&null!=s){var s,e=i.x+i.width/2,n=i.y+i.height/2,l=s.x+s.width/2-e,o=s.y+s.height/2-n;if(0<(s=Math.sqrt(l*l+o*o)))for(i=o*this.spacing/s,s=l*this.spacing/s,e=e+l/2+i*(t.length-1)/2,n=n+o/2-s*(t.length-1)/2,l=0;l<t.length;l++)this.route(t[l],e,n),e-=i,n+=s}},mxParallelEdgeLayout.prototype.route=function(t,e,n){this.graph.isCellMovable(t)&&this.setEdgePoints(t,[new mxPoint(e,n)])},mxCompositeLayout.prototype=new mxGraphLayout,mxCompositeLayout.prototype.constructor=mxCompositeLayout,mxCompositeLayout.prototype.layouts=null,mxCompositeLayout.prototype.master=null,mxCompositeLayout.prototype.moveCell=function(t,e,n){null!=this.master?this.master.moveCell.apply(this.master,arguments):this.layouts[0].moveCell.apply(this.layouts[0],arguments)},mxCompositeLayout.prototype.execute=function(t){var e=this.graph.getModel();e.beginUpdate();try{for(var n=0;n<this.layouts.length;n++)this.layouts[n].execute.apply(this.layouts[n],arguments)}finally{e.endUpdate()}},mxEdgeLabelLayout.prototype=new mxGraphLayout,mxEdgeLabelLayout.prototype.constructor=mxEdgeLabelLayout,mxEdgeLabelLayout.prototype.execute=function(t){for(var e=this.graph.view,n=this.graph.getModel(),i=[],l=[],s=n.getChildCount(t),o=0;o<s;o++){var r=n.getChildAt(t,o),a=e.getState(r);null!=a&&(this.isVertexIgnored(r)?this.isEdgeIgnored(r)||i.push(a):l.push(a))}this.placeLabels(l,i)},mxEdgeLabelLayout.prototype.placeLabels=function(t,e){var n=this.graph.getModel();n.beginUpdate();try{for(var i=0;i<e.length;i++){var l=e[i];if(null!=l&&null!=l.text&&null!=l.text.boundingBox)for(var s=0;s<t.length;s++){var o=t[s];null!=o&&this.avoid(l,o)}}}finally{n.endUpdate()}},mxEdgeLabelLayout.prototype.avoid=function(t,e){var n,i,l=this.graph.getModel(),s=t.text.boundingBox;mxUtils.intersects(s,e)&&(n=-s.y-s.height+e.y,i=-s.y+e.y+e.height,n=Math.abs(n)<Math.abs(i)?n:i,i=-s.x-s.width+e.x,s=-s.x+e.x+e.width,s=Math.abs(i)<Math.abs(s)?i:s,Math.abs(s)<Math.abs(n)?n=0:s=0,null!=(i=l.getGeometry(t.cell)))&&(null!=(i=i.clone()).offset?(i.offset.x+=s,i.offset.y+=n):i.offset=new mxPoint(s,n),l.setGeometry(t.cell,i))},mxGraphAbstractHierarchyCell.prototype.maxRank=-1,mxGraphAbstractHierarchyCell.prototype.minRank=-1,mxGraphAbstractHierarchyCell.prototype.x=null,mxGraphAbstractHierarchyCell.prototype.y=null,mxGraphAbstractHierarchyCell.prototype.width=0,mxGraphAbstractHierarchyCell.prototype.height=0,mxGraphAbstractHierarchyCell.prototype.nextLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.previousLayerConnectedCells=null,mxGraphAbstractHierarchyCell.prototype.temp=null,mxGraphAbstractHierarchyCell.prototype.getNextLayerConnectedCells=function(t){return null},mxGraphAbstractHierarchyCell.prototype.getPreviousLayerConnectedCells=function(t){return null},mxGraphAbstractHierarchyCell.prototype.isEdge=function(){return!1},mxGraphAbstractHierarchyCell.prototype.isVertex=function(){return!1},mxGraphAbstractHierarchyCell.prototype.getGeneralPurposeVariable=function(t){return null},mxGraphAbstractHierarchyCell.prototype.setGeneralPurposeVariable=function(t,e){return null},mxGraphAbstractHierarchyCell.prototype.setX=function(t,e){this.isVertex()?this.x[0]=e:this.isEdge()&&(this.x[t-this.minRank-1]=e)},mxGraphAbstractHierarchyCell.prototype.getX=function(t){return this.isVertex()?this.x[0]:this.isEdge()?this.x[t-this.minRank-1]:0},mxGraphAbstractHierarchyCell.prototype.setY=function(t,e){this.isVertex()?this.y[0]=e:this.isEdge()&&(this.y[t-this.minRank-1]=e)},mxGraphHierarchyNode.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyNode.prototype.constructor=mxGraphHierarchyNode,mxGraphHierarchyNode.prototype.cell=null,mxGraphHierarchyNode.prototype.id=null,mxGraphHierarchyNode.prototype.connectsAsTarget=null,mxGraphHierarchyNode.prototype.connectsAsSource=null,mxGraphHierarchyNode.prototype.hashCode=!1,mxGraphHierarchyNode.prototype.getRankValue=function(t){return this.maxRank},mxGraphHierarchyNode.prototype.getNextLayerConnectedCells=function(t){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[],this.nextLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsTarget.length;e++){var n=this.connectsAsTarget[e];-1==n.maxRank||n.maxRank==t+1?this.nextLayerConnectedCells[0].push(n.source):this.nextLayerConnectedCells[0].push(n)}}return this.nextLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.getPreviousLayerConnectedCells=function(t){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[],this.previousLayerConnectedCells[0]=[];for(var e=0;e<this.connectsAsSource.length;e++){var n=this.connectsAsSource[e];-1==n.minRank||n.minRank==t-1?this.previousLayerConnectedCells[0].push(n.target):this.previousLayerConnectedCells[0].push(n)}}return this.previousLayerConnectedCells[0]},mxGraphHierarchyNode.prototype.isVertex=function(){return!0},mxGraphHierarchyNode.prototype.getGeneralPurposeVariable=function(t){return this.temp[0]},mxGraphHierarchyNode.prototype.setGeneralPurposeVariable=function(t,e){this.temp[0]=e},mxGraphHierarchyNode.prototype.isAncestor=function(t){if(null!=t&&null!=this.hashCode&&null!=t.hashCode&&this.hashCode.length<t.hashCode.length){if(this.hashCode!=t.hashCode){if(null==this.hashCode||null==this.hashCode)return!1;for(var e=0;e<this.hashCode.length;e++)if(this.hashCode[e]!=t.hashCode[e])return!1}return!0}return!1},mxGraphHierarchyNode.prototype.getCoreCell=function(){return this.cell},mxGraphHierarchyEdge.prototype=new mxGraphAbstractHierarchyCell,mxGraphHierarchyEdge.prototype.constructor=mxGraphHierarchyEdge,mxGraphHierarchyEdge.prototype.edges=null,mxGraphHierarchyEdge.prototype.ids=null,mxGraphHierarchyEdge.prototype.source=null,mxGraphHierarchyEdge.prototype.target=null,mxGraphHierarchyEdge.prototype.isReversed=!1,mxGraphHierarchyEdge.prototype.invert=function(t){t=this.source,this.source=this.target,this.target=t,this.isReversed=!this.isReversed},mxGraphHierarchyEdge.prototype.getNextLayerConnectedCells=function(t){if(null==this.nextLayerConnectedCells){this.nextLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.nextLayerConnectedCells[e]=[],e==this.temp.length-1?this.nextLayerConnectedCells[e].push(this.source):this.nextLayerConnectedCells[e].push(this)}return this.nextLayerConnectedCells[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.getPreviousLayerConnectedCells=function(t){if(null==this.previousLayerConnectedCells){this.previousLayerConnectedCells=[];for(var e=0;e<this.temp.length;e++)this.previousLayerConnectedCells[e]=[],0==e?this.previousLayerConnectedCells[e].push(this.target):this.previousLayerConnectedCells[e].push(this)}return this.previousLayerConnectedCells[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.isEdge=function(){return!0},mxGraphHierarchyEdge.prototype.getGeneralPurposeVariable=function(t){return this.temp[t-this.minRank-1]},mxGraphHierarchyEdge.prototype.setGeneralPurposeVariable=function(t,e){this.temp[t-this.minRank-1]=e},mxGraphHierarchyEdge.prototype.getCoreCell=function(){return null!=this.edges&&0<this.edges.length?this.edges[0]:null},mxGraphHierarchyModel.prototype.maxRank=null,mxGraphHierarchyModel.prototype.vertexMapper=null,mxGraphHierarchyModel.prototype.edgeMapper=null,mxGraphHierarchyModel.prototype.ranks=null,mxGraphHierarchyModel.prototype.roots=null,mxGraphHierarchyModel.prototype.parent=null,mxGraphHierarchyModel.prototype.dfsCount=0,mxGraphHierarchyModel.prototype.SOURCESCANSTARTRANK=1e8,mxGraphHierarchyModel.prototype.tightenToSource=!1,mxGraphHierarchyModel.prototype.createInternalCells=function(t,e,n){for(var i=t.getGraph(),l=0;l<e.length;l++){n[l]=new mxGraphHierarchyNode(e[l]),this.vertexMapper.put(e[l],n[l]);var s=t.getEdges(e[l]);n[l].connectsAsSource=[];for(var o=0;o<s.length;o++)if((a=t.getVisibleTerminal(s[o],!1))!=e[l]&&t.graph.model.isVertex(a)&&!t.isVertexIgnored(a)){var r=t.getEdgesBetween(e[l],a,!1),a=t.getEdgesBetween(e[l],a,!0);if(null!=r&&0<r.length&&null==this.edgeMapper.get(r[0])&&2*a.length>=r.length){for(var a=new mxGraphHierarchyEdge(r),h=0;h<r.length;h++){var d=r[h];this.edgeMapper.put(d,a),i.resetEdge(d),t.disableEdgeStyle&&(t.setEdgeStyleEnabled(d,!1),t.setOrthogonalEdge(d,!0))}a.source=n[l],mxUtils.indexOf(n[l].connectsAsSource,a)<0&&n[l].connectsAsSource.push(a)}}n[l].temp[0]=0}},mxGraphHierarchyModel.prototype.initialRank=function(){var t=[];if(null!=this.roots)for(var e=0;e<this.roots.length;e++)null!=(l=this.vertexMapper.get(this.roots[e]))&&t.push(l);for(var n=this.vertexMapper.getValues(),e=0;e<n.length;e++)n[e].temp[0]=-1;for(var i=t.slice();0<t.length;){for(var l,s=(l=t[0]).connectsAsTarget,o=l.connectsAsSource,r=!0,a=this.SOURCESCANSTARTRANK,e=0;e<s.length;e++){var h=s[e];if(5270620!=h.temp[0]){r=!1;break}h=h.source,a=Math.min(a,h.temp[0]-1)}if(r){if(l.temp[0]=a,this.maxRank=Math.min(this.maxRank,a),null!=o)for(e=0;e<o.length;e++)(h=o[e]).temp[0]=5270620,-1==(h=h.target).temp[0]&&(t.push(h),h.temp[0]=-2);t.shift()}else if(e=t.shift(),t.push(l),e==l&&1==t.length)break}for(e=0;e<n.length;e++)n[e].temp[0]-=this.maxRank;for(e=0;e<i.length;e++)for(s=(l=i[e]).connectsAsSource,n=t=0;n<s.length;n++)h=(h=s[n]).target,l.temp[0]=Math.max(t,h.temp[0]+1),t=l.temp[0];this.maxRank=this.SOURCESCANSTARTRANK-this.maxRank},mxGraphHierarchyModel.prototype.fixRanks=function(){var s=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)s[t]=[],this.ranks[t]=s[t];var e=null;if(null!=this.roots)for(var n=this.roots,e=[],t=0;t<n.length;t++){var i=this.vertexMapper.get(n[t]);e[t]=i}this.visit(function(t,e,n,i,l){if(0==l&&e.maxRank<0&&e.minRank<0&&(s[e.temp[0]].push(e),e.maxRank=e.temp[0],e.minRank=e.temp[0],e.temp[0]=s[e.maxRank].length-1),null!=t&&null!=n&&1<t.maxRank-e.maxRank)for(n.maxRank=t.maxRank,n.minRank=e.maxRank,n.temp=[],n.x=[],n.y=[],t=n.minRank+1;t<n.maxRank;t++)s[t].push(n),n.setGeneralPurposeVariable(t,s[t].length-1)},e,!1,null)},mxGraphHierarchyModel.prototype.visit=function(t,e,n,i){if(null!=e){for(var l=0;l<e.length;l++){var s=e[l];null!=s&&(null==i&&(i={}),n?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=l,this.extendedDfs(null,s,null,t,i,s.hashCode,l,0)):this.dfs(null,s,null,t,i,0))}this.dfsCount++}},mxGraphHierarchyModel.prototype.dfs=function(t,e,n,i,l,s){if(null!=e){var o=e.id;if(null==l[o])for(i(t,l[o]=e,n,s,0),t=e.connectsAsSource.slice(),n=0;n<t.length;n++)o=t[n],this.dfs(e,o.target,o,i,l,s+1);else i(t,e,n,s,1)}},mxGraphHierarchyModel.prototype.extendedDfs=function(t,e,n,i,l,s,o,r){if(null!=e)if(null==t||null!=e.hashCode&&e.hashCode[0]==t.hashCode[0]||(s=t.hashCode.length+1,e.hashCode=t.hashCode.slice(),e.hashCode[s-1]=o),null==l[o=e.id])for(i(t,l[o]=e,n,r,0),t=e.connectsAsSource.slice(),n=0;n<t.length;n++)o=t[n],this.extendedDfs(e,o.target,o,i,l,e.hashCode,n,r+1);else i(t,e,n,r,1)},mxSwimlaneModel.prototype.maxRank=null,mxSwimlaneModel.prototype.vertexMapper=null,mxSwimlaneModel.prototype.edgeMapper=null,mxSwimlaneModel.prototype.ranks=null,mxSwimlaneModel.prototype.roots=null,mxSwimlaneModel.prototype.parent=null,mxSwimlaneModel.prototype.dfsCount=0,mxSwimlaneModel.prototype.SOURCESCANSTARTRANK=1e8,mxSwimlaneModel.prototype.tightenToSource=!1,mxSwimlaneModel.prototype.ranksPerGroup=null,mxSwimlaneModel.prototype.createInternalCells=function(t,e,n){for(var i=t.getGraph(),l=t.swimlanes,s=0;s<e.length;s++){n[s]=new mxGraphHierarchyNode(e[s]),this.vertexMapper.put(e[s],n[s]),n[s].swimlaneIndex=-1;for(var o=0;o<l.length;o++)if(i.model.getParent(e[s])==l[o]){n[s].swimlaneIndex=o;break}o=t.getEdges(e[s]),n[s].connectsAsSource=[];for(var r=0;r<o.length;r++)if((h=t.getVisibleTerminal(o[r],!1))!=e[s]&&t.graph.model.isVertex(h)&&!t.isVertexIgnored(h)){var a=t.getEdgesBetween(e[s],h,!1),h=t.getEdgesBetween(e[s],h,!0);if(null!=a&&0<a.length&&null==this.edgeMapper.get(a[0])&&2*h.length>=a.length){for(var h=new mxGraphHierarchyEdge(a),d=0;d<a.length;d++){var u=a[d];this.edgeMapper.put(u,h),i.resetEdge(u),t.disableEdgeStyle&&(t.setEdgeStyleEnabled(u,!1),t.setOrthogonalEdge(u,!0))}h.source=n[s],mxUtils.indexOf(n[s].connectsAsSource,h)<0&&n[s].connectsAsSource.push(h)}}n[s].temp[0]=0}},mxSwimlaneModel.prototype.initialRank=function(){this.ranksPerGroup=[];var t=[],e={};if(null!=this.roots)for(var n=0;n<this.roots.length;n++){var i=this.vertexMapper.get(this.roots[n]);this.maxChainDfs(null,i,null,e,0),null!=i&&t.push(i)}for(i=[],e=[],n=this.ranksPerGroup.length-1;0<=n;n--)i[n]=n==this.ranksPerGroup.length-1?0:e[n+1]+1,e[n]=i[n]+this.ranksPerGroup[n];for(this.maxRank=e[0],i=this.vertexMapper.getValues(),n=0;n<i.length;n++)i[n].temp[0]=-1;for(t.slice();0<t.length;){for(var l=(i=t[0]).connectsAsTarget,s=i.connectsAsSource,o=!0,r=e[0],n=0;n<l.length;n++){var a=l[n];if(5270620!=a.temp[0]){o=!1;break}a=a.source,r=Math.min(r,a.temp[0]-1)}if(o){if(r>e[i.swimlaneIndex]&&(r=e[i.swimlaneIndex]),i.temp[0]=r,null!=s)for(n=0;n<s.length;n++)(a=s[n]).temp[0]=5270620,-1==(a=a.target).temp[0]&&(t.push(a),a.temp[0]=-2);t.shift()}else if(n=t.shift(),t.push(i),n==i&&1==t.length)break}},mxSwimlaneModel.prototype.maxChainDfs=function(t,e,n,i,l){if(null!=e&&null==i[t=mxCellPath.create(e.cell)])for(t=(i[t]=e).swimlaneIndex,(null==this.ranksPerGroup[t]||this.ranksPerGroup[t]<l)&&(this.ranksPerGroup[t]=l),t=e.connectsAsSource.slice(),n=0;n<t.length;n++){var s=t[n],o=s.target;e.swimlaneIndex<o.swimlaneIndex?this.maxChainDfs(e,o,s,mxUtils.clone(i,null,!0),0):e.swimlaneIndex==o.swimlaneIndex&&this.maxChainDfs(e,o,s,mxUtils.clone(i,null,!0),l+1)}},mxSwimlaneModel.prototype.fixRanks=function(){var s=[];this.ranks=[];for(var t=0;t<this.maxRank+1;t++)s[t]=[],this.ranks[t]=s[t];var e=null;if(null!=this.roots)for(var n=this.roots,e=[],t=0;t<n.length;t++){var i=this.vertexMapper.get(n[t]);e[t]=i}this.visit(function(t,e,n,i,l){if(0==l&&e.maxRank<0&&e.minRank<0&&(s[e.temp[0]].push(e),e.maxRank=e.temp[0],e.minRank=e.temp[0],e.temp[0]=s[e.maxRank].length-1),null!=t&&null!=n&&1<t.maxRank-e.maxRank)for(n.maxRank=t.maxRank,n.minRank=e.maxRank,n.temp=[],n.x=[],n.y=[],t=n.minRank+1;t<n.maxRank;t++)s[t].push(n),n.setGeneralPurposeVariable(t,s[t].length-1)},e,!1,null)},mxSwimlaneModel.prototype.visit=function(t,e,n,i){if(null!=e){for(var l=0;l<e.length;l++){var s=e[l];null!=s&&(null==i&&(i={}),n?(s.hashCode=[],s.hashCode[0]=this.dfsCount,s.hashCode[1]=l,this.extendedDfs(null,s,null,t,i,s.hashCode,l,0)):this.dfs(null,s,null,t,i,0))}this.dfsCount++}},mxSwimlaneModel.prototype.dfs=function(t,e,n,i,l,s){if(null!=e){var o=e.id;if(null==l[o])for(i(t,l[o]=e,n,s,0),t=e.connectsAsSource.slice(),n=0;n<t.length;n++)o=t[n],this.dfs(e,o.target,o,i,l,s+1);else i(t,e,n,s,1)}},mxSwimlaneModel.prototype.extendedDfs=function(t,e,n,i,l,s,o,r){if(null!=e)if(null==t||null!=e.hashCode&&e.hashCode[0]==t.hashCode[0]||(s=t.hashCode.length+1,e.hashCode=t.hashCode.slice(),e.hashCode[s-1]=o),null==l[o=e.id]){for(i(t,l[o]=e,n,r,0),t=e.connectsAsSource.slice(),n=e.connectsAsTarget.slice(),o=0;o<t.length;o++){var a=(s=t[o]).target;e.swimlaneIndex<=a.swimlaneIndex&&this.extendedDfs(e,a,s,i,l,e.hashCode,o,r+1)}for(o=0;o<n.length;o++)a=(s=n[o]).source,e.swimlaneIndex<a.swimlaneIndex&&this.extendedDfs(e,a,s,i,l,e.hashCode,o,r+1)}else i(t,e,n,r,1)},mxHierarchicalLayoutStage.prototype.execute=function(t){},mxMedianHybridCrossingReduction.prototype=new mxHierarchicalLayoutStage,mxMedianHybridCrossingReduction.prototype.constructor=mxMedianHybridCrossingReduction,mxMedianHybridCrossingReduction.prototype.layout=null,mxMedianHybridCrossingReduction.prototype.maxIterations=24,mxMedianHybridCrossingReduction.prototype.nestedBestRanks=null,mxMedianHybridCrossingReduction.prototype.currentBestCrossings=0,mxMedianHybridCrossingReduction.prototype.iterationsWithoutImprovement=0,mxMedianHybridCrossingReduction.prototype.maxNoImprovementIterations=2,mxMedianHybridCrossingReduction.prototype.execute=function(t){t=this.layout.getModel(),this.nestedBestRanks=[];for(var e=0;e<t.ranks.length;e++)this.nestedBestRanks[e]=t.ranks[e].slice();for(var n=0,i=this.calculateCrossings(t),e=0;e<this.maxIterations&&n<this.maxNoImprovementIterations;e++){this.weightedMedian(e,t),this.transpose(e,t);var l=this.calculateCrossings(t);if(l<i)for(i=l,l=n=0;l<this.nestedBestRanks.length;l++)for(var s=t.ranks[l],o=0;o<s.length;o++){var r=s[o];this.nestedBestRanks[l][r.getGeneralPurposeVariable(l)]=r}else for(n++,l=0;l<this.nestedBestRanks.length;l++)for(s=t.ranks[l],o=0;o<s.length;o++)(r=s[o]).setGeneralPurposeVariable(l,o);if(0==i)break}for(n=[],i=[],e=0;e<t.maxRank+1;e++)i[e]=[],n[e]=i[e];for(e=0;e<this.nestedBestRanks.length;e++)for(l=0;l<this.nestedBestRanks[e].length;l++)i[e].push(this.nestedBestRanks[e][l]);t.ranks=n},mxMedianHybridCrossingReduction.prototype.calculateCrossings=function(t){for(var e=t.ranks.length,n=0,i=1;i<e;i++)n+=this.calculateRankCrossing(i,t);return n},mxMedianHybridCrossingReduction.prototype.calculateRankCrossing=function(t,e){for(var n=0,i=e.ranks[t],l=e.ranks[t-1],s=[],o=0;o<i.length;o++){for(var r=(a=i[o]).getGeneralPurposeVariable(t),a=a.getPreviousLayerConnectedCells(t),h=[],d=0;d<a.length;d++){var u=a[d].getGeneralPurposeVariable(t-1);h.push(u)}h.sort(function(t,e){return t-e}),s[r]=h}for(i=[],o=0;o<s.length;o++)i=i.concat(s[o]);for(s=1;s<l.length;)s<<=1;for(r=2*s-1,--s,l=[],o=0;o<r;++o)l[o]=0;for(o=0;o<i.length;o++)for(++l[r=i[o]+s];0<r;)r%2&&(n+=l[r+1]),++l[r=r-1>>1];return n},mxMedianHybridCrossingReduction.prototype.transpose=function(t,e){for(var n=!0,i=0;n&&i++<10;)for(var l=1==t%2&&1==i%2,n=!1,s=0;s<e.ranks.length;s++){for(var o=e.ranks[s],r=[],a=0;a<o.length;a++){var h=o[a],d=h.getGeneralPurposeVariable(s);r[d=d<0?a:d]=h}for(var u=null,p=null,c=null,m=null,g=null,a=0;a<o.length-1;a++){if(0==a){for(var x,h=(x=r[a]).getNextLayerConnectedCells(s),d=x.getPreviousLayerConnectedCells(s),y=[],f=[],C=0;C<h.length;C++)y[C]=h[C].getGeneralPurposeVariable(s+1);for(C=0;C<d.length;C++)f[C]=d[C].getGeneralPurposeVariable(s-1)}else h=u,d=p,y=c,f=m,x=g;for(u=(g=r[a+1]).getNextLayerConnectedCells(s),p=g.getPreviousLayerConnectedCells(s),c=[],m=[],C=0;C<u.length;C++)c[C]=u[C].getGeneralPurposeVariable(s+1);for(C=0;C<p.length;C++)m[C]=p[C].getGeneralPurposeVariable(s-1);for(var E=0,v=0,C=0;C<y.length;C++)for(var S=0;S<c.length;S++)y[C]>c[S]&&E++,y[C]<c[S]&&v++;for(C=0;C<f.length;C++)for(S=0;S<m.length;S++)f[C]>m[S]&&E++,f[C]<m[S]&&v++;(v<E||v==E&&l)&&(u=x.getGeneralPurposeVariable(s),x.setGeneralPurposeVariable(s,g.getGeneralPurposeVariable(s)),g.setGeneralPurposeVariable(s,u),u=h,p=d,c=y,m=f,g=x,l||(n=!0))}}},mxMedianHybridCrossingReduction.prototype.weightedMedian=function(t,e){var n=0==t%2;if(n)for(var i=e.maxRank-1;0<=i;i--)this.medianRank(i,n);else for(i=1;i<e.maxRank;i++)this.medianRank(i,n)},mxMedianHybridCrossingReduction.prototype.medianRank=function(t,e){for(var n=this.nestedBestRanks[t].length,i=[],l=[],s=0;s<n;s++){var o,r=this.nestedBestRanks[t][s],a=new MedianCellSorter;a.cell=r,null!=(o=e?r.getNextLayerConnectedCells(t):r.getPreviousLayerConnectedCells(t))&&0!=o.length?(a.medianValue=this.medianValue(o,e?t+1:t-1),i.push(a)):l[r.getGeneralPurposeVariable(t)]=!0}for(i.sort(MedianCellSorter.prototype.compare),s=0;s<n;s++)null==l[s]&&(r=i.shift().cell).setGeneralPurposeVariable(t,s)},mxMedianHybridCrossingReduction.prototype.medianValue=function(t,e){for(var n=[],i=0,l=0;l<t.length;l++){var s=t[l];n[i++]=s.getGeneralPurposeVariable(e)}return n.sort(function(t,e){return t-e}),1==i%2?n[Math.floor(i/2)]:2==i?(n[0]+n[1])/2:(n[(l=i/2)-1]*(i=n[i-1]-n[l])+n[l]*(s=n[l-1]-n[0]))/(s+i)},MedianCellSorter.prototype.medianValue=0,MedianCellSorter.prototype.cell=!1,MedianCellSorter.prototype.compare=function(t,e){return null!=t&&null!=e?e.medianValue>t.medianValue?-1:e.medianValue<t.medianValue?1:0:0},mxMinimumCycleRemover.prototype=new mxHierarchicalLayoutStage,mxMinimumCycleRemover.prototype.constructor=mxMinimumCycleRemover,mxMinimumCycleRemover.prototype.layout=null,mxMinimumCycleRemover.prototype.execute=function(t){t=this.layout.getModel();for(var s={},e=t.vertexMapper.getValues(),o={},n=0;n<e.length;n++)o[e[n].id]=e[n];if((e=null)!=t.roots)for(var i=t.roots,e=[],n=0;n<i.length;n++)e[n]=t.vertexMapper.get(i[n]);t.visit(function(t,e,n,i,l){e.isAncestor(t)&&(n.invert(),mxUtils.remove(n,t.connectsAsSource),t.connectsAsTarget.push(n),mxUtils.remove(n,e.connectsAsTarget),e.connectsAsSource.push(n)),s[e.id]=e,delete o[e.id]},e,!0,null),n=mxUtils.clone(s,null,!0),t.visit(function(t,e,n,i,l){e.isAncestor(t)&&(n.invert(),mxUtils.remove(n,t.connectsAsSource),e.connectsAsSource.push(n),t.connectsAsTarget.push(n),mxUtils.remove(n,e.connectsAsTarget)),s[e.id]=e,delete o[e.id]},o,!0,n)},mxCoordinateAssignment.prototype=new mxHierarchicalLayoutStage,mxCoordinateAssignment.prototype.constructor=mxCoordinateAssignment,mxCoordinateAssignment.prototype.layout=null,mxCoordinateAssignment.prototype.intraCellSpacing=30,mxCoordinateAssignment.prototype.interRankCellSpacing=100,mxCoordinateAssignment.prototype.parallelEdgeSpacing=10,mxCoordinateAssignment.prototype.maxIterations=8,mxCoordinateAssignment.prototype.prefHozEdgeSep=5,mxCoordinateAssignment.prototype.prefVertEdgeOff=2,mxCoordinateAssignment.prototype.minEdgeJetty=12,mxCoordinateAssignment.prototype.channelBuffer=4,mxCoordinateAssignment.prototype.jettyPositions=null,mxCoordinateAssignment.prototype.orientation=mxConstants.DIRECTION_NORTH,mxCoordinateAssignment.prototype.initialX=null,mxCoordinateAssignment.prototype.limitX=null,mxCoordinateAssignment.prototype.currentXDelta=null,mxCoordinateAssignment.prototype.widestRank=null,mxCoordinateAssignment.prototype.rankTopY=null,mxCoordinateAssignment.prototype.rankBottomY=null,mxCoordinateAssignment.prototype.widestRankValue=null,mxCoordinateAssignment.prototype.rankWidths=null,mxCoordinateAssignment.prototype.rankY=null,mxCoordinateAssignment.prototype.fineTuning=!0,mxCoordinateAssignment.prototype.nextLayerConnectedCache=null,mxCoordinateAssignment.prototype.previousLayerConnectedCache=null,mxCoordinateAssignment.prototype.groupPadding=10,mxCoordinateAssignment.prototype.printStatus=function(){var t=this.layout.getModel();mxLog.show(),mxLog.writeln("======Coord assignment debug=======");for(var e=0;e<t.ranks.length;e++){mxLog.write("Rank ",e," : ");for(var n=t.ranks[e],i=0;i<n.length;i++)mxLog.write(n[i].getGeneralPurposeVariable(e),"  ");mxLog.writeln()}mxLog.writeln("====================================")},mxCoordinateAssignment.prototype.execute=function(t){this.jettyPositions={},t=this.layout.getModel(),this.currentXDelta=0,this.initialCoords(this.layout.getGraph(),t),this.fineTuning&&this.minNode(t);var e=1e8;if(this.fineTuning)for(var n=0;n<this.maxIterations;n++){if(0!=n&&(this.medianPos(n,t),this.minNode(t)),this.currentXDelta<e){for(var i=0;i<t.ranks.length;i++)for(var l=t.ranks[i],s=0;s<l.length;s++){var o=l[s];o.setX(i,o.getGeneralPurposeVariable(i))}e=this.currentXDelta}else for(i=0;i<t.ranks.length;i++)for(l=t.ranks[i],s=0;s<l.length;s++)(o=l[s]).setGeneralPurposeVariable(i,o.getX(i));this.minPath(this.layout.getGraph(),t),this.currentXDelta=0}this.setCellLocations(this.layout.getGraph(),t)},mxCoordinateAssignment.prototype.minNode=function(t){for(var e=[],n=new mxDictionary,i=[],l=0;l<=t.maxRank;l++){i[l]=t.ranks[l];for(var s=0;s<i[l].length;s++)(h=new WeightedCellSorter(o=i[l][s],l)).rankIndex=s,h.visited=!0,e.push(h),n.put(o,h)}for(t=10*e.length,s=0;0<e.length&&s<=t;){var o,l=(o=e.shift()).cell,r=o.weightedValue,a=parseInt(o.rankIndex),h=l.getNextLayerConnectedCells(r),d=l.getPreviousLayerConnectedCells(r),u=h.length,p=d.length,c=this.medianXValue(h,r+1),m=this.medianXValue(d,r-1),g=u+p,x=l.getGeneralPurposeVariable(r),c=0<g?(c*u+m*p)/g:x,u=!1;if(c<x-1?0==a||(x=(x=(a=i[r][a-1]).getGeneralPurposeVariable(r))+a.width/2+this.intraCellSpacing+l.width/2)<c?(l.setGeneralPurposeVariable(r,c),u=!0):x<l.getGeneralPurposeVariable(r)-1&&(l.setGeneralPurposeVariable(r,x),u=!0):x+1<c&&(a==i[r].length-1||c<(x=(x=(a=i[r][a+1]).getGeneralPurposeVariable(r))-a.width/2-this.intraCellSpacing-l.width/2)?(l.setGeneralPurposeVariable(r,c),u=!0):x>l.getGeneralPurposeVariable(r)+1&&(l.setGeneralPurposeVariable(r,x),u=!0)),u){for(l=0;l<h.length;l++)r=h[l],null!=(r=n.get(r))&&0==r.visited&&(r.visited=!0,e.push(r));for(l=0;l<d.length;l++)r=d[l],null!=(r=n.get(r))&&0==r.visited&&(r.visited=!0,e.push(r))}o.visited=!1,s++}},mxCoordinateAssignment.prototype.medianPos=function(t,e){if(0==t%2)for(var n=e.maxRank;0<n;n--)this.rankMedianPosition(n-1,e,n);else for(n=0;n<e.maxRank-1;n++)this.rankMedianPosition(n+1,e,n)},mxCoordinateAssignment.prototype.rankMedianPosition=function(t,e,n){e=e.ranks[t];for(var i=[],l={},s=0;s<e.length;s++){var o=e[s];i[s]=new WeightedCellSorter,i[s].cell=o,i[s].rankIndex=s,l[o.id]=i[s],r=n<t?o.getPreviousLayerConnectedCells(t):o.getNextLayerConnectedCells(t),i[s].weightedValue=this.calculatedWeightedValue(o,r)}for(i.sort(WeightedCellSorter.prototype.compare),s=0;s<i.length;s++){var r,o=i[s].cell,a=0,h=(null!=(r=(n<t?o.getPreviousLayerConnectedCells(t):o.getNextLayerConnectedCells(t)).slice())&&(a=0<(a=r.length)?this.medianXValue(r,n):o.getGeneralPurposeVariable(t)),0);r=-1e8;for(var d,u=i[s].rankIndex-1;0<=u;){var p,c=l[e[u].id];null!=c&&(p=c.cell,c.visited?(r=p.getGeneralPurposeVariable(t)+p.width/2+this.intraCellSpacing+h+o.width/2,u=-1):(h+=p.width+this.intraCellSpacing,u--))}for(h=0,p=1e8,u=i[s].rankIndex+1;u<i.length;)null!=(c=l[e[u].id])&&(d=c.cell,c.visited?(p=d.getGeneralPurposeVariable(t)-d.width/2-this.intraCellSpacing-h-o.width/2,u=i.length):(h+=d.width+this.intraCellSpacing,u++));r<=a&&a<=p?o.setGeneralPurposeVariable(t,a):a<r?(o.setGeneralPurposeVariable(t,r),this.currentXDelta+=r-a):p<a&&(o.setGeneralPurposeVariable(t,p),this.currentXDelta+=a-p),i[s].visited=!0}},mxCoordinateAssignment.prototype.calculatedWeightedValue=function(t,e){for(var n=0,i=0;i<e.length;i++){var l=e[i];t.isVertex()&&l.isVertex()?n++:n=t.isEdge()&&l.isEdge()?n+8:n+2}return n},mxCoordinateAssignment.prototype.medianXValue=function(t,e){if(0==t.length)return 0;for(var n=[],i=0;i<t.length;i++)n[i]=t[i].getGeneralPurposeVariable(e);return n.sort(function(t,e){return t-e}),1==t.length%2?n[Math.floor(t.length/2)]:(n[(i=t.length/2)-1]+n[i])/2},mxCoordinateAssignment.prototype.initialCoords=function(t,e){this.calculateWidestRank(t,e);for(var n=this.widestRank;0<=n;n--)n<e.maxRank&&this.rankCoordinates(n,t,e);for(n=this.widestRank+1;n<=e.maxRank;n++)0<n&&this.rankCoordinates(n,t,e)},mxCoordinateAssignment.prototype.rankCoordinates=function(t,e,n){e=n.ranks[t],n=this.initialX+(this.widestRankValue-this.rankWidths[t])/2;for(var i=!1,l=0;l<e.length;l++){var s,o=e[l];o.isVertex()?null!=(s=this.layout.getVertexBounds(o.cell))?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(o.width=s.width,o.height=s.height):(o.width=s.height,o.height=s.width):i=!0:o.isEdge()&&(s=1,null!=o.edges?s=o.edges.length:mxLog.warn("edge.edges is null"),o.width=(s-1)*this.parallelEdgeSpacing),n+=o.width/2,o.setX(t,n),o.setGeneralPurposeVariable(t,n),n=(n+=o.width/2)+this.intraCellSpacing}1==i&&mxLog.warn("At least one cell has no bounds")},mxCoordinateAssignment.prototype.calculateWidestRank=function(t,e){var n=-this.interRankCellSpacing,i=0;this.rankWidths=[],this.rankY=[];for(var l=e.maxRank;0<=l;l--){for(var s=0,o=e.ranks[l],r=this.initialX,a=!1,h=0;h<o.length;h++){var d,u=o[h];u.isVertex()?(null!=(d=this.layout.getVertexBounds(u.cell))?this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(u.width=d.width,u.height=d.height):(u.width=d.height,u.height=d.width):a=!0,s=Math.max(s,u.height)):u.isEdge()&&(d=1,null!=u.edges?d=u.edges.length:mxLog.warn("edge.edges is null"),u.width=(d-1)*this.parallelEdgeSpacing),r+=u.width/2,u.setX(l,r),u.setGeneralPurposeVariable(l,r),(r=(r+=u.width/2)+this.intraCellSpacing)>this.widestRankValue&&(this.widestRankValue=r,this.widestRank=l),this.rankWidths[l]=r}for(1==a&&mxLog.warn("At least one cell has no bounds"),this.rankY[l]=n,r=s/2+i/2+this.interRankCellSpacing,i=s,n=this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_WEST?n+r:n-r,h=0;h<o.length;h++)o[h].setY(l,n)}},mxCoordinateAssignment.prototype.minPath=function(t,e){for(var n=e.edgeMapper.getValues(),i=0;i<n.length;i++){var l=n[i];if(!(l.maxRank-l.minRank-1<1)){for(var s=l.getGeneralPurposeVariable(l.minRank+1),o=!0,r=0,a=l.minRank+2;a<l.maxRank;a++)s!=(h=l.getGeneralPurposeVariable(a))?(o=!1,s=h):r++;if(!o){for(var o=s=0,h=[],d=[],u=l.getGeneralPurposeVariable(l.minRank+1),a=l.minRank+1;a<l.maxRank-1;a++){var p=l.getX(a+1);u==p||this.repositionValid(e,l,a+1,u)?(h[a-l.minRank-1]=u,s++):u=h[a-l.minRank-1]=p}for(u=l.getX(a),a=l.maxRank-1;a>l.minRank+1;a--)u==(p=l.getX(a-1))||this.repositionValid(e,l,a-1,u)?(d[a-l.minRank-2]=u,o++):(d[a-l.minRank-2]=l.getX(a-1),u=p);if(r<o||r<s)if(s<=o)for(a=l.maxRank-2;a>l.minRank;a--)l.setX(a,d[a-l.minRank-1]);else if(o<s)for(a=l.minRank+2;a<l.maxRank;a++)l.setX(a,h[a-l.minRank-2])}}}},mxCoordinateAssignment.prototype.repositionValid=function(t,e,n,i){t=t.ranks[n];for(var l=-1,s=0;s<t.length;s++)if(e==t[s]){l=s;break}if(l<0)return!1;if(i<(s=e.getGeneralPurposeVariable(n))){if(0==l)return!0;if(!((n=(n=(t=t[l-1]).getGeneralPurposeVariable(n))+t.width/2+this.intraCellSpacing+e.width/2)<=i))return!1}else if(s<i){if(l==t.length-1)return!0;if(!(i<=(n=(n=(t=t[l+1]).getGeneralPurposeVariable(n))-t.width/2-this.intraCellSpacing-e.width/2)))return!1}return!0},mxCoordinateAssignment.prototype.setCellLocations=function(t,e){this.rankTopY=[],this.rankBottomY=[];for(var n=0;n<e.ranks.length;n++)this.rankTopY[n]=Number.MAX_VALUE,this.rankBottomY[n]=-Number.MAX_VALUE;for(var i=e.vertexMapper.getValues(),n=0;n<i.length;n++)this.setVertexLocation(i[n]);for(this.layout.edgeStyle!=mxHierarchicalEdgeStyle.ORTHOGONAL&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.POLYLINE&&this.layout.edgeStyle!=mxHierarchicalEdgeStyle.CURVE||this.localEdgeProcessing(e),i=e.edgeMapper.getValues(),n=0;n<i.length;n++)this.setEdgePosition(i[n])},mxCoordinateAssignment.prototype.localEdgeProcessing=function(t){for(var e=0;e<t.ranks.length;e++)for(var n=t.ranks[e],i=0;i<n.length;i++){var l=n[i];if(l.isVertex())for(var s=l.getPreviousLayerConnectedCells(e),o=e-1,r=0;r<2;r++){if(-1<o&&o<t.ranks.length&&null!=s&&0<s.length){for(var a=[],h=0;h<s.length;h++){var d=new WeightedCellSorter(s[h],s[h].getX(o));a.push(d)}a.sort(WeightedCellSorter.prototype.compare);for(var u=(d=l.x[0]-l.width/2)+l.width,p=s=0,o=[],h=0;h<a.length;h++){var c=a[h].cell;if(c.isVertex())for(var m=0==r?l.connectsAsSource:l.connectsAsTarget,g=0;g<m.length;g++)m[g].source!=c&&m[g].target!=c||(s+=m[g].edges.length,p++,o.push(m[g]));else s+=c.edges.length,p++,o.push(c)}for(l.width>(s+1)*this.prefHozEdgeSep+2*this.prefHozEdgeSep&&(d+=this.prefHozEdgeSep,u-=this.prefHozEdgeSep),d+=(a=(u-d)/s)/2,u=this.minEdgeJetty-this.prefVertEdgeOff,h=0;h<o.length;h++)for(p=o[h].edges.length,null==(c=this.jettyPositions[o[h].ids[0]])&&(this.jettyPositions[o[h].ids[0]]=c=[]),h<s/2?u+=this.prefVertEdgeOff:s/2<h&&(u-=this.prefVertEdgeOff),m=0;m<p;m++)c[4*m+2*r]=d,d+=a,c[4*m+2*r+1]=u}s=l.getNextLayerConnectedCells(e),o=e+1}}},mxCoordinateAssignment.prototype.setEdgePosition=function(t){var e=0;if(101207!=t.temp[0]){var n=t.maxRank,i=t.minRank;n==i&&(n=t.source.maxRank,i=t.target.minRank);for(var l=0,s=this.jettyPositions[t.ids[0]],o=(t.isReversed?t.target:t.source).cell,r=this.layout.graph,a=this.orientation==mxConstants.DIRECTION_EAST||this.orientation==mxConstants.DIRECTION_SOUTH,h=0;h<t.edges.length;h++){var d,u,p,c=t.edges[h],m=this.layout.getVisibleTerminal(c,!0),g=[],x=t.isReversed;for(m!=o&&(x=!x),null!=s&&(u=x?(a?this.rankBottomY:this.rankTopY)[i]:(a?this.rankTopY:this.rankBottomY)[n],d=s[4*l+1+(p=x?2:0)],u+=d=x!=a?-d:d,p=s[4*l+p],f=r.model.getTerminal(c,!0),this.layout.isPort(f)&&r.model.getParent(f)==m&&(p=null!=(p=r.view.getState(f))?p.x:m.geometry.x+t.source.width*f.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(g.push(new mxPoint(p,u)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(p,u+d))):(g.push(new mxPoint(u,p)),this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(u+d,p)))),p=t.x.length-1,u=d=-1,m=t.maxRank-1,x&&(p=0,d=t.x.length,m=t.minRank+(u=1));t.maxRank!=t.minRank&&p!=d;p+=u){var y,f=t.x[p]+e,C=(this.rankTopY[m]+this.rankBottomY[m+1])/2,E=(this.rankTopY[m-1]+this.rankBottomY[m])/2;x&&(y=C,C=E,E=y),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(g.push(new mxPoint(f,C)),g.push(new mxPoint(f,E))):(g.push(new mxPoint(C,f)),g.push(new mxPoint(E,f))),this.limitX=Math.max(this.limitX,f),m+=u}null!=s&&(u=x?(a?this.rankTopY:this.rankBottomY)[n]:(a?this.rankBottomY:this.rankTopY)[i],d=s[4*l+3-(p=x?2:0)],u-=d=x!=a?-d:d,p=s[4*l+2-p],x=r.model.getTerminal(c,!1),m=this.layout.getVisibleTerminal(c,!1),this.layout.isPort(x)&&r.model.getParent(x)==m&&(p=null!=(p=r.view.getState(x))?p.x:m.geometry.x+t.target.width*x.geometry.x),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(p,u-d)),g.push(new mxPoint(p,u))):(this.layout.edgeStyle==mxHierarchicalEdgeStyle.CURVE&&g.push(new mxPoint(u-d,p)),g.push(new mxPoint(u,p)))),t.isReversed&&this.processReversedEdge(t,c),this.layout.setEdgePoints(c,g),e=0==e?this.parallelEdgeSpacing:0<e?-e:-e+this.parallelEdgeSpacing,l++}t.temp[0]=101207}},mxCoordinateAssignment.prototype.setVertexLocation=function(t){var e=t.cell,n=t.x[0]-t.width/2,i=t.y[0]-t.height/2;this.rankTopY[t.minRank]=Math.min(this.rankTopY[t.minRank],i),this.rankBottomY[t.minRank]=Math.max(this.rankBottomY[t.minRank],i+t.height),this.orientation==mxConstants.DIRECTION_NORTH||this.orientation==mxConstants.DIRECTION_SOUTH?this.layout.setVertexLocation(e,n,i):this.layout.setVertexLocation(e,i,n),this.limitX=Math.max(this.limitX,n+t.width)},mxCoordinateAssignment.prototype.processReversedEdge=function(t,e){},mxSwimlaneOrdering.prototype=new mxHierarchicalLayoutStage,mxSwimlaneOrdering.prototype.constructor=mxSwimlaneOrdering,mxSwimlaneOrdering.prototype.layout=null,mxSwimlaneOrdering.prototype.execute=function(t){t=this.layout.getModel();var s=mxUtils.clone(t.vertexMapper,null,!0),e=null;if(null!=t.roots)for(var n=t.roots,e=[],i=0;i<n.length;i++)e[i]=t.vertexMapper.get(n[i]);t.visit(function(t,e,n,i,l){i=null!=t&&t.swimlaneIndex==e.swimlaneIndex&&e.isAncestor(t),l=null!=t&&null!=n&&t.swimlaneIndex<e.swimlaneIndex&&n.source==e,i?(n.invert(),mxUtils.remove(n,t.connectsAsSource),e.connectsAsSource.push(n),t.connectsAsTarget.push(n),mxUtils.remove(n,e.connectsAsTarget)):l&&(n.invert(),mxUtils.remove(n,t.connectsAsTarget),e.connectsAsTarget.push(n),t.connectsAsSource.push(n),mxUtils.remove(n,e.connectsAsSource)),t=mxCellPath.create(e.cell),delete s[t]},e,!0,null)};var mxHierarchicalEdgeStyle={ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4};function mxSwimlaneLayout(t,e,n){mxGraphLayout.call(this,t),this.orientation=null!=e?e:mxConstants.DIRECTION_NORTH,this.deterministic=null==n||n}function mxGraphModel(t){this.currentEdit=this.createUndoableEdit(),null!=t?this.setRoot(t):this.clear()}function mxRootChange(t,e){this.model=t,this.previous=this.root=e}function mxChildChange(t,e,n,i){this.model=t,this.previous=this.parent=e,this.child=n,this.previousIndex=this.index=i}function mxTerminalChange(t,e,n,i){this.model=t,this.cell=e,this.previous=this.terminal=n,this.source=i}function mxValueChange(t,e,n){this.model=t,this.cell=e,this.previous=this.value=n}function mxStyleChange(t,e,n){this.model=t,this.cell=e,this.previous=this.style=n}function mxGeometryChange(t,e,n){this.model=t,this.cell=e,this.previous=this.geometry=n}function mxCollapseChange(t,e,n){this.model=t,this.cell=e,this.previous=this.collapsed=n}function mxVisibleChange(t,e,n){this.model=t,this.cell=e,this.previous=this.visible=n}function mxCellAttributeChange(t,e,n){this.cell=t,this.attribute=e,this.previous=this.value=n}function mxCell(t,e,n){this.value=t,this.setGeometry(e),this.setStyle(n),null!=this.onInit&&this.onInit()}function mxGeometry(t,e,n,i){mxRectangle.call(this,t,e,n,i)}mxHierarchicalLayout.prototype=new mxGraphLayout,mxHierarchicalLayout.prototype.constructor=mxHierarchicalLayout,mxHierarchicalLayout.prototype.roots=null,mxHierarchicalLayout.prototype.resizeParent=!1,mxHierarchicalLayout.prototype.maintainParentLocation=!1,mxHierarchicalLayout.prototype.moveParent=!1,mxHierarchicalLayout.prototype.parentBorder=0,mxHierarchicalLayout.prototype.intraCellSpacing=30,mxHierarchicalLayout.prototype.interRankCellSpacing=100,mxHierarchicalLayout.prototype.interHierarchySpacing=60,mxHierarchicalLayout.prototype.parallelEdgeSpacing=10,mxHierarchicalLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxHierarchicalLayout.prototype.fineTuning=!0,mxHierarchicalLayout.prototype.tightenToSource=!0,mxHierarchicalLayout.prototype.disableEdgeStyle=!0,mxHierarchicalLayout.prototype.traverseAncestors=!0,mxHierarchicalLayout.prototype.model=null,mxHierarchicalLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxHierarchicalLayout.prototype.getModel=function(){return this.model},mxHierarchicalLayout.prototype.execute=function(t,e){this.parent=t;var n,i=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,null!=(e=null==e||e instanceof Array?e:[e])||null!=t){if(this.parentY=this.parentX=null,t!=this.root&&null!=i.isVertex(t)&&this.maintainParentLocation&&null!=(n=this.graph.getCellGeometry(t))&&(this.parentX=n.x,this.parentY=n.y),null!=e){for(var l=[],s=0;s<e.length;s++)(null==t||i.isAncestor(t,e[s]))&&i.isVertex(e[s])&&l.push(e[s]);this.roots=l}i.beginUpdate();try{this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(n=this.graph.getCellGeometry(t))&&((n=n.clone()).x=this.parentX,n.y=this.parentY,i.setGeometry(t,n))}finally{i.endUpdate()}}},mxHierarchicalLayout.prototype.findRoots=function(t,e){var n=[];if(null!=t&&null!=e){var i,l=this.graph.model,s=null,o=-1e5;for(i in e){var r=e[i];if(l.isVertex(r)&&this.graph.isCellVisible(r)){for(var a=this.getEdges(r),h=0,d=0,u=0;u<a.length;u++)this.getVisibleTerminal(a[u],!0)==r?h++:d++;0==d&&0<h&&n.push(r),o<(a=h-d)&&(o=a,s=r)}}0==n.length&&null!=s&&n.push(s)}return n},mxHierarchicalLayout.prototype.getEdges=function(t){if(null!=(n=this.edgesCache.get(t)))return n;for(var e=this.graph.model,n=[],i=this.graph.isCellCollapsed(t),l=e.getChildCount(t),s=0;s<l;s++){var o=e.getChildAt(t,s);!this.isPort(o)&&!i&&this.graph.isCellVisible(o)||(n=n.concat(e.getEdges(o,!0,!0)))}for(n=n.concat(e.getEdges(t,!0,!0)),e=[],s=0;s<n.length;s++)((i=this.getVisibleTerminal(n[s],!0))==(l=this.getVisibleTerminal(n[s],!1))||i!=l&&(l==t&&(null==this.parent||this.isAncestor(this.parent,i,this.traverseAncestors))||i==t&&(null==this.parent||this.isAncestor(this.parent,l,this.traverseAncestors))))&&e.push(n[s]);return this.edgesCache.put(t,e),e},mxHierarchicalLayout.prototype.getVisibleTerminal=function(t,e){var n,i=this.edgesTargetTermCache,l=(i=e?this.edgeSourceTermCache:i).get(t);return null!=l?l:(null!=(n=null==(n=null!=(l=this.graph.view.getState(t))?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e))?null!=l?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e):n)&&(this.isPort(n)&&(n=this.graph.model.getParent(n)),i.put(t,n)),n)},mxHierarchicalLayout.prototype.run=function(t){var e=[],n=[];if(null==this.roots&&null!=t){var i,l={},s=(this.filterDescendants(t,l),this.roots=[],!0);for(i in l)if(null!=l[i]){s=!1;break}for(;!s;){for(var o=this.findRoots(t,l),s=0;s<o.length;s++){var r={};e.push(r),this.traverse(o[s],!0,null,n,r,e,l)}for(s=0;s<o.length;s++)this.roots.push(o[s]);for(i in s=!0,l)if(null!=l[i]){s=!1;break}}}else for(s=0;s<this.roots.length;s++)e.push(r={}),this.traverse(this.roots[s],!0,null,n,r,e,null);for(s=n=0;s<e.length;s++){for(i in l=[],r=e[s])l.push(r[i]);this.model=new mxGraphHierarchyModel(this,l,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),n=this.placementStage(n,t)}},mxHierarchicalLayout.prototype.filterDescendants=function(t,e){var n=this.graph.model;if(n.isVertex(t)&&t!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var i=n.getChildCount(t),l=0;l<i;l++){var s=n.getChildAt(t,l);this.isPort(s)||this.filterDescendants(s,e)}},mxHierarchicalLayout.prototype.isPort=function(t){return null!=t&&null!=t.geometry&&t.geometry.relative},mxHierarchicalLayout.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],s=0;s<i.length;s++){var o=this.getVisibleTerminal(i[s],!0),r=this.getVisibleTerminal(i[s],!1);(o==t&&r==e||!n&&o==e&&r==t)&&l.push(i[s])}return l},mxHierarchicalLayout.prototype.traverse=function(t,e,n,i,l,s,o){if(null!=t&&null!=i)if(null!=i[a=mxObjectIdentity.get(t)]||null!=o&&null==o[a]){if(null==l[a])for(n=0;n<s.length;n++)if(null!=(e=s[n])[a]){for(r in e)l[r]=e[r];s.splice(n,1);break}}else{null==l[a]&&(l[a]=t),null==i[a]&&(i[a]=t),null!==o&&delete o[a];var r=this.getEdges(t),a=[];for(n=0;n<r.length;n++)a[n]=this.getVisibleTerminal(r[n],!0)==t;for(n=0;n<r.length;n++)if(!e||a[n]){t=this.getVisibleTerminal(r[n],!a[n]);for(var h,d=1,u=0;u<r.length;u++)u!=n&&(h=a[u],this.getVisibleTerminal(r[u],!h)==t)&&(h?d++:d--);0<=d&&(l=this.traverse(t,e,r[n],i,l,s,o))}}return l},mxHierarchicalLayout.prototype.cycleStage=function(t){new mxMinimumCycleRemover(this).execute(t)},mxHierarchicalLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxHierarchicalLayout.prototype.crossingStage=function(t){new mxMedianHybridCrossingReduction(this).execute(t)},mxHierarchicalLayout.prototype.placementStage=function(t,e){t=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing);return t.fineTuning=this.fineTuning,t.execute(e),t.limitX+this.interHierarchySpacing},mxSwimlaneLayout.prototype=new mxGraphLayout,mxSwimlaneLayout.prototype.constructor=mxSwimlaneLayout,mxSwimlaneLayout.prototype.roots=null,mxSwimlaneLayout.prototype.swimlanes=null,mxSwimlaneLayout.prototype.dummyVertexWidth=50,mxSwimlaneLayout.prototype.resizeParent=!1,mxSwimlaneLayout.prototype.maintainParentLocation=!1,mxSwimlaneLayout.prototype.moveParent=!1,mxSwimlaneLayout.prototype.parentBorder=30,mxSwimlaneLayout.prototype.intraCellSpacing=30,mxSwimlaneLayout.prototype.interRankCellSpacing=100,mxSwimlaneLayout.prototype.interHierarchySpacing=60,mxSwimlaneLayout.prototype.parallelEdgeSpacing=10,mxSwimlaneLayout.prototype.orientation=mxConstants.DIRECTION_NORTH,mxSwimlaneLayout.prototype.fineTuning=!0,mxSwimlaneLayout.prototype.tightenToSource=!0,mxSwimlaneLayout.prototype.disableEdgeStyle=!0,mxSwimlaneLayout.prototype.traverseAncestors=!0,mxSwimlaneLayout.prototype.model=null,mxSwimlaneLayout.prototype.edgesCache=null,mxHierarchicalLayout.prototype.edgeSourceTermCache=null,mxHierarchicalLayout.prototype.edgesTargetTermCache=null,mxHierarchicalLayout.prototype.edgeStyle=mxHierarchicalEdgeStyle.POLYLINE,mxSwimlaneLayout.prototype.getModel=function(){return this.model},mxSwimlaneLayout.prototype.execute=function(t,e){this.parent=t;var n,i=this.graph.model;if(this.edgesCache=new mxDictionary,this.edgeSourceTermCache=new mxDictionary,this.edgesTargetTermCache=new mxDictionary,!(null==e||e.length<1)){null==t&&(t=i.getParent(e[0])),this.parentY=this.parentX=null,t!=this.root&&null!=i.isVertex(t)&&this.maintainParentLocation&&null!=(n=this.graph.getCellGeometry(t))&&(this.parentX=n.x,this.parentY=n.y),this.swimlanes=e;for(var l=[],s=0;s<e.length;s++){var o=this.graph.getChildCells(e[s]);null!=o&&0!=o.length||(o=this.graph.insertVertex(e[s],null,null,0,0,this.dummyVertexWidth,0),l.push(o))}i.beginUpdate();try{this.run(t),this.resizeParent&&!this.graph.isCellCollapsed(t)&&this.graph.updateGroupBounds([t],this.parentBorder,this.moveParent),null!=this.parentX&&null!=this.parentY&&null!=(n=this.graph.getCellGeometry(t))&&((n=n.clone()).x=this.parentX,n.y=this.parentY,i.setGeometry(t,n)),this.graph.removeCells(l)}finally{i.endUpdate()}}},mxSwimlaneLayout.prototype.updateGroupBounds=function(){var t,e,n,i,l=[],s=this.model;for(h in s.edgeMapper)for(var o=s.edgeMapper[h],r=0;r<o.edges.length;r++)l.push(o.edges[r]);for(l=this.graph.getBoundingBoxFromGeometry(l,!0),s=[],r=0;r<this.swimlanes.length;r++){var a,h,d=this.swimlanes[r];null!=(h=this.graph.getCellGeometry(d))&&(a=this.graph.getChildCells(d),o=this.graph.isSwimlane(d)?this.graph.getStartSize(d):new mxRectangle,d=this.graph.getBoundingBoxFromGeometry(a),o=(s[r]=d).y+h.y-o.height-this.parentBorder,h=d.y+h.y+d.height,null==l?l=new mxRectangle(0,o,0,h-o):(l.y=Math.min(l.y,o),l.height=Math.max(l.y+l.height,h)-l.y))}for(r=0;r<this.swimlanes.length;r++)d=this.swimlanes[r],null!=(h=this.graph.getCellGeometry(d))&&(a=this.graph.getChildCells(d),o=this.graph.isSwimlane(d)?this.graph.getStartSize(d):new mxRectangle,t=h.clone(),e=o.width+(0==r?this.parentBorder:this.interRankCellSpacing/2),n=s[r].x-e,i=l.y-this.parentBorder,t.x+=n,t.y=i,t.width=s[r].width+e+this.interRankCellSpacing/2,t.height=l.height+o.height+2*this.parentBorder,this.graph.model.setGeometry(d,t),this.graph.moveCells(a,-n,h.y-i))},mxSwimlaneLayout.prototype.findRoots=function(t,e){var n=[];if(null!=t&&null!=e){var i,l=this.graph.model,s=null,o=-1e5;for(i in e){var r=e[i];if(null!=r&&l.isVertex(r)&&this.graph.isCellVisible(r)&&l.isAncestor(t,r)){for(var a=this.getEdges(r),h=0,d=0,u=0;u<a.length;u++){var p=this.getVisibleTerminal(a[u],!0);p==r?(p=this.getVisibleTerminal(a[u],!1),l.isAncestor(t,p)&&h++):l.isAncestor(t,p)&&d++}0==d&&0<h&&n.push(r),o<(a=h-d)&&(o=a,s=r)}}0==n.length&&null!=s&&n.push(s)}return n},mxSwimlaneLayout.prototype.getEdges=function(t){if(null!=(n=this.edgesCache.get(t)))return n;for(var e=this.graph.model,n=[],i=this.graph.isCellCollapsed(t),l=e.getChildCount(t),s=0;s<l;s++){var o=e.getChildAt(t,s);!this.isPort(o)&&!i&&this.graph.isCellVisible(o)||(n=n.concat(e.getEdges(o,!0,!0)))}for(n=n.concat(e.getEdges(t,!0,!0)),e=[],s=0;s<n.length;s++)((i=this.getVisibleTerminal(n[s],!0))==(l=this.getVisibleTerminal(n[s],!1))||i!=l&&(l==t&&(null==this.parent||this.graph.isValidAncestor(i,this.parent,this.traverseAncestors))||i==t&&(null==this.parent||this.graph.isValidAncestor(l,this.parent,this.traverseAncestors))))&&e.push(n[s]);return this.edgesCache.put(t,e),e},mxSwimlaneLayout.prototype.getVisibleTerminal=function(t,e){var n,i=this.edgesTargetTermCache,l=(i=e?this.edgeSourceTermCache:i).get(t);return null!=l?l:(null!=(n=null==(n=null!=(l=this.graph.view.getState(t))?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e))?null!=l?l.getVisibleTerminal(e):this.graph.view.getVisibleTerminal(t,e):n)&&(this.isPort(n)&&(n=this.graph.model.getParent(n)),i.put(t,n)),n)},mxSwimlaneLayout.prototype.run=function(t){var e=[],n={};if(null!=this.swimlanes&&0<this.swimlanes.length&&null!=t){for(var i={},l=0;l<this.swimlanes.length;l++)this.filterDescendants(this.swimlanes[l],i);this.roots=[];var s,l=!0;for(s in i)if(null!=i[s]){l=!1;break}for(var o=0;!l&&o<this.swimlanes.length;){var r=this.findRoots(this.swimlanes[o],i);if(0==r.length)o++;else{for(l=0;l<r.length;l++){var a={};e.push(a),this.traverse(r[l],!0,null,n,a,e,i,o)}for(l=0;l<r.length;l++)this.roots.push(r[l]);for(s in l=!0,i)if(null!=i[s]){l=!1;break}}}}else for(l=0;l<this.roots.length;l++)e.push(a={}),this.traverse(this.roots[l],!0,null,n,a,e,null);for(s in e=[],n)e.push(n[s]);this.model=new mxSwimlaneModel(this,e,this.roots,t,this.tightenToSource),this.cycleStage(t),this.layeringStage(),this.crossingStage(t),this.placementStage(0,t)},mxSwimlaneLayout.prototype.filterDescendants=function(t,e){var n=this.graph.model;if(n.isVertex(t)&&t!=this.parent&&n.getParent(t)!=this.parent&&this.graph.isCellVisible(t)&&(e[mxObjectIdentity.get(t)]=t),this.traverseAncestors||t==this.parent&&this.graph.isCellVisible(t))for(var i=n.getChildCount(t),l=0;l<i;l++){var s=n.getChildAt(t,l);this.isPort(s)||this.filterDescendants(s,e)}},mxSwimlaneLayout.prototype.isPort=function(t){return!!t.geometry.relative},mxSwimlaneLayout.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],s=0;s<i.length;s++){var o=this.getVisibleTerminal(i[s],!0),r=this.getVisibleTerminal(i[s],!1);(o==t&&r==e||!n&&o==e&&r==t)&&l.push(i[s])}return l},mxSwimlaneLayout.prototype.traverse=function(t,e,n,i,l,s,o,r){if(null!=t&&null!=i)if(null!=i[h=mxObjectIdentity.get(t)]||null!=o&&null==o[h]){if(null==l[h])for(n=0;n<s.length;n++)if(null!=(t=s[n])[h]){for(a in t)l[a]=t[a];s.splice(n,1);break}}else{null==l[h]&&(l[h]=t),null==i[h]&&(i[h]=t),null!==o&&delete o[h];var a=this.getEdges(t),h=this.graph.model;for(n=0;n<a.length;n++){var d=this.getVisibleTerminal(a[n],!0),u=d==t;u&&(d=this.getVisibleTerminal(a[n],!1));for(var p=0;p<this.swimlanes.length&&!h.isAncestor(this.swimlanes[p],d);)p++;p>=this.swimlanes.length||!(r<p||(!e||u)&&p==r)||(l=this.traverse(d,e,a[n],i,l,s,o,p))}}return l},mxSwimlaneLayout.prototype.cycleStage=function(t){new mxSwimlaneOrdering(this).execute(t)},mxSwimlaneLayout.prototype.layeringStage=function(){this.model.initialRank(),this.model.fixRanks()},mxSwimlaneLayout.prototype.crossingStage=function(t){new mxMedianHybridCrossingReduction(this).execute(t)},mxSwimlaneLayout.prototype.placementStage=function(t,e){t=new mxCoordinateAssignment(this,this.intraCellSpacing,this.interRankCellSpacing,this.orientation,t,this.parallelEdgeSpacing);return t.fineTuning=this.fineTuning,t.execute(e),t.limitX+this.interHierarchySpacing},mxGraphModel.prototype=new mxEventSource,mxGraphModel.prototype.constructor=mxGraphModel,mxGraphModel.prototype.root=null,mxGraphModel.prototype.cells=null,mxGraphModel.prototype.maintainEdgeParent=!0,mxGraphModel.prototype.ignoreRelativeEdgeParent=!0,mxGraphModel.prototype.createIds=!0,mxGraphModel.prototype.prefix="",mxGraphModel.prototype.postfix="",mxGraphModel.prototype.nextId=0,mxGraphModel.prototype.currentEdit=null,mxGraphModel.prototype.updateLevel=0,mxGraphModel.prototype.endingUpdate=!1,mxGraphModel.prototype.clear=function(){this.setRoot(this.createRoot())},mxGraphModel.prototype.isCreateIds=function(){return this.createIds},mxGraphModel.prototype.setCreateIds=function(t){this.createIds=t},mxGraphModel.prototype.createRoot=function(){var t=new mxCell;return t.insert(new mxCell),t},mxGraphModel.prototype.getCell=function(t){return null!=this.cells?this.cells[t]:null},mxGraphModel.prototype.filterCells=function(t,e){var n=null;if(null!=t)for(var n=[],i=0;i<t.length;i++)e(t[i])&&n.push(t[i]);return n},mxGraphModel.prototype.getDescendants=function(t){return this.filterDescendants(null,t)},mxGraphModel.prototype.filterDescendants=function(t,e){var n=[];e=e||this.getRoot(),null!=t&&!t(e)||n.push(e);for(var i=this.getChildCount(e),l=0;l<i;l++)var s=this.getChildAt(e,l),n=n.concat(this.filterDescendants(t,s));return n},mxGraphModel.prototype.getRoot=function(t){var e=t||this.root;if(null!=t)for(;null!=t;)e=t,t=this.getParent(t);return e},mxGraphModel.prototype.setRoot=function(t){return this.execute(new mxRootChange(this,t)),t},mxGraphModel.prototype.rootChanged=function(t){var e=this.root;return this.root=t,this.nextId=0,this.cells=null,this.cellAdded(t),e},mxGraphModel.prototype.isRoot=function(t){return null!=t&&this.root==t},mxGraphModel.prototype.isLayer=function(t){return this.isRoot(this.getParent(t))},mxGraphModel.prototype.isAncestor=function(t,e){for(;null!=e&&e!=t;)e=this.getParent(e);return e==t},mxGraphModel.prototype.contains=function(t){return this.isAncestor(this.root,t)},mxGraphModel.prototype.getParent=function(t){return null!=t?t.getParent():null},mxGraphModel.prototype.add=function(t,e,n){var i;return e!=t&&null!=t&&null!=e&&(null==n&&(n=this.getChildCount(t)),i=t!=this.getParent(e),this.execute(new mxChildChange(this,t,e,n)),this.maintainEdgeParent)&&i&&this.updateEdgeParents(e),e},mxGraphModel.prototype.cellAdded=function(t){if(null!=t){if(null==t.getId()&&this.createIds&&t.setId(this.createId(t)),null!=t.getId())if((e=this.getCell(t.getId()))!=t){for(;null!=e;)t.setId(this.createId(t)),e=this.getCell(t.getId());null==this.cells&&(this.cells={}),this.cells[t.getId()]=t}mxUtils.isNumeric(t.getId())&&(this.nextId=Math.max(this.nextId,t.getId()));for(var e=this.getChildCount(t),n=0;n<e;n++)this.cellAdded(this.getChildAt(t,n))}},mxGraphModel.prototype.createId=function(t){return t=this.nextId,this.nextId++,this.prefix+t+this.postfix},mxGraphModel.prototype.updateEdgeParents=function(t,e){e=e||this.getRoot(t);for(var n=this.getChildCount(t),i=0;i<n;i++){var l=this.getChildAt(t,i);this.updateEdgeParents(l,e)}for(l=this.getEdgeCount(t),n=[],i=0;i<l;i++)n.push(this.getEdgeAt(t,i));for(i=0;i<n.length;i++)l=n[i],this.isAncestor(e,l)&&this.updateEdgeParent(l,e)},mxGraphModel.prototype.updateEdgeParent=function(t,e){for(var n,i,l=this.getTerminal(t,!0),s=this.getTerminal(t,!1);null!=l&&!this.isEdge(l)&&null!=l.geometry&&l.geometry.relative;)l=this.getParent(l);for(;null!=s&&this.ignoreRelativeEdgeParent&&!this.isEdge(s)&&null!=s.geometry&&s.geometry.relative;)s=this.getParent(s);this.isAncestor(e,l)&&this.isAncestor(e,s)&&null!=(l=l==s?this.getParent(l):this.getNearestCommonAncestor(l,s))&&(this.getParent(l)!=this.root||this.isAncestor(l,t))&&this.getParent(t)!=l&&(null!=(s=this.getGeometry(t))&&(e=this.getOrigin(this.getParent(t)),i=(n=this.getOrigin(l)).x-e.x,e=n.y-e.y,(s=s.clone()).translate(-i,-e),this.setGeometry(t,s)),this.add(l,t,this.getChildCount(l)))},mxGraphModel.prototype.getOrigin=function(t){var e;return null!=t?(e=this.getOrigin(this.getParent(t)),this.isEdge(t)||null!=(t=this.getGeometry(t))&&(e.x+=t.x,e.y+=t.y)):e=new mxPoint,e},mxGraphModel.prototype.getNearestCommonAncestor=function(t,e){if(null!=t&&null!=e&&(null!=(i=mxCellPath.create(e))&&0<i.length)){var n,i,l=t,s=mxCellPath.create(l);for(i.length<s.length&&(l=e,n=s,s=i,i=n);null!=l;){if(n=this.getParent(l),0==i.indexOf(s+mxCellPath.PATH_SEPARATOR)&&null!=n)return l;s=mxCellPath.getParentPath(s),l=n}}return null},mxGraphModel.prototype.remove=function(t){return t==this.root?this.setRoot(null):null!=this.getParent(t)&&this.execute(new mxChildChange(this,null,t)),t},mxGraphModel.prototype.cellRemoved=function(t){if(null!=t&&null!=this.cells){for(var e=this.getChildCount(t)-1;0<=e;e--)this.cellRemoved(this.getChildAt(t,e));null!=this.cells&&null!=t.getId()&&delete this.cells[t.getId()]}},mxGraphModel.prototype.parentForCellChanged=function(t,e,n){var i=this.getParent(t);return null!=e?e==i&&i.getIndex(t)==n||e.insert(t,n):null!=i&&(n=i.getIndex(t),i.remove(n)),e=this.contains(e),n=this.contains(i),e&&!n?this.cellAdded(t):n&&!e&&this.cellRemoved(t),i},mxGraphModel.prototype.getChildCount=function(t){return null!=t?t.getChildCount():0},mxGraphModel.prototype.getChildAt=function(t,e){return null!=t?t.getChildAt(e):null},mxGraphModel.prototype.getChildren=function(t){return null!=t?t.children:null},mxGraphModel.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)},mxGraphModel.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)},mxGraphModel.prototype.getChildCells=function(t,e,n){e=null!=e&&e,n=null!=n&&n;for(var i=this.getChildCount(t),l=[],s=0;s<i;s++){var o=this.getChildAt(t,s);(!n&&!e||n&&this.isEdge(o)||e&&this.isVertex(o))&&l.push(o)}return l},mxGraphModel.prototype.getTerminal=function(t,e){return null!=t?t.getTerminal(e):null},mxGraphModel.prototype.setTerminal=function(t,e,n){var i=e!=this.getTerminal(t,n);return this.execute(new mxTerminalChange(this,t,e,n)),this.maintainEdgeParent&&i&&this.updateEdgeParent(t,this.getRoot()),e},mxGraphModel.prototype.setTerminals=function(t,e,n){this.beginUpdate();try{this.setTerminal(t,e,!0),this.setTerminal(t,n,!1)}finally{this.endUpdate()}},mxGraphModel.prototype.terminalForCellChanged=function(t,e,n){var i=this.getTerminal(t,n);return null!=e?e.insertEdge(t,n):null!=i&&i.removeEdge(t,n),i},mxGraphModel.prototype.getEdgeCount=function(t){return null!=t?t.getEdgeCount():0},mxGraphModel.prototype.getEdgeAt=function(t,e){return null!=t?t.getEdgeAt(e):null},mxGraphModel.prototype.getDirectedEdgeCount=function(t,e,n){for(var i=0,l=this.getEdgeCount(t),s=0;s<l;s++){var o=this.getEdgeAt(t,s);o!=n&&this.getTerminal(o,e)==t&&i++}return i},mxGraphModel.prototype.getConnections=function(t){return this.getEdges(t,!0,!0,!1)},mxGraphModel.prototype.getIncomingEdges=function(t){return this.getEdges(t,!0,!1,!1)},mxGraphModel.prototype.getOutgoingEdges=function(t){return this.getEdges(t,!1,!0,!1)},mxGraphModel.prototype.getEdges=function(t,e,n,i){e=null==e||e,n=null==n||n,i=null==i||i;for(var l=this.getEdgeCount(t),s=[],o=0;o<l;o++){var r=this.getEdgeAt(t,o),a=this.getTerminal(r,!0),h=this.getTerminal(r,!1);(i&&a==h||a!=h&&(e&&h==t||n&&a==t))&&s.push(r)}return s},mxGraphModel.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;var i=this.getEdgeCount(t),l=this.getEdgeCount(e),s=t,o=i;for(l<i&&(o=l,s=e),i=[],l=0;l<o;l++){var r=this.getEdgeAt(s,l),a=this.getTerminal(r,!0),h=this.getTerminal(r,!1);(a==t&&h==e||!n&&(h==t&&a==e))&&i.push(r)}return i},mxGraphModel.prototype.getOpposites=function(t,e,n,i){n=null==n||n,i=null==i||i;var l=[];if(null!=t)for(var s=0;s<t.length;s++){var o=this.getTerminal(t[s],!0),r=this.getTerminal(t[s],!1);o==e&&null!=r&&r!=e&&i?l.push(r):r==e&&null!=o&&o!=e&&n&&l.push(o)}return l},mxGraphModel.prototype.getTopmostCells=function(t){for(var e=new mxDictionary,n=[],i=0;i<t.length;i++)e.put(t[i],!0);for(i=0;i<t.length;i++){for(var l=t[i],s=!0,o=this.getParent(l);null!=o;){if(e.get(o)){s=!1;break}o=this.getParent(o)}s&&n.push(l)}return n},mxGraphModel.prototype.isVertex=function(t){return null!=t&&t.isVertex()},mxGraphModel.prototype.isEdge=function(t){return null!=t&&t.isEdge()},mxGraphModel.prototype.isConnectable=function(t){return null!=t&&t.isConnectable()},mxGraphModel.prototype.getValue=function(t){return null!=t?t.getValue():null},mxGraphModel.prototype.setValue=function(t,e){return this.execute(new mxValueChange(this,t,e)),e},mxGraphModel.prototype.valueForCellChanged=function(t,e){return t.valueChanged(e)},mxGraphModel.prototype.getGeometry=function(t){return null!=t?t.getGeometry():null},mxGraphModel.prototype.setGeometry=function(t,e){return e!=this.getGeometry(t)&&this.execute(new mxGeometryChange(this,t,e)),e},mxGraphModel.prototype.geometryForCellChanged=function(t,e){var n=this.getGeometry(t);return t.setGeometry(e),n},mxGraphModel.prototype.getStyle=function(t){return null!=t?t.getStyle():null},mxGraphModel.prototype.setStyle=function(t,e){return e!=this.getStyle(t)&&this.execute(new mxStyleChange(this,t,e)),e},mxGraphModel.prototype.styleForCellChanged=function(t,e){var n=this.getStyle(t);return t.setStyle(e),n},mxGraphModel.prototype.isCollapsed=function(t){return null!=t&&t.isCollapsed()},mxGraphModel.prototype.setCollapsed=function(t,e){return e!=this.isCollapsed(t)&&this.execute(new mxCollapseChange(this,t,e)),e},mxGraphModel.prototype.collapsedStateForCellChanged=function(t,e){var n=this.isCollapsed(t);return t.setCollapsed(e),n},mxGraphModel.prototype.isVisible=function(t){return null!=t&&t.isVisible()},mxGraphModel.prototype.setVisible=function(t,e){return e!=this.isVisible(t)&&this.execute(new mxVisibleChange(this,t,e)),e},mxGraphModel.prototype.visibleStateForCellChanged=function(t,e){var n=this.isVisible(t);return t.setVisible(e),n},mxGraphModel.prototype.execute=function(t){t.execute(),this.beginUpdate(),this.currentEdit.add(t),this.fireEvent(new mxEventObject(mxEvent.EXECUTE,"change",t)),this.fireEvent(new mxEventObject(mxEvent.EXECUTED,"change",t)),this.endUpdate()},mxGraphModel.prototype.beginUpdate=function(){this.updateLevel++,this.fireEvent(new mxEventObject(mxEvent.BEGIN_UPDATE)),1==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.START_EDIT))},mxGraphModel.prototype.endUpdate=function(){if(this.updateLevel--,0==this.updateLevel&&this.fireEvent(new mxEventObject(mxEvent.END_EDIT)),!this.endingUpdate){this.endingUpdate=0==this.updateLevel,this.fireEvent(new mxEventObject(mxEvent.END_UPDATE,"edit",this.currentEdit));try{var t;this.endingUpdate&&!this.currentEdit.isEmpty()&&(this.fireEvent(new mxEventObject(mxEvent.BEFORE_UNDO,"edit",this.currentEdit)),t=this.currentEdit,this.currentEdit=this.createUndoableEdit(),t.notify(),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",t)))}finally{this.endingUpdate=!1}}},mxGraphModel.prototype.createUndoableEdit=function(t){var e=new mxUndoableEdit(this,null==t||t);return e.notify=function(){e.source.fireEvent(new mxEventObject(mxEvent.CHANGE,"edit",e,"changes",e.changes)),e.source.fireEvent(new mxEventObject(mxEvent.NOTIFY,"edit",e,"changes",e.changes))},e},mxGraphModel.prototype.mergeChildren=function(t,e,n){n=null==n||n,this.beginUpdate();try{var i,l={};for(i in this.mergeChildrenImpl(t,e,n,l),l){var s=l[i],o=this.getTerminal(s,!0);null!=o&&(o=l[mxCellPath.create(o)],this.setTerminal(s,o,!0)),null!=(o=this.getTerminal(s,!1))&&(o=l[mxCellPath.create(o)],this.setTerminal(s,o,!1))}}finally{this.endUpdate()}},mxGraphModel.prototype.mergeChildrenImpl=function(t,e,n,i){this.beginUpdate();try{for(var l=t.getChildCount(),s=0;s<l;s++){var o,r,a,h=t.getChildAt(s);"function"==typeof h.getId&&(null==(r=null==(o=h.getId())||this.isEdge(h)&&n?null:this.getCell(o))&&((a=h.clone()).setId(o),a.setTerminal(h.getTerminal(!0),!0),a.setTerminal(h.getTerminal(!1),!1),r=e.insert(a),this.cellAdded(r)),i[mxCellPath.create(h)]=r,this.mergeChildrenImpl(h,r,n,i))}}finally{this.endUpdate()}},mxGraphModel.prototype.getParents=function(t){var e=[];if(null!=t)for(var n=new mxDictionary,i=0;i<t.length;i++){var l=this.getParent(t[i]);null==l||n.get(l)||(n.put(l,!0),e.push(l))}return e},mxGraphModel.prototype.cloneCell=function(t,e){return null!=t?this.cloneCells([t],e)[0]:null},mxGraphModel.prototype.cloneCells=function(t,e,n){e=null==e||e,n=null!=n?n:{};for(var i=[],l=0;l<t.length;l++)null!=t[l]?i.push(this.cloneCellImpl(t[l],n,e)):i.push(null);for(l=0;l<i.length;l++)null!=i[l]&&this.restoreClone(i[l],t[l],n);return i},mxGraphModel.prototype.cloneCellImpl=function(t,e,n){var i=mxObjectIdentity.get(t),l=e[i];if(null==l&&(l=this.cellCloned(t),e[i]=l,n))for(n=this.getChildCount(t),i=0;i<n;i++){var s=this.cloneCellImpl(this.getChildAt(t,i),e,!0);l.insert(s)}return l},mxGraphModel.prototype.cellCloned=function(t){return t.clone()},mxGraphModel.prototype.restoreClone=function(t,e,n){null!=(i=this.getTerminal(e,!0))&&null!=(i=n[mxObjectIdentity.get(i)])&&i.insertEdge(t,!0),null!=(i=this.getTerminal(e,!1))&&null!=(i=n[mxObjectIdentity.get(i)])&&i.insertEdge(t,!1);for(var i=this.getChildCount(t),l=0;l<i;l++)this.restoreClone(this.getChildAt(t,l),this.getChildAt(e,l),n)},mxRootChange.prototype.execute=function(){this.root=this.previous,this.previous=this.model.rootChanged(this.previous)},mxChildChange.prototype.execute=function(){var t,e;null!=this.child&&(e=null!=(t=this.model.getParent(this.child))?t.getIndex(this.child):0,null==this.previous&&this.connect(this.child,!1),t=this.model.parentForCellChanged(this.child,this.previous,this.previousIndex),null!=this.previous&&this.connect(this.child,!0),this.parent=this.previous,this.previous=t,this.index=this.previousIndex,this.previousIndex=e)},mxChildChange.prototype.connect=function(t,e){e=null==e||e;var n=t.getTerminal(!0),i=t.getTerminal(!1);for(null!=n&&(e?this.model.terminalForCellChanged(t,n,!0):this.model.terminalForCellChanged(t,null,!0)),null!=i&&(e?this.model.terminalForCellChanged(t,i,!1):this.model.terminalForCellChanged(t,null,!1)),t.setTerminal(n,!0),t.setTerminal(i,!1),n=this.model.getChildCount(t),i=0;i<n;i++)this.connect(this.model.getChildAt(t,i),e)},mxTerminalChange.prototype.execute=function(){null!=this.cell&&(this.terminal=this.previous,this.previous=this.model.terminalForCellChanged(this.cell,this.previous,this.source))},mxValueChange.prototype.execute=function(){null!=this.cell&&(this.value=this.previous,this.previous=this.model.valueForCellChanged(this.cell,this.previous))},mxStyleChange.prototype.execute=function(){null!=this.cell&&(this.style=this.previous,this.previous=this.model.styleForCellChanged(this.cell,this.previous))},mxGeometryChange.prototype.execute=function(){null!=this.cell&&(this.geometry=this.previous,this.previous=this.model.geometryForCellChanged(this.cell,this.previous))},mxCollapseChange.prototype.execute=function(){null!=this.cell&&(this.collapsed=this.previous,this.previous=this.model.collapsedStateForCellChanged(this.cell,this.previous))},mxVisibleChange.prototype.execute=function(){null!=this.cell&&(this.visible=this.previous,this.previous=this.model.visibleStateForCellChanged(this.cell,this.previous))},mxCellAttributeChange.prototype.execute=function(){var t;null!=this.cell&&(t=this.cell.getAttribute(this.attribute),null==this.previous?this.cell.value.removeAttribute(this.attribute):this.cell.setAttribute(this.attribute,this.previous),this.previous=t)},mxCell.prototype.id=null,mxCell.prototype.value=null,mxCell.prototype.geometry=null,mxCell.prototype.style=null,mxCell.prototype.vertex=!1,mxCell.prototype.edge=!1,mxCell.prototype.connectable=!0,mxCell.prototype.visible=!0,mxCell.prototype.collapsed=!1,mxCell.prototype.parent=null,mxCell.prototype.source=null,mxCell.prototype.target=null,mxCell.prototype.children=null,mxCell.prototype.edges=null,mxCell.prototype.mxTransient="id value parent source target children edges".split(" "),mxCell.prototype.getId=function(){return this.id},mxCell.prototype.setId=function(t){this.id=t},mxCell.prototype.getValue=function(){return this.value},mxCell.prototype.setValue=function(t){this.value=t},mxCell.prototype.valueChanged=function(t){var e=this.getValue();return this.setValue(t),e},mxCell.prototype.getGeometry=function(){return this.geometry},mxCell.prototype.setGeometry=function(t){this.geometry=t},mxCell.prototype.getStyle=function(){return this.style},mxCell.prototype.setStyle=function(t){this.style=t},mxCell.prototype.isVertex=function(){return 0!=this.vertex},mxCell.prototype.setVertex=function(t){this.vertex=t},mxCell.prototype.isEdge=function(){return 0!=this.edge},mxCell.prototype.setEdge=function(t){this.edge=t},mxCell.prototype.isConnectable=function(){return 0!=this.connectable},mxCell.prototype.setConnectable=function(t){this.connectable=t},mxCell.prototype.isVisible=function(){return 0!=this.visible},mxCell.prototype.setVisible=function(t){this.visible=t},mxCell.prototype.isCollapsed=function(){return 0!=this.collapsed},mxCell.prototype.setCollapsed=function(t){this.collapsed=t},mxCell.prototype.getParent=function(){return this.parent},mxCell.prototype.setParent=function(t){this.parent=t},mxCell.prototype.getTerminal=function(t){return t?this.source:this.target},mxCell.prototype.setTerminal=function(t,e){return e?this.source=t:this.target=t,t},mxCell.prototype.getChildCount=function(){return null==this.children?0:this.children.length},mxCell.prototype.getIndex=function(t){return mxUtils.indexOf(this.children,t)},mxCell.prototype.getChildAt=function(t){return null==this.children?null:this.children[t]},mxCell.prototype.insert=function(t,e){return null!=t&&(null==e&&(e=this.getChildCount(),t.getParent()==this)&&e--,t.removeFromParent(),t.setParent(this),null==this.children?(this.children=[],this.children.push(t)):this.children.splice(e,0,t)),t},mxCell.prototype.remove=function(t){var e=null;return null!=this.children&&0<=t&&null!=(e=this.getChildAt(t))&&(this.children.splice(t,1),e.setParent(null)),e},mxCell.prototype.removeFromParent=function(){var t;null!=this.parent&&(t=this.parent.getIndex(this),this.parent.remove(t))},mxCell.prototype.getEdgeCount=function(){return null==this.edges?0:this.edges.length},mxCell.prototype.getEdgeIndex=function(t){return mxUtils.indexOf(this.edges,t)},mxCell.prototype.getEdgeAt=function(t){return null==this.edges?null:this.edges[t]},mxCell.prototype.insertEdge=function(t,e){return null!=t&&(t.removeFromTerminal(e),t.setTerminal(this,e),null==this.edges||t.getTerminal(!e)!=this||mxUtils.indexOf(this.edges,t)<0)&&(null==this.edges&&(this.edges=[]),this.edges.push(t)),t},mxCell.prototype.removeEdge=function(t,e){var n;return null!=t&&(t.getTerminal(!e)!=this&&null!=this.edges&&0<=(n=this.getEdgeIndex(t))&&this.edges.splice(n,1),t.setTerminal(null,e)),t},mxCell.prototype.removeFromTerminal=function(t){var e=this.getTerminal(t);null!=e&&e.removeEdge(this,t)},mxCell.prototype.hasAttribute=function(t){var e=this.getValue();return null!=e&&e.nodeType==mxConstants.NODETYPE_ELEMENT&&e.hasAttribute?e.hasAttribute(t):null!=e.getAttribute(t)},mxCell.prototype.getAttribute=function(t,e){var n=this.getValue();return null!=(n=null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT?n.getAttribute(t):null)?n:e},mxCell.prototype.setAttribute=function(t,e){var n=this.getValue();null!=n&&n.nodeType==mxConstants.NODETYPE_ELEMENT&&n.setAttribute(t,e)},mxCell.prototype.clone=function(){var t=mxUtils.clone(this,this.mxTransient);return t.setValue(this.cloneValue()),t},mxCell.prototype.cloneValue=function(t){return null!=(t=null!=t?t:this.getValue())&&("function"==typeof t.clone?t=t.clone():isNaN(t.nodeType)||(t=t.cloneNode(!0))),t},mxGeometry.prototype=new mxRectangle,mxGeometry.prototype.constructor=mxGeometry,mxGeometry.prototype.TRANSLATE_CONTROL_POINTS=!0,mxGeometry.prototype.alternateBounds=null,mxGeometry.prototype.sourcePoint=null,mxGeometry.prototype.targetPoint=null,mxGeometry.prototype.points=null,mxGeometry.prototype.offset=null,mxGeometry.prototype.relative=!1,mxGeometry.prototype.swap=function(){var t;null!=this.alternateBounds&&(t=new mxRectangle(this.x,this.y,this.width,this.height),this.x=this.alternateBounds.x,this.y=this.alternateBounds.y,this.width=this.alternateBounds.width,this.height=this.alternateBounds.height,this.alternateBounds=t)},mxGeometry.prototype.getTerminalPoint=function(t){return t?this.sourcePoint:this.targetPoint},mxGeometry.prototype.setTerminalPoint=function(t,e){return e?this.sourcePoint=t:this.targetPoint=t,t},mxGeometry.prototype.rotate=function(t,e){var n,i=mxUtils.toRadians(t),l=Math.cos(i),i=Math.sin(i);if(this.relative||(n=new mxPoint(this.getCenterX(),this.getCenterY()),n=mxUtils.getRotatedPoint(n,l,i,e),this.x=Math.round(n.x-this.width/2),this.y=Math.round(n.y-this.height/2)),null!=this.sourcePoint&&(n=mxUtils.getRotatedPoint(this.sourcePoint,l,i,e),this.sourcePoint.x=Math.round(n.x),this.sourcePoint.y=Math.round(n.y)),null!=this.targetPoint&&(n=mxUtils.getRotatedPoint(this.targetPoint,l,i,e),this.targetPoint.x=Math.round(n.x),this.targetPoint.y=Math.round(n.y)),null!=this.points)for(var s=0;s<this.points.length;s++)null!=this.points[s]&&(n=mxUtils.getRotatedPoint(this.points[s],l,i,e),this.points[s].x=Math.round(n.x),this.points[s].y=Math.round(n.y))},mxGeometry.prototype.translate=function(t,e){if(t=parseFloat(t),e=parseFloat(e),this.relative||(this.x=parseFloat(this.x)+t,this.y=parseFloat(this.y)+e),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)+t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)+e),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)+t,this.targetPoint.y=parseFloat(this.targetPoint.y)+e),this.TRANSLATE_CONTROL_POINTS&&null!=this.points)for(var n=0;n<this.points.length;n++)null!=this.points[n]&&(this.points[n].x=parseFloat(this.points[n].x)+t,this.points[n].y=parseFloat(this.points[n].y)+e)},mxGeometry.prototype.scale=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),null!=this.sourcePoint&&(this.sourcePoint.x=parseFloat(this.sourcePoint.x)*t,this.sourcePoint.y=parseFloat(this.sourcePoint.y)*e),null!=this.targetPoint&&(this.targetPoint.x=parseFloat(this.targetPoint.x)*t,this.targetPoint.y=parseFloat(this.targetPoint.y)*e),null!=this.points)for(var i=0;i<this.points.length;i++)null!=this.points[i]&&(this.points[i].x=parseFloat(this.points[i].x)*t,this.points[i].y=parseFloat(this.points[i].y)*e);this.relative||(this.x=parseFloat(this.x)*t,this.y=parseFloat(this.y)*e,n&&(e=t=Math.min(t,e)),this.width=parseFloat(this.width)*t,this.height=parseFloat(this.height)*e)},mxGeometry.prototype.equals=function(t){return mxRectangle.prototype.equals.apply(this,arguments)&&this.relative==t.relative&&(null==this.sourcePoint&&null==t.sourcePoint||null!=this.sourcePoint&&this.sourcePoint.equals(t.sourcePoint))&&(null==this.targetPoint&&null==t.targetPoint||null!=this.targetPoint&&this.targetPoint.equals(t.targetPoint))&&(null==this.points&&null==t.points||null!=this.points&&mxUtils.equalPoints(this.points,t.points))&&(null==this.alternateBounds&&null==t.alternateBounds||null!=this.alternateBounds&&this.alternateBounds.equals(t.alternateBounds))&&(null==this.offset&&null==t.offset||null!=this.offset&&this.offset.equals(t.offset))};var mxCellPath={PATH_SEPARATOR:".",create:function(t){var e="";if(null!=t)for(var n=t.getParent();null!=n;)e=n.getIndex(t)+mxCellPath.PATH_SEPARATOR+e,n=(t=n).getParent();return e=1<(t=e.length)?e.substring(0,t-1):e},getParentPath:function(t){if(null!=t){var e=t.lastIndexOf(mxCellPath.PATH_SEPARATOR);if(0<=e)return t.substring(0,e);if(0<t.length)return""}return null},resolve:function(t,e){var n=t;if(null!=e)for(var i=e.split(mxCellPath.PATH_SEPARATOR),l=0;l<i.length;l++)n=n.getChildAt(parseInt(i[l]));return n},compare:function(t,e){for(var n=Math.min(t.length,e.length),i=0,l=0;l<n;l++)if(t[l]!=e[l]){i=0==t[l].length||0==e[l].length?t[l]==e[l]?0:t[l]>e[l]?1:-1:(n=parseInt(t[l]))==(l=parseInt(e[l]))?0:l<n?1:-1;break}return i=0==i&&(n=t.length)!=(l=e.length)?l<n?1:-1:i}},mxPerimeter={RectanglePerimeter:function(t,e,n,i){e=t.getCenterX();var l=t.getCenterY(),s=Math.atan2(n.y-l,n.x-e),o=new mxPoint(0,0),r=Math.PI,a=Math.PI/2-s,h=Math.atan2(t.height,t.width);return s<-r+h||r-h<s?(o.x=t.x,o.y=l-t.width*Math.tan(s)/2):s<-h?(o.y=t.y,o.x=e-t.height*Math.tan(a)/2):s<h?(o.x=t.x+t.width,o.y=l+t.width*Math.tan(s)/2):(o.y=t.y+t.height,o.x=e+t.height*Math.tan(a)/2),i&&(n.x>=t.x&&n.x<=t.x+t.width?o.x=n.x:n.y>=t.y&&n.y<=t.y+t.height&&(o.y=n.y),n.x<t.x?o.x=t.x:n.x>t.x+t.width&&(o.x=t.x+t.width),n.y<t.y?o.y=t.y:n.y>t.y+t.height&&(o.y=t.y+t.height)),o},EllipsePerimeter:function(t,e,n,i){var l=t.x,s=t.y,o=t.width/2,r=t.height/2,a=l+o,h=s+r,d=(e=n.x,n=n.y,parseInt(e-a)),u=parseInt(n-h);if(0==d&&0!=u)return new mxPoint(a,h+r*u/Math.abs(u));if(0!=d||0!=u){if(i){if(s<=n&&n<=s+t.height)return t=n-h,t=Math.sqrt(o*o*(1-t*t/(r*r)))||0,new mxPoint(a+(t=e<=l?-t:t),n);if(l<=e&&e<=l+t.width)return t=e-a,t=Math.sqrt(r*r*(1-t*t/(o*o)))||0,new mxPoint(e,h+(t=n<=s?-t:t))}h-=(l=u/d)*a,a=(-(t=-2*a*(s=o*o*l*l+r*r))-(r=Math.sqrt(t*t-4*s*(o*o*l*l*a*a+r*r*a*a-o*o*r*r))))/(2*s),r=l*(o=(-t+r)/(2*s))+h,h=l*a+h,n=Math.sqrt(Math.pow(o-e,2)+Math.pow(r-n,2))<Math.sqrt(Math.pow(a-e,2)+Math.pow(h-n,2))?(e=o,r):(e=a,h)}return new mxPoint(e,n)},RhombusPerimeter:function(t,e,n,i){e=t.x;var l,s,o=t.y,r=t.width,a=e+r/2,h=o+(t=t.height)/2,d=n.x;return n=n.y,a==d?new mxPoint(a,n<h?o:o+t):h==n?new mxPoint(d<a?e:e+r,h):(l=a,s=h,i&&(e<=d&&d<=e+r?l=d:o<=n&&n<=o+t&&(s=n)),d<a?n<h?mxUtils.intersection(d,n,l,s,a,o,e,h):mxUtils.intersection(d,n,l,s,a,o+t,e,h):n<h?mxUtils.intersection(d,n,l,s,a,o,e+r,h):mxUtils.intersection(d,n,l,s,a,o+t,e+r,h))},TrianglePerimeter:function(t,e,n,i){var l=(e=null!=e?e.style[mxConstants.STYLE_DIRECTION]:null)==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH,s=t.x,o=t.y,r=t.width,a=t.height,h=(t=s+r/2,o+a/2),d=new mxPoint(s,o),u=new mxPoint(s+r,h),p=new mxPoint(s,o+a),c=(e==mxConstants.DIRECTION_NORTH?(d=p,u=new mxPoint(t,o),p=new mxPoint(s+r,o+a)):e==mxConstants.DIRECTION_SOUTH?(u=new mxPoint(t,o+a),p=new mxPoint(s+r,o)):e==mxConstants.DIRECTION_WEST&&(d=new mxPoint(s+r,o),u=new mxPoint(s,h),p=new mxPoint(s+r,o+a)),n.x-t),m=n.y-h,c=l?Math.atan2(c,m):Math.atan2(m,c),m=l?Math.atan2(r,a):Math.atan2(a,r);return n=null==(n=(e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_WEST?-m<c&&c<m:c<-Math.PI+m||c>Math.PI-m)?i&&(l&&n.x>=d.x&&n.x<=p.x||!l&&n.y>=d.y&&n.y<=p.y)?l?new mxPoint(n.x,d.y):new mxPoint(d.x,n.y):e==mxConstants.DIRECTION_NORTH?new mxPoint(s+r/2+a*Math.tan(c)/2,o+a):e==mxConstants.DIRECTION_SOUTH?new mxPoint(s+r/2-a*Math.tan(c)/2,o):e==mxConstants.DIRECTION_WEST?new mxPoint(s+r,o+a/2+r*Math.tan(c)/2):new mxPoint(s,o+a/2-r*Math.tan(c)/2):(i&&(i=new mxPoint(t,h),n.y>=o&&n.y<=o+a?(i.x=l?t:e==mxConstants.DIRECTION_WEST?s+r:s,i.y=n.y):n.x>=s&&n.x<=s+r&&(i.x=n.x,i.y=l?e==mxConstants.DIRECTION_NORTH?o+a:o:h),t=i.x,h=i.y),l&&n.x<=s+r/2||!l&&n.y<=o+a/2?mxUtils.intersection(n.x,n.y,t,h,d.x,d.y,u.x,u.y):mxUtils.intersection(n.x,n.y,t,h,u.x,u.y,p.x,p.y)))?new mxPoint(t,h):n},HexagonPerimeter:function(t,e,n,i){var l=t.x,s=t.y,o=t.width,r=t.height,a=t.getCenterX(),h=(t=t.getCenterY(),n.x),d=n.y,u=-Math.atan2(d-t,h-a),p=Math.PI,c=Math.PI/2,m=(new mxPoint(a,t),(e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST)==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH),g=(e=new mxPoint,new mxPoint);if(i=h<l&&d<s||h<l&&s+r<d||l+o<h&&d<s||l+o<h&&s+r<d?!1:i){if(m){if(h==a){if(d<=s)return new mxPoint(a,s);if(s+r<=d)return new mxPoint(a,s+r)}else if(h<l){if(d==s+r/4)return new mxPoint(l,s+r/4);if(d==s+3*r/4)return new mxPoint(l,s+3*r/4)}else if(l+o<h){if(d==s+r/4)return new mxPoint(l+o,s+r/4);if(d==s+3*r/4)return new mxPoint(l+o,s+3*r/4)}else if(h==l){if(d<t)return new mxPoint(l,s+r/4);if(t<d)return new mxPoint(l,s+3*r/4)}else if(h==l+o){if(d<t)return new mxPoint(l+o,s+r/4);if(t<d)return new mxPoint(l+o,s+3*r/4)}if(d==s)return new mxPoint(a,s);if(d==s+r)return new mxPoint(a,s+r);h<a?s+r/4<d&&d<s+3*r/4?(e=new mxPoint(l,s),g=new mxPoint(l,s+r)):d<s+r/4?(e=new mxPoint(l-Math.floor(.5*o),s+Math.floor(.5*r)),g=new mxPoint(l+o,s-Math.floor(.25*r))):s+3*r/4<d&&(e=new mxPoint(l-Math.floor(.5*o),s+Math.floor(.5*r)),g=new mxPoint(l+o,s+Math.floor(1.25*r))):a<h&&(s+r/4<d&&d<s+3*r/4?(e=new mxPoint(l+o,s),g=new mxPoint(l+o,s+r)):d<s+r/4?(e=new mxPoint(l,s-Math.floor(.25*r)),g=new mxPoint(l+Math.floor(1.5*o),s+Math.floor(.5*r))):s+3*r/4<d&&(e=new mxPoint(l+Math.floor(1.5*o),s+Math.floor(.5*r)),g=new mxPoint(l,s+Math.floor(1.25*r))))}else{if(d==t){if(h<=l)return new mxPoint(l,s+r/2);if(l+o<=h)return new mxPoint(l+o,s+r/2)}else if(d<s){if(h==l+o/4)return new mxPoint(l+o/4,s);if(h==l+3*o/4)return new mxPoint(l+3*o/4,s)}else if(s+r<d){if(h==l+o/4)return new mxPoint(l+o/4,s+r);if(h==l+3*o/4)return new mxPoint(l+3*o/4,s+r)}else if(d==s){if(h<a)return new mxPoint(l+o/4,s);if(a<h)return new mxPoint(l+3*o/4,s)}else if(d==s+r){if(h<a)return new mxPoint(l+o/4,s+r);if(t<d)return new mxPoint(l+3*o/4,s+r)}if(h==l)return new mxPoint(l,t);if(h==l+o)return new mxPoint(l+o,t);d<t?l+o/4<h&&h<l+3*o/4?(e=new mxPoint(l,s),g=new mxPoint(l+o,s)):h<l+o/4?(e=new mxPoint(l-Math.floor(.25*o),s+r),g=new mxPoint(l+Math.floor(.5*o),s-Math.floor(.5*r))):l+3*o/4<h&&(e=new mxPoint(l+Math.floor(.5*o),s-Math.floor(.5*r)),g=new mxPoint(l+Math.floor(1.25*o),s+r)):t<d&&(l+o/4<h&&h<l+3*o/4?(e=new mxPoint(l,s+r),g=new mxPoint(l+o,s+r)):h<l+o/4?(e=new mxPoint(l-Math.floor(.25*o),s),g=new mxPoint(l+Math.floor(.5*o),s+Math.floor(1.5*r))):l+3*o/4<h&&(e=new mxPoint(l+Math.floor(.5*o),s+Math.floor(1.5*r)),g=new mxPoint(l+Math.floor(1.25*o),s)))}i=a,u=t,l<=h&&h<=l+o?(i=h,u=d<t?s+r:s):s<=d&&d<=s+r&&(u=d,i=h<a?l+o:l),n=mxUtils.intersection(i,u,n.x,n.y,e.x,e.y,g.x,g.y)}else{if(m){if(u==(h=Math.atan2(r/4,o/2)))return new mxPoint(l+o,s+Math.floor(.25*r));if(u==c)return new mxPoint(l+Math.floor(.5*o),s);if(u==p-h)return new mxPoint(l,s+Math.floor(.25*r));if(u==-h)return new mxPoint(l+o,s+Math.floor(.75*r));if(u==-c)return new mxPoint(l+Math.floor(.5*o),s+r);if(u==-p+h)return new mxPoint(l,s+Math.floor(.75*r));u<h&&-h<u?(e=new mxPoint(l+o,s),g=new mxPoint(l+o,s+r)):h<u&&u<c?(e=new mxPoint(l,s-Math.floor(.25*r)),g=new mxPoint(l+Math.floor(1.5*o),s+Math.floor(.5*r))):c<u&&u<p-h?(e=new mxPoint(l-Math.floor(.5*o),s+Math.floor(.5*r)),g=new mxPoint(l+o,s-Math.floor(.25*r))):p-h<u&&u<=p||u<-p+h&&-p<=u?(e=new mxPoint(l,s),g=new mxPoint(l,s+r)):u<-h&&-c<u?(e=new mxPoint(l+Math.floor(1.5*o),s+Math.floor(.5*r)),g=new mxPoint(l,s+Math.floor(1.25*r))):u<-c&&-p+h<u&&(e=new mxPoint(l-Math.floor(.5*o),s+Math.floor(.5*r)),g=new mxPoint(l+o,s+Math.floor(1.25*r)))}else{if(u==(h=Math.atan2(r/2,o/4)))return new mxPoint(l+Math.floor(.75*o),s);if(u==p-h)return new mxPoint(l+Math.floor(.25*o),s);if(u==p||u==-p)return new mxPoint(l,s+Math.floor(.5*r));if(0==u)return new mxPoint(l+o,s+Math.floor(.5*r));if(u==-h)return new mxPoint(l+Math.floor(.75*o),s+r);if(u==-p+h)return new mxPoint(l+Math.floor(.25*o),s+r);0<u&&u<h?(e=new mxPoint(l+Math.floor(.5*o),s-Math.floor(.5*r)),g=new mxPoint(l+Math.floor(1.25*o),s+r)):h<u&&u<p-h?(e=new mxPoint(l,s),g=new mxPoint(l+o,s)):p-h<u&&u<p?(e=new mxPoint(l-Math.floor(.25*o),s+r),g=new mxPoint(l+Math.floor(.5*o),s-Math.floor(.5*r))):u<0&&-h<u?(e=new mxPoint(l+Math.floor(.5*o),s+Math.floor(1.5*r)),g=new mxPoint(l+Math.floor(1.25*o),s)):u<-h&&-p+h<u?(e=new mxPoint(l,s+r),g=new mxPoint(l+o,s+r)):u<-p+h&&-p<u&&(e=new mxPoint(l-Math.floor(.25*o),s),g=new mxPoint(l+Math.floor(.5*o),s+Math.floor(1.5*r)))}n=mxUtils.intersection(a,t,n.x,n.y,e.x,e.y,g.x,g.y)}return null==n?new mxPoint(a,t):n}};function mxPrintPreview(t,e,n,i,l,s,o,r,a){this.graph=t,this.scale=null!=e?e:1/t.pageScale,this.border=null!=i?i:0,this.pageFormat=mxRectangle.fromRectangle(null!=n?n:t.pageFormat),this.title=null!=r?r:"Printer-friendly version",this.x0=null!=l?l:0,this.y0=null!=s?s:0,this.borderColor=o,this.pageSelector=null==a||a}function mxCellState(t,e,n){this.view=t,this.cell=e,this.style=null!=n?n:{},this.origin=new mxPoint,this.absoluteOffset=new mxPoint}function mxGraphSelectionModel(t){this.graph=t,this.cells=[]}function mxStylesheet(){this.styles={},this.putDefaultVertexStyle(this.createDefaultVertexStyle()),this.putDefaultEdgeStyle(this.createDefaultEdgeStyle())}function mxSelectionChange(t,e,n){this.selectionModel=t,this.added=null!=e?e.slice():null,this.removed=null!=n?n.slice():null}function mxCellEditor(t){this.graph=t,this.zoomHandler=mxUtils.bind(this,function(){this.graph.isEditing()&&this.resize()}),this.graph.view.addListener(mxEvent.SCALE,this.zoomHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.zoomHandler),this.changeHandler=mxUtils.bind(this,function(t){null!=this.editingCell&&null==this.graph.getView().getState(this.editingCell)&&this.stopEditing(!0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler)}function mxCellRenderer(){}mxPrintPreview.prototype.graph=null,mxPrintPreview.prototype.pageFormat=null,mxPrintPreview.prototype.scale=null,mxPrintPreview.prototype.border=0,mxPrintPreview.prototype.marginTop=0,mxPrintPreview.prototype.marginBottom=0,mxPrintPreview.prototype.x0=0,mxPrintPreview.prototype.y0=0,mxPrintPreview.prototype.autoOrigin=!0,mxPrintPreview.prototype.printOverlays=!1,mxPrintPreview.prototype.printControls=!1,mxPrintPreview.prototype.printBackgroundImage=!1,mxPrintPreview.prototype.backgroundColor="#ffffff",mxPrintPreview.prototype.borderColor=null,mxPrintPreview.prototype.title=null,mxPrintPreview.prototype.pageSelector=null,mxPrintPreview.prototype.wnd=null,mxPrintPreview.prototype.targetWindow=null,mxPrintPreview.prototype.pageCount=0,mxPrintPreview.prototype.clipping=!0,mxPrintPreview.prototype.getWindow=function(){return this.wnd},mxPrintPreview.prototype.getDoctype=function(){var t="";return 8==document.documentMode?t='<meta http-equiv="X-UA-Compatible" content="IE=8">':8<document.documentMode&&(t='\x3c!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]--\x3e'),t},mxPrintPreview.prototype.appendGraph=function(t,e,n,i,l,s){this.graph=t,this.scale=null!=e?e:1/t.pageScale,this.x0=n,this.y0=i,this.open(null,null,l,s)},mxPrintPreview.prototype.open=function(t,e,i,n){var l=this.graph.cellRenderer.initializeOverlay,s=null;try{this.printOverlays&&(this.graph.cellRenderer.initializeOverlay=function(t,e){e.init(t.view.getDrawPane())}),this.printControls&&(this.graph.cellRenderer.initControl=function(t,e,n,i){e.dialect=t.view.graph.dialect,e.init(t.view.getDrawPane())}),this.wnd=null!=e?e:this.wnd;var o,r=!1,a=(null==this.wnd&&(r=!0,this.wnd=window.open()),this.wnd.document),h=(r&&(null!=(o=this.getDoctype())&&0<o.length&&a.writeln(o),"CSS1Compat"===document.compatMode&&a.writeln("<!DOCTYPE html>"),a.writeln("<html>"),a.writeln("<head>"),this.writeHead(a,t),a.writeln("</head>"),a.writeln('<body class="mxPage">')),this.graph.getGraphBounds().clone()),d=this.graph.getView().getScale(),u=d/this.scale,p=this.graph.getView().getTranslate(),c=(this.autoOrigin||(this.x0-=p.x*this.scale,this.y0-=p.y*this.scale,h.width+=h.x,h.height+=h.y,h.x=0,this.border=h.y=0),this.pageFormat.width-2*this.border),m=this.pageFormat.height-2*this.border,g=(this.pageFormat.height+=this.marginTop+this.marginBottom,h.width/=u,h.height/=u,Math.max(1,Math.ceil((h.width+this.x0)/c))),x=Math.max(1,Math.ceil((h.height+this.y0)/m)),y=(this.pageCount=g*x,mxUtils.bind(this,function(){var t,e;this.pageSelector&&(1<x||1<g)&&(t=this.createPageSelector(x,g),a.body.appendChild(t),mxClient.IS_IE&&null==a.documentMode||5==a.documentMode||8==a.documentMode||7==a.documentMode)&&(t.style.position="absolute",e=function(){t.style.top=(a.body.scrollTop||a.documentElement.scrollTop)+10+"px"},mxEvent.addListener(this.wnd,"scroll",function(t){e()}),mxEvent.addListener(this.wnd,"resize",function(t){e()}))})),f=mxUtils.bind(this,function(t,e){var n;null!=this.borderColor&&(t.style.borderColor=this.borderColor,t.style.borderStyle="solid",t.style.borderWidth="1px"),t.style.background=this.backgroundColor,(i||e)&&(t.style.pageBreakAfter="always"),r&&(mxClient.IS_IE||11<=document.documentMode||mxClient.IS_EDGE)?(a.writeln(t.outerHTML),t.parentNode.removeChild(t)):mxClient.IS_IE||11<=document.documentMode||mxClient.IS_EDGE?((n=a.createElement("div")).innerHTML=t.outerHTML,n=n.getElementsByTagName("div")[0],a.body.appendChild(n),t.parentNode.removeChild(t)):(t.parentNode.removeChild(t),a.body.appendChild(t)),(i||e)&&this.addPageBreak(a)}),C=this.getCoverPages(this.pageFormat.width,this.pageFormat.height);if(null!=C)for(var E=0;E<C.length;E++)f(C[E],!0);for(var v=this.getAppendices(this.pageFormat.width,this.pageFormat.height),E=0;E<x;E++){var S=E*m/this.scale-this.y0/this.scale+(h.y-p.y*d)/d;for(t=0;t<g;t++){if(null==this.wnd)return null;var b=t*c/this.scale-this.x0/this.scale+(h.x-p.x*d)/d,w=E*g+t+1,T=new mxRectangle(b,S,c,m);(s=this.renderPage(this.pageFormat.width,this.pageFormat.height,0,0,mxUtils.bind(this,function(t){this.addGraphFragment(-b,-S,this.scale,w,t,T),this.printBackgroundImage&&this.insertBackgroundImage(t,-b,-S)}),w)).setAttribute("id","mxPage-"+w),f(s,null!=v||E<x-1||t<g-1)}}if(null!=v)for(E=0;E<v.length;E++)f(v[E],E<v.length-1);r&&!n&&(this.closeDocument(),y()),this.wnd.focus()}catch(t){null!=s&&null!=s.parentNode&&s.parentNode.removeChild(s)}finally{this.graph.cellRenderer.initializeOverlay=l}return this.wnd},mxPrintPreview.prototype.addPageBreak=function(t){var e=t.createElement("hr");e.className="mxPageBreak",t.body.appendChild(e)},mxPrintPreview.prototype.closeDocument=function(){try{var t;null!=this.wnd&&null!=this.wnd.document&&(t=this.wnd.document,this.writePostfix(t),t.writeln("</body>"),t.writeln("</html>"),t.close(),mxEvent.release(t.body))}catch(t){}},mxPrintPreview.prototype.writeHead=function(t,e){null!=this.title&&t.writeln("<title>"+this.title+"</title>"),t.writeln('<style type="text/css">'),t.writeln("@media print {"),t.writeln("  * { -webkit-print-color-adjust: exact; }"),t.writeln("  table.mxPageSelector { display: none; }"),t.writeln("  hr.mxPageBreak { display: none; }"),t.writeln("}"),t.writeln("@media screen {"),t.writeln("  table.mxPageSelector { position: fixed; right: 10px; top: 10px;font-family: Arial; font-size:10pt; border: solid 1px darkgray;background: white; border-collapse:collapse; }"),t.writeln("  table.mxPageSelector td { border: solid 1px gray; padding:4px; }"),t.writeln("  body.mxPage { background: gray; }"),t.writeln("}"),null!=e&&t.writeln(e),t.writeln("</style>")},mxPrintPreview.prototype.writePostfix=function(t){},mxPrintPreview.prototype.createPageSelector=function(t,e){var n=this.wnd.document,i=n.createElement("table");i.className="mxPageSelector",i.setAttribute("border","0");for(var l=n.createElement("tbody"),s=0;s<t;s++){for(var o=n.createElement("tr"),r=0;r<e;r++){var a=s*e+r+1,h=n.createElement("td"),d=n.createElement("a");d.setAttribute("href","#mxPage-"+a),!mxClient.IS_NS||mxClient.IS_SF||mxClient.IS_GC||d.setAttribute("onclick","var page = document.getElementById('mxPage-"+a+"');page.scrollIntoView(true);event.preventDefault();"),mxUtils.write(d,a,n),h.appendChild(d),o.appendChild(h)}l.appendChild(o)}return i.appendChild(l),i},mxPrintPreview.prototype.renderPage=function(t,e,n,i,l,s){s=this.wnd.document;var o=document.createElement("div"),r=null;try{var a,h,r=0!=n||0!=i?(o.style.position="relative",o.style.width=t+"px",o.style.height=e+"px",o.style.pageBreakInside="avoid",(a=document.createElement("div")).style.position="relative",a.style.top=this.border+"px",a.style.left=this.border+"px",a.style.width=t-2*this.border+"px",a.style.height=e-2*this.border+"px",a.style.overflow="hidden",(h=document.createElement("div")).style.position="relative",h.style.marginLeft=n+"px",h.style.marginTop=i+"px",8==s.documentMode&&(a.style.position="absolute",h.style.position="absolute"),10==s.documentMode&&(h.style.width="100%",h.style.height="100%"),a.appendChild(h),o.appendChild(a),document.body.appendChild(o),h):(o.style.width=t+"px",o.style.height=e+"px",o.style.overflow="hidden",o.style.pageBreakInside="avoid",8==s.documentMode&&(o.style.position="relative"),(a=document.createElement("div")).style.width=t-2*this.border+"px",a.style.height=e-2*this.border+"px",a.style.overflow="hidden",!mxClient.IS_IE||null!=s.documentMode&&5!=s.documentMode&&8!=s.documentMode&&7!=s.documentMode?(a.style.top=this.border+"px",a.style.left=this.border+"px"):(a.style.marginTop=this.border+"px",a.style.marginLeft=this.border+"px"),o.appendChild(a),document.body.appendChild(o),a)}catch(t){throw o.parentNode.removeChild(o),t}return l(r),o},mxPrintPreview.prototype.getRoot=function(){var t=this.graph.view.currentRoot;return t=null==t?this.graph.getModel().getRoot():t},mxPrintPreview.prototype.useCssTransforms=function(){return!mxClient.NO_FO&&!mxClient.IS_SF},mxPrintPreview.prototype.addGraphFragment=function(t,e,n,i,l,s){var o,r,a=this.graph.getView(),h=(i=this.graph.container,this.graph.container=l,a.getCanvas()),d=a.getBackgroundPane(),u=a.getDrawPane(),p=a.getOverlayPane(),c=n,m=(this.graph.dialect==mxConstants.DIALECT_SVG?(a.createSvg(),this.useCssTransforms()&&((o=a.getDrawPane().parentNode).getAttribute("transform"),o.setAttribute("transformOrigin","0 0"),o.setAttribute("transform","scale("+n+","+n+")translate("+t+","+e+")"),n=1,e=t=0)):a.createHtml(),o=a.isEventsEnabled(),a.setEventsEnabled(!1),this.graph.isEnabled()),g=(this.graph.setEnabled(!1),a.getTranslate()),x=(a.translate=new mxPoint(t,e),this.graph.cellRenderer.redraw),y=a.states;t=a.scale,this.clipping&&(r=new mxRectangle((s.x+g.x)*t,(s.y+g.y)*t,s.width*t/c,s.height*t/c),this.graph.cellRenderer.redraw=function(t,e,n){if(null!=t){t=y.get(t.cell);if(null!=t&&null!=(t=a.getBoundingBox(t,!1))&&0<t.width&&0<t.height&&!mxUtils.intersects(r,t))return}x.apply(this,arguments)}),t=null;try{var f=[this.getRoot()];t=new mxTemporaryCellStates(a,n,f,null,mxUtils.bind(this,function(t){return this.getLinkForCellState(t)}))}finally{if(mxClient.IS_IE)a.overlayPane.innerHTML="",a.canvas.style.overflow="hidden",a.canvas.style.position="relative",a.canvas.style.top=this.marginTop+"px",a.canvas.style.width=s.width+"px",a.canvas.style.height=s.height+"px";else for(n=l.firstChild;null!=n;)f=n.nextSibling,"svg"==(e=n.nodeName.toLowerCase())?(n.style.overflow="hidden",n.style.position="relative",n.style.top=this.marginTop+"px",n.setAttribute("width",s.width),n.setAttribute("height",s.height),n.style.width="",n.style.height=""):"default"!=n.style.cursor&&"div"!=e&&n.parentNode.removeChild(n),n=f;this.printBackgroundImage&&0<(l=l.getElementsByTagName("svg")).length&&(l[0].style.position="absolute"),a.overlayPane.parentNode.removeChild(a.overlayPane),this.graph.setEnabled(m),this.graph.container=i,this.graph.cellRenderer.redraw=x,a.canvas=h,a.backgroundPane=d,a.drawPane=u,a.overlayPane=p,a.translate=g,t.destroy(),a.setEventsEnabled(o)}},mxPrintPreview.prototype.getLinkForCellState=function(t){return this.graph.getLinkForCell(t.cell)},mxPrintPreview.prototype.insertBackgroundImage=function(t,e,n){var i,l=this.graph.backgroundImage;null!=l&&((i=document.createElement("img")).style.position="absolute",i.style.marginLeft=Math.round(e*this.scale)+"px",i.style.marginTop=Math.round(n*this.scale)+"px",i.setAttribute("width",Math.round(this.scale*l.width)),i.setAttribute("height",Math.round(this.scale*l.height)),i.src=l.src,t.insertBefore(i,t.firstChild))},mxPrintPreview.prototype.getCoverPages=function(){return null},mxPrintPreview.prototype.getAppendices=function(){return null},mxPrintPreview.prototype.print=function(t){null!=(t=this.open(t))&&t.print()},mxPrintPreview.prototype.close=function(){null!=this.wnd&&(this.wnd.close(),this.wnd=null)},mxCellState.prototype=new mxRectangle,mxCellState.prototype.constructor=mxCellState,mxCellState.prototype.view=null,mxCellState.prototype.cell=null,mxCellState.prototype.style=null,mxCellState.prototype.invalidStyle=!1,mxCellState.prototype.invalid=!0,mxCellState.prototype.origin=null,mxCellState.prototype.absolutePoints=null,mxCellState.prototype.absoluteOffset=null,mxCellState.prototype.visibleSourceState=null,mxCellState.prototype.visibleTargetState=null,mxCellState.prototype.terminalDistance=0,mxCellState.prototype.length=0,mxCellState.prototype.segments=null,mxCellState.prototype.shape=null,mxCellState.prototype.text=null,mxCellState.prototype.unscaledWidth=null,mxCellState.prototype.unscaledHeight=null,mxCellState.prototype.getPerimeterBounds=function(t,e){var n;return t=t||0,e=null!=e?e:new mxRectangle(this.x,this.y,this.width,this.height),null!=this.shape&&null!=this.shape.stencil&&"fixed"==this.shape.stencil.aspect&&(n=this.shape.stencil.computeAspect(this.style,e.x,e.y,e.width,e.height),e.x=n.x,e.y=n.y,e.width=this.shape.stencil.w0*n.width,e.height=this.shape.stencil.h0*n.height),0!=t&&e.grow(t),e},mxCellState.prototype.setAbsoluteTerminalPoint=function(t,e){e?(null==this.absolutePoints&&(this.absolutePoints=[]),0==this.absolutePoints.length?this.absolutePoints.push(t):this.absolutePoints[0]=t):null==this.absolutePoints?(this.absolutePoints=[],this.absolutePoints.push(null),this.absolutePoints.push(t)):1==this.absolutePoints.length?this.absolutePoints.push(t):this.absolutePoints[this.absolutePoints.length-1]=t},mxCellState.prototype.setCursor=function(t){null!=this.shape&&this.shape.setCursor(t),null!=this.text&&this.text.setCursor(t)},mxCellState.prototype.getVisibleTerminal=function(t){return null!=(t=this.getVisibleTerminalState(t))?t.cell:null},mxCellState.prototype.getVisibleTerminalState=function(t){return t?this.visibleSourceState:this.visibleTargetState},mxCellState.prototype.setVisibleTerminalState=function(t,e){e?this.visibleSourceState=t:this.visibleTargetState=t},mxCellState.prototype.getCellBounds=function(){return this.cellBounds},mxCellState.prototype.getPaintBounds=function(){return this.paintBounds},mxCellState.prototype.updateCachedBounds=function(){var t=this.view.translate,e=this.view.scale;this.cellBounds=new mxRectangle(this.x/e-t.x,this.y/e-t.y,this.width/e,this.height/e),this.paintBounds=mxRectangle.fromRectangle(this.cellBounds),null!=this.shape&&this.shape.isPaintBoundsInverted()&&this.paintBounds.rotate90()},mxCellState.prototype.setState=function(t){this.view=t.view,this.cell=t.cell,this.style=t.style,this.absolutePoints=t.absolutePoints,this.origin=t.origin,this.absoluteOffset=t.absoluteOffset,this.boundingBox=t.boundingBox,this.terminalDistance=t.terminalDistance,this.segments=t.segments,this.length=t.length,this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this.unscaledWidth=t.unscaledWidth,this.unscaledHeight=t.unscaledHeight},mxCellState.prototype.clone=function(){var t=new mxCellState(this.view,this.cell,this.style);if(null!=this.absolutePoints){t.absolutePoints=[];for(var e=0;e<this.absolutePoints.length;e++)t.absolutePoints[e]=this.absolutePoints[e].clone()}return null!=this.origin&&(t.origin=this.origin.clone()),null!=this.absoluteOffset&&(t.absoluteOffset=this.absoluteOffset.clone()),null!=this.boundingBox&&(t.boundingBox=this.boundingBox.clone()),t.terminalDistance=this.terminalDistance,t.segments=this.segments,t.length=this.length,t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t.unscaledWidth=this.unscaledWidth,t.unscaledHeight=this.unscaledHeight,t},mxCellState.prototype.destroy=function(){this.view.graph.cellRenderer.destroy(this)},mxGraphSelectionModel.prototype=new mxEventSource,mxGraphSelectionModel.prototype.constructor=mxGraphSelectionModel,mxGraphSelectionModel.prototype.doneResource="none"!=mxClient.language?"done":"",mxStylesheet.prototype.createDefaultVertexStyle=function(){var t={};return t[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_RECTANGLE,t[mxConstants.STYLE_PERIMETER]=mxPerimeter.RectanglePerimeter,t[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,t[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,t[mxConstants.STYLE_FILLCOLOR]="#C3D9FF",t[mxConstants.STYLE_STROKECOLOR]="#6482B9",t[mxConstants.STYLE_FONTCOLOR]="#774400",t},mxStylesheet.prototype.createDefaultEdgeStyle=function(){var t={};return t[mxConstants.STYLE_SHAPE]=mxConstants.SHAPE_CONNECTOR,t[mxConstants.STYLE_ENDARROW]=mxConstants.ARROW_CLASSIC,t[mxConstants.STYLE_VERTICAL_ALIGN]=mxConstants.ALIGN_MIDDLE,t[mxConstants.STYLE_ALIGN]=mxConstants.ALIGN_CENTER,t[mxConstants.STYLE_STROKECOLOR]="#6482B9",t[mxConstants.STYLE_FONTCOLOR]="#446299",t},mxStylesheet.prototype.putDefaultVertexStyle=function(t){this.putCellStyle("defaultVertex",t)},mxStylesheet.prototype.putDefaultEdgeStyle=function(t){this.putCellStyle("defaultEdge",t)},mxStylesheet.prototype.getDefaultVertexStyle=function(){return this.styles.defaultVertex},mxStylesheet.prototype.getDefaultEdgeStyle=function(){return this.styles.defaultEdge},mxStylesheet.prototype.putCellStyle=function(t,e){this.styles[t]=e},mxStylesheet.prototype.getCellStyle=function(t,e){var n=e;if(null!=t&&0<t.length)for(var i=t.split(";"),n=null!=n&&";"!=t.charAt(0)?mxUtils.clone(n):{},l=0;l<i.length;l++){var s=(o=i[l]).indexOf("=");if(0<=s){var o,r=o.substring(0,s);(o=o.substring(s+1))==mxConstants.NONE?delete n[r]:mxUtils.isNumeric(o)?n[r]=parseFloat(o):n[r]=o}else if(null!=(o=this.styles[o]))for(r in o)n[r]=o[r]}return n},mxGraphSelectionModel.prototype.updatingSelectionResource="none"!=mxClient.language?"updatingSelection":"",mxGraphSelectionModel.prototype.graph=null,mxGraphSelectionModel.prototype.singleSelection=!1,mxGraphSelectionModel.prototype.isSingleSelection=function(){return this.singleSelection},mxGraphSelectionModel.prototype.setSingleSelection=function(t){this.singleSelection=t},mxGraphSelectionModel.prototype.isSelected=function(t){return null!=t&&0<=mxUtils.indexOf(this.cells,t)},mxGraphSelectionModel.prototype.isEmpty=function(){return 0==this.cells.length},mxGraphSelectionModel.prototype.clear=function(){this.changeSelection(null,this.cells)},mxGraphSelectionModel.prototype.setCell=function(t){null!=t&&this.setCells([t])},mxGraphSelectionModel.prototype.setCells=function(t){if(null!=t){this.singleSelection&&(t=[this.getFirstSelectableCell(t)]);for(var e=[],n=0;n<t.length;n++)this.graph.isCellSelectable(t[n])&&e.push(t[n]);this.changeSelection(e,this.cells)}},mxGraphSelectionModel.prototype.getFirstSelectableCell=function(t){if(null!=t)for(var e=0;e<t.length;e++)if(this.graph.isCellSelectable(t[e]))return t[e];return null},mxGraphSelectionModel.prototype.addCell=function(t){null!=t&&this.addCells([t])},mxGraphSelectionModel.prototype.addCells=function(t){if(null!=t){var e=null;this.singleSelection&&(e=this.cells,t=[this.getFirstSelectableCell(t)]);for(var n=[],i=0;i<t.length;i++)!this.isSelected(t[i])&&this.graph.isCellSelectable(t[i])&&n.push(t[i]);this.changeSelection(n,e)}},mxGraphSelectionModel.prototype.removeCell=function(t){null!=t&&this.removeCells([t])},mxGraphSelectionModel.prototype.removeCells=function(t){if(null!=t){for(var e=[],n=0;n<t.length;n++)this.isSelected(t[n])&&e.push(t[n]);this.changeSelection(null,e)}},mxGraphSelectionModel.prototype.changeSelection=function(t,e){(null!=t&&0<t.length&&null!=t[0]||null!=e&&0<e.length&&null!=e[0])&&((t=new mxSelectionChange(this,t,e)).execute(),(e=new mxUndoableEdit(this,!1)).add(t),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",e)))},mxGraphSelectionModel.prototype.cellAdded=function(t){null==t||this.isSelected(t)||this.cells.push(t)},mxGraphSelectionModel.prototype.cellRemoved=function(t){null!=t&&0<=(t=mxUtils.indexOf(this.cells,t))&&this.cells.splice(t,1)},mxSelectionChange.prototype.execute=function(){var t=mxLog.enter("mxSelectionChange.execute");if(window.status=mxResources.get(this.selectionModel.updatingSelectionResource)||this.selectionModel.updatingSelectionResource,null!=this.removed)for(var e=0;e<this.removed.length;e++)this.selectionModel.cellRemoved(this.removed[e]);if(null!=this.added)for(e=0;e<this.added.length;e++)this.selectionModel.cellAdded(this.added[e]);e=this.added,this.added=this.removed,this.removed=e,window.status=mxResources.get(this.selectionModel.doneResource)||this.selectionModel.doneResource,mxLog.leave("mxSelectionChange.execute",t),this.selectionModel.fireEvent(new mxEventObject(mxEvent.CHANGE,"added",this.added,"removed",this.removed))},mxCellEditor.prototype.graph=null,mxCellEditor.prototype.textarea=null,mxCellEditor.prototype.editingCell=null,mxCellEditor.prototype.trigger=null,mxCellEditor.prototype.modified=!1,mxCellEditor.prototype.autoSize=!0,mxCellEditor.prototype.selectText=!0,mxCellEditor.prototype.emptyLabelText=mxClient.IS_FF?"<br>":"",mxCellEditor.prototype.escapeCancelsEditing=!0,mxCellEditor.prototype.textNode="",mxCellEditor.prototype.zIndex=5,mxCellEditor.prototype.minResize=new mxRectangle(0,20),mxCellEditor.prototype.wordWrapPadding=mxClient.IS_IE11?0:1,mxCellEditor.prototype.blurEnabled=!1,mxCellEditor.prototype.initialValue=null,mxCellEditor.prototype.align=null,mxCellEditor.prototype.init=function(){this.textarea=document.createElement("div"),this.textarea.className="mxCellEditor mxPlainTextEditor",this.textarea.contentEditable=!0,mxClient.IS_GC&&(this.textarea.style.minHeight="1em"),this.textarea.style.position=this.isLegacyEditor()?"absolute":"relative",this.installListeners(this.textarea)},mxCellEditor.prototype.applyValue=function(t,e){this.graph.labelChanged(t.cell,e,this.trigger)},mxCellEditor.prototype.setAlign=function(t){null!=this.textarea&&(this.textarea.style.textAlign=t),this.align=t,this.resize()},mxCellEditor.prototype.getInitialValue=function(t,e){t=mxUtils.htmlEntities(this.graph.getEditingValue(t.cell,e),!1);return(t=8!=document.documentMode&&9!=document.documentMode&&10!=document.documentMode?mxUtils.replaceTrailingNewlines(t,"<div><br></div>"):t).replace(/\n/g,"<br>")},mxCellEditor.prototype.getCurrentValue=function(t){return mxUtils.extractTextWithWhitespace(this.textarea.childNodes)},mxCellEditor.prototype.isCancelEditingKeyEvent=function(t){return this.escapeCancelsEditing||mxEvent.isShiftDown(t)||mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)},mxCellEditor.prototype.installListeners=function(e){mxEvent.addListener(e,"dragstart",mxUtils.bind(this,function(t){this.graph.stopEditing(!1),mxEvent.consume(t)})),mxEvent.addListener(e,"blur",mxUtils.bind(this,function(t){this.blurEnabled&&this.focusLost(t)})),mxEvent.addListener(e,"keydown",mxUtils.bind(this,function(t){mxEvent.isConsumed(t)||(this.isStopEditingEvent(t)?(this.graph.stopEditing(!1),mxEvent.consume(t)):27==t.keyCode&&(this.graph.stopEditing(this.isCancelEditingKeyEvent(t)),mxEvent.consume(t)))}));var t=mxUtils.bind(this,function(t){null!=this.editingCell&&this.clearOnChange&&e.innerHTML==this.getEmptyLabelText()&&(!mxClient.IS_FF||8!=t.keyCode&&46!=t.keyCode)&&(this.clearOnChange=!1,e.innerHTML="")}),t=(mxEvent.addListener(e,"keypress",t),mxEvent.addListener(e,"paste",t),t=mxUtils.bind(this,function(t){null!=this.editingCell&&(0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length):this.clearOnChange=!1)}),mxEvent.addListener(e,mxClient.IS_IE11||mxClient.IS_IE?"keyup":"input",t),mxEvent.addListener(e,"cut",t),mxEvent.addListener(e,"paste",t),mxClient.IS_IE11||mxClient.IS_IE?"keydown":"input"),n=mxUtils.bind(this,function(t){null!=this.editingCell&&this.autoSize&&!mxEvent.isConsumed(t)&&(null!=this.resizeThread&&window.clearTimeout(this.resizeThread),this.resizeThread=window.setTimeout(mxUtils.bind(this,function(){this.resizeThread=null,this.resize()}),0))});mxEvent.addListener(e,t,n),mxEvent.addListener(window,"resize",n),9<=document.documentMode?(mxEvent.addListener(e,"DOMNodeRemoved",n),mxEvent.addListener(e,"DOMNodeInserted",n)):(mxEvent.addListener(e,"cut",n),mxEvent.addListener(e,"paste",n))},mxCellEditor.prototype.isStopEditingEvent=function(t){return 113==t.keyCode||this.graph.isEnterStopsCellEditing()&&13==t.keyCode&&!mxEvent.isControlDown(t)&&!mxEvent.isShiftDown(t)},mxCellEditor.prototype.isEventSource=function(t){return mxEvent.getSource(t)==this.textarea},mxCellEditor.prototype.resize=function(){var t,e,n,i,l,s,o,r,a,h,d=this.graph.getView().getState(this.editingCell);null==d?this.stopEditing(!0):null!=this.textarea&&(h=this.graph.getModel().isEdge(d.cell),t=this.graph.getView().scale,n=null,this.autoSize&&"fill"!=d.style[mxConstants.STYLE_OVERFLOW]?(e=mxUtils.getValue(d.style,mxConstants.STYLE_LABEL_WIDTH,null),null==(n=null!=d.text&&null==this.align?d.text.margin:null)&&(n=mxUtils.getAlignmentAsPoint(this.align||mxUtils.getValue(d.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(d.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),h?(this.bounds=new mxRectangle(d.absoluteOffset.x,d.absoluteOffset.y,0,0),null!=e&&(e=(parseFloat(e)+2)*t,this.bounds.width=e,this.bounds.x+=n.x*e)):(h=mxRectangle.fromRectangle(d),r=mxUtils.getValue(d.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),a=mxUtils.getValue(d.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),h=null!=d.shape&&r==mxConstants.ALIGN_CENTER&&a==mxConstants.ALIGN_MIDDLE?d.shape.getLabelBounds(h):h,null!=e&&(h.width=parseFloat(e)*t),d.view.graph.cellRenderer.legacySpacing&&("width"==d.style[mxConstants.STYLE_OVERFLOW]||"block"==d.style[mxConstants.STYLE_OVERFLOW])||(r=parseInt(d.style[mxConstants.STYLE_SPACING]||2)*t,i=(parseInt(d.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*t+r,l=(parseInt(d.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*t+r,s=(parseInt(d.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*t+r,o=(parseInt(d.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*t+r,r=mxUtils.getValue(d.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),a=mxUtils.getValue(d.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),h=new mxRectangle(h.x+o,h.y+i,h.width-(r==mxConstants.ALIGN_CENTER&&null==e?o+l:0),h.height-(a==mxConstants.ALIGN_MIDDLE?i+s:0))),this.bounds=new mxRectangle(h.x+d.absoluteOffset.x,h.y+d.absoluteOffset.y,h.width,h.height)),this.graph.isWrapping(d.cell)&&(2<=this.bounds.width||2<=this.bounds.height)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal",e=Math.round(this.bounds.width/t)+this.wordWrapPadding,"relative"!=this.textarea.style.position?(this.textarea.style.width=e+"px",this.textarea.scrollWidth>e&&(this.textarea.style.width=this.textarea.scrollWidth+"px")):"block"==d.style[mxConstants.STYLE_OVERFLOW]||"width"==d.style[mxConstants.STYLE_OVERFLOW]?(-.5!=n.y&&"width"!=d.style[mxConstants.STYLE_OVERFLOW]||(this.textarea.style.maxHeight=this.bounds.height+"px"),this.textarea.style.width=e+"px"):this.textarea.style.maxWidth=e+"px"):(this.textarea.style.whiteSpace="nowrap",this.textarea.style.width=""),8==document.documentMode&&(this.textarea.style.zoom="1",this.textarea.style.height="auto"),8==document.documentMode?(d=this.textarea.scrollWidth,e=this.textarea.scrollHeight,this.textarea.style.left=Math.max(0,Math.ceil((this.bounds.x-n.x*(this.bounds.width-(d+1)*t)+d*(t-1)*0+2*(n.x+.5))/t))+"px",this.textarea.style.top=Math.max(0,Math.ceil((this.bounds.y-n.y*(this.bounds.height-(e+.5)*t)+e*(t-1)*0+ +Math.abs(n.y+.5))/t))+"px",this.textarea.style.width=Math.round(d*t)+"px",this.textarea.style.height=Math.round(e*t)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x-n.x*(this.bounds.width-2))+1)+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y-n.y*(this.bounds.height-4)+(-1==n.y?3:0))+1)+"px")):(this.bounds=this.getEditorBounds(d),this.textarea.style.width=Math.round(this.bounds.width/t)+"px",this.textarea.style.height=Math.round(this.bounds.height/t)+"px",8==document.documentMode?(this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px"):(this.textarea.style.left=Math.max(0,Math.round(this.bounds.x+1))+"px",this.textarea.style.top=Math.max(0,Math.round(this.bounds.y+1))+"px"),this.graph.isWrapping(d.cell)&&(2<=this.bounds.width||2<=this.bounds.height)&&this.textarea.innerHTML!=this.getEmptyLabelText()?(this.textarea.style.wordWrap=mxConstants.WORD_WRAP,this.textarea.style.whiteSpace="normal","fill"!=d.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=Math.round(this.bounds.width/t)+this.wordWrapPadding+"px")):(this.textarea.style.whiteSpace="nowrap","fill"!=d.style[mxConstants.STYLE_OVERFLOW]&&(this.textarea.style.width=""))),mxUtils.setPrefixedStyle(this.textarea.style,"transformOrigin","0px 0px"),mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+t+","+t+")"+(null==n?"":" translate("+100*n.x+"%,"+100*n.y+"%)")))},mxCellEditor.prototype.focusLost=function(){this.stopEditing(!this.graph.isInvokesStopCellEditing())},mxCellEditor.prototype.getBackgroundColor=function(t){return null},mxCellEditor.prototype.isLegacyEditor=function(){var t,e=!1;return!(e=mxClient.IS_SVG&&null!=(t=this.graph.view.getDrawPane().ownerSVGElement)&&null!=(t=mxUtils.getCurrentStyle(t))?"absolute"==t.position:e)},mxCellEditor.prototype.startEditing=function(t,e){this.stopEditing(!0),(this.align=null)==this.textarea&&this.init(),null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.hideTooltip();var n=this.graph.getView().getState(t);if(null!=n){this.graph.getView();var i=mxUtils.getValue(n.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),l=mxUtils.getValue(n.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),s=mxUtils.getValue(n.style,mxConstants.STYLE_FONTCOLOR,"black"),o=mxUtils.getValue(n.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),r=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,a=(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,h=[];(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&h.push("underline"),(mxUtils.getValue(n.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&h.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(i*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.backgroundColor=this.getBackgroundColor(n),this.textarea.style.textDecoration=h.join(" "),this.textarea.style.fontWeight=r?"bold":"normal",this.textarea.style.fontStyle=a?"italic":"",this.textarea.style.fontSize=Math.round(i)+"px",this.textarea.style.zIndex=this.zIndex,this.textarea.style.fontFamily=l,this.textarea.style.textAlign=o,this.textarea.style.outline="none",this.textarea.style.color=s,(i=(i=this.textDirection=mxUtils.getValue(n.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION))!=mxConstants.TEXT_DIRECTION_AUTO||null==n||null==n.text||n.text.dialect==mxConstants.DIALECT_STRICTHTML||mxUtils.isNode(n.text.value)?i:n.text.getAutoDirection())==mxConstants.TEXT_DIRECTION_LTR||i==mxConstants.TEXT_DIRECTION_RTL?this.textarea.setAttribute("dir",i):this.textarea.removeAttribute("dir"),this.textarea.innerHTML=this.getInitialValue(n,e)||"",this.initialValue=this.textarea.innerHTML,0==this.textarea.innerHTML.length||"<br>"==this.textarea.innerHTML?(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=!0):this.clearOnChange=this.textarea.innerHTML==this.getEmptyLabelText(),this.graph.container.appendChild(this.textarea),this.editingCell=t,this.trigger=e,(this.textNode=null)!=n.text&&this.isHideLabel(n)&&(this.textNode=n.text.node,this.textNode.style.visibility="hidden"),this.autoSize&&(this.graph.model.isEdge(n.cell)||"fill"!=n.style[mxConstants.STYLE_OVERFLOW])&&window.setTimeout(mxUtils.bind(this,function(){this.resize()}),0),this.resize();try{this.textarea.focus(),this.isSelectText()&&0<this.textarea.innerHTML.length&&(this.textarea.innerHTML!=this.getEmptyLabelText()||!this.clearOnChange)&&document.execCommand("selectAll",!1,null)}catch(t){}}},mxCellEditor.prototype.isSelectText=function(){return this.selectText},mxCellEditor.prototype.clearSelection=function(){var t=null;window.getSelection?t=window.getSelection():document.selection&&(t=document.selection),null!=t&&(t.empty?t.empty():t.removeAllRanges&&t.removeAllRanges())},mxCellEditor.prototype.stopEditing=function(t){if(null!=this.editingCell){null!=this.textNode&&(this.textNode.style.visibility="visible",this.textNode=null),t=t?null:this.graph.view.getState(this.editingCell);var e=this.initialValue;if(this.bounds=this.trigger=this.editingCell=this.initialValue=null,this.textarea.blur(),this.clearSelection(),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.textarea.innerHTML="",this.clearOnChange=!1),null!=t&&(this.textarea.innerHTML!=e||null!=this.align)){this.prepareTextarea(),e=this.getCurrentValue(t),this.graph.getModel().beginUpdate();try{null!=e&&this.applyValue(t,e),null!=this.align&&this.graph.setCellStyles(mxConstants.STYLE_ALIGN,this.align,[t.cell])}finally{this.graph.getModel().endUpdate()}}mxEvent.release(this.textarea),this.align=this.textarea=null}},mxCellEditor.prototype.prepareTextarea=function(){null!=this.textarea.lastChild&&"BR"==this.textarea.lastChild.nodeName&&this.textarea.removeChild(this.textarea.lastChild)},mxCellEditor.prototype.isHideLabel=function(t){return!0},mxCellEditor.prototype.getMinimumSize=function(t){var e=this.graph.getView().scale;return new mxRectangle(0,0,null==t.text?30:t.text.size*e+20,"left"==this.textarea.style.textAlign?120:40)},mxCellEditor.prototype.getEditorBounds=function(t){var e,n,i,l,s=this.graph.getModel().isEdge(t.cell),o=this.graph.getView().scale,r=(a=this.getMinimumSize(t)).width,a=a.height;return!s&&t.view.graph.cellRenderer.legacySpacing&&"fill"==t.style[mxConstants.STYLE_OVERFLOW]?o=t.shape.getLabelBounds(mxRectangle.fromRectangle(t)):(n=parseInt(t.style[mxConstants.STYLE_SPACING]||0)*o,e=(parseInt(t.style[mxConstants.STYLE_SPACING_TOP]||0)+mxText.prototype.baseSpacingTop)*o+n,i=(parseInt(t.style[mxConstants.STYLE_SPACING_RIGHT]||0)+mxText.prototype.baseSpacingRight)*o+n,l=(parseInt(t.style[mxConstants.STYLE_SPACING_BOTTOM]||0)+mxText.prototype.baseSpacingBottom)*o+n,n=(parseInt(t.style[mxConstants.STYLE_SPACING_LEFT]||0)+mxText.prototype.baseSpacingLeft)*o+n,o=new mxRectangle(t.x,t.y,Math.max(r,t.width-n-i),Math.max(a,t.height-e-l)),i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),l=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),o=null!=t.shape&&i==mxConstants.ALIGN_CENTER&&l==mxConstants.ALIGN_MIDDLE?t.shape.getLabelBounds(o):o,s?(o.x=t.absoluteOffset.x,o.y=t.absoluteOffset.y,null!=t.text&&null!=t.text.boundingBox&&(0<t.text.boundingBox.x&&(o.x=t.text.boundingBox.x),0<t.text.boundingBox.y)&&(o.y=t.text.boundingBox.y)):null!=t.text&&null!=t.text.boundingBox&&(o.x=Math.min(o.x,t.text.boundingBox.x),o.y=Math.min(o.y,t.text.boundingBox.y)),o.x+=n,o.y+=e,null!=t.text&&null!=t.text.boundingBox&&(s?(o.width=Math.max(r,t.text.boundingBox.width),o.height=Math.max(a,t.text.boundingBox.height)):(o.width=Math.max(o.width,t.text.boundingBox.width),o.height=Math.max(o.height,t.text.boundingBox.height))),this.graph.getModel().isVertex(t.cell)&&((s=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER))==mxConstants.ALIGN_LEFT?o.x-=t.width:s==mxConstants.ALIGN_RIGHT&&(o.x+=t.width),(s=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE))==mxConstants.ALIGN_TOP?o.y-=t.height:s==mxConstants.ALIGN_BOTTOM&&(o.y+=t.height))),new mxRectangle(Math.round(o.x),Math.round(o.y),Math.round(o.width),Math.round(o.height))},mxCellEditor.prototype.getEmptyLabelText=function(t){return this.emptyLabelText},mxCellEditor.prototype.getEditingCell=function(){return this.editingCell},mxCellEditor.prototype.destroy=function(){null!=this.textarea&&(mxEvent.release(this.textarea),null!=this.textarea.parentNode&&this.textarea.parentNode.removeChild(this.textarea),this.textarea=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),this.zoomHandler&&(this.graph.view.removeListener(this.zoomHandler),this.zoomHandler=null)},mxCellRenderer.defaultShapes={},mxCellRenderer.prototype.defaultEdgeShape=mxConnector,mxCellRenderer.prototype.defaultVertexShape=mxRectangleShape,mxCellRenderer.prototype.defaultTextShape=mxText,mxCellRenderer.prototype.legacyControlPosition=!0,mxCellRenderer.prototype.legacySpacing=!0,mxCellRenderer.prototype.antiAlias=!0,mxCellRenderer.prototype.minSvgStrokeWidth=1,mxCellRenderer.prototype.forceControlClickHandler=!1,mxCellRenderer.registerShape=function(t,e){mxCellRenderer.defaultShapes[t]=e},mxCellRenderer.registerShape(mxConstants.SHAPE_RECTANGLE,mxRectangleShape),mxCellRenderer.registerShape(mxConstants.SHAPE_ELLIPSE,mxEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_RHOMBUS,mxRhombus),mxCellRenderer.registerShape(mxConstants.SHAPE_CYLINDER,mxCylinder),mxCellRenderer.registerShape(mxConstants.SHAPE_CONNECTOR,mxConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_ACTOR,mxActor),mxCellRenderer.registerShape(mxConstants.SHAPE_TRIANGLE,mxTriangle),mxCellRenderer.registerShape(mxConstants.SHAPE_HEXAGON,mxHexagon),mxCellRenderer.registerShape(mxConstants.SHAPE_CLOUD,mxCloud),mxCellRenderer.registerShape(mxConstants.SHAPE_LINE,mxLine),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW,mxArrow),mxCellRenderer.registerShape(mxConstants.SHAPE_ARROW_CONNECTOR,mxArrowConnector),mxCellRenderer.registerShape(mxConstants.SHAPE_DOUBLE_ELLIPSE,mxDoubleEllipse),mxCellRenderer.registerShape(mxConstants.SHAPE_SWIMLANE,mxSwimlane),mxCellRenderer.registerShape(mxConstants.SHAPE_IMAGE,mxImageShape),mxCellRenderer.registerShape(mxConstants.SHAPE_LABEL,mxLabel),mxCellRenderer.prototype.initializeShape=function(t){t.shape.dialect=t.view.graph.dialect,this.configureShape(t),t.shape.init(t.view.getDrawPane())},mxCellRenderer.prototype.createShape=function(t){var e=null;return null!=t.style&&(e=t.style[mxConstants.STYLE_SHAPE],e=null!=(e=null==mxCellRenderer.defaultShapes[e]?mxStencilRegistry.getStencil(e):null)?new mxShape(e):new(this.getShapeConstructor(t))),e},mxCellRenderer.prototype.createIndicatorShape=function(t){t.shape.indicatorShape=this.getShape(t.view.graph.getIndicatorShape(t))},mxCellRenderer.prototype.getShape=function(t){return null!=t?mxCellRenderer.defaultShapes[t]:null},mxCellRenderer.prototype.getShapeConstructor=function(t){var e=this.getShape(t.style[mxConstants.STYLE_SHAPE]);return e=null==e?t.view.graph.getModel().isEdge(t.cell)?this.defaultEdgeShape:this.defaultVertexShape:e},mxCellRenderer.prototype.configureShape=function(t){t.shape.apply(t),t.shape.image=t.view.graph.getImage(t),t.shape.indicatorColor=t.view.graph.getIndicatorColor(t),t.shape.indicatorStrokeColor=t.style[mxConstants.STYLE_INDICATOR_STROKECOLOR],t.shape.indicatorGradientColor=t.view.graph.getIndicatorGradientColor(t),t.shape.indicatorDirection=t.style[mxConstants.STYLE_INDICATOR_DIRECTION],t.shape.indicatorImage=t.view.graph.getIndicatorImage(t),this.postConfigureShape(t)},mxCellRenderer.prototype.postConfigureShape=function(t){null!=t.shape&&(this.resolveColor(t,"indicatorGradientColor",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(t,"indicatorColor",mxConstants.STYLE_FILLCOLOR),this.resolveColor(t,"gradient",mxConstants.STYLE_GRADIENTCOLOR),this.resolveColor(t,"stroke",mxConstants.STYLE_STROKECOLOR),this.resolveColor(t,"fill",mxConstants.STYLE_FILLCOLOR))},mxCellRenderer.prototype.checkPlaceholderStyles=function(t){if(null!=t.style)for(var e=["inherit","swimlane","indicated"],n=[mxConstants.STYLE_FILLCOLOR,mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.STYLE_FONTCOLOR],i=0;i<n.length;i++)if(0<=mxUtils.indexOf(e,t.style[n[i]]))return!0;return!1},mxCellRenderer.prototype.resolveColor=function(t,e,n){var i,l,s,o=n==mxConstants.STYLE_FONTCOLOR?t.text:t.shape;null!=o&&(i=t.view.graph,s=null,"inherit"==(l=o[e])?s=i.model.getParent(t.cell):"swimlane"==l?(o[e]=n==mxConstants.STYLE_STROKECOLOR||n==mxConstants.STYLE_FONTCOLOR?"#000000":"#ffffff",s=null!=i.model.getTerminal(t.cell,!1)?i.model.getTerminal(t.cell,!1):t.cell,s=i.getSwimlane(s),n=i.swimlaneIndicatorColorAttribute):"indicated"==l&&null!=t.shape?o[e]=t.shape.indicatorColor:n!=mxConstants.STYLE_FILLCOLOR&&l==mxConstants.STYLE_FILLCOLOR&&null!=t.shape?o[e]=t.style[mxConstants.STYLE_FILLCOLOR]:n!=mxConstants.STYLE_STROKECOLOR&&l==mxConstants.STYLE_STROKECOLOR&&null!=t.shape&&(o[e]=t.style[mxConstants.STYLE_STROKECOLOR]),null!=s)&&(t=i.getView().getState(s),(o[e]=null)!=t)&&(i=n==mxConstants.STYLE_FONTCOLOR?t.text:t.shape,o[e]=null!=i&&"indicatorColor"!=e?i[e]:t.style[n])},mxCellRenderer.prototype.getLabelValue=function(t){return t.view.graph.getLabel(t.cell)},mxCellRenderer.prototype.createLabel=function(n,t){var e,i,l,s=n.view.graph;s.getModel().isEdge(n.cell),(0<n.style[mxConstants.STYLE_FONTSIZE]||null==n.style[mxConstants.STYLE_FONTSIZE])&&(e=s.isHtmlLabel(n.cell)||null!=t&&mxUtils.isNode(t),n.text=new this.defaultTextShape(t,new mxRectangle,n.style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER,s.getVerticalAlign(n),n.style[mxConstants.STYLE_FONTCOLOR],n.style[mxConstants.STYLE_FONTFAMILY],n.style[mxConstants.STYLE_FONTSIZE],n.style[mxConstants.STYLE_FONTSTYLE],n.style[mxConstants.STYLE_SPACING],n.style[mxConstants.STYLE_SPACING_TOP],n.style[mxConstants.STYLE_SPACING_RIGHT],n.style[mxConstants.STYLE_SPACING_BOTTOM],n.style[mxConstants.STYLE_SPACING_LEFT],n.style[mxConstants.STYLE_HORIZONTAL],n.style[mxConstants.STYLE_LABEL_BACKGROUNDCOLOR],n.style[mxConstants.STYLE_LABEL_BORDERCOLOR],s.isWrapping(n.cell)&&s.isHtmlLabel(n.cell),s.isLabelClipped(n.cell),n.style[mxConstants.STYLE_OVERFLOW],n.style[mxConstants.STYLE_LABEL_PADDING],mxUtils.getValue(n.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)),n.text.opacity=mxUtils.getValue(n.style,mxConstants.STYLE_TEXT_OPACITY,100),n.text.dialect=e?mxConstants.DIALECT_STRICTHTML:n.view.graph.dialect,n.text.style=n.style,n.text.state=n,this.initializeLabel(n,n.text),i=!1,l=function(t){var e=n;return(mxClient.IS_TOUCH||i)&&(e=mxEvent.getClientX(t),t=mxEvent.getClientY(t),t=mxUtils.convertPoint(s.container,e,t),e=s.view.getState(s.getCellAt(t.x,t.y))),e},mxEvent.addGestureListeners(n.text.node,mxUtils.bind(this,function(t){this.isLabelEvent(n,t)&&(s.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,n)),i=s.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(t).nodeName)}),mxUtils.bind(this,function(t){this.isLabelEvent(n,t)&&s.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,l(t)))}),mxUtils.bind(this,function(t){this.isLabelEvent(n,t)&&(s.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,l(t))),i=!1)})),s.nativeDblClickEnabled)&&mxEvent.addListener(n.text.node,"dblclick",mxUtils.bind(this,function(t){this.isLabelEvent(n,t)&&(s.dblClick(t,n.cell),mxEvent.consume(t))}))},mxCellRenderer.prototype.initializeLabel=function(t,e){mxClient.IS_SVG&&mxClient.NO_FO&&e.dialect!=mxConstants.DIALECT_SVG?e.init(t.view.graph.container):e.init(t.view.getDrawPane())},mxCellRenderer.prototype.createCellOverlays=function(t){var e=t.view.graph.getCellOverlays(t.cell),n=null;if(null!=e)for(var n=new mxDictionary,i=0;i<e.length;i++){var l=null!=t.overlays?t.overlays.remove(e[i]):null;null==l&&((l=new mxImageShape(new mxRectangle,e[i].image.src)).dialect=t.view.graph.dialect,l.preserveImageAspect=!1,l.overlay=e[i],this.initializeOverlay(t,l),this.installCellOverlayListeners(t,e[i],l),null!=e[i].cursor)&&(l.node.style.cursor=e[i].cursor),n.put(e[i],l)}null!=t.overlays&&t.overlays.visit(function(t,e){e.destroy()}),t.overlays=n},mxCellRenderer.prototype.initializeOverlay=function(t,e){e.init(t.view.getOverlayPane())},mxCellRenderer.prototype.installCellOverlayListeners=function(e,n,t){var i=e.view.graph;mxEvent.addListener(t.node,"click",function(t){i.isEditing()&&i.stopEditing(!i.isInvokesStopCellEditing()),n.fireEvent(new mxEventObject(mxEvent.CLICK,"event",t,"cell",e.cell))}),mxEvent.addGestureListeners(t.node,function(t){mxEvent.consume(t)},function(t){i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e))}),mxClient.IS_TOUCH&&mxEvent.addListener(t.node,"touchend",function(t){n.fireEvent(new mxEventObject(mxEvent.CLICK,"event",t,"cell",e.cell))})},mxCellRenderer.prototype.createControl=function(t){var e,n=t.view.graph,i=n.getFoldingImage(t);n.foldingEnabled&&null!=i?null==t.control&&(e=new mxRectangle(0,0,i.width,i.height),t.control=new mxImageShape(e,i.src),t.control.preserveImageAspect=!1,t.control.dialect=n.dialect,this.initControl(t,t.control,!0,this.createControlClickHandler(t))):null!=t.control&&(t.control.destroy(),t.control=null)},mxCellRenderer.prototype.createControlClickHandler=function(n){var i=n.view.graph;return mxUtils.bind(this,function(t){var e;(this.forceControlClickHandler||i.isEnabled())&&(e=!i.isCellCollapsed(n.cell),i.foldCells(e,!1,[n.cell],null,t),mxEvent.consume(t))})},mxCellRenderer.prototype.initControl=function(e,t,n,i){var l,s=e.view.graph;return s.isHtmlLabel(e.cell)&&mxClient.NO_FO&&s.dialect==mxConstants.DIALECT_SVG?(t.dialect=mxConstants.DIALECT_PREFERHTML,t.init(s.container),t.node.style.zIndex=1):t.init(e.view.getOverlayPane()),t=t.innerNode||t.node,null==i||mxClient.IS_IOS||(s.isEnabled()&&(t.style.cursor="pointer"),mxEvent.addListener(t,"click",i)),n&&(l=null,mxEvent.addGestureListeners(t,function(t){l=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),s.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,e)),mxEvent.consume(t)},function(t){s.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e))},function(t){s.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,e)),mxEvent.consume(t)}),null!=i)&&mxClient.IS_IOS&&t.addEventListener("touchend",function(t){var e;null!=l&&(e=s.tolerance,Math.abs(l.x-mxEvent.getClientX(t))<e)&&Math.abs(l.y-mxEvent.getClientY(t))<e&&(i.call(i,t),mxEvent.consume(t))},!0),t},mxCellRenderer.prototype.isShapeEvent=function(t,e){return!0},mxCellRenderer.prototype.isLabelEvent=function(t,e){return!0},mxCellRenderer.prototype.installListeners=function(n){function e(t){var e=n;return(i.dialect!=mxConstants.DIALECT_SVG&&"IMG"==mxEvent.getSource(t).nodeName||mxClient.IS_TOUCH)&&(e=mxEvent.getClientX(t),t=mxEvent.getClientY(t),t=mxUtils.convertPoint(i.container,e,t),e=i.view.getState(i.getCellAt(t.x,t.y))),e}var i=n.view.graph;mxEvent.addGestureListeners(n.shape.node,mxUtils.bind(this,function(t){this.isShapeEvent(n,t)&&i.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,n))}),mxUtils.bind(this,function(t){this.isShapeEvent(n,t)&&i.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,e(t)))}),mxUtils.bind(this,function(t){this.isShapeEvent(n,t)&&i.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,e(t)))})),i.nativeDblClickEnabled&&mxEvent.addListener(n.shape.node,"dblclick",mxUtils.bind(this,function(t){this.isShapeEvent(n,t)&&(i.dblClick(t,n.cell),mxEvent.consume(t))}))},mxCellRenderer.prototype.redrawLabel=function(t,e){var n,i=t.view.graph,l=this.getLabelValue(t),s=i.isWrapping(t.cell),o=i.isLabelClipped(t.cell),r=t.view.graph.isHtmlLabel(t.cell)||null!=l&&mxUtils.isNode(l)?mxConstants.DIALECT_STRICTHTML:t.view.graph.dialect,a=t.style[mxConstants.STYLE_OVERFLOW]||"visible";null==t.text||t.text.wrap==s&&t.text.clipped==o&&t.text.overflow==a&&t.text.dialect==r||(t.text.destroy(),t.text=null),null==t.text&&null!=l&&(mxUtils.isNode(l)||0<l.length)?this.createLabel(t,l):null==t.text||null!=l&&0!=l.length||(t.text.destroy(),t.text=null),null!=t.text&&(e&&(null!=t.text.lastValue&&this.isTextShapeInvalid(t,t.text)&&(t.text.lastValue=null),t.text.resetStyles(),t.text.apply(t),t.text.valign=i.getVerticalAlign(t)),i=this.getLabelBounds(t),n=this.getTextScale(t),this.resolveColor(t,"color",mxConstants.STYLE_FONTCOLOR),!e&&t.text.value==l&&t.text.isWrapping==s&&t.text.overflow==a&&t.text.isClipping==o&&t.text.scale==n&&t.text.dialect==r&&null!=t.text.bounds&&t.text.bounds.equals(i)||(t.text.dialect=r,t.text.value=l,t.text.bounds=i,t.text.scale=n,t.text.wrap=s,t.text.clipped=o,t.text.overflow=a,l=t.text.node.style.visibility,this.redrawLabelShape(t.text),t.text.node.style.visibility=l))},mxCellRenderer.prototype.isTextShapeInvalid=function(i,l){function t(t,e,n){return"spacingTop"==e||"spacingRight"==e||"spacingBottom"==e||"spacingLeft"==e?parseFloat(l[t])-parseFloat(l.spacing)!=(i.style[e]||n):l[t]!=(i.style[e]||n)}return t("fontStyle",mxConstants.STYLE_FONTSTYLE,mxConstants.DEFAULT_FONTSTYLE)||t("family",mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY)||t("size",mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE)||t("color",mxConstants.STYLE_FONTCOLOR,"black")||t("align",mxConstants.STYLE_ALIGN,"")||t("valign",mxConstants.STYLE_VERTICAL_ALIGN,"")||t("spacing",mxConstants.STYLE_SPACING,2)||t("spacingTop",mxConstants.STYLE_SPACING_TOP,0)||t("spacingRight",mxConstants.STYLE_SPACING_RIGHT,0)||t("spacingBottom",mxConstants.STYLE_SPACING_BOTTOM,0)||t("spacingLeft",mxConstants.STYLE_SPACING_LEFT,0)||t("horizontal",mxConstants.STYLE_HORIZONTAL,!0)||t("background",mxConstants.STYLE_LABEL_BACKGROUNDCOLOR)||t("border",mxConstants.STYLE_LABEL_BORDERCOLOR)||t("opacity",mxConstants.STYLE_TEXT_OPACITY,100)||t("textDirection",mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION)},mxCellRenderer.prototype.redrawLabelShape=function(t){t.redraw()},mxCellRenderer.prototype.getTextScale=function(t){return t.view.scale},mxCellRenderer.prototype.getLabelBounds=function(t){var e,n=t.view.graph,i=t.view.scale,l=n.getModel().isEdge(t.cell),s=new mxRectangle(t.absoluteOffset.x,t.absoluteOffset.y);return l?(e=t.text.getSpacing(),s.x+=e.x*i,s.y+=e.y*i,null!=(n=n.getCellGeometry(t.cell))&&(s.width=Math.max(0,n.width*i),s.height=Math.max(0,n.height*i))):(t.text.isPaintBoundsInverted()&&(n=s.x,s.x=s.y,s.y=n),s.x+=t.x,s.y+=t.y,s.width=Math.max(1,t.width),s.height=Math.max(1,t.height)),t.text.isPaintBoundsInverted()&&(n=(t.width-t.height)/2,s.x+=n,s.y-=n,n=s.width,s.width=s.height,s.height=n),null!=t.shape&&(n=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),e=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),n==mxConstants.ALIGN_CENTER)&&e==mxConstants.ALIGN_MIDDLE&&(s=t.shape.getLabelBounds(s)),null!=(n=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))&&(s.width=parseFloat(n)*i),l||this.rotateLabelBounds(t,s),s},mxCellRenderer.prototype.rotateLabelBounds=function(t,e){var n,i,l,s;e.y-=t.text.margin.y*e.height,e.x-=t.text.margin.x*e.width,this.legacySpacing&&("fill"==t.style[mxConstants.STYLE_OVERFLOW]||"width"==t.style[mxConstants.STYLE_OVERFLOW]||"block"==t.style[mxConstants.STYLE_OVERFLOW]&&"1"!=t.style[mxConstants.STYLE_BLOCK_SPACING])||(n=t.view.scale,i=t.text.getSpacing("1"==t.style[mxConstants.STYLE_BLOCK_SPACING]),e.x+=i.x*n,e.y+=i.y*n,i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),l=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),s=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null),e.width=Math.max(0,e.width-(i==mxConstants.ALIGN_CENTER&&null==s?t.text.spacingLeft*n+t.text.spacingRight*n:0)),e.height=Math.max(0,e.height-(l==mxConstants.ALIGN_MIDDLE?t.text.spacingTop*n+t.text.spacingBottom*n:0))),0!=(l=t.text.getTextRotation())&&null!=t&&t.view.graph.model.isVertex(t.cell)&&(n=t.getCenterX(),i=t.getCenterY(),e.x!=n||e.y!=i)&&(l*=Math.PI/180,n=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(l),Math.sin(l),new mxPoint(n,i)),e.x=n.x,e.y=n.y)},mxCellRenderer.prototype.redrawCellOverlays=function(s,o){var r,t,a,h;this.createCellOverlays(s),null!=s.overlays&&(r=mxUtils.mod(mxUtils.getValue(s.style,mxConstants.STYLE_ROTATION,0),90),t=mxUtils.toRadians(r),a=Math.cos(t),h=Math.sin(t),s.overlays.visit(function(t,e){var n,i,l=e.overlay.getBounds(s);s.view.graph.getModel().isEdge(s.cell)||null==s.shape||0==r||(n=l.getCenterX(),i=l.getCenterY(),n=(i=mxUtils.getRotatedPoint(new mxPoint(n,i),a,h,new mxPoint(s.getCenterX(),s.getCenterY()))).x,i=i.y,l.x=Math.round(n-l.width/2),l.y=Math.round(i-l.height/2)),!o&&null!=e.bounds&&e.scale==s.view.scale&&e.bounds.equals(l)||(e.bounds=l,e.scale=s.view.scale,e.redraw())}))},mxCellRenderer.prototype.redrawControl=function(t,e){var n,i,l=t.view.graph.getFoldingImage(t);null!=t.control&&null!=l&&(l=this.getControlBounds(t,l.width,l.height),n=this.legacyControlPosition?mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0):t.shape.getTextRotation(),i=t.view.scale,!e&&t.control.scale==i&&t.control.bounds.equals(l)&&t.control.rotation==n||(t.control.rotation=n,t.control.bounds=l,t.control.scale=i,t.control.redraw()))},mxCellRenderer.prototype.getControlBounds=function(t,e,n){var i,l,s,o,r;return null!=t.control?(i=t.view.scale,o=t.getCenterX(),r=t.getCenterY(),t.view.graph.getModel().isEdge(t.cell)||(o=t.x+e*i,r=t.y+n*i,null==t.shape)||(l=t.shape.getShapeRotation(),this.legacyControlPosition?l=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0):t.shape.isPaintBoundsInverted()&&(o+=s=(t.width-t.height)/2,r-=s),0!=l&&(s=mxUtils.toRadians(l),l=Math.cos(s),s=Math.sin(s),o=(r=mxUtils.getRotatedPoint(new mxPoint(o,r),l,s,new mxPoint(t.getCenterX(),t.getCenterY()))).x,r=r.y)),t.view.graph.getModel().isEdge(t.cell),new mxRectangle(Math.round(o-e/2*i),Math.round(r-n/2*i),Math.round(e*i),Math.round(n*i))):null},mxCellRenderer.prototype.insertStateAfter=function(t,e,n){for(var i=this.getShapesForState(t),l=0;l<i.length;l++)if(null!=i[l]&&null!=i[l].node){var s=i[l].node.parentNode!=t.view.getDrawPane()&&i[l].node.parentNode!=t.view.getOverlayPane(),o=s?n:e;if(null!=o&&o.nextSibling!=i[l].node)null==o.nextSibling?o.parentNode.appendChild(i[l].node):o.parentNode.insertBefore(i[l].node,o.nextSibling);else if(null==o)if(i[l].node.parentNode==t.view.graph.container){for(o=t.view.canvas;null!=o&&o.parentNode!=t.view.graph.container;)o=o.parentNode;null!=o&&null!=o.nextSibling?o.nextSibling!=i[l].node&&i[l].node.parentNode.insertBefore(i[l].node,o.nextSibling):i[l].node.parentNode.appendChild(i[l].node)}else null!=i[l].node.parentNode&&null!=i[l].node.parentNode.firstChild&&i[l].node.parentNode.firstChild!=i[l].node&&i[l].node.parentNode.insertBefore(i[l].node,i[l].node.parentNode.firstChild);s?n=i[l].node:e=i[l].node}return[e,n]},mxCellRenderer.prototype.getShapesForState=function(t){return[t.shape,t.text,t.control]},mxCellRenderer.prototype.redraw=function(t,e,n){e=this.redrawShape(t,e,n),null==t.shape||null!=n&&!n||(this.redrawLabel(t,e),this.redrawCellOverlays(t,e),this.redrawControl(t,e))},mxCellRenderer.prototype.redrawShape=function(t,e,n){var i=t.view.graph.model,l=!1;return null!=t.shape&&null!=t.shape.style&&null!=t.style&&t.shape.style[mxConstants.STYLE_SHAPE]!=t.style[mxConstants.STYLE_SHAPE]&&(t.shape.destroy(),t.shape=null),null==t.shape&&null!=t.view.graph.container&&t.cell!=t.view.currentRoot&&(i.isVertex(t.cell)||i.isEdge(t.cell))?(t.shape=this.createShape(t),null!=t.shape&&(t.shape.minSvgStrokeWidth=this.minSvgStrokeWidth,t.shape.antiAlias=this.antiAlias,this.createIndicatorShape(t),this.initializeShape(t),this.createCellOverlays(t),this.installListeners(t),t.view.graph.selectionCellsHandler.updateHandler(t))):e||null==t.shape||mxUtils.equalEntries(t.shape.style,t.style)&&!this.checkPlaceholderStyles(t)||(t.shape.resetStyles(),this.configureShape(t),t.view.graph.selectionCellsHandler.updateHandler(t),e=!0),null!=t.shape&&t.shape.indicatorShape!=this.getShape(t.view.graph.getIndicatorShape(t))&&(null!=t.shape.indicator&&(t.shape.indicator.destroy(),t.shape.indicator=null),this.createIndicatorShape(t),null!=t.shape.indicatorShape)&&(t.shape.indicator=new t.shape.indicatorShape,t.shape.indicator.dialect=t.shape.dialect,t.shape.indicator.init(t.node),e=!0),null!=t.shape&&(this.createControl(t),e||this.isShapeInvalid(t,t.shape))&&(null!=t.absolutePoints?(t.shape.points=t.absolutePoints.slice(),t.shape.bounds=null):(t.shape.points=null,t.shape.bounds=new mxRectangle(t.x,t.y,t.width,t.height)),t.shape.scale=t.view.scale,null==n||n?this.doRedrawShape(t):t.shape.updateBoundingBox(),l=!0),l},mxCellRenderer.prototype.doRedrawShape=function(t){t.shape.redraw()},mxCellRenderer.prototype.isShapeInvalid=function(t,e){return null==e.bounds||e.scale!=t.view.scale||null==t.absolutePoints&&!e.bounds.equals(t)||null!=t.absolutePoints&&!mxUtils.equalPoints(e.points,t.absolutePoints)},mxCellRenderer.prototype.destroy=function(t){null!=t.shape&&(null!=t.text&&(t.text.destroy(),t.text=null),null!=t.overlays&&(t.overlays.visit(function(t,e){e.destroy()}),t.overlays=null),null!=t.control&&(t.control.destroy(),t.control=null),t.shape.destroy(),t.shape=null)};var mxEdgeStyle={EntityRelation:function(t,e,n,i,l){var s=t.view,o=s.graph;i=mxUtils.getValue(t.style,mxConstants.STYLE_SEGMENT,mxConstants.ENTITY_SEGMENT)*s.scale;var r,a=(d=t.absolutePoints)[0],h=d[d.length-1],d=!1;if(null!=e&&((r=o.getCellGeometry(e.cell)).relative?d=r.x<=.5:null!=n&&(d=(null!=h?h.x:n.x+n.width)<(null!=a?a:e).x)),null!=a)(e=new mxCellState).x=a.x,e.y=a.y;else{if(null==e)return;var u=mxUtils.getPortConstraints(e,t,!0,mxConstants.DIRECTION_MASK_NONE);u!=mxConstants.DIRECTION_MASK_NONE&&u!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(d=u==mxConstants.DIRECTION_MASK_WEST)}r=!0,null!=n&&((o=o.getCellGeometry(n.cell)).relative?r=o.x<=.5:null!=e&&(r=(null!=a?a.x:e.x+e.width)<(null!=h?h:n).x)),null!=h?((n=new mxCellState).x=h.x,n.y=h.y):null!=n&&(u=mxUtils.getPortConstraints(n,t,!1,mxConstants.DIRECTION_MASK_NONE))!=mxConstants.DIRECTION_MASK_NONE&&u!=mxConstants.DIRECTION_MASK_WEST+mxConstants.DIRECTION_MASK_EAST&&(r=u==mxConstants.DIRECTION_MASK_WEST),null!=e&&null!=n&&(t=d?e.x:e.x+e.width,e=s.getRoutingCenterY(e),a=r?n.x:n.x+n.width,n=s.getRoutingCenterY(n),s=new mxPoint(t+(d?-i:i),e),o=new mxPoint(a+(r?-i:i),n),d==r?(i=d?Math.min(t,a)-i:Math.max(t,a)+i,l.push(new mxPoint(i,e)),l.push(new mxPoint(i,n))):(s.x<o.x==d?(i=e+(n-e)/2,l.push(s),l.push(new mxPoint(s.x,i)),l.push(new mxPoint(o.x,i))):l.push(s),l.push(o)))},Loop:function(t,e,n,i,l){var s,o,r,a,h=(n=t.absolutePoints)[n.length-1];if(null!=n[0]&&null!=h){if(null!=i&&0<i.length)for(e=0;e<i.length;e++)n=i[e],n=t.view.transformControlPoint(t,n),l.push(new mxPoint(n.x,n.y))}else null!=e&&(a=(h=t.view).graph,null!=(n=null!=i&&0<i.length?i[0]:null)&&(n=h.transformControlPoint(t,n),mxUtils.contains(e,n.x,n.y))&&(n=null),r=o=s=i=0,a=mxUtils.getValue(t.style,mxConstants.STYLE_SEGMENT,a.gridSize)*h.scale,(t=mxUtils.getValue(t.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_WEST))==mxConstants.DIRECTION_NORTH||t==mxConstants.DIRECTION_SOUTH?(i=h.getRoutingCenterX(e),s=a):(o=h.getRoutingCenterY(e),r=a),null==n||n.x<e.x||n.x>e.x+e.width?null!=n?(i=n.x,r=Math.max(Math.abs(o-n.y),r)):t==mxConstants.DIRECTION_NORTH?o=e.y-2*s:t==mxConstants.DIRECTION_SOUTH?o=e.y+e.height+2*s:i=t==mxConstants.DIRECTION_EAST?e.x-2*r:e.x+e.width+2*r:null!=n&&(i=h.getRoutingCenterX(e),s=Math.max(Math.abs(i-n.x),r),o=n.y,r=0),l.push(new mxPoint(i-s,o-r)),l.push(new mxPoint(i+s,o+r)))},ElbowConnector:function(t,e,n,i,l){var s,o,r,a=null!=i&&0<i.length?i[0]:null,h=!1,d=!1;null!=e&&null!=n&&(null!=a?(s=Math.min(e.x,n.x),o=Math.max(e.x+e.width,n.x+n.width),d=Math.min(e.y,n.y),r=Math.max(e.y+e.height,n.y+n.height),h=(a=t.view.transformControlPoint(t,a)).y<d||a.y>r,d=a.x<s||a.x>o):(h=(s=Math.max(e.x,n.x))==(o=Math.min(e.x+e.width,n.x+n.width)))||(d=(d=Math.max(e.y,n.y))==(r=Math.min(e.y+e.height,n.y+n.height)))),d||!h&&t.style[mxConstants.STYLE_ELBOW]!=mxConstants.ELBOW_VERTICAL?mxEdgeStyle.SideToSide(t,e,n,i,l):mxEdgeStyle.TopToBottom(t,e,n,i,l)},SideToSide:function(t,e,n,i,l){var s=t.view;i=null!=i&&0<i.length?i[0]:null;var o=(r=t.absolutePoints)[0],r=r[r.length-1];null!=i&&(i=s.transformControlPoint(t,i)),null!=o&&((e=new mxCellState).x=o.x,e.y=o.y),null!=r&&((n=new mxCellState).x=r.x,n.y=r.y),null!=e&&null!=n&&(t=Math.max(e.x,n.x),o=Math.min(e.x+e.width,n.x+n.width),t=null!=i?i.x:Math.round(o+(t-o)/2),o=s.getRoutingCenterY(e),s=s.getRoutingCenterY(n),null!=i&&(i.y>=e.y&&i.y<=e.y+e.height&&(o=i.y),i.y>=n.y)&&i.y<=n.y+n.height&&(s=i.y),mxUtils.contains(n,t,o)||mxUtils.contains(e,t,o)||l.push(new mxPoint(t,o)),mxUtils.contains(n,t,s)||mxUtils.contains(e,t,s)||l.push(new mxPoint(t,s)),1==l.length)&&(null!=i?mxUtils.contains(n,t,i.y)||mxUtils.contains(e,t,i.y)||l.push(new mxPoint(t,i.y)):(s=Math.max(e.y,n.y),l.push(new mxPoint(t,s+(Math.min(e.y+e.height,n.y+n.height)-s)/2))))},TopToBottom:function(t,e,n,i,l){var s=t.view;i=null!=i&&0<i.length?i[0]:null;var o=(r=t.absolutePoints)[0],r=r[r.length-1];null!=i&&(i=s.transformControlPoint(t,i)),null!=o&&((e=new mxCellState).x=o.x,e.y=o.y),null!=r&&((n=new mxCellState).x=r.x,n.y=r.y),null!=e&&null!=n&&(o=Math.max(e.y,n.y),r=Math.min(e.y+e.height,n.y+n.height),t=s.getRoutingCenterX(e),null!=i&&i.x>=e.x&&i.x<=e.x+e.width&&(t=i.x),o=null!=i?i.y:Math.round(r+(o-r)/2),mxUtils.contains(n,t,o)||mxUtils.contains(e,t,o)||l.push(new mxPoint(t,o)),t=null!=i&&i.x>=n.x&&i.x<=n.x+n.width?i.x:s.getRoutingCenterX(n),mxUtils.contains(n,t,o)||mxUtils.contains(e,t,o)||l.push(new mxPoint(t,o)),1==l.length)&&(null!=i&&1==l.length?mxUtils.contains(n,i.x,o)||mxUtils.contains(e,i.x,o)||l.push(new mxPoint(i.x,o)):(s=Math.max(e.x,n.x),l.push(new mxPoint(s+(Math.min(e.x+e.width,n.x+n.width)-s)/2,o))))},SegmentConnector:function(e,t,n,i,l){function s(t){t.x=Math.round(t.x*e.view.scale*10)/10,t.y=Math.round(t.y*e.view.scale*10)/10,(null==h||1<=Math.abs(h.x-t.x)||Math.abs(h.y-t.y)>=Math.max(1,e.view.scale))&&(l.push(t),h=t)}var o=mxEdgeStyle.scalePointArray(e.absolutePoints,e.view.scale),r=mxEdgeStyle.scaleCellState(t,e.view.scale),a=mxEdgeStyle.scaleCellState(n,e.view.scale),h=0<l.length?l[0]:null,d=!0,u=null,p=o[0],c=(null==p&&null!=r?p=new mxPoint(e.view.getRoutingCenterX(r),e.view.getRoutingCenterY(r)):null!=p&&(p=p.clone()),o.length-1);if(null!=i&&0<i.length){for(var m=[],g=0;g<i.length;g++)null!=(u=e.view.transformControlPoint(e,i[g],!0))&&m.push(u);if(0==m.length)return;null!=p&&null!=m[0]&&(Math.abs(m[0].x-p.x)<1&&(m[0].x=p.x),Math.abs(m[0].y-p.y)<1)&&(m[0].y=p.y);var x=o[c];null!=x&&null!=m[m.length-1]&&(Math.abs(m[m.length-1].x-x.x)<1&&(m[m.length-1].x=x.x),Math.abs(m[m.length-1].y-x.y)<1)&&(m[m.length-1].y=x.y);var y=r,f=!1,f=u=m[0];for(null!=(i=o[0])&&(y=null),g=0;g<2;g++){var C=null!=i&&i.x==f.x,E=null!=i&&i.y==f.y,v=null!=y&&f.y>=y.y&&f.y<=y.y+y.height,y=null!=y&&f.x>=y.x&&f.x<=y.x+y.width,f=E||null==i&&v,S=C||null==i&&y;if(0!=g||!(f&&S||C&&E)){if(null!=i&&!E&&!C&&(v||y)){d=!v;break}if(S||f){d=f,1==g&&(d=0==m.length%2?f:S);break}}y=a,null!=(i=o[c])&&(y=null),f=m[m.length-1],C&&E&&(m=m.slice(1))}for(d&&(null!=o[0]&&o[0].y!=u.y||null==o[0]&&null!=r&&(u.y<r.y||u.y>r.y+r.height))?s(new mxPoint(p.x,u.y)):!d&&(null!=o[0]&&o[0].x!=u.x||null==o[0]&&null!=r&&(u.x<r.x||u.x>r.x+r.width))&&s(new mxPoint(u.x,p.y)),d?p.y=u.y:p.x=u.x,g=0;g<m.length;g++)u=m[g],(d=!d)?p.y=u.y:p.x=u.x,s(p.clone())}else u=p,d=!0;if(null!=(p=null==(p=o[c])&&null!=a?new mxPoint(e.view.getRoutingCenterX(a),e.view.getRoutingCenterY(a)):p)&&null!=u&&(d&&(null!=o[c]&&o[c].y!=u.y||null==o[c]&&null!=a&&(u.y<a.y||u.y>a.y+a.height))?s(new mxPoint(p.x,u.y)):!d&&(null!=o[c]&&o[c].x!=u.x||null==o[c]&&null!=a&&(u.x<a.x||u.x>a.x+a.width))&&s(new mxPoint(u.x,p.y))),null==o[0]&&null!=t)for(;1<l.length&&null!=l[1]&&mxUtils.contains(t,l[1].x,l[1].y);)l.splice(1,1);if(null==o[c]&&null!=n)for(;1<l.length&&null!=l[l.length-1]&&mxUtils.contains(n,l[l.length-1].x,l[l.length-1].y);)l.splice(l.length-1,1);null!=x&&null!=l[l.length-1]&&Math.abs(x.x-l[l.length-1].x)<=1&&Math.abs(x.y-l[l.length-1].y)<=1&&(l.splice(l.length-1,1),null!=l[l.length-1])&&(Math.abs(l[l.length-1].x-x.x)<1&&(l[l.length-1].x=x.x),Math.abs(l[l.length-1].y-x.y)<1)&&(l[l.length-1].y=x.y)},orthBuffer:10,orthPointsFallback:!0,dirVectors:[[-1,0],[0,-1],[1,0],[0,1],[-1,0],[0,-1],[1,0]],wayPoints1:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],routePatterns:[[[513,2308,2081,2562],[513,1090,514,2184,2114,2561],[513,1090,514,2564,2184,2562],[513,2308,2561,1090,514,2568,2308]],[[514,1057,513,2308,2081,2562],[514,2184,2114,2561],[514,2184,2562,1057,513,2564,2184],[514,1057,513,2568,2308,2561]],[[1090,514,1057,513,2308,2081,2562],[2114,2561],[1090,2562,1057,513,2564,2184],[1090,514,1057,513,2308,2561,2568]],[[2081,2562],[1057,513,1090,514,2184,2114,2561],[1057,513,1090,514,2184,2562,2564],[1057,2561,1090,514,2568,2308]]],inlineRoutePatterns:[[null,[2114,2568],null,null],[null,[514,2081,2114,2568],null,null],[null,[2114,2561],null,null],[[2081,2562],[1057,2114,2568],[2184,2562],null]],vertexSeperations:[],limits:[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]],LEFT_MASK:32,TOP_MASK:64,RIGHT_MASK:128,BOTTOM_MASK:256,LEFT:1,TOP:2,RIGHT:4,BOTTOM:8,SIDE_MASK:480,CENTER_MASK:512,SOURCE_MASK:1024,TARGET_MASK:2048,VERTEX_MASK:3072,getJettySize:function(t,e){var n=mxUtils.getValue(t.style,e?mxConstants.STYLE_SOURCE_JETTY_SIZE:mxConstants.STYLE_TARGET_JETTY_SIZE,mxUtils.getValue(t.style,mxConstants.STYLE_JETTY_SIZE,mxEdgeStyle.orthBuffer));return n="auto"==n?mxUtils.getValue(t.style,e?mxConstants.STYLE_STARTARROW:mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE?(n=mxUtils.getNumber(t.style,e?mxConstants.STYLE_STARTSIZE:mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE),Math.max(2,Math.ceil((n+mxEdgeStyle.orthBuffer)/mxEdgeStyle.orthBuffer))*mxEdgeStyle.orthBuffer):2*mxEdgeStyle.orthBuffer:n},scalePointArray:function(t,e){var n,i=[];if(null!=t)for(var l=0;l<t.length;l++)null!=t[l]?(n=new mxPoint(Math.round(t[l].x/e*10)/10,Math.round(t[l].y/e*10)/10),i[l]=n):i[l]=null;else i=null;return i},scaleCellState:function(t,e){var n;return null!=t?(n=t.clone()).setRect(Math.round(t.x/e*10)/10,Math.round(t.y/e*10)/10,Math.round(t.width/e*10)/10,Math.round(t.height/e*10)/10):n=null,n},OrthConnector:function(t,e,n,i,l){var s,o=t.view.graph,r=null!=h&&o.getModel().isEdge(h.cell),o=mxEdgeStyle.scalePointArray(t.absolutePoints,t.view.scale),a=mxEdgeStyle.scaleCellState(e,t.view.scale),h=mxEdgeStyle.scaleCellState(n,t.view.scale),d=o[0],u=o[o.length-1],p=(null!=a?a:d).x,c=(null!=a?a:d).y,m=null!=a?a.width:0,g=null!=a?a.height:0,x=(null!=h?h:u).x,y=(null!=h?h:u).y,f=null!=h?h.width:0,C=null!=h?h.height:0,o=mxEdgeStyle.getJettySize(t,!0),E=mxEdgeStyle.getJettySize(t,!1),v=(null!=a&&h==a&&(o=E=Math.max(o,E)),E+o),S=!1;if((S=null!=d&&null!=u?(S=u.x-d.x)*S+(s=u.y-d.y)*s<v*v:S)||mxEdgeStyle.orthPointsFallback&&null!=i&&0<i.length||r)mxEdgeStyle.SegmentConnector(t,e,n,i,l);else{for(n=[mxConstants.DIRECTION_MASK_ALL,mxConstants.DIRECTION_MASK_ALL],null!=a&&(n[0]=mxUtils.getPortConstraints(a,t,!0,mxConstants.DIRECTION_MASK_ALL),0!=(e=mxUtils.getValue(a.style,mxConstants.STYLE_ROTATION,0)))&&(p=(e=mxUtils.getBoundingBox(new mxRectangle(p,c,m,g),e)).x,c=e.y,m=e.width,g=e.height),null!=h&&(n[1]=mxUtils.getPortConstraints(h,t,!1,mxConstants.DIRECTION_MASK_ALL),0!=(e=mxUtils.getValue(h.style,mxConstants.STYLE_ROTATION,0)))&&(x=(e=mxUtils.getBoundingBox(new mxRectangle(x,y,f,C),e)).x,y=e.y,f=e.width,C=e.height),e=[0,0],p=[[p,c,m,g],[x,y,f,C]],E=[o,E],S=0;S<2;S++)mxEdgeStyle.limits[S][1]=p[S][0]-E[S],mxEdgeStyle.limits[S][2]=p[S][1]-E[S],mxEdgeStyle.limits[S][4]=p[S][0]+p[S][2]+E[S],mxEdgeStyle.limits[S][8]=p[S][1]+p[S][3]+E[S];for(s=(E=p[0][1]+p[0][3]/2)-(c=p[1][1]+p[1][3]/2),(S=p[0][0]+p[0][2]/2-(p[1][0]+p[1][2]/2))<(E=0)?E=s<0?2:1:s<=0&&(E=3,0==S)&&(E=2),(c=null)!=a&&(c=d),a=[[.5,.5],[.5,.5]],S=0;S<2;S++)null!=c&&(a[S][0]=(c.x-p[S][0])/p[S][2],Math.abs(c.x-p[S][0])<=1?e[S]=mxConstants.DIRECTION_MASK_WEST:Math.abs(c.x-p[S][0]-p[S][2])<=1&&(e[S]=mxConstants.DIRECTION_MASK_EAST),a[S][1]=(c.y-p[S][1])/p[S][3],Math.abs(c.y-p[S][1])<=1?e[S]=mxConstants.DIRECTION_MASK_NORTH:Math.abs(c.y-p[S][1]-p[S][3])<=1&&(e[S]=mxConstants.DIRECTION_MASK_SOUTH)),c=null!=h?u:null;for(S=p[0][1]-(p[1][1]+p[1][3]),u=p[0][0]-(p[1][0]+p[1][2]),c=p[1][1]-(p[0][1]+p[0][3]),m=p[1][0]-(p[0][0]+p[0][2]),mxEdgeStyle.vertexSeperations[1]=Math.max(u-v,0),mxEdgeStyle.vertexSeperations[2]=Math.max(S-v,0),mxEdgeStyle.vertexSeperations[4]=Math.max(c-v,0),mxEdgeStyle.vertexSeperations[3]=Math.max(m-v,0),v=[],d=[],(h=[])[0]=m<=u?mxConstants.DIRECTION_MASK_WEST:mxConstants.DIRECTION_MASK_EAST,d[0]=c<=S?mxConstants.DIRECTION_MASK_NORTH:mxConstants.DIRECTION_MASK_SOUTH,h[1]=mxUtils.reversePortConstraints(h[0]),d[1]=mxUtils.reversePortConstraints(d[0]),u=m<=u?u:m,c=c<=S?S:c,g=!(m=[[0,0],[0,0]]),S=0;S<2;S++)0==e[S]&&(0==(h[S]&n[S])&&(h[S]=mxUtils.reversePortConstraints(h[S])),0==(d[S]&n[S])&&(d[S]=mxUtils.reversePortConstraints(d[S])),m[S][0]=d[S],m[S][1]=h[S]);for(0<c&&0<u&&(0<(h[0]&n[0])&&0<(d[1]&n[1])?(m[0][0]=h[0],m[0][1]=d[0],m[1][0]=d[1],m[1][1]=h[1],g=!0):0<(d[0]&n[0])&&0<(h[1]&n[1])&&(m[0][0]=d[0],m[0][1]=h[0],m[1][0]=h[1],m[1][1]=d[1],g=!0)),0<c&&!g&&(m[0][0]=d[0],m[0][1]=h[0],m[1][0]=d[1],m[1][1]=h[1],g=!0),0<u&&!g&&(m[0][0]=h[0],m[0][1]=d[0],m[1][0]=h[1],m[1][1]=d[1]),S=0;S<2;S++)0==e[S]&&(0==(m[S][0]&n[S])&&(m[S][0]=m[S][1]),v[S]=m[S][0]&n[S],v[S]|=(m[S][1]&n[S])<<8,v[S]|=(m[1-S][S]&n[S])<<16,v[S]|=(m[1-S][1-S]&n[S])<<24,0==(15&v[S])&&(v[S]<<=8),0==(3840&v[S])&&(v[S]=15&v[S]|v[S]>>8),0==(983040&v[S])&&(v[S]=65535&v[S]|(251658240&v[S])>>8),e[S]=15&v[S],n[S]==mxConstants.DIRECTION_MASK_WEST||n[S]==mxConstants.DIRECTION_MASK_NORTH||n[S]==mxConstants.DIRECTION_MASK_EAST||n[S]==mxConstants.DIRECTION_MASK_SOUTH)&&(e[S]=n[S]);switch(n=e[0]==mxConstants.DIRECTION_MASK_EAST?3:e[0],v=e[1]==mxConstants.DIRECTION_MASK_EAST?3:e[1],(n-=E)<1&&(n+=4),(v-=E)<1&&(v+=4),n=mxEdgeStyle.routePatterns[n-1][v-1],mxEdgeStyle.wayPoints1[0][0]=p[0][0],mxEdgeStyle.wayPoints1[0][1]=p[0][1],e[0]){case mxConstants.DIRECTION_MASK_WEST:mxEdgeStyle.wayPoints1[0][0]-=o,mxEdgeStyle.wayPoints1[0][1]+=a[0][1]*p[0][3];break;case mxConstants.DIRECTION_MASK_SOUTH:mxEdgeStyle.wayPoints1[0][0]+=a[0][0]*p[0][2],mxEdgeStyle.wayPoints1[0][1]+=p[0][3]+o;break;case mxConstants.DIRECTION_MASK_EAST:mxEdgeStyle.wayPoints1[0][0]+=p[0][2]+o,mxEdgeStyle.wayPoints1[0][1]+=a[0][1]*p[0][3];break;case mxConstants.DIRECTION_MASK_NORTH:mxEdgeStyle.wayPoints1[0][0]+=a[0][0]*p[0][2],mxEdgeStyle.wayPoints1[0][1]-=o}for(h=v=(o=0)<(e[0]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1,S=0;S<n.length;S++)g=(d=15&n[S])==mxConstants.DIRECTION_MASK_EAST?3:d,4<(g+=E)&&(g-=4),u=mxEdgeStyle.dirVectors[g-1],(d=0<g%2?0:1)!=v&&(mxEdgeStyle.wayPoints1[++o][0]=mxEdgeStyle.wayPoints1[o-1][0],mxEdgeStyle.wayPoints1[o][1]=mxEdgeStyle.wayPoints1[o-1][1]),x=0<(n[S]&mxEdgeStyle.TARGET_MASK),y=0<(n[S]&mxEdgeStyle.SOURCE_MASK),c=(n[S]&mxEdgeStyle.SIDE_MASK)>>5,15<(c<<=E)&&(c>>=4),m=0<(n[S]&mxEdgeStyle.CENTER_MASK),(y||x)&&c<9?(g=y?0:1,c=m&&0==d?p[g][0]+a[g][0]*p[g][2]:m?p[g][1]+a[g][1]*p[g][3]:mxEdgeStyle.limits[g][c],0==d?0<(c=(c-mxEdgeStyle.wayPoints1[o][0])*u[0])&&(mxEdgeStyle.wayPoints1[o][0]+=u[0]*c):0<(c=(c-mxEdgeStyle.wayPoints1[o][1])*u[1])&&(mxEdgeStyle.wayPoints1[o][1]+=u[1]*c)):m&&(mxEdgeStyle.wayPoints1[o][0]+=u[0]*Math.abs(mxEdgeStyle.vertexSeperations[g]/2),mxEdgeStyle.wayPoints1[o][1]+=u[1]*Math.abs(mxEdgeStyle.vertexSeperations[g]/2)),0<o&&mxEdgeStyle.wayPoints1[o][d]==mxEdgeStyle.wayPoints1[o-1][d]?o--:v=d;for(S=0;S<=o&&(S!=o||((0<(e[1]&(mxConstants.DIRECTION_MASK_EAST|mxConstants.DIRECTION_MASK_WEST))?0:1)==h?0:1)==(o+1)%2);S++)l.push(new mxPoint(Math.round(mxEdgeStyle.wayPoints1[S][0]*t.view.scale*10)/10,Math.round(mxEdgeStyle.wayPoints1[S][1]*t.view.scale*10)/10));for(t=1;t<l.length;)null==l[t-1]||null==l[t]||l[t-1].x!=l[t].x||l[t-1].y!=l[t].y?t++:l.splice(t,1)}},getRoutePattern:function(t,e,n,i){var l=t[0]==mxConstants.DIRECTION_MASK_EAST?3:t[0];return t=t[1]==mxConstants.DIRECTION_MASK_EAST?3:t[1],(l-=e)<1&&(l+=4),(t-=e)<1&&(t+=4),e=routePatterns[l-1][t-1],e=0!=n&&0!=i||null==inlineRoutePatterns[l-1][t-1]?e:inlineRoutePatterns[l-1][t-1]}},mxStyleRegistry={values:[],putValue:function(t,e){mxStyleRegistry.values[t]=e},getValue:function(t){return mxStyleRegistry.values[t]},getName:function(t){for(var e in mxStyleRegistry.values)if(mxStyleRegistry.values[e]==t)return e;return null}};function mxGraphView(t){this.graph=t,this.translate=new mxPoint,this.graphBounds=new mxRectangle,this.states=new mxDictionary}function mxCurrentRootChange(t,e){if(this.view=t,this.previous=this.root=e,this.isUp=null==e,!this.isUp)for(var n=this.view.currentRoot,i=this.view.graph.getModel();null!=n;){if(n==e){this.isUp=!0;break}n=i.getParent(n)}}function mxGraph(t,e,n,i){this.mouseListeners=null,this.renderHint=n,this.dialect=mxClient.IS_SVG?mxConstants.DIALECT_SVG:n==mxConstants.RENDERING_HINT_FASTEST?mxConstants.DIALECT_STRICTHTML:n==mxConstants.RENDERING_HINT_FASTER?mxConstants.DIALECT_PREFERHTML:mxConstants.DIALECT_MIXEDHTML,this.model=null!=e?e:new mxGraphModel,this.multiplicities=[],this.imageBundles=[],this.cellRenderer=this.createCellRenderer(),this.setSelectionModel(this.createSelectionModel()),this.setStylesheet(null!=i?i:this.createStylesheet()),this.view=this.createGraphView(),this.graphModelChangeListener=mxUtils.bind(this,function(t,e){this.graphModelChanged(e.getProperty("edit").changes)}),this.model.addListener(mxEvent.CHANGE,this.graphModelChangeListener),this.createHandlers(),null!=t&&this.init(t),this.view.revalidate()}function mxCellOverlay(t,e,n,i,l,s){this.image=t,this.tooltip=e,this.align=null!=n?n:this.align,this.verticalAlign=null!=i?i:this.verticalAlign,this.offset=null!=l?l:new mxPoint,this.cursor=null!=s?s:"help"}function mxOutline(t,e){this.source=t,null!=e&&this.init(e)}function mxMultiplicity(t,e,n,i,l,s,o,r,a,h){this.source=t,this.type=e,this.attr=n,this.value=i,this.min=null!=l?l:0,this.max=null!=s?s:"n",this.validNeighbors=o,this.countError=mxResources.get(r)||r,this.typeError=mxResources.get(a)||a,this.validNeighborsAllowed=null==h||h}function mxLayoutManager(t){this.undoHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.beforeUndo(e.getProperty("edit"))}),this.moveHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.cellsMoved(e.getProperty("cells"),e.getProperty("event"))}),this.resizeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.cellsResized(e.getProperty("cells"),e.getProperty("bounds"),e.getProperty("previous"))}),this.setGraph(t)}function mxSwimlaneManager(t,e,n,i){this.horizontal=null==e||e,this.addEnabled=null==n||n,this.resizeEnabled=null==i||i,this.addHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.isAddEnabled()&&this.cellsAdded(e.getProperty("cells"))}),this.resizeHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.isResizeEnabled()&&this.cellsResized(e.getProperty("cells"))}),this.setGraph(t)}function mxTemporaryCellStates(l,t,e,n,s,o){t=null!=t?t:1,this.view=l,this.oldValidateCellState=l.validateCellState,this.oldBounds=l.getGraphBounds(),this.oldStates=l.getStates(),this.oldScale=l.getScale(),this.oldDoRedrawShape=l.graph.cellRenderer.doRedrawShape;var r=this;if(null!=s&&(l.graph.cellRenderer.doRedrawShape=function(n){var i=n.shape.paint;n.shape.paint=function(t){var e=s(n);null!=e&&t.setLink(e,null!=o?o(n):null),i.apply(this,arguments),null!=e&&t.setLink(null)},r.oldDoRedrawShape.apply(l.graph.cellRenderer,arguments),n.shape.paint=i}),l.validateCellState=function(t,e){return null==t||null==n||n(t)?r.oldValidateCellState.apply(l,arguments):null},l.setStates(new mxDictionary),l.setScale(t),null!=e){l.resetValidationState(),t=null;for(var i=0;i<e.length;i++){var a=l.getBoundingBox(l.validateCellState(l.validateCell(e[i])));null==t?t=a:t.add(a)}l.setGraphBounds(t||new mxRectangle)}}function mxCellStatePreview(t){this.deltas=new mxDictionary,this.graph=t}function mxConnectionConstraint(t,e,n,i,l){this.point=t,this.perimeter=null==e||e,this.name=n,this.dx=i||0,this.dy=l||0}function mxGraphHandler(t){this.graph=t,this.graph.addMouseListener(this),this.panHandler=mxUtils.bind(this,function(){this.suspended||(this.updatePreview(),this.updateHint())}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.escapeHandler=mxUtils.bind(this,function(t,e){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler),this.refreshHandler=mxUtils.bind(this,function(t,e){this.refreshThread&&window.clearTimeout(this.refreshThread),this.refreshThread=window.setTimeout(mxUtils.bind(this,function(){var t,e;(this.refreshThread=null)==this.first||this.suspended||(t=this.currentDx,e=this.currentDy,this.currentDy=this.currentDx=0,this.updatePreview(),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),null!=this.pBounds||this.livePreviewUsed?(this.currentDx=t,this.currentDy=e,this.updatePreview(),this.updateHint(),this.livePreviewUsed&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1,!0),this.updatePreview())):this.reset())}),0)}),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.addListener(mxEvent.REFRESH,this.refreshHandler),this.keyHandler=mxUtils.bind(this,function(t){null==this.graph.container||"hidden"==this.graph.container.style.visibility||null==this.first||this.suspended||(t=this.graph.isCloneEvent(t)&&this.graph.isCellsCloneable()&&this.isCloneEnabled())!=this.cloning&&(this.cloning=t,this.checkPreview(),this.updatePreview())}),mxEvent.addListener(document,"keydown",this.keyHandler),mxEvent.addListener(document,"keyup",this.keyHandler)}function mxPanningHandler(t){null!=t&&(this.graph=t,this.graph.addMouseListener(this),this.forcePanningHandler=mxUtils.bind(this,function(t,e){var n=e.getProperty("eventName"),e=e.getProperty("event");n==mxEvent.MOUSE_DOWN&&this.isForcePanningEvent(e)&&(this.start(e),this.active=!0,this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",e)),e.consume())}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forcePanningHandler),this.gestureHandler=mxUtils.bind(this,function(t,e){this.isPinchEnabled()&&(e=e.getProperty("event"),mxEvent.isConsumed(e)||"gesturestart"!=e.type?"gestureend"==e.type&&null!=this.initialScale&&(this.initialScale=null):(this.initialScale=this.graph.view.scale,this.active||null==this.mouseDownEvent||(this.start(this.mouseDownEvent),this.mouseDownEvent=null)),null!=this.initialScale)&&this.zoomGraph(e)}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.mouseUpListener=mxUtils.bind(this,function(){this.active&&this.reset()}),mxEvent.addListener(document,"mouseup",this.mouseUpListener),mxEvent.addListener(document,"mouseleave",this.mouseUpListener))}function mxPopupMenuHandler(t,e){null!=t&&(this.graph=t,this.factoryMethod=e,this.graph.addMouseListener(this),this.gestureHandler=mxUtils.bind(this,function(t,e){this.inTolerance=!1}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),this.init())}function mxCellMarker(t,e,n,i){mxEventSource.call(this),null!=t&&(this.graph=t,this.validColor=null!=e?e:mxConstants.DEFAULT_VALID_COLOR,this.invalidColor=null!=n?n:mxConstants.DEFAULT_INVALID_COLOR,this.hotspot=null!=i?i:mxConstants.DEFAULT_HOTSPOT,this.highlight=new mxCellHighlight(t))}function mxSelectionCellsHandler(t){mxEventSource.call(this),this.graph=t,this.handlers=new mxDictionary,this.graph.addMouseListener(this),this.refreshHandler=mxUtils.bind(this,function(t,e){this.isEnabled()&&this.refresh()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE,this.refreshHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.refreshHandler),this.graph.getView().addListener(mxEvent.DOWN,this.refreshHandler),this.graph.getView().addListener(mxEvent.UP,this.refreshHandler)}function mxConnectionHandler(t,e){mxEventSource.call(this),null!=t&&(this.graph=t,this.factoryMethod=e,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){this.reset()}),this.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxConstraintHandler(t){this.graph=t,this.resetHandler=mxUtils.bind(this,function(t,e){null!=this.currentFocus&&null==this.graph.view.getState(this.currentFocus.cell)?this.reset():this.redraw()}),this.graph.model.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.resetHandler),this.graph.view.addListener(mxEvent.SCALE,this.resetHandler),this.graph.addListener(mxEvent.ROOT,this.resetHandler)}function mxRubberband(t){null!=t&&(this.graph=t,this.graph.addMouseListener(this),this.forceRubberbandHandler=mxUtils.bind(this,function(t,e){var n,i=e.getProperty("eventName"),e=e.getProperty("event");i==mxEvent.MOUSE_DOWN&&this.isForceRubberbandEvent(e)&&(i=mxUtils.getOffset(this.graph.container),(n=mxUtils.getScrollOrigin(this.graph.container)).x-=i.x,n.y-=i.y,this.start(e.getX()+n.x,e.getY()+n.y),e.consume(!1))}),this.graph.addListener(mxEvent.FIRE_MOUSE_EVENT,this.forceRubberbandHandler),this.panHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.addListener(mxEvent.PAN,this.panHandler),this.gestureHandler=mxUtils.bind(this,function(t,e){null!=this.first&&this.reset()}),this.graph.addListener(mxEvent.GESTURE,this.gestureHandler),mxClient.IS_IE)&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxHandle(t,e,n,i){this.graph=t.view.graph,this.state=t,this.cursor=null!=e?e:this.cursor,this.image=null!=n?n:this.image,this.shape=null!=i?i:null,this.init()}function mxVertexHandler(t){null!=t&&(this.state=t,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){this.livePreview&&null!=this.index&&(this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate()),this.reset()}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxEdgeHandler(i){null!=i&&null!=i.shape&&(this.state=i,this.init(),this.escapeHandler=mxUtils.bind(this,function(t,e){var n=null!=this.index;this.reset(),n&&this.graph.cellRenderer.redraw(this.state,!1,i.view.isRendering())}),this.state.view.graph.addListener(mxEvent.ESCAPE,this.escapeHandler))}function mxElbowEdgeHandler(t){mxEdgeHandler.call(this,t)}function mxEdgeSegmentHandler(t){mxEdgeHandler.call(this,t)}function mxKeyHandler(t,e){null!=t&&(this.graph=t,this.target=e||document.documentElement,this.normalKeys=[],this.shiftKeys=[],this.controlKeys=[],this.controlShiftKeys=[],this.keydownHandler=mxUtils.bind(this,function(t){this.keyDown(t)}),mxEvent.addListener(this.target,"keydown",this.keydownHandler),mxClient.IS_IE)&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxTooltipHandler(t,e){null!=t&&(this.graph=t,this.delay=e||500,this.graph.addMouseListener(this))}function mxCellTracker(t,e,n){mxCellMarker.call(this,t,e),this.graph.addMouseListener(this),null!=n&&(this.getCell=n),mxClient.IS_IE&&mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()}))}function mxCellHighlight(t,e,n,i){null!=t&&(this.graph=t,this.highlightColor=null!=e?e:mxConstants.DEFAULT_VALID_COLOR,this.strokeWidth=null!=n?n:mxConstants.HIGHLIGHT_STROKEWIDTH,this.dashed=null!=i&&i,this.opacity=mxConstants.HIGHLIGHT_OPACITY,this.repaintHandler=mxUtils.bind(this,function(){var t;null!=this.state&&(null==(t=this.graph.view.getState(this.state.cell))?this.hide():(this.state=t,this.repaint()))}),this.graph.getView().addListener(mxEvent.SCALE,this.repaintHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.repaintHandler),this.resetHandler=mxUtils.bind(this,function(){this.hide()}),this.graph.getView().addListener(mxEvent.DOWN,this.resetHandler),this.graph.getView().addListener(mxEvent.UP,this.resetHandler))}function mxCodec(t){this.document=t||mxUtils.createXmlDocument(),this.objects=[]}function mxObjectCodec(t,e,n,i){for(var l in this.template=t,this.exclude=null!=e?e:[],this.idrefs=null!=n?n:[],this.mapping=null!=i?i:[],this.reverse={},this.mapping)this.reverse[this.mapping[l]]=l}mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ELBOW,mxEdgeStyle.ElbowConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ENTITY_RELATION,mxEdgeStyle.EntityRelation),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_LOOP,mxEdgeStyle.Loop),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SIDETOSIDE,mxEdgeStyle.SideToSide),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_TOPTOBOTTOM,mxEdgeStyle.TopToBottom),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_ORTHOGONAL,mxEdgeStyle.OrthConnector),mxStyleRegistry.putValue(mxConstants.EDGESTYLE_SEGMENT,mxEdgeStyle.SegmentConnector),mxStyleRegistry.putValue(mxConstants.PERIMETER_ELLIPSE,mxPerimeter.EllipsePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RECTANGLE,mxPerimeter.RectanglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_RHOMBUS,mxPerimeter.RhombusPerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_TRIANGLE,mxPerimeter.TrianglePerimeter),mxStyleRegistry.putValue(mxConstants.PERIMETER_HEXAGON,mxPerimeter.HexagonPerimeter),mxGraphView.prototype=new mxEventSource,mxGraphView.prototype.constructor=mxGraphView,mxGraphView.prototype.EMPTY_POINT=new mxPoint,mxGraphView.prototype.doneResource="none"!=mxClient.language?"done":"",mxGraphView.prototype.updatingDocumentResource="none"!=mxClient.language?"updatingDocument":"",mxGraphView.prototype.allowEval=!1,mxGraphView.prototype.captureDocumentGesture=!0,mxGraphView.prototype.rendering=!0,mxGraphView.prototype.graph=null,mxGraphView.prototype.currentRoot=null,mxGraphView.prototype.graphBounds=null,mxGraphView.prototype.scale=1,mxGraphView.prototype.translate=null,mxGraphView.prototype.states=null,mxGraphView.prototype.updateStyle=!1,mxGraphView.prototype.lastNode=null,mxGraphView.prototype.lastHtmlNode=null,mxGraphView.prototype.lastForegroundNode=null,mxGraphView.prototype.lastForegroundHtmlNode=null,mxGraphView.prototype.getGraphBounds=function(){return this.graphBounds},mxGraphView.prototype.setGraphBounds=function(t){this.graphBounds=t},mxGraphView.prototype.getBounds=function(t){var e,n=null;if(null!=t&&0<t.length)for(var i=this.graph.getModel(),l=0;l<t.length;l++)(i.isVertex(t[l])||i.isEdge(t[l]))&&null!=(e=this.getState(t[l]))&&(null==n?n=mxRectangle.fromRectangle(e):n.add(e));return n},mxGraphView.prototype.setCurrentRoot=function(t){var e,n;return this.currentRoot!=t&&((e=new mxCurrentRootChange(this,t)).execute(),(n=new mxUndoableEdit(this,!0)).add(e),this.fireEvent(new mxEventObject(mxEvent.UNDO,"edit",n)),this.graph.sizeDidChange()),t},mxGraphView.prototype.scaleAndTranslate=function(t,e,n){var i=this.scale,l=new mxPoint(this.translate.x,this.translate.y);this.scale==t&&this.translate.x==e&&this.translate.y==n||(this.scale=t,this.translate.x=e,this.translate.y=n,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.SCALE_AND_TRANSLATE,"scale",t,"previousScale",i,"translate",this.translate,"previousTranslate",l))},mxGraphView.prototype.getScale=function(){return this.scale},mxGraphView.prototype.setScale=function(t){var e=this.scale;this.scale!=t&&(this.scale=t,this.isEventsEnabled())&&this.viewStateChanged(),this.fireEvent(new mxEventObject(mxEvent.SCALE,"scale",t,"previousScale",e))},mxGraphView.prototype.getTranslate=function(){return this.translate},mxGraphView.prototype.setTranslate=function(t,e){var n=new mxPoint(this.translate.x,this.translate.y);this.translate.x==t&&this.translate.y==e||(this.translate.x=t,this.translate.y=e,this.isEventsEnabled()&&this.viewStateChanged()),this.fireEvent(new mxEventObject(mxEvent.TRANSLATE,"translate",this.translate,"previousTranslate",n))},mxGraphView.prototype.viewStateChanged=function(){this.revalidate(),this.graph.sizeDidChange()},mxGraphView.prototype.refresh=function(){null!=this.currentRoot&&this.clear(),this.revalidate()},mxGraphView.prototype.revalidate=function(){this.invalidate(),this.validate()},mxGraphView.prototype.clear=function(t,e,n){var i=this.graph.getModel();if(t=t||i.getRoot(),e=null!=e&&e,n=null==n||n,this.removeState(t),n&&(e||t!=this.currentRoot)){n=i.getChildCount(t);for(var l=0;l<n;l++)this.clear(i.getChildAt(t,l),e)}else this.invalidate(t)},mxGraphView.prototype.invalidate=function(t,e,n){var i=this.graph.getModel();if(t=t||i.getRoot(),e=null==e||e,n=null==n||n,null!=(s=this.getState(t))&&(s.invalid=!0),!t.invalidating){if(t.invalidating=!0,e)for(var l=i.getChildCount(t),s=0;s<l;s++){var o=i.getChildAt(t,s);this.invalidate(o,e,n)}if(n)for(l=i.getEdgeCount(t),s=0;s<l;s++)this.invalidate(i.getEdgeAt(t,s),e,n);delete t.invalidating}},mxGraphView.prototype.validate=function(t){var e=mxLog.enter("mxGraphView.validate"),n=(window.status=mxResources.get(this.updatingDocumentResource)||this.updatingDocumentResource,this.resetValidationState(),null);null==this.canvas||null!=this.textDiv||8!=document.documentMode||mxClient.IS_EM||(this.placeholder=document.createElement("div"),this.placeholder.style.position="absolute",this.placeholder.style.width=this.canvas.clientWidth+"px",this.placeholder.style.height=this.canvas.clientHeight+"px",this.canvas.parentNode.appendChild(this.placeholder),n=this.drawPane.style.display,this.canvas.style.display="none",this.textDiv=document.createElement("div"),this.textDiv.style.position="absolute",this.textDiv.style.whiteSpace="nowrap",this.textDiv.style.visibility="hidden",this.textDiv.style.display="inline-block",this.textDiv.style.zoom="1",document.body.appendChild(this.textDiv)),t=this.getBoundingBox(this.validateCellState(this.validateCell(t||(null!=this.currentRoot?this.currentRoot:this.graph.getModel().getRoot())))),this.setGraphBounds(null!=t?t:this.getEmptyBounds()),this.validateBackground(),null!=n&&(this.canvas.style.display=n,this.textDiv.parentNode.removeChild(this.textDiv),null!=this.placeholder&&this.placeholder.parentNode.removeChild(this.placeholder),this.textDiv=null),this.resetValidationState(),window.status=mxResources.get(this.doneResource)||this.doneResource,mxLog.leave("mxGraphView.validate",e)},mxGraphView.prototype.getEmptyBounds=function(){return new mxRectangle(this.translate.x*this.scale,this.translate.y*this.scale)},mxGraphView.prototype.getBoundingBox=function(t,e){e=null==e||e;var n=null;if(null!=t&&(null!=t.shape&&null!=t.shape.boundingBox&&(n=t.shape.boundingBox.clone()),null!=t.text&&null!=t.text.boundingBox&&(null!=n?n.add(t.text.boundingBox):n=t.text.boundingBox.clone()),e))for(var i=this.graph.getModel(),l=i.getChildCount(t.cell),s=0;s<l;s++){var o=this.getBoundingBox(this.getState(i.getChildAt(t.cell,s)));null!=o&&(null==n?n=o:n.add(o))}return n},mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"white","black")},mxGraphView.prototype.validateBackground=function(){this.validateBackgroundImage(),this.validateBackgroundPage()},mxGraphView.prototype.validateBackgroundImage=function(){var t,e=this.graph.getBackgroundImage();null!=e?(null!=this.backgroundImage&&this.backgroundImage.image==e.src||(null!=this.backgroundImage&&this.backgroundImage.destroy(),t=new mxRectangle(0,0,1,1),this.backgroundImage=new mxImageShape(t,e.src),this.backgroundImage.dialect=this.graph.dialect,this.backgroundImage.init(this.backgroundPane),this.backgroundImage.redraw(),8!=document.documentMode)||mxClient.IS_EM||mxEvent.addGestureListeners(this.backgroundImage.node,mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))})),this.redrawBackgroundImage(this.backgroundImage,e)):null!=this.backgroundImage&&(this.backgroundImage.destroy(),this.backgroundImage=null)},mxGraphView.prototype.validateBackgroundPage=function(){var t;this.graph.pageVisible?(t=this.getBackgroundPageBounds(),null==this.backgroundPageShape?(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=this.graph.dialect,this.backgroundPageShape.init(this.backgroundPane),this.backgroundPageShape.redraw(),this.graph.nativeDblClickEnabled&&mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){this.graph.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=this.graph.tooltipHandler&&this.graph.tooltipHandler.isHideOnHover()&&this.graph.tooltipHandler.hide(),this.graph.isMouseDown&&!mxEvent.isConsumed(t)&&this.graph.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.graph.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}))):(this.backgroundPageShape.scale=this.scale,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw())):null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null)},mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.graph.pageFormat,e=this.scale*this.graph.pageScale;return new mxRectangle(this.scale*this.translate.x,this.scale*this.translate.y,t.width*e,t.height*e)},mxGraphView.prototype.redrawBackgroundImage=function(t,e){t.scale=this.scale,t.bounds.x=this.scale*this.translate.x,t.bounds.y=this.scale*this.translate.y,t.bounds.width=this.scale*e.width,t.bounds.height=this.scale*e.height,t.redraw()},mxGraphView.prototype.validateCell=function(t,e){if(null!=t)if(e=(null==e||e)&&this.graph.isCellVisible(t),null==this.getState(t,e)||e)for(var n=this.graph.getModel(),i=n.getChildCount(t),l=0;l<i;l++)this.validateCell(n.getChildAt(t,l),e&&(!this.isCellCollapsed(t)||t==this.currentRoot));else this.removeState(t);return t},mxGraphView.prototype.validateCellState=function(t,e){e=null==e||e;var n=null;if(null!=t&&null!=(n=this.getState(t))){var i=this.graph.getModel();if(n.invalid&&(n.invalid=!1,null!=n.style&&!n.invalidStyle||(n.style=this.graph.getCellStyle(n.cell),n.invalidStyle=!1),t!=this.currentRoot&&this.validateCellState(i.getParent(t),!1),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!0),!1),!0),n.setVisibleTerminalState(this.validateCellState(this.getVisibleTerminal(t,!1),!1),!1),this.updateCellState(n),t==this.currentRoot||n.invalid||(this.graph.cellRenderer.redraw(n,!1,this.isRendering()),n.updateCachedBounds())),e&&!n.invalid){null!=n.shape&&this.stateValidated(n);for(var l=i.getChildCount(t),s=0;s<l;s++)this.validateCellState(i.getChildAt(t,s))}}return n},mxGraphView.prototype.updateCellState=function(t){var e,n,i,l;t.absoluteOffset.x=0,t.absoluteOffset.y=0,t.origin.x=0,t.origin.y=0,t.length=0,t.cell!=this.currentRoot&&(e=this.graph.getModel(),null!=(n=this.getState(e.getParent(t.cell)))&&n.cell!=this.currentRoot&&(t.origin.x+=n.origin.x,t.origin.y+=n.origin.y),null!=(i=this.graph.getChildOffsetForCell(t.cell))&&(t.origin.x+=i.x,t.origin.y+=i.y),null!=(l=this.graph.getCellGeometry(t.cell)))&&(e.isEdge(t.cell)||(i=null!=l.offset?l.offset:this.EMPTY_POINT,l.relative&&null!=n?e.isEdge(n.cell)?null!=(i=this.getPoint(n,l))&&(t.origin.x+=i.x/this.scale-n.origin.x-this.translate.x,t.origin.y+=i.y/this.scale-n.origin.y-this.translate.y):(t.origin.x+=l.x*n.unscaledWidth+i.x,t.origin.y+=l.y*n.unscaledHeight+i.y):(t.absoluteOffset.x=this.scale*i.x,t.absoluteOffset.y=this.scale*i.y,t.origin.x+=l.x,t.origin.y+=l.y)),t.x=this.scale*(this.translate.x+t.origin.x),t.y=this.scale*(this.translate.y+t.origin.y),t.width=this.scale*l.width,t.unscaledWidth=l.width,t.height=this.scale*l.height,t.unscaledHeight=l.height,e.isVertex(t.cell)&&this.updateVertexState(t,l),e.isEdge(t.cell))&&this.updateEdgeState(t,l),t.updateCachedBounds()},mxGraphView.prototype.isCellCollapsed=function(t){return this.graph.isCellCollapsed(t)},mxGraphView.prototype.updateVertexState=function(t,e){var n,i=this.graph.getModel(),l=this.getState(i.getParent(t.cell));e.relative&&null!=l&&!i.isEdge(l.cell)&&0!=(e=mxUtils.toRadians(l.style[mxConstants.STYLE_ROTATION]||"0"))&&(i=Math.cos(e),e=Math.sin(e),n=new mxPoint(t.getCenterX(),t.getCenterY()),l=new mxPoint(l.getCenterX(),l.getCenterY()),l=mxUtils.getRotatedPoint(n,i,e,l),t.x=l.x-t.width/2,t.y=l.y-t.height/2),this.updateVertexLabelOffset(t)},mxGraphView.prototype.updateEdgeState=function(t,e){var n=t.getVisibleTerminalState(!0),i=t.getVisibleTerminalState(!1);null!=this.graph.model.getTerminal(t.cell,!0)&&null==n||null==n&&null==e.getTerminalPoint(!0)||null!=this.graph.model.getTerminal(t.cell,!1)&&null==i||null==i&&null==e.getTerminalPoint(!1)||(this.updateFixedTerminalPoints(t,n,i),this.updatePoints(t,e.points,n,i),this.updateFloatingTerminalPoints(t,n,i),n=t.absolutePoints,t.cell!=this.currentRoot&&(null==n||n.length<2||null==n[0]||null==n[n.length-1]))?this.clear(t.cell,!0):(this.updateEdgeBounds(t),this.updateEdgeLabelOffset(t))},mxGraphView.prototype.updateVertexLabelOffset=function(t){var e,n,i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER);i==mxConstants.ALIGN_LEFT?(i=null!=(i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))?i*this.scale:t.width,t.absoluteOffset.x-=i):i==mxConstants.ALIGN_RIGHT?t.absoluteOffset.x+=t.width:i==mxConstants.ALIGN_CENTER&&null!=(i=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_WIDTH,null))&&(n=0,(e=mxUtils.getValue(t.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER))==mxConstants.ALIGN_CENTER?n=.5:e==mxConstants.ALIGN_RIGHT&&(n=1),0!=n&&(t.absoluteOffset.x-=(i*this.scale-t.width)*n)),(i=mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE))==mxConstants.ALIGN_TOP?t.absoluteOffset.y-=t.height:i==mxConstants.ALIGN_BOTTOM&&(t.absoluteOffset.y+=t.height)},mxGraphView.prototype.resetValidationState=function(){this.lastForegroundHtmlNode=this.lastForegroundNode=this.lastHtmlNode=this.lastNode=null},mxGraphView.prototype.stateValidated=function(t){var e=this.graph.getModel().isEdge(t.cell)&&this.graph.keepEdgesInForeground||this.graph.getModel().isVertex(t.cell)&&this.graph.keepEdgesInBackground;t=this.graph.cellRenderer.insertStateAfter(t,e&&this.lastForegroundNode||this.lastNode,e&&this.lastForegroundHtmlNode||this.lastHtmlNode),e?(this.lastForegroundHtmlNode=t[1],this.lastForegroundNode=t[0]):(this.lastHtmlNode=t[1],this.lastNode=t[0])},mxGraphView.prototype.updateFixedTerminalPoints=function(t,e,n){this.updateFixedTerminalPoint(t,e,!0,this.graph.getConnectionConstraint(t,e,!0)),this.updateFixedTerminalPoint(t,n,!1,this.graph.getConnectionConstraint(t,n,!1))},mxGraphView.prototype.updateFixedTerminalPoint=function(t,e,n,i){t.setAbsoluteTerminalPoint(this.getFixedTerminalPoint(t,e,n,i),n)},mxGraphView.prototype.getFixedTerminalPoint=function(t,e,n,i){var l,s=null;return s=null==(s=null!=i?this.graph.getConnectionPoint(e,i,!1):s)&&null==e&&(e=this.scale,i=this.translate,l=t.origin,null!=(s=this.graph.getCellGeometry(t.cell).getTerminalPoint(n)))?new mxPoint(e*(i.x+s.x+l.x),e*(i.y+s.y+l.y)):s},mxGraphView.prototype.updateBoundsFromStencil=function(t){var e,n=null;return null!=t&&null!=t.shape&&null!=t.shape.stencil&&"fixed"==t.shape.stencil.aspect&&(n=mxRectangle.fromRectangle(t),e=t.shape.stencil.computeAspect(t.style,t.x,t.y,t.width,t.height),t.setRect(e.x,e.y,t.shape.stencil.w0*e.width,t.shape.stencil.h0*e.height)),n},mxGraphView.prototype.updatePoints=function(t,e,n,i){if(null!=t){var l=[],s=(l.push(t.absolutePoints[0]),this.getEdgeStyle(t,e,n,i));if(null!=s){n=this.getTerminalPort(t,n,!0),i=this.getTerminalPort(t,i,!1);var o=this.updateBoundsFromStencil(n),r=this.updateBoundsFromStencil(i);s(t,n,i,e,l),null!=o&&n.setRect(o.x,o.y,o.width,o.height),null!=r&&i.setRect(r.x,r.y,r.width,r.height)}else if(null!=e)for(s=0;s<e.length;s++)null!=e[s]&&(n=mxUtils.clone(e[s]),l.push(this.transformControlPoint(t,n)));e=t.absolutePoints,l.push(e[e.length-1]),t.absolutePoints=l}},mxGraphView.prototype.transformControlPoint=function(t,e,n){return null!=t&&null!=e?(t=t.origin,new mxPoint((n=n?1:this.scale)*(e.x+this.translate.x+t.x),n*(e.y+this.translate.y+t.y))):null},mxGraphView.prototype.isLoopStyleEnabled=function(t,e,n,i){var l=this.graph.getConnectionConstraint(t,n,!0),s=this.graph.getConnectionConstraint(t,i,!1);return!(!(null==e||e.length<2)||mxUtils.getValue(t.style,mxConstants.STYLE_ORTHOGONAL_LOOP,!1)&&(null!=l&&null!=l.point||null!=s&&null!=s.point))&&null!=n&&n==i},mxGraphView.prototype.getEdgeStyle=function(t,e,n,i){return"function"==typeof(t="string"==typeof(t=this.isLoopStyleEnabled(t,e,n,i)?mxUtils.getValue(t.style,mxConstants.STYLE_LOOP,this.graph.defaultLoopStyle):mxUtils.getValue(t.style,mxConstants.STYLE_NOEDGESTYLE,!1)?null:t.style[mxConstants.STYLE_EDGE])?e=null==(e=mxStyleRegistry.getValue(t))&&this.isAllowEval()?mxUtils.eval(t):e:t)?t:null},mxGraphView.prototype.updateFloatingTerminalPoints=function(t,e,n){var i=t.absolutePoints,l=i[0];null==i[i.length-1]&&null!=n&&this.updateFloatingTerminalPoint(t,n,e,!1),null==l&&null!=e&&this.updateFloatingTerminalPoint(t,e,n,!0)},mxGraphView.prototype.updateFloatingTerminalPoint=function(t,e,n,i){t.setAbsoluteTerminalPoint(this.getFloatingTerminalPoint(t,e,n,i),i)},mxGraphView.prototype.getFloatingTerminalPoint=function(t,e,n,i){e=this.getTerminalPort(t,e,i);var l,s,o=this.getNextPoint(t,n,i),r=this.graph.isOrthogonal(t),a=(n=mxUtils.toRadians(Number(e.style[mxConstants.STYLE_ROTATION]||"0")),new mxPoint(e.getCenterX(),e.getCenterY()));return 0!=n&&(l=Math.cos(-n),s=Math.sin(-n),o=mxUtils.getRotatedPoint(o,l,s,a)),l=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0),l+=parseFloat(t.style[i?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),t=this.getPerimeterPoint(e,o,0==n&&r,l),0!=n&&(l=Math.cos(n),s=Math.sin(n),t=mxUtils.getRotatedPoint(t,l,s,a)),t},mxGraphView.prototype.getTerminalPort=function(t,e,n){return e=null!=(t=mxUtils.getValue(t.style,n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT))&&null!=(t=this.getState(this.graph.getModel().getCell(t)))?t:e},mxGraphView.prototype.getPerimeterPoint=function(t,e,n,i){var l,s,o=null;return o=null!=t&&(null!=(l=this.getPerimeterFunction(t))&&null!=e&&(0<(i=this.getPerimeterBounds(t,i)).width||0<i.height)&&(o=new mxPoint(e.x,e.y),s=e=!1,this.graph.model.isVertex(t.cell)&&(e=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPH,0),s=1==mxUtils.getValue(t.style,mxConstants.STYLE_FLIPV,0),null!=t.shape&&null!=t.shape.stencil&&(e=1==mxUtils.getValue(t.style,"stencilFlipH",0)||e,s=1==mxUtils.getValue(t.style,"stencilFlipV",0)||s),e&&(o.x=2*i.getCenterX()-o.x),s)&&(o.y=2*i.getCenterY()-o.y),null!=(o=l(i,t,o,n))&&(e&&(o.x=2*i.getCenterX()-o.x),s)&&(o.y=2*i.getCenterY()-o.y)),null==o)?this.getPoint(t):o},mxGraphView.prototype.getRoutingCenterX=function(t){var e=null!=t.style&&parseFloat(t.style[mxConstants.STYLE_ROUTING_CENTER_X])||0;return t.getCenterX()+e*t.width},mxGraphView.prototype.getRoutingCenterY=function(t){var e=null!=t.style&&parseFloat(t.style[mxConstants.STYLE_ROUTING_CENTER_Y])||0;return t.getCenterY()+e*t.height},mxGraphView.prototype.getPerimeterBounds=function(t,e){return e=null!=e?e:0,null!=t&&(e+=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0)),t.getPerimeterBounds(e*this.scale)},mxGraphView.prototype.getPerimeterFunction=function(t){var e;return"function"==typeof(t="string"==typeof(t=t.style[mxConstants.STYLE_PERIMETER])?e=null==(e=mxStyleRegistry.getValue(t))&&this.isAllowEval()?mxUtils.eval(t):e:t)?t:null},mxGraphView.prototype.getNextPoint=function(t,e,n){var i=null;return null!=(t=t.absolutePoints)&&2<=t.length&&(i=t.length,i=t[n?Math.min(1,i-1):Math.max(0,i-2)]),i=null==i&&null!=e?new mxPoint(e.getCenterX(),e.getCenterY()):i},mxGraphView.prototype.getVisibleTerminal=function(t,e){for(var n=this.graph.getModel(),i=n.getTerminal(t,e),l=i;null!=i&&i!=this.currentRoot;)this.graph.isCellVisible(l)&&!this.isCellCollapsed(i)||(l=i),i=n.getParent(i);return l=null==l||n.contains(l)&&n.getParent(l)!=n.getRoot()&&l!=this.currentRoot?l:null},mxGraphView.prototype.updateEdgeBounds=function(t){var e,n=t.absolutePoints,i=n[0],l=n[n.length-1],l=(i.x!=l.x||i.y!=l.y?(e=l.x-i.x,o=l.y-i.y,t.terminalDistance=Math.sqrt(e*e+o*o)):t.terminalDistance=0,0),s=[],o=i;if(null!=o){for(var i=o.x,r=o.y,a=i,h=r,d=1;d<n.length;d++){var u=n[d];null!=u&&(e=o.x-u.x,o=o.y-u.y,e=Math.sqrt(e*e+o*o),s.push(e),l+=e,o=u,i=Math.min(o.x,i),r=Math.min(o.y,r),a=Math.max(o.x,a),h=Math.max(o.y,h))}t.length=l,t.segments=s,t.x=i,t.y=r,t.width=Math.max(1,a-i),t.height=Math.max(1,h-r)}},mxGraphView.prototype.getPoint=function(t,e){var n=t.getCenterX(),i=t.getCenterY();if(null==t.segments||null!=e&&!e.relative)null!=e&&null!=(l=e.offset)&&(n+=l.x,i+=l.y);else{for(var l,s=t.absolutePoints.length,o=Math.round((.5+(null!=e?e.x/2:0))*t.length),r=t.segments[0],a=0,h=1;o>=Math.round(a+r)&&h<s-1;)a+=r,r=t.segments[h++];s=0==r?0:(o-a)/r,o=t.absolutePoints[h-1],h=t.absolutePoints[h],null!=o&&null!=h&&(a=n=i=0,null!=e&&(i=e.y,null!=(l=e.offset))&&(n=l.x,a=l.y),l=h.x-o.x,h=h.y-o.y,n=o.x+l*s+((0==r?0:h/r)*i+n)*this.scale,i=o.y+h*s-((0==r?0:l/r)*i-a)*this.scale)}return new mxPoint(n,i)},mxGraphView.prototype.getRelativePoint=function(t,e,n){if(null!=(l=this.graph.getModel().getGeometry(t.cell))){var i=t.absolutePoints.length;if(l.relative&&1<i){for(var l=t.length,s=t.segments,o=t.absolutePoints[0],r=t.absolutePoints[1],a=mxUtils.ptSegDistSq(o.x,o.y,r.x,r.y,e,n),h=0,d=0,u=0,p=2;p<i;p++)o=r,r=t.absolutePoints[p],o=mxUtils.ptSegDistSq(o.x,o.y,r.x,r.y,e,n),u+=s[p-2],o<=a&&(a=o,d=p-1,h=u);return i=s[d],o=t.absolutePoints[d],a=(r=t.absolutePoints[d+1]).x,s=r.y,s=(a=(t=o.x-a)-(e-a))*t+(s=(d=o.y-s)-(n-s))*d,i<(t=Math.sqrt(s<=0?0:s*s/(t*t+d*d)))&&(t=i),i=Math.sqrt(mxUtils.ptSegDistSq(o.x,o.y,r.x,r.y,e,n)),new mxPoint((l/2-h-t)/l*-2,(i=-1==mxUtils.relativeCcw(o.x,o.y,r.x,r.y,e,n)?-i:i)/this.scale)}}return new mxPoint},mxGraphView.prototype.updateEdgeLabelOffset=function(t){var e,n,i,l,s,o=t.absolutePoints;t.absoluteOffset.x=t.getCenterX(),t.absoluteOffset.y=t.getCenterY(),null!=o&&0<o.length&&null!=t.segments&&((s=this.graph.getCellGeometry(t.cell)).relative?null!=(e=this.getPoint(t,s))&&(t.absoluteOffset=e):(e=o[0],n=o[o.length-1],null!=e&&null!=n&&(o=n.x-e.x,i=n.y-e.y,l=n=0,null!=(s=s.offset)&&(n=s.x,l=s.y),s=e.y+i/2+l*this.scale,t.absoluteOffset.x=e.x+o/2+n*this.scale,t.absoluteOffset.y=s)))},mxGraphView.prototype.getState=function(t,e){e=e||!1;var n=null;return null!=t&&(n=this.states.get(t),e)&&(null==n||this.updateStyle)&&this.graph.isCellVisible(t)&&(null==n?(n=this.createState(t),this.states.put(t,n)):n.style=this.graph.getCellStyle(t)),n},mxGraphView.prototype.isRendering=function(){return this.rendering},mxGraphView.prototype.setRendering=function(t){this.rendering=t},mxGraphView.prototype.isAllowEval=function(){return this.allowEval},mxGraphView.prototype.setAllowEval=function(t){this.allowEval=t},mxGraphView.prototype.getStates=function(){return this.states},mxGraphView.prototype.setStates=function(t){this.states=t},mxGraphView.prototype.getCellStates=function(t){if(null==t)return this.states;for(var e=[],n=0;n<t.length;n++){var i=this.getState(t[n]);null!=i&&e.push(i)}return e},mxGraphView.prototype.removeState=function(t){var e=null;return null!=t&&null!=(e=this.states.remove(t))&&(this.graph.cellRenderer.destroy(e),e.invalid=!0,e.destroy()),e},mxGraphView.prototype.createState=function(t){return new mxCellState(this,t,this.graph.getCellStyle(t))},mxGraphView.prototype.getCanvas=function(){return this.canvas},mxGraphView.prototype.getBackgroundPane=function(){return this.backgroundPane},mxGraphView.prototype.getDrawPane=function(){return this.drawPane},mxGraphView.prototype.getOverlayPane=function(){return this.overlayPane},mxGraphView.prototype.getDecoratorPane=function(){return this.decoratorPane},mxGraphView.prototype.isContainerEvent=function(t){return(t=mxEvent.getSource(t))==this.graph.container||t.parentNode==this.backgroundPane||null!=t.parentNode&&t.parentNode.parentNode==this.backgroundPane||t==this.canvas.parentNode||t==this.canvas||t==this.backgroundPane||t==this.drawPane||t==this.overlayPane||t==this.decoratorPane},mxGraphView.prototype.isScrollEvent=function(t){var e=mxUtils.getOffset(this.graph.container),e=(t=new mxPoint(t.clientX-e.x,t.clientY-e.y),this.graph.container.offsetWidth),n=this.graph.container.clientWidth;return n<e&&t.x>n+2&&t.x<=e||(e=this.graph.container.offsetHeight,(n=this.graph.container.clientHeight)<e&&t.y>n+2&&t.y<=e)},mxGraphView.prototype.init=function(){this.installListeners(),this.graph.dialect==mxConstants.DIALECT_SVG?this.createSvg():this.createHtml()},mxGraphView.prototype.installListeners=function(){var e,n=this.graph,i=n.container;null!=i&&(mxClient.IS_TOUCH&&(mxEvent.addListener(i,"gesturestart",mxUtils.bind(this,function(t){n.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(i,"gesturechange",mxUtils.bind(this,function(t){n.fireGestureEvent(t),mxEvent.consume(t)})),mxEvent.addListener(i,"gestureend",mxUtils.bind(this,function(t){n.fireGestureEvent(t),mxEvent.consume(t)}))),e=null,mxEvent.addGestureListeners(i,mxUtils.bind(this,function(t){!this.isContainerEvent(t)||(mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_GC||mxClient.IS_OP||mxClient.IS_SF)&&this.isScrollEvent(t)||(n.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t)),e=t.pointerId)}),mxUtils.bind(this,function(t){!this.isContainerEvent(t)||null!=e&&t.pointerId!=e||n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){this.isContainerEvent(t)&&n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t)),e=null})),mxEvent.addListener(i,"dblclick",mxUtils.bind(this,function(t){this.isContainerEvent(t)&&n.dblClick(t)})),n.addMouseListener({mouseDown:function(t,e){n.popupMenuHandler.hideMenu()},mouseMove:function(){},mouseUp:function(){}}),this.moveHandler=mxUtils.bind(this,function(t){var e;null!=n.tooltipHandler&&n.tooltipHandler.isHideOnHover()&&n.tooltipHandler.hide(),this.captureDocumentGesture&&n.isMouseDown&&null!=n.container&&!this.isContainerEvent(t)&&"none"!=n.container.style.display&&"hidden"!=n.container.style.visibility&&!mxEvent.isConsumed(t)&&n.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,(t=t,e=null,mxClient.IS_TOUCH&&(e=mxEvent.getClientX(t),t=mxEvent.getClientY(t),t=mxUtils.convertPoint(i,e,t),e=n.view.getState(n.getCellAt(t.x,t.y))),e)))}),this.endHandler=mxUtils.bind(this,function(t){this.captureDocumentGesture&&n.isMouseDown&&null!=n.container&&!this.isContainerEvent(t)&&"none"!=n.container.style.display&&"hidden"!=n.container.style.visibility&&n.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))}),mxEvent.addGestureListeners(document,null,this.moveHandler,this.endHandler))},mxGraphView.prototype.createHtml=function(){var t=this.graph.container;null!=t&&(this.canvas=this.createHtmlPane("100%","100%"),this.canvas.style.overflow="hidden",this.backgroundPane=this.createHtmlPane("1px","1px"),this.drawPane=this.createHtmlPane("1px","1px"),this.overlayPane=this.createHtmlPane("1px","1px"),this.decoratorPane=this.createHtmlPane("1px","1px"),this.canvas.appendChild(this.backgroundPane),this.canvas.appendChild(this.drawPane),this.canvas.appendChild(this.overlayPane),this.canvas.appendChild(this.decoratorPane),t.appendChild(this.canvas),this.updateContainerStyle(t))},mxGraphView.prototype.updateHtmlCanvasSize=function(t,e){var n;null!=this.graph.container&&(n=this.graph.container.offsetHeight,this.canvas.style.width=this.graph.container.offsetWidth<t?t+"px":"100%",this.canvas.style.height=n<e?e+"px":"100%")},mxGraphView.prototype.createHtmlPane=function(t,e){var n=document.createElement("DIV");return null!=t&&null!=e?(n.style.position="absolute",n.style.left="0px",n.style.top="0px",n.style.width=t,n.style.height=e):n.style.position="relative",n},mxGraphView.prototype.createSvg=function(){var t=this.graph.container,e=(this.canvas=document.createElementNS(mxConstants.NS_SVG,"g"),this.backgroundPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.backgroundPane),this.drawPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.drawPane),this.overlayPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.overlayPane),this.decoratorPane=document.createElementNS(mxConstants.NS_SVG,"g"),this.canvas.appendChild(this.decoratorPane),document.createElementNS(mxConstants.NS_SVG,"svg"));e.style.left="0px",e.style.top="0px",e.style.width="100%",e.style.height="100%",e.style.display="block",e.appendChild(this.canvas),(mxClient.IS_IE||mxClient.IS_IE11)&&(e.style.overflow="hidden"),null!=t&&(t.appendChild(e),this.updateContainerStyle(t))},mxGraphView.prototype.updateContainerStyle=function(t){var e=mxUtils.getCurrentStyle(t);null!=e&&"static"==e.position&&(t.style.position="relative"),mxClient.IS_POINTER&&(t.style.touchAction="none")},mxGraphView.prototype.destroy=function(){var t=null!=this.canvas?this.canvas.ownerSVGElement:null;null!=(t=null==t?this.canvas:t)&&null!=t.parentNode&&(this.clear(this.currentRoot,!0),mxEvent.removeGestureListeners(document,null,this.moveHandler,this.endHandler),mxEvent.release(this.graph.container),t.parentNode.removeChild(t),this.decoratorPane=this.overlayPane=this.drawPane=this.backgroundPane=this.canvas=this.endHandler=this.moveHandler=null)},mxCurrentRootChange.prototype.execute=function(){var t=this.view.currentRoot;this.view.currentRoot=this.previous,this.previous=t,null!=(t=this.view.graph.getTranslateForRoot(this.view.currentRoot))&&(this.view.translate=new mxPoint(-t.x,-t.y)),this.isUp?(this.view.clear(this.view.currentRoot,!0),this.view.validate()):this.view.refresh(),this.view.fireEvent(new mxEventObject(this.isUp?mxEvent.UP:mxEvent.DOWN,"root",this.view.currentRoot,"previous",this.previous)),this.isUp=!this.isUp},mxLoadResources?mxResources.add(mxClient.basePath+"/resources/graph"):mxClient.defaultBundles.push(mxClient.basePath+"/resources/graph"),mxGraph.prototype=new mxEventSource,mxGraph.prototype.constructor=mxGraph,mxGraph.prototype.mouseListeners=null,mxGraph.prototype.isMouseDown=!1,mxGraph.prototype.model=null,mxGraph.prototype.view=null,mxGraph.prototype.stylesheet=null,mxGraph.prototype.selectionModel=null,mxGraph.prototype.cellEditor=null,mxGraph.prototype.cellRenderer=null,mxGraph.prototype.multiplicities=null,mxGraph.prototype.renderHint=null,mxGraph.prototype.dialect=null,mxGraph.prototype.gridSize=10,mxGraph.prototype.gridEnabled=!0,mxGraph.prototype.portsEnabled=!0,mxGraph.prototype.nativeDblClickEnabled=!0,mxGraph.prototype.doubleTapEnabled=!0,mxGraph.prototype.doubleTapTimeout=500,mxGraph.prototype.doubleTapTolerance=25,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchY=0,mxGraph.prototype.lastTouchTime=0,mxGraph.prototype.tapAndHoldEnabled=!0,mxGraph.prototype.tapAndHoldDelay=500,mxGraph.prototype.tapAndHoldInProgress=!1,mxGraph.prototype.tapAndHoldValid=!1,mxGraph.prototype.initialTouchX=0,mxGraph.prototype.initialTouchY=0,mxGraph.prototype.tolerance=4,mxGraph.prototype.defaultOverlap=.5,mxGraph.prototype.defaultParent=null,mxGraph.prototype.alternateEdgeStyle=null,mxGraph.prototype.backgroundImage=null,mxGraph.prototype.pageVisible=!1,mxGraph.prototype.pageBreaksVisible=!1,mxGraph.prototype.pageBreakColor="gray",mxGraph.prototype.pageBreakDashed=!0,mxGraph.prototype.minPageBreakDist=20,mxGraph.prototype.preferPageSize=!1,mxGraph.prototype.pageFormat=mxConstants.PAGE_FORMAT_A4_PORTRAIT,mxGraph.prototype.pageScale=1.5,mxGraph.prototype.enabled=!0,mxGraph.prototype.escapeEnabled=!0,mxGraph.prototype.invokesStopCellEditing=!0,mxGraph.prototype.enterStopsCellEditing=!1,mxGraph.prototype.useScrollbarsForPanning=!0,mxGraph.prototype.exportEnabled=!0,mxGraph.prototype.importEnabled=!0,mxGraph.prototype.cellsLocked=!1,mxGraph.prototype.cellsCloneable=!0,mxGraph.prototype.foldingEnabled=!0,mxGraph.prototype.cellsEditable=!0,mxGraph.prototype.cellsDeletable=!0,mxGraph.prototype.cellsMovable=!0,mxGraph.prototype.edgeLabelsMovable=!0,mxGraph.prototype.vertexLabelsMovable=!1,mxGraph.prototype.dropEnabled=!1,mxGraph.prototype.splitEnabled=!0,mxGraph.prototype.cellsResizable=!0,mxGraph.prototype.cellsBendable=!0,mxGraph.prototype.cellsSelectable=!0,mxGraph.prototype.cellsDisconnectable=!0,mxGraph.prototype.autoSizeCells=!1,mxGraph.prototype.autoSizeCellsOnAdd=!1,mxGraph.prototype.autoScroll=!0,mxGraph.prototype.ignoreScrollbars=!1,mxGraph.prototype.translateToScrollPosition=!1,mxGraph.prototype.timerAutoScroll=!1,mxGraph.prototype.allowAutoPanning=!1,mxGraph.prototype.autoExtend=!0,mxGraph.prototype.maximumGraphBounds=null,mxGraph.prototype.minimumGraphSize=null,mxGraph.prototype.minimumContainerSize=null,mxGraph.prototype.maximumContainerSize=null,mxGraph.prototype.resizeContainer=!1,mxGraph.prototype.border=0,mxGraph.prototype.keepEdgesInForeground=!1,mxGraph.prototype.keepEdgesInBackground=!1,mxGraph.prototype.allowNegativeCoordinates=!0,mxGraph.prototype.constrainChildren=!0,mxGraph.prototype.constrainRelativeChildren=!1,mxGraph.prototype.extendParents=!0,mxGraph.prototype.extendParentsOnAdd=!0,mxGraph.prototype.extendParentsOnMove=!1,mxGraph.prototype.recursiveResize=!1,mxGraph.prototype.collapseToPreferredSize=!0,mxGraph.prototype.zoomFactor=1.2,mxGraph.prototype.keepSelectionVisibleOnZoom=!1,mxGraph.prototype.centerZoom=!0,mxGraph.prototype.resetViewOnRootChange=!0,mxGraph.prototype.resetEdgesOnResize=!1,mxGraph.prototype.resetEdgesOnMove=!1,mxGraph.prototype.resetEdgesOnConnect=!0,mxGraph.prototype.allowLoops=!1,mxGraph.prototype.defaultLoopStyle=mxEdgeStyle.Loop,mxGraph.prototype.multigraph=!0,mxGraph.prototype.connectableEdges=!1,mxGraph.prototype.allowDanglingEdges=!0,mxGraph.prototype.cloneInvalidEdges=!1,mxGraph.prototype.disconnectOnMove=!0,mxGraph.prototype.labelsVisible=!0,mxGraph.prototype.htmlLabels=!1,mxGraph.prototype.swimlaneSelectionEnabled=!0,mxGraph.prototype.swimlaneNesting=!0,mxGraph.prototype.swimlaneIndicatorColorAttribute=mxConstants.STYLE_FILLCOLOR,mxGraph.prototype.imageBundles=null,mxGraph.prototype.minFitScale=.1,mxGraph.prototype.maxFitScale=8,mxGraph.prototype.panDx=0,mxGraph.prototype.panDy=0,mxGraph.prototype.collapsedImage=new mxImage(mxClient.imageBasePath+"/collapsed.gif",9,9),mxGraph.prototype.expandedImage=new mxImage(mxClient.imageBasePath+"/expanded.gif",9,9),mxGraph.prototype.warningImage=new mxImage(mxClient.imageBasePath+"/warning"+(mxClient.IS_MAC?".png":".gif"),16,16),mxGraph.prototype.alreadyConnectedResource="none"!=mxClient.language?"alreadyConnected":"",mxGraph.prototype.containsValidationErrorsResource="none"!=mxClient.language?"containsValidationErrors":"",mxGraph.prototype.collapseExpandResource="none"!=mxClient.language?"collapse-expand":"",mxGraph.prototype.init=function(t){this.container=t,this.cellEditor=this.createCellEditor(),this.view.init(),this.sizeDidChange(),mxEvent.addListener(t,"mouseleave",mxUtils.bind(this,function(t){null!=this.tooltipHandler&&null!=this.tooltipHandler.div&&this.tooltipHandler.div!=t.relatedTarget&&this.tooltipHandler.hide()})),mxClient.IS_IE&&(mxEvent.addListener(window,"unload",mxUtils.bind(this,function(){this.destroy()})),mxEvent.addListener(t,"selectstart",mxUtils.bind(this,function(t){return this.isEditing()||!this.isMouseDown&&!mxEvent.isShiftDown(t)})))},mxGraph.prototype.createHandlers=function(){this.tooltipHandler=this.createTooltipHandler(),this.tooltipHandler.setEnabled(!1),this.selectionCellsHandler=this.createSelectionCellsHandler(),this.connectionHandler=this.createConnectionHandler(),this.connectionHandler.setEnabled(!1),this.graphHandler=this.createGraphHandler(),this.panningHandler=this.createPanningHandler(),this.panningHandler.panningEnabled=!1,this.popupMenuHandler=this.createPopupMenuHandler()},mxGraph.prototype.createTooltipHandler=function(){return new mxTooltipHandler(this)},mxGraph.prototype.createSelectionCellsHandler=function(){return new mxSelectionCellsHandler(this)},mxGraph.prototype.createConnectionHandler=function(){return new mxConnectionHandler(this)},mxGraph.prototype.createGraphHandler=function(){return new mxGraphHandler(this)},mxGraph.prototype.createPanningHandler=function(){return new mxPanningHandler(this)},mxGraph.prototype.createPopupMenuHandler=function(){return new mxPopupMenuHandler(this)},mxGraph.prototype.createSelectionModel=function(){return new mxGraphSelectionModel(this)},mxGraph.prototype.createStylesheet=function(){return new mxStylesheet},mxGraph.prototype.createGraphView=function(){return new mxGraphView(this)},mxGraph.prototype.createCellRenderer=function(){return new mxCellRenderer},mxGraph.prototype.createCellEditor=function(){return new mxCellEditor(this)},mxGraph.prototype.getModel=function(){return this.model},mxGraph.prototype.getView=function(){return this.view},mxGraph.prototype.getStylesheet=function(){return this.stylesheet},mxGraph.prototype.setStylesheet=function(t){this.stylesheet=t},mxGraph.prototype.getSelectionModel=function(){return this.selectionModel},mxGraph.prototype.setSelectionModel=function(t){this.selectionModel=t},mxGraph.prototype.getSelectionCellsForChanges=function(t,e){for(var i=new mxDictionary,l=[],s=mxUtils.bind(this,function(t){if(!i.get(t)&&this.model.contains(t))if(this.model.isEdge(t)||this.model.isVertex(t))i.put(t,!0),l.push(t);else for(var e=this.model.getChildCount(t),n=0;n<e;n++)s(this.model.getChildAt(t,n))}),n=0;n<t.length;n++){var o,r=t[n];r.constructor==mxRootChange||null!=e&&e(r)||(o=null,r instanceof mxChildChange?o=r.child:null!=r.cell&&r.cell instanceof mxCell&&(o=r.cell),null!=o&&s(o))}return l},mxGraph.prototype.graphModelChanged=function(t){for(var e=0;e<t.length;e++)this.processChange(t[e]);this.updateSelection(),this.view.validate(),this.sizeDidChange()},mxGraph.prototype.updateSelection=function(){for(var t=this.getSelectionCells(),e=[],n=0;n<t.length;n++)if(this.model.contains(t[n])&&this.isCellVisible(t[n]))for(var i=this.model.getParent(t[n]);null!=i&&i!=this.view.currentRoot;){if(this.isCellCollapsed(i)||!this.isCellVisible(i)){e.push(t[n]);break}i=this.model.getParent(i)}else e.push(t[n]);this.removeSelectionCells(e)},mxGraph.prototype.processChange=function(t){var e;t instanceof mxRootChange?(this.clearSelection(),this.setDefaultParent(null),this.removeStateForCell(t.previous),this.resetViewOnRootChange&&(this.view.scale=1,this.view.translate.x=0,this.view.translate.y=0),this.fireEvent(new mxEventObject(mxEvent.ROOT))):t instanceof mxChildChange?(e=this.model.getParent(t.child),this.view.invalidate(t.child,!0,!0),this.model.contains(e)&&!this.isCellCollapsed(e)||(this.view.invalidate(t.child,!0,!0),this.removeStateForCell(t.child),this.view.currentRoot==t.child&&this.home()),e!=t.previous&&(null!=e&&this.view.invalidate(e,!1,!1),null!=t.previous)&&this.view.invalidate(t.previous,!1,!1)):t instanceof mxTerminalChange||t instanceof mxGeometryChange?(t instanceof mxTerminalChange||null==t.previous&&null!=t.geometry||null!=t.previous&&!t.previous.equals(t.geometry))&&this.view.invalidate(t.cell):t instanceof mxValueChange?this.view.invalidate(t.cell,!1,!1):t instanceof mxStyleChange?(this.view.invalidate(t.cell,!0,!0),null!=(t=this.view.getState(t.cell))&&(t.invalidStyle=!0)):null!=t.cell&&t.cell instanceof mxCell&&this.removeStateForCell(t.cell)},mxGraph.prototype.removeStateForCell=function(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.removeStateForCell(this.model.getChildAt(t,n));this.view.invalidate(t,!1,!0),this.view.removeState(t)},mxGraph.prototype.addCellOverlay=function(t,e){null==t.overlays&&(t.overlays=[]),t.overlays.push(e);var n=this.view.getState(t);return null!=n&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.ADD_OVERLAY,"cell",t,"overlay",e)),e},mxGraph.prototype.getCellOverlays=function(t){return t.overlays},mxGraph.prototype.removeCellOverlay=function(t,e){var n;return null==e?this.removeCellOverlays(t):0<=(n=mxUtils.indexOf(t.overlays,e))?(t.overlays.splice(n,1),0==t.overlays.length&&(t.overlays=null),null!=(n=this.view.getState(t))&&this.cellRenderer.redraw(n),this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",t,"overlay",e))):e=null,e},mxGraph.prototype.removeCellOverlays=function(t){var e=t.overlays;if(null!=e){t.overlays=null;var n=this.view.getState(t);for(null!=n&&this.cellRenderer.redraw(n),n=0;n<e.length;n++)this.fireEvent(new mxEventObject(mxEvent.REMOVE_OVERLAY,"cell",t,"overlay",e[n]))}return e},mxGraph.prototype.clearCellOverlays=function(t){t=null!=t?t:this.model.getRoot(),this.removeCellOverlays(t);for(var e=this.model.getChildCount(t),n=0;n<e;n++){var i=this.model.getChildAt(t,n);this.clearCellOverlays(i)}},mxGraph.prototype.setCellWarning=function(n,t,e,i){return null!=t&&0<t.length?(t=new mxCellOverlay(e=null!=e?e:this.warningImage,"<font color=red>"+t+"</font>"),i&&t.addListener(mxEvent.CLICK,mxUtils.bind(this,function(t,e){this.isEnabled()&&this.setSelectionCell(n)})),this.addCellOverlay(n,t)):(this.removeCellOverlays(n),null)},mxGraph.prototype.startEditing=function(t){this.startEditingAtCell(null,t)},mxGraph.prototype.startEditingAtCell=function(t,e){null!=e&&mxEvent.isMultiTouchEvent(e)||(null==t&&(null==(t=this.getSelectionCell())||this.isCellEditable(t)||(t=null)),null!=t&&(this.fireEvent(new mxEventObject(mxEvent.START_EDITING,"cell",t,"event",e)),this.cellEditor.startEditing(t,e),this.fireEvent(new mxEventObject(mxEvent.EDITING_STARTED,"cell",t,"event",e))))},mxGraph.prototype.getEditingValue=function(t,e){return this.convertValueToString(t)},mxGraph.prototype.stopEditing=function(t){this.cellEditor.stopEditing(t),this.fireEvent(new mxEventObject(mxEvent.EDITING_STOPPED,"cancel",t))},mxGraph.prototype.labelChanged=function(t,e,n){this.model.beginUpdate();try{var i=t.value;this.cellLabelChanged(t,e,this.isAutoSizeCell(t)),this.fireEvent(new mxEventObject(mxEvent.LABEL_CHANGED,"cell",t,"value",e,"old",i,"event",n))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellLabelChanged=function(t,e,n){this.model.beginUpdate();try{this.model.setValue(t,e),n&&this.cellSizeUpdated(t,!1)}finally{this.model.endUpdate()}},mxGraph.prototype.escape=function(t){this.fireEvent(new mxEventObject(mxEvent.ESCAPE,"event",t))},mxGraph.prototype.click=function(t){var n,e=t.getEvent(),i=t.getCell(),l=new mxEventObject(mxEvent.CLICK,"event",e,"cell",i);if(t.isConsumed()&&l.consume(),this.fireEvent(l),this.isEnabled()&&!mxEvent.isConsumed(e)&&!l.isConsumed()){if(null!=i)this.isTransparentClickEvent(e)&&(n=!1,null!=(t=this.getCellAt(t.graphX,t.graphY,null,null,null,mxUtils.bind(this,function(t){var e=this.isCellSelected(t.cell);return!(n=n||e)||e||t.cell!=i&&this.model.isAncestor(t.cell,i)}))))&&(i=t);else if(this.isSwimlaneSelectionEnabled()&&!(null==(i=this.getSwimlaneAt(t.getGraphX(),t.getGraphY()))||this.isToggleEvent(e)&&mxEvent.isAltDown(e))){for(l=i,t=[];null!=l;){var l=this.model.getParent(l),s=this.view.getState(l);this.isSwimlane(l)&&null!=s&&t.push(l)}if(0<t.length)for((t=t.reverse()).splice(0,0,i),t.push(i),l=0;l<t.length-1;l++)this.isCellSelected(t[l])&&(i=t[this.isToggleEvent(e)?l:l+1])}null!=i?this.selectCellForEvent(i,e):this.isToggleEvent(e)||this.clearSelection()}},mxGraph.prototype.isSiblingSelected=function(t){for(var e=this.model,n=e.getParent(t),i=e.getChildCount(n),l=0;l<i;l++){var s=e.getChildAt(n,l);if(t!=s&&this.isCellSelected(s))return!0}return!1},mxGraph.prototype.dblClick=function(t,e){var n=new mxEventObject(mxEvent.DOUBLE_CLICK,"event",t,"cell",e);this.fireEvent(n),!this.isEnabled()||mxEvent.isConsumed(t)||n.isConsumed()||null==e||!this.isCellEditable(e)||this.isEditing(e)||(this.startEditingAtCell(e,t),mxEvent.consume(t))},mxGraph.prototype.tapAndHold=function(t){var e=t.getEvent(),n=new mxEventObject(mxEvent.TAP_AND_HOLD,"event",e,"cell",t.getCell());this.fireEvent(n),n.isConsumed()&&(this.panningHandler.panningTrigger=!1),this.isEnabled()&&!mxEvent.isConsumed(e)&&!n.isConsumed()&&this.connectionHandler.isEnabled()&&null!=(e=this.view.getState(this.connectionHandler.marker.getCell(t)))&&(this.connectionHandler.marker.currentColor=this.connectionHandler.marker.validColor,this.connectionHandler.marker.markedState=e,this.connectionHandler.marker.mark(),this.connectionHandler.first=new mxPoint(t.getGraphX(),t.getGraphY()),this.connectionHandler.edgeState=this.connectionHandler.createEdgeState(t),this.connectionHandler.previous=e,this.connectionHandler.fireEvent(new mxEventObject(mxEvent.START,"state",this.connectionHandler.previous)))},mxGraph.prototype.scrollPointToVisible=function(t,e,n,i){var l,s,o;this.timerAutoScroll||!this.ignoreScrollbars&&!mxUtils.hasScrollbars(this.container)?this.allowAutoPanning&&!this.panningHandler.isActive()&&(null==this.panningManager&&(this.panningManager=this.createPanningManager()),this.panningManager.panTo(t+this.panDx,e+this.panDy)):(i=null!=i?i:20,t>=(l=this.container).scrollLeft&&e>=l.scrollTop&&t<=l.scrollLeft+l.clientWidth&&e<=l.scrollTop+l.clientHeight&&((s=l.scrollLeft+l.clientWidth-t)<i?(t=l.scrollLeft,l.scrollLeft+=i-s,n&&t==l.scrollLeft&&(this.dialect==mxConstants.DIALECT_SVG?(t=this.view.getDrawPane().ownerSVGElement,o=this.container.scrollWidth+i-s):(o=Math.max(l.clientWidth,l.scrollWidth)+i-s,t=this.view.getCanvas()),t.style.width=o+"px",l.scrollLeft+=i-s)):(s=t-l.scrollLeft)<i&&(l.scrollLeft-=i-s),(s=l.scrollTop+l.clientHeight-e)<i?(t=l.scrollTop,l.scrollTop+=i-s,t==l.scrollTop&&n&&(this.dialect==mxConstants.DIALECT_SVG?(t=this.view.getDrawPane().ownerSVGElement,e=this.container.scrollHeight+i-s):(e=Math.max(l.clientHeight,l.scrollHeight)+i-s,t=this.view.getCanvas()),t.style.height=e+"px",l.scrollTop+=i-s)):(s=e-l.scrollTop)<i&&(l.scrollTop-=i-s)))},mxGraph.prototype.createPanningManager=function(){return new mxPanningManager(this)},mxGraph.prototype.getBorderSizes=function(){var t=mxUtils.getCurrentStyle(this.container);return new mxRectangle(mxUtils.parseCssNumber(t.paddingLeft)+("none"!=t.borderLeftStyle?mxUtils.parseCssNumber(t.borderLeftWidth):0),mxUtils.parseCssNumber(t.paddingTop)+("none"!=t.borderTopStyle?mxUtils.parseCssNumber(t.borderTopWidth):0),mxUtils.parseCssNumber(t.paddingRight)+("none"!=t.borderRightStyle?mxUtils.parseCssNumber(t.borderRightWidth):0),mxUtils.parseCssNumber(t.paddingBottom)+("none"!=t.borderBottomStyle?mxUtils.parseCssNumber(t.borderBottomWidth):0))},mxGraph.prototype.getPreferredPageSize=function(t,e,n){t=this.view.translate;var i=this.pageFormat,l=this.pageScale,i=new mxRectangle(0,0,Math.ceil(i.width*l),Math.ceil(i.height*l));return new mxRectangle(0,0,(this.pageBreaksVisible?Math.ceil(e/i.width):1)*i.width+2+t.x,(this.pageBreaksVisible?Math.ceil(n/i.height):1)*i.height+2+t.y)},mxGraph.prototype.fit=function(t,e,n,i,l,s,o){if(null!=this.container){t=null!=t?t:this.getBorder(),e=null!=e&&e,n=null!=n?n:0,i=null==i||i,l=null!=l&&l,s=null!=s&&s;var r=this.getBorderSizes(),a=this.container.offsetWidth-r.x-r.width-1,h=null!=o?o:this.container.offsetHeight-r.y-r.height-1;if(0<(o=this.view.getGraphBounds()).width&&0<o.height){e&&null!=o.x&&null!=o.y&&((o=o.clone()).width+=o.x,o.height+=o.y,o.x=0,o.y=0);var r=this.view.scale,d=o.width/r,u=o.height/r,p=(null!=this.backgroundImage&&(d=Math.max(d,this.backgroundImage.width-o.x/r),u=Math.max(u,this.backgroundImage.height-o.y/r)),(e?t:2*t)+n+1),a=a-p,h=h-p;if(l=l?h/u:s?a/d:Math.min(a/d,h/u),null!=this.minFitScale&&(l=Math.max(l,this.minFitScale)),null!=this.maxFitScale&&(l=Math.min(l,this.maxFitScale)),!i)return l;e?this.view.scale!=l&&this.view.setScale(l):mxUtils.hasScrollbars(this.container)?(this.view.setScale(l),null!=(t=this.getGraphBounds()).x&&(this.container.scrollLeft=t.x),null!=t.y&&(this.container.scrollTop=t.y)):this.view.scaleAndTranslate(l,null!=o.x?Math.floor(this.view.translate.x-o.x/r+t/l+n/2):t,null!=o.y?Math.floor(this.view.translate.y-o.y/r+t/l+n/2):t)}}return this.view.scale},mxGraph.prototype.sizeDidChange=function(){var t,e,n,i=this.getGraphBounds();null!=this.container&&(e=this.getBorder(),t=Math.max(0,i.x)+i.width+2*e,e=Math.max(0,i.y)+i.height+2*e,null!=this.minimumContainerSize&&(t=Math.max(t,this.minimumContainerSize.width),e=Math.max(e,this.minimumContainerSize.height)),this.resizeContainer&&this.doResizeContainer(t,e),(this.preferPageSize||!mxClient.IS_IE&&this.pageVisible)&&null!=(n=this.getPreferredPageSize(i,Math.max(1,t),Math.max(1,e)))&&(t=n.width*this.view.scale,e=n.height*this.view.scale),null!=this.minimumGraphSize&&(t=Math.max(t,this.minimumGraphSize.width*this.view.scale),e=Math.max(e,this.minimumGraphSize.height*this.view.scale)),t=Math.ceil(t),e=Math.ceil(e),this.dialect==mxConstants.DIALECT_SVG?null!=(n=this.view.getDrawPane().ownerSVGElement)&&(n.style.minWidth=Math.max(1,t)+"px",n.style.minHeight=Math.max(1,e)+"px",n.style.width="100%",n.style.height="100%"):(this.view.canvas.style.minWidth=Math.max(1,t)+"px",this.view.canvas.style.minHeight=Math.max(1,e)+"px"),this.updatePageBreaks(this.pageBreaksVisible,t,e)),this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",i))},mxGraph.prototype.doResizeContainer=function(t,e){null!=this.maximumContainerSize&&(t=Math.min(this.maximumContainerSize.width,t),e=Math.min(this.maximumContainerSize.height,e)),this.container.style.width=Math.ceil(t)+"px",this.container.style.height=Math.ceil(e)+"px"},mxGraph.prototype.updatePageBreaks=function(t,e,n){e=this.view.scale,n=this.view.translate;var i=this.pageFormat,l=e*this.pageScale,s=new mxRectangle(0,0,i.width*l,i.height*l),o=((i=mxRectangle.fromRectangle(this.getGraphBounds())).width=Math.max(1,i.width),i.height=Math.max(1,i.height),s.x=Math.floor((i.x-n.x*e)/s.width)*s.width+n.x*e,s.y=Math.floor((i.y-n.y*e)/s.height)*s.height+n.y*e,i.width=Math.ceil((i.width+(i.x-s.x))/s.width)*s.width,i.height=Math.ceil((i.height+(i.y-s.y))/s.height)*s.height,(t=t&&Math.min(s.width,s.height)>this.minPageBreakDist)?Math.ceil(i.height/s.height)+1:0),r=t?Math.ceil(i.width/s.width)+1:0,a=(r-1)*s.width,h=(o-1)*s.height;null==this.horizontalPageBreaks&&0<o&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<r&&(this.verticalPageBreaks=[]),(t=mxUtils.bind(this,function(t){if(null!=t){for(var e=t==this.horizontalPageBreaks?o:r,n=0;n<=e;n++){var i=t==this.horizontalPageBreaks?[new mxPoint(Math.round(s.x),Math.round(s.y+n*s.height)),new mxPoint(Math.round(s.x+a),Math.round(s.y+n*s.height))]:[new mxPoint(Math.round(s.x+n*s.width),Math.round(s.y)),new mxPoint(Math.round(s.x+n*s.width),Math.round(s.y+h))];null!=t[n]?(t[n].points=i,t[n].redraw()):((i=new mxPolyline(i,this.pageBreakColor)).dialect=this.dialect,i.pointerEvents=!1,i.isDashed=this.pageBreakDashed,i.init(this.view.backgroundPane),i.redraw(),t[n]=i)}for(n=e;n<t.length;n++)t[n].destroy();t.splice(e,t.length-e)}}))(this.horizontalPageBreaks),t(this.verticalPageBreaks)},mxGraph.prototype.getCurrentCellStyle=function(t,e){e=e?null:this.view.getState(t);return null!=e?e.style:this.getCellStyle(t)},mxGraph.prototype.getCellStyle=function(t){var e=this.model.getStyle(t);return t=this.model.isEdge(t)?this.stylesheet.getDefaultEdgeStyle():this.stylesheet.getDefaultVertexStyle(),t=null==(t=null!=e?this.postProcessCellStyle(this.stylesheet.getCellStyle(e,t)):t)?{}:t},mxGraph.prototype.postProcessCellStyle=function(t){var e,n;return null!=t&&(e=t[mxConstants.STYLE_IMAGE],null!=(n=this.getImageFromBundles(e))?t[mxConstants.STYLE_IMAGE]=n:n=e,null!=n)&&"data:image/"==n.substring(0,11)&&("data:image/svg+xml,<"==n.substring(0,20)?n=n.substring(0,19)+encodeURIComponent(n.substring(19)):"data:image/svg+xml,%3C"!=n.substring(0,22)&&0<(e=n.indexOf(","))&&";base64,"!=n.substring(e-7,e+1)&&(n=n.substring(0,e)+";base64,"+n.substring(e+1)),t[mxConstants.STYLE_IMAGE]=n),t},mxGraph.prototype.setCellStyle=function(t,e){if(null!=(e=e||this.getSelectionCells())){this.model.beginUpdate();try{for(var n=0;n<e.length;n++)this.model.setStyle(e[n],t)}finally{this.model.endUpdate()}}},mxGraph.prototype.toggleCellStyle=function(t,e,n){return n=n||this.getSelectionCell(),this.toggleCellStyles(t,e,[n])},mxGraph.prototype.toggleCellStyles=function(t,e,n){e=null!=e&&e;var i=null;return null!=(n=n||this.getSelectionCells())&&0<n.length&&(i=this.getCurrentCellStyle(n[0]),i=mxUtils.getValue(i,t,e)?0:1,this.setCellStyles(t,i,n)),i},mxGraph.prototype.setCellStyles=function(t,e,n){n=n||this.getSelectionCells(),mxUtils.setCellStyles(this.model,n,t,e)},mxGraph.prototype.toggleCellStyleFlags=function(t,e,n){this.setCellStyleFlags(t,e,null,n)},mxGraph.prototype.setCellStyleFlags=function(t,e,n,i){null!=(i=i||this.getSelectionCells())&&0<i.length&&(null==n&&(n=this.getCurrentCellStyle(i[0]),n=(parseInt(n[t]||0)&e)!=e),mxUtils.setCellStyleFlags(this.model,i,t,e,n))},mxGraph.prototype.getOriginForCell=function(t){t=this.model.getParent(t);for(var e=new mxPoint;null!=t;){var n=this.getCellGeometry(t);null==n||n.relative||(e.x+=n.x,e.y+=n.y),t=this.model.getParent(t)}return e},mxGraph.prototype.alignCells=function(t,e,n){if(null!=(e=null==e?this.getSelectionCells():e)&&1<e.length){if(null==n)for(var i=0;i<e.length;i++){var l=this.getOriginForCell(e[i]),s=this.getCellGeometry(e[i]);if(!this.model.isEdge(e[i])&&null!=s&&!s.relative)if(null==n){if(t==mxConstants.ALIGN_CENTER){n=l.x+s.x+s.width/2;break}if(t==mxConstants.ALIGN_RIGHT)n=l.x+s.x+s.width;else if(t==mxConstants.ALIGN_TOP)n=l.y+s.y;else{if(t==mxConstants.ALIGN_MIDDLE){n=l.y+s.y+s.height/2;break}n=t==mxConstants.ALIGN_BOTTOM?l.y+s.y+s.height:l.x+s.x}}else n=t==mxConstants.ALIGN_RIGHT?Math.max(n,l.x+s.x+s.width):t==mxConstants.ALIGN_TOP?Math.min(n,l.y+s.y):t==mxConstants.ALIGN_BOTTOM?Math.max(n,l.y+s.y+s.height):Math.min(n,l.x+s.x)}if(null!=n){e=mxUtils.sortCells(e),this.model.beginUpdate();try{for(i=0;i<e.length;i++)l=this.getOriginForCell(e[i]),s=this.getCellGeometry(e[i]),this.model.isEdge(e[i])||null==s||s.relative||(s=s.clone(),t==mxConstants.ALIGN_CENTER?s.x=n-l.x-s.width/2:t==mxConstants.ALIGN_RIGHT?s.x=n-l.x-s.width:t==mxConstants.ALIGN_TOP?s.y=n-l.y:t==mxConstants.ALIGN_MIDDLE?s.y=n-l.y-s.height/2:t==mxConstants.ALIGN_BOTTOM?s.y=n-l.y-s.height:s.x=n-l.x,this.resizeCell(e[i],s));this.fireEvent(new mxEventObject(mxEvent.ALIGN_CELLS,"align",t,"cells",e))}finally{this.model.endUpdate()}}}return e},mxGraph.prototype.flipEdge=function(t){if(null!=t&&null!=this.alternateEdgeStyle){this.model.beginUpdate();try{var e=this.model.getStyle(t);null==e||0==e.length?this.model.setStyle(t,this.alternateEdgeStyle):this.model.setStyle(t,null),this.resetEdge(t),this.fireEvent(new mxEventObject(mxEvent.FLIP_EDGE,"edge",t))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.addImageBundle=function(t){this.imageBundles.push(t)},mxGraph.prototype.removeImageBundle=function(t){for(var e=[],n=0;n<this.imageBundles.length;n++)this.imageBundles[n]!=t&&e.push(this.imageBundles[n]);this.imageBundles=e},mxGraph.prototype.getImageFromBundles=function(t){if(null!=t)for(var e=0;e<this.imageBundles.length;e++){var n=this.imageBundles[e].getImage(t);if(null!=n)return n}return null},mxGraph.prototype.orderCells=function(t,e){null==e&&(e=mxUtils.sortCells(this.getSelectionCells(),!0)),this.model.beginUpdate();try{this.cellsOrdered(e,t),this.fireEvent(new mxEventObject(mxEvent.ORDER_CELLS,"back",t,"cells",e))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsOrdered=function(t,e){if(null!=t){this.model.beginUpdate();try{for(var n=0;n<t.length;n++){var i=this.model.getParent(t[n]);e?this.model.add(i,t[n],n):this.model.add(i,t[n],this.model.getChildCount(i)-1)}this.fireEvent(new mxEventObject(mxEvent.CELLS_ORDERED,"back",e,"cells",t))}finally{this.model.endUpdate()}}},mxGraph.prototype.groupCells=function(t,e,n){null==n&&(n=mxUtils.sortCells(this.getSelectionCells(),!0)),n=this.getCellsForGroup(n),null==t&&(t=this.createGroupCell(n));var i=this.getBoundsForGroup(t,n,e);if(1<n.length&&null!=i){var l=this.model.getParent(t);null==l&&(l=this.model.getParent(n[0])),this.model.beginUpdate();try{null==this.getCellGeometry(t)&&this.model.setGeometry(t,new mxGeometry);var s=this.model.getChildCount(l);this.cellsAdded([t],l,s,null,null,!1,!1,!1),s=this.model.getChildCount(t),this.cellsAdded(n,t,s,null,null,!1,!1,!1),this.cellsMoved(n,-i.x,-i.y,!1,!1,!1),this.cellsResized([t],[i],!1),this.fireEvent(new mxEventObject(mxEvent.GROUP_CELLS,"group",t,"border",e,"cells",n))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.getCellsForGroup=function(t){var e=[];if(null!=t&&0<t.length){var n=this.model.getParent(t[0]);e.push(t[0]);for(var i=1;i<t.length;i++)this.model.getParent(t[i])==n&&e.push(t[i])}return e},mxGraph.prototype.getBoundsForGroup=function(t,e,n){return null!=(e=this.getBoundingBoxFromGeometry(e,!0))&&(this.isSwimlane(t)&&(t=this.getStartSize(t),e.x-=t.width,e.y-=t.height,e.width+=t.width,e.height+=t.height),null!=n)&&(e.x-=n,e.y-=n,e.width+=2*n,e.height+=2*n),e},mxGraph.prototype.createGroupCell=function(t){return(t=new mxCell("")).setVertex(!0),t.setConnectable(!1),t},mxGraph.prototype.ungroupCells=function(t){var e=[];if(null!=(t=null==t?this.getCellsForUngroup():t)&&0<t.length){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)if(null!=(i=this.model.getChildren(t[n]))&&0<i.length){var i=i.slice(),l=this.model.getParent(t[n]),s=this.model.getChildCount(l);this.cellsAdded(i,l,s,null,null,!0);for(var e=e.concat(i),o=0;o<i.length;o++){var r=this.view.getState(i[o]),a=this.getCellGeometry(i[o]);null!=r&&null!=a&&a.relative&&((a=a.clone()).x=r.origin.x,a.y=r.origin.y,a.relative=!1,this.model.setGeometry(i[o],a))}}this.removeCellsAfterUngroup(t),this.fireEvent(new mxEventObject(mxEvent.UNGROUP_CELLS,"cells",t))}finally{this.model.endUpdate()}}return e},mxGraph.prototype.getCellsForUngroup=function(){for(var t=this.getSelectionCells(),e=[],n=0;n<t.length;n++)this.model.isVertex(t[n])&&0<this.model.getChildCount(t[n])&&e.push(t[n]);return e},mxGraph.prototype.removeCellsAfterUngroup=function(t){this.cellsRemoved(this.addAllEdges(t))},mxGraph.prototype.removeCellsFromParent=function(t){null==t&&(t=this.getSelectionCells()),this.model.beginUpdate();try{var e=this.getDefaultParent(),n=this.model.getChildCount(e);this.cellsAdded(t,e,n,null,null,!0),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS_FROM_PARENT,"cells",t))}finally{this.model.endUpdate()}return t},mxGraph.prototype.updateGroupBounds=function(t,e,n,i,l,s,o){null==t&&(t=this.getSelectionCells()),e=null!=e?e:0,n=null!=n&&n,i=null!=i?i:0,l=null!=l?l:0,s=null!=s?s:0,o=null!=o?o:0,this.model.beginUpdate();try{for(var r=t.length-1;0<=r;r--){var a,h,d,u=this.getCellGeometry(t[r]);null!=u&&null!=(a=this.getChildCells(t[r]))&&0<a.length&&null!=(h=this.getBoundingBoxFromGeometry(a,!0))&&0<h.width&&0<h.height&&(d=this.isSwimlane(t[r])?this.getActualStartSize(t[r],!0):new mxRectangle,u=u.clone(),n&&(u.x=Math.round(u.x+h.x-e-d.x-o),u.y=Math.round(u.y+h.y-e-d.y-i)),u.width=Math.round(h.width+2*e+d.x+o+l+d.width),u.height=Math.round(h.height+2*e+d.y+i+s+d.height),this.model.setGeometry(t[r],u),this.moveCells(a,e+d.x-h.x+o,e+d.y-h.y+i))}}finally{this.model.endUpdate()}return t},mxGraph.prototype.getBoundingBox=function(t){var e,n=null;if(null!=t&&0<t.length)for(var i=0;i<t.length;i++)(this.model.isVertex(t[i])||this.model.isEdge(t[i]))&&null!=(e=this.view.getBoundingBox(this.view.getState(t[i]),!0))&&(null==n?n=mxRectangle.fromRectangle(e):n.add(e));return n},mxGraph.prototype.cloneCell=function(t,e,n,i){return this.cloneCells([t],e,n,i)[0]},mxGraph.prototype.cloneCells=function(t,e,n,i){e=null==e||e;var l=null;if(null!=t){for(var s=new mxDictionary,l=[],o=0;o<t.length;o++)s.put(t[o],!0),l.push(t[o]);if(0<l.length)for(var r=this.view.scale,a=this.view.translate,l=this.model.cloneCells(t,!0,n),o=0;o<t.length;o++)if(!e&&this.model.isEdge(l[o])&&null!=this.getEdgeValidationError(l[o],this.model.getTerminal(l[o],!0),this.model.getTerminal(l[o],!1)))l[o]=null;else{var h=this.model.getGeometry(l[o]);if(null!=h){var d=this.view.getState(t[o]),u=this.view.getState(this.model.getParent(t[o]));if(null!=d&&null!=u)if(n=i?0:u.origin.x,u=i?0:u.origin.y,this.model.isEdge(l[o])){if(null!=(d=d.absolutePoints)){for(var p=this.model.getTerminal(t[o],!0);null!=p&&!s.get(p);)p=this.model.getParent(p);for(null==p&&null!=d[0]&&h.setTerminalPoint(new mxPoint(d[0].x/r-a.x,d[0].y/r-a.y),!0),p=this.model.getTerminal(t[o],!1);null!=p&&!s.get(p);)p=this.model.getParent(p);var c=d.length-1;if(null==p&&null!=d[c]&&h.setTerminalPoint(new mxPoint(d[c].x/r-a.x,d[c].y/r-a.y),!1),null!=(h=h.points))for(d=0;d<h.length;d++)h[d].x+=n,h[d].y+=u}}else h.translate(n,u)}}else l=[]}return l},mxGraph.prototype.insertVertex=function(t,e,n,i,l,s,o,r,a){return e=this.createVertex(t,e,n,i,l,s,o,r,a),this.addCell(e,t)},mxGraph.prototype.createVertex=function(t,e,n,i,l,s,o,r,a){return(t=new mxGeometry(i,l,s,o)).relative=null!=a&&a,(n=new mxCell(n,t,r)).setId(e),n.setVertex(!0),n.setConnectable(!0),n},mxGraph.prototype.insertEdge=function(t,e,n,i,l,s){return e=this.createEdge(t,e,n,i,l,s),this.addEdge(e,t,i,l)},mxGraph.prototype.createEdge=function(t,e,n,i,l,s){return(t=new mxCell(n,new mxGeometry,s)).setId(e),t.setEdge(!0),t.geometry.relative=!0,t},mxGraph.prototype.addEdge=function(t,e,n,i,l){return this.addCell(t,e,l,n,i)},mxGraph.prototype.addCell=function(t,e,n,i,l){return this.addCells([t],e,n,i,l)[0]},mxGraph.prototype.addCells=function(t,e,n,i,l,s){null==e&&(e=this.getDefaultParent()),null==n&&(n=this.model.getChildCount(e)),this.model.beginUpdate();try{this.cellsAdded(t,e,n,i,l,null!=s&&s,!0),this.fireEvent(new mxEventObject(mxEvent.ADD_CELLS,"cells",t,"parent",e,"index",n,"source",i,"target",l))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsAdded=function(t,e,n,i,l,s,o,r){if(null!=t&&null!=e&&null!=n){this.model.beginUpdate();try{for(var a,h,d,u,p,c,m=null!=(x=s?this.view.getState(e):null)?x.origin:null,g=new mxPoint(0,0),x=0;x<t.length;x++)null==t[x]?n--:(a=this.model.getParent(t[x]),null!=m&&t[x]!=e&&e!=a&&(d=null!=(h=this.view.getState(a))?h.origin:g,null!=(c=this.model.getGeometry(t[x])))&&(u=d.x-m.x,p=d.y-m.y,(c=c.clone()).translate(u,p),c.relative||!this.model.isVertex(t[x])||this.isAllowNegativeCoordinates()||(c.x=Math.max(0,c.x),c.y=Math.max(0,c.y)),this.model.setGeometry(t[x],c)),e==a&&n+x>this.model.getChildCount(e)&&n--,this.model.add(e,t[x],n+x),this.autoSizeCellsOnAdd&&this.autoSizeCell(t[x],!0),(null==r||r)&&this.isExtendParentsOnAdd(t[x])&&this.isExtendParent(t[x])&&this.extendParent(t[x]),null!=o&&!o||this.constrainChild(t[x]),null!=i&&this.cellConnected(t[x],i,!0),null!=l&&this.cellConnected(t[x],l,!1));this.fireEvent(new mxEventObject(mxEvent.CELLS_ADDED,"cells",t,"parent",e,"index",n,"source",i,"target",l,"absolute",s))}finally{this.model.endUpdate()}}},mxGraph.prototype.autoSizeCell=function(t,e){if(null==e||e)for(var n=this.model.getChildCount(t),i=0;i<n;i++)this.autoSizeCell(this.model.getChildAt(t,i));this.getModel().isVertex(t)&&this.isAutoSizeCell(t)&&this.updateCellSize(t)},mxGraph.prototype.removeCells=function(t,e){if(e=null==e||e,null==t&&(t=this.getDeletableCells(this.getSelectionCells())),e)t=this.getDeletableCells(this.addAllEdges(t));else{t=t.slice();for(var n=this.getDeletableCells(this.getAllEdges(t)),i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(l=0;l<n.length;l++)null!=this.view.getState(n[l])||i.get(n[l])||(i.put(n[l],!0),t.push(n[l]))}this.model.beginUpdate();try{this.cellsRemoved(t),this.fireEvent(new mxEventObject(mxEvent.REMOVE_CELLS,"cells",t,"includeEdges",e))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsRemoved=function(o){if(null!=o&&0<o.length){var r=this.view.scale,a=this.view.translate;this.model.beginUpdate();try{for(var t=new mxDictionary,h=0;h<o.length;h++)t.put(o[h],!0);for(h=0;h<o.length;h++){for(var e=this.getAllEdges([o[h]]),n=mxUtils.bind(this,function(t,e){var n=this.model.getGeometry(t);if(null!=n){for(var i=this.model.getTerminal(t,e),l=!1,s=i;null!=s;){if(o[h]==s){l=!0;break}s=this.model.getParent(s)}l&&(n=n.clone(),null!=(l=this.view.getState(t))&&null!=l.absolutePoints?(i=l.absolutePoints,s=e?0:i.length-1,n.setTerminalPoint(new mxPoint(i[s].x/r-a.x-l.origin.x,i[s].y/r-a.y-l.origin.y),e)):null!=(i=this.view.getState(i))&&n.setTerminalPoint(new mxPoint(i.getCenterX()/r-a.x,i.getCenterY()/r-a.y),e),this.model.setGeometry(t,n),this.model.setTerminal(t,null,e))}}),i=0;i<e.length;i++)t.get(e[i])||(t.put(e[i],!0),n(e[i],!0),n(e[i],!1));this.model.remove(o[h])}this.fireEvent(new mxEventObject(mxEvent.CELLS_REMOVED,"cells",o))}finally{this.model.endUpdate()}}},mxGraph.prototype.splitEdge=function(t,e,n,i,l,s,o,r){i=i||0,l=l||0,r=null!=r?r:this.model.getParent(t),s=this.model.getTerminal(t,!0),this.model.beginUpdate();try{var a,h,d,u,p;null==n&&(n=this.cloneCell(t),a=this.view.getState(t),null!=(h=this.getCellGeometry(n)))&&null!=h.points&&null!=a&&(d=this.view.translate,u=this.view.scale,p=mxUtils.findNearestSegment(a,(i+d.x)*u,(l+d.y)*u),h.points=h.points.slice(0,p),null!=(h=this.getCellGeometry(t)))&&null!=h.points&&((h=h.clone()).points=h.points.slice(p),this.model.setGeometry(t,h)),this.cellsMoved(e,i,l,!1,!1),this.cellsAdded(e,r,this.model.getChildCount(r),null,null,!0),this.cellsAdded([n],r,this.model.getChildCount(r),s,e[0],!1),this.cellConnected(t,e[0],!0),this.fireEvent(new mxEventObject(mxEvent.SPLIT_EDGE,"edge",t,"cells",e,"newEdge",n,"dx",i,"dy",l))}finally{this.model.endUpdate()}return n},mxGraph.prototype.toggleCells=function(t,e,n){null==e&&(e=this.getSelectionCells()),n&&(e=this.addAllEdges(e)),this.model.beginUpdate();try{this.cellsToggled(e,t),this.fireEvent(new mxEventObject(mxEvent.TOGGLE_CELLS,"show",t,"cells",e,"includeEdges",n))}finally{this.model.endUpdate()}return e},mxGraph.prototype.cellsToggled=function(t,e){if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var n=0;n<t.length;n++)this.model.setVisible(t[n],e)}finally{this.model.endUpdate()}}},mxGraph.prototype.foldCells=function(t,e,n,i,l){e=null!=e&&e,null==n&&(n=this.getFoldableCells(this.getSelectionCells(),t)),this.stopEditing(!1),this.model.beginUpdate();try{this.cellsFolded(n,t,e,i),this.fireEvent(new mxEventObject(mxEvent.FOLD_CELLS,"collapse",t,"recurse",e,"cells",n))}finally{this.model.endUpdate()}return n},mxGraph.prototype.cellsFolded=function(t,e,n,i){if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var l,s=0;s<t.length;s++)i&&!this.isCellFoldable(t[s],e)||e==this.isCellCollapsed(t[s])||(this.model.setCollapsed(t[s],e),this.swapBounds(t[s],e),this.isExtendParent(t[s])&&this.extendParent(t[s]),n&&(l=this.model.getChildren(t[s]),this.cellsFolded(l,e,n)),this.constrainChild(t[s]));this.fireEvent(new mxEventObject(mxEvent.CELLS_FOLDED,"cells",t,"collapse",e,"recurse",n))}finally{this.model.endUpdate()}}},mxGraph.prototype.swapBounds=function(t,e){var n;null!=t&&null!=(n=this.model.getGeometry(t))&&(n=n.clone(),this.updateAlternateBounds(t,n,e),n.swap(),this.model.setGeometry(t,n))},mxGraph.prototype.updateAlternateBounds=function(t,e,n){var i,l;null!=t&&null!=e&&(n=this.getCurrentCellStyle(t),null==e.alternateBounds&&(i=e,this.collapseToPreferredSize&&null!=(t=this.getPreferredSizeForCell(t))&&(i=t,0<(t=mxUtils.getValue(n,mxConstants.STYLE_STARTSIZE)))&&(i.height=Math.max(i.height,t)),e.alternateBounds=new mxRectangle(0,0,i.width,i.height)),null!=e.alternateBounds)&&(e.alternateBounds.x=e.x,e.alternateBounds.y=e.y,0!=(l=mxUtils.toRadians(n[mxConstants.STYLE_ROTATION]||0)))&&(n=e.alternateBounds.getCenterX()-e.getCenterX(),i=e.alternateBounds.getCenterY()-e.getCenterY(),t=Math.cos(l),l=Math.sin(l),e.alternateBounds.x+=t*n-l*i-n,e.alternateBounds.y+=l*n+t*i-i)},mxGraph.prototype.addAllEdges=function(t){var e=t.slice();return mxUtils.removeDuplicates(e.concat(this.getAllEdges(t)))},mxGraph.prototype.getAllEdges=function(t){var e=[];if(null!=t)for(var n=0;n<t.length;n++){for(var i=this.model.getEdgeCount(t[n]),l=0;l<i;l++)e.push(this.model.getEdgeAt(t[n],l));i=this.model.getChildren(t[n]),e=e.concat(this.getAllEdges(i))}return e},mxGraph.prototype.updateCellSize=function(t,e){e=null!=e&&e,this.model.beginUpdate();try{this.cellSizeUpdated(t,e),this.fireEvent(new mxEventObject(mxEvent.UPDATE_CELL_SIZE,"cell",t,"ignoreChildren",e))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellSizeUpdated=function(t,e){if(null!=t){this.model.beginUpdate();try{var n,i,l,s,o,r,a,h,d,u,p=this.getPreferredSizeForCell(t),c=this.model.getGeometry(t);null!=p&&null!=c&&(n=this.isCellCollapsed(t),c=c.clone(),this.isSwimlane(t)?(i=this.getCellStyle(t),null==(l=this.model.getStyle(t))&&(l=""),mxUtils.getValue(i,mxConstants.STYLE_HORIZONTAL,!0)?(l=mxUtils.setStyle(l,mxConstants.STYLE_STARTSIZE,p.height+8),n&&(c.height=p.height+8),c.width=p.width):(l=mxUtils.setStyle(l,mxConstants.STYLE_STARTSIZE,p.width+8),n&&(c.width=p.width+8),c.height=p.height),this.model.setStyle(t,l)):((o=(s=this.view.createState(t)).style[mxConstants.STYLE_ALIGN]||mxConstants.ALIGN_CENTER)==mxConstants.ALIGN_RIGHT?c.x+=c.width-p.width:o==mxConstants.ALIGN_CENTER&&(c.x+=Math.round((c.width-p.width)/2)),(r=this.getVerticalAlign(s))==mxConstants.ALIGN_BOTTOM?c.y+=c.height-p.height:r==mxConstants.ALIGN_MIDDLE&&(c.y+=Math.round((c.height-p.height)/2)),c.width=p.width,c.height=p.height),e||n||null!=(a=this.view.getBounds(this.model.getChildren(t)))&&(h=this.view.translate,d=this.view.scale,u=(a.y+a.height)/d-c.y-h.y,c.width=Math.max(c.width,(a.x+a.width)/d-c.x-h.x),c.height=Math.max(c.height,u)),this.cellsResized([t],[c],!1))}finally{this.model.endUpdate()}}},mxGraph.prototype.getPreferredSizeForCell=function(t,e){var n,i,l,s,o=null;return null!=t&&(i=(n=this.view.createState(t)).style,this.model.isEdge(t)||(t=i[mxConstants.STYLE_FONTSIZE]||mxConstants.DEFAULT_FONTSIZE,o=l=0,null==this.getImage(n)&&null==i[mxConstants.STYLE_IMAGE]||i[mxConstants.STYLE_SHAPE]!=mxConstants.SHAPE_LABEL||(i[mxConstants.STYLE_VERTICAL_ALIGN]==mxConstants.ALIGN_MIDDLE&&(l+=parseFloat(i[mxConstants.STYLE_IMAGE_WIDTH])||mxLabel.prototype.imageSize),i[mxConstants.STYLE_ALIGN]!=mxConstants.ALIGN_CENTER&&(o+=parseFloat(i[mxConstants.STYLE_IMAGE_HEIGHT])||mxLabel.prototype.imageSize)),l=(l=(l=l+2*(i[mxConstants.STYLE_SPACING]||0))+(i[mxConstants.STYLE_SPACING_LEFT]||0))+(i[mxConstants.STYLE_SPACING_RIGHT]||0),o=(o=(o=o+2*(i[mxConstants.STYLE_SPACING]||0))+(i[mxConstants.STYLE_SPACING_TOP]||0))+(i[mxConstants.STYLE_SPACING_BOTTOM]||0),null!=(s=this.getFoldingImage(n))&&(l+=s.width+8),o=null!=(s=this.cellRenderer.getLabelValue(n))&&0<s.length?(s=(s=this.isHtmlLabel(n.cell)?s:mxUtils.htmlEntities(s,!1)).replace(/\n/g,"<br>"),n=(t=mxUtils.getSizeForString(s,t,i[mxConstants.STYLE_FONTFAMILY],e,i[mxConstants.STYLE_FONTSTYLE])).width+l,o=t.height+o,mxUtils.getValue(i,mxConstants.STYLE_HORIZONTAL,!0)||(i=o,o=n,n=i),this.gridEnabled&&(n=this.snap(n+this.gridSize/2),o=this.snap(o+this.gridSize/2)),new mxRectangle(0,0,n,o)):new mxRectangle(0,0,i=4*this.gridSize,i))),o},mxGraph.prototype.resizeCell=function(t,e,n){return this.resizeCells([t],[e],n)[0]},mxGraph.prototype.resizeCells=function(t,e,n){n=null!=n?n:this.isRecursiveResize(),this.model.beginUpdate();try{var i=this.cellsResized(t,e,n);this.fireEvent(new mxEventObject(mxEvent.RESIZE_CELLS,"cells",t,"bounds",e,"previous",i))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellsResized=function(t,e,n){n=null!=n&&n;var i=[];if(null!=t&&null!=e&&t.length==e.length){this.model.beginUpdate();try{for(var l=0;l<t.length;l++)i.push(this.cellResized(t[l],e[l],!1,n)),this.isExtendParent(t[l])&&this.extendParent(t[l]),this.constrainChild(t[l]);this.resetEdgesOnResize&&this.resetEdges(t),this.fireEvent(new mxEventObject(mxEvent.CELLS_RESIZED,"cells",t,"bounds",e,"previous",i))}finally{this.model.endUpdate()}}return i},mxGraph.prototype.cellResized=function(t,e,n,i){var l=this.model.getGeometry(t);if(null!=l&&(l.x!=e.x||l.y!=e.y||l.width!=e.width||l.height!=e.height)){var s=l.clone();!n&&s.relative?null!=(n=s.offset)&&(n.x+=e.x-s.x,n.y+=e.y-s.y):(s.x=e.x,s.y=e.y),s.width=e.width,s.height=e.height,s.relative||!this.model.isVertex(t)||this.isAllowNegativeCoordinates()||(s.x=Math.max(0,s.x),s.y=Math.max(0,s.y)),this.model.beginUpdate();try{i&&this.resizeChildCells(t,s),this.model.setGeometry(t,s),this.constrainChildCells(t)}finally{this.model.endUpdate()}}return l},mxGraph.prototype.resizeChildCells=function(t,e){for(var n=0!=(i=this.model.getGeometry(t)).width?e.width/i.width:1,i=0!=i.height?e.height/i.height:1,l=this.model.getChildCount(t),s=0;s<l;s++)this.scaleCell(this.model.getChildAt(t,s),n,i,!0)},mxGraph.prototype.constrainChildCells=function(t){for(var e=this.model.getChildCount(t),n=0;n<e;n++)this.constrainChild(this.model.getChildAt(t,n))},mxGraph.prototype.scaleCell=function(t,e,n,i){var l,s,o,r,a,h=this.model.getGeometry(t);null!=h&&(l=this.getCurrentCellStyle(t),s=(h=h.clone()).x,o=h.y,r=h.width,a=h.height,h.scale(e,n,"fixed"==l[mxConstants.STYLE_ASPECT]),"1"==l[mxConstants.STYLE_RESIZE_WIDTH]?h.width=r*e:"0"==l[mxConstants.STYLE_RESIZE_WIDTH]&&(h.width=r),"1"==l[mxConstants.STYLE_RESIZE_HEIGHT]?h.height=a*n:"0"==l[mxConstants.STYLE_RESIZE_HEIGHT]&&(h.height=a),this.isCellMovable(t)||(h.x=s,h.y=o),this.isCellResizable(t)||(h.width=r,h.height=a),this.model.isVertex(t)?this.cellResized(t,h,!0,i):this.model.setGeometry(t,h))},mxGraph.prototype.extendParent=function(t){var e,n;null!=t&&(e=this.model.getParent(t),n=this.getCellGeometry(e),null==e||null==n||this.isCellCollapsed(e)||null!=(t=this.getCellGeometry(t))&&!t.relative&&(n.width<t.x+t.width||n.height<t.y+t.height)&&((n=n.clone()).width=Math.max(n.width,t.x+t.width),n.height=Math.max(n.height,t.y+t.height),this.cellsResized([e],[n],!1)))},mxGraph.prototype.importCells=function(t,e,n,i,l,s){return this.moveCells(t,e,n,!0,i,l,s)},mxGraph.prototype.moveCells=function(t,e,n,i,l,s,o){if(e=null!=e?e:0,n=null!=n?n:0,i=null!=i&&i,null!=t&&(0!=e||0!=n||i||null!=l)){var r=t=this.model.getTopmostCells(t);this.model.beginUpdate();try{for(var a=new mxDictionary,h=0;h<t.length;h++)a.put(t[h],!0);for(var d=mxUtils.bind(this,function(t){for(;null!=t;){if(a.get(t))return!0;t=this.model.getParent(t)}return!1}),u=[],h=0;h<t.length;h++){var p=this.getCellGeometry(t[h]),c=this.model.getParent(t[h]);null!=p&&p.relative&&this.model.isEdge(c)&&(d(this.model.getTerminal(c,!0))||d(this.model.getTerminal(c,!1)))||u.push(t[h])}t=u,i&&(t=this.cloneCells(t,this.isCloneInvalidEdges(),o),null==l)&&(l=this.getDefaultParent());var m=this.isAllowNegativeCoordinates();if(null!=l&&this.setAllowNegativeCoordinates(!0),this.cellsMoved(t,e,n,!i&&this.isDisconnectOnMove()&&this.isAllowDanglingEdges(),null==l,this.isExtendParentsOnMove()&&null==l),this.setAllowNegativeCoordinates(m),null!=l){var g=this.model.getChildCount(l);if(this.cellsAdded(t,l,g,null,null,!0),i)for(h=0;h<t.length;h++)p=this.getCellGeometry(t[h]),c=this.model.getParent(r[h]),null!=p&&p.relative&&this.model.isEdge(c)&&this.model.contains(c)&&this.model.add(c,t[h])}this.fireEvent(new mxEventObject(mxEvent.MOVE_CELLS,"cells",t,"dx",e,"dy",n,"clone",i,"target",l,"event",s))}finally{this.model.endUpdate()}}return t},mxGraph.prototype.cellsMoved=function(t,e,n,i,l,s){if(null!=t&&(0!=e||0!=n)){s=null!=s&&s,this.model.beginUpdate();try{i&&this.disconnectGraph(t);for(var o=0;o<t.length;o++)this.translateCell(t[o],e,n),s&&this.isExtendParent(t[o])?this.extendParent(t[o]):l&&this.constrainChild(t[o]);this.resetEdgesOnMove&&this.resetEdges(t),this.fireEvent(new mxEventObject(mxEvent.CELLS_MOVED,"cells",t,"dx",e,"dy",n,"disconnect",i))}finally{this.model.endUpdate()}}},mxGraph.prototype.translateCell=function(t,e,n){var i,l,s=this.model.getGeometry(t);null!=s&&(e=parseFloat(e),n=parseFloat(n),(s=s.clone()).translate(e,n),s.relative||!this.model.isVertex(t)||this.isAllowNegativeCoordinates()||(s.x=Math.max(0,parseFloat(s.x)),s.y=Math.max(0,parseFloat(s.y))),s.relative&&!this.model.isEdge(t)&&(i=this.model.getParent(t),l=0,this.model.isVertex(i)&&(i=this.getCurrentCellStyle(i),l=mxUtils.getValue(i,mxConstants.STYLE_ROTATION,0)),0!=l&&(l=mxUtils.toRadians(-l),i=Math.cos(l),l=Math.sin(l),e=(n=mxUtils.getRotatedPoint(new mxPoint(e,n),i,l,new mxPoint(0,0))).x,n=n.y),null==s.offset?s.offset=new mxPoint(Math.round(e),Math.round(n)):(s.offset.x=Math.round(parseFloat(s.offset.x+e)),s.offset.y=Math.round(parseFloat(s.offset.y+n)))),this.model.setGeometry(t,s))},mxGraph.prototype.getCellContainmentArea=function(t){if(null!=t&&!this.model.isEdge(t)&&(null!=(l=this.model.getParent(t))&&l!=this.getDefaultParent())){var e,n,i,l,s,o,r,a=this.model.getGeometry(l);if(null!=a)return e=t=0,n=a.width,a=a.height,this.isSwimlane(l)&&(i=this.getStartSize(l),o=this.getCurrentCellStyle(l),l=mxUtils.getValue(o,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),s=1==mxUtils.getValue(o,mxConstants.STYLE_FLIPH,0),o=1==mxUtils.getValue(o,mxConstants.STYLE_FLIPV,0),l!=mxConstants.DIRECTION_SOUTH&&l!=mxConstants.DIRECTION_NORTH||(r=i.width,i.width=i.height,i.height=r),(l==mxConstants.DIRECTION_EAST&&!o||l==mxConstants.DIRECTION_NORTH&&!s||l==mxConstants.DIRECTION_WEST&&o||l==mxConstants.DIRECTION_SOUTH&&s)&&(t=i.width,e=i.height),n-=i.width,a-=i.height),new mxRectangle(t,e,n,a)}return null},mxGraph.prototype.getMaximumGraphBounds=function(){return this.maximumGraphBounds},mxGraph.prototype.constrainChild=function(t,e){if(null!=t){var n=this.getCellGeometry(t);if(null!=n&&(this.isConstrainRelativeChildren()||!n.relative)){var i=this.model.getParent(t),l=(this.getCellGeometry(i),this.getMaximumGraphBounds());if(null!=l&&null!=(i=this.getBoundingBoxFromGeometry([i],!1))&&((l=mxRectangle.fromRectangle(l)).x-=i.x,l.y-=i.y),this.isConstrainChild(t)&&null!=(i=this.getCellContainmentArea(t))&&(0<(s=this.getOverlap(t))&&((i=mxRectangle.fromRectangle(i)).x-=i.width*s,i.y-=i.height*s,i.width+=2*i.width*s,i.height+=2*i.height*s),null==l?l=i:(l=mxRectangle.fromRectangle(l)).intersect(i)),null!=l){if(i=[t],!this.isCellCollapsed(t))for(var s=this.model.getDescendants(t),o=0;o<s.length;o++)this.isCellVisible(s[o])&&i.push(s[o]);null!=(i=this.getBoundingBoxFromGeometry(i,!1))&&(s=0,(n=n.clone()).width>l.width&&(s=n.width-l.width,n.width-=s),i.x+i.width>l.x+l.width&&(s-=i.x+i.width-l.x-l.width-s),o=0,n.height>l.height&&(o=n.height-l.height,n.height-=o),i.y+i.height>l.y+l.height&&(o-=i.y+i.height-l.y-l.height-o),i.x<l.x&&(s-=i.x-l.x),i.y<l.y&&(o-=i.y-l.y),0==s&&0==o||(n.relative?(null==n.offset&&(n.offset=new mxPoint),n.offset.x+=s,n.offset.y+=o):(n.x+=s,n.y+=o)),this.model.setGeometry(t,n))}}}},mxGraph.prototype.resetEdges=function(t){if(null!=t){for(var e=new mxDictionary,n=0;n<t.length;n++)e.put(t[n],!0);this.model.beginUpdate();try{for(n=0;n<t.length;n++){var i=this.model.getEdges(t[n]);if(null!=i)for(var l=0;l<i.length;l++){var s=this.view.getState(i[l]),o=null!=s?s.getVisibleTerminal(!0):this.view.getVisibleTerminal(i[l],!0),r=null!=s?s.getVisibleTerminal(!1):this.view.getVisibleTerminal(i[l],!1);e.get(o)&&e.get(r)||this.resetEdge(i[l])}this.resetEdges(this.model.getChildren(t[n]))}}finally{this.model.endUpdate()}}},mxGraph.prototype.resetEdge=function(t){var e=this.model.getGeometry(t);return null!=e&&null!=e.points&&0<e.points.length&&((e=e.clone()).points=[],this.model.setGeometry(t,e)),t},mxGraph.prototype.getOutlineConstraint=function(t,e,n){var i,l,s,o,r,a,h,d;return null!=e.shape?(n=this.view.getPerimeterBounds(e),(i=e.style[mxConstants.STYLE_DIRECTION])!=mxConstants.DIRECTION_NORTH&&i!=mxConstants.DIRECTION_SOUTH||(n.x+=n.width/2-n.height/2,n.y+=n.height/2-n.width/2,l=n.width,n.width=n.height,n.height=l),0!=(s=mxUtils.toRadians(e.shape.getShapeRotation()))&&(l=Math.cos(-s),s=Math.sin(-s),o=new mxPoint(n.getCenterX(),n.getCenterY()),t=mxUtils.getRotatedPoint(t,l,s,o)),o=s=1,a=r=0,this.getModel().isVertex(e.cell)&&(h=e.style[mxConstants.STYLE_FLIPH],d=e.style[mxConstants.STYLE_FLIPV],null!=e.shape&&null!=e.shape.stencil&&(h=1==mxUtils.getValue(e.style,"stencilFlipH",0)||h,d=1==mxUtils.getValue(e.style,"stencilFlipV",0)||d),i!=mxConstants.DIRECTION_NORTH&&i!=mxConstants.DIRECTION_SOUTH||(l=h,h=d,d=l),h&&(s=-1,r=-n.width),d)&&(o=-1,a=-n.height),t=new mxPoint((t.x-n.x)*s-r+n.x,(t.y-n.y)*o-a+n.y),new mxConnectionConstraint(new mxPoint(0==n.width?0:Math.round(1e3*(t.x-n.x)/n.width)/1e3,0==n.height?0:Math.round(1e3*(t.y-n.y)/n.height)/1e3),!1)):null},mxGraph.prototype.getAllConnectionConstraints=function(t,e){return null!=t&&null!=t.shape&&null!=t.shape.stencil?t.shape.stencil.constraints:null},mxGraph.prototype.getConnectionConstraint=function(t,e,n){(e=null)!=(l=t.style[n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X])&&null!=(i=t.style[n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])&&(e=new mxPoint(parseFloat(l),parseFloat(i)));var i,l=!1,s=i=0;return null!=e&&(l=mxUtils.getValue(t.style,n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,!0),i=parseFloat(t.style[n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX]),s=parseFloat(t.style[n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY]),i=isFinite(i)?i:0,s=isFinite(s)?s:0),new mxConnectionConstraint(e,l,null,i,s)},mxGraph.prototype.setConnectionConstraint=function(t,e,n,i){if(null!=i){this.model.beginUpdate();try{null==i||null==i.point?(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,null,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[t])):null!=i.point&&(this.setCellStyles(n?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X,i.point.x,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y,i.point.y,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DX:mxConstants.STYLE_ENTRY_DX,i.dx,[t]),this.setCellStyles(n?mxConstants.STYLE_EXIT_DY:mxConstants.STYLE_ENTRY_DY,i.dy,[t]),i.perimeter?this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,null,[t]):this.setCellStyles(n?mxConstants.STYLE_EXIT_PERIMETER:mxConstants.STYLE_ENTRY_PERIMETER,"0",[t]))}finally{this.model.endUpdate()}}},mxGraph.prototype.getConnectionPoint=function(t,e,n){n=null==n||n;var i,l,s,o,r,a=null;return null!=t&&null!=e.point&&(l=new mxPoint((i=this.view.getPerimeterBounds(t)).getCenterX(),i.getCenterY()),o=0,null!=(s=t.style[mxConstants.STYLE_DIRECTION])&&1==mxUtils.getValue(t.style,mxConstants.STYLE_ANCHOR_POINT_DIRECTION,1)&&(s==mxConstants.DIRECTION_NORTH?o+=270:s==mxConstants.DIRECTION_WEST?o+=180:s==mxConstants.DIRECTION_SOUTH&&(o+=90),s!=mxConstants.DIRECTION_NORTH&&s!=mxConstants.DIRECTION_SOUTH||i.rotate90()),a=this.view.scale,a=new mxPoint(i.x+e.point.x*i.width+e.dx*a,i.y+e.point.y*i.height+e.dy*a),r=t.style[mxConstants.STYLE_ROTATION]||0,e.perimeter?(0!=o&&(s=i=0,90==o?s=1:180==o?i=-1:270==o&&(s=-1),a=mxUtils.getRotatedPoint(a,i,s,l)),a=this.view.getPerimeterPoint(t,a,!1)):(r+=o,this.getModel().isVertex(t.cell)&&(o=1==t.style[mxConstants.STYLE_FLIPH],e=1==t.style[mxConstants.STYLE_FLIPV],null!=t.shape&&null!=t.shape.stencil&&(o=1==mxUtils.getValue(t.style,"stencilFlipH",0)||o,e=1==mxUtils.getValue(t.style,"stencilFlipV",0)||e),s!=mxConstants.DIRECTION_NORTH&&s!=mxConstants.DIRECTION_SOUTH||(t=o,o=e,e=t),o&&(a.x=2*i.getCenterX()-a.x),e)&&(a.y=2*i.getCenterY()-a.y)),0!=r)&&null!=a&&(t=mxUtils.toRadians(r),i=Math.cos(t),s=Math.sin(t),a=mxUtils.getRotatedPoint(a,i,s,l)),n&&null!=a&&(a.x=Math.round(a.x),a.y=Math.round(a.y)),a},mxGraph.prototype.connectCell=function(t,e,n,i){this.model.beginUpdate();try{var l=this.model.getTerminal(t,n);this.cellConnected(t,e,n,i),this.fireEvent(new mxEventObject(mxEvent.CONNECT_CELL,"edge",t,"terminal",e,"source",n,"previous",l))}finally{this.model.endUpdate()}return t},mxGraph.prototype.cellConnected=function(t,e,n,i){if(null!=t){this.model.beginUpdate();try{var l=this.model.getTerminal(t,n);this.setConnectionConstraint(t,e,n,i),this.isPortsEnabled()&&(i=null,this.isPort(e)&&(i=e.getId(),e=this.getTerminalForPort(e,n)),this.setCellStyles(n?mxConstants.STYLE_SOURCE_PORT:mxConstants.STYLE_TARGET_PORT,i,[t])),this.model.setTerminal(t,e,n),this.resetEdgesOnConnect&&this.resetEdge(t),this.fireEvent(new mxEventObject(mxEvent.CELL_CONNECTED,"edge",t,"terminal",e,"source",n,"previous",l))}finally{this.model.endUpdate()}}},mxGraph.prototype.disconnectGraph=function(t){if(null!=t){this.model.beginUpdate();try{for(var e=this.view.scale,n=this.view.translate,i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(l=0;l<t.length;l++)if(this.model.isEdge(t[l]))if(null!=(r=this.model.getGeometry(t[l]))){var s=this.view.getState(t[l]),o=this.view.getState(this.model.getParent(t[l]));if(null!=s&&null!=o){var r=r.clone(),a=-o.origin.x,h=-o.origin.y,d=s.absolutePoints,u=this.model.getTerminal(t[l],!0);if(null!=u&&this.isCellDisconnectable(t[l],u,!0)){for(;null!=u&&!i.get(u);)u=this.model.getParent(u);null==u&&(r.setTerminalPoint(new mxPoint(d[0].x/e-n.x+a,d[0].y/e-n.y+h),!0),this.model.setTerminal(t[l],null,!0))}var p,c=this.model.getTerminal(t[l],!1);if(null!=c&&this.isCellDisconnectable(t[l],c,!1)){for(;null!=c&&!i.get(c);)c=this.model.getParent(c);null==c&&(p=d.length-1,r.setTerminalPoint(new mxPoint(d[p].x/e-n.x+a,d[p].y/e-n.y+h),!1),this.model.setTerminal(t[l],null,!1))}this.model.setGeometry(t[l],r)}}}finally{this.model.endUpdate()}}},mxGraph.prototype.getCurrentRoot=function(){return this.view.currentRoot},mxGraph.prototype.getTranslateForRoot=function(t){return null},mxGraph.prototype.isPort=function(t){return!1},mxGraph.prototype.getTerminalForPort=function(t,e){return this.model.getParent(t)},mxGraph.prototype.getChildOffsetForCell=function(t){return null},mxGraph.prototype.enterGroup=function(t){null!=(t=t||this.getSelectionCell())&&this.isValidRoot(t)&&(this.view.setCurrentRoot(t),this.clearSelection())},mxGraph.prototype.exitGroup=function(){var t=this.model.getRoot(),e=this.getCurrentRoot();if(null!=e){for(var n=this.model.getParent(e);n!=t&&!this.isValidRoot(n)&&this.model.getParent(n)!=t;)n=this.model.getParent(n);n==t||this.model.getParent(n)==t?this.view.setCurrentRoot(null):this.view.setCurrentRoot(n),null!=this.view.getState(e)&&this.setSelectionCell(e)}},mxGraph.prototype.home=function(){var t=this.getCurrentRoot();null!=t&&(this.view.setCurrentRoot(null),null!=this.view.getState(t))&&this.setSelectionCell(t)},mxGraph.prototype.isValidRoot=function(t){return null!=t},mxGraph.prototype.getGraphBounds=function(){return this.view.getGraphBounds()},mxGraph.prototype.getCellBounds=function(t,e,n){var i=[t];if(e&&(i=i.concat(this.model.getEdges(t))),i=this.view.getBounds(i),n){n=this.model.getChildCount(t);for(var l=0;l<n;l++){var s=this.getCellBounds(this.model.getChildAt(t,l),e,!0);null!=i?i.add(s):i=s}}return i},mxGraph.prototype.getBoundingBoxFromGeometry=function(t,e){e=null!=e&&e;var n=null;if(null!=t)for(var i=0;i<t.length;i++)if(e||this.model.isVertex(t[i])){var l=this.getCellGeometry(t[i]);if(null!=l){var s=null;if(this.model.isEdge(t[i])){if(s=function(t){null!=t&&(null==o?o=new mxRectangle(t.x,t.y,0,0):o.add(new mxRectangle(t.x,t.y,0,0)))},null==this.model.getTerminal(t[i],!0)&&s(l.getTerminalPoint(!0)),null==this.model.getTerminal(t[i],!1)&&s(l.getTerminalPoint(!1)),null!=(l=l.points)&&0<l.length)for(var o=new mxRectangle(l[0].x,l[0].y,0,0),r=1;r<l.length;r++)s(l[r]);s=o}else r=this.model.getParent(t[i]),l.relative?this.model.isVertex(r)&&r!=this.view.currentRoot&&null!=(o=this.getBoundingBoxFromGeometry([r],!1))&&(s=new mxRectangle(l.x*o.width,l.y*o.height,l.width,l.height),0<=mxUtils.indexOf(t,r))&&(s.x+=o.x,s.y+=o.y):(s=mxRectangle.fromRectangle(l),this.model.isVertex(r)&&0<=mxUtils.indexOf(t,r)&&null!=(o=this.getBoundingBoxFromGeometry([r],!1))&&(s.x+=o.x,s.y+=o.y)),null!=s&&null!=l.offset&&(s.x+=l.offset.x,s.y+=l.offset.y),l=this.getCurrentCellStyle(t[i]),null!=s&&0!=(l=mxUtils.getValue(l,mxConstants.STYLE_ROTATION,0))&&(s=mxUtils.getBoundingBox(s,l));null!=s&&(null==n?n=mxRectangle.fromRectangle(s):n.add(s))}}return n},mxGraph.prototype.refresh=function(t){this.view.clear(t,null==t),this.view.validate(),this.sizeDidChange(),this.fireEvent(new mxEventObject(mxEvent.REFRESH))},mxGraph.prototype.snap=function(t){return t=this.gridEnabled?Math.round(t/this.gridSize)*this.gridSize:t},mxGraph.prototype.snapDelta=function(t,e,n,i,l){var s=this.view.translate,o=this.view.scale;return!n&&this.gridEnabled?(n=this.gridSize*o*.5,i||(i=e.x-(this.snap(e.x/o-s.x)+s.x)*o,t.x=Math.abs(t.x-i)<n?0:this.snap(t.x/o)*o-i),l||(e=e.y-(this.snap(e.y/o-s.y)+s.y)*o,t.y=Math.abs(t.y-e)<n?0:this.snap(t.y/o)*o-e)):(n=.5*o,i||(i=e.x-(Math.round(e.x/o-s.x)+s.x)*o,t.x=Math.abs(t.x-i)<n?0:Math.round(t.x/o)*o-i),l||(e=e.y-(Math.round(e.y/o-s.y)+s.y)*o,t.y=Math.abs(t.y-e)<n?0:Math.round(t.y/o)*o-e)),t},mxGraph.prototype.panGraph=function(t,e){if(this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container))this.container.scrollLeft=-t,this.container.scrollTop=-e;else{var n=this.view.getCanvas();if(this.dialect==mxConstants.DIALECT_SVG)if(0==t&&0==e){if(mxClient.IS_IE?n.setAttribute("transform","translate("+t+","+e+")"):n.removeAttribute("transform"),null!=this.shiftPreview1){for(var i=this.shiftPreview1.firstChild;null!=i;){var l=i.nextSibling;this.container.appendChild(i),i=l}for(null!=this.shiftPreview1.parentNode&&this.shiftPreview1.parentNode.removeChild(this.shiftPreview1),this.shiftPreview1=null,this.container.appendChild(n.parentNode),i=this.shiftPreview2.firstChild;null!=i;)l=i.nextSibling,this.container.appendChild(i),i=l;null!=this.shiftPreview2.parentNode&&this.shiftPreview2.parentNode.removeChild(this.shiftPreview2),this.shiftPreview2=null}}else{if(n.setAttribute("transform","translate("+t+","+e+")"),null==this.shiftPreview1){this.shiftPreview1=document.createElement("div"),this.shiftPreview1.style.position="absolute",this.shiftPreview1.style.overflow="visible",this.shiftPreview2=document.createElement("div"),this.shiftPreview2.style.position="absolute",this.shiftPreview2.style.overflow="visible";for(var s=this.shiftPreview1,i=this.container.firstChild;null!=i;)l=i.nextSibling,i!=n.parentNode?s.appendChild(i):s=this.shiftPreview2,i=l;null!=this.shiftPreview1.firstChild&&this.container.insertBefore(this.shiftPreview1,n.parentNode),null!=this.shiftPreview2.firstChild&&this.container.appendChild(this.shiftPreview2)}this.shiftPreview1.style.left=t+"px",this.shiftPreview1.style.top=e+"px",this.shiftPreview2.style.left=t+"px",this.shiftPreview2.style.top=e+"px"}else n.style.left=t+"px",n.style.top=e+"px";this.panDx=t,this.panDy=e,this.fireEvent(new mxEventObject(mxEvent.PAN))}},mxGraph.prototype.zoomIn=function(){this.zoom(this.zoomFactor)},mxGraph.prototype.zoomOut=function(){this.zoom(1/this.zoomFactor)},mxGraph.prototype.zoomActual=function(){1==this.view.scale?this.view.setTranslate(0,0):(this.view.translate.x=0,this.view.translate.y=0,this.view.setScale(1))},mxGraph.prototype.zoomTo=function(t,e){this.zoom(t/this.view.scale,e)},mxGraph.prototype.center=function(t,e,n,i){t=null==t||t,e=null==e||e,n=null!=n?n:.5,i=null!=i?i:.5;var l=mxUtils.hasScrollbars(this.container),s=2*this.getBorder(),o=this.container.clientWidth-s,s=this.container.clientHeight-s,r=this.getGraphBounds(),a=this.view.translate,h=this.view.scale,d=t?o-r.width:0,u=e?s-r.height:0;l?(r.x-=a.x,r.y-=a.y,o<(t=this.container.scrollWidth)&&(d=0),s<(e=this.container.scrollHeight)&&(u=0),this.view.setTranslate(Math.floor(d/2-r.x),Math.floor(u/2-r.y)),this.container.scrollLeft=(t-o)/2,this.container.scrollTop=(e-s)/2):this.view.setTranslate(t?Math.floor(a.x-r.x/h+d*n/h):a.x,e?Math.floor(a.y-r.y/h+u*i/h):a.y)},mxGraph.prototype.zoom=function(t,e){e=null!=e?e:this.centerZoom;var n,i,l,s,o,r=Math.round(this.view.scale*t*100)/100,a=this.view.getState(this.getSelectionCell());t=r/this.view.scale,this.keepSelectionVisibleOnZoom&&null!=a?(a=new mxRectangle(a.x*t,a.y*t,a.width*t,a.height*t),this.view.scale=r,this.scrollRectToVisible(a)||(this.view.revalidate(),this.view.setScale(r))):(a=mxUtils.hasScrollbars(this.container),e&&!a?(a=this.container.offsetWidth,n=this.container.offsetHeight,1<t?(a*=-(i=(t-1)/(2*r)),n*=-i):(a*=i=(1/t-1)/(2*this.view.scale),n*=i),this.view.scaleAndTranslate(r,this.view.translate.x+a,this.view.translate.y+n)):(i=this.view.translate.x,l=this.view.translate.y,s=this.container.scrollLeft,o=this.container.scrollTop,this.view.setScale(r),a&&(n=a=0,e&&(a=this.container.offsetWidth*(t-1)/2,n=this.container.offsetHeight*(t-1)/2),this.container.scrollLeft=(this.view.translate.x-i)*this.view.scale+Math.round(s*t+a),this.container.scrollTop=(this.view.translate.y-l)*this.view.scale+Math.round(o*t+n))))},mxGraph.prototype.zoomToRect=function(t){var e=this.container.clientWidth/t.width/(this.container.clientHeight/t.height),n=(t.x=Math.max(0,t.x),t.y=Math.max(0,t.y),Math.min(this.container.scrollWidth,t.x+t.width)),i=Math.min(this.container.scrollHeight,t.y+t.height);t.width=n-t.x,t.height=i-t.y,e<1?(n=((e=t.height/e)-t.height)/2,t.height=e,t.y-=Math.min(t.y,n),i=Math.min(this.container.scrollHeight,t.y+t.height),t.height=i-t.y):(n=((e*=t.width)-t.width)/2,t.width=e,t.x-=Math.min(t.x,n),n=Math.min(this.container.scrollWidth,t.x+t.width),t.width=n-t.x),e=this.container.clientWidth/t.width,n=this.view.scale*e,mxUtils.hasScrollbars(this.container)?(this.view.setScale(n),this.container.scrollLeft=Math.round(t.x*e),this.container.scrollTop=Math.round(t.y*e)):this.view.scaleAndTranslate(n,this.view.translate.x-t.x/this.view.scale,this.view.translate.y-t.y/this.view.scale)},mxGraph.prototype.scrollCellToVisible=function(t,e){var n=-this.view.translate.x,i=-this.view.translate.y,t=this.view.getState(t);null!=t&&(n=new mxRectangle(n+t.x,i+t.y,t.width,t.height),e&&null!=this.container&&(i=this.container.clientWidth,t=this.container.clientHeight,n.x=n.getCenterX()-i/2,n.width=i,n.y=n.getCenterY()-t/2,n.height=t),i=new mxPoint(this.view.translate.x,this.view.translate.y),this.scrollRectToVisible(n))&&(n=new mxPoint(this.view.translate.x,this.view.translate.y),this.view.translate.x=i.x,this.view.translate.y=i.y,this.view.setTranslate(n.x,n.y))},mxGraph.prototype.scrollRectToVisible=function(t){var e,n,i,l,s,o,r,a=!1;return null!=t&&(e=this.container.offsetWidth,l=this.container.offsetHeight,n=Math.min(e,t.width),i=Math.min(l,t.height),mxUtils.hasScrollbars(this.container)?(e=this.container,t.x+=this.view.translate.x,t.y+=this.view.translate.y,s=e.scrollLeft-t.x,l=Math.max(s-e.scrollLeft,0),0<s?e.scrollLeft-=s+2:0<(s=t.x+n-e.scrollLeft-e.clientWidth)&&(e.scrollLeft+=s+2),n=e.scrollTop-t.y,s=Math.max(0,n-e.scrollTop),0<n?e.scrollTop-=n+2:0<(n=t.y+i-e.scrollTop-e.clientHeight)&&(e.scrollTop+=n+2),this.useScrollbarsForPanning||0==l&&0==s||this.view.setTranslate(l,s)):(s=-this.view.translate.x,o=-this.view.translate.y,r=this.view.scale,t.x+n>s+e&&(this.view.translate.x-=(t.x+n-e-s)/r,a=!0),t.y+i>o+l&&(this.view.translate.y-=(t.y+i-l-o)/r,a=!0),t.x<s&&(this.view.translate.x+=(s-t.x)/r,a=!0),t.y<o&&(this.view.translate.y+=(o-t.y)/r,a=!0),a&&(this.view.refresh(),null!=this.selectionCellsHandler)&&this.selectionCellsHandler.refresh())),a},mxGraph.prototype.getCellGeometry=function(t){return this.model.getGeometry(t)},mxGraph.prototype.isCellVisible=function(t){return this.model.isVisible(t)},mxGraph.prototype.isCellCollapsed=function(t){return this.model.isCollapsed(t)},mxGraph.prototype.isCellConnectable=function(t){return this.model.isConnectable(t)},mxGraph.prototype.isOrthogonal=function(t){var e=t.style[mxConstants.STYLE_ORTHOGONAL];return null!=e?e:(t=this.view.getEdgeStyle(t))==mxEdgeStyle.SegmentConnector||t==mxEdgeStyle.ElbowConnector||t==mxEdgeStyle.SideToSide||t==mxEdgeStyle.TopToBottom||t==mxEdgeStyle.EntityRelation||t==mxEdgeStyle.OrthConnector},mxGraph.prototype.isLoop=function(t){var e=t.getVisibleTerminalState(!0);return t=t.getVisibleTerminalState(!1),null!=e&&e==t},mxGraph.prototype.isCloneEvent=function(t){return mxEvent.isControlDown(t)},mxGraph.prototype.isTransparentClickEvent=function(t){return!1},mxGraph.prototype.isToggleEvent=function(t){return mxClient.IS_MAC?mxEvent.isMetaDown(t):mxEvent.isControlDown(t)},mxGraph.prototype.isGridEnabledEvent=function(t){return null!=t&&!mxEvent.isAltDown(t)},mxGraph.prototype.isConstrainedEvent=function(t){return mxEvent.isShiftDown(t)},mxGraph.prototype.isIgnoreTerminalEvent=function(t){return!1},mxGraph.prototype.validationAlert=function(t){mxUtils.alert(t)},mxGraph.prototype.isEdgeValid=function(t,e,n){return null==this.getEdgeValidationError(t,e,n)},mxGraph.prototype.getEdgeValidationError=function(t,e,n){if(null!=t&&!this.isAllowDanglingEdges()&&(null==e||null==n))return"";if(null!=t&&null==this.model.getTerminal(t,!0)&&null==this.model.getTerminal(t,!1))return null;if(!this.allowLoops&&e==n&&null!=e||!this.isValidConnection(e,n))return"";if(null==e||null==n)return this.allowDanglingEdges?null:"";var i="",l=(this.multigraph||(1<(l=this.model.getEdgesBetween(e,n,!0)).length||1==l.length&&l[0]!=t)&&(i+=(mxResources.get(this.alreadyConnectedResource)||this.alreadyConnectedResource)+"\n"),this.model.getDirectedEdgeCount(e,!0,t)),s=this.model.getDirectedEdgeCount(n,!1,t);if(null!=this.multiplicities)for(var o=0;o<this.multiplicities.length;o++){var r=this.multiplicities[o].check(this,t,e,n,l,s);null!=r&&(i+=r)}return null!=(r=this.validateEdge(t,e,n))&&(i+=r),0<i.length?i:null},mxGraph.prototype.validateEdge=function(t,e,n){return null},mxGraph.prototype.validateGraph=function(t,e){t=null!=t?t:this.model.getRoot(),e=null!=e?e:{};for(var n=!0,i=this.model.getChildCount(t),l=0;l<i;l++){var s=this.model.getChildAt(t,l),o=e;this.isValidRoot(s)&&(o={}),null!=(o=this.validateGraph(s,o))?this.setCellWarning(s,o.replace(/\n/g,"<br>")):this.setCellWarning(s,null),n=n&&null==o}return i="",this.isCellCollapsed(t)&&!n&&(i+=(mxResources.get(this.containsValidationErrorsResource)||this.containsValidationErrorsResource)+"\n"),i=this.model.isEdge(t)?i+(this.getEdgeValidationError(t,this.model.getTerminal(t,!0),this.model.getTerminal(t,!1))||""):i+(this.getCellValidationError(t)||""),null!=(l=this.validateCell(t,e))&&(i+=l),null==this.model.getParent(t)&&this.view.validate(),0<i.length||!n?i:null},mxGraph.prototype.getCellValidationError=function(t){var e=this.model.getDirectedEdgeCount(t,!0),n=this.model.getDirectedEdgeCount(t,!1),i=(t=this.model.getValue(t),"");if(null!=this.multiplicities)for(var l=0;l<this.multiplicities.length;l++){var s=this.multiplicities[l];(s.source&&mxUtils.isNode(t,s.type,s.attr,s.value)&&(e>s.max||e<s.min)||!s.source&&mxUtils.isNode(t,s.type,s.attr,s.value)&&(n>s.max||n<s.min))&&(i+=s.countError+"\n")}return 0<i.length?i:null},mxGraph.prototype.validateCell=function(t,e){return null},mxGraph.prototype.getBackgroundImage=function(){return this.backgroundImage},mxGraph.prototype.setBackgroundImage=function(t){this.backgroundImage=t},mxGraph.prototype.getFoldingImage=function(t){if(null!=t&&this.foldingEnabled&&!this.getModel().isEdge(t.cell)){var e=this.isCellCollapsed(t.cell);if(this.isCellFoldable(t.cell,!e))return e?this.collapsedImage:this.expandedImage}return null},mxGraph.prototype.convertValueToString=function(t){if(null!=(t=this.model.getValue(t))){if(mxUtils.isNode(t))return t.nodeName;if("function"==typeof t.toString)return t.toString()}return""},mxGraph.prototype.getLabel=function(t){var e,n="";return this.labelsVisible&&null!=t&&(e=this.getCurrentCellStyle(t),mxUtils.getValue(e,mxConstants.STYLE_NOLABEL,!1)||(n=this.convertValueToString(t))),n},mxGraph.prototype.isHtmlLabel=function(t){return this.isHtmlLabels()},mxGraph.prototype.isHtmlLabels=function(){return this.htmlLabels},mxGraph.prototype.setHtmlLabels=function(t){this.htmlLabels=t},mxGraph.prototype.isWrapping=function(t){return"wrap"==this.getCurrentCellStyle(t)[mxConstants.STYLE_WHITE_SPACE]},mxGraph.prototype.isLabelClipped=function(t){return"hidden"==this.getCurrentCellStyle(t)[mxConstants.STYLE_OVERFLOW]},mxGraph.prototype.getTooltip=function(t,n,e,i){var l=null;return l=null!=t&&(null==t.control||n!=t.control.node&&n.parentNode!=t.control.node||(l=this.collapseExpandResource,l=mxUtils.htmlEntities(mxResources.get(l)||l).replace(/\\n/g,"<br>")),null==l&&null!=t.overlays&&t.overlays.visit(function(t,e){null!=l||n!=e.node&&n.parentNode!=e.node||(l=e.overlay.toString())}),null==(l=null==l&&null!=(e=this.selectionCellsHandler.getHandler(t.cell))&&"function"==typeof e.getTooltipForNode?e.getTooltipForNode(n):l))?this.getTooltipForCell(t.cell):l},mxGraph.prototype.getTooltipForCell=function(t){return null!=t&&null!=t.getTooltip?t.getTooltip():this.convertValueToString(t)},mxGraph.prototype.getLinkForCell=function(t){return null},mxGraph.prototype.getLinkTargetForCell=function(t){return null},mxGraph.prototype.getCursorForMouseEvent=function(t){return this.getCursorForCell(t.getCell())},mxGraph.prototype.getCursorForCell=function(t){return null},mxGraph.prototype.getStartSize=function(t,e){var n=new mxRectangle,t=this.getCurrentCellStyle(t,e),e=parseInt(mxUtils.getValue(t,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,!0)?n.height=e:n.width=e,n},mxGraph.prototype.getSwimlaneDirection=function(t){var e=mxUtils.getValue(t,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),n=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPH,0),i=1==mxUtils.getValue(t,mxConstants.STYLE_FLIPV,0);return t=mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,!0)?0:3,e==mxConstants.DIRECTION_NORTH?t--:e==mxConstants.DIRECTION_WEST?t+=2:e==mxConstants.DIRECTION_SOUTH&&(t+=1),e=mxUtils.mod(t,2),n&&1==e&&(t+=2),i&&0==e&&(t+=2),[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST][mxUtils.mod(t,4)]},mxGraph.prototype.getActualStartSize=function(t,e){var n=new mxRectangle;return this.isSwimlane(t,e)&&(t=this.getCurrentCellStyle(t,e),e=parseInt(mxUtils.getValue(t,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),(t=this.getSwimlaneDirection(t))==mxConstants.DIRECTION_NORTH?n.y=e:t==mxConstants.DIRECTION_WEST?n.x=e:t==mxConstants.DIRECTION_SOUTH?n.height=e:n.width=e),n},mxGraph.prototype.getImage=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_IMAGE]:null},mxGraph.prototype.isTransparentState=function(t){var e,n=!1;return null!=t&&(n=mxUtils.getValue(t.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),e=mxUtils.getValue(t.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE),n=n==mxConstants.NONE&&e==mxConstants.NONE&&null==this.getImage(t)),n},mxGraph.prototype.getVerticalAlign=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_VERTICAL_ALIGN]||mxConstants.ALIGN_MIDDLE:null},mxGraph.prototype.getIndicatorColor=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_COLOR]:null},mxGraph.prototype.getIndicatorGradientColor=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_GRADIENTCOLOR]:null},mxGraph.prototype.getIndicatorShape=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_SHAPE]:null},mxGraph.prototype.getIndicatorImage=function(t){return null!=t&&null!=t.style?t.style[mxConstants.STYLE_INDICATOR_IMAGE]:null},mxGraph.prototype.getBorder=function(){return this.border},mxGraph.prototype.setBorder=function(t){this.border=t},mxGraph.prototype.isSwimlane=function(t,e){return null!=t&&this.model.getParent(t)!=this.model.getRoot()&&!this.model.isEdge(t)&&this.getCurrentCellStyle(t,e)[mxConstants.STYLE_SHAPE]==mxConstants.SHAPE_SWIMLANE},mxGraph.prototype.isResizeContainer=function(){return this.resizeContainer},mxGraph.prototype.setResizeContainer=function(t){this.resizeContainer=t},mxGraph.prototype.isEnabled=function(){return this.enabled},mxGraph.prototype.setEnabled=function(t){this.enabled=t},mxGraph.prototype.isEscapeEnabled=function(){return this.escapeEnabled},mxGraph.prototype.setEscapeEnabled=function(t){this.escapeEnabled=t},mxGraph.prototype.isInvokesStopCellEditing=function(){return this.invokesStopCellEditing},mxGraph.prototype.setInvokesStopCellEditing=function(t){this.invokesStopCellEditing=t},mxGraph.prototype.isEnterStopsCellEditing=function(){return this.enterStopsCellEditing},mxGraph.prototype.setEnterStopsCellEditing=function(t){this.enterStopsCellEditing=t},mxGraph.prototype.isCellLocked=function(t){var e=this.model.getGeometry(t);return this.isCellsLocked()||null!=e&&this.model.isVertex(t)&&e.relative},mxGraph.prototype.isCellsLocked=function(){return this.cellsLocked},mxGraph.prototype.setCellsLocked=function(t){this.cellsLocked=t},mxGraph.prototype.getCloneableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellCloneable(t)}))},mxGraph.prototype.isCellCloneable=function(t){return t=this.getCurrentCellStyle(t),this.isCellsCloneable()&&0!=t[mxConstants.STYLE_CLONEABLE]},mxGraph.prototype.isCellsCloneable=function(){return this.cellsCloneable},mxGraph.prototype.setCellsCloneable=function(t){this.cellsCloneable=t},mxGraph.prototype.getExportableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.canExportCell(t)}))},mxGraph.prototype.canExportCell=function(t){return this.exportEnabled},mxGraph.prototype.getImportableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.canImportCell(t)}))},mxGraph.prototype.canImportCell=function(t){return this.importEnabled},mxGraph.prototype.isCellSelectable=function(t){return this.isCellsSelectable()},mxGraph.prototype.isCellsSelectable=function(){return this.cellsSelectable},mxGraph.prototype.setCellsSelectable=function(t){this.cellsSelectable=t},mxGraph.prototype.getDeletableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellDeletable(t)}))},mxGraph.prototype.isCellDeletable=function(t){return t=this.getCurrentCellStyle(t),this.isCellsDeletable()&&0!=t[mxConstants.STYLE_DELETABLE]},mxGraph.prototype.isCellsDeletable=function(){return this.cellsDeletable},mxGraph.prototype.setCellsDeletable=function(t){this.cellsDeletable=t},mxGraph.prototype.isLabelMovable=function(t){return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&this.vertexLabelsMovable)},mxGraph.prototype.isCellRotatable=function(t){return 0!=this.getCurrentCellStyle(t)[mxConstants.STYLE_ROTATABLE]},mxGraph.prototype.getMovableCells=function(t){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellMovable(t)}))},mxGraph.prototype.isCellMovable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsMovable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_MOVABLE]},mxGraph.prototype.isCellsMovable=function(){return this.cellsMovable},mxGraph.prototype.setCellsMovable=function(t){this.cellsMovable=t},mxGraph.prototype.isGridEnabled=function(){return this.gridEnabled},mxGraph.prototype.setGridEnabled=function(t){this.gridEnabled=t},mxGraph.prototype.isPortsEnabled=function(){return this.portsEnabled},mxGraph.prototype.setPortsEnabled=function(t){this.portsEnabled=t},mxGraph.prototype.getGridSize=function(){return this.gridSize},mxGraph.prototype.setGridSize=function(t){this.gridSize=t},mxGraph.prototype.getTolerance=function(){return this.tolerance},mxGraph.prototype.setTolerance=function(t){this.tolerance=t},mxGraph.prototype.isVertexLabelsMovable=function(){return this.vertexLabelsMovable},mxGraph.prototype.setVertexLabelsMovable=function(t){this.vertexLabelsMovable=t},mxGraph.prototype.isEdgeLabelsMovable=function(){return this.edgeLabelsMovable},mxGraph.prototype.setEdgeLabelsMovable=function(t){this.edgeLabelsMovable=t},mxGraph.prototype.isSwimlaneNesting=function(){return this.swimlaneNesting},mxGraph.prototype.setSwimlaneNesting=function(t){this.swimlaneNesting=t},mxGraph.prototype.isSwimlaneSelectionEnabled=function(){return this.swimlaneSelectionEnabled},mxGraph.prototype.setSwimlaneSelectionEnabled=function(t){this.swimlaneSelectionEnabled=t},mxGraph.prototype.isMultigraph=function(){return this.multigraph},mxGraph.prototype.setMultigraph=function(t){this.multigraph=t},mxGraph.prototype.isAllowLoops=function(){return this.allowLoops},mxGraph.prototype.setAllowDanglingEdges=function(t){this.allowDanglingEdges=t},mxGraph.prototype.isAllowDanglingEdges=function(){return this.allowDanglingEdges},mxGraph.prototype.setConnectableEdges=function(t){this.connectableEdges=t},mxGraph.prototype.isConnectableEdges=function(){return this.connectableEdges},mxGraph.prototype.setCloneInvalidEdges=function(t){this.cloneInvalidEdges=t},mxGraph.prototype.isCloneInvalidEdges=function(){return this.cloneInvalidEdges},mxGraph.prototype.setAllowLoops=function(t){this.allowLoops=t},mxGraph.prototype.isDisconnectOnMove=function(){return this.disconnectOnMove},mxGraph.prototype.setDisconnectOnMove=function(t){this.disconnectOnMove=t},mxGraph.prototype.isDropEnabled=function(){return this.dropEnabled},mxGraph.prototype.setDropEnabled=function(t){this.dropEnabled=t},mxGraph.prototype.isSplitEnabled=function(){return this.splitEnabled},mxGraph.prototype.setSplitEnabled=function(t){this.splitEnabled=t},mxGraph.prototype.isCellResizable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsResizable()&&!this.isCellLocked(t)&&"0"!=mxUtils.getValue(e,mxConstants.STYLE_RESIZABLE,"1")},mxGraph.prototype.isCellsResizable=function(){return this.cellsResizable},mxGraph.prototype.setCellsResizable=function(t){this.cellsResizable=t},mxGraph.prototype.isTerminalPointMovable=function(t,e){return!0},mxGraph.prototype.isCellBendable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsBendable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_BENDABLE]},mxGraph.prototype.isCellsBendable=function(){return this.cellsBendable},mxGraph.prototype.setCellsBendable=function(t){this.cellsBendable=t},mxGraph.prototype.isCellEditable=function(t){var e=this.getCurrentCellStyle(t);return this.isCellsEditable()&&!this.isCellLocked(t)&&0!=e[mxConstants.STYLE_EDITABLE]},mxGraph.prototype.isCellsEditable=function(){return this.cellsEditable},mxGraph.prototype.setCellsEditable=function(t){this.cellsEditable=t},mxGraph.prototype.isCellDisconnectable=function(t,e,n){return this.isCellsDisconnectable()&&!this.isCellLocked(t)},mxGraph.prototype.isCellsDisconnectable=function(){return this.cellsDisconnectable},mxGraph.prototype.setCellsDisconnectable=function(t){this.cellsDisconnectable=t},mxGraph.prototype.isValidSource=function(t){return null==t&&this.allowDanglingEdges||null!=t&&(!this.model.isEdge(t)||this.connectableEdges)&&this.isCellConnectable(t)},mxGraph.prototype.isValidTarget=function(t){return this.isValidSource(t)},mxGraph.prototype.isValidConnection=function(t,e){return this.isValidSource(t)&&this.isValidTarget(e)},mxGraph.prototype.setConnectable=function(t){this.connectionHandler.setEnabled(t)},mxGraph.prototype.isConnectable=function(){return this.connectionHandler.isEnabled()},mxGraph.prototype.setTooltips=function(t){this.tooltipHandler.setEnabled(t)},mxGraph.prototype.setPanning=function(t){this.panningHandler.panningEnabled=t},mxGraph.prototype.isEditing=function(t){var e;return null!=this.cellEditor&&(e=this.cellEditor.getEditingCell(),null==t?null!=e:t==e)},mxGraph.prototype.isAutoSizeCell=function(t){return t=this.getCurrentCellStyle(t),this.isAutoSizeCells()||1==t[mxConstants.STYLE_AUTOSIZE]},mxGraph.prototype.isAutoSizeCells=function(){return this.autoSizeCells},mxGraph.prototype.setAutoSizeCells=function(t){this.autoSizeCells=t},mxGraph.prototype.isExtendParent=function(t){return!this.getModel().isEdge(t)&&this.isExtendParents()},mxGraph.prototype.isExtendParents=function(){return this.extendParents},mxGraph.prototype.setExtendParents=function(t){this.extendParents=t},mxGraph.prototype.isExtendParentsOnAdd=function(t){return this.extendParentsOnAdd},mxGraph.prototype.setExtendParentsOnAdd=function(t){this.extendParentsOnAdd=t},mxGraph.prototype.isExtendParentsOnMove=function(){return this.extendParentsOnMove},mxGraph.prototype.setExtendParentsOnMove=function(t){this.extendParentsOnMove=t},mxGraph.prototype.isRecursiveResize=function(t){return this.recursiveResize},mxGraph.prototype.setRecursiveResize=function(t){this.recursiveResize=t},mxGraph.prototype.isConstrainChild=function(t){return this.isConstrainChildren()&&!this.getModel().isEdge(this.getModel().getParent(t))},mxGraph.prototype.isConstrainChildren=function(){return this.constrainChildren},mxGraph.prototype.setConstrainChildren=function(t){this.constrainChildren=t},mxGraph.prototype.isConstrainRelativeChildren=function(){return this.constrainRelativeChildren},mxGraph.prototype.setConstrainRelativeChildren=function(t){this.constrainRelativeChildren=t},mxGraph.prototype.isAllowNegativeCoordinates=function(){return this.allowNegativeCoordinates},mxGraph.prototype.setAllowNegativeCoordinates=function(t){this.allowNegativeCoordinates=t},mxGraph.prototype.getOverlap=function(t){return this.isAllowOverlapParent(t)?this.defaultOverlap:0},mxGraph.prototype.isAllowOverlapParent=function(t){return!1},mxGraph.prototype.getFoldableCells=function(t,e){return this.model.filterCells(t,mxUtils.bind(this,function(t){return this.isCellFoldable(t,e)}))},mxGraph.prototype.isCellFoldable=function(t,e){var n=this.getCurrentCellStyle(t);return 0<this.model.getChildCount(t)&&0!=n[mxConstants.STYLE_FOLDABLE]},mxGraph.prototype.isValidDropTarget=function(t,e,n){return null!=t&&(this.isSplitEnabled()&&this.isSplitTarget(t,e,n)||!this.model.isEdge(t)&&(this.isSwimlane(t)||0<this.model.getChildCount(t)&&!this.isCellCollapsed(t)))},mxGraph.prototype.isSplitTarget=function(t,e,n){return!(!this.model.isEdge(t)||null==e||1!=e.length||!this.isCellConnectable(e[0])||null!=this.getEdgeValidationError(t,this.model.getTerminal(t,!0),e[0])||(n=this.model.getTerminal(t,!0),t=this.model.getTerminal(t,!1),this.model.isAncestor(e[0],n))||this.model.isAncestor(e[0],t))},mxGraph.prototype.getDropTarget=function(t,e,n,i){if(!this.isSwimlaneNesting())for(var l=0;l<t.length;l++)if(this.isSwimlane(t[l]))return null;if((l=mxUtils.convertPoint(this.container,mxEvent.getClientX(e),mxEvent.getClientY(e))).x-=this.panDx,l.y-=this.panDy,l=this.getSwimlaneAt(l.x,l.y),null==n)n=l;else if(null!=l){for(var s=this.model.getParent(l);null!=s&&this.isSwimlane(s)&&s!=n;)s=this.model.getParent(s);s==n&&(n=l)}for(;null!=n&&!this.isValidDropTarget(n,t,e)&&!this.model.isLayer(n);)n=this.model.getParent(n);if(null==i||!i)for(var o=n;null!=o&&mxUtils.indexOf(t,o)<0;)o=this.model.getParent(o);return this.model.isLayer(n)||null!=o?null:n},mxGraph.prototype.getDefaultParent=function(){var t=this.getCurrentRoot();return null==t&&null==(t=this.defaultParent)&&(t=this.model.getRoot(),t=this.model.getChildAt(t,0)),t},mxGraph.prototype.setDefaultParent=function(t){this.defaultParent=t},mxGraph.prototype.getSwimlane=function(t){for(;null!=t&&!this.isSwimlane(t);)t=this.model.getParent(t);return t},mxGraph.prototype.getSwimlaneAt=function(t,e,n){if(null!=(n=null==n&&null==(n=this.getCurrentRoot())?this.model.getRoot():n))for(var i=this.model.getChildCount(n),l=0;l<i;l++){var s=this.model.getChildAt(n,l);if(null!=s){var o=this.getSwimlaneAt(t,e,s);if(null!=o)return o;if(this.isCellVisible(s)&&this.isSwimlane(s)&&(o=this.view.getState(s),this.intersects(o,t,e)))return s}}return null},mxGraph.prototype.getCellAt=function(t,e,n,i,l,s){if(i=null==i||i,l=null==l||l,null!=(n=null==n&&null==(n=this.getCurrentRoot())?this.getModel().getRoot():n))for(var o=this.model.getChildCount(n)-1;0<=o;o--){var r=this.model.getChildAt(n,o),a=this.getCellAt(t,e,r,i,l,s);if(null!=a)return a;if(this.isCellVisible(r)&&(l&&this.model.isEdge(r)||i&&this.model.isVertex(r))&&null!=(a=this.view.getState(r))&&(null==s||!s(a,t,e))&&this.intersects(a,t,e))return r}return null},mxGraph.prototype.intersects=function(t,e,n){if(null!=t){var i=t.absolutePoints;if(null!=i){t=this.tolerance*this.tolerance;for(var l=i[0],s=1;s<i.length;s++){var o=i[s];if(mxUtils.ptSegDistSq(l.x,l.y,o.x,o.y,e,n)<=t)return!0;l=o}}else if(0!=(l=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0))&&(i=Math.cos(-l),l=Math.sin(-l),s=new mxPoint(t.getCenterX(),t.getCenterY()),e=(l=mxUtils.getRotatedPoint(new mxPoint(e,n),i,l,s)).x,n=l.y),mxUtils.contains(t,e,n))return!0}return!1},mxGraph.prototype.hitsSwimlaneContent=function(t,e,n){var i=this.getView().getState(t);if(t=this.getStartSize(t),null!=i){var l=this.getView().getScale();if(e-=i.x,n-=i.y,0<t.width&&0<e&&e>t.width*l||0<t.height&&0<n&&n>t.height*l)return!0}return!1},mxGraph.prototype.getChildVertices=function(t){return this.getChildCells(t,!0,!1)},mxGraph.prototype.getChildEdges=function(t){return this.getChildCells(t,!1,!0)},mxGraph.prototype.getChildCells=function(t,e,n){for(t=null!=t?t:this.getDefaultParent(),t=this.model.getChildCells(t,null!=e&&e,null!=n&&n),e=[],n=0;n<t.length;n++)this.isCellVisible(t[n])&&e.push(t[n]);return e},mxGraph.prototype.getConnections=function(t,e){return this.getEdges(t,e,!0,!0,!1)},mxGraph.prototype.getIncomingEdges=function(t,e){return this.getEdges(t,e,!0,!1,!1)},mxGraph.prototype.getOutgoingEdges=function(t,e){return this.getEdges(t,e,!1,!0,!1)},mxGraph.prototype.getEdges=function(t,e,n,i,l,s){n=null==n||n,i=null==i||i,l=null==l||l,s=null!=s&&s;for(var o=[],r=this.isCellCollapsed(t),a=this.model.getChildCount(t),h=0;h<a;h++){var d=this.model.getChildAt(t,h);!r&&this.isCellVisible(d)||(o=o.concat(this.model.getEdges(d,n,i)))}for(o=o.concat(this.model.getEdges(t,n,i)),r=[],h=0;h<o.length;h++)a=null!=(d=this.view.getState(o[h]))?d.getVisibleTerminal(!0):this.view.getVisibleTerminal(o[h],!0),d=null!=d?d.getVisibleTerminal(!1):this.view.getVisibleTerminal(o[h],!1),(l&&a==d||a!=d&&(n&&d==t&&(null==e||this.isValidAncestor(a,e,s))||i&&a==t&&(null==e||this.isValidAncestor(d,e,s))))&&r.push(o[h]);return r},mxGraph.prototype.isValidAncestor=function(t,e,n){return n?this.model.isAncestor(e,t):this.model.getParent(t)==e},mxGraph.prototype.getOpposites=function(t,e,n,i){n=null==n||n,i=null==i||i;var l=[],s=new mxDictionary;if(null!=t)for(var o=0;o<t.length;o++){var r=null!=(a=this.view.getState(t[o]))?a.getVisibleTerminal(!0):this.view.getVisibleTerminal(t[o],!0),a=null!=a?a.getVisibleTerminal(!1):this.view.getVisibleTerminal(t[o],!1);r==e&&null!=a&&a!=e&&i?s.get(a)||(s.put(a,!0),l.push(a)):a==e&&null!=r&&r!=e&&n&&!s.get(r)&&(s.put(r,!0),l.push(r))}return l},mxGraph.prototype.getEdgesBetween=function(t,e,n){n=null!=n&&n;for(var i=this.getEdges(t),l=[],s=0;s<i.length;s++){var o=null!=(r=this.view.getState(i[s]))?r.getVisibleTerminal(!0):this.view.getVisibleTerminal(i[s],!0),r=null!=r?r.getVisibleTerminal(!1):this.view.getVisibleTerminal(i[s],!1);(o==t&&r==e||!n&&o==e&&r==t)&&l.push(i[s])}return l},mxGraph.prototype.getPointForEvent=function(t,e){var t=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),n=this.view.scale,i=this.view.translate,e=0!=e?this.gridSize/2:0;return t.x=this.snap(t.x/n-i.x-e),t.y=this.snap(t.y/n-i.y-e),t},mxGraph.prototype.getCells=function(t,e,n,i,l,s,o,r,a){if(s=null!=s?s:[],0<n||0<i||null!=o){var h=this.getModel(),d=t+n,u=e+i;if(null!=(l=null==l&&null==(l=this.getCurrentRoot())?h.getRoot():l))for(var p=h.getChildCount(l),c=0;c<p;c++){var m,g=h.getChildAt(l,c),x=this.view.getState(g);null==x||!this.isCellVisible(g)||null!=r&&r(x)||(0!=(m=mxUtils.getValue(x.style,mxConstants.STYLE_ROTATION)||0)&&(x=mxUtils.getBoundingBox(x,m)),(m=null!=o&&h.isVertex(g)&&mxUtils.intersects(o,x)||null==o&&(h.isEdge(g)||h.isVertex(g))&&x.x>=t&&x.y+x.height<=u&&x.y>=e&&x.x+x.width<=d)&&s.push(g),m&&!a)||this.getCells(t,e,n,i,g,s,o,r,a)}}return s},mxGraph.prototype.getCellsBeyond=function(t,e,n,i,l){var s=[];if((i||l)&&null!=(n=null==n?this.getDefaultParent():n))for(var o=this.model.getChildCount(n),r=0;r<o;r++){var a=this.model.getChildAt(n,r),h=this.view.getState(a);this.isCellVisible(a)&&null!=h&&(!i||h.x>=t)&&(!l||h.y>=e)&&s.push(a)}return s},mxGraph.prototype.findTreeRoots=function(t,e,n){e=null!=e&&e,n=null!=n&&n;var i=[];if(null!=t){for(var l=this.getModel(),s=l.getChildCount(t),o=null,r=0,a=0;a<s;a++){var h=l.getChildAt(t,a);if(this.model.isVertex(h)&&this.isCellVisible(h)){for(var d=this.getConnections(h,e?t:null),u=0,p=0,c=0;c<d.length;c++)this.view.getVisibleTerminal(d[c],!0)==h?u++:p++;(n&&0==u&&0<p||!n&&0==p&&0<u)&&i.push(h),r<(d=n?p-u:u-p)&&(r=d,o=h)}}0==i.length&&null!=o&&i.push(o)}return i},mxGraph.prototype.traverse=function(t,e,n,i,l,s){if(null!=n&&null!=t&&(e=null==e||e,s=null!=s&&s,l=l||new mxDictionary,null==i||!l.get(i))&&(l.put(i,!0),null==(i=n(t,i))||i)&&0<(i=this.model.getEdgeCount(t)))for(var o=0;o<i;o++){var r=this.model.getEdgeAt(t,o),a=this.model.getTerminal(r,!0)==t;e&&!s!=a||(a=this.model.getTerminal(r,!a),this.traverse(a,e,n,r,l,s))}},mxGraph.prototype.isCellSelected=function(t){return this.getSelectionModel().isSelected(t)},mxGraph.prototype.isSelectionEmpty=function(){return this.getSelectionModel().isEmpty()},mxGraph.prototype.clearSelection=function(){return this.getSelectionModel().clear()},mxGraph.prototype.getSelectionCount=function(){return this.getSelectionModel().cells.length},mxGraph.prototype.getSelectionCell=function(){return this.getSelectionModel().cells[0]},mxGraph.prototype.getSelectionCells=function(){return this.getSelectionModel().cells.slice()},mxGraph.prototype.setSelectionCell=function(t){this.getSelectionModel().setCell(t)},mxGraph.prototype.setSelectionCells=function(t){this.getSelectionModel().setCells(t)},mxGraph.prototype.addSelectionCell=function(t){this.getSelectionModel().addCell(t)},mxGraph.prototype.addSelectionCells=function(t){this.getSelectionModel().addCells(t)},mxGraph.prototype.removeSelectionCell=function(t){this.getSelectionModel().removeCell(t)},mxGraph.prototype.removeSelectionCells=function(t){this.getSelectionModel().removeCells(t)},mxGraph.prototype.selectRegion=function(t,e){t=this.getCells(t.x,t.y,t.width,t.height);return this.selectCellsForEvent(t,e),t},mxGraph.prototype.selectNextCell=function(){this.selectCell(!0)},mxGraph.prototype.selectPreviousCell=function(){this.selectCell()},mxGraph.prototype.selectParentCell=function(){this.selectCell(!1,!0)},mxGraph.prototype.selectChildCell=function(){this.selectCell(!1,!1,!0)},mxGraph.prototype.selectCell=function(t,e,n){var i=0<(l=this.selectionModel).cells.length?l.cells[0]:null,l=(1<l.cells.length&&l.clear(),null!=i?this.model.getParent(i):this.getDefaultParent()),s=this.model.getChildCount(l);null==i&&0<s?(t=this.model.getChildAt(l,0),this.setSelectionCell(t)):null!=i&&!e||null==this.view.getState(l)||null==this.model.getGeometry(l)?null!=i&&n?0<this.model.getChildCount(i)&&(t=this.model.getChildAt(i,0),this.setSelectionCell(t)):0<s&&(e=l.getIndex(i),t=t?this.model.getChildAt(l,++e%s):this.model.getChildAt(l,--e<0?s-1:e),this.setSelectionCell(t)):this.getCurrentRoot()!=l&&this.setSelectionCell(l)},mxGraph.prototype.selectAll=function(e,t){e=e||this.getDefaultParent();t=t?this.model.filterDescendants(mxUtils.bind(this,function(t){return t!=e&&null!=this.view.getState(t)}),e):this.model.getChildren(e);null!=t&&this.setSelectionCells(t)},mxGraph.prototype.selectVertices=function(t,e){this.selectCells(!0,!1,t,e)},mxGraph.prototype.selectEdges=function(t){this.selectCells(!1,!0,t)},mxGraph.prototype.selectCells=function(e,n,t,i){t=t||this.getDefaultParent();var l=mxUtils.bind(this,function(t){return null!=this.view.getState(t)&&((i||0==this.model.getChildCount(t))&&this.model.isVertex(t)&&e&&!this.model.isEdge(this.model.getParent(t))||this.model.isEdge(t)&&n)});null!=(t=this.model.filterDescendants(l,t))&&this.setSelectionCells(t)},mxGraph.prototype.selectCellForEvent=function(t,e){var n=this.isCellSelected(t);this.isToggleEvent(e)?n?this.removeSelectionCell(t):this.addSelectionCell(t):n&&1==this.getSelectionCount()||this.setSelectionCell(t)},mxGraph.prototype.selectCellsForEvent=function(t,e){this.isToggleEvent(e)?this.addSelectionCells(t):this.setSelectionCells(t)},mxGraph.prototype.createHandler=function(t){var e,n,i=null;return i=null!=t?this.model.isEdge(t.cell)?(i=t.getVisibleTerminalState(!0),e=t.getVisibleTerminalState(!1),n=this.getCellGeometry(t.cell),i=this.view.getEdgeStyle(t,null!=n?n.points:null,i,e),this.createEdgeHandler(t,i)):this.createVertexHandler(t):i},mxGraph.prototype.createVertexHandler=function(t){return new mxVertexHandler(t)},mxGraph.prototype.createEdgeHandler=function(t,e){return e==mxEdgeStyle.Loop||e==mxEdgeStyle.ElbowConnector||e==mxEdgeStyle.SideToSide||e==mxEdgeStyle.TopToBottom?this.createElbowEdgeHandler(t):e==mxEdgeStyle.SegmentConnector||e==mxEdgeStyle.OrthConnector?this.createEdgeSegmentHandler(t):new mxEdgeHandler(t)},mxGraph.prototype.createEdgeSegmentHandler=function(t){return new mxEdgeSegmentHandler(t)},mxGraph.prototype.createElbowEdgeHandler=function(t){return new mxElbowEdgeHandler(t)},mxGraph.prototype.addMouseListener=function(t){null==this.mouseListeners&&(this.mouseListeners=[]),this.mouseListeners.push(t)},mxGraph.prototype.removeMouseListener=function(t){if(null!=this.mouseListeners)for(var e=0;e<this.mouseListeners.length;e++)if(this.mouseListeners[e]==t){this.mouseListeners.splice(e,1);break}},mxGraph.prototype.updateMouseEvent=function(t,e){var n;return null!=t.graphX&&null!=t.graphY||(n=mxUtils.convertPoint(this.container,t.getX(),t.getY()),t.graphX=n.x-this.panDx,t.graphY=n.y-this.panDy,null==t.getCell()&&this.isMouseDown&&e==mxEvent.MOUSE_MOVE&&(t.state=this.view.getState(this.getCellAt(n.x,n.y,null,null,null,function(t){return null==t.shape||t.shape.paintBackground!=mxRectangleShape.prototype.paintBackground||"1"==mxUtils.getValue(t.style,mxConstants.STYLE_POINTER_EVENTS,"1")||null!=t.shape.fill&&t.shape.fill!=mxConstants.NONE})))),t},mxGraph.prototype.getStateForTouchEvent=function(t){var e=mxEvent.getClientX(t);return t=mxEvent.getClientY(t),e=mxUtils.convertPoint(this.container,e,t),this.view.getState(this.getCellAt(e.x,e.y))},mxGraph.prototype.isEventIgnored=function(t,e,n){var i=mxEvent.isMouseEvent(e.getEvent()),l=!1;return e.getEvent()==this.lastEvent?l=!0:this.lastEvent=e.getEvent(),null!=this.eventSource&&t!=mxEvent.MOUSE_MOVE?(mxEvent.removeGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect),this.eventSource=this.mouseUpRedirect=this.mouseMoveRedirect=null):mxClient.IS_GC||null==this.eventSource||e.getSource()==this.eventSource?!mxClient.IS_TOUCH||t!=mxEvent.MOUSE_DOWN||i||mxEvent.isPenEvent(e.getEvent())||(this.eventSource=e.getSource(),this.mouseMoveRedirect=mxUtils.bind(this,function(t){this.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t,this.getStateForTouchEvent(t)))}),this.mouseUpRedirect=mxUtils.bind(this,function(t){this.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t,this.getStateForTouchEvent(t)))}),mxEvent.addGestureListeners(this.eventSource,null,this.mouseMoveRedirect,this.mouseUpRedirect)):l=!0,this.isSyntheticEventIgnored(t,e,n)&&(l=!0),!mxEvent.isPopupTrigger(this.lastEvent)&&t!=mxEvent.MOUSE_MOVE&&2==this.lastEvent.detail||(t==mxEvent.MOUSE_UP&&this.isMouseDown?this.isMouseDown=!1:t!=mxEvent.MOUSE_DOWN||this.isMouseDown?!l&&((!mxClient.IS_FF||t!=mxEvent.MOUSE_MOVE)&&this.isMouseDown&&this.isMouseTrigger!=i||t==mxEvent.MOUSE_DOWN&&this.isMouseDown||t==mxEvent.MOUSE_UP&&!this.isMouseDown)&&(l=!0):(this.isMouseDown=!0,this.isMouseTrigger=i),l||t!=mxEvent.MOUSE_DOWN||(this.lastMouseX=e.getX(),this.lastMouseY=e.getY()),l)},mxGraph.prototype.isSyntheticEventIgnored=function(t,e,n){return n=!1,e=mxEvent.isMouseEvent(e.getEvent()),this.ignoreMouseEvents&&e&&t!=mxEvent.MOUSE_MOVE?(this.ignoreMouseEvents=t!=mxEvent.MOUSE_UP,n=!0):mxClient.IS_FF&&!e&&t==mxEvent.MOUSE_UP&&(this.ignoreMouseEvents=!0),n},mxGraph.prototype.isEventSourceIgnored=function(t,e){var n=e.getSource(),i=null!=n.nodeName?n.nodeName.toLowerCase():"",e=!mxEvent.isMouseEvent(e.getEvent())||mxEvent.isLeftMouseButton(e.getEvent());return t==mxEvent.MOUSE_DOWN&&e&&("select"==i||"option"==i||"input"==i&&"checkbox"!=n.type&&"radio"!=n.type&&"button"!=n.type&&"submit"!=n.type&&"file"!=n.type)},mxGraph.prototype.getEventState=function(t){return t},mxGraph.prototype.fireMouseEvent=function(t,e,n){if(this.isEventSourceIgnored(t,e))null!=this.tooltipHandler&&this.tooltipHandler.hide();else{if(null==n&&(n=this),e=this.updateMouseEvent(e,t),!this.nativeDblClickEnabled&&!mxEvent.isPopupTrigger(e.getEvent())||this.doubleTapEnabled&&mxClient.IS_TOUCH&&(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))){var i=(new Date).getTime();if(t==mxEvent.MOUSE_DOWN)if(null!=this.lastTouchEvent&&this.lastTouchEvent!=e.getEvent()&&i-this.lastTouchTime<this.doubleTapTimeout&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance&&this.doubleClickCounter<2){if(this.doubleClickCounter++,i=!1,t==mxEvent.MOUSE_UP?e.getCell()==this.lastTouchCell&&null!=this.lastTouchCell&&(this.lastTouchTime=0,i=this.lastTouchCell,this.lastTouchCell=null,this.dblClick(e.getEvent(),i),i=!0):(this.fireDoubleClick=!0,this.lastTouchTime=0),i)return void mxEvent.consume(e.getEvent())}else null!=this.lastTouchEvent&&this.lastTouchEvent==e.getEvent()||(this.lastTouchCell=e.getCell(),this.lastTouchX=e.getX(),this.lastTouchY=e.getY(),this.lastTouchTime=i,this.lastTouchEvent=e.getEvent(),this.doubleClickCounter=0);else if((this.isMouseDown||t==mxEvent.MOUSE_UP)&&this.fireDoubleClick)return this.fireDoubleClick=!1,i=this.lastTouchCell,this.lastTouchCell=null,this.isMouseDown=!1,void((null!=i||(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))&&(mxClient.IS_GC||mxClient.IS_SF))&&Math.abs(this.lastTouchX-e.getX())<this.doubleTapTolerance&&Math.abs(this.lastTouchY-e.getY())<this.doubleTapTolerance?this.dblClick(e.getEvent(),i):mxEvent.consume(e.getEvent()))}if(!this.isEventIgnored(t,e,n)){if(e.state=this.getEventState(e.getState()),this.fireEvent(new mxEventObject(mxEvent.FIRE_MOUSE_EVENT,"eventName",t,"event",e)),mxClient.IS_OP||mxClient.IS_SF||mxClient.IS_GC||mxClient.IS_IE11||mxClient.IS_IE&&mxClient.IS_SVG||e.getEvent().target!=this.container){var l;if(t==mxEvent.MOUSE_MOVE&&this.isMouseDown&&this.autoScroll&&!mxEvent.isMultiTouchEvent(e.getEvent)?this.scrollPointToVisible(e.getGraphX(),e.getGraphY(),this.autoExtend):t==mxEvent.MOUSE_UP&&this.ignoreScrollbars&&this.translateToScrollPosition&&(0!=this.container.scrollLeft||0!=this.container.scrollTop)&&(i=this.view.scale,l=this.view.translate,this.view.setTranslate(l.x-this.container.scrollLeft/i,l.y-this.container.scrollTop/i),this.container.scrollLeft=0,this.container.scrollTop=0),null!=this.mouseListeners)for(i=[n,e],e.getEvent().preventDefault||(e.getEvent().returnValue=!0),l=0;l<this.mouseListeners.length;l++){var s=this.mouseListeners[l];t==mxEvent.MOUSE_DOWN?s.mouseDown.apply(s,i):t==mxEvent.MOUSE_MOVE?s.mouseMove.apply(s,i):t==mxEvent.MOUSE_UP&&s.mouseUp.apply(s,i)}t==mxEvent.MOUSE_UP&&this.click(e)}(mxEvent.isTouchEvent(e.getEvent())||mxEvent.isPenEvent(e.getEvent()))&&t==mxEvent.MOUSE_DOWN&&this.tapAndHoldEnabled&&!this.tapAndHoldInProgress?(this.tapAndHoldInProgress=!0,this.initialTouchX=e.getGraphX(),this.initialTouchY=e.getGraphY(),this.tapAndHoldThread&&window.clearTimeout(this.tapAndHoldThread),this.tapAndHoldThread=window.setTimeout(mxUtils.bind(this,function(){this.tapAndHoldValid&&this.tapAndHold(e),this.tapAndHoldValid=this.tapAndHoldInProgress=!1}),this.tapAndHoldDelay),this.tapAndHoldValid=!0):t==mxEvent.MOUSE_UP?this.tapAndHoldValid=this.tapAndHoldInProgress=!1:this.tapAndHoldValid&&(this.tapAndHoldValid=Math.abs(this.initialTouchX-e.getGraphX())<this.tolerance&&Math.abs(this.initialTouchY-e.getGraphY())<this.tolerance),t==mxEvent.MOUSE_DOWN&&this.isEditing()&&!this.cellEditor.isEventSource(e.getEvent())&&this.stopEditing(!this.isInvokesStopCellEditing()),this.consumeMouseEvent(t,e,n)}}},mxGraph.prototype.consumeMouseEvent=function(t,e,n){t==mxEvent.MOUSE_DOWN&&mxEvent.isTouchEvent(e.getEvent())&&e.consume(!1)},mxGraph.prototype.fireGestureEvent=function(t,e){this.lastTouchTime=0,this.fireEvent(new mxEventObject(mxEvent.GESTURE,"event",t,"cell",e))},mxGraph.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,null!=this.tooltipHandler&&this.tooltipHandler.destroy(),null!=this.selectionCellsHandler&&this.selectionCellsHandler.destroy(),null!=this.panningHandler&&this.panningHandler.destroy(),null!=this.popupMenuHandler&&this.popupMenuHandler.destroy(),null!=this.connectionHandler&&this.connectionHandler.destroy(),null!=this.graphHandler&&this.graphHandler.destroy(),null!=this.cellEditor&&this.cellEditor.destroy(),null!=this.view&&this.view.destroy(),null!=this.model&&null!=this.graphModelChangeListener&&(this.model.removeListener(this.graphModelChangeListener),this.graphModelChangeListener=null),this.container=null)},mxCellOverlay.prototype=new mxEventSource,mxCellOverlay.prototype.constructor=mxCellOverlay,mxCellOverlay.prototype.image=null,mxCellOverlay.prototype.tooltip=null,mxCellOverlay.prototype.align=mxConstants.ALIGN_RIGHT,mxCellOverlay.prototype.verticalAlign=mxConstants.ALIGN_BOTTOM,mxCellOverlay.prototype.offset=null,mxCellOverlay.prototype.cursor=null,mxCellOverlay.prototype.defaultOverlap=.5,mxCellOverlay.prototype.getBounds=function(t){var e,n=t.view.graph.getModel().isEdge(t.cell),i=t.view.scale,l=this.image.width,s=this.image.height;return n?n=1==(n=t.absolutePoints).length%2?n[Math.floor(n.length/2)]:(t=n[(e=n.length/2)-1],n=n[e],new mxPoint(t.x+(n.x-t.x)/2,t.y+(n.y-t.y)/2)):((n=new mxPoint).x=this.align==mxConstants.ALIGN_LEFT?t.x:this.align==mxConstants.ALIGN_CENTER?t.x+t.width/2:t.x+t.width,n.y=this.verticalAlign==mxConstants.ALIGN_TOP?t.y:this.verticalAlign==mxConstants.ALIGN_MIDDLE?t.y+t.height/2:t.y+t.height),new mxRectangle(Math.round(n.x-(l*this.defaultOverlap-this.offset.x)*i),Math.round(n.y-(s*this.defaultOverlap-this.offset.y)*i),l*i,s*i)},mxCellOverlay.prototype.toString=function(){return this.tooltip},mxOutline.prototype.source=null,mxOutline.prototype.outline=null,mxOutline.prototype.graphRenderHint=mxConstants.RENDERING_HINT_FASTER,mxOutline.prototype.enabled=!0,mxOutline.prototype.showViewport=!0,mxOutline.prototype.border=10,mxOutline.prototype.sizerSize=8,mxOutline.prototype.labelsVisible=!1,mxOutline.prototype.updateOnPan=!1,mxOutline.prototype.sizerImage=null,mxOutline.prototype.minScale=1e-4,mxOutline.prototype.suspended=!1,mxOutline.prototype.createGraph=function(t){return(t=new mxGraph(t,this.source.getModel(),this.graphRenderHint,this.source.getStylesheet())).foldingEnabled=!1,t.autoScroll=!1,t},mxOutline.prototype.init=function(t){this.outline=this.createGraph(t);var e=this.outline.graphModelChanged;this.outline.graphModelChanged=mxUtils.bind(this,function(t){this.suspended||null==this.outline||e.apply(this.outline,arguments)}),mxClient.IS_SVG&&((t=this.outline.getView().getCanvas().parentNode).setAttribute("shape-rendering","optimizeSpeed"),t.setAttribute("image-rendering","optimizeSpeed")),this.outline.labelsVisible=this.labelsVisible,this.outline.setEnabled(!1),this.updateHandler=mxUtils.bind(this,function(t,e){this.suspended||this.active||this.update()}),this.source.getModel().addListener(mxEvent.CHANGE,this.updateHandler),this.outline.addMouseListener(this),(t=this.source.getView()).addListener(mxEvent.SCALE,this.updateHandler),t.addListener(mxEvent.TRANSLATE,this.updateHandler),t.addListener(mxEvent.SCALE_AND_TRANSLATE,this.updateHandler),t.addListener(mxEvent.DOWN,this.updateHandler),t.addListener(mxEvent.UP,this.updateHandler),mxEvent.addListener(this.source.container,"scroll",this.updateHandler),this.panHandler=mxUtils.bind(this,function(t){this.updateOnPan&&this.updateHandler.apply(this,arguments)}),this.source.addListener(mxEvent.PAN,this.panHandler),this.refreshHandler=mxUtils.bind(this,function(t){this.outline.setStylesheet(this.source.getStylesheet()),this.outline.refresh()}),this.source.addListener(mxEvent.REFRESH,this.refreshHandler),this.bounds=new mxRectangle(0,0,0,0),this.selectionBorder=new mxRectangleShape(this.bounds,null,mxConstants.OUTLINE_COLOR,mxConstants.OUTLINE_STROKEWIDTH),this.selectionBorder.dialect=this.outline.dialect,this.selectionBorder.init(this.outline.getView().getOverlayPane()),t=mxUtils.bind(this,function(t){var e=mxEvent.getSource(t),n=mxUtils.bind(this,function(t){this.outline.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),i=mxUtils.bind(this,function(t){mxEvent.removeGestureListeners(e,null,n,i),this.outline.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))});mxEvent.addGestureListeners(e,null,n,i),this.outline.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxEvent.addGestureListeners(this.selectionBorder.node,t),this.sizer=this.createSizer(),this.sizer.init(this.outline.getView().getOverlayPane()),this.enabled&&(this.sizer.node.style.cursor="nwse-resize"),mxEvent.addGestureListeners(this.sizer.node,t),this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,this.selectionBorder.node.style.cursor="move",this.update(!1)},mxOutline.prototype.isEnabled=function(){return this.enabled},mxOutline.prototype.setEnabled=function(t){this.enabled=t},mxOutline.prototype.setZoomEnabled=function(t){this.sizer.node.style.visibility=t?"visible":"hidden"},mxOutline.prototype.refresh=function(){this.update(!0)},mxOutline.prototype.createSizer=function(){var t=null!=this.sizerImage?new mxImageShape(new mxRectangle(0,0,this.sizerImage.width,this.sizerImage.height),this.sizerImage.src):new mxRectangleShape(new mxRectangle(0,0,this.sizerSize,this.sizerSize),mxConstants.OUTLINE_HANDLE_FILLCOLOR,mxConstants.OUTLINE_HANDLE_STROKECOLOR);return t.dialect=this.outline.dialect,t},mxOutline.prototype.getSourceContainerSize=function(){return new mxRectangle(0,0,this.source.container.scrollWidth,this.source.container.scrollHeight)},mxOutline.prototype.getOutlineOffset=function(t){return null},mxOutline.prototype.getSourceGraphBounds=function(){return this.source.getGraphBounds()},mxOutline.prototype.update=function(t){var e,n,i,l,s,o,r;null!=this.source&&null!=this.source.container&&null!=this.outline&&null!=this.outline.container&&(e=this.source.view.scale,i=new mxRectangle((i=this.getSourceGraphBounds()).x/e+this.source.panDx,i.y/e+this.source.panDy,i.width/e,i.height/e),l=new mxRectangle(0,0,this.source.container.clientWidth/e,this.source.container.clientHeight/e),(n=i.clone()).add(l),l=this.getSourceContainerSize(),e=Math.min(Math.max(0,this.outline.container.clientWidth-this.border)/Math.max(l.width/e,n.width),Math.max(0,this.outline.container.clientHeight-this.border)/Math.max(l.height/e,n.height)),0<(l=isNaN(e)?this.minScale:Math.max(this.minScale,e)))&&(this.outline.getView().scale!=l&&(this.outline.getView().scale=l,t=!0),(e=this.outline.getView()).currentRoot!=this.source.getView().currentRoot&&e.setCurrentRoot(this.source.getView().currentRoot),s=(n=this.source.view.translate).x+this.source.panDx,o=n.y+this.source.panDy,null!=(l=this.getOutlineOffset(l))&&(s+=l.x,o+=l.y),i.x<0&&(s-=i.x),i.y<0&&(o-=i.y),e.translate.x==s&&e.translate.y==o||(e.translate.x=s,e.translate.y=o,t=!0),i=e.translate,s=(l=this.source.getView().scale)/e.scale,o=1/e.scale,r=this.source.container,this.bounds=new mxRectangle((i.x-n.x-this.source.panDx)/o,(i.y-n.y-this.source.panDy)/o,r.clientWidth/s,r.clientHeight/s),this.bounds.x+=this.source.container.scrollLeft*e.scale/l,this.bounds.y+=this.source.container.scrollTop*e.scale/l,(i=this.selectionBorder.bounds).x==this.bounds.x&&i.y==this.bounds.y&&i.width==this.bounds.width&&i.height==this.bounds.height||(this.selectionBorder.bounds=this.bounds,this.selectionBorder.redraw()),i=this.sizer.bounds,e=new mxRectangle(this.bounds.x+this.bounds.width-i.width/2,this.bounds.y+this.bounds.height-i.height/2,i.width,i.height),i.x==e.x&&i.y==e.y&&i.width==e.width&&i.height==e.height||(this.sizer.bounds=e,"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw()),t)&&this.outline.view.revalidate()},mxOutline.prototype.mouseDown=function(t,e){var n;this.enabled&&this.showViewport&&(n=mxEvent.isMouseEvent(e.getEvent())?0:this.source.tolerance,n=this.source.allowHandleBoundsCheck&&(mxClient.IS_IE||0<n)?new mxRectangle(e.getGraphX()-n,e.getGraphY()-n,2*n,2*n):null,this.zoom=e.isSource(this.sizer)||null!=n&&mxUtils.intersects(shape.bounds,n),this.startX=e.getX(),this.startY=e.getY(),this.active=!0,this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)?(this.dx0=this.source.container.scrollLeft,this.dy0=this.source.container.scrollTop):this.dy0=this.dx0=0),e.consume()},mxOutline.prototype.mouseMove=function(t,e){var n,i,l,s;this.active&&(this.selectionBorder.node.style.display=this.showViewport?"":"none",this.sizer.node.style.display=this.selectionBorder.node.style.display,n=(s=this.getTranslateForEvent(e)).x,i=s.y,this.zoom?(i=n/((s=this.source.container).clientWidth/s.clientHeight),s=new mxRectangle(this.bounds.x,this.bounds.y,Math.max(1,this.bounds.width+n),Math.max(1,this.bounds.height+i)),this.selectionBorder.bounds=s,this.selectionBorder.redraw()):(l=this.outline.getView().scale,s=new mxRectangle(this.bounds.x+n,this.bounds.y+i,this.bounds.width,this.bounds.height),this.selectionBorder.bounds=s,this.selectionBorder.redraw(),n=n/l*this.source.getView().scale,i=i/l*this.source.getView().scale,this.source.panGraph(-n-this.dx0,-i-this.dy0)),n=this.sizer.bounds,this.sizer.bounds=new mxRectangle(s.x+s.width-n.width/2,s.y+s.height-n.height/2,n.width,n.height),"hidden"!=this.sizer.node.style.visibility&&this.sizer.redraw(),e.consume())},mxOutline.prototype.getTranslateForEvent=function(t){return new mxPoint(t.getX()-this.startX,t.getY()-this.startY)},mxOutline.prototype.mouseUp=function(t,e){var n,i,l;this.active&&(n=(i=this.getTranslateForEvent(e)).x,i=i.y,(0<Math.abs(n)||0<Math.abs(i))&&(this.zoom?(i=this.selectionBorder.bounds.width,l=this.source.getView().scale,this.source.zoomTo(Math.max(this.minScale,l-n*l/i),!1)):this.source.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.source.container)||(this.source.panGraph(0,0),n/=this.outline.getView().scale,i/=this.outline.getView().scale,l=this.source.getView().translate,this.source.getView().setTranslate(l.x-n,l.y-i)),this.update(),e.consume()),this.index=null,this.active=!1)},mxOutline.prototype.destroy=function(){null!=this.source&&(this.source.removeListener(this.panHandler),this.source.removeListener(this.refreshHandler),this.source.getModel().removeListener(this.updateHandler),this.source.getView().removeListener(this.updateHandler),mxEvent.removeListener(this.source.container,"scroll",this.updateHandler),this.source=null),null!=this.outline&&(this.outline.removeMouseListener(this),this.outline.destroy(),this.outline=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),null!=this.sizer&&(this.sizer.destroy(),this.sizer=null)},mxMultiplicity.prototype.type=null,mxMultiplicity.prototype.attr=null,mxMultiplicity.prototype.value=null,mxMultiplicity.prototype.source=null,mxMultiplicity.prototype.min=null,mxMultiplicity.prototype.max=null,mxMultiplicity.prototype.validNeighbors=null,mxMultiplicity.prototype.validNeighborsAllowed=!0,mxMultiplicity.prototype.countError=null,mxMultiplicity.prototype.typeError=null,mxMultiplicity.prototype.check=function(t,e,n,i,l,s){var o="";return(this.source&&this.checkTerminal(t,n,e)||!this.source&&this.checkTerminal(t,i,e))&&(null!=this.countError&&(this.source&&(0==this.max||l>=this.max)||!this.source&&(0==this.max||s>=this.max))&&(o+=this.countError+"\n"),null!=this.validNeighbors)&&null!=this.typeError&&0<this.validNeighbors.length&&(this.checkNeighbors(t,e,n,i)||(o+=this.typeError+"\n")),0<o.length?o:null},mxMultiplicity.prototype.checkNeighbors=function(t,e,n,i){e=t.model.getValue(n),i=t.model.getValue(i),n=!this.validNeighborsAllowed;for(var l=this.validNeighbors,s=0;s<l.length;s++){if(this.source&&this.checkType(t,i,l[s])){n=this.validNeighborsAllowed;break}if(!this.source&&this.checkType(t,e,l[s])){n=this.validNeighborsAllowed;break}}return n},mxMultiplicity.prototype.checkTerminal=function(t,e,n){return e=t.model.getValue(e),this.checkType(t,e,this.type,this.attr,this.value)},mxMultiplicity.prototype.checkType=function(t,e,n,i,l){return null!=e&&(isNaN(e.nodeType)?e==n:mxUtils.isNode(e,n,i,l))},mxLayoutManager.prototype=new mxEventSource,mxLayoutManager.prototype.constructor=mxLayoutManager,mxLayoutManager.prototype.graph=null,mxLayoutManager.prototype.bubbling=!0,mxLayoutManager.prototype.enabled=!0,mxLayoutManager.prototype.undoHandler=null,mxLayoutManager.prototype.moveHandler=null,mxLayoutManager.prototype.resizeHandler=null,mxLayoutManager.prototype.isEnabled=function(){return this.enabled},mxLayoutManager.prototype.setEnabled=function(t){this.enabled=t},mxLayoutManager.prototype.isBubbling=function(){return this.bubbling},mxLayoutManager.prototype.setBubbling=function(t){this.bubbling=t},mxLayoutManager.prototype.getGraph=function(){return this.graph},mxLayoutManager.prototype.setGraph=function(t){null!=this.graph&&(this.graph.getModel().removeListener(this.undoHandler),this.graph.removeListener(this.moveHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,null!=this.graph&&(this.graph.getModel().addListener(mxEvent.BEFORE_UNDO,this.undoHandler),this.graph.addListener(mxEvent.MOVE_CELLS,this.moveHandler),this.graph.addListener(mxEvent.RESIZE_CELLS,this.resizeHandler))},mxLayoutManager.prototype.hasLayout=function(t){return this.getLayout(t,mxEvent.LAYOUT_CELLS)},mxLayoutManager.prototype.getLayout=function(t,e){return null},mxLayoutManager.prototype.beforeUndo=function(t){this.executeLayoutForCells(this.getCellsForChanges(t.changes))},mxLayoutManager.prototype.cellsMoved=function(t,e){if(null!=t&&null!=e)for(var n=mxUtils.convertPoint(this.getGraph().container,mxEvent.getClientX(e),mxEvent.getClientY(e)),i=this.getGraph().getModel(),l=0;l<t.length;l++){var s=this.getLayout(i.getParent(t[l]),mxEvent.MOVE_CELLS);null!=s&&s.moveCell(t[l],n.x,n.y)}},mxLayoutManager.prototype.cellsResized=function(t,e,n){if(null!=t&&null!=e)for(var i=this.getGraph().getModel(),l=0;l<t.length;l++){var s=this.getLayout(i.getParent(t[l]),mxEvent.RESIZE_CELLS);null!=s&&s.resizeCell(t[l],e[l],n[l])}},mxLayoutManager.prototype.getCellsForChanges=function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(i instanceof mxRootChange)return[];e=e.concat(this.getCellsForChange(i))}return e},mxLayoutManager.prototype.getCellsForChange=function(t){return t instanceof mxChildChange?this.addCellsWithLayout(t.child,this.addCellsWithLayout(t.previous)):t instanceof mxTerminalChange||t instanceof mxGeometryChange||t instanceof mxVisibleChange||t instanceof mxStyleChange?this.addCellsWithLayout(t.cell):[]},mxLayoutManager.prototype.addCellsWithLayout=function(t,e){return this.addDescendantsWithLayout(t,this.addAncestorsWithLayout(t,e))},mxLayoutManager.prototype.addAncestorsWithLayout=function(t,e){var n;return e=null!=e?e:[],null!=t&&(null!=this.hasLayout(t)&&e.push(t),this.isBubbling())&&(n=this.getGraph().getModel(),this.addAncestorsWithLayout(n.getParent(t),e)),e},mxLayoutManager.prototype.addDescendantsWithLayout=function(t,e){if(e=null!=e?e:[],null!=t&&this.hasLayout(t))for(var n=this.getGraph().getModel(),i=0;i<n.getChildCount(t);i++){var l=n.getChildAt(t,i);this.hasLayout(l)&&(e.push(l),this.addDescendantsWithLayout(l,e))}return e},mxLayoutManager.prototype.executeLayoutForCells=function(t){t=mxUtils.sortCells(t,!1),this.layoutCells(t,!0),this.layoutCells(t.reverse(),!1)},mxLayoutManager.prototype.layoutCells=function(t,e){if(0<t.length){var n=this.getGraph().getModel();n.beginUpdate();try{for(var i=null,l=0;l<t.length;l++)t[l]!=n.getRoot()&&t[l]!=i&&(this.executeLayout(t[l],e),i=t[l]);this.fireEvent(new mxEventObject(mxEvent.LAYOUT_CELLS,"cells",t))}finally{n.endUpdate()}}},mxLayoutManager.prototype.executeLayout=function(t,e){e=this.getLayout(t,e?mxEvent.BEGIN_UPDATE:mxEvent.END_UPDATE);null!=e&&e.execute(t)},mxLayoutManager.prototype.destroy=function(){this.setGraph(null)},mxSwimlaneManager.prototype=new mxEventSource,mxSwimlaneManager.prototype.constructor=mxSwimlaneManager,mxSwimlaneManager.prototype.graph=null,mxSwimlaneManager.prototype.enabled=!0,mxSwimlaneManager.prototype.horizontal=!0,mxSwimlaneManager.prototype.addEnabled=!0,mxSwimlaneManager.prototype.resizeEnabled=!0,mxSwimlaneManager.prototype.addHandler=null,mxSwimlaneManager.prototype.resizeHandler=null,mxSwimlaneManager.prototype.isEnabled=function(){return this.enabled},mxSwimlaneManager.prototype.setEnabled=function(t){this.enabled=t},mxSwimlaneManager.prototype.isHorizontal=function(){return this.horizontal},mxSwimlaneManager.prototype.setHorizontal=function(t){this.horizontal=t},mxSwimlaneManager.prototype.isAddEnabled=function(){return this.addEnabled},mxSwimlaneManager.prototype.setAddEnabled=function(t){this.addEnabled=t},mxSwimlaneManager.prototype.isResizeEnabled=function(){return this.resizeEnabled},mxSwimlaneManager.prototype.setResizeEnabled=function(t){this.resizeEnabled=t},mxSwimlaneManager.prototype.getGraph=function(){return this.graph},mxSwimlaneManager.prototype.setGraph=function(t){null!=this.graph&&(this.graph.removeListener(this.addHandler),this.graph.removeListener(this.resizeHandler)),this.graph=t,null!=this.graph&&(this.graph.addListener(mxEvent.ADD_CELLS,this.addHandler),this.graph.addListener(mxEvent.CELLS_RESIZED,this.resizeHandler))},mxSwimlaneManager.prototype.isSwimlaneIgnored=function(t){return!this.getGraph().isSwimlane(t)},mxSwimlaneManager.prototype.isCellHorizontal=function(t){return this.graph.isSwimlane(t)?(t=this.graph.getCellStyle(t),1==mxUtils.getValue(t,mxConstants.STYLE_HORIZONTAL,1)):!this.isHorizontal()},mxSwimlaneManager.prototype.cellsAdded=function(t){if(null!=t){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)this.isSwimlaneIgnored(t[n])||this.swimlaneAdded(t[n])}finally{e.endUpdate()}}},mxSwimlaneManager.prototype.swimlaneAdded=function(t){for(var e=this.getGraph().getModel(),n=e.getParent(t),i=e.getChildCount(n),l=null,s=0;s<i;s++){var o=e.getChildAt(n,s);if(o!=t&&!this.isSwimlaneIgnored(o)&&null!=(l=e.getGeometry(o)))break}null!=l&&(e=null!=n?this.isCellHorizontal(n):this.horizontal,this.resizeSwimlane(t,l.width,l.height,e))},mxSwimlaneManager.prototype.cellsResized=function(t){if(null!=t){var e=this.getGraph().getModel();e.beginUpdate();try{for(var n=0;n<t.length;n++)if(!this.isSwimlaneIgnored(t[n])){var i=e.getGeometry(t[n]);if(null!=i){for(var l=new mxRectangle(0,0,i.width,i.height),s=o=t[n];null!=s;){var o=s,s=e.getParent(s),r=this.graph.isSwimlane(s)?this.graph.getStartSize(s):new mxRectangle;l.width+=r.width,l.height+=r.height}var a=null!=s?this.isCellHorizontal(s):this.horizontal;this.resizeSwimlane(o,l.width,l.height,a)}}}finally{e.endUpdate()}}},mxSwimlaneManager.prototype.resizeSwimlane=function(t,e,n,i){var l=this.getGraph().getModel();l.beginUpdate();try{var s,o=this.isCellHorizontal(t),r=(this.isSwimlaneIgnored(t)||null!=(s=l.getGeometry(t))&&(i&&s.height!=n||!i&&s.width!=e)&&(s=s.clone(),i?s.height=n:s.width=e,l.setGeometry(t,s)),this.graph.isSwimlane(t)?this.graph.getStartSize(t):new mxRectangle),a=(e-=r.width,n-=r.height,l.getChildCount(t));for(i=0;i<a;i++){var h=l.getChildAt(t,i);this.resizeSwimlane(h,e,n,o)}}finally{l.endUpdate()}},mxSwimlaneManager.prototype.destroy=function(){this.setGraph(null)},mxTemporaryCellStates.prototype.view=null,mxTemporaryCellStates.prototype.oldStates=null,mxTemporaryCellStates.prototype.oldBounds=null,mxTemporaryCellStates.prototype.oldScale=null,mxTemporaryCellStates.prototype.destroy=function(){this.view.setScale(this.oldScale),this.view.setStates(this.oldStates),this.view.setGraphBounds(this.oldBounds),this.view.validateCellState=this.oldValidateCellState,this.view.graph.cellRenderer.doRedrawShape=this.oldDoRedrawShape},mxCellStatePreview.prototype.graph=null,mxCellStatePreview.prototype.deltas=null,mxCellStatePreview.prototype.count=0,mxCellStatePreview.prototype.isEmpty=function(){return 0==this.count},mxCellStatePreview.prototype.moveState=function(t,e,n,i,l){i=null==i||i,l=null==l||l;var s=this.deltas.get(t.cell);return null==s?(s={point:new mxPoint(e,n),state:t},this.deltas.put(t.cell,s),this.count++):i?(s.point.x+=e,s.point.y+=n):(s.point.x=e,s.point.y=n),l&&this.addEdges(t),s.point},mxCellStatePreview.prototype.show=function(n){this.deltas.visit(mxUtils.bind(this,function(t,e){this.translateState(e.state,e.point.x,e.point.y)})),this.deltas.visit(mxUtils.bind(this,function(t,e){this.revalidateState(e.state,e.point.x,e.point.y,n)}))},mxCellStatePreview.prototype.translateState=function(t,e,n){if(null!=t){var i=this.graph.getModel();i.isVertex(t.cell)&&(t.view.updateCellState(t),l=i.getGeometry(t.cell),0==e&&0==n||null==l||l.relative&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=n));for(var l=i.getChildCount(t.cell),s=0;s<l;s++)this.translateState(t.view.getState(i.getChildAt(t.cell,s)),e,n)}},mxCellStatePreview.prototype.revalidateState=function(t,e,n,i){if(null!=t){var l=this.graph.getModel(),s=(l.isEdge(t.cell)&&t.view.updateCellState(t),this.graph.getCellGeometry(t.cell)),o=t.view.getState(l.getParent(t.cell));for(0==e&&0==n||null==s||!s.relative||!l.isVertex(t.cell)||null!=o&&!l.isVertex(o.cell)&&null==this.deltas.get(t.cell)||(t.x+=e,t.y+=n),this.graph.cellRenderer.redraw(t),null!=i&&i(t),s=l.getChildCount(t.cell),o=0;o<s;o++)this.revalidateState(this.graph.view.getState(l.getChildAt(t.cell,o)),e,n,i)}},mxCellStatePreview.prototype.addEdges=function(t){for(var e=this.graph.getModel(),n=e.getEdgeCount(t.cell),i=0;i<n;i++){var l=t.view.getState(e.getEdgeAt(t.cell,i));null!=l&&this.moveState(l,0,0)}},mxConnectionConstraint.prototype.point=null,mxConnectionConstraint.prototype.perimeter=null,mxConnectionConstraint.prototype.name=null,mxConnectionConstraint.prototype.dx=null,mxConnectionConstraint.prototype.dy=null,mxGraphHandler.prototype.graph=null,mxGraphHandler.prototype.maxCells=mxClient.IS_IE?20:50,mxGraphHandler.prototype.enabled=!0,mxGraphHandler.prototype.highlightEnabled=!0,mxGraphHandler.prototype.cloneEnabled=!0,mxGraphHandler.prototype.moveEnabled=!0,mxGraphHandler.prototype.guidesEnabled=!1,mxGraphHandler.prototype.handlesVisible=!0,mxGraphHandler.prototype.guide=null,mxGraphHandler.prototype.currentDx=null,mxGraphHandler.prototype.currentDy=null,mxGraphHandler.prototype.updateCursor=!0,mxGraphHandler.prototype.selectEnabled=!0,mxGraphHandler.prototype.removeCellsFromParent=!0,mxGraphHandler.prototype.removeEmptyParents=!1,mxGraphHandler.prototype.connectOnDrop=!1,mxGraphHandler.prototype.scrollOnMove=!0,mxGraphHandler.prototype.minimumSize=6,mxGraphHandler.prototype.previewColor="black",mxGraphHandler.prototype.htmlPreview=!1,mxGraphHandler.prototype.shape=null,mxGraphHandler.prototype.scaleGrid=!1,mxGraphHandler.prototype.rotationEnabled=!0,mxGraphHandler.prototype.maxLivePreview=0,mxGraphHandler.prototype.allowLivePreview=mxClient.IS_SVG,mxGraphHandler.prototype.isEnabled=function(){return this.enabled},mxGraphHandler.prototype.setEnabled=function(t){this.enabled=t},mxGraphHandler.prototype.isCloneEnabled=function(){return this.cloneEnabled},mxGraphHandler.prototype.setCloneEnabled=function(t){this.cloneEnabled=t},mxGraphHandler.prototype.isMoveEnabled=function(){return this.moveEnabled},mxGraphHandler.prototype.setMoveEnabled=function(t){this.moveEnabled=t},mxGraphHandler.prototype.isSelectEnabled=function(){return this.selectEnabled},mxGraphHandler.prototype.setSelectEnabled=function(t){this.selectEnabled=t},mxGraphHandler.prototype.isRemoveCellsFromParent=function(){return this.removeCellsFromParent},mxGraphHandler.prototype.setRemoveCellsFromParent=function(t){this.removeCellsFromParent=t},mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,n){var i=this.graph.model.getParent(t);return e?(e=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t),!this.graph.isSiblingSelected(t)&&(null!=e&&e.relative||!this.graph.isSwimlane(i))):(!this.graph.isToggleEvent(n.getEvent())||!this.graph.isSiblingSelected(t)&&!this.graph.isCellSelected(t)&&!this.graph.isSwimlane(i)||this.graph.isCellSelected(i))&&(this.graph.isToggleEvent(n.getEvent())||!this.graph.isCellSelected(i))},mxGraphHandler.prototype.getInitialCellForEvent=function(t){var e=t.getState();if(!(this.graph.isToggleEvent(t.getEvent())&&mxEvent.isAltDown(t.getEvent())||null==e||this.graph.isCellSelected(e.cell)))for(var n=this.graph.model,i=this.graph.view.getState(n.getParent(e.cell));null!=i&&!this.graph.isCellSelected(i.cell)&&(n.isVertex(i.cell)||n.isEdge(i.cell))&&this.isPropagateSelectionCell(e.cell,!0,t);)e=i,i=this.graph.view.getState(this.graph.getModel().getParent(e.cell));return null!=e?e.cell:null},mxGraphHandler.prototype.isDelayedSelection=function(t,e){if(!this.graph.isToggleEvent(e.getEvent())||!mxEvent.isAltDown(e.getEvent()))for(;null!=t;){if(this.graph.selectionCellsHandler.isHandled(t))return this.graph.cellEditor.getEditingCell()!=t;t=this.graph.model.getParent(t)}return this.graph.isToggleEvent(e.getEvent())&&!mxEvent.isAltDown(e.getEvent())},mxGraphHandler.prototype.selectDelayed=function(t){var e;this.graph.popupMenuHandler.isPopupTrigger(t)||(null==(e=t.getCell())&&(e=this.cell),this.selectCellForEvent(e,t))},mxGraphHandler.prototype.selectCellForEvent=function(t,e){if(null!=(n=this.graph.view.getState(t))){if(!(e.isSource(n.control)||this.graph.isToggleEvent(e.getEvent())&&mxEvent.isAltDown(e.getEvent())))for(var n,i=(n=this.graph.getModel()).getParent(t);null!=this.graph.view.getState(i)&&(n.isVertex(i)||n.isEdge(i)&&!this.graph.isToggleEvent(e.getEvent()))&&this.isPropagateSelectionCell(t,!1,e);)t=i,i=n.getParent(t);this.graph.selectCellForEvent(t,e.getEvent())}return t},mxGraphHandler.prototype.consumeMouseEvent=function(t,e){e.consume()},mxGraphHandler.prototype.mouseDown=function(t,e){var n,i,l;!e.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null!=e.getState()&&!mxEvent.isMultiTouchEvent(e.getEvent())&&(n=this.getInitialCellForEvent(e),this.delayedSelection=this.isDelayedSelection(n,e),this.cell=null,this.isSelectEnabled()&&!this.delayedSelection&&this.graph.selectCellForEvent(n,e.getEvent()),this.isMoveEnabled())&&(l=(i=this.graph.model).getGeometry(n),this.graph.isCellMovable(n)&&(!i.isEdge(n)||1<this.graph.getSelectionCount()||null!=l.points&&0<l.points.length||null==i.getTerminal(n,!0)||null==i.getTerminal(n,!1)||this.graph.allowDanglingEdges||this.graph.isCloneEvent(e.getEvent())&&this.graph.isCellsCloneable())?this.start(n,e.getX(),e.getY()):this.delayedSelection&&(this.cell=n),this.cellWasClicked=!0,this.consumeMouseEvent(mxEvent.MOUSE_DOWN,e))},mxGraphHandler.prototype.getGuideStates=function(){var t=this.graph.getDefaultParent(),e=this.graph.getModel(),n=mxUtils.bind(this,function(t){return null!=this.graph.view.getState(t)&&e.isVertex(t)&&null!=e.getGeometry(t)&&!e.getGeometry(t).relative});return this.graph.view.getCellStates(e.filterDescendants(n,t))},mxGraphHandler.prototype.getCells=function(t){return!this.delayedSelection&&this.graph.isCellMovable(t)?[t]:this.graph.getMovableCells(this.graph.getSelectionCells())},mxGraphHandler.prototype.getPreviewBounds=function(t){return null!=(t=this.getBoundingBox(t))&&(t.width=Math.max(0,t.width-1),t.height=Math.max(0,t.height-1),t.width<this.minimumSize?(t.x-=(this.minimumSize-t.width)/2,t.width=this.minimumSize):(t.x=Math.round(t.x),t.width=Math.ceil(t.width)),t.height<this.minimumSize?(t.y-=(this.minimumSize-t.height)/2,t.height=this.minimumSize):(t.y=Math.round(t.y),t.height=Math.ceil(t.height))),t},mxGraphHandler.prototype.getBoundingBox=function(t){var e,n,i=null;if(null!=t&&0<t.length)for(var l=this.graph.getModel(),s=0;s<t.length;s++)(l.isVertex(t[s])||l.isEdge(t[s]))&&null!=(e=this.graph.view.getState(t[s]))&&(n=e,l.isVertex(t[s])&&null!=e.shape&&null!=e.shape.boundingBox&&(n=e.shape.boundingBox),null==i?i=mxRectangle.fromRectangle(n):i.add(n));return i},mxGraphHandler.prototype.createPreviewShape=function(t){return(t=new mxRectangleShape(t,null,this.previewColor)).isDashed=!0,this.htmlPreview?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),t.pointerEvents=!1,mxClient.IS_IOS&&(t.getSvgScreenOffset=function(){return 0})),t},mxGraphHandler.prototype.start=function(t,e,n,i){for(this.cell=t,this.first=mxUtils.convertPoint(this.graph.container,e,n),this.cells=null!=i?i:this.getCells(this.cell),this.bounds=this.graph.getView().getBounds(this.cells),this.pBounds=this.getPreviewBounds(this.cells),this.allCells=new mxDictionary,this.cloning=!1,e=this.cellCount=0;e<this.cells.length;e++)this.cellCount+=this.addStates(this.cells[e],this.allCells);if(this.guidesEnabled){this.guide=new mxGuide(this.graph,this.getGuideStates());var l=this.graph.model.getParent(t),s=this.graph.model.getChildCount(l)<2,o=new mxDictionary;for(t=this.graph.getOpposites(this.graph.getEdges(this.cell),this.cell),e=0;e<t.length;e++)null==(n=this.graph.view.getState(t[e]))||o.get(n)||o.put(n,!0);this.guide.isStateIgnored=mxUtils.bind(this,function(t){var e=this.graph.model.getParent(t.cell);return null!=t.cell&&(!this.cloning&&this.isCellMoving(t.cell)||t.cell!=(this.target||l)&&!s&&!o.get(t)&&(null==this.target||2<=this.graph.model.getChildCount(this.target))&&e!=(this.target||l))})}},mxGraphHandler.prototype.addStates=function(t,e){var n=0;if(null!=(i=this.graph.view.getState(t))&&null==e.get(t)){e.put(t,i),n++;for(var i=this.graph.model.getChildCount(t),l=0;l<i;l++)n+=this.addStates(this.graph.model.getChildAt(t,l),e)}return n},mxGraphHandler.prototype.isCellMoving=function(t){return null!=this.allCells.get(t)},mxGraphHandler.prototype.useGuidesForEvent=function(t){return null==this.guide||this.guide.isEnabledForEvent(t.getEvent())&&!this.graph.isConstrainedEvent(t.getEvent())},mxGraphHandler.prototype.snap=function(t){var e=this.scaleGrid?this.graph.view.scale:1;return t.x=this.graph.snap(t.x/e)*e,t.y=this.graph.snap(t.y/e)*e,t},mxGraphHandler.prototype.getDelta=function(t){return new mxPoint((t=mxUtils.convertPoint(this.graph.container,t.getX(),t.getY())).x-this.first.x-this.graph.panDx,t.y-this.first.y-this.graph.panDy)},mxGraphHandler.prototype.updateHint=function(t){},mxGraphHandler.prototype.removeHint=function(){},mxGraphHandler.prototype.roundLength=function(t){return Math.round(100*t)/100},mxGraphHandler.prototype.isValidDropTarget=function(t,e){return this.graph.model.getParent(this.cell)!=t},mxGraphHandler.prototype.checkPreview=function(){this.livePreviewActive&&this.cloning?(this.resetLivePreview(),this.livePreviewActive=!1):this.maxLivePreview>=this.cellCount&&!this.livePreviewActive&&this.allowLivePreview?this.cloning&&this.livePreviewActive||(this.livePreviewUsed=this.livePreviewActive=!0):this.livePreviewUsed||null!=this.shape||(this.shape=this.createPreviewShape(this.bounds))},mxGraphHandler.prototype.mouseMove=function(t,e){var n,i,l,s,o,r,a,h,d=this.graph;e.isConsumed()||!d.isMouseDown||null==this.cell||null==this.first||null==this.bounds||this.suspended?!this.isMoveEnabled()&&!this.isCloneEnabled()||!this.updateCursor||e.isConsumed()||null==e.getState()&&null==e.sourceState||d.isMouseDown||null!=(n=null==(n=d.getCursorForMouseEvent(e))&&d.isEnabled()&&d.isCellMovable(e.getCell())?d.getModel().isEdge(e.getCell())?mxConstants.CURSOR_MOVABLE_EDGE:mxConstants.CURSOR_MOVABLE_VERTEX:n)&&null!=e.sourceState&&e.sourceState.setCursor(n):mxEvent.isMultiTouchEvent(e.getEvent())?this.reset():(n=this.getDelta(e),i=d.tolerance,(null!=this.shape||this.livePreviewActive||Math.abs(n.x)>i||Math.abs(n.y)>i)&&(null==this.highlight&&(this.highlight=new mxCellHighlight(this.graph,mxConstants.DROP_TARGET_COLOR,3)),i=d.isCloneEvent(e.getEvent())&&d.isCellsCloneable()&&this.isCloneEnabled(),l=d.isGridEnabledEvent(e.getEvent()),s=e.getCell(),o=!0,r=null,this.cloning=i,d.isDropEnabled()&&this.highlightEnabled&&(r=d.getDropTarget(this.cells,e.getEvent(),s,i)),h=!1,null!=(a=d.getView().getState(r))&&(i||this.isValidDropTarget(r,e))?(this.target!=r&&(this.target=r,this.setHighlightColor(mxConstants.DROP_TARGET_COLOR)),h=!0):(this.target=null,this.connectOnDrop&&null!=s&&1==this.cells.length&&d.getModel().isVertex(s)&&d.isCellConnectable(s)&&null!=(a=d.getView().getState(s))&&(s=null==d.getEdgeValidationError(null,this.cell,s)?mxConstants.VALID_COLOR:mxConstants.INVALID_CONNECT_TARGET_COLOR,this.setHighlightColor(s),h=!0)),null!=a&&h?this.highlight.highlight(a):this.highlight.hide(),null!=this.guide&&this.useGuidesForEvent(e)?(n=this.guide.move(this.bounds,n,l,i),o=!1):n=this.graph.snapDelta(n,this.bounds,!l,!1,!1),null!=this.guide&&o&&this.guide.hide(),d.isConstrainedEvent(e.getEvent())&&(Math.abs(n.x)>Math.abs(n.y)?n.y=0:n.x=0),this.checkPreview(),this.currentDx==n.x&&this.currentDy==n.y||(this.currentDx=n.x,this.currentDy=n.y,this.updatePreview())),this.updateHint(e),this.consumeMouseEvent(mxEvent.MOUSE_MOVE,e),mxEvent.consume(e.getEvent()))},mxGraphHandler.prototype.updatePreview=function(t){this.livePreviewUsed&&!t?null!=this.cells&&(this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!1),this.updateLivePreview(this.currentDx,this.currentDy)):this.updatePreviewShape()},mxGraphHandler.prototype.updatePreviewShape=function(){null!=this.shape&&null!=this.pBounds&&(this.shape.bounds=new mxRectangle(Math.round(this.pBounds.x+this.currentDx),Math.round(this.pBounds.y+this.currentDy),this.pBounds.width,this.pBounds.height),this.shape.redraw())},mxGraphHandler.prototype.updateLivePreview=function(i,l){if(!this.suspended){var s=[];if(null!=this.allCells&&this.allCells.visit(mxUtils.bind(this,function(t,e){var n=this.graph.view.getState(e.cell);n!=e&&(e.destroy(),null!=n?this.allCells.put(e.cell,n):this.allCells.remove(e.cell),e=n),null!=e&&(n=e.clone(),s.push([e,n]),null!=e.shape&&(null==e.shape.originalPointerEvents&&(e.shape.originalPointerEvents=e.shape.pointerEvents),e.shape.pointerEvents=!1,null!=e.text)&&(null==e.text.originalPointerEvents&&(e.text.originalPointerEvents=e.text.pointerEvents),e.text.pointerEvents=!1),this.graph.model.isVertex(e.cell))&&(e.x+=i,e.y+=l,this.cloning?null!=e.text&&(e.text.updateBoundingBox(),null!=e.text.boundingBox&&(e.text.boundingBox.x+=i,e.text.boundingBox.y+=l),null!=e.text.unrotatedBoundingBox)&&(e.text.unrotatedBoundingBox.x+=i,e.text.unrotatedBoundingBox.y+=l):(e.view.graph.cellRenderer.redraw(e,!0),e.view.invalidate(e.cell),e.invalid=!1,null!=e.control&&null!=e.control.node&&(e.control.node.style.visibility="hidden")))})),0==s.length)this.reset();else{for(var t=this.graph.view.scale,e=0;e<s.length;e++){var n=s[e][0];if(this.graph.model.isEdge(n.cell)){var o=[];if(null!=(a=this.graph.getCellGeometry(n.cell))&&null!=a.points)for(var r=0;r<a.points.length;r++)null!=a.points[r]&&o.push(new mxPoint(a.points[r].x+i/t,a.points[r].y+l/t));var a=n.visibleSourceState,r=n.visibleTargetState,h=s[e][1].absolutePoints;null!=a&&this.isCellMoving(a.cell)?n.view.updateFixedTerminalPoint(n,a,!0,this.graph.getConnectionConstraint(n,a,!0)):(a=h[0],n.setAbsoluteTerminalPoint(new mxPoint(a.x+i,a.y+l),!0),a=null),null!=r&&this.isCellMoving(r.cell)?n.view.updateFixedTerminalPoint(n,r,!1,this.graph.getConnectionConstraint(n,r,!1)):(r=h[h.length-1],n.setAbsoluteTerminalPoint(new mxPoint(r.x+i,r.y+l),!1),r=null),n.view.updatePoints(n,o,a,r),n.view.updateFloatingTerminalPoints(n,a,r),n.view.updateEdgeLabelOffset(n),n.invalid=!1,this.cloning||n.view.graph.cellRenderer.redraw(n,!0)}}this.graph.view.validate(),this.redrawHandles(s),this.resetPreviewStates(s)}}},mxGraphHandler.prototype.redrawHandles=function(t){for(var e=0;e<t.length;e++){var n=this.graph.selectionCellsHandler.getHandler(t[e][0].cell);null!=n&&n.redraw(!0)}},mxGraphHandler.prototype.resetPreviewStates=function(t){for(var e=0;e<t.length;e++)t[e][0].setState(t[e][1])},mxGraphHandler.prototype.suspend=function(){this.suspended||(this.livePreviewUsed&&this.updateLivePreview(0,0),null!=this.shape&&(this.shape.node.style.visibility="hidden"),null!=this.guide&&this.guide.setVisible(!1),this.suspended=!0)},mxGraphHandler.prototype.resume=function(){this.suspended&&(this.suspended=null,this.livePreviewUsed&&(this.livePreviewActive=!0),null!=this.shape&&(this.shape.node.style.visibility="visible"),null!=this.guide)&&this.guide.setVisible(!0)},mxGraphHandler.prototype.resetLivePreview=function(){null!=this.allCells&&(this.allCells.visit(mxUtils.bind(this,function(t,e){null!=e.shape&&null!=e.shape.originalPointerEvents&&(e.shape.pointerEvents=e.shape.originalPointerEvents,e.shape.originalPointerEvents=null,(e.shape.bounds=null)!=e.text)&&(e.text.pointerEvents=e.text.originalPointerEvents,e.text.originalPointerEvents=null),null!=e.control&&null!=e.control.node&&"hidden"==e.control.node.style.visibility&&(e.control.node.style.visibility=""),this.cloning||null!=e.text&&e.text.updateBoundingBox(),e.view.invalidate(e.cell)})),this.graph.view.validate())},mxGraphHandler.prototype.setHandlesVisibleForCells=function(t,e,n){if(n||this.handlesVisible!=e)for(this.handlesVisible=e,n=0;n<t.length;n++){var i=this.graph.selectionCellsHandler.getHandler(t[n]);null!=i&&(i.setHandlesVisible(e),e)&&i.redraw()}},mxGraphHandler.prototype.setHighlightColor=function(t){null!=this.highlight&&this.highlight.setHighlightColor(t)};mxGraphHandler.prototype.mouseUp=function(t,e){var n,i,l,s,o;e.isConsumed()||(this.livePreviewUsed&&this.resetLivePreview(),null==this.cell||null==this.first||null==this.shape&&!this.livePreviewUsed||null==this.currentDx||null==this.currentDy?this.isSelectEnabled()&&this.delayedSelection&&null!=this.cell&&this.selectDelayed(e):(n=this.graph,i=e.getCell(),this.connectOnDrop&&null==this.target&&null!=i&&n.getModel().isVertex(i)&&n.isCellConnectable(i)&&n.isEdgeValid(null,this.cell,i)?n.connectionHandler.connect(this.cell,i,e.getEvent()):(i=n.isCloneEvent(e.getEvent())&&n.isCellsCloneable()&&this.isCloneEnabled(),s=n.getView().scale,l=this.roundLength(this.currentDx/s),s=this.roundLength(this.currentDy/s),o=this.target,n.isSplitEnabled()&&n.isSplitTarget(o,this.cells,e.getEvent())?n.splitEdge(o,this.cells,null,l,s,e.getGraphX(),e.getGraphY()):this.moveCells(this.cells,l,s,i,this.target,e.getEvent())))),this.cellWasClicked&&this.consumeMouseEvent(mxEvent.MOUSE_UP,e),this.reset()},mxGraphHandler.prototype.reset=function(){this.livePreviewUsed&&(this.resetLivePreview(),this.setHandlesVisibleForCells(this.graph.selectionCellsHandler.getHandledSelectionCells(),!0)),this.destroyShapes(),this.removeHint(),this.delayedSelection=!1,this.livePreviewUsed=this.livePreviewActive=null,this.cellWasClicked=!1,this.cellCount=this.currentDy=this.currentDx=this.suspended=null,this.cloning=!1,this.cell=this.cells=this.first=this.target=this.guides=this.pBounds=this.allCells=null},mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,e,n){var i,l;return!(!this.graph.getModel().isVertex(t)||null==(t=this.graph.getView().getState(t))||(n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(n),mxEvent.getClientY(n)),0!=(i=mxUtils.toRadians(mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION)||0))&&(e=Math.cos(-i),i=Math.sin(-i),l=new mxPoint(t.getCenterX(),t.getCenterY()),n=mxUtils.getRotatedPoint(n,e,i,l)),mxUtils.contains(t,n.x,n.y)))},mxGraphHandler.prototype.moveCells=function(t,e,n,i,l,s){i&&(t=this.graph.getCloneableCells(t));var o=this.graph.getModel().getParent(this.cell);null==l&&this.isRemoveCellsFromParent()&&this.shouldRemoveCellsFromParent(o,t,s)&&(l=this.graph.getDefaultParent()),i=i&&!this.graph.isCellLocked(l||this.graph.getDefaultParent()),this.graph.getModel().beginUpdate();try{if(o=[],!i&&null!=l&&this.removeEmptyParents){for(var r=new mxDictionary,a=0;a<t.length;a++)r.put(t[a],!0);for(a=0;a<t.length;a++){var h=this.graph.model.getParent(t[a]);null==h||r.get(h)||(r.put(h,!0),o.push(h))}}for(t=this.graph.moveCells(t,e,n,i,l,s),e=[],a=0;a<o.length;a++)this.shouldRemoveParent(o[a])&&e.push(o[a]);this.graph.removeCells(e,!1)}finally{this.graph.getModel().endUpdate()}i&&this.graph.setSelectionCells(t),this.isSelectEnabled()&&this.scrollOnMove&&this.graph.scrollCellToVisible(t[0])},mxGraphHandler.prototype.shouldRemoveParent=function(t){return null!=(t=this.graph.view.getState(t))&&(this.graph.model.isEdge(t.cell)||this.graph.model.isVertex(t.cell))&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)},mxGraphHandler.prototype.destroyShapes=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.guide&&(this.guide.destroy(),this.guide=null),null!=this.highlight&&(this.highlight.destroy(),this.highlight=null)},mxGraphHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.panHandler),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.refreshHandler&&(this.graph.getModel().removeListener(this.refreshHandler),this.graph.removeListener(this.refreshHandler),this.refreshHandler=null),mxEvent.removeListener(document,"keydown",this.keyHandler),mxEvent.removeListener(document,"keyup",this.keyHandler),this.destroyShapes(),this.removeHint()},mxPanningHandler.prototype=new mxEventSource,mxPanningHandler.prototype.constructor=mxPanningHandler,mxPanningHandler.prototype.graph=null,mxPanningHandler.prototype.useLeftButtonForPanning=!1,mxPanningHandler.prototype.usePopupTrigger=!0,mxPanningHandler.prototype.ignoreCell=!1,mxPanningHandler.prototype.previewEnabled=!0,mxPanningHandler.prototype.useGrid=!1,mxPanningHandler.prototype.panningEnabled=!0,mxPanningHandler.prototype.pinchEnabled=!0,mxPanningHandler.prototype.maxScale=8,mxPanningHandler.prototype.minScale=.01,mxPanningHandler.prototype.dx=null,mxPanningHandler.prototype.dy=null,mxPanningHandler.prototype.startX=0,mxPanningHandler.prototype.startY=0,mxPanningHandler.prototype.isActive=function(){return this.active||null!=this.initialScale},mxPanningHandler.prototype.isPanningEnabled=function(){return this.panningEnabled},mxPanningHandler.prototype.setPanningEnabled=function(t){this.panningEnabled=t},mxPanningHandler.prototype.isPinchEnabled=function(){return this.pinchEnabled},mxPanningHandler.prototype.setPinchEnabled=function(t){this.pinchEnabled=t},mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return this.useLeftButtonForPanning&&null==t.getState()&&mxEvent.isLeftMouseButton(e)||mxEvent.isControlDown(e)&&mxEvent.isShiftDown(e)||this.usePopupTrigger&&mxEvent.isPopupTrigger(e)},mxPanningHandler.prototype.isForcePanningEvent=function(t){return this.ignoreCell||mxEvent.isMultiTouchEvent(t.getEvent())},mxPanningHandler.prototype.mouseDown=function(t,e){!(this.mouseDownEvent=e).isConsumed()&&this.isPanningEnabled()&&!this.active&&this.isPanningTrigger(e)&&(this.start(e),this.consumePanningTrigger(e))},mxPanningHandler.prototype.start=function(t){this.dx0=-this.graph.container.scrollLeft,this.dy0=-this.graph.container.scrollTop,this.startX=t.getX(),this.startY=t.getY(),this.dy=this.dx=null,this.panningTrigger=!0},mxPanningHandler.prototype.consumePanningTrigger=function(t){t.consume()},mxPanningHandler.prototype.mouseMove=function(t,e){var n;this.dx=e.getX()-this.startX,this.dy=e.getY()-this.startY,this.active?(this.previewEnabled&&(this.useGrid&&(this.dx=this.graph.snap(this.dx),this.dy=this.graph.snap(this.dy)),this.graph.panGraph(this.dx+this.dx0,this.dy+this.dy0)),this.fireEvent(new mxEventObject(mxEvent.PAN,"event",e))):this.panningTrigger&&(n=this.active,this.active=Math.abs(this.dx)>this.graph.tolerance||Math.abs(this.dy)>this.graph.tolerance,!n)&&this.active&&this.fireEvent(new mxEventObject(mxEvent.PAN_START,"event",e)),(this.active||this.panningTrigger)&&e.consume()},mxPanningHandler.prototype.mouseUp=function(t,e){var n,i;this.active&&(null!=this.dx&&null!=this.dy&&(this.graph.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.graph.container)||(n=this.graph.getView().scale,i=this.graph.getView().translate,this.graph.panGraph(0,0),this.panGraph(i.x+this.dx/n,i.y+this.dy/n)),e.consume()),this.fireEvent(new mxEventObject(mxEvent.PAN_END,"event",e))),this.reset()},mxPanningHandler.prototype.zoomGraph=function(t){var e=Math.round(this.initialScale*t.scale*100)/100;null!=this.minScale&&(e=Math.max(this.minScale,e)),null!=this.maxScale&&(e=Math.min(this.maxScale,e)),this.graph.view.scale!=e&&(this.graph.zoomTo(e),mxEvent.consume(t))},mxPanningHandler.prototype.reset=function(){this.panningTrigger=this.graph.isMouseDown=!1,this.mouseDownEvent=null,this.active=!1,this.dy=this.dx=null},mxPanningHandler.prototype.panGraph=function(t,e){this.graph.getView().setTranslate(t,e)},mxPanningHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.forcePanningHandler),this.graph.removeListener(this.gestureHandler),mxEvent.removeListener(document,"mouseup",this.mouseUpListener),mxEvent.removeListener(document,"mouseleave",this.mouseUpListener)},mxPopupMenuHandler.prototype=new mxPopupMenu,mxPopupMenuHandler.prototype.constructor=mxPopupMenuHandler,mxPopupMenuHandler.prototype.graph=null,mxPopupMenuHandler.prototype.selectOnPopup=!0,mxPopupMenuHandler.prototype.clearSelectionOnBackground=!0,mxPopupMenuHandler.prototype.triggerX=null,mxPopupMenuHandler.prototype.triggerY=null,mxPopupMenuHandler.prototype.screenX=null,mxPopupMenuHandler.prototype.screenY=null,mxPopupMenuHandler.prototype.init=function(){mxPopupMenu.prototype.init.apply(this),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(t){this.graph.tooltipHandler.hide()}))},mxPopupMenuHandler.prototype.isSelectOnPopup=function(t){return this.selectOnPopup},mxPopupMenuHandler.prototype.mouseDown=function(t,e){this.isEnabled()&&!mxEvent.isMultiTouchEvent(e.getEvent())&&(this.hideMenu(),this.triggerX=e.getGraphX(),this.triggerY=e.getGraphY(),this.screenX=mxEvent.getMainEvent(e.getEvent()).screenX,this.screenY=mxEvent.getMainEvent(e.getEvent()).screenY,this.popupTrigger=this.isPopupTrigger(e),this.inTolerance=!0)},mxPopupMenuHandler.prototype.mouseMove=function(t,e){this.inTolerance&&null!=this.screenX&&null!=this.screenY&&(Math.abs(mxEvent.getMainEvent(e.getEvent()).screenX-this.screenX)>this.graph.tolerance||Math.abs(mxEvent.getMainEvent(e.getEvent()).screenY-this.screenY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxPopupMenuHandler.prototype.mouseUp=function(t,e){var n,i;this.popupTrigger&&this.inTolerance&&null!=this.triggerX&&null!=this.triggerY&&(n=this.getCellForPopupEvent(e),this.graph.isEnabled()&&this.isSelectOnPopup(e)&&null!=n&&!this.graph.isCellSelected(n)?this.graph.setSelectionCell(n):this.clearSelectionOnBackground&&null==n&&this.graph.clearSelection(),this.graph.tooltipHandler.hide(),i=mxUtils.getScrollOrigin(),this.popup(e.getX()+i.x+1,e.getY()+i.y+1,n,e.getEvent()),e.consume()),this.inTolerance=this.popupTrigger=!1},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){return t.getCell()},mxPopupMenuHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),this.graph.removeListener(this.gestureHandler),mxPopupMenu.prototype.destroy.apply(this)},mxUtils.extend(mxCellMarker,mxEventSource),mxCellMarker.prototype.graph=null,mxCellMarker.prototype.enabled=!0,mxCellMarker.prototype.hotspot=mxConstants.DEFAULT_HOTSPOT,mxCellMarker.prototype.hotspotEnabled=!1,mxCellMarker.prototype.validColor=null,mxCellMarker.prototype.invalidColor=null,mxCellMarker.prototype.currentColor=null,mxCellMarker.prototype.validState=null,mxCellMarker.prototype.markedState=null,mxCellMarker.prototype.setEnabled=function(t){this.enabled=t},mxCellMarker.prototype.isEnabled=function(){return this.enabled},mxCellMarker.prototype.setHotspot=function(t){this.hotspot=t},mxCellMarker.prototype.getHotspot=function(){return this.hotspot},mxCellMarker.prototype.setHotspotEnabled=function(t){this.hotspotEnabled=t},mxCellMarker.prototype.isHotspotEnabled=function(){return this.hotspotEnabled},mxCellMarker.prototype.hasValidState=function(){return null!=this.validState},mxCellMarker.prototype.getValidState=function(){return this.validState},mxCellMarker.prototype.getMarkedState=function(){return this.markedState},mxCellMarker.prototype.reset=function(){(this.validState=null)!=this.markedState&&(this.markedState=null,this.unmark())},mxCellMarker.prototype.process=function(t){var e=null;return this.isEnabled()&&(e=this.getState(t),this.setCurrentState(e,t)),e},mxCellMarker.prototype.setCurrentState=function(t,e,n){var i=null!=t&&this.isValidState(t);n=null!=n?n:this.getMarkerColor(e.getEvent(),t,i),this.validState=i?t:null,t==this.markedState&&n==this.currentColor||(this.currentColor=n,null!=t&&null!=this.currentColor?(this.markedState=t,this.mark()):null!=this.markedState&&(this.markedState=null,this.unmark()))},mxCellMarker.prototype.markCell=function(t,e){t=this.graph.getView().getState(t);null!=t&&(this.currentColor=null!=e?e:this.validColor,this.markedState=t,this.mark())},mxCellMarker.prototype.mark=function(){this.highlight.setHighlightColor(this.currentColor),this.highlight.highlight(this.markedState),this.fireEvent(new mxEventObject(mxEvent.MARK,"state",this.markedState))},mxCellMarker.prototype.unmark=function(){this.mark()},mxCellMarker.prototype.isValidState=function(t){return!0},mxCellMarker.prototype.getMarkerColor=function(t,e,n){return n?this.validColor:this.invalidColor},mxCellMarker.prototype.getState=function(t){var e=this.graph.getView(),n=this.getCell(t);return null!=(e=this.getStateToMark(e.getState(n)))&&this.intersects(e,t)?e:null},mxCellMarker.prototype.getCell=function(t){return t.getCell()},mxCellMarker.prototype.getStateToMark=function(t){return t},mxCellMarker.prototype.intersects=function(t,e){return!this.hotspotEnabled||mxUtils.intersectsHotspot(t,e.getGraphX(),e.getGraphY(),this.hotspot,mxConstants.MIN_HOTSPOT_SIZE,mxConstants.MAX_HOTSPOT_SIZE)},mxCellMarker.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getModel().removeListener(this.resetHandler),this.highlight.destroy()},mxUtils.extend(mxSelectionCellsHandler,mxEventSource),mxSelectionCellsHandler.prototype.graph=null,mxSelectionCellsHandler.prototype.enabled=!0,mxSelectionCellsHandler.prototype.refreshHandler=null,mxSelectionCellsHandler.prototype.maxHandlers=100,mxSelectionCellsHandler.prototype.handlers=null,mxSelectionCellsHandler.prototype.isEnabled=function(){return this.enabled},mxSelectionCellsHandler.prototype.setEnabled=function(t){this.enabled=t},mxSelectionCellsHandler.prototype.getHandler=function(t){return this.handlers.get(t)},mxSelectionCellsHandler.prototype.isHandled=function(t){return null!=this.getHandler(t)},mxSelectionCellsHandler.prototype.reset=function(){this.handlers.visit(function(t,e){e.reset.apply(e)})},mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){return this.graph.getSelectionCells()},mxSelectionCellsHandler.prototype.refresh=function(){var t=this.handlers;this.handlers=new mxDictionary;for(var e=mxUtils.sortCells(this.getHandledSelectionCells(),!1),n=0;n<e.length;n++){var i,l=this.graph.view.getState(e[n]);null!=l&&(null!=(i=t.remove(e[n]))&&(i.state!=l?(i.destroy(),i=null):this.isHandlerActive(i)||(null!=i.refresh&&i.refresh(),i.redraw())),null!=i)&&this.handlers.put(e[n],i)}for(t.visit(mxUtils.bind(this,function(t,e){this.fireEvent(new mxEventObject(mxEvent.REMOVE,"state",e.state)),e.destroy()})),n=0;n<e.length;n++)null!=(l=this.graph.view.getState(e[n]))&&(null==(i=this.handlers.get(e[n]))?(i=this.graph.createHandler(l),this.fireEvent(new mxEventObject(mxEvent.ADD,"state",l)),this.handlers.put(e[n],i)):i.updateParentHighlight())},mxSelectionCellsHandler.prototype.isHandlerActive=function(t){return null!=t.index},mxSelectionCellsHandler.prototype.updateHandler=function(t){var e,n,i,l=this.handlers.remove(t.cell);null!=l&&(e=l.index,n=l.startX,i=l.startY,l.destroy(),null!=(l=this.graph.createHandler(t)))&&(this.handlers.put(t.cell,l),null!=e)&&null!=n&&null!=i&&l.start(n,i,e)},mxSelectionCellsHandler.prototype.mouseDown=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseDown.apply(e,n)}))},mxSelectionCellsHandler.prototype.mouseMove=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseMove.apply(e,n)}))},mxSelectionCellsHandler.prototype.mouseUp=function(t,e){var n;this.graph.isEnabled()&&this.isEnabled()&&(n=[t,e],this.handlers.visit(function(t,e){e.mouseUp.apply(e,n)}))},mxSelectionCellsHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.refreshHandler&&(this.graph.getSelectionModel().removeListener(this.refreshHandler),this.graph.getModel().removeListener(this.refreshHandler),this.graph.getView().removeListener(this.refreshHandler),this.refreshHandler=null)},mxUtils.extend(mxConnectionHandler,mxEventSource),mxConnectionHandler.prototype.graph=null,mxConnectionHandler.prototype.factoryMethod=!0,mxConnectionHandler.prototype.moveIconFront=!1,mxConnectionHandler.prototype.moveIconBack=!1,mxConnectionHandler.prototype.connectImage=null,mxConnectionHandler.prototype.targetConnectImage=!1,mxConnectionHandler.prototype.enabled=!0,mxConnectionHandler.prototype.select=!0,mxConnectionHandler.prototype.createTarget=!1,mxConnectionHandler.prototype.marker=null,mxConnectionHandler.prototype.constraintHandler=null,mxConnectionHandler.prototype.error=null,mxConnectionHandler.prototype.waypointsEnabled=!1,mxConnectionHandler.prototype.ignoreMouseDown=!1,mxConnectionHandler.prototype.first=null,mxConnectionHandler.prototype.connectIconOffset=new mxPoint(0,mxConstants.TOOLTIP_VERTICAL_OFFSET),mxConnectionHandler.prototype.edgeState=null,mxConnectionHandler.prototype.changeHandler=null,mxConnectionHandler.prototype.drillHandler=null,mxConnectionHandler.prototype.mouseDownCounter=0,mxConnectionHandler.prototype.movePreviewAway=!1,mxConnectionHandler.prototype.outlineConnect=!1,mxConnectionHandler.prototype.livePreview=!1,mxConnectionHandler.prototype.cursor=null,mxConnectionHandler.prototype.insertBeforeSource=!1,mxConnectionHandler.prototype.isEnabled=function(){return this.enabled},mxConnectionHandler.prototype.setEnabled=function(t){this.enabled=t},mxConnectionHandler.prototype.isInsertBefore=function(t,e,n,i,l){return this.insertBeforeSource&&e!=n},mxConnectionHandler.prototype.isCreateTarget=function(t){return this.createTarget},mxConnectionHandler.prototype.setCreateTarget=function(t){this.createTarget=t},mxConnectionHandler.prototype.createShape=function(){var t=this.livePreview&&null!=this.edgeState?this.graph.cellRenderer.createShape(this.edgeState):new mxPolyline([],mxConstants.INVALID_COLOR);return t.dialect=mxConstants.DIALECT_SVG,t.scale=this.graph.view.scale,t.pointerEvents=!1,t.isDashed=!0,t.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(t.node,this.graph,null),t},mxConnectionHandler.prototype.init=function(){this.graph.addMouseListener(this),this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.changeHandler=mxUtils.bind(this,function(t){null!=this.iconState&&(this.iconState=this.graph.getView().getState(this.iconState.cell)),null!=this.iconState?(this.redrawIcons(this.icons,this.iconState),this.constraintHandler.reset()):null!=this.previous&&null==this.graph.view.getState(this.previous.cell)&&this.reset()}),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE,this.changeHandler),this.graph.getView().addListener(mxEvent.TRANSLATE,this.changeHandler),this.graph.getView().addListener(mxEvent.SCALE_AND_TRANSLATE,this.changeHandler),this.drillHandler=mxUtils.bind(this,function(t){this.reset()}),this.graph.addListener(mxEvent.START_EDITING,this.drillHandler),this.graph.getView().addListener(mxEvent.DOWN,this.drillHandler),this.graph.getView().addListener(mxEvent.UP,this.drillHandler)},mxConnectionHandler.prototype.isConnectableCell=function(t){return!0},mxConnectionHandler.prototype.createMarker=function(){var i=new mxCellMarker(this.graph);return i.hotspotEnabled=!0,i.getCell=mxUtils.bind(this,function(t){var e,n=mxCellMarker.prototype.getCell.apply(i,arguments);return(this.error=null)==(n=null==n&&null!=this.currentPoint?this.graph.getCellAt(this.currentPoint.x,this.currentPoint.y):n)||this.graph.isCellConnectable(n)||(e=this.graph.getModel().getParent(n),this.graph.getModel().isVertex(e)&&this.graph.isCellConnectable(e)&&(n=e)),null!=(n=this.graph.isSwimlane(n)&&null!=this.currentPoint&&this.graph.hitsSwimlaneContent(n,this.currentPoint.x,this.currentPoint.y)||!this.isConnectableCell(n)?null:n)?this.isConnecting()?null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,n),null!=this.error)&&0==this.error.length&&(n=null,this.isCreateTarget(t.getEvent()))&&(this.error=null):this.isValidSource(n,t)||(n=null):!this.isConnecting()||this.isCreateTarget(t.getEvent())||this.graph.allowDanglingEdges||(this.error=""),n}),i.isValidState=mxUtils.bind(this,function(t){return this.isConnecting()?null==this.error:mxCellMarker.prototype.isValidState.apply(i,arguments)}),i.getMarkerColor=mxUtils.bind(this,function(t,e,n){return null==this.connectImage||this.isConnecting()?mxCellMarker.prototype.getMarkerColor.apply(i,arguments):null}),i.intersects=mxUtils.bind(this,function(t,e){return!(null==this.connectImage&&!this.isConnecting())||mxCellMarker.prototype.intersects.apply(i,arguments)}),i},mxConnectionHandler.prototype.start=function(t,e,n,i){this.previous=t,this.first=new mxPoint(e,n),this.edgeState=null!=i?i:this.createEdgeState(null),this.marker.currentColor=this.marker.validColor,this.marker.markedState=t,this.marker.mark(),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous))},mxConnectionHandler.prototype.isConnecting=function(){return null!=this.first&&null!=this.shape},mxConnectionHandler.prototype.isValidSource=function(t,e){return this.graph.isValidSource(t)},mxConnectionHandler.prototype.isValidTarget=function(t){return!0},mxConnectionHandler.prototype.validateConnection=function(t,e){return this.isValidTarget(e)?this.graph.getEdgeValidationError(null,t,e):""},mxConnectionHandler.prototype.getConnectImage=function(t){return this.connectImage},mxConnectionHandler.prototype.isMoveIconToFrontForState=function(t){return null!=t.text&&t.text.node.parentNode==this.graph.container||this.moveIconFront},mxConnectionHandler.prototype.createIcons=function(t){var e,n,i,l=this.getConnectImage(t);return null!=l&&null!=t?(this.iconState=t,e=[],(n=new mxImageShape(new mxRectangle(0,0,l.width,l.height),l.src,null,null,0)).preserveImageAspect=!1,this.isMoveIconToFrontForState(t)?(n.dialect=mxConstants.DIALECT_STRICTHTML,n.init(this.graph.container)):(n.dialect=mxConstants.DIALECT_SVG,n.init(this.graph.getView().getOverlayPane()),this.moveIconBack&&null!=n.node.previousSibling&&n.node.parentNode.insertBefore(n.node,n.node.parentNode.firstChild)),n.node.style.cursor=mxConstants.CURSOR_CONNECT,i=mxUtils.bind(this,function(){return null!=this.currentState?this.currentState:t}),l=mxUtils.bind(this,function(t){mxEvent.isConsumed(t)||(this.icon=n,this.graph.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t,i())))}),mxEvent.redirectMouseEvents(n.node,this.graph,i,l),e.push(n),this.redrawIcons(e,this.iconState),e):null},mxConnectionHandler.prototype.redrawIcons=function(t,e){null!=t&&null!=t[0]&&null!=e&&(e=this.getIconPosition(t[0],e),t[0].bounds.x=e.x,t[0].bounds.y=e.y,t[0].redraw())},mxConnectionHandler.prototype.getIconPosition=function(t,e){var n,i=this.graph.getView().scale,l=e.getCenterX(),s=e.getCenterY();return this.graph.isSwimlane(e.cell)&&(l=0!=(n=this.graph.getStartSize(e.cell)).width?e.x+n.width*i/2:l,s=0!=n.height?e.y+n.height*i/2:s,0!=(n=mxUtils.toRadians(mxUtils.getValue(e.style,mxConstants.STYLE_ROTATION)||0)))&&(i=Math.cos(n),n=Math.sin(n),e=new mxPoint(e.getCenterX(),e.getCenterY()),l=(s=mxUtils.getRotatedPoint(new mxPoint(l,s),i,n,e)).x,s=s.y),new mxPoint(l-t.bounds.width/2,s-t.bounds.height/2)},mxConnectionHandler.prototype.destroyIcons=function(){if(null!=this.icons){for(var t=0;t<this.icons.length;t++)this.icons[t].destroy();this.iconState=this.selectedIcon=this.icon=this.icons=null}},mxConnectionHandler.prototype.isStartEvent=function(t){return null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint||null!=this.previous&&null==this.error&&(null==this.icons||null!=this.icons&&null!=this.icon)},mxConnectionHandler.prototype.mouseDown=function(t,e){var n;this.mouseDownCounter++,this.isEnabled()&&this.graph.isEnabled()&&!e.isConsumed()&&!this.isConnecting()&&this.isStartEvent(e)&&(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(this.sourceConstraint=this.constraintHandler.currentConstraint,this.previous=this.constraintHandler.currentFocus,this.first=this.constraintHandler.currentPoint.clone()):this.first=new mxPoint(e.getGraphX(),e.getGraphY()),this.edgeState=this.createEdgeState(e),this.mouseDownCounter=1,this.waypointsEnabled&&null==this.shape&&(this.waypoints=null,this.shape=this.createShape(),null!=this.edgeState)&&this.shape.apply(this.edgeState),null==this.previous&&null!=this.edgeState&&(n=this.graph.getPointForEvent(e.getEvent()),this.edgeState.cell.geometry.setTerminalPoint(n,!0)),this.fireEvent(new mxEventObject(mxEvent.START,"state",this.previous)),e.consume()),this.selectedIcon=this.icon,this.icon=null},mxConnectionHandler.prototype.isImmediateConnectSource=function(t){return!this.graph.isCellMovable(t.cell)},mxConnectionHandler.prototype.createEdgeState=function(t){return null},mxConnectionHandler.prototype.isOutlineConnectEvent=function(t){var e=mxUtils.getOffset(this.graph.container),n=t.getEvent(),i=mxEvent.getClientX(n),n=mxEvent.getClientY(n),l=document.documentElement,s=this.currentPoint.x-this.graph.container.scrollLeft+e.x-((window.pageXOffset||l.scrollLeft)-(l.clientLeft||0)),e=this.currentPoint.y-this.graph.container.scrollTop+e.y-((window.pageYOffset||l.scrollTop)-(l.clientTop||0));return this.outlineConnect&&!mxEvent.isShiftDown(t.getEvent())&&(t.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(t.getEvent())&&null!=t.getState()||this.marker.highlight.isHighlightAt(i,n)||(s!=i||e!=n)&&null==t.getState()&&this.marker.highlight.isHighlightAt(s,e))},mxConnectionHandler.prototype.updateCurrentState=function(t,e){var n;this.constraintHandler.update(t,null==this.first,!1,null==this.first||t.isSource(this.marker.highlight.shape)?null:e),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint?(null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),null!=this.previous&&(this.error=this.validateConnection(this.previous.cell,this.constraintHandler.currentFocus.cell),null==this.error&&(this.currentState=this.constraintHandler.currentFocus),null!=this.error||null!=this.currentState&&!this.isCellEnabled(this.currentState.cell))&&this.constraintHandler.reset()):(this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),this.currentState=null):(this.marker.process(t),this.currentState=this.marker.getValidState()),null==this.currentState||this.isCellEnabled(this.currentState.cell)||(this.constraintHandler.reset(),this.marker.reset(),this.currentState=null),n=this.isOutlineConnectEvent(t),null!=this.currentState&&n&&(t.isSource(this.marker.highlight.shape)&&(e=new mxPoint(t.getGraphX(),t.getGraphY())),n=this.graph.getOutlineConstraint(e,this.currentState,t),this.constraintHandler.setFocus(t,this.currentState,!1),this.constraintHandler.currentConstraint=n,this.constraintHandler.currentPoint=e),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&(n=this.graph.view.scale,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=mxConstants.OUTLINE_HIGHLIGHT_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.graph.isCellConnectable(t.getCell())&&this.marker.getValidState()!=t.getState()?(this.marker.highlight.shape.stroke="transparent",this.currentState=null):this.marker.highlight.shape.stroke=mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/n/n,this.marker.highlight.repaint())))},mxConnectionHandler.prototype.isCellEnabled=function(t){return!0},mxConnectionHandler.prototype.convertWaypoint=function(t){var e=this.graph.getView().getScale(),n=this.graph.getView().getTranslate();t.x=t.x/e-n.x,t.y=t.y/e-n.y},mxConnectionHandler.prototype.snapToPreview=function(t,e){var n,i;mxEvent.isAltDown(t.getEvent())||null==this.previous||(n=this.graph.gridSize*this.graph.view.scale/2,i=null!=this.sourceConstraint?this.first:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),Math.abs(i.x-t.getGraphX())<n&&(e.x=i.x),Math.abs(i.y-t.getGraphY())<n&&(e.y=i.y))},mxConnectionHandler.prototype.mouseMove=function(t,e){if(e.isConsumed()||!this.ignoreMouseDown&&null==this.first&&this.graph.isMouseDown)this.constraintHandler.reset();else{this.isEnabled()||null==this.currentState||(this.destroyIcons(),this.currentState=null);var n=(l=this.graph.getView()).scale,i=l.translate,l=new mxPoint(e.getGraphX(),e.getGraphY());if(this.error=null,this.graph.isGridEnabledEvent(e.getEvent())&&(l=new mxPoint((this.graph.snap(l.x/n-i.x)+i.x)*n,(this.graph.snap(l.y/n-i.y)+i.y)*n)),this.snapToPreview(e,l),this.currentPoint=l,(null!=this.first||this.isEnabled()&&this.graph.isEnabled())&&(null!=this.shape||null==this.first||Math.abs(e.getGraphX()-this.first.x)>this.graph.tolerance||Math.abs(e.getGraphY()-this.first.y)>this.graph.tolerance)&&this.updateCurrentState(e,l),null!=this.first){var s,o,r=null,n=l;if(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?(r=this.constraintHandler.currentConstraint,n=this.constraintHandler.currentPoint.clone()):null!=this.previous&&!this.graph.isIgnoreTerminalEvent(e.getEvent())&&mxEvent.isShiftDown(e.getEvent())&&(Math.abs(this.previous.getCenterX()-l.x)<Math.abs(this.previous.getCenterY()-l.y)?l.x=this.previous.getCenterX():l.y=this.previous.getCenterY()),i=this.first,null!=this.selectedIcon&&(s=this.selectedIcon.bounds.width,o=this.selectedIcon.bounds.height,null!=this.currentState&&this.targetConnectImage?(s=this.getIconPosition(this.selectedIcon,this.currentState),this.selectedIcon.bounds.x=s.x,this.selectedIcon.bounds.y=s.y):(s=new mxRectangle(e.getGraphX()+this.connectIconOffset.x,e.getGraphY()+this.connectIconOffset.y,s,o),this.selectedIcon.bounds=s),this.selectedIcon.redraw()),null!=this.edgeState?(this.updateEdgeState(n,r),n=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-1],i=this.edgeState.absolutePoints[0]):(null!=this.currentState&&null==this.constraintHandler.currentConstraint&&null!=(s=this.getTargetPerimeterPoint(this.currentState,e))&&(n=s),null==this.sourceConstraint&&null!=this.previous&&null!=(s=this.getSourcePerimeterPoint(this.previous,null!=this.waypoints&&0<this.waypoints.length?this.waypoints[0]:n,e))&&(i=s)),null==this.currentState&&this.movePreviewAway){if(s=i,null!=this.edgeState&&2<=this.edgeState.absolutePoints.length&&null!=(r=this.edgeState.absolutePoints[this.edgeState.absolutePoints.length-2])&&(s=r),r=n.x-s.x,s=n.y-s.y,0==(o=Math.sqrt(r*r+s*s)))return;this.originalPoint=n.clone(),n.x-=4*r/o,n.y-=4*s/o}else this.originalPoint=null;null==this.shape&&(r=Math.abs(e.getGraphX()-this.first.x),s=Math.abs(e.getGraphY()-this.first.y),r>this.graph.tolerance||s>this.graph.tolerance)&&(this.shape=this.createShape(),null!=this.edgeState&&this.shape.apply(this.edgeState),this.updateCurrentState(e,l)),null!=this.shape&&(null!=this.edgeState?this.shape.points=this.edgeState.absolutePoints:(l=[i],(l=null!=this.waypoints?l.concat(this.waypoints):l).push(n),this.shape.points=l),this.drawPreview()),null!=this.cursor&&(this.graph.container.style.cursor=this.cursor),mxEvent.consume(e.getEvent()),e.consume()}else this.isEnabled()&&this.graph.isEnabled()?this.previous!=this.currentState&&null==this.edgeState?(this.destroyIcons(),null!=this.currentState&&null==this.error&&null==this.constraintHandler.currentConstraint&&(this.icons=this.createIcons(this.currentState),null==this.icons)&&(this.currentState.setCursor(mxConstants.CURSOR_CONNECT),e.consume()),this.previous=this.currentState):this.previous!=this.currentState||null==this.currentState||null!=this.icons||this.graph.isMouseDown||e.consume():this.constraintHandler.reset();if(!this.graph.isMouseDown&&null!=this.currentState&&null!=this.icons){for(l=!1,n=e.getSource(),i=0;i<this.icons.length&&!l;i++)l=n==this.icons[i].node||n.parentNode==this.icons[i].node;l||this.updateIcons(this.currentState,this.icons,e)}}},mxConnectionHandler.prototype.updateEdgeState=function(t,e){null!=this.sourceConstraint&&null!=this.sourceConstraint.point&&(this.edgeState.style[mxConstants.STYLE_EXIT_X]=this.sourceConstraint.point.x,this.edgeState.style[mxConstants.STYLE_EXIT_Y]=this.sourceConstraint.point.y),null!=e&&null!=e.point?(this.edgeState.style[mxConstants.STYLE_ENTRY_X]=e.point.x,this.edgeState.style[mxConstants.STYLE_ENTRY_Y]=e.point.y):(delete this.edgeState.style[mxConstants.STYLE_ENTRY_X],delete this.edgeState.style[mxConstants.STYLE_ENTRY_Y]),this.edgeState.absolutePoints=[null,null!=this.currentState?null:t],this.graph.view.updateFixedTerminalPoint(this.edgeState,this.previous,!0,this.sourceConstraint),null!=this.currentState&&(null==e&&(e=this.graph.getConnectionConstraint(this.edgeState,this.previous,!1)),this.edgeState.setAbsoluteTerminalPoint(null,!1),this.graph.view.updateFixedTerminalPoint(this.edgeState,this.currentState,!1,e));var n=null;if(null!=this.waypoints)for(var n=[],i=0;i<this.waypoints.length;i++){var l=this.waypoints[i].clone();this.convertWaypoint(l),n[i]=l}this.graph.view.updatePoints(this.edgeState,n,this.previous,this.currentState),this.graph.view.updateFloatingTerminalPoints(this.edgeState,this.previous,this.currentState)},mxConnectionHandler.prototype.getTargetPerimeterPoint=function(t,e){var n,i=null,l=t.view,s=l.getPerimeterFunction(t);return null!=s?(n=null!=this.waypoints&&0<this.waypoints.length?this.waypoints[this.waypoints.length-1]:new mxPoint(this.previous.getCenterX(),this.previous.getCenterY()),null!=(l=s(l.getPerimeterBounds(t),this.edgeState,n,!1))&&(i=l)):i=new mxPoint(t.getCenterX(),t.getCenterY()),i},mxConnectionHandler.prototype.getSourcePerimeterPoint=function(t,e,n){n=null;var i,l,s=t.view,o=s.getPerimeterFunction(t),r=new mxPoint(t.getCenterX(),t.getCenterY());return null!=o?(i=mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0),l=Math.PI/180*-i,0!=i&&(e=mxUtils.getRotatedPoint(new mxPoint(e.x,e.y),Math.cos(l),Math.sin(l),r)),null!=(t=o(s.getPerimeterBounds(t),t,e,!1))&&(n=t=0!=i?mxUtils.getRotatedPoint(new mxPoint(t.x,t.y),Math.cos(-l),Math.sin(-l),r):t)):n=r,n},mxConnectionHandler.prototype.updateIcons=function(t,e,n){},mxConnectionHandler.prototype.isStopEvent=function(t){return null!=t.getState()},mxConnectionHandler.prototype.addWaypointForEvent=function(t){var e=mxUtils.convertPoint(this.graph.container,t.getX(),t.getY()),n=Math.abs(e.x-this.first.x),e=Math.abs(e.y-this.first.y);(null!=this.waypoints||1<this.mouseDownCounter&&(n>this.graph.tolerance||e>this.graph.tolerance))&&(null==this.waypoints&&(this.waypoints=[]),n=this.graph.view.scale,e=new mxPoint(this.graph.snap(t.getGraphX()/n)*n,this.graph.snap(t.getGraphY()/n)*n),this.waypoints.push(e))},mxConnectionHandler.prototype.checkConstraints=function(t,e){return null==t||null==e||null==t.point||null==e.point||!t.point.equals(e.point)||t.dx!=e.dx||t.dy!=e.dy||t.perimeter!=e.perimeter},mxConnectionHandler.prototype.mouseUp=function(t,e){if(!e.isConsumed()&&this.isConnecting()){if(this.waypointsEnabled&&!this.isStopEvent(e))return this.addWaypointForEvent(e),void e.consume();var n=this.sourceConstraint,i=this.constraintHandler.currentConstraint,l=null!=this.previous?this.previous.cell:null,s=null;null==(s=null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?this.constraintHandler.currentFocus.cell:s)&&null!=this.currentState&&(s=this.currentState.cell),null!=this.error||null!=l&&null!=s&&l==s&&!this.checkConstraints(n,i)?(null!=this.previous&&null!=this.marker.validState&&this.previous.cell==this.marker.validState.cell&&this.graph.selectCellForEvent(this.marker.source,e.getEvent()),null!=this.error&&0<this.error.length&&this.graph.validationAlert(this.error)):this.connect(l,s,e.getEvent(),e.getCell()),this.destroyIcons(),e.consume()}null!=this.first&&this.reset()},mxConnectionHandler.prototype.reset=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.cursor&&null!=this.graph.container&&(this.graph.container.style.cursor=""),this.destroyIcons(),this.marker.reset(),this.constraintHandler.reset(),this.sourceConstraint=this.error=this.previous=this.edgeState=this.currentPoint=this.originalPoint=null,this.mouseDownCounter=0,this.first=null,this.fireEvent(new mxEventObject(mxEvent.RESET))},mxConnectionHandler.prototype.drawPreview=function(){this.updatePreview(null==this.error),this.shape.redraw()},mxConnectionHandler.prototype.updatePreview=function(t){this.shape.strokewidth=this.getEdgeWidth(t),this.shape.stroke=this.getEdgeColor(t)},mxConnectionHandler.prototype.getEdgeColor=function(t){return t?mxConstants.VALID_COLOR:mxConstants.INVALID_COLOR},mxConnectionHandler.prototype.getEdgeWidth=function(t){return t?3:1},mxConnectionHandler.prototype.connect=function(t,e,n,i){if(null!=e||this.isCreateTarget(n)||this.graph.allowDanglingEdges){var l=this.graph.getModel(),s=!1,o=null;l.beginUpdate();try{null!=t&&null==e&&!this.graph.isIgnoreTerminalEvent(n)&&this.isCreateTarget(n)&&null!=(e=this.createTargetVertex(n,t))&&(i=this.graph.getDropTarget([e],n,i),s=!0,null!=i&&this.graph.getModel().isEdge(i)?i=this.graph.getDefaultParent():null!=(r=this.graph.getView().getState(i))&&((a=l.getGeometry(e)).x-=r.origin.x,a.y-=r.origin.y),this.graph.addCell(e,i));var r,a,h=this.graph.getDefaultParent(),d=(null!=t&&null!=e&&l.getParent(t)==l.getParent(e)&&l.getParent(l.getParent(t))!=l.getRoot()&&(h=l.getParent(t),null!=t.geometry)&&t.geometry.relative&&null!=e.geometry&&e.geometry.relative&&(h=l.getParent(h)),r=null);if(null!=this.edgeState&&(r=this.edgeState.cell.value,d=this.edgeState.cell.style),null!=(o=this.insertEdge(h,null,r,t,e,d))){if(this.graph.setConnectionConstraint(o,t,!0,this.sourceConstraint),this.graph.setConnectionConstraint(o,e,!1,this.constraintHandler.currentConstraint),null!=this.edgeState&&l.setGeometry(o,this.edgeState.cell.geometry),h=l.getParent(t),this.isInsertBefore(o,t,e,n,i)){for(a=t;null!=a.parent&&null!=a.geometry&&a.geometry.relative&&a.parent!=o.parent;)a=this.graph.model.getParent(a);null!=a&&null!=a.parent&&a.parent==o.parent&&l.add(h,o,a.parent.getIndex(a))}var u,p=l.getGeometry(o);if(null==p&&((p=new mxGeometry).relative=!0,l.setGeometry(o,p)),null!=this.waypoints&&0<this.waypoints.length){var c=this.graph.view.scale,m=this.graph.view.translate;for(p.points=[],t=0;t<this.waypoints.length;t++){var g=this.waypoints[t];p.points.push(new mxPoint(g.x/c-m.x,g.y/c-m.y))}}null==e&&(u=this.graph.view.translate,c=this.graph.view.scale,(g=null!=this.originalPoint?new mxPoint(this.originalPoint.x/c-u.x,this.originalPoint.y/c-u.y):new mxPoint(this.currentPoint.x/c-u.x,this.currentPoint.y/c-u.y)).x-=this.graph.panDx/this.graph.view.scale,g.y-=this.graph.panDy/this.graph.view.scale,p.setTerminalPoint(g,!1)),this.fireEvent(new mxEventObject(mxEvent.CONNECT,"cell",o,"terminal",e,"event",n,"target",i,"terminalInserted",s))}}catch(t){mxLog.show(),mxLog.debug(t.message)}finally{l.endUpdate()}this.select&&this.selectCells(o,s?e:null)}},mxConnectionHandler.prototype.selectCells=function(t,e){this.graph.setSelectionCell(t)},mxConnectionHandler.prototype.insertEdge=function(t,e,n,i,l,s){return null==this.factoryMethod?this.graph.insertEdge(t,e,n,i,l,s):(e=this.createEdge(n,i,l,s),this.graph.addEdge(e,t,i,l))},mxConnectionHandler.prototype.createTargetVertex=function(t,e){for(var n=this.graph.getCellGeometry(e);null!=n&&n.relative;)e=this.graph.getModel().getParent(e),n=this.graph.getCellGeometry(e);var i,l,s,o,r,a=this.graph.cloneCell(e);return null!=(n=this.graph.getModel().getGeometry(a))&&(r=this.graph.view.translate,i=this.graph.view.scale,l=new mxPoint(this.currentPoint.x/i-r.x,this.currentPoint.y/i-r.y),n.x=Math.round(l.x-n.width/2-this.graph.panDx/i),n.y=Math.round(l.y-n.height/2-this.graph.panDy/i),0<(l=this.getAlignmentTolerance()))&&null!=(s=this.graph.view.getState(e))&&(o=s.x/i-r.x,r=s.y/i-r.y,Math.abs(o-n.x)<=l&&(n.x=Math.round(o)),Math.abs(r-n.y)<=l)&&(n.y=Math.round(r)),a},mxConnectionHandler.prototype.getAlignmentTolerance=function(t){return this.graph.isGridEnabled()?this.graph.gridSize/2:this.graph.tolerance},mxConnectionHandler.prototype.createEdge=function(t,e,n,i){var l=null;return null==(l=null!=this.factoryMethod?this.factoryMethod(e,n,i):l)&&((l=new mxCell(t||"")).setEdge(!0),l.setStyle(i),(t=new mxGeometry).relative=!0,l.setGeometry(t)),l},mxConnectionHandler.prototype.destroy=function(){this.graph.removeMouseListener(this),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getView().removeListener(this.changeHandler),this.changeHandler=null),null!=this.drillHandler&&(this.graph.removeListener(this.drillHandler),this.graph.getView().removeListener(this.drillHandler),this.drillHandler=null),null!=this.escapeHandler&&(this.graph.removeListener(this.escapeHandler),this.escapeHandler=null)},mxConstraintHandler.prototype.pointImage=new mxImage(mxClient.imageBasePath+"/point.gif",5,5),mxConstraintHandler.prototype.graph=null,mxConstraintHandler.prototype.enabled=!0,mxConstraintHandler.prototype.highlightColor=mxConstants.DEFAULT_VALID_COLOR,mxConstraintHandler.prototype.isEnabled=function(){return this.enabled},mxConstraintHandler.prototype.setEnabled=function(t){this.enabled=t},mxConstraintHandler.prototype.reset=function(){if(null!=this.focusIcons){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusIcons=null}null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null),this.focusPoints=this.currentFocus=this.currentPoint=this.currentFocusArea=this.currentConstraint=null},mxConstraintHandler.prototype.getTolerance=function(t){return this.graph.getTolerance()},mxConstraintHandler.prototype.getImageForConstraint=function(t,e,n){return this.pointImage},mxConstraintHandler.prototype.isEventIgnored=function(t,e){return!1},mxConstraintHandler.prototype.isStateIgnored=function(t,e){return!1},mxConstraintHandler.prototype.destroyIcons=function(){if(null!=this.focusIcons){for(var t=0;t<this.focusIcons.length;t++)this.focusIcons[t].destroy();this.focusPoints=this.focusIcons=null}},mxConstraintHandler.prototype.destroyFocusHighlight=function(){null!=this.focusHighlight&&(this.focusHighlight.destroy(),this.focusHighlight=null)},mxConstraintHandler.prototype.isKeepFocusEvent=function(t){return mxEvent.isShiftDown(t.getEvent())},mxConstraintHandler.prototype.getCellForEvent=function(t,e){var n=t.getCell();return null==(n=null!=n||null==e||t.getGraphX()==e.x&&t.getGraphY()==e.y?n:this.graph.getCellAt(e.x,e.y))||this.graph.isCellConnectable(n)||(t=this.graph.getModel().getParent(n),this.graph.getModel().isVertex(t)&&this.graph.isCellConnectable(t)&&(n=t)),this.graph.isCellLocked(n)?null:n},mxConstraintHandler.prototype.update=function(t,e,n,i){if(this.isEnabled()&&!this.isEventIgnored(t)){null==this.mouseleaveHandler&&null!=this.graph.container&&(this.mouseleaveHandler=mxUtils.bind(this,function(){this.reset()}),mxEvent.addListener(this.graph.container,"mouseleave",this.resetHandler));var l=this.getTolerance(t),s=new mxRectangle((null!=i?i.x:t.getGraphX())-l,(null!=i?i.y:t.getGraphY())-l,2*l,2*l),l=new mxRectangle(t.getGraphX()-l,t.getGraphY()-l,2*l,2*l),o=this.graph.view.getState(this.getCellForEvent(t,i));if(this.isKeepFocusEvent(t)||null!=this.currentFocusArea&&null!=this.currentFocus&&null==o&&this.graph.getModel().isVertex(this.currentFocus.cell)&&mxUtils.intersects(this.currentFocusArea,l)||o==this.currentFocus||(this.currentFocus=this.currentFocusArea=null,this.setFocus(t,o,e)),(t=this.currentPoint=this.currentConstraint=null)!=this.focusIcons&&null!=this.constraints&&(null==o||this.currentFocus==o))for(var r=l.getCenterX(),a=l.getCenterY(),h=0;h<this.focusIcons.length;h++){var d,u=r-this.focusIcons[h].bounds.getCenterX(),p=a-this.focusIcons[h].bounds.getCenterY(),u=u*u+p*p;(this.intersects(this.focusIcons[h],l,e,n)||null!=i&&this.intersects(this.focusIcons[h],s,e,n))&&(null==t||u<t)&&(this.currentConstraint=this.constraints[h],this.currentPoint=this.focusPoints[h],t=u,(u=this.focusIcons[h].bounds.clone()).grow(mxConstants.HIGHLIGHT_SIZE+1),--u.width,--u.height,null==this.focusHighlight&&((p=this.createHighlightShape()).dialect=mxConstants.DIALECT_SVG,p.pointerEvents=!1,p.init(this.graph.getView().getOverlayPane()),this.focusHighlight=p,d=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:o}),mxEvent.redirectMouseEvents(p.node,this.graph,d)),this.focusHighlight.bounds=u,this.focusHighlight.redraw())}null==this.currentConstraint&&this.destroyFocusHighlight()}else this.currentPoint=this.currentFocus=this.currentConstraint=null},mxConstraintHandler.prototype.redraw=function(){if(null!=this.currentFocus&&null!=this.constraints&&null!=this.focusIcons){var t=this.graph.view.getState(this.currentFocus.cell);this.currentFocus=t,this.currentFocusArea=new mxRectangle(t.x,t.y,t.width,t.height);for(var e=0;e<this.constraints.length;e++){var n=this.graph.getConnectionPoint(t,this.constraints[e]),i=this.getImageForConstraint(t,this.constraints[e],n),i=new mxRectangle(Math.round(n.x-i.width/2),Math.round(n.y-i.height/2),i.width,i.height);this.focusIcons[e].bounds=i,this.focusIcons[e].redraw(),this.currentFocusArea.add(this.focusIcons[e].bounds),this.focusPoints[e]=n}}},mxConstraintHandler.prototype.setFocus=function(t,e,n){if(this.constraints=null!=e&&!this.isStateIgnored(e,n)&&this.graph.isCellConnectable(e.cell)?this.isEnabled()&&this.graph.getAllConnectionConstraints(e,n)||[]:null,null!=this.constraints){if(this.currentFocus=e,this.currentFocusArea=new mxRectangle(e.x,e.y,e.width,e.height),null!=this.focusIcons){for(n=0;n<this.focusIcons.length;n++)this.focusIcons[n].destroy();this.focusPoints=this.focusIcons=null}for(this.focusPoints=[],this.focusIcons=[],n=0;n<this.constraints.length;n++){var i=this.graph.getConnectionPoint(e,this.constraints[n]),l=this.getImageForConstraint(e,this.constraints[n],i),s=l.src;(s=new mxImageShape(new mxRectangle(Math.round(i.x-l.width/2),Math.round(i.y-l.height/2),l.width,l.height),s)).dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,s.preserveImageAspect=!1,s.init(this.graph.getView().getDecoratorPane()),null!=s.node.previousSibling&&s.node.parentNode.insertBefore(s.node,s.node.parentNode.firstChild),l=mxUtils.bind(this,function(){return null!=this.currentFocus?this.currentFocus:e}),s.redraw(),mxEvent.redirectMouseEvents(s.node,this.graph,l),this.currentFocusArea.add(s.bounds),this.focusIcons.push(s),this.focusPoints.push(i)}this.currentFocusArea.grow(this.getTolerance(t))}else this.destroyIcons(),this.destroyFocusHighlight()},mxConstraintHandler.prototype.createHighlightShape=function(){var t=new mxRectangleShape(null,this.highlightColor,this.highlightColor,mxConstants.HIGHLIGHT_STROKEWIDTH);return t.opacity=mxConstants.HIGHLIGHT_OPACITY,t},mxConstraintHandler.prototype.intersects=function(t,e,n,i){return mxUtils.intersects(t.bounds,e)},mxConstraintHandler.prototype.destroy=function(){this.reset(),null!=this.resetHandler&&(this.graph.model.removeListener(this.resetHandler),this.graph.view.removeListener(this.resetHandler),this.graph.removeListener(this.resetHandler),this.resetHandler=null),null!=this.mouseleaveHandler&&null!=this.graph.container&&(mxEvent.removeListener(this.graph.container,"mouseleave",this.mouseleaveHandler),this.mouseleaveHandler=null)},mxRubberband.prototype.defaultOpacity=20,mxRubberband.prototype.enabled=!0,mxRubberband.prototype.div=null,mxRubberband.prototype.sharedDiv=null,mxRubberband.prototype.currentX=0,mxRubberband.prototype.currentY=0,mxRubberband.prototype.fadeOut=!1,mxRubberband.prototype.isEnabled=function(){return this.enabled},mxRubberband.prototype.setEnabled=function(t){this.enabled=t},mxRubberband.prototype.isForceRubberbandEvent=function(t){return mxEvent.isAltDown(t.getEvent())},mxRubberband.prototype.mouseDown=function(t,e){var n,i;!e.isConsumed()&&this.isEnabled()&&this.graph.isEnabled()&&null==e.getState()&&!mxEvent.isMultiTouchEvent(e.getEvent())&&(n=mxUtils.getOffset(this.graph.container),(i=mxUtils.getScrollOrigin(this.graph.container)).x-=n.x,i.y-=n.y,this.start(e.getX()+i.x,e.getY()+i.y),e.consume(!1))},mxRubberband.prototype.start=function(t,e){function n(t){t=new mxMouseEvent(t);var e=mxUtils.convertPoint(i,t.getX(),t.getY());return t.graphX=e.x,t.graphY=e.y,t}this.first=new mxPoint(t,e);var i=this.graph.container;this.dragHandler=mxUtils.bind(this,function(t){this.mouseMove(this.graph,n(t))}),this.dropHandler=mxUtils.bind(this,function(t){this.mouseUp(this.graph,n(t))}),mxClient.IS_FF&&mxEvent.addGestureListeners(document,null,this.dragHandler,this.dropHandler)},mxRubberband.prototype.mouseMove=function(t,e){var n,i,l,s,o;!e.isConsumed()&&null!=this.first&&(i=mxUtils.getScrollOrigin(this.graph.container),n=mxUtils.getOffset(this.graph.container),i.x-=n.x,i.y-=n.y,n=e.getX()+i.x,i=e.getY()+i.y,l=this.first.x-n,s=this.first.y-i,o=this.graph.tolerance,null!=this.div||Math.abs(l)>o||Math.abs(s)>o)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(n,i),e.consume())},mxRubberband.prototype.createShape=function(){null==this.sharedDiv&&(this.sharedDiv=document.createElement("div"),this.sharedDiv.className="mxRubberband",mxUtils.setOpacity(this.sharedDiv,this.defaultOpacity)),this.graph.container.appendChild(this.sharedDiv);var t=this.sharedDiv;return mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut&&(this.sharedDiv=null),t},mxRubberband.prototype.isActive=function(t,e){return null!=this.div&&"none"!=this.div.style.display},mxRubberband.prototype.mouseUp=function(t,e){var n=this.isActive();this.reset(),n&&(this.execute(e.getEvent()),e.consume())},mxRubberband.prototype.execute=function(t){var e=new mxRectangle(this.x,this.y,this.width,this.height);this.graph.selectRegion(e,t)},mxRubberband.prototype.reset=function(){var t;null!=this.div&&(mxClient.IS_SVG&&(!mxClient.IS_IE||10<=document.documentMode)&&this.fadeOut?(t=this.div,mxUtils.setPrefixedStyle(t.style,"transition","all 0.2s linear"),t.style.pointerEvents="none",t.style.opacity=0,window.setTimeout(function(){t.parentNode.removeChild(t)},200)):this.div.parentNode.removeChild(this.div)),mxEvent.removeGestureListeners(document,null,this.dragHandler,this.dropHandler),this.dropHandler=this.dragHandler=null,this.currentY=this.currentX=0,this.div=this.first=null},mxRubberband.prototype.update=function(t,e){this.currentX=t,this.currentY=e,this.repaint()},mxRubberband.prototype.repaint=function(){var t,e;null!=this.div&&(t=this.currentX-this.graph.panDx,e=this.currentY-this.graph.panDy,this.x=Math.min(this.first.x,t),this.y=Math.min(this.first.y,e),this.width=Math.max(this.first.x,t)-this.x,this.height=Math.max(this.first.y,e)-this.y,this.div.style.left=this.x+0+"px",this.div.style.top=this.y+0+"px",this.div.style.width=Math.max(1,this.width)+"px",this.div.style.height=Math.max(1,this.height)+"px")},mxRubberband.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),this.graph.removeListener(this.forceRubberbandHandler),this.graph.removeListener(this.panHandler),this.reset(),null!=this.sharedDiv&&(this.sharedDiv=null))},mxHandle.prototype.cursor="default",mxHandle.prototype.image=null,mxHandle.prototype.ignoreGrid=!1,mxHandle.prototype.getPosition=function(t){},mxHandle.prototype.setPosition=function(t,e,n){},mxHandle.prototype.execute=function(t){},mxHandle.prototype.copyStyle=function(t){this.graph.setCellStyles(t,this.state.style[t],[this.state.cell])},mxHandle.prototype.processEvent=function(t){var e=this.graph.view.scale,n=this.graph.view.translate,n=new mxPoint(t.getGraphX()/e-n.x,t.getGraphY()/e-n.y),e=(null!=this.shape&&null!=this.shape.bounds&&(n.x-=this.shape.bounds.width/e/4,n.y-=this.shape.bounds.height/e/4),-mxUtils.toRadians(this.getRotation())),i=-mxUtils.toRadians(this.getTotalRotation())-e,n=this.flipPoint(this.rotatePoint(this.snapPoint(this.rotatePoint(n,e),this.ignoreGrid||!this.graph.isGridEnabledEvent(t.getEvent())),i));this.setPosition(this.state.getPaintBounds(),n,t),this.redraw()},mxHandle.prototype.positionChanged=function(){null!=this.state.text&&this.state.text.apply(this.state),null!=this.state.shape&&this.state.shape.apply(this.state),this.graph.cellRenderer.redraw(this.state,!0)},mxHandle.prototype.getRotation=function(){return null!=this.state.shape?this.state.shape.getRotation():0},mxHandle.prototype.getTotalRotation=function(){return null!=this.state.shape?this.state.shape.getShapeRotation():0},mxHandle.prototype.init=function(){var t=this.isHtmlRequired();null!=this.image?(this.shape=new mxImageShape(new mxRectangle(0,0,this.image.width,this.image.height),this.image.src),this.shape.preserveImageAspect=!1):null==this.shape&&(this.shape=this.createShape(t)),this.initShape(t)},mxHandle.prototype.createShape=function(t){return new mxRectangleShape(new mxRectangle(0,0,mxConstants.HANDLE_SIZE,mxConstants.HANDLE_SIZE),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxHandle.prototype.initShape=function(t){t&&this.shape.isHtmlAllowed()?(this.shape.dialect=mxConstants.DIALECT_STRICTHTML,this.shape.init(this.graph.container)):(this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,null!=this.cursor&&this.shape.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.shape.node.style.cursor=this.cursor},mxHandle.prototype.redraw=function(){var t,e,n;null!=this.shape&&null!=this.state.shape&&null!=(t=this.getPosition(this.state.getPaintBounds()))&&(e=mxUtils.toRadians(this.getTotalRotation()),t=this.rotatePoint(this.flipPoint(t),e),e=this.graph.view.scale,n=this.graph.view.translate,this.shape.bounds.x=Math.floor((t.x+n.x)*e-this.shape.bounds.width/2),this.shape.bounds.y=Math.floor((t.y+n.y)*e-this.shape.bounds.height/2),this.shape.redraw())},mxHandle.prototype.isHtmlRequired=function(){return null!=this.state.text&&this.state.text.node.parentNode==this.graph.container},mxHandle.prototype.rotatePoint=function(t,e){var n=new mxPoint((n=this.state.getCellBounds()).getCenterX(),n.getCenterY());return mxUtils.getRotatedPoint(t,Math.cos(e),Math.sin(e),n)},mxHandle.prototype.flipPoint=function(t){var e;return null!=this.state.shape&&(e=this.state.getCellBounds(),this.state.shape.flipH&&(t.x=2*e.x+e.width-t.x),this.state.shape.flipV)&&(t.y=2*e.y+e.height-t.y),t},mxHandle.prototype.snapPoint=function(t,e){return e||(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t},mxHandle.prototype.setVisible=function(t){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display=t?"":"none")},mxHandle.prototype.reset=function(){this.setVisible(!0),this.state.style=this.graph.getCellStyle(this.state.cell),this.positionChanged()},mxHandle.prototype.destroy=function(){null!=this.shape&&(this.shape.destroy(),this.shape=null)},mxVertexHandler.prototype.graph=null,mxVertexHandler.prototype.state=null,mxVertexHandler.prototype.singleSizer=!1,mxVertexHandler.prototype.index=null,mxVertexHandler.prototype.allowHandleBoundsCheck=!0,mxVertexHandler.prototype.handleImage=null,mxVertexHandler.prototype.handlesVisible=!0,mxVertexHandler.prototype.tolerance=0,mxVertexHandler.prototype.rotationEnabled=!1,mxVertexHandler.prototype.parentHighlightEnabled=!1,mxVertexHandler.prototype.rotationRaster=!0,mxVertexHandler.prototype.rotationCursor="crosshair",mxVertexHandler.prototype.livePreview=!1,mxVertexHandler.prototype.movePreviewToFront=!1,mxVertexHandler.prototype.manageSizers=!1,mxVertexHandler.prototype.constrainGroupByChildren=!1,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxVertexHandler.prototype.horizontalOffset=0,mxVertexHandler.prototype.verticalOffset=0,mxVertexHandler.prototype.init=function(){var t,e;this.graph=this.state.view.graph,this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.selectionBorder=this.createSelectionShape(this.bounds),this.selectionBorder.dialect=mxConstants.DIALECT_SVG,this.selectionBorder.pointerEvents=!1,this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.selectionBorder.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(this.selectionBorder.node,this.graph,this.state),this.graph.isCellMovable(this.state.cell)&&this.selectionBorder.setCursor(mxConstants.CURSOR_MOVABLE_VERTEX),(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)&&(t=this.graph.isCellResizable(this.state.cell),this.sizers=[],t||this.graph.isLabelMovable(this.state.cell)&&2<=this.state.width&&2<=this.state.height?(e=0,t&&(this.singleSizer||(this.sizers.push(this.createSizer("nw-resize",e++)),this.sizers.push(this.createSizer("n-resize",e++)),this.sizers.push(this.createSizer("ne-resize",e++)),this.sizers.push(this.createSizer("w-resize",e++)),this.sizers.push(this.createSizer("e-resize",e++)),this.sizers.push(this.createSizer("sw-resize",e++)),this.sizers.push(this.createSizer("s-resize",e++))),this.sizers.push(this.createSizer("se-resize",e++))),null==(t=this.graph.model.getGeometry(this.state.cell))||t.relative||this.graph.isSwimlane(this.state.cell)||!this.graph.isLabelMovable(this.state.cell)||(this.labelShape=this.createSizer(mxConstants.CURSOR_LABEL_HANDLE,mxEvent.LABEL_HANDLE,mxConstants.LABEL_HANDLE_SIZE,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))):this.graph.isCellMovable(this.state.cell)&&!this.graph.isCellResizable(this.state.cell)&&this.state.width<2&&this.state.height<2&&(this.labelShape=this.createSizer(mxConstants.CURSOR_MOVABLE_VERTEX,mxEvent.LABEL_HANDLE,null,mxConstants.LABEL_HANDLE_FILLCOLOR),this.sizers.push(this.labelShape))),this.isRotationHandleVisible()&&(this.rotationShape=this.createSizer(this.rotationCursor,mxEvent.ROTATION_HANDLE,mxConstants.HANDLE_SIZE+3,mxConstants.HANDLE_FILLCOLOR),this.sizers.push(this.rotationShape)),this.customHandles=this.createCustomHandles(),this.redraw(),this.constrainGroupByChildren&&this.updateMinBounds()},mxVertexHandler.prototype.isRotationHandleVisible=function(){return this.graph.isEnabled()&&this.rotationEnabled&&this.graph.isCellRotatable(this.state.cell)&&(mxGraphHandler.prototype.maxCells<=0||this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells)},mxVertexHandler.prototype.isConstrainedEvent=function(t){return mxEvent.isShiftDown(t.getEvent())||"fixed"==this.state.style[mxConstants.STYLE_ASPECT]},mxVertexHandler.prototype.isCenteredEvent=function(t,e){return!1},mxVertexHandler.prototype.createCustomHandles=function(){return null},mxVertexHandler.prototype.updateMinBounds=function(){var t,e=this.graph.getChildCells(this.state.cell);0<e.length&&(this.minBounds=this.graph.view.getBounds(e),null!=this.minBounds)&&(e=this.state.view.scale,t=this.state.view.translate,this.minBounds.x-=this.state.x,this.minBounds.y-=this.state.y,this.minBounds.x/=e,this.minBounds.y/=e,this.minBounds.width/=e,this.minBounds.height/=e,this.x0=this.state.x/e-t.x,this.y0=this.state.y/e-t.y)},mxVertexHandler.prototype.getSelectionBounds=function(t){return new mxRectangle(Math.round(t.x),Math.round(t.y),Math.round(t.width),Math.round(t.height))},mxVertexHandler.prototype.createParentHighlightShape=function(t){return this.createSelectionShape(t)},mxVertexHandler.prototype.createSelectionShape=function(t){return(t=new mxRectangleShape(mxRectangle.fromRectangle(t),null,this.getSelectionColor())).strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxVertexHandler.prototype.getSelectionColor=function(){return mxConstants.VERTEX_SELECTION_COLOR},mxVertexHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.VERTEX_SELECTION_STROKEWIDTH},mxVertexHandler.prototype.isSelectionDashed=function(){return mxConstants.VERTEX_SELECTION_DASHED},mxVertexHandler.prototype.createSizer=function(t,e,n,i){return n=new mxRectangle(0,0,n=n||mxConstants.HANDLE_SIZE,n),(i=this.createSizerShape(n,e,i)).isHtmlAllowed()&&null!=this.state.text&&this.state.text.node.parentNode==this.graph.container?(--i.bounds.height,--i.bounds.width,i.dialect=mxConstants.DIALECT_STRICTHTML,i.init(this.graph.container)):(i.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,i.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(i.node,this.graph,this.state),this.graph.isEnabled()&&i.setCursor(t),this.isSizerVisible(e)||(i.visible=!1),i},mxVertexHandler.prototype.isSizerVisible=function(t){return!0},mxVertexHandler.prototype.createSizerShape=function(t,e,n){return null!=this.handleImage?((t=new mxImageShape(t=new mxRectangle(t.x,t.y,this.handleImage.width,this.handleImage.height),this.handleImage.src)).preserveImageAspect=!1,t):new(e==mxEvent.ROTATION_HANDLE?mxEllipse:mxRectangleShape)(t,n||mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxVertexHandler.prototype.moveSizerTo=function(t,e,n){null!=t&&(t.bounds.x=Math.floor(e-t.bounds.width/2),t.bounds.y=Math.floor(n-t.bounds.height/2),null!=t.node)&&"none"!=t.node.style.display&&t.redraw()},mxVertexHandler.prototype.getHandleForEvent=function(n){var t=mxEvent.isMouseEvent(n.getEvent())?1:this.tolerance,i=this.allowHandleBoundsCheck&&(mxClient.IS_IE||0<t)?new mxRectangle(n.getGraphX()-t,n.getGraphY()-t,2*t,2*t):null;if((t=mxUtils.bind(this,function(t){var e=null!=(e=null!=t&&t.constructor!=mxImageShape&&this.allowHandleBoundsCheck?t.strokewidth+t.svgStrokeTolerance:null)?new mxRectangle(n.getGraphX()-Math.floor(e/2),n.getGraphY()-Math.floor(e/2),e,e):i;return null!=t&&(n.isSource(t)||null!=e&&mxUtils.intersects(t.bounds,e)&&"none"!=t.node.style.display&&"hidden"!=t.node.style.visibility)}))(this.rotationShape))return mxEvent.ROTATION_HANDLE;if(t(this.labelShape))return mxEvent.LABEL_HANDLE;if(null!=this.sizers)for(var e=0;e<this.sizers.length;e++)if(t(this.sizers[e]))return e;if(null!=this.customHandles&&this.isCustomHandleEvent(n))for(e=this.customHandles.length-1;0<=e;e--)if(t(this.customHandles[e].shape))return mxEvent.CUSTOM_HANDLE-e;return null},mxVertexHandler.prototype.isCustomHandleEvent=function(t){return!0},mxVertexHandler.prototype.mouseDown=function(t,e){var n;!e.isConsumed()&&this.graph.isEnabled()&&null!=(n=this.getHandleForEvent(e))&&(this.start(e.getGraphX(),e.getGraphY(),n),e.consume())},mxVertexHandler.prototype.isLivePreviewBorder=function(){return null!=this.state.shape&&null==this.state.shape.fill&&null==this.state.shape.stroke},mxVertexHandler.prototype.start=function(t,e,n){if(null!=this.selectionBorder)if(this.livePreviewActive=this.livePreview&&0==this.graph.model.getChildCount(this.state.cell),this.inTolerance=!0,this.childOffsetY=this.childOffsetX=0,this.index=n,this.startX=t,this.startY=e,this.index<=mxEvent.CUSTOM_HANDLE&&this.isGhostPreview())this.ghostPreview=this.createGhostPreview();else if(e=(t=this.state.view.graph.model).getParent(this.state.cell),this.state.view.currentRoot!=e&&(t.isVertex(e)||t.isEdge(e))&&(this.parentState=this.state.view.graph.view.getState(e)),this.selectionBorder.node.style.display=n==mxEvent.ROTATION_HANDLE?"inline":"none",this.livePreviewActive&&!this.isLivePreviewBorder()||(this.preview=this.createSelectionShape(this.bounds),mxClient.IS_SVG&&0!=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")||null==this.state.text||this.state.text.node.parentNode!=this.graph.container?(this.preview.dialect=mxConstants.DIALECT_SVG,this.preview.init(this.graph.view.getOverlayPane())):(this.preview.dialect=mxConstants.DIALECT_STRICTHTML,this.preview.init(this.graph.container))),n==mxEvent.ROTATION_HANDLE&&(t=(e=this.getRotationHandlePosition()).x-this.state.getCenterX(),e=e.y-this.state.getCenterY(),this.startAngle=0!=t?180*Math.atan(e/t)/Math.PI+90:0,this.startDist=Math.sqrt(t*t+e*e)),this.livePreviewActive)for(this.hideSizers(),n==mxEvent.ROTATION_HANDLE?this.rotationShape.node.style.display="":n==mxEvent.LABEL_HANDLE?this.labelShape.node.style.display="":null!=this.sizers&&null!=this.sizers[n]?this.sizers[n].node.style.display="":n<=mxEvent.CUSTOM_HANDLE&&null!=this.customHandles&&this.customHandles[mxEvent.CUSTOM_HANDLE-n].setVisible(!0),n=this.graph.getEdges(this.state.cell),this.edgeHandlers=[],t=0;t<n.length;t++)null!=(e=this.graph.selectionCellsHandler.getHandler(n[t]))&&this.edgeHandlers.push(e)},mxVertexHandler.prototype.createGhostPreview=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.init(this.graph.view.getOverlayPane()),t.scale=this.state.view.scale,t.bounds=this.bounds,t.outline=!0,t},mxVertexHandler.prototype.setHandlesVisible=function(t){if(this.handlesVisible=t,null!=this.sizers)for(var e=0;e<this.sizers.length;e++)this.sizers[e].node.style.display=t?"":"none";if(null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].setVisible(t)},mxVertexHandler.prototype.hideSizers=function(){this.setHandlesVisible(!1)},mxVertexHandler.prototype.checkTolerance=function(t){this.inTolerance&&null!=this.startX&&null!=this.startY&&(mxEvent.isMouseEvent(t.getEvent())||Math.abs(t.getGraphX()-this.startX)>this.graph.tolerance||Math.abs(t.getGraphY()-this.startY)>this.graph.tolerance)&&(this.inTolerance=!1)},mxVertexHandler.prototype.updateHint=function(t){},mxVertexHandler.prototype.removeHint=function(){},mxVertexHandler.prototype.roundAngle=function(t){return Math.round(10*t)/10},mxVertexHandler.prototype.roundLength=function(t){return Math.round(100*t)/100},mxVertexHandler.prototype.mouseMove=function(t,e){e.isConsumed()||null==this.index?this.graph.isMouseDown||null==this.getHandleForEvent(e)||e.consume(!1):(this.checkTolerance(e),this.inTolerance||(this.index<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].active=!0,null!=this.ghostPreview?(this.ghostPreview.apply(this.state),this.ghostPreview.strokewidth=this.getSelectionStrokeWidth()/this.ghostPreview.scale/this.ghostPreview.scale,this.ghostPreview.isDashed=this.isSelectionDashed(),this.ghostPreview.stroke=this.getSelectionColor(),this.ghostPreview.redraw(),null!=this.selectionBounds&&(this.selectionBorder.node.style.display="none")):(this.movePreviewToFront&&this.moveToFront(),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged())):this.index==mxEvent.LABEL_HANDLE?this.moveLabel(e):(this.index==mxEvent.ROTATION_HANDLE?this.rotateVertex(e):this.resizeVertex(e),this.updateHint(e))),e.consume())},mxVertexHandler.prototype.isGhostPreview=function(){return 0<this.state.view.graph.model.getChildCount(this.state.cell)},mxVertexHandler.prototype.moveLabel=function(t){var e=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.graph.view.translate,i=this.graph.view.scale;this.graph.isGridEnabledEvent(t.getEvent())&&(e.x=(this.graph.snap(e.x/i-n.x)+n.x)*i,e.y=(this.graph.snap(e.y/i-n.y)+n.y)*i),this.moveSizerTo(this.sizers[null!=this.rotationShape?this.sizers.length-2:this.sizers.length-1],e.x,e.y)},mxVertexHandler.prototype.rotateVertex=function(t){var e=new mxPoint(t.getGraphX(),t.getGraphY()),n=this.state.x+this.state.width/2-e.x,i=this.state.y+this.state.height/2-e.y;this.currentAlpha=0!=n?180*Math.atan(i/n)/Math.PI+90:i<0?180:0,0<n&&(this.currentAlpha-=180),this.currentAlpha-=this.startAngle,this.rotationRaster&&this.graph.isGridEnabledEvent(t.getEvent())?(n=e.x-this.state.getCenterX(),i=e.y-this.state.getCenterY(),t=Math.sqrt(n*n+i*i),raster=t-this.startDist<2?15:t-this.startDist<25?5:1,this.currentAlpha=Math.round(this.currentAlpha/raster)*raster):this.currentAlpha=this.roundAngle(this.currentAlpha),this.selectionBorder.rotation=this.currentAlpha,this.selectionBorder.redraw(),this.livePreviewActive&&this.redrawHandles()},mxVertexHandler.prototype.resizeVertex=function(t){var e=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),n=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),i=new mxPoint(t.getGraphX(),t.getGraphY()),l=this.graph.view.translate,s=this.graph.view.scale,o=Math.cos(-n),r=Math.sin(-n),i=r*(a=i.x-this.startX)+o*(h=i.y-this.startY),a=o*a-r*h,h=i,o=this.graph.getCellGeometry(this.state.cell);this.unscaledBounds=this.union(o,a/s,h/s,this.index,this.graph.isGridEnabledEvent(t.getEvent()),1,new mxPoint(0,0),this.isConstrainedEvent(t),this.isCenteredEvent(this.state,t)),o.relative||(null!=(r=this.graph.getMaximumGraphBounds())&&null!=this.parentState&&((r=mxRectangle.fromRectangle(r)).x-=(this.parentState.x-l.x*s)/s,r.y-=(this.parentState.y-l.y*s)/s),this.graph.isConstrainChild(this.state.cell)&&null!=(i=this.graph.getCellContainmentArea(this.state.cell))&&(0<(a=this.graph.getOverlap(this.state.cell))&&((i=mxRectangle.fromRectangle(i)).x-=i.width*a,i.y-=i.height*a,i.width+=2*i.width*a,i.height+=2*i.height*a),null==r?r=i:(r=mxRectangle.fromRectangle(r)).intersect(i)),null!=r&&(this.unscaledBounds.x<r.x&&(this.unscaledBounds.width-=r.x-this.unscaledBounds.x,this.unscaledBounds.x=r.x),this.unscaledBounds.y<r.y&&(this.unscaledBounds.height-=r.y-this.unscaledBounds.y,this.unscaledBounds.y=r.y),this.unscaledBounds.x+this.unscaledBounds.width>r.x+r.width&&(this.unscaledBounds.width-=this.unscaledBounds.x+this.unscaledBounds.width-r.x-r.width),this.unscaledBounds.y+this.unscaledBounds.height>r.y+r.height)&&(this.unscaledBounds.height-=this.unscaledBounds.y+this.unscaledBounds.height-r.y-r.height)),i=this.bounds,this.bounds=new mxRectangle((null!=this.parentState?this.parentState.x:l.x*s)+this.unscaledBounds.x*s,(null!=this.parentState?this.parentState.y:l.y*s)+this.unscaledBounds.y*s,this.unscaledBounds.width*s,this.unscaledBounds.height*s),o.relative&&null!=this.parentState&&(this.bounds.x+=this.state.x-this.parentState.x,this.bounds.y+=this.state.y-this.parentState.y),o=Math.cos(n),r=Math.sin(n),e=o*(a=(n=new mxPoint(this.bounds.getCenterX(),this.bounds.getCenterY())).x-e.x)-r*(h=n.y-e.y)-a,n=r*a+o*h-h,l=o*(a=this.bounds.x-this.state.x)-r*(h=this.bounds.y-this.state.y),o=r*a+o*h,this.bounds.x+=e,this.bounds.y+=n,this.unscaledBounds.x=this.roundLength(this.unscaledBounds.x+e/s),this.unscaledBounds.y=this.roundLength(this.unscaledBounds.y+n/s),this.unscaledBounds.width=this.roundLength(this.unscaledBounds.width),this.unscaledBounds.height=this.roundLength(this.unscaledBounds.height),this.graph.isCellCollapsed(this.state.cell)||0==e&&0==n?this.childOffsetY=this.childOffsetX=0:(this.childOffsetX=this.state.x-this.bounds.x+l,this.childOffsetY=this.state.y-this.bounds.y+o),i.equals(this.bounds)||(this.livePreviewActive&&this.updateLivePreview(t),null!=this.preview?this.drawPreview():this.updateParentHighlight())},mxVertexHandler.prototype.updateLivePreview=function(t){var e=this.graph.view.scale,n=this.graph.view.translate;t=this.state.clone(),this.state.x=this.bounds.x,this.state.y=this.bounds.y,this.state.origin=new mxPoint(this.state.x/e-n.x,this.state.y/e-n.y),this.state.width=this.bounds.width,this.state.height=this.bounds.height,new mxPoint((e=this.state.absoluteOffset).x,e.y),this.state.absoluteOffset.x=0,this.state.absoluteOffset.y=0,null!=(e=this.graph.getCellGeometry(this.state.cell))&&(null==(n=e.offset||this.EMPTY_POINT)||e.relative||(this.state.absoluteOffset.x=this.state.view.scale*n.x,this.state.absoluteOffset.y=this.state.view.scale*n.y),this.state.view.updateVertexLabelOffset(this.state)),this.state.view.graph.cellRenderer.redraw(this.state,!0),this.state.view.invalidate(this.state.cell),this.state.invalid=!1,this.state.view.validate(),this.redrawHandles(),this.movePreviewToFront&&this.moveToFront(),null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="hidden"),this.state.setState(t)},mxVertexHandler.prototype.moveToFront=function(){(null!=this.state.text&&null!=this.state.text.node&&null!=this.state.text.node.nextSibling||null!=this.state.shape&&null!=this.state.shape.node&&null!=this.state.shape.node.nextSibling&&(null==this.state.text||this.state.shape.node.nextSibling!=this.state.text.node))&&(null!=this.state.shape&&null!=this.state.shape.node&&this.state.shape.node.parentNode.appendChild(this.state.shape.node),null!=this.state.text)&&null!=this.state.text.node&&this.state.text.node.parentNode.appendChild(this.state.text.node)},mxVertexHandler.prototype.mouseUp=function(t,e){if(null!=this.index&&null!=this.state){var n,i,l,s,o,r,a,h,d,u,p=new mxPoint(e.getGraphX(),e.getGraphY()),c=this.index;(this.index=null)==this.ghostPreview&&(this.state.view.invalidate(this.state.cell,!1,!1),this.state.view.validate()),this.graph.getModel().beginUpdate();try{c<=mxEvent.CUSTOM_HANDLE?null!=this.customHandles&&(n=this.state.view.graph.getCellStyle(this.state.cell),this.customHandles[mxEvent.CUSTOM_HANDLE-c].active=!1,this.customHandles[mxEvent.CUSTOM_HANDLE-c].execute(e),null!=this.customHandles)&&null!=this.customHandles[mxEvent.CUSTOM_HANDLE-c]&&(this.state.style=n,this.customHandles[mxEvent.CUSTOM_HANDLE-c].positionChanged()):c==mxEvent.ROTATION_HANDLE?null!=this.currentAlpha?0!=(i=this.currentAlpha-(this.state.style[mxConstants.STYLE_ROTATION]||0))&&this.rotateCell(this.state.cell,i):this.rotateClick():(l=this.graph.isGridEnabledEvent(e.getEvent()),s=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=Math.cos(-s),p=(r=Math.sin(-s))*(a=p.x-this.startX)+o*(h=p.y-this.startY),a=o*a-r*h,h=p,d=this.graph.view.scale,u=this.isRecursiveResize(this.state,e),this.resizeCell(this.state.cell,this.roundLength(a/d),this.roundLength(h/d),c,l,this.isConstrainedEvent(e),u))}finally{this.graph.getModel().endUpdate()}e.consume(),this.reset(),this.redrawHandles()}},mxVertexHandler.prototype.isRecursiveResize=function(t,e){return this.graph.isRecursiveResize(this.state)},mxVertexHandler.prototype.rotateClick=function(){},mxVertexHandler.prototype.rotateCell=function(t,e,n){if(0!=e){var i,l=this.graph.getModel();if(l.isVertex(t)||l.isEdge(t))if(l.isEdge(t)||(i=(this.graph.getCurrentCellStyle(t)[mxConstants.STYLE_ROTATION]||0)+e,this.graph.setCellStyles(mxConstants.STYLE_ROTATION,i,[t])),null!=(i=this.graph.getCellGeometry(t))){var s=this.graph.getCellGeometry(n);if(null==s||l.isEdge(n)||((i=i.clone()).rotate(e,new mxPoint(s.width/2,s.height/2)),l.setGeometry(t,i)),l.isVertex(t)&&!i.relative||l.isEdge(t))for(n=l.getChildCount(t),i=0;i<n;i++)this.rotateCell(l.getChildAt(t,i),e,t)}}},mxVertexHandler.prototype.reset=function(){if(null!=this.sizers&&null!=this.index&&null!=this.sizers[this.index]&&"none"==this.sizers[this.index].node.style.display&&(this.sizers[this.index].node.style.display=""),(this.index=this.inTolerance=this.currentAlpha=null)!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),this.livePreviewActive&&null!=this.sizers){for(var t=0;t<this.sizers.length;t++)null!=this.sizers[t]&&(this.sizers[t].node.style.display="");null!=this.state.control&&null!=this.state.control.node&&(this.state.control.node.style.visibility="")}if(null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].active?(this.customHandles[t].active=!1,this.customHandles[t].reset()):this.customHandles[t].setVisible(!0);null!=this.selectionBorder&&(this.selectionBorder.node.style.display="inline",this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview()),this.removeHint(),this.redrawHandles(),this.edgeHandlers=null,this.handlesVisible=!0,this.livePreviewActive=this.unscaledBounds=null},mxVertexHandler.prototype.resizeCell=function(t,e,n,i,l,s,o){null!=(e=this.graph.model.getGeometry(t))&&(i==mxEvent.LABEL_HANDLE?(i=-mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),o=Math.cos(i),n=Math.sin(i),i=this.graph.view.scale,o=mxUtils.getRotatedPoint(new mxPoint(Math.round((this.labelShape.bounds.getCenterX()-this.startX)/i),Math.round((this.labelShape.bounds.getCenterY()-this.startY)/i)),o,n),null==(e=e.clone()).offset?e.offset=o:(e.offset.x+=o.x,e.offset.y+=o.y),this.graph.model.setGeometry(t,e)):null!=this.unscaledBounds&&(i=this.graph.view.scale,0==this.childOffsetX&&0==this.childOffsetY||this.moveChildren(t,Math.round(this.childOffsetX/i),Math.round(this.childOffsetY/i)),this.graph.resizeCell(t,this.unscaledBounds,o)))},mxVertexHandler.prototype.moveChildren=function(t,e,n){for(var i=this.graph.getModel(),l=i.getChildCount(t),s=0;s<l;s++){var o=i.getChildAt(t,s),r=this.graph.getCellGeometry(o);null!=r&&((r=r.clone()).translate(e,n),i.setGeometry(o,r))}},mxVertexHandler.prototype.union=function(t,e,n,i,l,s,o,r,a){var h,d,u,p,c,m,g;return l=(null==l||l)&&this.graph.gridEnabled,this.singleSizer?(i=t.x+t.width+e,o=t.y+t.height+n,l&&(i=this.graph.snap(i/s)*s,o=this.graph.snap(o/s)*s),(s=new mxRectangle(t.x,t.y,0,0)).add(new mxRectangle(i,o,0,0)),s):(h=t.width,d=t.height,p=(u=t.x-o.x*s)+h,c=(t=t.y-o.y*s)+d,m=u+h/2,g=t+d/2,4<i?(c+=n,c=l?this.graph.snap(c/s)*s:Math.round(c/s)*s):i<3&&(t+=n,t=l?this.graph.snap(t/s)*s:Math.round(t/s)*s),0==i||3==i||5==i?(u+=e,u=l?this.graph.snap(u/s)*s:Math.round(u/s)*s):2!=i&&4!=i&&7!=i||(p+=e,p=l?this.graph.snap(p/s)*s:Math.round(p/s)*s),l=p-u,n=c-t,r&&null!=(r=this.graph.getCellGeometry(this.state.cell))&&(r=r.width/r.height,1==i||2==i||7==i||6==i?l=n*r:n=l/r,0==i)&&(u=p-l,t=c-n),a&&(u+=m-(u+(l+=l-h)/2),t+=g-(t+(n+=n-d)/2)),l<0&&(u+=l,l=Math.abs(l)),n<0&&(t+=n,n=Math.abs(n)),i=new mxRectangle(u+o.x*s,t+o.y*s,l,n),null!=this.minBounds&&(i.width=Math.max(i.width,this.minBounds.x*s+this.minBounds.width*s+Math.max(0,this.x0*s-i.x)),i.height=Math.max(i.height,this.minBounds.y*s+this.minBounds.height*s+Math.max(0,this.y0*s-i.y))),i)},mxVertexHandler.prototype.redraw=function(t){this.selectionBounds=this.getSelectionBounds(this.state),this.bounds=new mxRectangle(this.selectionBounds.x,this.selectionBounds.y,this.selectionBounds.width,this.selectionBounds.height),this.drawPreview(),t||this.redrawHandles()},mxVertexHandler.prototype.getHandlePadding=function(){var t=new mxPoint(0,0),e=this.tolerance;return null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]&&(this.bounds.width<2*this.sizers[0].bounds.width+2*e||this.bounds.height<2*this.sizers[0].bounds.height+2*e)&&(t.x=this.sizers[0].bounds.width+(e/=2),t.y=this.sizers[0].bounds.height+e),t},mxVertexHandler.prototype.getSizerBounds=function(){return this.bounds},mxVertexHandler.prototype.redrawHandles=function(){var t,e,n,i,l,s,o,r=this.getSizerBounds(),a=this.tolerance;if(this.verticalOffset=this.horizontalOffset=0,null!=this.customHandles)for(var h=0;h<this.customHandles.length;h++){var d=this.customHandles[h].shape.node.style.display;this.customHandles[h].redraw(),this.customHandles[h].shape.node.style.display=d,this.customHandles[h].shape.node.style.visibility=this.handlesVisible&&this.isCustomHandleVisible(this.customHandles[h])?"":"hidden"}if(null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]&&(null==this.index&&this.manageSizers&&8<=this.sizers.length&&(h=this.getHandlePadding(),this.horizontalOffset=h.x,this.verticalOffset=h.y,0==this.horizontalOffset&&0==this.verticalOffset||((r=new mxRectangle(r.x,r.y,r.width,r.height)).x-=this.horizontalOffset/2,r.width+=this.horizontalOffset,r.y-=this.verticalOffset/2,r.height+=this.verticalOffset),8<=this.sizers.length)&&(r.width<2*this.sizers[0].bounds.width+2*a||r.height<2*this.sizers[0].bounds.height+2*a?(this.sizers[0].node.style.display="none",this.sizers[2].node.style.display="none",this.sizers[5].node.style.display="none",this.sizers[7].node.style.display="none"):this.handlesVisible&&(this.sizers[0].node.style.display="",this.sizers[2].node.style.display="",this.sizers[5].node.style.display="",this.sizers[7].node.style.display="")),a=r.x+r.width,h=r.y+r.height,this.singleSizer?this.moveSizerTo(this.sizers[0],a,h):(d=r.x+r.width/2,t=r.y+r.height/2,8<=this.sizers.length?(e="nw-resize n-resize ne-resize e-resize se-resize s-resize sw-resize w-resize".split(" "),l=mxUtils.toRadians(this.state.style[mxConstants.STYLE_ROTATION]||"0"),n=Math.cos(l),i=Math.sin(l),l=Math.round(4*l/Math.PI),s=new mxPoint(r.getCenterX(),r.getCenterY()),o=mxUtils.getRotatedPoint(new mxPoint(r.x,r.y),n,i,s),this.moveSizerTo(this.sizers[0],o.x,o.y),this.sizers[0].setCursor(e[mxUtils.mod(0+l,e.length)]),o.x=d,o.y=r.y,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[1],o.x,o.y),this.sizers[1].setCursor(e[mxUtils.mod(1+l,e.length)]),o.x=a,o.y=r.y,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[2],o.x,o.y),this.sizers[2].setCursor(e[mxUtils.mod(2+l,e.length)]),o.x=r.x,o.y=t,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[3],o.x,o.y),this.sizers[3].setCursor(e[mxUtils.mod(7+l,e.length)]),o.x=a,o.y=t,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[4],o.x,o.y),this.sizers[4].setCursor(e[mxUtils.mod(3+l,e.length)]),o.x=r.x,o.y=h,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[5],o.x,o.y),this.sizers[5].setCursor(e[mxUtils.mod(6+l,e.length)]),o.x=d,o.y=h,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[6],o.x,o.y),this.sizers[6].setCursor(e[mxUtils.mod(5+l,e.length)]),o.x=a,o.y=h,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[7],o.x,o.y),this.sizers[7].setCursor(e[mxUtils.mod(4+l,e.length)]),o.x=d+this.state.absoluteOffset.x,o.y=t+this.state.absoluteOffset.y,o=mxUtils.getRotatedPoint(o,n,i,s),this.moveSizerTo(this.sizers[8],o.x,o.y)):2<=this.state.width&&2<=this.state.height?this.moveSizerTo(this.sizers[0],d+this.state.absoluteOffset.x,t+this.state.absoluteOffset.y):this.moveSizerTo(this.sizers[0],this.state.x,this.state.y))),null!=this.rotationShape&&(l=mxUtils.toRadians(null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"),n=Math.cos(l),i=Math.sin(l),s=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),o=mxUtils.getRotatedPoint(this.getRotationHandlePosition(),n,i,s),null!=this.rotationShape.node)&&(this.moveSizerTo(this.rotationShape,o.x,o.y),this.rotationShape.node.style.visibility=this.state.view.graph.isEditing()||!this.handlesVisible?"hidden":""),null!=this.selectionBorder&&(this.selectionBorder.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0")),null!=this.edgeHandlers)for(h=0;h<this.edgeHandlers.length;h++)this.edgeHandlers[h].redraw()},mxVertexHandler.prototype.isCustomHandleVisible=function(t){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxVertexHandler.prototype.getRotationHandlePosition=function(){return new mxPoint(this.bounds.x+this.bounds.width/2,this.bounds.y+this.rotationHandleVSpacing)},mxVertexHandler.prototype.isParentHighlightVisible=function(){return!this.graph.isCellSelected(this.graph.model.getParent(this.state.cell))},mxVertexHandler.prototype.updateParentHighlight=function(){var t,e,n;this.isDestroyed()||(t=this.isParentHighlightVisible(),e=this.graph.model.getParent(this.state.cell),n=this.graph.view.getState(e),null!=this.parentHighlight?this.graph.model.isVertex(e)&&t?(t=this.parentHighlight.bounds,null==n||t.x==n.x&&t.y==n.y&&t.width==n.width&&t.height==n.height||(this.parentHighlight.bounds=mxRectangle.fromRectangle(n),this.parentHighlight.redraw())):(null!=n&&n.parentHighlight==this.parentHighlight&&(n.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null):this.parentHighlightEnabled&&t&&this.graph.model.isVertex(e)&&null!=n&&null==n.parentHighlight&&(this.parentHighlight=this.createParentHighlightShape(n),this.parentHighlight.dialect=mxConstants.DIALECT_SVG,this.parentHighlight.pointerEvents=!1,this.parentHighlight.rotation=Number(n.style[mxConstants.STYLE_ROTATION]||"0"),this.parentHighlight.init(this.graph.getView().getOverlayPane()),this.parentHighlight.redraw(),n.parentHighlight=this.parentHighlight))},mxVertexHandler.prototype.drawPreview=function(){null!=this.preview&&(this.preview.bounds=this.bounds,this.preview.node.parentNode==this.graph.container&&(this.preview.bounds.width=Math.max(0,this.preview.bounds.width-1),this.preview.bounds.height=Math.max(0,this.preview.bounds.height-1)),this.preview.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.preview.redraw()),this.selectionBorder.bounds=this.getSelectionBorderBounds(),this.selectionBorder.redraw(),this.updateParentHighlight()},mxVertexHandler.prototype.getSelectionBorderBounds=function(){return this.bounds},mxVertexHandler.prototype.isDestroyed=function(){return null==this.selectionBorder},mxVertexHandler.prototype.destroy=function(){var t;if(null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.preview&&(this.preview.destroy(),this.preview=null),null!=this.parentHighlight&&(t=this.graph.model.getParent(this.state.cell),null!=(t=this.graph.view.getState(t))&&t.parentHighlight==this.parentHighlight&&(t.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.ghostPreview&&(this.ghostPreview.destroy(),this.ghostPreview=null),null!=this.selectionBorder&&(this.selectionBorder.destroy(),this.selectionBorder=null),this.labelShape=null,this.removeHint(),null!=this.sizers){for(t=0;t<this.sizers.length;t++)this.sizers[t].destroy();this.sizers=null}if(null!=this.customHandles){for(t=0;t<this.customHandles.length;t++)this.customHandles[t].destroy();this.customHandles=null}},mxEdgeHandler.prototype.graph=null,mxEdgeHandler.prototype.state=null,mxEdgeHandler.prototype.marker=null,mxEdgeHandler.prototype.constraintHandler=null,mxEdgeHandler.prototype.error=null,mxEdgeHandler.prototype.shape=null,mxEdgeHandler.prototype.bends=null,mxEdgeHandler.prototype.labelShape=null,mxEdgeHandler.prototype.cloneEnabled=!0,mxEdgeHandler.prototype.addEnabled=!1,mxEdgeHandler.prototype.removeEnabled=!1,mxEdgeHandler.prototype.dblClickRemoveEnabled=!1,mxEdgeHandler.prototype.mergeRemoveEnabled=!1,mxEdgeHandler.prototype.straightRemoveEnabled=!1,mxEdgeHandler.prototype.virtualBendsEnabled=!1,mxEdgeHandler.prototype.virtualBendOpacity=20,mxEdgeHandler.prototype.parentHighlightEnabled=!1,mxEdgeHandler.prototype.preferHtml=!1,mxEdgeHandler.prototype.allowHandleBoundsCheck=!0,mxEdgeHandler.prototype.snapToTerminals=!1,mxEdgeHandler.prototype.handleImage=null,mxEdgeHandler.prototype.tolerance=0,mxEdgeHandler.prototype.outlineConnect=!1,mxEdgeHandler.prototype.manageLabelHandle=!1,mxEdgeHandler.prototype.init=function(){var t;this.graph=this.state.view.graph,this.marker=this.createMarker(),this.constraintHandler=new mxConstraintHandler(this.graph),this.points=[],this.abspoints=this.getSelectionPoints(this.state),this.shape=this.createSelectionShape(this.abspoints),this.shape.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,this.shape.init(this.graph.getView().getOverlayPane()),this.shape.pointerEvents=!1,this.shape.setCursor(mxConstants.CURSOR_MOVABLE_EDGE),mxEvent.redirectMouseEvents(this.shape.node,this.graph,this.state),this.preferHtml=null!=this.state.text&&this.state.text.node.parentNode==this.graph.container,this.preferHtml||(null!=(t=this.state.getVisibleTerminalState(!0))&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container),this.preferHtml)||null!=(t=this.state.getVisibleTerminalState(!1))&&(this.preferHtml=null!=t.text&&t.text.node.parentNode==this.graph.container),(this.graph.getSelectionCount()<mxGraphHandler.prototype.maxCells||mxGraphHandler.prototype.maxCells<=0)&&(this.bends=this.createBends(),this.isVirtualBendsEnabled())&&(this.virtualBends=this.createVirtualBends()),this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape=this.createLabelHandleShape(),this.initBend(this.labelShape),this.labelShape.setCursor(mxConstants.CURSOR_LABEL_HANDLE),this.customHandles=this.createCustomHandles(),this.updateParentHighlight(),this.redraw()},mxEdgeHandler.prototype.isParentHighlightVisible=mxVertexHandler.prototype.isParentHighlightVisible,mxEdgeHandler.prototype.updateParentHighlight=mxVertexHandler.prototype.updateParentHighlight,mxEdgeHandler.prototype.createCustomHandles=function(){return null},mxEdgeHandler.prototype.isVirtualBendsEnabled=function(t){return this.virtualBendsEnabled&&(null==this.state.style[mxConstants.STYLE_EDGE]||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.NONE||1==this.state.style[mxConstants.STYLE_NOEDGESTYLE])&&"arrow"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_SHAPE,null)},mxEdgeHandler.prototype.isCellEnabled=function(t){return!0},mxEdgeHandler.prototype.isAddPointEvent=function(t){return mxEvent.isShiftDown(t)},mxEdgeHandler.prototype.isRemovePointEvent=function(t){return mxEvent.isShiftDown(t)},mxEdgeHandler.prototype.getSelectionPoints=function(t){return t.absolutePoints},mxEdgeHandler.prototype.createParentHighlightShape=function(t){return(t=new mxRectangleShape(mxRectangle.fromRectangle(t),null,this.getSelectionColor())).strokewidth=this.getSelectionStrokeWidth(),t.isDashed=this.isSelectionDashed(),t},mxEdgeHandler.prototype.createSelectionShape=function(t){return(t=new this.state.shape.constructor).outline=!0,t.apply(this.state),t.isDashed=this.isSelectionDashed(),t.stroke=this.getSelectionColor(),t.isShadow=!1,t},mxEdgeHandler.prototype.getSelectionColor=function(){return mxConstants.EDGE_SELECTION_COLOR},mxEdgeHandler.prototype.getSelectionStrokeWidth=function(){return mxConstants.EDGE_SELECTION_STROKEWIDTH},mxEdgeHandler.prototype.isSelectionDashed=function(){return mxConstants.EDGE_SELECTION_DASHED},mxEdgeHandler.prototype.isConnectableCell=function(t){return!0},mxEdgeHandler.prototype.getCellAt=function(t,e){return this.outlineConnect?null:this.graph.getCellAt(t,e)},mxEdgeHandler.prototype.createMarker=function(){var t=new mxCellMarker(this.graph),i=this;return t.getCell=function(t){var e,n=mxCellMarker.prototype.getCell.apply(this,arguments);return null==(n=n!=i.state.cell&&null!=n||null==i.currentPoint?n:i.graph.getCellAt(i.currentPoint.x,i.currentPoint.y))||this.graph.isCellConnectable(n)||(e=this.graph.getModel().getParent(n),this.graph.getModel().isVertex(e)&&this.graph.isCellConnectable(e)&&(n=e)),e=i.graph.getModel(),(this.graph.isSwimlane(n)&&null!=i.currentPoint&&this.graph.hitsSwimlaneContent(n,i.currentPoint.x,i.currentPoint.y)||!i.isConnectableCell(n)||n==i.state.cell||null!=n&&!i.graph.connectableEdges&&e.isEdge(n)||e.isAncestor(i.state.cell,n))&&(n=null),n=this.graph.isCellConnectable(n)?n:null},t.isValidState=function(t){var e=i.graph.getModel(),e=null!=(e=i.graph.view.getTerminalPort(t,i.graph.view.getState(e.getTerminal(i.state.cell,!i.isSource)),!i.isSource))?e.cell:null;return i.error=i.validateConnection(i.isSource?t.cell:e,i.isSource?e:t.cell),null==i.error},t},mxEdgeHandler.prototype.validateConnection=function(t,e){return this.graph.getEdgeValidationError(this.state.cell,t,e)},mxEdgeHandler.prototype.createBends=function(){for(var t,n,e=this.state.cell,i=[],l=0;l<this.abspoints.length;l++)this.isHandleVisible(l)&&(t=l==this.abspoints.length-1,(n=0==l||t)||this.graph.isCellBendable(e))&&mxUtils.bind(this,function(t){var e=this.createHandleShape(t);this.initBend(e,mxUtils.bind(this,mxUtils.bind(this,function(){this.dblClickRemoveEnabled&&this.removePoint(this.state,t)}))),this.isHandleEnabled(l)&&e.setCursor(n?mxConstants.CURSOR_TERMINAL_HANDLE:mxConstants.CURSOR_BEND_HANDLE),i.push(e),n||(this.points.push(new mxPoint(0,0)),e.node.style.visibility="hidden")})(l);return i},mxEdgeHandler.prototype.createVirtualBends=function(){var e=[];if(this.graph.isCellBendable(this.state.cell))for(var t=1;t<this.abspoints.length;t++)mxUtils.bind(this,function(t){this.initBend(t),t.setCursor(mxConstants.CURSOR_VIRTUAL_BEND_HANDLE),e.push(t)})(this.createHandleShape());return e},mxEdgeHandler.prototype.isHandleEnabled=function(t){return!0},mxEdgeHandler.prototype.isHandleVisible=function(t){var e=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),i=this.graph.getCellGeometry(this.state.cell);return(null!=i?this.graph.view.getEdgeStyle(this.state,i.points,e,n):null)!=mxEdgeStyle.EntityRelation||0==t||t==this.abspoints.length-1},mxEdgeHandler.prototype.createHandleShape=function(t){return null!=this.handleImage?((t=new mxImageShape(new mxRectangle(0,0,this.handleImage.width,this.handleImage.height),this.handleImage.src)).preserveImageAspect=!1,t):(t=mxConstants.HANDLE_SIZE,this.preferHtml&&--t,new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))},mxEdgeHandler.prototype.createLabelHandleShape=function(){var t;return null!=this.labelHandleImage?((t=new mxImageShape(new mxRectangle(0,0,this.labelHandleImage.width,this.labelHandleImage.height),this.labelHandleImage.src)).preserveImageAspect=!1,t):new mxRectangleShape(new mxRectangle(0,0,t=mxConstants.LABEL_HANDLE_SIZE,t),mxConstants.LABEL_HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR)},mxEdgeHandler.prototype.initBend=function(t,e){this.preferHtml?(t.dialect=mxConstants.DIALECT_STRICTHTML,t.init(this.graph.container)):(t.dialect=this.graph.dialect!=mxConstants.DIALECT_SVG?mxConstants.DIALECT_MIXEDHTML:mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane())),mxEvent.redirectMouseEvents(t.node,this.graph,this.state,null,null,null,e),mxClient.IS_TOUCH&&t.node.setAttribute("pointer-events","none")},mxEdgeHandler.prototype.getHandleForEvent=function(n){var t=null;if(null!=this.state){var e=function(t){if(null!=t&&null!=t.node&&"none"!=t.node.style.display&&"hidden"!=t.node.style.visibility&&(n.isSource(t)||null!=l&&mxUtils.intersects(t.bounds,l))){var e=(e=n.getGraphX()-t.bounds.getCenterX())*e+(t=n.getGraphY()-t.bounds.getCenterY())*t;if(null==s||e<=s)return s=e,!0}return!1},i=mxEvent.isMouseEvent(n.getEvent())?1:this.tolerance,l=this.allowHandleBoundsCheck&&(mxClient.IS_IE||0<i)?new mxRectangle(n.getGraphX()-i,n.getGraphY()-i,2*i,2*i):null,s=null;if(null!=this.customHandles&&this.isCustomHandleEvent(n))for(i=this.customHandles.length-1;0<=i;i--)if(e(this.customHandles[i].shape))return mxEvent.CUSTOM_HANDLE-i;if((n.isSource(this.state.text)||e(this.labelShape))&&(t=mxEvent.LABEL_HANDLE),null!=this.bends)for(i=0;i<this.bends.length;i++)e(this.bends[i])&&(t=i);if(null!=this.virtualBends&&this.isAddVirtualBendEvent(n))for(i=0;i<this.virtualBends.length;i++)e(this.virtualBends[i])&&(t=mxEvent.VIRTUAL_HANDLE-i)}return t},mxEdgeHandler.prototype.isAddVirtualBendEvent=function(t){return!0},mxEdgeHandler.prototype.isCustomHandleEvent=function(t){return!0},mxEdgeHandler.prototype.mouseDown=function(t,e){var n,i=this.getHandleForEvent(e);null!=this.bends&&null!=this.bends[i]&&(n=this.bends[i].bounds,this.snapPoint=new mxPoint(n.getCenterX(),n.getCenterY())),this.addEnabled&&null==i&&this.isAddPointEvent(e.getEvent())?(this.addPoint(this.state,e.getEvent()),e.consume()):null!=i&&!e.isConsumed()&&this.graph.isEnabled()&&(this.removeEnabled&&this.isRemovePointEvent(e.getEvent())?this.removePoint(this.state,i):i==mxEvent.LABEL_HANDLE&&!this.graph.isLabelMovable(e.getCell())||(i<=mxEvent.VIRTUAL_HANDLE&&mxUtils.setOpacity(this.virtualBends[mxEvent.VIRTUAL_HANDLE-i].node,100),this.start(e.getX(),e.getY(),i)),e.consume())},mxEdgeHandler.prototype.start=function(t,e,n){if(this.startX=t,this.startY=e,this.isSource=null!=this.bends&&0==n,this.isTarget=null!=this.bends&&n==this.bends.length-1,this.isLabel=n==mxEvent.LABEL_HANDLE,(!this.isSource&&!this.isTarget||(t=this.state.cell,null==(e=this.graph.model.getTerminal(t,this.isSource))&&this.graph.isTerminalPointMovable(t,this.isSource))||null!=e&&this.graph.isCellDisconnectable(t,e,this.isSource))&&(this.index=n),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE&&null!=this.customHandles)for(n=0;n<this.customHandles.length;n++)n!=mxEvent.CUSTOM_HANDLE-this.index&&this.customHandles[n].setVisible(!1)},mxEdgeHandler.prototype.clonePreviewState=function(t,e){return this.state.clone()},mxEdgeHandler.prototype.getSnapToTerminalTolerance=function(){return this.graph.gridSize*this.graph.view.scale/2},mxEdgeHandler.prototype.updateHint=function(t,e){},mxEdgeHandler.prototype.removeHint=function(){},mxEdgeHandler.prototype.roundLength=function(t){return Math.round(t)},mxEdgeHandler.prototype.isSnapToTerminalsEvent=function(t){return this.snapToTerminals&&!mxEvent.isAltDown(t.getEvent())},mxEdgeHandler.prototype.getPointForEvent=function(t){var e=this.graph.getView(),n=e.scale,i=new mxPoint(this.roundLength(t.getGraphX()/n)*n,this.roundLength(t.getGraphY()/n)*n),l=this.getSnapToTerminalTolerance(),s=!1,o=!1;if(0<l&&this.isSnapToTerminalsEvent(t)){var r=function(t){null!=t&&a.call(this,new mxPoint(e.getRoutingCenterX(t),e.getRoutingCenterY(t)))},a=function(t){var e;null!=t&&(e=t.x,Math.abs(i.x-e)<l&&(i.x=e,s=!0),t=t.y,Math.abs(i.y-t)<l)&&(i.y=t,o=!0)};if(r.call(this,this.state.getVisibleTerminalState(!0)),r.call(this,this.state.getVisibleTerminalState(!1)),null!=this.state.absolutePoints)for(r=0;r<this.state.absolutePoints.length;r++)a.call(this,this.state.absolutePoints[r])}return this.graph.isGridEnabledEvent(t.getEvent())&&(t=e.translate,s||(i.x=(this.graph.snap(i.x/n-t.x)+t.x)*n),o||(i.y=(this.graph.snap(i.y/n-t.y)+t.y)*n)),i},mxEdgeHandler.prototype.getPreviewTerminalState=function(t){return this.constraintHandler.update(t,this.isSource,!0,t.isSource(this.marker.highlight.shape)?null:this.currentPoint),null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentConstraint?(null!=this.marker.highlight&&null!=this.marker.highlight.state&&this.marker.highlight.state.cell==this.constraintHandler.currentFocus.cell?"transparent"!=this.marker.highlight.shape.stroke&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint()):this.marker.markCell(this.constraintHandler.currentFocus.cell,"transparent"),t=this.graph.getModel(),t=null!=(t=this.graph.view.getTerminalPort(this.state,this.graph.view.getState(t.getTerminal(this.state.cell,!this.isSource)),!this.isSource))?t.cell:null,this.error=this.validateConnection(this.isSource?this.constraintHandler.currentFocus.cell:t,this.isSource?t:this.constraintHandler.currentFocus.cell),(t=null)==this.error&&(t=this.constraintHandler.currentFocus),null==this.error&&(null==t||this.isCellEnabled(t.cell))||this.constraintHandler.reset(),t):this.graph.isIgnoreTerminalEvent(t.getEvent())?(this.marker.reset(),null):(this.marker.process(t),null==(t=this.marker.getValidState())||this.isCellEnabled(t.cell)||(this.constraintHandler.reset(),this.marker.reset()),this.marker.getValidState())},mxEdgeHandler.prototype.getPreviewPoints=function(t,e){var n=null!=(n=this.graph.getCellGeometry(this.state.cell)).points?n.points.slice():null,i=new mxPoint(t.x,t.y),l=null;if(this.isSource||this.isTarget)this.graph.resetEdgesOnConnect&&(n=null);else if(this.convertPoint(i,!1),null==n)n=[i];else{if(this.index<=mxEvent.VIRTUAL_HANDLE&&n.splice(mxEvent.VIRTUAL_HANDLE-this.index,0,i),!this.isSource&&!this.isTarget){for(var s,o,r=0;r<this.bends.length;r++)r!=this.index&&null!=(s=this.bends[r])&&mxUtils.contains(s.bounds,t.x,t.y)&&(this.index<=mxEvent.VIRTUAL_HANDLE?n.splice(mxEvent.VIRTUAL_HANDLE-this.index,1):n.splice(this.index-1,1),l=n);null!=l||!this.straightRemoveEnabled||null!=e&&mxEvent.isAltDown(e.getEvent())||(r=this.graph.tolerance*this.graph.tolerance,(s=this.state.absolutePoints.slice())[this.index]=t,null==(e=this.state.getVisibleTerminalState(!0))||null!=(o=this.graph.getConnectionConstraint(this.state,e,!0))&&null!=this.graph.getConnectionPoint(e,o)||(s[0]=new mxPoint(e.view.getRoutingCenterX(e),e.view.getRoutingCenterY(e))),null==(e=this.state.getVisibleTerminalState(!1))||null!=(o=this.graph.getConnectionConstraint(this.state,e,!1))&&null!=this.graph.getConnectionPoint(e,o)||(s[s.length-1]=new mxPoint(e.view.getRoutingCenterX(e),e.view.getRoutingCenterY(e))),0<(o=this.index)&&o<s.length-1&&mxUtils.ptSegDistSq(s[o-1].x,s[o-1].y,s[o+1].x,s[o+1].y,t.x,t.y)<r&&(n.splice(o-1,1),l=n))}null==l&&this.index>mxEvent.VIRTUAL_HANDLE&&(n[this.index-1]=i)}return null!=l?l:n},mxEdgeHandler.prototype.isOutlineConnectEvent=function(t){var e=mxUtils.getOffset(this.graph.container),n=t.getEvent(),i=mxEvent.getClientX(n),n=mxEvent.getClientY(n),l=document.documentElement,s=this.currentPoint.x-this.graph.container.scrollLeft+e.x-((window.pageXOffset||l.scrollLeft)-(l.clientLeft||0)),e=this.currentPoint.y-this.graph.container.scrollTop+e.y-((window.pageYOffset||l.scrollTop)-(l.clientTop||0));return this.outlineConnect&&!mxEvent.isShiftDown(t.getEvent())&&(t.isSource(this.marker.highlight.shape)||mxEvent.isAltDown(t.getEvent())&&null!=t.getState()||this.marker.highlight.isHighlightAt(i,n)||(s!=i||e!=n)&&null==t.getState()&&this.marker.highlight.isHighlightAt(s,e))},mxEdgeHandler.prototype.updatePreviewState=function(t,e,n,i,l){var s,o=this.isSource?n:this.state.getVisibleTerminalState(!0),r=this.isTarget?n:this.state.getVisibleTerminalState(!1),a=this.graph.getConnectionConstraint(t,o,!0),h=this.graph.getConnectionConstraint(t,r,!1),d=this.constraintHandler.currentConstraint;null==d&&l&&(null!=n?(i.isSource(this.marker.highlight.shape)&&(e=new mxPoint(i.getGraphX(),i.getGraphY())),d=this.graph.getOutlineConstraint(e,n,i),this.constraintHandler.setFocus(i,n,this.isSource),this.constraintHandler.currentConstraint=d,this.constraintHandler.currentPoint=e):d=new mxConnectionConstraint),this.outlineConnect&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&(s=this.graph.view.scale,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(this.marker.highlight.shape.stroke=l?mxConstants.OUTLINE_HIGHLIGHT_COLOR:"transparent",this.marker.highlight.shape.strokewidth=mxConstants.OUTLINE_HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint()):this.marker.hasValidState()&&(this.marker.highlight.shape.stroke=this.graph.isCellConnectable(i.getCell())&&this.marker.getValidState()!=i.getState()?"transparent":mxConstants.DEFAULT_VALID_COLOR,this.marker.highlight.shape.strokewidth=mxConstants.HIGHLIGHT_STROKEWIDTH/s/s,this.marker.highlight.repaint())),this.isSource?a=d:this.isTarget&&(h=d),(this.isSource||this.isTarget)&&(null!=d&&null!=d.point?(t.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X]=d.point.x,t.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y]=d.point.y):(delete t.style[this.isSource?mxConstants.STYLE_EXIT_X:mxConstants.STYLE_ENTRY_X],delete t.style[this.isSource?mxConstants.STYLE_EXIT_Y:mxConstants.STYLE_ENTRY_Y])),t.setVisibleTerminalState(o,!0),t.setVisibleTerminalState(r,!1),this.isSource&&null==o||t.view.updateFixedTerminalPoint(t,o,!0,a),this.isTarget&&null==r||t.view.updateFixedTerminalPoint(t,r,!1,h),(this.isSource||this.isTarget)&&null==n&&(t.setAbsoluteTerminalPoint(e,this.isSource),null==this.marker.getMarkedState())&&(this.error=this.graph.allowDanglingEdges?null:""),t.view.updatePoints(t,this.points,o,r),t.view.updateFloatingTerminalPoints(t,o,r)},mxEdgeHandler.prototype.mouseMove=function(t,e){var n,i,l;null!=this.index&&null!=this.marker?(this.currentPoint=this.getPointForEvent(e),this.error=null,!this.graph.isIgnoreTerminalEvent(e.getEvent())&&mxEvent.isShiftDown(e.getEvent())&&null!=this.snapPoint&&(Math.abs(this.snapPoint.x-this.currentPoint.x)<Math.abs(this.snapPoint.y-this.currentPoint.y)?this.currentPoint.x=this.snapPoint.x:this.currentPoint.y=this.snapPoint.y),this.index<=mxEvent.CUSTOM_HANDLE&&this.index>mxEvent.VIRTUAL_HANDLE?null!=this.customHandles&&(this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].processEvent(e),this.customHandles[mxEvent.CUSTOM_HANDLE-this.index].positionChanged(),null!=this.shape)&&null!=this.shape.node&&(this.shape.node.style.display="none"):this.isLabel?(this.label.x=this.currentPoint.x,this.label.y=this.currentPoint.y):(this.points=this.getPreviewPoints(this.currentPoint,e),n=this.isSource||this.isTarget?this.getPreviewTerminalState(e):null,null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus&&null!=this.constraintHandler.currentPoint?this.currentPoint=this.constraintHandler.currentPoint.clone():this.outlineConnect&&((i=!(!this.isSource&&!this.isTarget)&&this.isOutlineConnectEvent(e))?n=this.marker.highlight.state:null!=n&&n!=e.getState()&&this.graph.isCellConnectable(e.getCell())&&null!=this.marker.highlight.shape&&(this.marker.highlight.shape.stroke="transparent",this.marker.highlight.repaint(),n=null)),null==n||this.isCellEnabled(n.cell)||(n=null,this.marker.reset()),l=this.clonePreviewState(this.currentPoint,null!=n?n.cell:null),this.updatePreviewState(l,this.currentPoint,n,e,i),this.setPreviewColor(null==this.error?this.marker.validColor:this.marker.invalidColor),this.abspoints=l.absolutePoints,this.active=!0,this.updateHint(e,this.currentPoint)),this.drawPreview(),mxEvent.consume(e.getEvent()),e.consume()):mxClient.IS_IE&&null!=this.getHandleForEvent(e)&&e.consume(!1)},mxEdgeHandler.prototype.mouseUp=function(t,e){if(null!=this.index&&null!=this.marker){null!=this.shape&&null!=this.shape.node&&(this.shape.node.style.display="");var n=this.state.cell,i=this.index;if(this.index=null,e.getX()!=this.startX||e.getY()!=this.startY){var l=!this.graph.isIgnoreTerminalEvent(e.getEvent())&&this.graph.isCloneEvent(e.getEvent())&&this.cloneEnabled&&this.graph.isCellsCloneable();if(null!=this.error)0<this.error.length&&this.graph.validationAlert(this.error);else if(i<=mxEvent.CUSTOM_HANDLE&&i>mxEvent.VIRTUAL_HANDLE){if(null!=this.customHandles){(s=this.graph.getModel()).beginUpdate();try{this.customHandles[mxEvent.CUSTOM_HANDLE-i].execute(e),null!=this.shape&&null!=this.shape.node&&(this.shape.apply(this.state),this.shape.redraw())}finally{s.endUpdate()}}}else if(this.isLabel)this.moveLabel(this.state,this.label.x,this.label.y);else if(this.isSource||this.isTarget)if((i=null)!=(i=null==(i=null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?this.constraintHandler.currentFocus.cell:i)&&this.marker.hasValidState()&&null!=this.marker.highlight&&null!=this.marker.highlight.shape&&"transparent"!=this.marker.highlight.shape.stroke&&"white"!=this.marker.highlight.shape.stroke?this.marker.validState.cell:i)){var s,o,r,a=(s=this.graph.getModel()).getParent(n);s.beginUpdate();try{l&&(o=s.getGeometry(n),l=this.graph.cloneCell(n),s.add(a,l,s.getChildCount(a)),null!=o&&(o=o.clone(),s.setGeometry(l,o)),r=s.getTerminal(n,!this.isSource),this.graph.connectCell(l,r,!this.isSource),n=l),n=this.connect(n,i,this.isSource,l,e)}finally{s.endUpdate()}}else this.graph.isAllowDanglingEdges()&&((s=this.abspoints[this.isSource?0:this.abspoints.length-1]).x=this.roundLength(s.x/this.graph.view.scale-this.graph.view.translate.x),s.y=this.roundLength(s.y/this.graph.view.scale-this.graph.view.translate.y),null!=(o=this.graph.getView().getState(this.graph.getModel().getParent(n)))&&(s.x-=o.origin.x,s.y-=o.origin.y),s.x-=this.graph.panDx/this.graph.view.scale,s.y-=this.graph.panDy/this.graph.view.scale,n=this.changeTerminalPoint(n,s,this.isSource,l));else this.active?n=this.changePoints(n,this.points,l):(this.graph.getView().invalidate(this.state.cell),this.graph.getView().validate(this.state.cell))}else this.graph.isToggleEvent(e.getEvent())&&this.graph.selectCellForEvent(this.state.cell,e.getEvent());null!=this.marker&&(this.reset(),n!=this.state.cell)&&this.graph.setSelectionCell(n),e.consume()}},mxEdgeHandler.prototype.reset=function(){if(this.active&&this.refresh(),this.snapPoint=this.points=this.label=this.index=this.error=null,this.active=this.isTarget=this.isSource=this.isLabel=!1,this.livePreview&&null!=this.sizers)for(var t=0;t<this.sizers.length;t++)null!=this.sizers[t]&&(this.sizers[t].node.style.display="");if(null!=this.marker&&this.marker.reset(),null!=this.constraintHandler&&this.constraintHandler.reset(),null!=this.customHandles)for(t=0;t<this.customHandles.length;t++)this.customHandles[t].reset();this.setPreviewColor(mxConstants.EDGE_SELECTION_COLOR),this.removeHint(),this.redraw()},mxEdgeHandler.prototype.setPreviewColor=function(t){null!=this.shape&&(this.shape.stroke=t)},mxEdgeHandler.prototype.convertPoint=function(t,e){var n=this.graph.getView().getScale(),i=this.graph.getView().getTranslate();return e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/n-i.x),t.y=Math.round(t.y/n-i.y),null!=(n=this.graph.getView().getState(this.graph.getModel().getParent(this.state.cell)))&&(t.x-=n.origin.x,t.y-=n.origin.y),t},mxEdgeHandler.prototype.moveLabel=function(t,e,n){var i,l,s,o=this.graph.getModel(),r=o.getGeometry(t.cell);null!=r&&(i=this.graph.getView().scale,(r=r.clone()).relative?(l=this.graph.getView().getRelativePoint(t,e,n),r.x=Math.round(1e4*l.x)/1e4,r.y=Math.round(l.y),r.offset=new mxPoint(0,0),l=this.graph.view.getPoint(t,r),r.offset=new mxPoint(Math.round((e-l.x)/i),Math.round((n-l.y)/i))):(l=(s=t.absolutePoints)[0],s=s[s.length-1],null!=l&&null!=s&&(r.offset=new mxPoint(Math.round((e-(l.x+(s.x-l.x)/2))/i),Math.round((n-(l.y+(s.y-l.y)/2))/i)),r.x=0,r.y=0)),o.setGeometry(t.cell,r))},mxEdgeHandler.prototype.connect=function(t,e,n,i,l){(i=this.graph.getModel()).getParent(t),i.beginUpdate();try{var s=this.constraintHandler.currentConstraint;null==s&&(s=new mxConnectionConstraint),this.graph.connectCell(t,e,n,s)}finally{i.endUpdate()}return t},mxEdgeHandler.prototype.changeTerminalPoint=function(t,e,n,i){var l=this.graph.getModel();l.beginUpdate();try{i&&(s=l.getParent(t),o=l.getTerminal(t,!n),t=this.graph.cloneCell(t),l.add(s,t,l.getChildCount(s)),l.setTerminal(t,o,!n));var s,o,r=l.getGeometry(t);null!=r&&((r=r.clone()).setTerminalPoint(e,n),l.setGeometry(t,r),this.graph.connectCell(t,null,n,new mxConnectionConstraint))}finally{l.endUpdate()}return t},mxEdgeHandler.prototype.changePoints=function(t,e,n){var i=this.graph.getModel();i.beginUpdate();try{n&&(l=i.getParent(t),s=i.getTerminal(t,!0),o=i.getTerminal(t,!1),t=this.graph.cloneCell(t),i.add(l,t,i.getChildCount(l)),i.setTerminal(t,s,!0),i.setTerminal(t,o,!1));var l,s,o,r=i.getGeometry(t);null!=r&&((r=r.clone()).points=e,i.setGeometry(t,r))}finally{i.endUpdate()}return t},mxEdgeHandler.prototype.addPoint=function(t,e){var n=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(e),mxEvent.getClientY(e)),i=this.graph.isGridEnabledEvent(e);this.convertPoint(n,i),this.addPointAt(t,n.x,n.y),mxEvent.consume(e)},mxEdgeHandler.prototype.addPointAt=function(t,e,n){var i,l,s=this.graph.getCellGeometry(t.cell);e=new mxPoint(e,n),null!=s&&(s=s.clone(),i=this.graph.view.translate,n=this.graph.view.scale,i=new mxPoint(i.x*n,i.y*n),l=this.graph.model.getParent(this.state.cell),this.graph.model.isVertex(l)&&(i=new mxPoint((i=this.graph.view.getState(l)).x,i.y)),n=mxUtils.findNearestSegment(t,e.x*n+i.x,e.y*n+i.y),null==s.points?s.points=[e]:s.points.splice(n,0,e),this.graph.getModel().setGeometry(t.cell,s),this.refresh(),this.redraw())},mxEdgeHandler.prototype.removePoint=function(t,e){var n;0<e&&e<this.abspoints.length-1&&null!=(n=this.graph.getCellGeometry(this.state.cell))&&null!=n.points&&((n=n.clone()).points.splice(e-1,1),this.graph.getModel().setGeometry(t.cell,n),this.refresh(),this.redraw())},mxEdgeHandler.prototype.getHandleFillColor=function(t){t=0==t;var e=this.state.cell,n=this.graph.getModel().getTerminal(e,t),i=mxConstants.HANDLE_FILLCOLOR;return null!=n&&!this.graph.isCellDisconnectable(e,n,t)||null==n&&!this.graph.isTerminalPointMovable(e,t)?i=mxConstants.LOCKED_HANDLE_FILLCOLOR:null!=n&&this.graph.isCellDisconnectable(e,n,t)&&(i=mxConstants.CONNECT_HANDLE_FILLCOLOR),i},mxEdgeHandler.prototype.redraw=function(t){if(null!=this.state){this.abspoints=this.state.absolutePoints.slice();var e=this.graph.getModel().getGeometry(this.state.cell);if(null!=e&&(e=e.points,null!=this.bends)&&0<this.bends.length&&null!=e){null==this.points&&(this.points=[]);for(var n=1;n<this.bends.length-1;n++)null!=this.bends[n]&&null!=this.abspoints[n]&&(this.points[n-1]=e[n-1])}this.drawPreview(),t||this.redrawHandles()}},mxEdgeHandler.prototype.redrawHandles=function(){var t,e,n,i,l=this.state.cell,s=this.labelShape.bounds;if(this.label=new mxPoint(this.state.absoluteOffset.x,this.state.absoluteOffset.y),this.labelShape.bounds=new mxRectangle(Math.round(this.label.x-s.width/2),Math.round(this.label.y-s.height/2),s.width,s.height),s=this.graph.getLabel(l),this.labelShape.visible=null!=s&&0<s.length&&this.graph.isLabelMovable(l),null!=this.bends&&0<this.bends.length&&(t=this.abspoints.length-1,e=(l=this.abspoints[0]).x,n=l.y,s=this.bends[0].bounds,this.bends[0].bounds=new mxRectangle(Math.floor(e-s.width/2),Math.floor(n-s.height/2),s.width,s.height),this.bends[0].fill=this.getHandleFillColor(0),this.bends[0].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[0].bounds),e=(t=this.abspoints[t]).x,n=t.y,i=this.bends.length-1,s=this.bends[i].bounds,this.bends[i].bounds=new mxRectangle(Math.floor(e-s.width/2),Math.floor(n-s.height/2),s.width,s.height),this.bends[i].fill=this.getHandleFillColor(i),this.bends[i].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[i].bounds),this.redrawInnerBends(l,t)),null!=this.abspoints&&null!=this.virtualBends&&0<this.virtualBends.length)for(t=this.abspoints[0],l=0;l<this.virtualBends.length;l++)null!=this.virtualBends[l]&&null!=this.abspoints[l+1]&&(e=this.abspoints[l+1],(s=this.virtualBends[l]).bounds=new mxRectangle(Math.floor(t.x+(e.x-t.x)/2-s.bounds.width/2),Math.floor(t.y+(e.y-t.y)/2-s.bounds.height/2),s.bounds.width,s.bounds.height),s.redraw(),mxUtils.setOpacity(s.node,this.virtualBendOpacity),t=e,this.manageLabelHandle)&&this.checkLabelHandle(s.bounds);if(null!=this.labelShape&&this.labelShape.redraw(),null!=this.customHandles)for(l=0;l<this.customHandles.length;l++)s=this.customHandles[l].shape.node.style.display,this.customHandles[l].redraw(),this.customHandles[l].shape.node.style.display=s,this.customHandles[l].shape.node.style.visibility=this.isCustomHandleVisible(this.customHandles[l])?"":"hidden"},mxEdgeHandler.prototype.isCustomHandleVisible=function(t){return!this.graph.isEditing()&&1==this.state.view.graph.getSelectionCount()},mxEdgeHandler.prototype.setHandlesVisible=function(t){if(null!=this.bends)for(var e=0;e<this.bends.length;e++)this.bends[e].node.style.display=t?"":"none";if(null!=this.virtualBends)for(e=0;e<this.virtualBends.length;e++)this.virtualBends[e].node.style.display=t?"":"none";if(null!=this.labelShape&&(this.labelShape.node.style.display=t?"":"none"),null!=this.customHandles)for(e=0;e<this.customHandles.length;e++)this.customHandles[e].setVisible(t)},mxEdgeHandler.prototype.redrawInnerBends=function(t,e){for(var n,i,l,s=1;s<this.bends.length-1;s++)null!=this.bends[s]&&(null!=this.abspoints[s]?(n=this.abspoints[s].x,i=this.abspoints[s].y,l=this.bends[s].bounds,this.bends[s].node.style.visibility="visible",this.bends[s].bounds=new mxRectangle(Math.round(n-l.width/2),Math.round(i-l.height/2),l.width,l.height),this.manageLabelHandle?this.checkLabelHandle(this.bends[s].bounds):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(this.bends[s].bounds,this.labelShape.bounds)&&(w=mxConstants.HANDLE_SIZE+3,h=mxConstants.HANDLE_SIZE+3,this.bends[s].bounds=new mxRectangle(Math.round(n-w/2),Math.round(i-h/2),w,h)),this.bends[s].redraw()):(this.bends[s].destroy(),this.bends[s]=null))},mxEdgeHandler.prototype.checkLabelHandle=function(t){var e;null!=this.labelShape&&(e=this.labelShape.bounds,mxUtils.intersects(t,e))&&(t.getCenterY()<e.getCenterY()?e.y=t.y+t.height:e.y=t.y-e.height)},mxEdgeHandler.prototype.drawPreview=function(){try{var t,e;this.isLabel&&(t=this.labelShape.bounds,e=new mxRectangle(Math.round(this.label.x-t.width/2),Math.round(this.label.y-t.height/2),t.width,t.height),this.labelShape.bounds.equals(e)||(this.labelShape.bounds=e,this.labelShape.redraw())),null==this.shape||mxUtils.equalPoints(this.shape.points,this.abspoints)||(this.shape.apply(this.state),this.shape.points=this.abspoints.slice(),this.shape.scale=this.state.view.scale,this.shape.isDashed=this.isSelectionDashed(),this.shape.stroke=this.getSelectionColor(),this.shape.strokewidth=this.getSelectionStrokeWidth()/this.shape.scale/this.shape.scale,this.shape.isShadow=!1,this.shape.redraw()),this.updateParentHighlight()}catch(t){}},mxEdgeHandler.prototype.refresh=function(){null!=this.state&&(this.abspoints=this.getSelectionPoints(this.state),this.points=[],null!=this.bends&&(this.destroyBends(this.bends),this.bends=this.createBends()),null!=this.virtualBends&&(this.destroyBends(this.virtualBends),this.virtualBends=this.createVirtualBends()),null!=this.customHandles&&(this.destroyBends(this.customHandles),this.customHandles=this.createCustomHandles()),null!=this.labelShape)&&null!=this.labelShape.node&&null!=this.labelShape.node.parentNode&&this.labelShape.node.parentNode.appendChild(this.labelShape.node)},mxEdgeHandler.prototype.isDestroyed=function(){return null==this.shape},mxEdgeHandler.prototype.destroyBends=function(t){if(null!=t)for(var e=0;e<t.length;e++)null!=t[e]&&t[e].destroy()},mxEdgeHandler.prototype.destroy=function(){var t;null!=this.escapeHandler&&(this.state.view.graph.removeListener(this.escapeHandler),this.escapeHandler=null),null!=this.marker&&(this.marker.destroy(),this.marker=null),null!=this.shape&&(this.shape.destroy(),this.shape=null),null!=this.parentHighlight&&(t=this.graph.model.getParent(this.state.cell),null!=(t=this.graph.view.getState(t))&&t.parentHighlight==this.parentHighlight&&(t.parentHighlight=null),this.parentHighlight.destroy(),this.parentHighlight=null),null!=this.labelShape&&(this.labelShape.destroy(),this.labelShape=null),null!=this.constraintHandler&&(this.constraintHandler.destroy(),this.constraintHandler=null),this.destroyBends(this.virtualBends),this.virtualBends=null,this.destroyBends(this.customHandles),this.customHandles=null,this.destroyBends(this.bends),this.bends=null,this.removeHint()},mxUtils.extend(mxElbowEdgeHandler,mxEdgeHandler),mxElbowEdgeHandler.prototype.flipEnabled=!0,mxElbowEdgeHandler.prototype.doubleClickOrientationResource="none"!=mxClient.language?"doubleClickOrientation":"",mxElbowEdgeHandler.prototype.createBends=function(){var t=[],e=this.createHandleShape(0);return this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t.push(this.createVirtualBend(mxUtils.bind(this,function(t){!mxEvent.isConsumed(t)&&this.flipEnabled&&(this.graph.flipEdge(this.state.cell,t),mxEvent.consume(t))}))),this.points.push(new mxPoint(0,0)),e=this.createHandleShape(2),this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t},mxElbowEdgeHandler.prototype.createVirtualBend=function(t){var e=this.createHandleShape();return this.initBend(e,t),e.setCursor(this.getCursorForBend()),this.graph.isCellBendable(this.state.cell)||(e.node.style.display="none"),e},mxElbowEdgeHandler.prototype.getCursorForBend=function(){return this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.TopToBottom||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_TOPTOBOTTOM||(this.state.style[mxConstants.STYLE_EDGE]==mxEdgeStyle.ElbowConnector||this.state.style[mxConstants.STYLE_EDGE]==mxConstants.EDGESTYLE_ELBOW)&&this.state.style[mxConstants.STYLE_ELBOW]==mxConstants.ELBOW_VERTICAL?"row-resize":"col-resize"},mxElbowEdgeHandler.prototype.getTooltipForNode=function(t){var e=null;return null==this.bends||null==this.bends[1]||t!=this.bends[1].node&&t.parentNode!=this.bends[1].node||(e=this.doubleClickOrientationResource,e=mxResources.get(e)||e),e},mxElbowEdgeHandler.prototype.convertPoint=function(t,e){var n=this.graph.getView().getScale(),i=this.graph.getView().getTranslate(),l=this.state.origin;return e&&(t.x=this.graph.snap(t.x),t.y=this.graph.snap(t.y)),t.x=Math.round(t.x/n-i.x-l.x),t.y=Math.round(t.y/n-i.y-l.y),t},mxElbowEdgeHandler.prototype.redrawInnerBends=function(t,e){var n=this.graph.getModel().getGeometry(this.state.cell),i=this.state.absolutePoints,l=null;1<i.length?(t=i[1],e=i[i.length-2]):null!=n.points&&0<n.points.length&&(l=i[0]),l=null==l?new mxPoint(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2):new mxPoint(this.graph.getView().scale*(l.x+this.graph.getView().translate.x+this.state.origin.x),this.graph.getView().scale*(l.y+this.graph.getView().translate.y+this.state.origin.y)),n=(i=this.bends[1].bounds).width,i=i.height,n=new mxRectangle(Math.round(l.x-n/2),Math.round(l.y-i/2),n,i),this.manageLabelHandle?this.checkLabelHandle(n):null==this.handleImage&&this.labelShape.visible&&mxUtils.intersects(n,this.labelShape.bounds)&&(n=mxConstants.HANDLE_SIZE+3,i=mxConstants.HANDLE_SIZE+3,n=new mxRectangle(Math.floor(l.x-n/2),Math.floor(l.y-i/2),n,i)),this.bends[1].bounds=n,this.bends[1].redraw(),this.manageLabelHandle&&this.checkLabelHandle(this.bends[1].bounds)},mxUtils.extend(mxEdgeSegmentHandler,mxElbowEdgeHandler),mxEdgeSegmentHandler.prototype.getCurrentPoints=function(){var t,e,n=this.state.absolutePoints;return null!=n&&(t=Math.max(1,this.graph.view.scale),2==n.length||3==n.length&&(Math.abs(n[0].x-n[1].x)<t&&Math.abs(n[1].x-n[2].x)<t||Math.abs(n[0].y-n[1].y)<t&&Math.abs(n[1].y-n[2].y)<t))&&(t=n[0].x+(n[n.length-1].x-n[0].x)/2,e=n[0].y+(n[n.length-1].y-n[0].y)/2,n=[n[0],new mxPoint(t,e),new mxPoint(t,e),n[n.length-1]]),n},mxEdgeSegmentHandler.prototype.getPreviewPoints=function(t){if(this.isSource||this.isTarget)return mxElbowEdgeHandler.prototype.getPreviewPoints.apply(this,arguments);var e=this.getCurrentPoints(),n=this.convertPoint(e[0].clone(),!1);t=this.convertPoint(t.clone(),!1);for(var i,l=[],s=1;s<e.length;s++){var o=this.convertPoint(e[s].clone(),!1);s==this.index&&(0==Math.round(n.x-o.x)&&(n.x=t.x,o.x=t.x),0==Math.round(n.y-o.y))&&(n.y=t.y,o.y=t.y),s<e.length-1&&l.push(o),n=o}return l=1==l.length&&(e=this.state.getVisibleTerminalState(!0),n=this.state.getVisibleTerminalState(!1),o=this.state.view.getScale(),i=this.state.view.getTranslate(),s=l[0].x*o+i.x,o=l[0].y*o+i.y,null!=e&&mxUtils.contains(e,s,o)||null!=n&&mxUtils.contains(n,s,o))?[t,t]:l},mxEdgeSegmentHandler.prototype.updatePreviewState=function(t,e,n,i){if(mxEdgeHandler.prototype.updatePreviewState.apply(this,arguments),!this.isSource&&!this.isTarget){e=this.convertPoint(e.clone(),!1);for(var l,s=t.absolutePoints,o=s[0],r=s[1],a=[],h=2;h<s.length;h++){var d=s[h];0==Math.round(o.x-r.x)&&0==Math.round(r.x-d.x)||0==Math.round(o.y-r.y)&&0==Math.round(r.y-d.y)||a.push(this.convertPoint(r.clone(),!1)),o=r,r=d}o=this.state.getVisibleTerminalState(!0),r=this.state.getVisibleTerminalState(!1),h=this.state.absolutePoints,0!=a.length||0!=Math.round(s[0].x-s[s.length-1].x)&&0!=Math.round(s[0].y-s[s.length-1].y)?5==s.length&&2==a.length&&null!=o&&null!=r&&null!=h&&0==Math.round(h[0].x-h[h.length-1].x)&&(h=(a=this.graph.getView()).getScale(),d=a.getTranslate(),s=a.getRoutingCenterY(o)/h-d.y,null!=(l=this.graph.getConnectionConstraint(t,o,!0))&&null!=(l=this.graph.getConnectionPoint(o,l))&&(this.convertPoint(l,!1),s=l.y),a=a.getRoutingCenterY(r)/h-d.y,(h=this.graph.getConnectionConstraint(t,r,!1))&&null!=(l=this.graph.getConnectionPoint(r,h))&&(this.convertPoint(l,!1),a=l.y),a=[new mxPoint(e.x,s),new mxPoint(e.x,a)]):a=[e,e],this.points=a,t.view.updateFixedTerminalPoints(t,o,r),t.view.updatePoints(t,this.points,o,r),t.view.updateFloatingTerminalPoints(t,o,r)}},mxEdgeSegmentHandler.prototype.connect=function(t,e,n,i,l){var s=this.graph.getModel(),o=s.getGeometry(t),r=null;if(null!=o&&null!=o.points&&0<o.points.length)for(var a=this.abspoints,h=a[0],d=a[1],r=[],u=2;u<a.length;u++){var p=a[u];0==Math.round(h.x-d.x)&&0==Math.round(d.x-p.x)||0==Math.round(h.y-d.y)&&0==Math.round(d.y-p.y)||r.push(this.convertPoint(d.clone(),!1)),h=d,d=p}s.beginUpdate();try{null!=r&&null!=(o=s.getGeometry(t))&&((o=o.clone()).points=r,s.setGeometry(t,o)),t=mxEdgeHandler.prototype.connect.apply(this,arguments)}finally{s.endUpdate()}return t},mxEdgeSegmentHandler.prototype.getTooltipForNode=function(t){return null},mxEdgeSegmentHandler.prototype.start=function(t,e,n){mxEdgeHandler.prototype.start.apply(this,arguments),null==this.bends||null==this.bends[n]||this.isSource||this.isTarget||mxUtils.setOpacity(this.bends[n].node,100)},mxEdgeSegmentHandler.prototype.createBends=function(){var t=[],e=this.createHandleShape(0),n=(this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),this.getCurrentPoints());if(this.graph.isCellBendable(this.state.cell)){null==this.points&&(this.points=[]);for(var i=0;i<n.length-1;i++){e=this.createVirtualBend(),t.push(e);var l=0==Math.round(n[i].x-n[i+1].x);0==Math.round(n[i].y-n[i+1].y)&&i<n.length-2&&(l=0==Math.round(n[i].x-n[i+2].x)),e.setCursor(l?"col-resize":"row-resize"),this.points.push(new mxPoint(0,0))}}return e=this.createHandleShape(n.length),this.initBend(e),e.setCursor(mxConstants.CURSOR_TERMINAL_HANDLE),t.push(e),t},mxEdgeSegmentHandler.prototype.redraw=function(){this.refresh(),mxEdgeHandler.prototype.redraw.apply(this,arguments)},mxEdgeSegmentHandler.prototype.redrawInnerBends=function(t,e){if(this.graph.isCellBendable(this.state.cell)){var n=this.getCurrentPoints();if(null!=n&&1<n.length){var i,l,s,o=!1;for(4==n.length&&0==Math.round(n[1].x-n[2].x)&&0==Math.round(n[1].y-n[2].y)&&(o=!0,0==Math.round(n[0].y-n[n.length-1].y)?(i=n[0].x+(n[n.length-1].x-n[0].x)/2,n[1]=new mxPoint(i,n[1].y),n[2]=new mxPoint(i,n[2].y)):(i=n[0].y+(n[n.length-1].y-n[0].y)/2,n[1]=new mxPoint(n[1].x,i),n[2]=new mxPoint(n[2].x,i))),i=0;i<n.length-1;i++)null!=this.bends[i+1]&&(t=n[i],e=n[i+1],l=new mxPoint(t.x+(e.x-t.x)/2,t.y+(e.y-t.y)/2),s=this.bends[i+1].bounds,this.bends[i+1].bounds=new mxRectangle(Math.floor(l.x-s.width/2),Math.floor(l.y-s.height/2),s.width,s.height),this.bends[i+1].redraw(),this.manageLabelHandle)&&this.checkLabelHandle(this.bends[i+1].bounds);o&&(mxUtils.setOpacity(this.bends[1].node,this.virtualBendOpacity),mxUtils.setOpacity(this.bends[3].node,this.virtualBendOpacity))}}},mxKeyHandler.prototype.graph=null,mxKeyHandler.prototype.target=null,mxKeyHandler.prototype.normalKeys=null,mxKeyHandler.prototype.shiftKeys=null,mxKeyHandler.prototype.controlKeys=null,mxKeyHandler.prototype.controlShiftKeys=null,mxKeyHandler.prototype.enabled=!0,mxKeyHandler.prototype.isEnabled=function(){return this.enabled},mxKeyHandler.prototype.setEnabled=function(t){this.enabled=t},mxKeyHandler.prototype.bindKey=function(t,e){this.normalKeys[t]=e},mxKeyHandler.prototype.bindShiftKey=function(t,e){this.shiftKeys[t]=e},mxKeyHandler.prototype.bindControlKey=function(t,e){this.controlKeys[t]=e},mxKeyHandler.prototype.bindControlShiftKey=function(t,e){this.controlShiftKeys[t]=e},mxKeyHandler.prototype.isControlDown=function(t){return mxEvent.isControlDown(t)},mxKeyHandler.prototype.getFunction=function(t){return null==t||mxEvent.isAltDown(t)?null:(this.isControlDown(t)?mxEvent.isShiftDown(t)?this.controlShiftKeys:this.controlKeys:mxEvent.isShiftDown(t)?this.shiftKeys:this.normalKeys)[t.keyCode]},mxKeyHandler.prototype.isGraphEvent=function(t){var e=mxEvent.getSource(t);return!!(e==this.target||e.parentNode==this.target||null!=this.graph.cellEditor&&this.graph.cellEditor.isEventSource(t))||mxUtils.isAncestorNode(this.graph.container,e)},mxKeyHandler.prototype.keyDown=function(t){var e;this.isEnabledForEvent(t)&&(27==t.keyCode?this.escape(t):this.isEventIgnored(t)||null!=(e=this.getFunction(t))&&(e(t),mxEvent.consume(t)))},mxKeyHandler.prototype.isEnabledForEvent=function(t){return this.graph.isEnabled()&&!mxEvent.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()},mxKeyHandler.prototype.isEventIgnored=function(t){return this.graph.isEditing()},mxKeyHandler.prototype.escape=function(t){this.graph.isEscapeEnabled()&&this.graph.escape(t)},mxKeyHandler.prototype.destroy=function(){null!=this.target&&null!=this.keydownHandler&&(mxEvent.removeListener(this.target,"keydown",this.keydownHandler),this.keydownHandler=null),this.target=null},mxTooltipHandler.prototype.zIndex=10005,mxTooltipHandler.prototype.graph=null,mxTooltipHandler.prototype.delay=null,mxTooltipHandler.prototype.ignoreTouchEvents=!0,mxTooltipHandler.prototype.hideOnHover=!1,mxTooltipHandler.prototype.destroyed=!1,mxTooltipHandler.prototype.enabled=!0,mxTooltipHandler.prototype.isEnabled=function(){return this.enabled},mxTooltipHandler.prototype.setEnabled=function(t){this.enabled=t},mxTooltipHandler.prototype.isHideOnHover=function(){return this.hideOnHover},mxTooltipHandler.prototype.setHideOnHover=function(t){this.hideOnHover=t},mxTooltipHandler.prototype.init=function(){null!=document.body&&(this.div=document.createElement("div"),this.div.className="mxTooltip",this.div.style.visibility="hidden",document.body.appendChild(this.div),mxEvent.addGestureListeners(this.div,mxUtils.bind(this,function(t){"A"!=mxEvent.getSource(t).nodeName&&this.hideTooltip()})))},mxTooltipHandler.prototype.getStateForEvent=function(t){return t.getState()},mxTooltipHandler.prototype.mouseDown=function(t,e){this.reset(e,!1),this.hideTooltip()},mxTooltipHandler.prototype.mouseMove=function(t,e){var n;(e.getX()!=this.lastX||e.getY()!=this.lastY)&&(this.reset(e,!0),n=this.getStateForEvent(e),this.isHideOnHover()||n!=this.state||e.getSource()!=this.node&&(!this.stateSource||null!=n&&this.stateSource==(e.isSource(n.shape)||!e.isSource(n.text))))&&this.hideTooltip(),this.lastX=e.getX(),this.lastY=e.getY()},mxTooltipHandler.prototype.mouseUp=function(t,e){this.reset(e,!0),this.hideTooltip()},mxTooltipHandler.prototype.resetTimer=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null)},mxTooltipHandler.prototype.reset=function(t,e,n){var i,l,s,o;this.ignoreTouchEvents&&!mxEvent.isMouseEvent(t.getEvent())||(this.resetTimer(),n=null!=n?n:this.getStateForEvent(t),e&&this.isEnabled()&&null!=n&&(null==this.div||"hidden"==this.div.style.visibility)&&(i=t.getSource(),l=t.getX(),s=t.getY(),o=t.isSource(n.shape)||t.isSource(n.text),this.thread=window.setTimeout(mxUtils.bind(this,function(){var t;this.graph.isEditing()||this.graph.popupMenuHandler.isMenuShowing()||this.graph.isMouseDown||(t=this.graph.getTooltip(n,i,l,s),this.show(t,l,s),this.state=n,this.node=i,this.stateSource=o)}),this.delay)))},mxTooltipHandler.prototype.hide=function(){this.resetTimer(),this.hideTooltip()},mxTooltipHandler.prototype.hideTooltip=function(){null!=this.div&&(this.div.style.visibility="hidden",this.div.innerHTML="")},mxTooltipHandler.prototype.show=function(t,e,n){var i;!this.destroyed&&null!=t&&0<t.length&&(null==this.div&&this.init(),i=mxUtils.getScrollOrigin(),this.div.style.zIndex=this.zIndex,this.div.style.left=e+i.x+"px",this.div.style.top=n+mxConstants.TOOLTIP_VERTICAL_OFFSET+i.y+"px",mxUtils.isNode(t)?(this.div.innerHTML="",this.div.appendChild(t)):this.div.innerHTML=t.replace(/\n/g,"<br>"),this.div.style.visibility="",mxUtils.fit(this.div))},mxTooltipHandler.prototype.destroy=function(){this.destroyed||(this.graph.removeMouseListener(this),mxEvent.release(this.div),null!=this.div&&null!=this.div.parentNode&&this.div.parentNode.removeChild(this.div),this.destroyed=!0,this.div=null)},mxUtils.extend(mxCellTracker,mxCellMarker),mxCellTracker.prototype.mouseDown=function(t,e){},mxCellTracker.prototype.mouseMove=function(t,e){this.isEnabled()&&this.process(e)},mxCellTracker.prototype.mouseUp=function(t,e){},mxCellTracker.prototype.destroy=function(){this.destroyed||(this.destroyed=!0,this.graph.removeMouseListener(this),mxCellMarker.prototype.destroy.apply(this))},mxCellHighlight.prototype.keepOnTop=!1,mxCellHighlight.prototype.graph=null,mxCellHighlight.prototype.state=null,mxCellHighlight.prototype.spacing=2,mxCellHighlight.prototype.resetHandler=null,mxCellHighlight.prototype.setHighlightColor=function(t){this.highlightColor=t,null!=this.shape&&(this.shape.stroke=t)},mxCellHighlight.prototype.drawHighlight=function(){this.shape=this.createShape(),this.repaint(),this.keepOnTop||this.shape.node.parentNode.firstChild==this.shape.node||this.shape.node.parentNode.insertBefore(this.shape.node,this.shape.node.parentNode.firstChild)},mxCellHighlight.prototype.createShape=function(){var t=this.graph.cellRenderer.createShape(this.state);return t.svgStrokeTolerance=this.graph.tolerance,t.points=this.state.absolutePoints,t.apply(this.state),t.stroke=this.highlightColor,t.opacity=this.opacity,t.isDashed=this.dashed,t.isShadow=!1,t.dialect=mxConstants.DIALECT_SVG,t.init(this.graph.getView().getOverlayPane()),mxEvent.redirectMouseEvents(t.node,this.graph,this.state),this.graph.dialect!=mxConstants.DIALECT_SVG?t.pointerEvents=!1:t.svgPointerEvents="stroke",t},mxCellHighlight.prototype.getStrokeWidth=function(t){return this.strokeWidth},mxCellHighlight.prototype.repaint=function(){null!=this.state&&null!=this.shape&&(this.shape.scale=this.state.view.scale,this.graph.model.isEdge(this.state.cell)?(this.shape.strokewidth=this.getStrokeWidth(),this.shape.points=this.state.absolutePoints,this.shape.outline=!1):(this.shape.bounds=new mxRectangle(this.state.x-this.spacing,this.state.y-this.spacing,this.state.width+2*this.spacing,this.state.height+2*this.spacing),this.shape.rotation=Number(this.state.style[mxConstants.STYLE_ROTATION]||"0"),this.shape.strokewidth=this.getStrokeWidth()/this.state.view.scale,this.shape.outline=!0),null!=this.state.shape&&this.shape.setCursor(this.state.shape.getCursor()),this.shape.redraw())},mxCellHighlight.prototype.hide=function(){this.highlight(null)},mxCellHighlight.prototype.highlight=function(t){this.state!=t&&(null!=this.shape&&(this.shape.destroy(),this.shape=null),this.state=t,null!=this.state)&&this.drawHighlight()},mxCellHighlight.prototype.isHighlightAt=function(t,e){var n=!1;if(null!=this.shape&&null!=document.elementFromPoint)for(var i=document.elementFromPoint(t,e);null!=i;){if(i==this.shape.node){n=!0;break}i=i.parentNode}return n},mxCellHighlight.prototype.destroy=function(){this.graph.getView().removeListener(this.resetHandler),this.graph.getView().removeListener(this.repaintHandler),this.graph.getModel().removeListener(this.repaintHandler),null!=this.shape&&(this.shape.destroy(),this.shape=null)},window.mxCodecRegistry={codecs:[],aliases:[],register:function(t){var e,n;return null!=t&&(e=t.getName(),mxCodecRegistry.codecs[e]=t,(n=mxUtils.getFunctionName(t.template.constructor))!=e)&&mxCodecRegistry.addAlias(n,e),t},addAlias:function(t,e){mxCodecRegistry.aliases[t]=e},getCodec:function(t){var e=null;if(null!=t){var e=mxUtils.getFunctionName(t),n=mxCodecRegistry.aliases[e];if(null!=n&&(e=n),null==(e=mxCodecRegistry.codecs[e]))try{e=new mxObjectCodec(new t),mxCodecRegistry.register(e)}catch(t){}}return e}},mxCodec.prototype.document=null,mxCodec.prototype.objects=null,mxCodec.prototype.elements=null,mxCodec.prototype.encodeDefaults=!1,mxCodec.prototype.putObject=function(t,e){return this.objects[t]=e},mxCodec.prototype.getObject=function(t){var e=null;return e=null!=t&&null==(e=this.objects[t])&&null==(e=this.lookup(t))&&null!=(t=this.getElementById(t))?this.decode(t):e},mxCodec.prototype.lookup=function(t){return null},mxCodec.prototype.getElementById=function(t){return this.updateElements(),this.elements[t]},mxCodec.prototype.updateElements=function(){null==this.elements&&(this.elements={},null!=this.document.documentElement)&&this.addElement(this.document.documentElement)},mxCodec.prototype.addElement=function(t){if(t.nodeType==mxConstants.NODETYPE_ELEMENT){var e=t.getAttribute("id");if(null!=e)if(null==this.elements[e])this.elements[e]=t;else if(this.elements[e]!=t)throw Error(e+": Duplicate ID")}for(t=t.firstChild;null!=t;)this.addElement(t),t=t.nextSibling},mxCodec.prototype.getId=function(t){var e=null;return e=null!=t&&null==(e=this.reference(t))&&t instanceof mxCell&&null==(e=t.getId())&&0==(e=mxCellPath.create(t)).length?"root":e},mxCodec.prototype.reference=function(t){return null},mxCodec.prototype.encodeCell=function(t,e,n){if(e.appendChild(this.encode(t)),null==n||n)for(var i=t.getChildCount(),l=0;l<i;l++)this.encodeCell(t.getChildAt(l),e)},mxCodec.prototype.isCellCodec=function(t){return null!=t&&"function"==typeof t.isCellCodec&&t.isCellCodec()},mxCodec.prototype.decodeCell=function(t,e){e=null==e||e;var n=null;if(null!=t&&t.nodeType==mxConstants.NODETYPE_ELEMENT){if(n=mxCodecRegistry.getCodec(t.nodeName),!this.isCellCodec(n))for(var i=t.firstChild;null!=i&&!this.isCellCodec(n);)n=mxCodecRegistry.getCodec(i.nodeName),i=i.nextSibling;n=(n=this.isCellCodec(n)?n:mxCodecRegistry.getCodec(mxCell)).decode(this,t),e&&this.insertIntoGraph(n)}return n},mxCodec.prototype.insertIntoGraph=function(t){var e=t.parent,n=t.getTerminal(!0),i=t.getTerminal(!1);if(t.setTerminal(null,!1),t.setTerminal(null,!0),(t.parent=null)!=e){if(e==t)throw Error(e.id+": Self Reference");e.insert(t)}null!=n&&n.insertEdge(t,!0),null!=i&&i.insertEdge(t,!1)},mxCodec.prototype.setAttribute=function(t,e,n){null!=e&&null!=n&&t.setAttribute(e,n)},mxObjectCodec.allowEval=!1,mxObjectCodec.prototype.template=null,mxObjectCodec.prototype.exclude=null,mxObjectCodec.prototype.idrefs=null,mxObjectCodec.prototype.mapping=null,mxObjectCodec.prototype.reverse=null,mxObjectCodec.prototype.getName=function(){return mxUtils.getFunctionName(this.template.constructor)},mxObjectCodec.prototype.cloneTemplate=function(){return new this.template.constructor},mxObjectCodec.prototype.getFieldName=function(t){var e;return t=null!=t&&null!=(e=this.reverse[t])?e:t},mxObjectCodec.prototype.getAttributeName=function(t){var e;return t=null!=t&&null!=(e=this.mapping[t])?e:t},mxObjectCodec.prototype.isExcluded=function(t,e,n,i){return e==mxObjectIdentity.FIELD_NAME||0<=mxUtils.indexOf(this.exclude,e)},mxObjectCodec.prototype.isReference=function(t,e,n,i){return 0<=mxUtils.indexOf(this.idrefs,e)},mxObjectCodec.prototype.encode=function(t,e){var n=t.document.createElement(this.getName());return e=this.beforeEncode(t,e,n),this.encodeObject(t,e,n),this.afterEncode(t,e,n)},mxObjectCodec.prototype.encodeObject=function(t,e,n){for(var i in t.setAttribute(n,"id",t.getId(e)),e){var l=e[i];null==l||this.isExcluded(e,i,l,!0)||(mxUtils.isInteger(i)&&(i=null),this.encodeValue(t,e,i,l,n))}},mxObjectCodec.prototype.encodeValue=function(t,e,n,i,l){if(null!=i){if(this.isReference(e,n,i,!0)){var s=t.getId(i);if(null==s)return void mxLog.warn("mxObjectCodec.encode: No ID for "+this.getName()+"."+n+"="+i);i=s}s=this.template[n],null!=n&&!t.encodeDefaults&&s==i||(n=this.getAttributeName(n),this.writeAttribute(t,e,n,i,l))}},mxObjectCodec.prototype.writeAttribute=function(t,e,n,i,l){"object"!=typeof i?this.writePrimitiveAttribute(t,e,n,i,l):this.writeComplexAttribute(t,e,n,i,l)},mxObjectCodec.prototype.writePrimitiveAttribute=function(t,e,n,i,l){i=this.convertAttributeToXml(t,e,n,i,l),null==n?(e=t.document.createElement("add"),"function"==typeof i?e.appendChild(t.document.createTextNode(i)):t.setAttribute(e,"value",i),l.appendChild(e)):"function"!=typeof i&&t.setAttribute(l,n,i)},mxObjectCodec.prototype.writeComplexAttribute=function(t,e,n,i,l){null!=(t=t.encode(i))?(null!=n&&t.setAttribute("as",n),l.appendChild(t)):mxLog.warn("mxObjectCodec.encode: No node for "+this.getName()+"."+n+": "+i)},mxObjectCodec.prototype.convertAttributeToXml=function(t,e,n,i){return i=this.isBooleanAttribute(t,e,n,i)?1==i?"1":"0":i},mxObjectCodec.prototype.isBooleanAttribute=function(t,e,n,i){return void 0===i.length&&(1==i||0==i)},mxObjectCodec.prototype.convertAttributeFromXml=function(t,e,n){var i=e.value;return i=this.isNumericAttribute(t,e,n)&&(i=parseFloat(i),isNaN(i)||!isFinite(i))?0:i},mxObjectCodec.prototype.isNumericAttribute=function(t,e,n){return n.constructor==mxGeometry&&("x"==e.name||"y"==e.name||"width"==e.name||"height"==e.name)||n.constructor==mxPoint&&("x"==e.name||"y"==e.name)||mxUtils.isNumeric(e.value)},mxObjectCodec.prototype.beforeEncode=function(t,e,n){return e},mxObjectCodec.prototype.afterEncode=function(t,e,n){return n},mxObjectCodec.prototype.decode=function(t,e,n){var i=e.getAttribute("id"),l=t.objects[i];return null==l&&(l=n||this.cloneTemplate(),null!=i)&&t.putObject(i,l),e=this.beforeDecode(t,e,l),this.decodeNode(t,e,l),this.afterDecode(t,e,l)},mxObjectCodec.prototype.decodeNode=function(t,e,n){null!=e&&(this.decodeAttributes(t,e,n),this.decodeChildren(t,e,n))},mxObjectCodec.prototype.decodeAttributes=function(t,e,n){if(null!=(e=e.attributes))for(var i=0;i<e.length;i++)this.decodeAttribute(t,e[i],n)},mxObjectCodec.prototype.isIgnoredAttribute=function(t,e,n){return"as"==e.nodeName||"id"==e.nodeName},mxObjectCodec.prototype.decodeAttribute=function(t,e,n){if(!this.isIgnoredAttribute(t,e,n)){var i=e.nodeName,l=(e=this.convertAttributeFromXml(t,e,n),this.getFieldName(i));if(this.isReference(n,l,e,!1)){if(null==(t=t.getObject(e)))return void mxLog.warn("mxObjectCodec.decode: No object for "+this.getName()+"."+i+"="+e);e=t}this.isExcluded(n,i,e,!1)||(n[i]=e)}},mxObjectCodec.prototype.decodeChildren=function(t,e,n){for(e=e.firstChild;null!=e;){var i=e.nextSibling;e.nodeType!=mxConstants.NODETYPE_ELEMENT||this.processInclude(t,e,n)||this.decodeChild(t,e,n),e=i}},mxObjectCodec.prototype.decodeChild=function(t,e,n){var i=this.getFieldName(e.getAttribute("as"));if(null==i||!this.isExcluded(n,i,e,!1)){var l=this.getFieldTemplate(n,i,e);"add"==e.nodeName?null==(t=e.getAttribute("value"))&&mxObjectCodec.allowEval&&(t=mxUtils.eval(mxUtils.getTextContent(e))):t=t.decode(e,l);try{this.addObjectValue(n,i,t,l)}catch(t){throw Error(t.message+" for "+e.nodeName)}}},mxObjectCodec.prototype.getFieldTemplate=function(t,e,n){return t=(t=t[e])instanceof Array&&0<t.length?null:t},mxObjectCodec.prototype.addObjectValue=function(t,e,n,i){null!=n&&n!=i&&(null!=e&&0<e.length?t[e]=n:t.push(n))},mxObjectCodec.prototype.processInclude=function(t,e,n){if("include"!=e.nodeName)return!1;if(null!=(e=e.getAttribute("name")))try{var i=mxUtils.load(e).getDocumentElement();null!=i&&t.decode(i,n)}catch(t){}return!0},mxObjectCodec.prototype.beforeDecode=function(t,e,n){return e},mxObjectCodec.prototype.afterDecode=function(t,e,n){return n},mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxCell,["children","edges","overlays","mxTransient"],["parent","source","target"]);return t.isCellCodec=function(){return!0},t.isNumericAttribute=function(t,e,n){return"value"!==e.nodeName&&mxObjectCodec.prototype.isNumericAttribute.apply(this,arguments)},t.isExcluded=function(t,e,n,i){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||i&&"value"==e&&n.nodeType==mxConstants.NODETYPE_ELEMENT},t.afterEncode=function(t,e,n){var i;return null!=e.value&&e.value.nodeType==mxConstants.NODETYPE_ELEMENT&&(i=n,(n=mxUtils.importNode(t.document,e.value,!0)).appendChild(i),t=i.getAttribute("id"),n.setAttribute("id",t),i.removeAttribute("id")),n},t.beforeDecode=function(t,e,n){var i=e.cloneNode(!0),l=this.getName();if(e.nodeName!=l?(null!=(i=e.getElementsByTagName(l)[0])&&i.parentNode==e?(mxUtils.removeWhitespace(i,!0),mxUtils.removeWhitespace(i,!1),i.parentNode.removeChild(i)):i=null,n.value=e.cloneNode(!0),null!=(e=n.value.getAttribute("id"))&&(n.setId(e),n.value.removeAttribute("id"))):n.setId(e.getAttribute("id")),null!=i)for(e=0;e<this.idrefs.length;e++){var s,l=this.idrefs[e],o=i.getAttribute(l);null!=o&&(i.removeAttribute(l),null==(s=t.objects[o]||t.lookup(o))&&null!=(o=t.getElementById(o))&&(s=(mxCodecRegistry.codecs[o.nodeName]||this).decode(t,o)),n[l]=s)}return i},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxGraphModel);return t.encodeObject=function(t,e,n){var i=t.document.createElement("root");t.encodeCell(e.getRoot(),i),n.appendChild(i)},t.decodeChild=function(t,e,n){"root"==e.nodeName?this.decodeRoot(t,e,n):mxObjectCodec.prototype.decodeChild.apply(this,arguments)},t.decodeRoot=function(t,e,n){var i=null;for(e=e.firstChild;null!=e;){var l=t.decodeCell(e);null!=l&&null==l.getParent()&&(i=l),e=e.nextSibling}null!=i&&n.setRoot(i)},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxRootChange,["model","previous","root"]);return t.afterEncode=function(t,e,n){return t.encodeCell(e.root,n),n},t.beforeDecode=function(t,e,n){if(null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var i=(e=e.cloneNode(!0)).firstChild;for(n.root=t.decodeCell(i,!1),n=i.nextSibling,i.parentNode.removeChild(i),i=n;null!=i;)n=i.nextSibling,t.decodeCell(i),i.parentNode.removeChild(i),i=n}return e},t.afterDecode=function(t,e,n){return n.previous=n.root,n},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxChildChange,["model","child","previousIndex"],["parent","previous"]);return t.isReference=function(t,e,n,i){return!("child"!=e||i&&!t.model.contains(t.previous))||0<=mxUtils.indexOf(this.idrefs,e)},t.isExcluded=function(t,e,n,i){return mxObjectCodec.prototype.isExcluded.apply(this,arguments)||i&&null!=n&&("previous"==e||"parent"==e)&&!t.model.contains(n)},t.afterEncode=function(t,e,n){return this.isReference(e,"child",e.child,!0)?n.setAttribute("child",t.getId(e.child)):t.encodeCell(e.child,n),n},t.beforeDecode=function(t,e,n){if(null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT){var i,l=(e=e.cloneNode(!0)).firstChild;for(n.child=t.decodeCell(l,!1),n=l.nextSibling,l.parentNode.removeChild(l),l=n;null!=l;)n=l.nextSibling,l.nodeType==mxConstants.NODETYPE_ELEMENT&&(i=l.getAttribute("id"),null==t.lookup(i))&&t.decodeCell(l),l.parentNode.removeChild(l),l=n}else l=e.getAttribute("child"),n.child=t.getObject(l);return e},t.afterDecode=function(t,e,n){return null!=n.child&&(null!=n.child.parent&&null!=n.previous&&n.child.parent!=n.previous&&(n.previous=n.child.parent),n.child.parent=n.previous,n.previous=n.parent,n.previousIndex=n.index),n},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxTerminalChange,["model","previous"],["cell","terminal"]);return t.afterDecode=function(t,e,n){return n.previous=n.terminal,n},t}());var mxGenericChangeCodec=function(t,i){t=new mxObjectCodec(t,["model","previous"],["cell"]);return t.afterDecode=function(t,e,n){return mxUtils.isNode(n.cell)&&(n.cell=t.decodeCell(n.cell,!1)),n.previous=n[i],n},t},mxStylesheetCodec=(mxCodecRegistry.register(mxGenericChangeCodec(new mxValueChange,"value")),mxCodecRegistry.register(mxGenericChangeCodec(new mxStyleChange,"style")),mxCodecRegistry.register(mxGenericChangeCodec(new mxGeometryChange,"geometry")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCollapseChange,"collapsed")),mxCodecRegistry.register(mxGenericChangeCodec(new mxVisibleChange,"visible")),mxCodecRegistry.register(mxGenericChangeCodec(new mxCellAttributeChange,"value")),mxCodecRegistry.register(new mxObjectCodec(new mxGraph,"graphListeners eventListeners view container cellRenderer editor selection".split(" "))),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxGraphView);return t.encode=function(t,e){return this.encodeCell(t,e,e.graph.getModel().getRoot())},t.encodeCell=function(t,e,n){var i=e.graph.getModel(),l=e.getState(n),s=i.getParent(n);if(null==s||null!=l){var o=i.getChildCount(n),r=e.graph.getCellGeometry(n),a=null;if(s==i.getRoot()?a="layer":null==s?a="graph":i.isEdge(n)?a="edge":0<o&&null!=r?a="group":i.isVertex(n)&&(a="vertex"),null!=a){var h=t.document.createElement(a);if(null!=e.graph.getLabel(n)&&(h.setAttribute("label",e.graph.getLabel(n)),e.graph.isHtmlLabel(n))&&h.setAttribute("html",!0),null==s){var d=e.getGraphBounds();null!=d&&(h.setAttribute("x",Math.round(d.x)),h.setAttribute("y",Math.round(d.y)),h.setAttribute("width",Math.round(d.width)),h.setAttribute("height",Math.round(d.height))),h.setAttribute("scale",e.scale)}else if(null!=l&&null!=r){for(d in l.style)s=l.style[d],"function"==typeof s&&"object"==typeof s&&(s=mxStyleRegistry.getName(s)),null!=s&&"function"!=typeof s&&"object"!=typeof s&&h.setAttribute(d,s);if(null!=(s=l.absolutePoints)&&0<s.length){for(r=Math.round(s[0].x)+","+Math.round(s[0].y),d=1;d<s.length;d++)r+=" "+Math.round(s[d].x)+","+Math.round(s[d].y);h.setAttribute("points",r)}else h.setAttribute("x",Math.round(l.x)),h.setAttribute("y",Math.round(l.y)),h.setAttribute("width",Math.round(l.width)),h.setAttribute("height",Math.round(l.height));null!=(d=l.absoluteOffset)&&(0!=d.x&&h.setAttribute("dx",Math.round(d.x)),0!=d.y)&&h.setAttribute("dy",Math.round(d.y))}for(d=0;d<o;d++)null!=(l=this.encodeCell(t,e,i.getChildAt(n,d)))&&h.appendChild(l)}}return h},t}()),mxCodecRegistry.register(function(){var t=new mxObjectCodec(new mxStylesheet);return t.encode=function(t,e){var n,i=t.document.createElement(this.getName());for(n in e.styles){var l=e.styles[n],s=t.document.createElement("add");if(null!=n){for(var o in s.setAttribute("as",n),l){var r,a=this.getStringValue(o,l[o]);null!=a&&((r=t.document.createElement("add")).setAttribute("value",a),r.setAttribute("as",o),s.appendChild(r))}0<s.childNodes.length&&i.appendChild(s)}}return i},t.getStringValue=function(t,e){var n=typeof e;return"function"==n?e=mxStyleRegistry.getName(e):"object"==n&&(e=null),e},t.decode=function(t,e,n){n=n||new this.template.constructor;var i=e.getAttribute("id");for(null!=i&&(t.objects[i]=n),e=e.firstChild;null!=e;){if(!this.processInclude(t,e,n)&&"add"==e.nodeName&&null!=(i=e.getAttribute("as"))){var l,s,o=e.getAttribute("extend"),r=null!=o?mxUtils.clone(n.styles[o]):null;for(null==r&&(null!=o&&mxLog.warn("mxStylesheetCodec.decode: stylesheet "+o+" not found to extend"),r={}),o=e.firstChild;null!=o;)o.nodeType==mxConstants.NODETYPE_ELEMENT&&(l=o.getAttribute("as"),"add"==o.nodeName?(null!=(s=mxUtils.getTextContent(o))&&0<s.length&&mxStylesheetCodec.allowEval?s=mxUtils.eval(s):(s=o.getAttribute("value"),mxUtils.isNumeric(s)&&(s=parseFloat(s))),null!=s&&(r[l]=s)):"remove"==o.nodeName&&delete r[l]),o=o.nextSibling;n.putCellStyle(i,r)}e=e.nextSibling}return n},t}()));function Actions(t){this.editorUi=t,this.actions={},this.init()}function Action(t,e,n,i,l){mxEventSource.call(this),this.label=t,this.funct=this.createFunction(e),this.enabled=null==n||n,this.iconCls=i,this.shortcut=l,this.visible=!0}mxStylesheetCodec.allowEval=!0,mxCodec.prototype.mxDefinitions={Array:Array,Object:Object,mxAbstractCanvas2D:mxAbstractCanvas2D,mxActor:mxActor,mxAnimation:mxAnimation,mxArrow:mxArrow,mxArrowConnector:mxArrowConnector,mxAutoSaveManager:mxAutoSaveManager,mxBasePath:"../src",mxCell:mxCell,mxCellAttributeChange:mxCellAttributeChange,mxCellEditor:mxCellEditor,mxCellHighlight:mxCellHighlight,mxCellMarker:mxCellMarker,mxCellOverlay:mxCellOverlay,mxCellPath:{},mxCellRenderer:mxCellRenderer,mxCellState:mxCellState,mxCellStatePreview:mxCellStatePreview,mxCellTracker:mxCellTracker,mxChildChange:mxChildChange,mxCircleLayout:mxCircleLayout,mxClient:{VERSION:"4.1.1",IS_IE:!1,IS_IE6:!1,IS_IE11:!1,IS_EDGE:!1},mxClipboard:{STEPSIZE:10,insertCount:1,cells:null},mxCloud:mxCloud,mxCodec:mxCodec,mxCodecRegistry:mxCodecRegistry,mxCollapseChange:mxCollapseChange,mxCompactTreeLayout:mxCompactTreeLayout,mxCompositeLayout:mxCompositeLayout,mxConnectionConstraint:mxConnectionConstraint,mxConnectionHandler:mxConnectionHandler,mxConnector:mxConnector,mxConstants:{DEFAULT_HOTSPOT:.3,MIN_HOTSPOT_SIZE:8,MAX_HOTSPOT_SIZE:0,RENDERING_HINT_EXACT:"exact",RENDERING_HINT_FASTER:"faster"},mxConstraintHandler:mxConstraintHandler,mxCoordinateAssignment:mxCoordinateAssignment,mxCurrentRootChange:mxCurrentRootChange,mxCylinder:mxCylinder,mxDefaultToolbarCodec:{},mxDictionary:mxDictionary,mxDivResizer:mxDivResizer,mxDoubleEllipse:mxDoubleEllipse,mxDragSource:mxDragSource,mxEdgeHandler:mxEdgeHandler,mxEdgeLabelLayout:mxEdgeLabelLayout,mxEdgeSegmentHandler:mxEdgeSegmentHandler,mxEdgeStyle:{},mxEffects:{animateChanges:[],cascadeOpacity:[],fadeOut:[]},mxElbowEdgeHandler:mxElbowEdgeHandler,mxEllipse:mxEllipse,mxEvent:{},mxEventObject:mxEventObject,mxEventSource:mxEventSource,mxFastOrganicLayout:mxFastOrganicLayout,mxForceIncludes:!1,mxForm:mxForm,mxGeometry:mxGeometry,mxGeometryChange:mxGeometryChange,mxGraph:mxGraph,mxGraphAbstractHierarchyCell:mxGraphAbstractHierarchyCell,mxGraphHandler:mxGraphHandler,mxGraphHierarchyEdge:mxGraphHierarchyEdge,mxGraphHierarchyModel:mxGraphHierarchyModel,mxGraphHierarchyNode:mxGraphHierarchyNode,mxGraphLayout:mxGraphLayout,mxGraphModel:mxGraphModel,mxGraphSelectionModel:mxGraphSelectionModel,mxGraphView:mxGraphView,mxGuide:mxGuide,mxHandle:mxHandle,mxHexagon:mxHexagon,mxHierarchicalEdgeStyle:{ORTHOGONAL:1,POLYLINE:2,STRAIGHT:3,CURVE:4},mxHierarchicalLayout:mxHierarchicalLayout,mxHierarchicalLayoutStage:mxHierarchicalLayoutStage,mxImage:mxImage,mxImageBundle:mxImageBundle,mxImageExport:mxImageExport,mxImageShape:mxImageShape,mxKeyHandler:mxKeyHandler,mxLabel:mxLabel,mxLanguage:void 0,mxLanguages:["de"],mxLayoutManager:mxLayoutManager,mxLine:mxLine,mxListenerList:[],mxLoadResources:!1,mxLoadStylesheets:!0,mxLog:{consoleName:"Console",TRACE:!1,DEBUG:!0,WARN:!0,buffer:""},mxMarker:{markers:Array(0),addMarker:[],createMarker:[]},mxMedianHybridCrossingReduction:mxMedianHybridCrossingReduction,mxMinimumCycleRemover:mxMinimumCycleRemover,mxMorphing:mxMorphing,mxMouseEvent:mxMouseEvent,mxMultiplicity:mxMultiplicity,mxObjectCodec:mxObjectCodec,mxObjectIdentity:{FIELD_NAME:"mxObjectId",counter:338,get:[],clear:[]},mxOutline:mxOutline,mxPanningHandler:mxPanningHandler,mxPanningManager:mxPanningManager,mxParallelEdgeLayout:mxParallelEdgeLayout,mxPartitionLayout:mxPartitionLayout,mxPerimeter:{RectanglePerimeter:[],EllipsePerimeter:[],RhombusPerimeter:[],TrianglePerimeter:[],HexagonPerimeter:[]},mxPoint:mxPoint,mxPolyline:mxPolyline,mxPopupMenu:mxPopupMenu,mxPopupMenuHandler:mxPopupMenuHandler,mxPrintPreview:mxPrintPreview,mxRadialTreeLayout:mxRadialTreeLayout,mxRectangle:mxRectangle,mxRectangleShape:mxRectangleShape,mxResourceExtension:".txt",mxResources:{resources:{},extension:".txt",resourcesEncoded:!1,loadDefaultBundle:!1,loadSpecialBundle:!0},mxRhombus:mxRhombus,mxRootChange:mxRootChange,mxRubberband:mxRubberband,mxSelectionCellsHandler:mxSelectionCellsHandler,mxSelectionChange:mxSelectionChange,mxShape:mxShape,mxStackLayout:mxStackLayout,mxStencil:mxStencil,mxStencilRegistry:{stencils:{},libraries:{},dynamicLoading:!0,addStencil:[],getStencil:[]},mxStyleChange:mxStyleChange,mxStyleRegistry:{},mxStylesheet:mxStylesheet,mxStylesheetCodec:mxObjectCodec,mxSvgCanvas2D:mxSvgCanvas2D,mxSwimlane:mxSwimlane,mxSwimlaneLayout:mxSwimlaneLayout,mxSwimlaneManager:mxSwimlaneManager,mxSwimlaneModel:mxSwimlaneModel,mxSwimlaneOrdering:mxSwimlaneOrdering,mxTemporaryCellStates:mxTemporaryCellStates,mxTerminalChange:mxTerminalChange,mxText:mxText,mxToolbar:mxToolbar,mxTooltipHandler:mxTooltipHandler,mxTriangle:mxTriangle,mxUndoManager:mxUndoManager,mxUndoableEdit:mxUndoableEdit,mxUrlConverter:{},mxUtils:{errorResource:"error",closeResource:"close",errorImage:"../src/images/error.gif",removeCursors:[],getCurrentStyle:[]},mxValueChange:mxValueChange,mxVertexHandler:mxVertexHandler,mxVisibleChange:mxVisibleChange,mxWindow:mxWindow,mxXmlCanvas2D:mxXmlCanvas2D,mxXmlRequest:mxXmlRequest},mxCodec.prototype.decode=function(t,e){this.updateElements();var n=null,i=null;try{i=this.mxDefinitions[t.nodeName]}catch(t){}i=mxCodecRegistry.getCodec(i);return null!=i?n=i.decode(this,t,e):(n=t.cloneNode(!0)).removeAttribute("as"),n},mxCodec.prototype.encode=function(t){var e,n=null;return null!=t&&null!=t.constructor&&(null!=(e=mxCodecRegistry.getCodec(t.constructor))?n=e.encode(this,t):mxUtils.isNode(t)?n=mxUtils.importNode(this.document,t,!0):mxLog.warn("mxCodec.encode: No codec for "+mxUtils.getFunctionName(t.constructor))),n},Actions.prototype.init=function(){function e(t){d.escape(),null!=(t=d.deleteCells(d.getDeletableCells(d.getSelectionCells()),t))&&d.setSelectionCells(t)}function t(){return Action.prototype.isEnabled.apply(this,arguments)&&d.isEnabled()}var o=this.editorUi,r=o.editor,d=r.graph,n=(this.addAction("new...",function(){d.openLink(o.getUrl())}),this.addAction("open...",function(){window.openNew=!0,window.openKey="open",o.openFile()}),this.addAction("import...",function(){window.openNew=!1,window.openKey="import",window.openFile=new OpenFile(mxUtils.bind(this,function(){o.hideDialog()})),window.openFile.setConsumer(mxUtils.bind(this,function(t,e){try{var n=mxUtils.parseXml(t);r.graph.setSelectionCells(r.graph.importGraphModel(n.documentElement))}catch(t){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+t.message)}})),o.showDialog(new OpenDialog(this).container,320,220,!0,!0,function(){window.openFile=null})}).isEnabled=t,this.addAction("save",function(){o.saveFile(!1)},null,null,Editor.ctrlKey+"+S").isEnabled=t,this.addAction("saveAs...",function(){o.saveFile(!0)},null,null,Editor.ctrlKey+"+Shift+S").isEnabled=t,this.addAction("export...",function(){o.showDialog(new ExportDialog(o).container,300,304,!0,!0)}),this.addAction("editDiagram...",function(){var t=new EditDiagramDialog(o);o.showDialog(t.container,620,420,!0,!1),t.init()}),this.addAction("pageSetup...",function(){o.showDialog(new PageSetupDialog(o).container,320,220,!0,!0)}).isEnabled=t,this.addAction("print...",function(){o.showDialog(new PrintDialog(o).container,300,180,!0,!0)},null,"sprite-print",Editor.ctrlKey+"+P"),this.addAction("preview",function(){mxUtils.show(d,null,10,10)}),this.addAction("undo",function(){o.undo()},null,"sprite-undo",Editor.ctrlKey+"+Z"),this.addAction("redo",function(){o.redo()},null,"sprite-redo",mxClient.IS_WIN?Editor.ctrlKey+"+Y":Editor.ctrlKey+"+Shift+Z"),this.addAction("cut",function(){var t=null;try{null!=(t=o.copyXml())&&d.removeCells(t)}catch(t){}null==t&&mxClipboard.cut(d)},null,"sprite-cut",Editor.ctrlKey+"+X"),this.addAction("copy",function(){try{o.copyXml()}catch(t){}try{mxClipboard.copy(d)}catch(t){o.handleError(t)}},null,"sprite-copy",Editor.ctrlKey+"+C"),this.addAction("paste",function(){if(d.isEnabled()&&!d.isCellLocked(d.getDefaultParent())){var t=!1;try{Editor.enableNativeCipboard&&(o.readGraphModelFromClipboard(function(t){if(null!=t){d.getModel().beginUpdate();try{o.pasteXml(t,!0)}finally{d.getModel().endUpdate()}}else mxClipboard.paste(d)}),t=!0)}catch(t){}t||mxClipboard.paste(d)}},!1,"sprite-paste",Editor.ctrlKey+"+V"),this.addAction("pasteHere",function(t){function e(t){if(null!=t){for(var e=!0,n=0;n<t.length&&e;n++)e=e&&d.model.isEdge(t[n]);var i,l=d.view.translate,n=d.view.scale,s=l.x,o=l.y,l=null;null!=(l=null!=(l=1==t.length&&e&&null!=(i=d.getCellGeometry(t[0]))?i.getTerminalPoint(!0):l)?l:d.getBoundingBoxFromGeometry(t,e))&&(e=Math.round(d.snap(d.popupMenuHandler.triggerX/n-s)),n=Math.round(d.snap(d.popupMenuHandler.triggerY/n-o)),d.cellsMoved(t,e-l.x,n-l.y))}}function n(){d.getModel().beginUpdate();try{e(mxClipboard.paste(d))}finally{d.getModel().endUpdate()}}if(d.isEnabled()&&!d.isCellLocked(d.getDefaultParent())){t=!1;try{Editor.enableNativeCipboard&&(o.readGraphModelFromClipboard(function(t){if(null!=t){d.getModel().beginUpdate();try{e(o.pasteXml(t,!0))}finally{d.getModel().endUpdate()}}else n()}),t=!0)}catch(t){}t||n()}}),this.addAction("copySize",function(){var t=d.getSelectionCell();d.isEnabled()&&null!=t&&d.getModel().isVertex(t)&&null!=(t=d.getCellGeometry(t))&&(o.copiedSize=new mxRectangle(t.x,t.y,t.width,t.height))},null,null,"Alt+Shift+X"),this.addAction("pasteSize",function(){if(d.isEnabled()&&!d.isSelectionEmpty()&&null!=o.copiedSize){d.getModel().beginUpdate();try{for(var t,e=d.getSelectionCells(),n=0;n<e.length;n++)d.getModel().isVertex(e[n])&&null!=(t=d.getCellGeometry(e[n]))&&((t=t.clone()).width=o.copiedSize.width,t.height=o.copiedSize.height,d.getModel().setGeometry(e[n],t))}finally{d.getModel().endUpdate()}}},null,null,"Alt+Shift+V"),this.addAction("copyData",function(){var t=d.getSelectionCell()||d.getModel().getRoot();!d.isEnabled()||null==t||null==(t=t.cloneValue())||isNaN(t.nodeType)||(o.copiedValue=t)},null,null,"Alt+Shift+B"),this.addAction("pasteData",function(i){function t(t,e){var n=l.getValue(t);(e=t.cloneValue(e)).removeAttribute("placeholders"),null==n||isNaN(n.nodeType)||e.setAttribute("placeholders",n.getAttribute("placeholders")),null!=i&&(mxEvent.isMetaDown(i)||mxEvent.isControlDown(i))||e.setAttribute("label",d.convertValueToString(t)),l.setValue(t,e)}var l=d.getModel();if(d.isEnabled()&&!d.isSelectionEmpty()&&null!=o.copiedValue){l.beginUpdate();try{var e=d.getSelectionCells();if(0==e.length)t(l.getRoot(),o.copiedValue);else for(var n=0;n<e.length;n++)t(e[n],o.copiedValue)}finally{l.endUpdate()}}},null,null,"Alt+Shift+E"),this.addAction("delete",function(t){e(null!=t&&mxEvent.isControlDown(t))},null,null,"Delete"),this.addAction("deleteAll",function(){e(!0)}),this.addAction("deleteLabels",function(){if(!d.isSelectionEmpty()){d.getModel().beginUpdate();try{for(var t=d.getSelectionCells(),e=0;e<t.length;e++)d.cellLabelChanged(t[e],"")}finally{d.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+Delete"),this.addAction("duplicate",function(){try{d.setSelectionCells(d.duplicateCells()),d.scrollCellToVisible(d.getSelectionCell())}catch(t){o.handleError(t)}},null,null,Editor.ctrlKey+"+D"),this.put("turn",new Action(mxResources.get("turn")+" / "+mxResources.get("reverse"),function(t){d.turnShapes(d.getSelectionCells(),null!=t&&mxEvent.isShiftDown(t))},null,null,Editor.ctrlKey+"+R")),this.addAction("selectVertices",function(){d.selectVertices(null,!0)},null,null,Editor.ctrlKey+"+Shift+I"),this.addAction("selectEdges",function(){d.selectEdges()},null,null,Editor.ctrlKey+"+Shift+E"),this.addAction("selectAll",function(){d.selectAll(null,!0)},null,null,Editor.ctrlKey+"+A"),this.addAction("selectNone",function(){d.clearSelection()},null,null,Editor.ctrlKey+"+Shift+A"),this.addAction("lockUnlock",function(){if(!d.isSelectionEmpty()){d.getModel().beginUpdate();try{var t=d.isCellMovable(d.getSelectionCell())?1:0;d.toggleCellStyles(mxConstants.STYLE_MOVABLE,t),d.toggleCellStyles(mxConstants.STYLE_RESIZABLE,t),d.toggleCellStyles(mxConstants.STYLE_ROTATABLE,t),d.toggleCellStyles(mxConstants.STYLE_DELETABLE,t),d.toggleCellStyles(mxConstants.STYLE_EDITABLE,t),d.toggleCellStyles("connectable",t)}finally{d.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+L"),this.addAction("home",function(){d.home()},null,null,"Shift+Home"),this.addAction("exitGroup",function(){d.exitGroup()},null,null,Editor.ctrlKey+"+Shift+Home"),this.addAction("enterGroup",function(){d.enterGroup()},null,null,Editor.ctrlKey+"+Shift+End"),this.addAction("collapse",function(){d.foldCells(!0)},null,null,Editor.ctrlKey+"+Home"),this.addAction("expand",function(){d.foldCells(!1)},null,null,Editor.ctrlKey+"+End"),this.addAction("toFront",function(){d.orderCells(!1)},null,null,Editor.ctrlKey+"+Shift+F"),this.addAction("toBack",function(){d.orderCells(!0)},null,null,Editor.ctrlKey+"+Shift+B"),this.addAction("group",function(){var t;d.isEnabled()&&(1!=(t=mxUtils.sortCells(d.getSelectionCells(),!0)).length||d.isTable(t[0])||d.isTableRow(t[0])?1<(t=d.getCellsForGroup(t)).length&&d.setSelectionCell(d.groupCells(null,0,t)):d.setCellStyles("container","1"))},null,null,Editor.ctrlKey+"+G"),this.addAction("ungroup",function(){if(d.isEnabled()){var t=d.getSelectionCells();d.model.beginUpdate();try{var e=d.ungroupCells();if(null!=t)for(var n=0;n<t.length;n++)d.model.contains(t[n])&&(0==d.model.getChildCount(t[n])&&d.model.isVertex(t[n])&&d.setCellStyles("container","0",[t[n]]),e.push(t[n]))}finally{d.model.endUpdate()}d.setSelectionCells(e)}},null,null,Editor.ctrlKey+"+Shift+U"),this.addAction("removeFromGroup",function(){if(d.isEnabled()){var t=d.getSelectionCells();if(null!=t){for(var e=[],n=0;n<t.length;n++)d.isTableRow(t[n])||d.isTableCell(t[n])||e.push(t[n]);d.removeCellsFromParent(e)}}}),this.addAction("edit",function(){d.isEnabled()&&d.startEditingAtCell()},null,null,"F2/Enter"),this.addAction("editData...",function(){var t=d.getSelectionCell()||d.getModel().getRoot();o.showDataDialog(t)},null,null,Editor.ctrlKey+"+M"),this.addAction("editTooltip...",function(){var e,t,n;d.isEnabled()&&!d.isSelectionEmpty()&&(e=d.getSelectionCell(),t="",mxUtils.isNode(e.value)&&(n=null)!=(n=null==(n=Graph.translateDiagram&&null!=Graph.diagramLanguage&&e.value.hasAttribute("tooltip_"+Graph.diagramLanguage)?e.value.getAttribute("tooltip_"+Graph.diagramLanguage):n)?e.value.getAttribute("tooltip"):n)&&(t=n),t=new TextareaDialog(o,mxResources.get("editTooltip")+":",t,function(t){d.setTooltipForCell(e,t)}),o.showDialog(t.container,320,200,!0,!0),t.init())},null,null,"Alt+Shift+T"),this.addAction("openLink",function(){var t=d.getLinkForCell(d.getSelectionCell());null!=t&&d.openLink(t)}),this.addAction("editLink...",function(){var i,t;d.isEnabled()&&!d.isSelectionEmpty()&&(i=d.getSelectionCell(),t=d.getLinkForCell(i)||"",o.showLinkDialog(t,mxResources.get("apply"),function(t,e,n){t=mxUtils.trim(t),d.setLinkForCell(i,0<t.length?t:null),d.setAttributeForCell(i,"linkTarget",n)},!0,d.getLinkTargetForCell(i)))},null,null,"Alt+Shift+L"),this.put("insertImage",new Action(mxResources.get("image")+"...",function(){d.isEnabled()&&!d.isCellLocked(d.getDefaultParent())&&(d.clearSelection(),o.actions.get("image").funct())})).isEnabled=t,this.put("insertLink",new Action(mxResources.get("link")+"...",function(){d.isEnabled()&&!d.isCellLocked(d.getDefaultParent())&&o.showLinkDialog("",mxResources.get("insert"),function(t,e,n){if(0<(t=mxUtils.trim(t)).length){var i=null,l=d.getLinkTitle(t);(e=new mxCell(l=null!=e&&0<e.length&&(i=e[0].iconUrl,30<(l=(l=e[0].name||e[0].type).charAt(0).toUpperCase()+l.substring(1)).length)?l.substring(0,30)+"...":l,new mxGeometry(0,0,100,40),"fontColor=#0000EE;fontStyle=4;rounded=1;overflow=hidden;"+(null!=i?"shape=label;imageWidth=16;imageHeight=16;spacingLeft=26;align=left;image="+i:"spacing=10;"))).vertex=!0,i=d.getCenterInsertPoint(d.getBoundingBoxFromGeometry([e],!0)),e.geometry.x=i.x,e.geometry.y=i.y,d.setAttributeForCell(e,"linkTarget",n),d.setLinkForCell(e,t),d.cellSizeUpdated(e,!0),d.getModel().beginUpdate();try{e=d.addCell(e),d.fireEvent(new mxEventObject("cellsInserted","cells",[e]))}finally{d.getModel().endUpdate()}d.setSelectionCell(e),d.scrollCellToVisible(d.getSelectionCell())}},!0)})).isEnabled=t,this.addAction("link...",mxUtils.bind(this,function(){if(d.isEnabled())if(d.cellEditor.isContentEditing()){var t=d.getSelectedElement(),e=d.getParentByName(t,"A",d.cellEditor.textarea),n="";if(null==e&&null!=t&&null!=t.getElementsByTagName)for(var i=t.getElementsByTagName("a"),l=0;l<i.length&&null==e;l++)i[l].textContent==t.textContent&&(e=i[l]);null!=e&&"A"==e.nodeName&&(n=e.getAttribute("href")||"",d.selectNode(e));var s=d.cellEditor.saveSelection();o.showLinkDialog(n,mxResources.get("apply"),mxUtils.bind(this,function(t){d.cellEditor.restoreSelection(s),null!=t&&d.insertLink(t)}))}else(d.isSelectionEmpty()?this.get("insertLink"):this.get("editLink")).funct()})).isEnabled=t,this.addAction("autosize",function(){var t=d.getSelectionCells();if(null!=t){d.getModel().beginUpdate();try{for(var e=0;e<t.length;e++){var n,i,l=t[e];d.getModel().getChildCount(l)?d.updateGroupBounds([l],20):(n=d.view.getState(l),i=d.getCellGeometry(l),d.getModel().isVertex(l)&&null!=n&&null!=n.text&&null!=i&&d.isWrapping(l)?((i=i.clone()).height=n.text.boundingBox.height/d.view.scale,d.getModel().setGeometry(l,i)):d.updateCellSize(l))}}finally{d.getModel().endUpdate()}}},null,null,Editor.ctrlKey+"+Shift+Y"),this.addAction("formattedText",function(){d.stopEditing();var t=d.getCommonStyle(d.getSelectionCells()),t="1"==mxUtils.getValue(t,"html","0")?null:"1";d.getModel().beginUpdate();try{for(var e,n,i,l=d.getSelectionCells(),s=0;s<l.length;s++)null!=(state=d.getView().getState(l[s]))&&("1"==(e=mxUtils.getValue(state.style,"html","0"))&&null==t?(n=d.convertValueToString(state.cell),"0"!=mxUtils.getValue(state.style,"nl2Br","1")&&(n=n.replace(/\n/g,"").replace(/<br\s*.?>/g,"\n")),(i=document.createElement("div")).innerHTML=d.sanitizeHtml(n),n=mxUtils.extractTextWithWhitespace(i.childNodes),d.cellLabelChanged(state.cell,n),d.setCellStyles("html",t,[l[s]])):"0"==e&&"1"==t&&(n=mxUtils.htmlEntities(d.convertValueToString(state.cell),!1),"0"!=mxUtils.getValue(state.style,"nl2Br","1")&&(n=n.replace(/\n/g,"<br/>")),d.cellLabelChanged(state.cell,d.sanitizeHtml(n)),d.setCellStyles("html",t,[l[s]])));o.fireEvent(new mxEventObject("styleChanged","keys",["html"],"values",[null!=t?t:"0"],"cells",l))}finally{d.getModel().endUpdate()}}),this.addAction("wordWrap",function(){var t=d.getView().getState(d.getSelectionCell()),e="wrap";d.stopEditing(),null!=t&&"wrap"==t.style[mxConstants.STYLE_WHITE_SPACE]&&(e=null),d.setCellStyles(mxConstants.STYLE_WHITE_SPACE,e)}),this.addAction("rotation",function(){var t="0",e=d.getView().getState(d.getSelectionCell());null!=e&&(t=e.style[mxConstants.STYLE_ROTATION]||t),t=new FilenameDialog(o,t,mxResources.get("apply"),function(t){null!=t&&0<t.length&&d.setCellStyles(mxConstants.STYLE_ROTATION,t)},mxResources.get("enterValue")+" ("+mxResources.get("rotation")+" 0-360)"),o.showDialog(t.container,375,80,!0,!0),t.init()}),this.addAction("resetView",function(){d.zoomTo(1),o.resetScrollbars()},null,null,"Home"),this.addAction("zoomIn",function(t){d.isFastZoomEnabled()?d.lazyZoom(!0,!0,o.buttonZoomDelay):d.zoomIn()},null,null,Editor.ctrlKey+" + (Numpad) / Alt+Mousewheel"),this.addAction("zoomOut",function(t){d.isFastZoomEnabled()?d.lazyZoom(!1,!0,o.buttonZoomDelay):d.zoomOut()},null,null,Editor.ctrlKey+" - (Numpad) / Alt+Mousewheel"),this.addAction("fitWindow",function(){var t=d.isSelectionEmpty()?d.getGraphBounds():d.getBoundingBox(d.getSelectionCells()),e=d.view.translate,n=d.view.scale;t.x=t.x/n-e.x,t.y=t.y/n-e.y,t.width/=n,t.height/=n,null!=d.backgroundImage&&t.add(new mxRectangle(0,0,d.backgroundImage.width,d.backgroundImage.height)),0==t.width||0==t.height?(d.zoomTo(1),o.resetScrollbars()):(null!=(e=Editor.fitWindowBorders)&&(t.x-=e.x,t.y-=e.y,t.width+=e.width+e.x,t.height+=e.height+e.y),d.fitWindow(t))},null,null,Editor.ctrlKey+"+Shift+H"),this.addAction("fitPage",mxUtils.bind(this,function(){d.pageVisible||this.get("pageView").funct();var t=d.pageFormat,e=d.pageScale;d.zoomTo(Math.floor(20*Math.min((d.container.clientWidth-10)/t.width/e,(d.container.clientHeight-10)/t.height/e))/20),mxUtils.hasScrollbars(d.container)&&(t=d.getPagePadding(),d.container.scrollTop=t.y*d.view.scale-1,d.container.scrollLeft=Math.min(t.x*d.view.scale,(d.container.scrollWidth-d.container.clientWidth)/2)-1)}),null,null,Editor.ctrlKey+"+J"),this.addAction("fitTwoPages",mxUtils.bind(this,function(){d.pageVisible||this.get("pageView").funct();var t=d.pageFormat,e=d.pageScale;d.zoomTo(Math.floor(20*Math.min((d.container.clientWidth-10)/(2*t.width)/e,(d.container.clientHeight-10)/t.height/e))/20),mxUtils.hasScrollbars(d.container)&&(t=d.getPagePadding(),d.container.scrollTop=Math.min(t.y,(d.container.scrollHeight-d.container.clientHeight)/2),d.container.scrollLeft=Math.min(t.x,(d.container.scrollWidth-d.container.clientWidth)/2))}),null,null,Editor.ctrlKey+"+Shift+J"),this.addAction("fitPageWidth",mxUtils.bind(this,function(){var t;d.pageVisible||this.get("pageView").funct(),d.zoomTo(Math.floor(20*(d.container.clientWidth-10)/d.pageFormat.width/d.pageScale)/20),mxUtils.hasScrollbars(d.container)&&(t=d.getPagePadding(),d.container.scrollLeft=Math.min(t.x*d.view.scale,(d.container.scrollWidth-d.container.clientWidth)/2))})),this.put("customZoom",new Action(mxResources.get("custom")+"...",mxUtils.bind(this,function(){var t=new FilenameDialog(this.editorUi,parseInt(100*d.getView().getScale()),mxResources.get("apply"),mxUtils.bind(this,function(t){t=parseInt(t),!isNaN(t)&&0<t&&d.zoomTo(t/100)}),mxResources.get("zoom")+" (%)");this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}),null,null,Editor.ctrlKey+"+0")),this.addAction("pageScale...",mxUtils.bind(this,function(){var t=new FilenameDialog(this.editorUi,parseInt(100*d.pageScale),mxResources.get("apply"),mxUtils.bind(this,function(t){t=parseInt(t),!isNaN(t)&&0<t&&((t=new ChangePageSetup(o,null,null,null,t/100)).ignoreColor=!0,t.ignoreImage=!0,d.model.execute(t))}),mxResources.get("pageScale")+" (%)");this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()})),null),i=((n=this.addAction("grid",function(){d.setGridEnabled(!d.isGridEnabled()),o.fireEvent(new mxEventObject("gridEnabledChanged"))},null,null,Editor.ctrlKey+"+Shift+G")).setToggleAction(!0),n.setSelectedCallback(function(){return d.isGridEnabled()}),n.setEnabled(!1),(n=this.addAction("guides",function(){d.graphHandler.guidesEnabled=!d.graphHandler.guidesEnabled,o.fireEvent(new mxEventObject("guidesEnabledChanged"))})).setToggleAction(!0),n.setSelectedCallback(function(){return d.graphHandler.guidesEnabled}),n.setEnabled(!1),(n=this.addAction("tooltips",function(){d.tooltipHandler.setEnabled(!d.tooltipHandler.isEnabled()),o.fireEvent(new mxEventObject("tooltipsEnabledChanged"))})).setToggleAction(!0),n.setSelectedCallback(function(){return d.tooltipHandler.isEnabled()}),(n=this.addAction("collapseExpand",function(){var t=new ChangePageSetup(o);t.ignoreColor=!0,t.ignoreImage=!0,t.foldingEnabled=!d.foldingEnabled,d.model.execute(t)})).setToggleAction(!0),n.setSelectedCallback(function(){return d.foldingEnabled}),n.isEnabled=t,(n=this.addAction("scrollbars",function(){o.setScrollbars(!o.hasScrollbars())})).setToggleAction(!0),n.setSelectedCallback(function(){return d.scrollbars}),(n=this.addAction("pageView",mxUtils.bind(this,function(){o.setPageVisible(!d.pageVisible)}))).setToggleAction(!0),n.setSelectedCallback(function(){return d.pageVisible}),(n=this.addAction("connectionArrows",function(){d.connectionArrowsEnabled=!d.connectionArrowsEnabled,o.fireEvent(new mxEventObject("connectionArrowsChanged"))},null,null,"Alt+Shift+A")).setToggleAction(!0),n.setSelectedCallback(function(){return d.connectionArrowsEnabled}),(n=this.addAction("connectionPoints",function(){d.setConnectable(!d.connectionHandler.isEnabled()),o.fireEvent(new mxEventObject("connectionPointsChanged"))},null,null,"Alt+Shift+P")).setToggleAction(!0),n.setSelectedCallback(function(){return d.connectionHandler.isEnabled()}),(n=this.addAction("copyConnect",function(){d.connectionHandler.setCreateTarget(!d.connectionHandler.isCreateTarget()),o.fireEvent(new mxEventObject("copyConnectChanged"))})).setToggleAction(!0),n.setSelectedCallback(function(){return d.connectionHandler.isCreateTarget()}),n.isEnabled=t,(n=this.addAction("autosave",function(){o.editor.setAutosave(!o.editor.autosave)})).setToggleAction(!0),n.setSelectedCallback(function(){return o.editor.autosave}),n.isEnabled=t,n.visible=!1,this.addAction("help",function(){var t="";mxResources.isLanguageSupported(mxClient.language)&&(t="_"+mxClient.language),d.openLink(RESOURCES_PATH+"/help"+t+".html")}),!1);this.put("about",new Action(mxResources.get("about")+" Graph Editor...",function(){i||(o.showDialog(new AboutDialog(o).container,320,280,!0,!0,function(){i=!1}),i=!0)})),(n=mxUtils.bind(this,function(t,n,i,e){return this.addAction(t,function(){if(null!=i&&d.cellEditor.isContentEditing())i();else{d.stopEditing(!1),d.getModel().beginUpdate();try{var t=d.getSelectionCells();d.toggleCellStyleFlags(mxConstants.STYLE_FONTSTYLE,n,t),(n&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD?d.updateLabelElements(d.getSelectionCells(),function(t){t.style.fontWeight=null,"B"==t.nodeName&&d.replaceElement(t)}):(n&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC?d.updateLabelElements(d.getSelectionCells(),function(t){t.style.fontStyle=null,"I"==t.nodeName&&d.replaceElement(t)}):(n&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&d.updateLabelElements(d.getSelectionCells(),function(t){t.style.textDecoration=null,"U"==t.nodeName&&d.replaceElement(t)});for(var e=0;e<t.length;e++)0==d.model.getChildCount(t[e])&&d.autoSizeCell(t[e],!1)}finally{d.getModel().endUpdate()}}},null,null,e)}))("bold",mxConstants.FONT_BOLD,function(){document.execCommand("bold",!1,null)},Editor.ctrlKey+"+B"),n("italic",mxConstants.FONT_ITALIC,function(){document.execCommand("italic",!1,null)},Editor.ctrlKey+"+I"),n("underline",mxConstants.FONT_UNDERLINE,function(){document.execCommand("underline",!1,null)},Editor.ctrlKey+"+U"),this.addAction("fontColor...",function(){o.menus.pickColor(mxConstants.STYLE_FONTCOLOR,"forecolor","000000")}),this.addAction("strokeColor...",function(){o.menus.pickColor(mxConstants.STYLE_STROKECOLOR)}),this.addAction("fillColor...",function(){o.menus.pickColor(mxConstants.STYLE_FILLCOLOR)}),this.addAction("gradientColor...",function(){o.menus.pickColor(mxConstants.STYLE_GRADIENTCOLOR)}),this.addAction("backgroundColor...",function(){o.menus.pickColor(mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"backcolor")}),this.addAction("borderColor...",function(){o.menus.pickColor(mxConstants.STYLE_LABEL_BORDERCOLOR)}),this.addAction("vertical",function(){o.menus.toggleStyle(mxConstants.STYLE_HORIZONTAL,!0)}),this.addAction("shadow",function(){o.menus.toggleStyle(mxConstants.STYLE_SHADOW)}),this.addAction("solid",function(){d.getModel().beginUpdate();try{d.setCellStyles(mxConstants.STYLE_DASHED,null),d.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",[null,null],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}),this.addAction("dashed",function(){d.getModel().beginUpdate();try{d.setCellStyles(mxConstants.STYLE_DASHED,"1"),d.setCellStyles(mxConstants.STYLE_DASH_PATTERN,null),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1",null],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}),this.addAction("dotted",function(){d.getModel().beginUpdate();try{d.setCellStyles(mxConstants.STYLE_DASHED,"1"),d.setCellStyles(mxConstants.STYLE_DASH_PATTERN,"1 4"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],"values",["1","1 4"],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}),this.addAction("sharp",function(){d.getModel().beginUpdate();try{d.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),d.setCellStyles(mxConstants.STYLE_CURVED,"0"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","0"],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}),this.addAction("rounded",function(){d.getModel().beginUpdate();try{d.setCellStyles(mxConstants.STYLE_ROUNDED,"1"),d.setCellStyles(mxConstants.STYLE_CURVED,"0"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["1","0"],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}),this.addAction("toggleRounded",function(){if(!d.isSelectionEmpty()&&d.isEnabled()){d.getModel().beginUpdate();try{var t=d.getSelectionCells(),e=d.getCurrentCellStyle(t[0]),n="1"==mxUtils.getValue(e,mxConstants.STYLE_ROUNDED,"0")?"0":"1";d.setCellStyles(mxConstants.STYLE_ROUNDED,n),d.setCellStyles(mxConstants.STYLE_CURVED,null),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",[n,"0"],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}}),this.addAction("curved",function(){d.getModel().beginUpdate();try{d.setCellStyles(mxConstants.STYLE_ROUNDED,"0"),d.setCellStyles(mxConstants.STYLE_CURVED,"1"),o.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],"values",["0","1"],"cells",d.getSelectionCells()))}finally{d.getModel().endUpdate()}}),this.addAction("collapsible",function(){var t=d.view.getState(d.getSelectionCell()),e="1";null!=t&&null!=d.getFoldingImage(t)&&(e="0"),d.setCellStyles("collapsible",e),o.fireEvent(new mxEventObject("styleChanged","keys",["collapsible"],"values",[e],"cells",d.getSelectionCells()))}),this.addAction("editStyle...",mxUtils.bind(this,function(){var t,e=d.getSelectionCells();null!=e&&0<e.length&&(t=d.getModel(),t=new TextareaDialog(this.editorUi,mxResources.get("editStyle")+":",t.getStyle(e[0])||"",function(t){null!=t&&d.setCellStyle(mxUtils.trim(t),e)},null,null,400,220),this.editorUi.showDialog(t.container,420,300,!0,!0),t.init())}),null,null,Editor.ctrlKey+"+E"),this.addAction("setAsDefaultStyle",function(){d.isEnabled()&&!d.isSelectionEmpty()&&o.setDefaultStyle(d.getSelectionCell())},null,null,Editor.ctrlKey+"+Shift+D"),this.addAction("clearDefaultStyle",function(){d.isEnabled()&&o.clearDefaultStyle()},null,null,Editor.ctrlKey+"+Shift+R"),this.addAction("addWaypoint",function(){if(null!=(l=d.getSelectionCell())&&d.getModel().isEdge(l)){var t=r.graph.selectionCellsHandler.getHandler(l);if(t instanceof mxEdgeHandler){for(var e=d.view.translate,n=d.view.scale,i=e.x,e=e.y,l=d.getModel().getParent(l),s=d.getCellGeometry(l);d.getModel().isVertex(l)&&null!=s;)i+=s.x,e+=s.y,l=d.getModel().getParent(l),s=d.getCellGeometry(l);i=Math.round(d.snap(d.popupMenuHandler.triggerX/n-i)),n=Math.round(d.snap(d.popupMenuHandler.triggerY/n-e)),t.addPointAt(t.state,i,n)}}}),this.addAction("removeWaypoint",function(){var t=o.actions.get("removeWaypoint");null!=t.handler&&t.handler.removePoint(t.handler.state,t.index)}),this.addAction("clearWaypoints",function(){var t=d.getSelectionCells();if(null!=t){t=d.addAllEdges(t),d.getModel().beginUpdate();try{for(var e=0;e<t.length;e++){var n,i=t[e];d.getModel().isEdge(i)&&null!=(n=d.getCellGeometry(i))&&((n=n.clone()).points=null,n.x=0,n.y=0,n.offset=null,d.getModel().setGeometry(i,n))}}finally{d.getModel().endUpdate()}}},null,null,"Alt+Shift+C"),n=this.addAction("subscript",mxUtils.bind(this,function(){d.cellEditor.isContentEditing()&&document.execCommand("subscript",!1,null)}),null,null,Editor.ctrlKey+"+,"),n=this.addAction("superscript",mxUtils.bind(this,function(){d.cellEditor.isContentEditing()&&document.execCommand("superscript",!1,null)}),null,null,Editor.ctrlKey+"+."),n=this.addAction("indent",mxUtils.bind(this,function(){d.cellEditor.isContentEditing()&&document.execCommand("indent",!1,null)}),null,null,"Shift+Tab"),this.addAction("image...",function(){var t,e,n,h;d.isEnabled()&&!d.isCellLocked(d.getDefaultParent())&&(t=mxResources.get("image")+" ("+mxResources.get("url")+"):",n="",null!=(e=d.getView().getState(d.getSelectionCell()))&&(n=e.style[mxConstants.STYLE_IMAGE]||n),h=d.cellEditor.saveSelection(),o.showImageDialog(t,n,function(t,e,n){if(d.cellEditor.isContentEditing())d.cellEditor.restoreSelection(h),d.insertImage(t,e,n);else{var i=d.getSelectionCells();if(null!=t&&(0<t.length||0<i.length)){var l=null;d.getModel().beginUpdate();try{0==i.length&&(i=[d.insertVertex(d.getDefaultParent(),null,"",0,0,e,n,"shape=image;imageAspect=0;aspect=fixed;verticalLabelPosition=bottom;verticalAlign=top;")],s=d.getCenterInsertPoint(d.getBoundingBoxFromGeometry(i,!0)),i[0].geometry.x=s.x,i[0].geometry.y=s.y,l=i,d.fireEvent(new mxEventObject("cellsInserted","cells",l))),d.setCellStyles(mxConstants.STYLE_IMAGE,0<t.length?t:null,i);var s,o,r,a=d.getCurrentCellStyle(i[0]);"image"!=a[mxConstants.STYLE_SHAPE]&&"label"!=a[mxConstants.STYLE_SHAPE]?d.setCellStyles(mxConstants.STYLE_SHAPE,"image",i):0==t.length&&d.setCellStyles(mxConstants.STYLE_SHAPE,null,i),1==d.getSelectionCount()&&null!=e&&null!=n&&(o=i[0],null!=(r=d.getModel().getGeometry(o)))&&((r=r.clone()).width=e,r.height=n,d.getModel().setGeometry(o,r))}finally{d.getModel().endUpdate()}null!=l&&(d.setSelectionCells(l),d.scrollCellToVisible(l[0]))}}},d.cellEditor.isContentEditing(),!d.cellEditor.isContentEditing()))}).isEnabled=t,(n=this.addAction("layers",mxUtils.bind(this,function(){null==this.layersWindow?(this.layersWindow=new LayersWindow(o,document.body.offsetWidth-280,120,220,196),this.layersWindow.window.addListener("show",function(){o.fireEvent(new mxEventObject("layers"))}),this.layersWindow.window.addListener("hide",function(){o.fireEvent(new mxEventObject("layers"))}),this.layersWindow.window.setVisible(!0),o.fireEvent(new mxEventObject("layers")),this.layersWindow.init()):this.layersWindow.window.setVisible(!this.layersWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+L")).setToggleAction(!0),n.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.layersWindow&&this.layersWindow.window.isVisible()})),(n=this.addAction("formatPanel",mxUtils.bind(this,function(){o.toggleFormatPanel()}),null,null,Editor.ctrlKey+"+Shift+P")).setToggleAction(!0),n.setSelectedCallback(mxUtils.bind(this,function(){return 0<o.formatWidth})),(n=this.addAction("outline",mxUtils.bind(this,function(){null==this.outlineWindow?(this.outlineWindow=new OutlineWindow(o,document.body.offsetWidth-260,100,180,180),this.outlineWindow.window.addListener("show",function(){o.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.addListener("hide",function(){o.fireEvent(new mxEventObject("outline"))}),this.outlineWindow.window.setVisible(!0),o.fireEvent(new mxEventObject("outline"))):this.outlineWindow.window.setVisible(!this.outlineWindow.window.isVisible())}),null,null,Editor.ctrlKey+"+Shift+O")).setToggleAction(!0),n.setSelectedCallback(mxUtils.bind(this,function(){return null!=this.outlineWindow&&this.outlineWindow.window.isVisible()}))},Actions.prototype.addAction=function(t,e,n,i,l){var s="..."==t.substring(t.length-3)?(t=t.substring(0,t.length-3),mxResources.get(t)+"..."):mxResources.get(t);return this.put(t,new Action(s,e,n,i,l))},Actions.prototype.put=function(t,e){return this.actions[t]=e},Actions.prototype.get=function(t){return this.actions[t]},mxUtils.extend(Action,mxEventSource),Action.prototype.createFunction=function(t){return t},Action.prototype.setEnabled=function(t){this.enabled!=t&&(this.enabled=t,this.fireEvent(new mxEventObject("stateChanged")))},Action.prototype.isEnabled=function(){return this.enabled},Action.prototype.setToggleAction=function(t){this.toggleAction=t},Action.prototype.setSelectedCallback=function(t){this.selectedCallback=t},Action.prototype.isSelected=function(){return this.selectedCallback()};var $jscomp=$jscomp||{},OpenDialog=($jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return("undefined"==typeof window||window!==t)&&"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var l=t[i];l in n||(n[l]={}),n=n[l]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.fill",function(t){return t||function(t,e,n){var i=this.length||0;for(e<0&&(e=Math.max(0,i+e)),(null==n||i<n)&&(n=i),(n=Number(n))<0&&(n=Math.max(0,i+n)),e=Number(e||0);e<n;e++)this[e]=t;return this}},"es6","es3"),function(){var t=document.createElement("iframe");t.style.backgroundColor="transparent",t.allowTransparency="true",t.style.borderStyle="none",t.style.borderWidth="0px",t.style.overflow="hidden",t.frameBorder="0",t.setAttribute("width",(Editor.useLocalStorage?640:320)+"px"),t.setAttribute("height",(Editor.useLocalStorage?480:220)+"px"),t.setAttribute("src",OPEN_FORM),this.container=t}),ColorDialog=function(e,t,n,i){function d(){var t=l(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return t.style.marginBottom="8px",t}function l(t,e,n,i){e=null!=e?e:12;var l=document.createElement("table"),s=(l.style.borderCollapse="collapse",l.setAttribute("cellspacing","0"),l.style.marginBottom="20px",l.style.cellSpacing="0px",document.createElement("tbody"));l.appendChild(s);for(var o=t.length/e,r=0;r<o;r++){for(var a=document.createElement("tr"),h=0;h<e;h++)!function(t){var e=document.createElement("td");e.style.border="1px solid black",e.style.padding="0px",e.style.width="16px",e.style.height="16px","none"==(t=null==t?n:t)?e.style.background="url('"+Dialog.prototype.noColorImage+"')":e.style.backgroundColor="#"+t,a.appendChild(e),null!=t&&(e.style.cursor="pointer",mxEvent.addListener(e,"click",function(){"none"==t?(p.fromString("ffffff"),u.value="none"):p.fromString(t)}))}(t[r*e+h]);s.appendChild(a)}return i&&((t=document.createElement("td")).setAttribute("title",mxResources.get("reset")),t.style.border="1px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px",t.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",t.style.backgroundPosition="center center",t.style.backgroundRepeat="no-repeat",t.style.cursor="pointer",a.appendChild(t),mxEvent.addListener(t,"click",function(){ColorDialog.resetRecentColors(),l.parentNode.replaceChild(d(),l)})),c.appendChild(l),l}this.editorUi=e;var u=document.createElement("input"),p=(u.style.marginBottom="10px",u.style.width="216px",mxClient.IS_IE&&(u.style.marginTop="10px",document.body.appendChild(u)),this.init=function(){mxClient.IS_TOUCH||u.focus()},new jscolor.color(u)),s=(p.pickerOnfocus=!1,p.showPicker(),document.createElement("div")),c=(jscolor.picker.box.style.position="relative",jscolor.picker.box.style.width="230px",jscolor.picker.box.style.height="100px",jscolor.picker.box.style.paddingBottom="10px",s.appendChild(jscolor.picker.box),document.createElement("center")),o=(s.appendChild(u),mxUtils.br(s),d(),l(this.presetColors)),r=(o.style.marginBottom="8px",(o=l(this.defaultColors)).style.marginBottom="16px",s.appendChild(c),(o=document.createElement("div")).style.textAlign="right",o.style.whiteSpace="nowrap",mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog(),null!=i&&i()})),a=(r.className="geBtn",e.editor.cancelFirst&&o.appendChild(r),null!=n?n:this.createApplyFunction());(n=mxUtils.button(mxResources.get("apply"),function(){var t=u.value;/(^#?[a-zA-Z0-9]*$)/.test(t)?("none"!=t&&"#"!=t.charAt(0)&&(t="#"+t),ColorDialog.addRecentColor("none"!=t?t.substring(1):t,12),a(t),e.hideDialog()):e.handleError({message:mxResources.get("invalidInput")})})).className="geBtn gePrimaryBtn",o.appendChild(n),e.editor.cancelFirst||o.appendChild(r),null!=t&&("none"==t?(p.fromString("ffffff"),u.value="none"):p.fromString(t)),s.appendChild(o),this.picker=p,this.colorInput=u,mxEvent.addListener(s,"keydown",function(t){27==t.keyCode&&(e.hideDialog(),null!=i&&i(),mxEvent.consume(t))}),this.container=s},AboutDialog=(ColorDialog.prototype.presetColors="E6D0DE CDA2BE B5739D E1D5E7 C3ABD0 A680B8 D4E1F5 A9C4EB 7EA6E0 D5E8D4 9AC7BF 67AB9F D5E8D4 B9E0A5 97D077 FFF2CC FFE599 FFD966 FFF4C3 FFCE9F FFB570 F8CECC F19C99 EA6B66".split(" "),ColorDialog.prototype.defaultColors="none FFFFFF E6E6E6 CCCCCC B3B3B3 999999 808080 666666 4D4D4D 333333 1A1A1A 000000 FFCCCC FFE6CC FFFFCC E6FFCC CCFFCC CCFFE6 CCFFFF CCE5FF CCCCFF E5CCFF FFCCFF FFCCE6 FF9999 FFCC99 FFFF99 CCFF99 99FF99 99FFCC 99FFFF 99CCFF 9999FF CC99FF FF99FF FF99CC FF6666 FFB366 FFFF66 B3FF66 66FF66 66FFB3 66FFFF 66B2FF 6666FF B266FF FF66FF FF66B3 FF3333 FF9933 FFFF33 99FF33 33FF33 33FF99 33FFFF 3399FF 3333FF 9933FF FF33FF FF3399 FF0000 FF8000 FFFF00 80FF00 00FF00 00FF80 00FFFF 007FFF 0000FF 7F00FF FF00FF FF0080 CC0000 CC6600 CCCC00 66CC00 00CC00 00CC66 00CCCC 0066CC 0000CC 6600CC CC00CC CC0066 990000 994C00 999900 4D9900 009900 00994D 009999 004C99 000099 4C0099 990099 99004D 660000 663300 666600 336600 006600 006633 006666 003366 000066 330066 660066 660033 330000 331A00 333300 1A3300 003300 00331A 003333 001933 000033 190033 330033 33001A".split(" "),ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,function(t){var e=this.editorUi.editor.graph;e.getModel().beginUpdate();try{e.setCellStyles(this.currentColorKey,t),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[t],"cells",e.getSelectionCells()))}finally{e.getModel().endUpdate()}})},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(t,e){null!=t&&(mxUtils.remove(t,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,t),ColorDialog.recentColors.length>=e)&&ColorDialog.recentColors.pop()},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]},function(t){var e=document.createElement("div"),n=(e.setAttribute("align","center"),document.createElement("h3"));mxUtils.write(n,mxResources.get("about")+" GraphEditor"),e.appendChild(n),(n=document.createElement("img")).style.border="0px",n.setAttribute("width","176"),n.setAttribute("width","151"),n.setAttribute("src",IMAGE_PATH+"/logo.png"),e.appendChild(n),mxUtils.br(e),mxUtils.write(e,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(e),(n=document.createElement("a")).setAttribute("href","http://www.jgraph.com/"),n.setAttribute("target","_blank"),mxUtils.write(n,"www.jgraph.com"),e.appendChild(n),mxUtils.br(e),mxUtils.br(e),(n=mxUtils.button(mxResources.get("close"),function(){t.hideDialog()})).className="geBtn gePrimaryBtn",e.appendChild(n),this.container=e}),TextareaDialog=function(t,e,n,i,l,s,o,r,a,h,d,u,p,c){o=null!=o?o:300,r=null!=r?r:120,h=null!=h&&h;var m=document.createElement("table"),g=document.createElement("tbody"),x=document.createElement("tr"),y=document.createElement("td"),f=(y.style.fontSize="10pt",y.style.width="100px",mxUtils.write(y,e),x.appendChild(y),g.appendChild(x),x=document.createElement("tr"),y=document.createElement("td"),document.createElement("textarea"));if(d&&f.setAttribute("wrap","off"),f.setAttribute("spellcheck","false"),f.setAttribute("autocorrect","off"),f.setAttribute("autocomplete","off"),f.setAttribute("autocapitalize","off"),mxUtils.write(f,n||""),f.style.resize="none",f.style.width=o+"px",f.style.height=r+"px",this.textarea=f,this.init=function(){f.focus(),f.scrollTop=0},y.appendChild(f),x.appendChild(y),g.appendChild(x),x=document.createElement("tr"),(y=document.createElement("td")).style.paddingTop="14px",y.style.whiteSpace="nowrap",y.setAttribute("align","right"),null!=p&&((e=mxUtils.button(mxResources.get("help"),function(){t.editor.graph.openLink(p)})).className="geBtn",y.appendChild(e)),null!=c)for(e=0;e<c.length;e++)!function(t,e){(t=mxUtils.button(t,function(t){e(t,f)})).className="geBtn",y.appendChild(t)}(c[e][0],c[e][1]);(s=mxUtils.button(s||mxResources.get("cancel"),function(){t.hideDialog(),null!=l&&l()})).className="geBtn",t.editor.cancelFirst&&y.appendChild(s),null!=a&&a(y,f),null!=i&&((a=mxUtils.button(u||mxResources.get("apply"),function(){h||t.hideDialog(),i(f.value)})).className="geBtn gePrimaryBtn",y.appendChild(a)),t.editor.cancelFirst||y.appendChild(s),x.appendChild(y),g.appendChild(x),m.appendChild(g),this.container=m},EditDiagramDialog=function(s){var t,e=document.createElement("div"),o=(e.style.textAlign="right",document.createElement("textarea")),n=(o.setAttribute("wrap","off"),o.setAttribute("spellcheck","false"),o.setAttribute("autocorrect","off"),o.setAttribute("autocomplete","off"),o.setAttribute("autocapitalize","off"),o.style.overflow="auto",o.style.resize="none",o.style.width="600px",o.style.height="360px",o.style.marginBottom="16px",o.value=mxUtils.getPrettyXml(s.editor.getGraphXml()),e.appendChild(o),this.init=function(){o.focus()},Graph.fileSupport&&(o.addEventListener("dragover",function(t){t.stopPropagation(),t.preventDefault()},!1),o.addEventListener("drop",function(t){var e;t.stopPropagation(),t.preventDefault(),0<t.dataTransfer.files.length?(t=t.dataTransfer.files[0],(e=new FileReader).onload=function(t){o.value=t.target.result},e.readAsText(t)):o.value=s.extractGraphModelFromEvent(t)},!1)),mxUtils.button(mxResources.get("cancel"),function(){s.hideDialog()})),r=(n.className="geBtn",s.editor.cancelFirst&&e.appendChild(n),document.createElement("select"));r.style.width="180px",r.className="geBtn",s.editor.graph.isEnabled()&&((t=document.createElement("option")).setAttribute("value","replace"),mxUtils.write(t,mxResources.get("replaceExistingDrawing")),r.appendChild(t)),(t=document.createElement("option")).setAttribute("value","new"),mxUtils.write(t,mxResources.get("openInNewWindow")),EditDiagramDialog.showNewWindowOption&&r.appendChild(t),s.editor.graph.isEnabled()&&((t=document.createElement("option")).setAttribute("value","import"),mxUtils.write(t,mxResources.get("addToExistingDrawing")),r.appendChild(t)),e.appendChild(r),(t=mxUtils.button(mxResources.get("ok"),function(){var t=Graph.zapGremlins(mxUtils.trim(o.value)),e=null;if("new"==r.value)s.hideDialog(),s.editor.editAsNew(t);else if("replace"==r.value){s.editor.graph.model.beginUpdate();try{s.editor.setGraphXml(mxUtils.parseXml(t).documentElement),s.hideDialog()}catch(t){e=t}finally{s.editor.graph.model.endUpdate()}}else if("import"==r.value){s.editor.graph.model.beginUpdate();try{var n=mxUtils.parseXml(t),i=new mxGraphModel,l=(new mxCodec(n).decode(n.documentElement,i),i.getChildren(i.getChildAt(i.getRoot(),0)));s.editor.graph.setSelectionCells(s.editor.graph.importCells(l)),s.hideDialog()}catch(t){e=t}finally{s.editor.graph.model.endUpdate()}}null!=e&&mxUtils.alert(e.message)})).className="geBtn gePrimaryBtn",e.appendChild(t),s.editor.cancelFirst||e.appendChild(n),this.container=e},ExportDialog=(EditDiagramDialog.showNewWindowOption=!0,function(o){function t(){var t=d.value,e=t.lastIndexOf(".");d.value=0<e?t.substring(0,e+1)+u.value:t+"."+u.value,"xml"===u.value?(p.setAttribute("disabled","true"),c.setAttribute("disabled","true"),m.setAttribute("disabled","true"),E.setAttribute("disabled","true")):(p.removeAttribute("disabled"),c.removeAttribute("disabled"),m.removeAttribute("disabled"),E.removeAttribute("disabled")),"png"===u.value||"svg"===u.value||"pdf"===u.value?f.removeAttribute("disabled"):f.setAttribute("disabled","disabled"),"png"===u.value||"jpg"===u.value||"pdf"===u.value?C.removeAttribute("disabled"):C.setAttribute("disabled","disabled"),"png"===u.value?(g.removeAttribute("disabled"),x.removeAttribute("disabled")):(g.setAttribute("disabled","disabled"),x.setAttribute("disabled","disabled"))}function e(){c.style.backgroundColor=c.value*m.value>MAX_AREA||c.value<=0?"red":"",m.style.backgroundColor=c.value*m.value>MAX_AREA||m.value<=0?"red":""}var r=o.editor.graph,n=r.getGraphBounds(),i=r.view.scale,l=Math.ceil(n.width/i),s=Math.ceil(n.height/i),i=document.createElement("table"),a=document.createElement("tbody"),h=(i.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),n=document.createElement("tr"),document.createElement("td")),d=(h.style.fontSize="10pt",h.style.width="100px",mxUtils.write(h,mxResources.get("filename")+":"),n.appendChild(h),document.createElement("input")),u=(d.setAttribute("value",o.editor.getOrCreateFilename()),d.style.width="180px",(h=document.createElement("td")).appendChild(d),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("format")+":"),n.appendChild(h),document.createElement("select")),p=(u.style.width="180px",(h=document.createElement("option")).setAttribute("value","png"),mxUtils.write(h,mxResources.get("formatPng")),u.appendChild(h),h=document.createElement("option"),ExportDialog.showGifOption&&(h.setAttribute("value","gif"),mxUtils.write(h,mxResources.get("formatGif")),u.appendChild(h)),(h=document.createElement("option")).setAttribute("value","jpg"),mxUtils.write(h,mxResources.get("formatJpg")),u.appendChild(h),(h=document.createElement("option")).setAttribute("value","pdf"),mxUtils.write(h,mxResources.get("formatPdf")),u.appendChild(h),(h=document.createElement("option")).setAttribute("value","svg"),mxUtils.write(h,mxResources.get("formatSvg")),u.appendChild(h),ExportDialog.showXmlOption&&((h=document.createElement("option")).setAttribute("value","xml"),mxUtils.write(h,mxResources.get("formatXml")),u.appendChild(h)),(h=document.createElement("td")).appendChild(u),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("zoom")+" (%):"),n.appendChild(h),document.createElement("input")),c=(p.setAttribute("type","number"),p.setAttribute("value","100"),p.style.width="180px",(h=document.createElement("td")).appendChild(p),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("width")+":"),n.appendChild(h),document.createElement("input")),m=(c.setAttribute("value",l),c.style.width="180px",(h=document.createElement("td")).appendChild(c),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("height")+":"),n.appendChild(h),document.createElement("input")),g=(m.setAttribute("value",s),m.style.width="180px",(h=document.createElement("td")).appendChild(m),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("dpi")+":"),n.appendChild(h),document.createElement("select")),x=(g.style.width="180px",(h=document.createElement("option")).setAttribute("value","100"),mxUtils.write(h,"100dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","200"),mxUtils.write(h,"200dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","300"),mxUtils.write(h,"300dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","400"),mxUtils.write(h,"400dpi"),g.appendChild(h),(h=document.createElement("option")).setAttribute("value","custom"),mxUtils.write(h,mxResources.get("custom")),g.appendChild(h),document.createElement("input")),y=(x.style.width="180px",x.style.display="none",x.setAttribute("value","100"),x.setAttribute("type","number"),x.setAttribute("min","50"),x.setAttribute("step","50"),!1),f=(mxEvent.addListener(g,"change",function(){"custom"==this.value?(this.style.display="none",x.style.display="",x.focus()):(x.value=this.value,y||(p.value=this.value))}),mxEvent.addListener(x,"change",function(){var t=parseInt(x.value);isNaN(t)||t<=0?x.style.backgroundColor="red":(x.style.backgroundColor="",y||(p.value=t))}),(h=document.createElement("td")).appendChild(g),h.appendChild(x),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("background")+":"),n.appendChild(h),document.createElement("input")),C=(f.setAttribute("type","checkbox"),f.checked=null==r.background||r.background==mxConstants.NONE,(h=document.createElement("td")).appendChild(f),mxUtils.write(h,mxResources.get("transparent")),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("grid")+":"),n.appendChild(h),document.createElement("input")),E=(C.setAttribute("type","checkbox"),C.checked=!1,(h=document.createElement("td")).appendChild(C),n.appendChild(h),a.appendChild(n),n=document.createElement("tr"),(h=document.createElement("td")).style.fontSize="10pt",mxUtils.write(h,mxResources.get("borderWidth")+":"),n.appendChild(h),document.createElement("input")),v=(E.setAttribute("type","number"),E.setAttribute("value",ExportDialog.lastBorderValue),E.style.width="180px",(h=document.createElement("td")).appendChild(E),n.appendChild(h),a.appendChild(n),i.appendChild(a),mxEvent.addListener(u,"change",t),t(),mxEvent.addListener(p,"change",function(){y=!0;var t=Math.max(0,parseFloat(p.value)||100)/100;p.value=parseFloat((100*t).toFixed(2)),0<l?(c.value=Math.floor(l*t),m.value=Math.floor(s*t)):(p.value="100",c.value=l,m.value=s),e()}),mxEvent.addListener(c,"change",function(){var t=parseInt(c.value)/l;0<t?(p.value=parseFloat((100*t).toFixed(2)),m.value=Math.floor(s*t)):(p.value="100",c.value=l,m.value=s),e()}),mxEvent.addListener(m,"change",function(){var t=parseInt(m.value)/s;0<t?(p.value=parseFloat((100*t).toFixed(2)),c.value=Math.floor(l*t)):(p.value="100",c.value=l,m.value=s),e()}),n=document.createElement("tr"),(h=document.createElement("td")).setAttribute("align","right"),h.style.paddingTop="22px",h.colSpan=2,mxUtils.button(mxResources.get("export"),mxUtils.bind(this,function(){var t,e,n,i,l,s;parseInt(p.value)<=0?mxUtils.alert(mxResources.get("drawingEmpty")):(t=d.value,e=u.value,n=Math.max(0,parseFloat(p.value)||100)/100,i=Math.max(0,parseInt(E.value)),l=r.background,s=Math.max(1,parseInt(x.value)),"svg"!=e&&"png"!=e&&"pdf"!=e||!f.checked?null!=l&&l!=mxConstants.NONE||(l="#ffffff"):l=null,ExportDialog.lastBorderValue=i,ExportDialog.exportFile(o,t,e,l,n,i,s,C.checked))}))),S=(v.className="geBtn gePrimaryBtn",mxUtils.button(mxResources.get("cancel"),function(){o.hideDialog()}));S.className="geBtn",o.editor.cancelFirst?(h.appendChild(S),h.appendChild(v)):(h.appendChild(v),h.appendChild(S)),n.appendChild(h),a.appendChild(n),i.appendChild(a),this.container=i}),EditDataDialog=(ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(t,e,n,i,l,s,o,r){var a,h,d;r=t.editor.graph,"xml"==n?ExportDialog.saveLocalFile(t,mxUtils.getXml(t.editor.getGraphXml()),e,n):"svg"==n?ExportDialog.saveLocalFile(t,mxUtils.getXml(r.getSvg(i,l,s)),e,n):(a=r.getGraphBounds(),d=(h=mxUtils.createXmlDocument()).createElement("output"),h.appendChild(d),(h=new mxXmlCanvas2D(d)).translate(Math.floor((s/l-a.x)/r.view.scale),Math.floor((s/l-a.y)/r.view.scale)),h.scale(l/r.view.scale),(new mxImageExport).drawState(r.getView().getState(r.model.root),h),d="xml="+encodeURIComponent(mxUtils.getXml(d)),h=Math.ceil(a.width*l/r.view.scale+2*s),l=Math.ceil(a.height*l/r.view.scale+2*s),d.length<=MAX_REQUEST_SIZE&&h*l<MAX_AREA?(t.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+n+"&filename="+encodeURIComponent(e)+"&bg="+(null!=i?i:"none")+"&w="+h+"&h="+l+"&"+d+"&dpi="+o).simulate(document,"_blank")):mxUtils.alert(mxResources.get("drawingTooLarge")))},ExportDialog.saveLocalFile=function(t,e,n,i){e.length<MAX_REQUEST_SIZE?(t.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(e)+"&filename="+encodeURIComponent(n)+"&format="+i).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))},function(n,i){function t(){0<C.value.length?E.removeAttribute("disabled"):E.setAttribute("disabled","disabled")}var e=document.createElement("div"),l=n.editor.graph,s=l.getModel().getValue(i),o=(mxUtils.isNode(s)||((g=mxUtils.createXmlDocument().createElement("object")).setAttribute("label",s||""),s=g),{});try{var r=mxUtils.getValue(n.editor.graph.getCurrentCellStyle(i),"metaData",null);null!=r&&(o=JSON.parse(r))}catch(t){}for(var a=new mxForm("properties"),h=(a.table.style.width="100%",s.attributes),d=[],u=[],p=0,c=null!=EditDataDialog.getDisplayIdForCell?EditDataDialog.getDisplayIdForCell(n,i):null,m=function(t,e){var n,i=document.createElement("div"),l=(i.style.position="relative",i.style.paddingRight="20px",i.style.boxSizing="border-box",i.style.width="100%",document.createElement("a")),s=mxUtils.createImage(Dialog.prototype.closeImage);s.style.height="9px",s.style.fontSize="9px",s.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",l.className="geButton",l.setAttribute("title",mxResources.get("delete")),l.style.position="absolute",l.style.top="4px",l.style.right="0px",l.style.margin="0px",l.style.width="9px",l.style.height="9px",l.style.cursor="pointer",l.appendChild(s),n=e,mxEvent.addListener(l,"click",e=function(){for(var t=0,e=0;e<d.length;e++){if(d[e]==n){u[e]=null,a.table.deleteRow(t+(null!=c?1:0));break}null!=u[e]&&t++}}),e=t.parentNode,i.appendChild(t),i.appendChild(l),e.appendChild(i)},g=function(t,e,n){d[t]=e,u[t]=a.addTextarea(d[p]+":",n,2),u[t].style.width="100%",0<n.indexOf("\n")&&u[t].setAttribute("rows","2"),m(u[t],e),null!=o[e]&&0==o[e].editable&&u[t].setAttribute("disabled","disabled")},r=[],x=l.getModel().getParent(i)==l.getModel().getRoot(),y=0;y<h.length;y++)!x&&"label"==h[y].nodeName||"placeholders"==h[y].nodeName||r.push({name:h[y].nodeName,value:h[y].nodeValue});for(r.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),null!=c&&((h=document.createElement("div")).style.width="100%",h.style.fontSize="11px",h.style.textAlign="center",mxUtils.write(h,c),a.addField(mxResources.get("id")+":",h)),y=0;y<r.length;y++)g(p,r[y].name,r[y].value),p++;(r=document.createElement("div")).style.cssText="position:absolute;left:30px;right:30px;overflow-y:auto;top:30px;bottom:80px;",r.appendChild(a.table),(g=document.createElement("div")).style.boxSizing="border-box",g.style.paddingRight="160px",g.style.whiteSpace="nowrap",g.style.marginTop="6px",g.style.width="100%";var f,C=document.createElement("input"),E=(C.setAttribute("placeholder",mxResources.get("enterPropertyName")),C.setAttribute("type","text"),C.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"36":"40"),C.style.boxSizing="border-box",C.style.marginLeft="2px",C.style.width="100%",g.appendChild(C),r.appendChild(g),e.appendChild(r),mxUtils.button(mxResources.get("addProperty"),function(){var t=C.value;if(0<t.length&&"label"!=t&&"placeholders"!=t&&t.indexOf(":")<0)try{var e,n=mxUtils.indexOf(d,t);(0<=n&&null!=u[n]?u[n]:(s.cloneNode(!1).setAttribute(t,""),0<=n&&(d.splice(n,1),u.splice(n,1)),d.push(t),(e=a.addTextarea(t+":","",2)).style.width="100%",u.push(e),m(e,t),e)).focus(),E.setAttribute("disabled","disabled"),C.value=""}catch(t){mxUtils.alert(t)}else mxUtils.alert(mxResources.get("invalidName"))}));this.init=function(){(0<u.length?u[0]:C).focus()},E.setAttribute("title",mxResources.get("addProperty")),E.setAttribute("disabled","disabled"),E.style.textOverflow="ellipsis",E.style.position="absolute",E.style.overflow="hidden",E.style.width="144px",E.style.right="0px",E.className="geBtn",g.appendChild(E),(r=mxUtils.button(mxResources.get("cancel"),function(){n.hideDialog.apply(n,arguments)})).className="geBtn",(g=mxUtils.button(mxResources.get("apply"),function(){try{n.hideDialog.apply(n,arguments),s=s.cloneNode(!0);for(var t=!1,e=0;e<d.length;e++)null==u[e]?s.removeAttribute(d[e]):(s.setAttribute(d[e],u[e].value),t=t||"placeholder"==d[e]&&"1"==s.getAttribute("placeholders"));t&&s.removeAttribute("label"),l.getModel().setValue(i,s)}catch(t){mxUtils.alert(t)}})).className="geBtn gePrimaryBtn",mxEvent.addListener(C,"keyup",t),mxEvent.addListener(C,"change",t),(h=document.createElement("div")).style.cssText="position:absolute;left:30px;right:30px;text-align:right;bottom:30px;height:40px;",(n.editor.graph.getModel().isVertex(i)||n.editor.graph.getModel().isEdge(i))&&((x=document.createElement("span")).style.marginRight="10px",(y=document.createElement("input")).setAttribute("type","checkbox"),y.style.marginRight="6px","1"==s.getAttribute("placeholders")&&(y.setAttribute("checked","checked"),y.defaultChecked=!0),mxEvent.addListener(y,"click",function(){"1"==s.getAttribute("placeholders")?s.removeAttribute("placeholders"):s.setAttribute("placeholders","1")}),x.appendChild(y),mxUtils.write(x,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink&&((y=document.createElement("a")).setAttribute("href",EditDataDialog.placeholderHelpLink),y.setAttribute("title",mxResources.get("help")),y.setAttribute("target","_blank"),y.style.marginLeft="8px",y.style.cursor="help",f=document.createElement("img"),mxUtils.setOpacity(f,50),f.style.height="16px",f.style.width="16px",f.setAttribute("border","0"),f.setAttribute("valign","middle"),f.style.marginTop=mxClient.IS_IE11?"0px":"-4px",f.setAttribute("src",Editor.helpImage),y.appendChild(f),x.appendChild(y)),h.appendChild(x)),n.editor.cancelFirst?(h.appendChild(r),h.appendChild(g)):(h.appendChild(g),h.appendChild(r)),e.appendChild(h),this.container=e}),LinkDialog=(EditDataDialog.getDisplayIdForCell=function(t,e){var n=null;return n=null!=t.editor.graph.getModel().getParent(e)?e.getId():n},EditDataDialog.placeholderHelpLink=null,function(e,t,n,i){var l=document.createElement("div"),s=(mxUtils.write(l,mxResources.get("editLink")+":"),document.createElement("div")),o=(s.className="geTitle",s.style.backgroundColor="transparent",s.style.borderColor="transparent",s.style.whiteSpace="nowrap",s.style.textOverflow="clip",s.style.cursor="default",s.style.paddingRight="20px",document.createElement("input"));o.setAttribute("value",t),o.setAttribute("placeholder","http://www.example.com/"),o.setAttribute("type","text"),o.style.marginTop="6px",o.style.width="400px",o.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="100% 50%",o.style.paddingRight="14px",(t=document.createElement("div")).setAttribute("title",mxResources.get("reset")),t.style.position="relative",t.style.left="-16px",t.style.width="12px",t.style.height="14px",t.style.cursor="pointer",t.style.display="inline-block",t.style.top="3px",t.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(t,"click",function(){o.value="",o.focus()}),s.appendChild(o),s.appendChild(t),l.appendChild(s),this.init=function(){o.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode?o.select():document.execCommand("selectAll",!1,null)},(s=document.createElement("div")).style.marginTop="18px",s.style.textAlign="right",mxEvent.addListener(o,"keypress",function(t){13==t.keyCode&&(e.hideDialog(),i(o.value))}),(t=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()})).className="geBtn",e.editor.cancelFirst&&s.appendChild(t),(n=mxUtils.button(n,function(){e.hideDialog(),i(o.value)})).className="geBtn gePrimaryBtn",s.appendChild(n),e.editor.cancelFirst||s.appendChild(t),l.appendChild(s),this.container=l}),OutlineWindow=function(t,e,n,i,l){function s(){u.outline.pageScale=a.pageScale,u.outline.pageFormat=a.pageFormat,u.outline.pageVisible=a.pageVisible,u.outline.background=null==a.background||a.background==mxConstants.NONE?a.defaultPageBackgroundColor:a.background;var t=mxUtils.getCurrentStyle(a.container);h.style.backgroundColor=t.backgroundColor,null!=a.view.backgroundPageShape&&null!=u.outline.view.backgroundPageShape&&(u.outline.view.backgroundPageShape.fill=a.view.backgroundPageShape.fill),u.outline.refresh()}var o,r,a=t.editor.graph,h=document.createElement("div"),d=(h.style.position="absolute",h.style.width="100%",h.style.height="100%",h.style.border="1px solid whiteSmoke",h.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),h,e,n,i,l,!0,!0),this.window.minimumSize=new mxRectangle(0,0,80,80),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(t,e){var n=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;t=Math.max(0,Math.min(t,(window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth)-this.table.clientWidth)),e=Math.max(0,Math.min(e,n-this.table.clientHeight-48)),this.getX()==t&&this.getY()==e||mxWindow.prototype.setLocation.apply(this,arguments)},mxUtils.bind(this,function(){var t=this.window.getX(),e=this.window.getY();this.window.setLocation(t,e)})),u=(mxEvent.addListener(window,"resize",d),t.createOutline(this.window)),p=(this.destroy=function(){mxEvent.removeListener(window,"resize",d),this.window.destroy(),u.destroy()},this.window.addListener(mxEvent.RESIZE,mxUtils.bind(this,function(){u.update(!1),u.outline.sizeDidChange()})),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit(),u.suspended=!1,u.outline.refresh(),u.update()})),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,function(){u.suspended=!0})),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,function(){u.suspended=!1,u.update()})),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,function(){u.suspended=!0})),u.createGraph);u.createGraph=function(t){var e=p.apply(this,arguments),n=(e.gridEnabled=!1,e.pageScale=a.pageScale,e.pageFormat=a.pageFormat,e.background=null==a.background||a.background==mxConstants.NONE?a.defaultPageBackgroundColor:a.background,e.pageVisible=a.pageVisible,mxUtils.getCurrentStyle(a.container));return h.style.backgroundColor=n.backgroundColor,e},u.init(h),t.editor.addListener("resetGraphView",s),t.addListener("pageFormatChanged",s),t.addListener("backgroundColorChanged",s),t.addListener("backgroundImageChanged",s),t.addListener("pageViewChanged",function(){s(),u.update(!0)}),u.outline.dialect==mxConstants.DIALECT_SVG&&(o=t.actions.get("zoomIn"),r=t.actions.get("zoomOut"),mxEvent.addMouseWheelListener(function(t,e){var n=!1;for(t=mxEvent.getSource(t);null!=t;){if(t==u.outline.view.canvas.ownerSVGElement){n=!0;break}t=t.parentNode}n&&(e?o:r).funct()}))},LayersWindow=function(a,t,e,n,i){function l(){function e(e,t,n,i){var l=document.createElement("div"),s=(l.className="geToolbarContainer",l.style.overflow="hidden",l.style.position="relative",l.style.padding="4px",l.style.height="22px",l.style.display="block",l.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,l.style.borderWidth="0px 0px 1px 0px",l.style.borderColor="#c3c3c3",l.style.borderStyle="solid",l.style.whiteSpace="nowrap",l.setAttribute("title",t),document.createElement("div")),o=(s.style.display="inline-block",s.style.width="100%",s.style.textOverflow="ellipsis",s.style.overflow="hidden",mxEvent.addListener(l,"dragover",function(t){t.dataTransfer.dropEffect="move",p=e,t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(l,"dragstart",function(t){u=l,mxClient.IS_FF&&t.dataTransfer.setData("Text","<layer/>")}),mxEvent.addListener(l,"dragend",function(t){null!=u&&null!=p&&h.addCell(n,h.model.root,p),p=u=null,t.stopPropagation(),t.preventDefault()}),document.createElement("img")),r=(o.setAttribute("draggable","false"),o.setAttribute("align","top"),o.setAttribute("border","0"),o.style.padding="4px",o.setAttribute("title",mxResources.get("lockUnlock")),h.getCurrentCellStyle(n));"1"==mxUtils.getValue(r,"locked","0")?o.setAttribute("src",Dialog.prototype.lockedImage):o.setAttribute("src",Dialog.prototype.unlockedImage),h.isEnabled()&&(o.style.cursor="pointer"),mxEvent.addListener(o,"click",function(t){if(h.isEnabled()){var e=null;h.getModel().beginUpdate();try{e="1"==mxUtils.getValue(r,"locked","0")?null:"1",h.setCellStyles("locked",e,[n])}finally{h.getModel().endUpdate()}"1"==e&&h.removeSelectionCells(h.getModel().getDescendants(n)),mxEvent.consume(t)}}),s.appendChild(o),(o=document.createElement("input")).setAttribute("type","checkbox"),o.setAttribute("title",mxResources.get(h.model.isVisible(n)?"hide":"show")),o.style.marginLeft="4px",o.style.marginRight="6px",o.style.marginTop="4px",s.appendChild(o),h.model.isVisible(n)&&(o.setAttribute("checked","checked"),o.defaultChecked=!0),mxEvent.addListener(o,"click",function(t){h.model.setVisible(n,!h.model.isVisible(n)),mxEvent.consume(t)}),mxUtils.write(s,t),l.appendChild(s),h.isEnabled()&&((mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_IE&&document.documentMode<10)&&((t=document.createElement("div")).style.display="block",t.style.textAlign="right",t.style.whiteSpace="nowrap",t.style.position="absolute",t.style.right="6px",t.style.top="6px",0<e&&((s=document.createElement("a")).setAttribute("title",mxResources.get("toBack")),s.className="geButton",s.style.cssFloat="none",s.innerHTML="&#9660;",s.style.width="14px",s.style.height="14px",s.style.fontSize="14px",s.style.margin="0px",s.style.marginTop="-1px",t.appendChild(s),mxEvent.addListener(s,"click",function(t){h.isEnabled()&&h.addCell(n,h.model.root,e-1),mxEvent.consume(t)})),0<=e&&e<c-1&&((s=document.createElement("a")).setAttribute("title",mxResources.get("toFront")),s.className="geButton",s.style.cssFloat="none",s.innerHTML="&#9650;",s.style.width="14px",s.style.height="14px",s.style.fontSize="14px",s.style.margin="0px",s.style.marginTop="-1px",t.appendChild(s),mxEvent.addListener(s,"click",function(t){h.isEnabled()&&h.addCell(n,h.model.root,e+1),mxEvent.consume(t)})),l.appendChild(t)),mxClient.IS_SVG)&&(!mxClient.IS_IE||10<=document.documentMode)&&(l.setAttribute("draggable","true"),l.style.cursor="move"),mxEvent.addListener(l,"dblclick",function(t){var e=mxEvent.getSource(t).nodeName;"INPUT"!=e&&"IMG"!=e&&(function(e){var t;h.isEnabled()&&null!=e&&(t=h.convertValueToString(e),t=new FilenameDialog(a,t||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,function(t){null!=t&&h.cellLabelChanged(e,t)}),mxResources.get("enterName")),a.showDialog(t.container,300,100,!0,!0),t.init())}(n),mxEvent.consume(t))}),h.getDefaultParent()==n?(l.style.background="white"==Dialog.backdropColor?"#e6eff8":"#505759",l.style.fontWeight=h.isEnabled()?"bold":"",m=n):mxEvent.addListener(l,"click",function(t){h.isEnabled()&&(h.setDefaultParent(i),h.view.setCurrentRoot(null))}),d.appendChild(l)}c=h.model.getChildCount(h.model.root),d.innerHTML="";for(var n=c-1;0<=n;n--)mxUtils.bind(this,function(t){e(n,h.convertValueToString(t)||mxResources.get("background"),t,t)})(h.model.getChildAt(h.model.root,n));var t=h.convertValueToString(m)||mxResources.get("background");g.setAttribute("title",mxResources.get("removeIt",[t])),f.setAttribute("title",mxResources.get("duplicateIt",[t])),y.setAttribute("title",mxResources.get("editData")),h.isSelectionEmpty()&&(x.className="geButton mxDisabled")}var h=a.editor.graph,s=document.createElement("div"),o=(s.style.userSelect="none",s.style.background="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,s.style.border="1px solid whiteSmoke",s.style.height="100%",s.style.marginBottom="10px",s.style.overflow="auto",EditorUi.compactUi?"26px":"30px"),d=document.createElement("div"),u=(d.style.backgroundColor="white"==Dialog.backdropColor?"#dcdcdc":Dialog.backdropColor,d.style.position="absolute",d.style.overflow="auto",d.style.left="0px",d.style.right="0px",d.style.top="0px",d.style.bottom=parseInt(o)+7+"px",s.appendChild(d),null),p=null,c=(mxEvent.addListener(s,"dragover",function(t){t.dataTransfer.dropEffect="move",p=0,t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(s,"drop",function(t){t.stopPropagation(),t.preventDefault()}),null),m=null,r=document.createElement("div"),g=(r.className="geToolbarContainer",r.style.position="absolute",r.style.bottom="0px",r.style.left="0px",r.style.right="0px",r.style.height=o,r.style.overflow="hidden",r.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",r.style.backgroundColor="white"==Dialog.backdropColor?"whiteSmoke":Dialog.backdropColor,r.style.borderWidth="1px 0px 0px 0px",r.style.borderColor="#c3c3c3",r.style.borderStyle="solid",r.style.display="block",r.style.whiteSpace="nowrap",(o=document.createElement("a")).className="geButton",o.cloneNode()),x=(g.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent.addListener(g,"click",function(t){if(h.isEnabled()){h.model.beginUpdate();try{var e=h.model.root.getIndex(m);h.removeCells([m],!1),0==h.model.getChildCount(h.model.root)?(h.model.add(h.model.root,new mxCell),h.setDefaultParent(null)):0<e&&e<=h.model.getChildCount(h.model.root)?h.setDefaultParent(h.model.getChildAt(h.model.root,e-1)):h.setDefaultParent(null)}finally{h.model.endUpdate()}}mxEvent.consume(t)}),h.isEnabled()||(g.className="geButton mxDisabled"),r.appendChild(g),o.cloneNode()),y=(x.setAttribute("title",mxUtils.trim(mxResources.get("moveSelectionTo",["..."]))),x.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent.addListener(x,"click",function(t){var e;h.isEnabled()&&!h.isSelectionEmpty()&&(e=mxUtils.getOffset(x),a.showPopupMenu(mxUtils.bind(this,function(n,i){for(var t=c-1;0<=t;t--)mxUtils.bind(this,function(t){var e=n.addItem(h.convertValueToString(t)||mxResources.get("background"),null,mxUtils.bind(this,function(){h.moveCells(h.getSelectionCells(),0,0,!1,t)}),i);1==h.getSelectionCount()&&h.model.isAncestor(t,h.getSelectionCell())&&n.addCheckmark(e,Editor.checkmarkImage)})(h.model.getChildAt(h.model.root,t))}),e.x,e.y+x.offsetHeight,t))}),r.appendChild(x),o.cloneNode()),f=(y.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',y.setAttribute("title",mxResources.get("rename")),mxEvent.addListener(y,"click",function(t){h.isEnabled()&&a.showDataDialog(m),mxEvent.consume(t)}),h.isEnabled()||(y.className="geButton mxDisabled"),r.appendChild(y),o.cloneNode()),C=(f.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent.addListener(f,"click",function(t){if(h.isEnabled()){t=null,h.model.beginUpdate();try{t=h.cloneCell(m),h.cellLabelChanged(t,mxResources.get("untitledLayer")),t.setVisible(!0),t=h.addCell(t,h.model.root),h.setDefaultParent(t)}finally{h.model.endUpdate()}null==t||h.isCellLocked(t)||h.selectAll(t)}}),h.isEnabled()||(f.className="geButton mxDisabled"),r.appendChild(f),(o=o.cloneNode()).innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',o.setAttribute("title",mxResources.get("addLayer")),mxEvent.addListener(o,"click",function(t){if(h.isEnabled()){h.model.beginUpdate();try{var e=h.addCell(new mxCell(mxResources.get("untitledLayer")),h.model.root);h.setDefaultParent(e)}finally{h.model.endUpdate()}}mxEvent.consume(t)}),h.isEnabled()||(o.className="geButton mxDisabled"),r.appendChild(o),s.appendChild(r),l(),h.model.addListener(mxEvent.CHANGE,l),h.addListener("defaultParentChanged",l),h.selectionModel.addListener(mxEvent.CHANGE,function(){h.isSelectionEmpty()?x.className="geButton mxDisabled":x.className="geButton"}),this.window=new mxWindow(mxResources.get("layers"),s,t,e,n,i,!0,!0),this.window.minimumSize=new mxRectangle(0,0,120,120),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.init=function(){d.scrollTop=d.scrollHeight-d.clientHeight},this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){this.window.fit()})),this.refreshLayers=l,this.window.setLocation=function(t,e){var n=window.innerHeight||document.body.clientHeight||document.documentElement.clientHeight;t=Math.max(0,Math.min(t,(window.innerWidth||document.body.clientWidth||document.documentElement.clientWidth)-this.table.clientWidth)),e=Math.max(0,Math.min(e,n-this.table.clientHeight-48)),this.getX()==t&&this.getY()==e||mxWindow.prototype.setLocation.apply(this,arguments)},mxUtils.bind(this,function(){var t=this.window.getX(),e=this.window.getY();this.window.setLocation(t,e)}));mxEvent.addListener(window,"resize",C),this.destroy=function(){mxEvent.removeListener(window,"resize",C),this.window.destroy()}};function Dialog(e,n,i,l,t,s,o,r,a,h,d){var u,p=i,c=l,m=mxUtils.getDocumentSize(),g=(null!=window.innerHeight&&(m.height=window.innerHeight),m.height),x=Math.max(1,Math.round((m.width-i-64)/2)),y=Math.max(1,Math.round((g-l-e.footerHeight)/3)),f=(n.style.maxHeight="100%",i=null!=document.body?Math.min(i,document.body.scrollWidth-64):i,l=Math.min(l,g-64),0<e.dialogs.length&&(this.zIndex+=2*e.dialogs.length),null==this.bg&&(this.bg=e.createDiv("background"),this.bg.style.position="absolute",this.bg.style.background=Dialog.backdropColor,this.bg.style.height=g+"px",this.bg.style.right="0px",this.bg.style.zIndex=this.zIndex-2,mxUtils.setOpacity(this.bg,this.bgOpacity)),m=mxUtils.getDocumentScrollOrigin(document),this.bg.style.left=m.x+"px",this.bg.style.top=m.y+"px",x+=m.x,y+=m.y,t&&document.body.appendChild(this.bg),e.createDiv(a?"geTransDialog":"geDialog"));t=this.getPosition(x,y,i,l),x=t.x,y=t.y,f.style.width=i+"px",f.style.height=l+"px",f.style.left=x+"px",f.style.top=y+"px",f.style.zIndex=this.zIndex,f.appendChild(n),document.body.appendChild(f),!r&&n.clientHeight>f.clientHeight-64&&(n.style.overflowY="auto"),s&&((s=document.createElement("img")).setAttribute("src",Dialog.prototype.closeImage),s.setAttribute("title",mxResources.get("close")),s.className="geDialogClose",s.style.top=y+14+"px",s.style.left=+(x+i+38)+"px",s.style.zIndex=this.zIndex,mxEvent.addListener(s,"click",mxUtils.bind(this,function(){e.hideDialog(!0)})),document.body.appendChild(s),this.dialogImg=s,!d)&&(u=!1,mxEvent.addGestureListeners(this.bg,mxUtils.bind(this,function(t){u=!0}),null,mxUtils.bind(this,function(t){u&&(e.hideDialog(!0),u=!1)}))),this.resizeListener=mxUtils.bind(this,function(){var t;null!=h&&null!=(t=h())&&(p=i=t.w,c=l=t.h),t=mxUtils.getDocumentSize(),g=t.height,this.bg.style.height=g+"px",x=Math.max(1,Math.round((t.width-i-64)/2)),y=Math.max(1,Math.round((g-l-e.footerHeight)/3)),i=null!=document.body?Math.min(p,document.body.scrollWidth-64):p,l=Math.min(c,g-64),t=this.getPosition(x,y,i,l),x=t.x,y=t.y,f.style.left=x+"px",f.style.top=y+"px",f.style.width=i+"px",f.style.height=l+"px",!r&&n.clientHeight>f.clientHeight-64&&(n.style.overflowY="auto"),null!=this.dialogImg&&(this.dialogImg.style.top=y+14+"px",this.dialogImg.style.left=+(x+i+38)+"px")}),mxEvent.addListener(window,"resize",this.resizeListener),this.onDialogClose=o,this.container=f,e.editor.fireEvent(new mxEventObject("showDialog"))}window.Editor=function(t,e,n,i,l){mxEventSource.call(this),this.chromeless=null!=t?t:this.chromeless,this.initStencilRegistry(),this.graph=i||this.createGraph(e,n),this.editable=null!=l?l:!t,this.undoManager=this.createUndoManager(),this.status="",this.getOrCreateFilename=function(){return this.filename||mxResources.get("drawing",[Editor.pageCounter])+".xml"},this.getFilename=function(){return this.filename},this.setStatus=function(t){this.status=t,this.fireEvent(new mxEventObject("statusChanged"))},this.getStatus=function(){return this.status},this.graphChangeListener=function(t,e){null!=(t=null!=e?e.getProperty("edit"):null)&&t.ignoreEdit||this.setModified(!0)},this.graph.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.graphChangeListener.apply(this,arguments)})),this.graph.resetViewOnRootChange=!1,this.init()},Editor.pageCounter=0,!function(){try{for(var t=window;null!=t.opener&&void 0!==t.opener.Editor&&!isNaN(t.opener.Editor.pageCounter)&&t.opener!=t;)t=t.opener;null!=t&&(t.Editor.pageCounter++,Editor.pageCounter=t.Editor.pageCounter)}catch(t){}}(),Editor.useLocalStorage="undefined"!=typeof Storage&&mxClient.IS_IOS,Editor.moveImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI4cHgiIGhlaWdodD0iMjhweCI+PGc+PC9nPjxnPjxnPjxnPjxwYXRoIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNCwyLjQpc2NhbGUoMC44KXJvdGF0ZSg0NSwxMiwxMikiIHN0cm9rZT0iIzI5YjZmMiIgZmlsbD0iIzI5YjZmMiIgZD0iTTE1LDNsMi4zLDIuM2wtMi44OSwyLjg3bDEuNDIsMS40MkwxOC43LDYuN0wyMSw5VjNIMTV6IE0zLDlsMi4zLTIuM2wyLjg3LDIuODlsMS40Mi0xLjQyTDYuNyw1LjNMOSwzSDNWOXogTTksMjEgbC0yLjMtMi4zbDIuODktMi44N2wtMS40Mi0xLjQyTDUuMywxNy4zTDMsMTV2Nkg5eiBNMjEsMTVsLTIuMywyLjNsLTIuODctMi44OWwtMS40MiwxLjQybDIuODksMi44N0wxNSwyMWg2VjE1eiIvPjwvZz48L2c+PC9nPjwvc3ZnPgo=":IMAGE_PATH+"/move.png",Editor.rowMoveImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAEBAMAAACw6DhOAAAAGFBMVEUzMzP///9tbW1QUFCKiopBQUF8fHxfX1/IXlmXAAAAFElEQVQImWNgNVdzYBAUFBRggLMAEzYBy29kEPgAAAAASUVORK5CYII=":IMAGE_PATH+"/thumb_horz.png",Editor.lightHelpImage=mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0Ij48cGF0aCBmaWxsPSJub25lIiBkPSJNMCAwaDI0djI0SDB6Ii8+PHBhdGggZD0iTTExIDE4aDJ2LTJoLTJ2MnptMS0xNkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6bTAtMTRjLTIuMjEgMC00IDEuNzktNCA0aDJjMC0xLjEuOS0yIDItMnMyIC45IDIgMmMwIDItMyAxLjc1LTMgNWgyYzAtMi4yNSAzLTIuNSAzLTUgMC0yLjIxLTEuNzktNC00LTR6Ii8+PC9zdmc+":IMAGE_PATH+"/help.png",Editor.lightCheckmarkImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhFQAVAMQfAGxsbHx8fIqKioaGhvb29nJycvr6+sDAwJqamltbW5OTk+np6YGBgeTk5Ly8vJiYmP39/fLy8qWlpa6ursjIyOLi4vj4+N/f3+3t7fT09LCwsHZ2dubm5r6+vmZmZv///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OEY4NTZERTQ5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OEY4NTZERTU5QUFBMTFFMUE5MTVDOTM5MUZGMTE3M0QiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Rjg1NkRFMjlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Rjg1NkRFMzlBQUExMUUxQTkxNUM5MzkxRkYxMTczRCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAB8ALAAAAAAVABUAAAVI4CeOZGmeaKqubKtylktSgCOLRyLd3+QJEJnh4VHcMoOfYQXQLBcBD4PA6ngGlIInEHEhPOANRkaIFhq8SuHCE1Hb8Lh8LgsBADs=":IMAGE_PATH+"/checkmark.gif",Editor.darkHelpImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAP1BMVEUAAAD///////////////////////////////////////////////////////////////////////////////9Du/pqAAAAFXRSTlMAT30qCJRBboyDZyCgRzUUdF46MJlgXETgAAAAeklEQVQY022O2w4DIQhEQUURda/9/28tUO2+7CQS5sgQ4F1RapX78YUwRqQjTU8ILqQfKerTKTvACJ4nLX3krt+8aS82oI8aQC4KavRgtvEW/mDvsICgA03PSGRr79MqX1YPNIxzjyqtw8ZnnRo4t5a5undtJYRywau+ds4Cyza3E6YAAAAASUVORK5CYII=",Editor.darkCheckmarkImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAARVBMVEUAAACZmZkICAgEBASNjY2Dg4MYGBiTk5N5eXl1dXVmZmZQUFBCQkI3NzceHh4MDAykpKSJiYl+fn5sbGxaWlo/Pz8SEhK96uPlAAAAAXRSTlMAQObYZgAAAE5JREFUGNPFzTcSgDAQQ1HJGUfy/Y9K7V1qeOUfzQifCQZai1XHaz11LFysbDbzgDSSWMZiETz3+b8yNUc/MMsktxuC8XQBSncdLwz+8gCCggGXzBcozAAAAABJRU5ErkJggg==",Editor.maximizeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAAAAAAAAAAAAAAAADgKxmiAAAABXRSTlMA758vX1Pw3BoAAABJSURBVAjXY8AJQkODGBhUQ0MhbAUGBiYY24CBgRnGFmZgMISwgwwDGRhEhVVBbAVmEQYGRwMmBjIAQi/CTIRd6G5AuA3dzYQBAHj0EFdHkvV4AAAAAElFTkSuQmCC",Editor.zoomOutImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCxxcXEhISFgYGChjTUxAAAAAXRSTlMAQObYZgAAAEdJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITgLJZXFxgbIQ4Qj3CHIT5ggoIe5kgNkM1KSDYKBKqxPkDAPo5BAZBE54hAAAAAElFTkSuQmCC",Editor.zoomInImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAElBMVEUAAAAAAAAsLCwhISFxcXFgYGBavKaoAAAAAXRSTlMAQObYZgAAAElJREFUCNdjIAMwCQrB2YKCggJQJqMIA4sglK3owMzgqABVwsDMwCgAZTMbG8PYCHGEeoQ5CPMFFRD2MkFshmpSQLBRJFSJ8wcAEqcEM2uhl2MAAAAASUVORK5CYII=",Editor.zoomFitImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVBAMAAABbObilAAAAD1BMVEUAAAAAAAAwMDBwcHBgYGC1xl09AAAAAXRSTlMAQObYZgAAAEFJREFUCNdjIAMwCQrB2YKCggJQJqMwA7MglK1owMBgqABVApITwMdGqEeYgzBfUAFhLxPEZqgmBQQbRUKFOH8AAK5OA3lA+FFOAAAAAElFTkSuQmCC",Editor.layersImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAVCAMAAACeyVWkAAAAaVBMVEUAAAAgICAICAgdHR0PDw8WFhYICAgLCwsXFxcvLy8ODg4uLi4iIiIqKiokJCQYGBgKCgonJycFBQUCAgIqKiocHBwcHBwODg4eHh4cHBwnJycJCQkUFBQqKiojIyMuLi4ZGRkgICAEBATOWYXAAAAAGnRSTlMAD7+fnz8/H7/ff18/77+vr5+fn39/b28fH2xSoKsAAACQSURBVBjTrYxJEsMgDARZZMAY73sgCcn/HxnhKtnk7j6oRq0psfuoyndZ/SuODkHPLzfVT6KeyPePnJ7KrnkRjWMXTn4SMnN8mXe2SSM3ts8L/ZUxxrbAULSYJJULE0Iw9pjpenoICcgcX61mGgTgtCv9Be99pzCoDhNQWQnchD1mup5++CYGcoQexajZbfwAj/0MD8ZOaUgAAAAASUVORK5CYII=",Editor.previousImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAh0lEQVQ4je3UsQnCUBCA4U8hpa1NsoEjpHQJS0dxADdwEMuMIJkgA1hYChbGQgMi+JC8q4L/AB/vDu7x74cWWEZhJU44RmA1zujR5GIbXF9YNrjD/Q0bDRY4fEBZ4P4LlgTnCbAf84pUM8/9hY08tMUtEoQ1LpEgrNBFglChFXR6Q6GfwwR6AGKJMF74Vtt3AAAAAElFTkSuQmCC",Editor.nextImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAAi0lEQVQ4jeXUIQ7CUAwA0MeGxWI2yylwnALJUdBcgYvM7QYLmjOQIAkIPmJZghiIvypoUtX0tfnJL38X5ZfaEgUeUcManFBHgS0SLlhHggk3bCPBhCf2keCQR8wjwYTDp6YiZxJmOU1jGw7vGALescuBxsArNlOwd/CM1VSM/ut1qCIw+uOwiMJ+OF4CQzBCXm3hyAAAAABJRU5ErkJggg==",Editor.editImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCwALAIABAFdXV////yH5BAEAAAEALAAAAAALAAsAAAIZjB8AiKuc4jvLOGqzrjX6zmkWyChXaUJBAQA7":IMAGE_PATH+"/edit.gif",Editor.zoomOutLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABJklEQVQ4y4WT2XaDMAxEvWD2nSSUNEnTJN3r//+9Sj7ILAY6L0ijC4ONYVZRpo6cByrz2YKSUGorGTpz71lPVHvT+avoB5wIkU/mxk8veceSuNoLg44IzziXjvpih72wKQnm8yc2UoiP/LAd8jQfe2Xf4Pq+2EyYIvv9wbzHHCgwxDdlBtWZOdqDfTCVgqpygQpsZaojVAVc9UjQxnAJDIBhiQv84tq3gMQCAVTxVoSibXJf8tMuc7e1TB/DCmejBNg/w1Y3c+AM5vv4w7xM59/oXamrHaLVqPQ+OTCnmMZxgz0SdL5zji0/ld6j88qGa5KIiBB6WeJGKfUKwSMKLuXgvl1TW0tm5R9UQL/efSDYsnzxD8CinhBsTTdugJatKpJwf8v+ADb8QmvW7AeAAAAAAElFTkSuQmCC",Editor.zoomInLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABKElEQVQ4y4WT6WKCMBCENwkBwn2oFKvWqr3L+79es4EkQIDOH2d3Pxk2ABiJlB8JCXjqw4LikHVGLHTm3nM3UeVN5690GBBN0GwyV/3kkrUQR+WeKnREeKpzaXWd77CmJiXGfPIEI4V4yQ9TIW/ntlcMBe731Vts9w5TWG8F5j3mQI4hvrKpdGeYA7CX9qAcl650gVJartxRuhyHVghF8idQAIbFLvCLu28BsQEC6aKtCK6Pyb3JT7PmbmtNH8Ny56CotD/2qOs5cJbuffxgXmCib+xddVU5RNOhkvvkhTlFehzVWCOh3++MYElOhfdovaImnRYVmqDdsuhNp1QrBBE6uGC2+3ZNjGdg5B94oD+9uyVgWT79BwAxEBTWdOu3bWBVgsn/N/AHUD9IC01Oe40AAAAASUVORK5CYII=",Editor.actualSizeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAilBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////2N2iNAAAALXRSTlMA+vTcKMM96GRBHwXxi0YaX1HLrKWhiHpWEOnOr52Vb2xKSDcT19PKv5l/Ngdk8+viAAABIUlEQVQ4y4WT2XqDIBCFBxDc9yTWNEnTJN3r+79eGT4BEbXnaubMr8dBBaM450dCQp4LWFAascGIRd48eB4cNYE7f6XjgGiCFs5c+dml6CFN6j1V6IQIlHPpdV/usKcmJcV88gQTRXjLD9Mhb+fWq8YG9/uCmTCFjeeDeY85UGKIUGUuqzN42kv7oCouq9oHamlzVR1lVfpAIu1QVRiW+sAv7r4FpAYIZZVsRXB9TP5Dfpo1d1trCgzz1iiptH/sUbdz4CzN9+mLeXHn3+hdddd4RDegsrvzwZwSs2GLPRJidAqCLTlVwaMPqpYMWjTWBB2WRW86pVkhSKyDK2bdt2tmagZG4sBD/evdLQHLEvQfAOKRoLCmG1FAB6uKmby+gz+REDn7O5+EwQAAAABJRU5ErkJggg==",Editor.printLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAXVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9RKvvlAAAAHnRSTlMAydnl77qbMLT093H7K4Nd4Ktn082+lYt5bkklEgP44nQSAAAApUlEQVQ4y73P2Q6DIBRF0cOgbRHHzhP//5m9mBAQKjG1cT0Yc7ITAMu1LNQgUZiQ2DYoNQ0sCQb6qgHAfRx48opq3J9AZ6xuF7uOew8Ik1OsCZRS2UAC9V+D9a+QZYxNA45YFQftPtSkATOhw7dAc0vPBwKWiIOjP0JZ0yMuQJ27g36DipOUsqRAM0dR8KD1/ILHaHSE/w8DIx09E3g/BTce6rHUB5sAPKvfF+JdAAAAAElFTkSuQmCC",Editor.layersLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAmVBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+/v7///+bnZkkAAAAMnRSTlMABPr8ByiD88KsTi/rvJb272mjeUA1CuPe1M/KjVxYHxMP6KZ0S9nYzGRGGRaznpGIbzaGUf0AAAHESURBVDjLbZLZYoIwEEVDgLCjbKIgAlqXqt3m/z+uNwu1rcyDhjl3ktnYL7OY254C0VX3yWFZfzDrOClbbgKxi0YDHjwl4jbnRkXxJS/C1YP3DbBhD1n7Ex4uaAqdVDb3yJ/4J/3nJD2to/ngQz/DfUvzMp4JJ5sSCaF5oXmemgQDfDxzbi+Kq4sU+vNcuAmx94JtyOP2DD4Epz2asWSCz4Z/4fECxyNj9zC9xNLHcdPEO+awDKeSaUu0W4twZQiO2hYVisTR3RCtK/c1X6t4xMEpiGqXqVntEBLolkZZsKY4QtwH6jzq67dEHlJysB1aNOD3XT7n1UkasQN59L4yC2RELMDSeCRtz3yV22Ub3ozIUTknYx8JWqDdQxbUes98cR2kZtUSveF/bAhcedwEWmlxIkpZUy4XOCb6VBjjxHvbwo/1lBAHHi2JCr0NI570QhyHq/DhJoE2lLgyA4RVe6KmZ47O/3b86MCP0HWa73A8/C3SUc5Qc1ajt6fgpXJ+RGpMvDSchepZDOOQRcZVIKcK90x2D7etqtI+56+u6n3sPriO6nfphitR4+O2m3EbM7lh3me1FM1o+LMI887rN+s3/wZdTFlpNVJiOAAAAABJRU5ErkJggg==",Editor.closeLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAUVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////8IN+deAAAAGnRSTlMAuvAIg/dDM/QlOeuFhj0S5s4vKgzjxJRQNiLSey0AAADNSURBVDjLfZLbEoMgDEQjRRRs1XqX///QNmOHJSnjPkHOGR7IEmeoGtJZstnwjqbRfIsmgEdtPCqe9Ynz7ZSc07rE2QiSc+qv8TvjRXA2PDUm3dpe82iJhOEUfxJJo3aCv+jKmRmH4lcCjCjeh9GWOdL/GZZkXH3PYYDrHBnfc4D/RVZf5sjoC1was+Y6HQxwaUxFvq/a0Pv343VCTxfBSRiB+ab3M3eiQZXmMNBJ3Y8pGRZtYQ7DgHMXJEdPLTaN/qBjzJOBc3nmNcbsA16bMR0oLqf+AAAAAElFTkSuQmCC",Editor.editLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAgVBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////9d3yJTAAAAKnRSTlMA+hzi3nRQWyXzkm0h2j3u54gzEgSXjlYoTBgJxL2loGpAOS3Jt7Wxm35Ga7gRAAAA6UlEQVQ4y63Q2XaCMBSF4Q0JBasoQ5DJqbXjfv8HbCK2BZNwo/8FXHx7rcMC7lQu0iX8qU/qtvAWCpoqH8dYzS0SwaV5eK/UAf8X9pd2CWKzuF5Jrftp1owXwnIGLUaL3PYndOHf4kNNXWrXK/m7CHunk7K8LE6YtBpcknwG9GKxnroY+ylBXcx4xKyx/u/EuXi509cP9V7OO1oyHnzrdFTcqLG/4ibBA5pIMr/4xvKzuQDkVy9wW8SgBFD6HDvuzMvrZcC9QlkfMzI7w64m+b4PqBMNHB05lH21PVxJo2/fBXxV4hB38PcD+5AkI4FuETsAAAAASUVORK5CYII=",Editor.previousLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFZJREFUOMvdkskRgDAMA4lDwg2B7b9XOlge/KKvdsa25KFb5XlRvxXC/DNBEv8IFNjBgGdDgXtFgTyhwDXiQAUHCvwa4Uv6mR6UR+1led2mVonvl+tML45qCQNQLIx7AAAAAElFTkSuQmCC",Editor.nextLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAPFBMVEUAAAD////////////////////////////////////////////////////////////////////////////YSWgTAAAAE3RSTlMA7fci493c0MW8uJ6CZks4MxQHEZL6ewAAAFRJREFUOMvd0skRgCAQBVEFwQ0V7fxzNQP6wI05v6pZ/kyj1b7FNgik2gQzzLcAwiUAigHOTwDHK4A1CmB5BJANJG1hQ9qafYcqFlZP3IFc9eVGrR+iIgkDQRUXIAAAAABJRU5ErkJggg==",Editor.refreshLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAolBMVEUAAAD///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////8ELnaCAAAANXRSTlMABfyE2QKU+dfNyyDyoVYKwnTv7N+6rntsYlFNQjEqEw316uSzf2c1JB3GvqebiVw6GAjQB4DQr10AAAE7SURBVDjLvZLXcoMwEABPIgRCx3TT3A3udqL//7UgAdGRcR4yk8k+idsdmgS/QyWEqD/axS2JDV33zlnzLHIzQ2MDq9OeJ3m8l76KKENYlxrmM/b65Ys1+8YxnTEZFIEY0vVhszFWfUGZDJpQTDznTgAe5k4XhQxILB7ruzBQn+kkyDXuHfRtjoYDEvH7J9Lz98dBZXXL94X0Ofco2PFlChKbjVzEdakoSlKjoNoqPYkJ/wUZAYwc+PpLj1Ei7+jdoBWlwQZoJv2H1w3CWgRvo7dd9DP5btgwCWz0M02+oVoxCcIWeY9PNmR6B++m9prMxYEISpCBYBlfy9bc745is7UUULAem1Ww7FfalsiA2uaJsgmWP3pQI9q9/yMLkaaHAp2fxhHff/cNq7dBdHXhGW7l+Mo2zU0Cf8knJ2xA0oJ8enwAAAAASUVORK5CYII=",Editor.backLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAclBMVEUAAAD////////////////+/v7////////////////////////////////////////////+/v7///////////////////////////////////////////////////////////////////////////////8vKLfTAAAAJXRSTlMACh7h9gby3NLIwzwZ55uVJgH57b+8tbCljYV1RRMQ46FrTzQw+vtxOQAAAJ5JREFUOMuF00cWgzAQA1DRDQFCbwFSdf8rZpdVrNH2z3tuMv7mldZQ2WN2yi8x+TT8JvyTkqvwpiKvwsOIrA1fWr+XGTklfj8dOQR+D3KyUF6QufBkJN0hfCazEv6sZBRCJDUcPasGKpu1RLtYE8lkHAPBQLoTsK/SfAyRw5FjAuhCzC2MSj0gJ+66lHatgXdKboD9tfREB5m9/+3iC9jHDYvsGNcUAAAAAElFTkSuQmCC",Editor.fullscreenLargeImage="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAllBMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////AJcWoAAAAMXRSTlMA+wIFxPWPCIb446tnUxmsoIykgxTe29jQnpKBe2MNsZhVTR/KyLuWbFhEPjUq7L9z+bQj+gAAAWxJREFUOMttk4l2gkAMRTODCO4FtQgIbnWpS9v8/881iZFh8R51NO8GJ+gAjMN8zuTRFSw04cIOHQcqFHH6oaQFGxf0jeBjEgB8Y52TpW9Ag4zB5QICWOtHrgwGuFZBcw+gPP0MFS7+iiD5inOmDIQS9sZgTwUzwEzyxhxHVEEU7NdDUXsqUPtqjIgR2IZSCT4upzSeIeOdcMHnfDsx3giPoezfU6MrQGB5//SckLEG2xYscK4GfnUFqaix39zrwooaOD/cXoYuvHKQIc7pzd3HVPusp6t2FAW/RmjMonbl8vwHDeZo/GkleJC7e+p5XA/rAq1X/V10wKag04rBpa2/d0LL4OYYceOEtsG5jyMntI1wS+N1BGcQBl/CoLoPOl9ABrW/BP53e1bwSJHHlkIVchJwmHwyyfJ4kIvEnKtwkxNSEct83KSChT7WiWgDZ3ccZ0BM4tloJow2YUAtifNT3njnyD+y/pMsnP4DN3Y4yl1Gyk0AAAAASUVORK5CYII=",Editor.roughFillStyles=[{val:"auto",dispName:"Auto"},{val:"hachure",dispName:"Hachure"},{val:"solid",dispName:"Solid"},{val:"zigzag",dispName:"ZigZag"},{val:"cross-hatch",dispName:"Cross Hatch"},{val:"dots",dispName:"Dots"},{val:"dashed",dispName:"Dashed"},{val:"zigzag-line",dispName:"ZigZag Line"}],Editor.themes=null,Editor.ctrlKey=mxClient.IS_MAC?"Cmd":"Ctrl",Editor.hintOffset=20,Editor.fitWindowBorders=null,Editor.popupsAllowed=!0,Editor.simpleLabels=!1,Editor.enableNativeCipboard=window==window.top&&!mxClient.IS_FF&&null!=navigator.clipboard,Editor.darkMode=!1,Editor.isDarkMode=function(t){return"dark"==Editor.darkMode},Editor.helpImage=Editor.isDarkMode()&&mxClient.IS_SVG?Editor.darkHelpImage:Editor.lightHelpImage,Editor.checkmarkImage=Editor.isDarkMode()&&mxClient.IS_SVG?Editor.darkCheckmarkImage:Editor.lightCheckmarkImage,mxUtils.extend(Editor,mxEventSource),Editor.prototype.originalNoForeignObject=mxClient.NO_FO,Editor.prototype.transparentImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhMAAwAIAAAP///wAAACH5BAEAAAAALAAAAAAwADAAAAIxhI+py+0Po5y02ouz3rz7D4biSJbmiabqyrbuC8fyTNf2jef6zvf+DwwKh8Si8egpAAA7":IMAGE_PATH+"/transparent.gif",Editor.prototype.extendCanvas=!0,Editor.prototype.chromeless=!1,Editor.prototype.cancelFirst=!0,Editor.prototype.enabled=!0,Editor.prototype.filename=null,Editor.prototype.modified=!1,Editor.prototype.autosave=!0,Editor.prototype.initialTopSpacing=0,Editor.prototype.appName=document.title,Editor.prototype.editBlankUrl=window.location.protocol+"//"+window.location.host+"/",Editor.prototype.defaultGraphOverflow="hidden",Editor.prototype.init=function(){},Editor.prototype.isChromelessView=function(){return this.chromeless},Editor.prototype.setAutosave=function(t){this.autosave=t,this.fireEvent(new mxEventObject("autosaveChanged"))},Editor.prototype.getEditBlankUrl=function(t){return this.editBlankUrl+t},Editor.prototype.editAsNew=function(e,t){var n,i;t=null!=t?"?title="+encodeURIComponent(t):"",null!=urlParams.ui&&(t+=(0<t.length?"&":"?")+"ui="+urlParams.ui),void 0!==window.postMessage&&(null==document.documentMode||10<=document.documentMode)?(n=null,i=mxUtils.bind(this,function(t){"ready"==t.data&&t.source==n&&(mxEvent.removeListener(window,"message",i),n.postMessage(e,"*"))}),mxEvent.addListener(window,"message",i),n=this.graph.openLink(this.getEditBlankUrl(t+(0<t.length?"&":"?")+"client=1"),null,!0)):this.graph.openLink(this.getEditBlankUrl(t)+"#R"+encodeURIComponent(e))},Editor.prototype.createGraph=function(t,e){return(t=new Graph(null,e,null,null,t)).transparentBackground=!1,this.chromeless||(t.isBlankLink=function(t){return!this.isExternalProtocol(t)}),t},Editor.prototype.resetGraph=function(){this.graph.gridEnabled=this.graph.defaultGridEnabled&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.graphHandler.guidesEnabled=!0,this.graph.setTooltips(!0),this.graph.setConnectable(!0),this.graph.foldingEnabled=!0,this.graph.scrollbars=this.graph.defaultScrollbars,this.graph.pageVisible=this.graph.defaultPageVisible,this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,this.graph.background=null,this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.pageFormat=mxGraph.prototype.pageFormat,this.graph.currentScale=1,this.graph.currentTranslate.x=0,this.graph.currentTranslate.y=0,this.updateGraphComponents(),this.graph.view.setScale(1)},Editor.prototype.readGraphState=function(t){var e=t.getAttribute("grid"),n=(null!=e&&""!=e||(e=this.graph.defaultGridEnabled?"1":"0"),this.graph.gridEnabled="0"!=e&&(!this.isChromelessView()||"1"==urlParams.grid),this.graph.gridSize=parseFloat(t.getAttribute("gridSize"))||mxGraph.prototype.gridSize,this.graph.graphHandler.guidesEnabled="0"!=t.getAttribute("guides"),this.graph.setTooltips("0"!=t.getAttribute("tooltips")),this.graph.setConnectable("0"!=t.getAttribute("connect")),this.graph.connectionArrowsEnabled="0"!=t.getAttribute("arrows"),this.graph.foldingEnabled="0"!=t.getAttribute("fold"),this.isChromelessView()&&this.graph.foldingEnabled&&(this.graph.foldingEnabled="1"==urlParams.nav,this.graph.cellRenderer.forceControlClickHandler=this.graph.foldingEnabled),e=parseFloat(t.getAttribute("pageScale")),!isNaN(e)&&0<e?this.graph.pageScale=e:this.graph.pageScale=mxGraph.prototype.pageScale,this.graph.isLightboxView()||this.graph.isViewer()?this.graph.pageVisible=!1:(e=t.getAttribute("page"),this.graph.pageVisible=null!=e?"0"!=e:this.graph.defaultPageVisible),this.graph.pageBreaksVisible=this.graph.pageVisible,this.graph.preferPageSize=this.graph.pageBreaksVisible,e=parseFloat(t.getAttribute("pageWidth")),parseFloat(t.getAttribute("pageHeight")));isNaN(e)||isNaN(n)||(this.graph.pageFormat=new mxRectangle(0,0,e,n)),t=t.getAttribute("background"),this.graph.background=null!=t&&0<t.length?t:null},Editor.prototype.setGraphXml=function(t){if(null!=t){var e=new mxCodec(t.ownerDocument);if("mxGraphModel"==t.nodeName){this.graph.model.beginUpdate();try{this.graph.model.clear(),this.graph.view.scale=1,this.readGraphState(t),this.updateGraphComponents(),e.decode(t,this.graph.getModel())}finally{this.graph.model.endUpdate()}}else{if("root"!=t.nodeName)throw{message:mxResources.get("cannotOpenFile"),node:t,toString:function(){return this.message}};this.resetGraph();var n=e.document.createElement("mxGraphModel");n.appendChild(t),e.decode(n,this.graph.getModel()),this.updateGraphComponents()}}else this.resetGraph(),this.graph.model.clear();this.fireEvent(new mxEventObject("resetGraphView"))},Editor.prototype.getGraphXml=function(t){return t=null==t||t?new mxCodec(mxUtils.createXmlDocument()).encode(this.graph.getModel()):this.graph.encodeCells(mxUtils.sortCells(this.graph.model.getTopmostCells(this.graph.getSelectionCells()))),0==this.graph.view.translate.x&&0==this.graph.view.translate.y||(t.setAttribute("dx",Math.round(100*this.graph.view.translate.x)/100),t.setAttribute("dy",Math.round(100*this.graph.view.translate.y)/100)),t.setAttribute("grid",this.graph.isGridEnabled()?"1":"0"),t.setAttribute("gridSize",this.graph.gridSize),t.setAttribute("guides",this.graph.graphHandler.guidesEnabled?"1":"0"),t.setAttribute("tooltips",this.graph.tooltipHandler.isEnabled()?"1":"0"),t.setAttribute("connect",this.graph.connectionHandler.isEnabled()?"1":"0"),t.setAttribute("arrows",this.graph.connectionArrowsEnabled?"1":"0"),t.setAttribute("fold",this.graph.foldingEnabled?"1":"0"),t.setAttribute("page",this.graph.pageVisible?"1":"0"),t.setAttribute("pageScale",this.graph.pageScale),t.setAttribute("pageWidth",this.graph.pageFormat.width),t.setAttribute("pageHeight",this.graph.pageFormat.height),null!=this.graph.background&&t.setAttribute("background",this.graph.background),t},Editor.prototype.updateGraphComponents=function(){var t=this.graph;null!=t.container&&(t.view.validateBackground(),t.container.style.overflow=t.scrollbars?"auto":this.defaultGraphOverflow,this.fireEvent(new mxEventObject("updateGraphComponents")))},Editor.prototype.setModified=function(t){this.modified=t},Editor.prototype.setFilename=function(t){this.filename=t},Editor.prototype.createUndoManager=function(){var i=this.graph,n=new mxUndoManager,t=(this.undoListener=function(t,e){n.undoableEditHappened(e.getProperty("edit"))},mxUtils.bind(this,function(t,e){this.undoListener.apply(this,arguments)}));return i.getModel().addListener(mxEvent.UNDO,t),i.getView().addListener(mxEvent.UNDO,t),n.addListener(mxEvent.UNDO,t=function(t,e){if(0<(t=i.getSelectionCellsForChanges(e.getProperty("edit").changes,function(t){return!(t instanceof mxChildChange)})).length){i.getModel(),e=[];for(var n=0;n<t.length;n++)null!=i.view.getState(t[n])&&e.push(t[n]);i.setSelectionCells(e)}}),n.addListener(mxEvent.REDO,t),n},Editor.prototype.initStencilRegistry=function(){},Editor.prototype.destroy=function(){null!=this.graph&&(this.graph.destroy(),this.graph=null)},window.OpenFile=function(t){this.consumer=this.producer=null,this.done=t,this.args=null},OpenFile.prototype.setConsumer=function(t){this.consumer=t,this.execute()},OpenFile.prototype.setData=function(){this.args=arguments,this.execute()},OpenFile.prototype.error=function(t){this.cancel(!0),mxUtils.alert(t)},OpenFile.prototype.execute=function(){null!=this.consumer&&null!=this.args&&(this.cancel(!1),this.consumer.apply(this,this.args))},OpenFile.prototype.cancel=function(t){null!=this.done&&this.done(null==t||t)},Dialog.backdropColor="white",Dialog.prototype.zIndex=mxPopupMenu.prototype.zIndex-1,Dialog.prototype.noColorImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzRDlBMUUwODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzRDlBMUUxODYxMTExRTFCMzA4RDdDMjJBMEMxRDM3Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTNEOUExREU4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTNEOUExREY4NjExMTFFMUIzMDhEN0MyMkEwQzFEMzciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5xh3fmAAAABlBMVEX////MzMw46qqDAAAAGElEQVR42mJggAJGKGAYIIGBth8KAAIMAEUQAIElnLuQAAAAAElFTkSuQmCC":IMAGE_PATH+"/nocolor.png",Dialog.prototype.closeImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAJAQMAAADaX5RTAAAABlBMVEV7mr3///+wksspAAAAAnRSTlP/AOW3MEoAAAAdSURBVAgdY9jXwCDDwNDRwHCwgeExmASygSL7GgB12QiqNHZZIwAAAABJRU5ErkJggg==":IMAGE_PATH+"/close.png",Dialog.prototype.clearImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQAKAIABAMDAwP///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUIzOEM1NzI4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUIzOEM1NzM4NjEyMTFFMUEzMkNDMUE3NjZERDE2QjIiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QjM4QzU3MDg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QjM4QzU3MTg2MTIxMUUxQTMyQ0MxQTc2NkREMTZCMiIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PgH//v38+/r5+Pf29fTz8vHw7+7t7Ovq6ejn5uXk4+Lh4N/e3dzb2tnY19bV1NPS0dDPzs3My8rJyMfGxcTDwsHAv769vLu6ubi3trW0s7KxsK+urayrqqmop6alpKOioaCfnp2cm5qZmJeWlZSTkpGQj46NjIuKiYiHhoWEg4KBgH9+fXx7enl4d3Z1dHNycXBvbm1sa2ppaGdmZWRjYmFgX15dXFtaWVhXVlVUU1JRUE9OTUxLSklIR0ZFRENCQUA/Pj08Ozo5ODc2NTQzMjEwLy4tLCsqKSgnJiUkIyIhIB8eHRwbGhkYFxYVFBMSERAPDg0MCwoJCAcGBQQDAgEAACH5BAEAAAEALAAAAAANAAoAAAIXTGCJebD9jEOTqRlttXdrB32PJ2ncyRQAOw==":IMAGE_PATH+"/clear.gif",Dialog.prototype.lockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCODExNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCODIxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3RjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI4MDE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PvqMCFYAAAAVUExURZmZmb+/v7KysqysrMzMzLGxsf///4g8N1cAAAAHdFJOU////////wAaSwNGAAAAPElEQVR42lTMQQ4AIQgEwUa0//9kTQirOweYOgDqAMbZUr10AGlAwx4/BJ2QJ4U0L5brYjovvpv32xZgAHZaATFtMbu4AAAAAElFTkSuQmCC":IMAGE_PATH+"/locked.png",Dialog.prototype.unlockedImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzdDMDZCN0QxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzdDMDZCN0UxNzIxMTFFNUI0RTk5NTg4OTcyMUUyODEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozN0MwNkI3QjE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozN0MwNkI3QzE3MjExMUU1QjRFOTk1ODg5NzIxRTI4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkKMpVwAAAAYUExURZmZmbKysr+/v6ysrOXl5czMzLGxsf///zHN5lwAAAAIdFJOU/////////8A3oO9WQAAADxJREFUeNpUzFESACAEBNBVsfe/cZJU+8Mzs8CIABCidtfGOndnYsT40HDSiCcbPdoJo10o9aI677cpwACRoAF3dFNlswAAAABJRU5ErkJggg==":IMAGE_PATH+"/unlocked.png",Dialog.prototype.bgOpacity=80,Dialog.prototype.getPosition=function(t,e){return new mxPoint(t,e)},Dialog.prototype.close=function(t,e){if(null!=this.onDialogClose){if(0==this.onDialogClose(t,e))return!1;this.onDialogClose=null}null!=this.dialogImg&&(this.dialogImg.parentNode.removeChild(this.dialogImg),this.dialogImg=null),null!=this.bg&&null!=this.bg.parentNode&&this.bg.parentNode.removeChild(this.bg),mxEvent.removeListener(window,"resize",this.resizeListener),this.container.parentNode.removeChild(this.container)};var ErrorDialog=function(t,e,n,i,l,s,o,r,a,h,d){a=null==a||a;var u,p=document.createElement("div"),c=(p.style.textAlign="center",null!=e&&((u=document.createElement("div")).style.padding="0px",u.style.margin="0px",u.style.fontSize="18px",u.style.paddingBottom="16px",u.style.marginBottom="10px",u.style.borderBottom="1px solid #c0c0c0",u.style.color="gray",u.style.whiteSpace="nowrap",u.style.textOverflow="ellipsis",u.style.overflow="hidden",mxUtils.write(u,e),u.setAttribute("title",e),p.appendChild(u)),(e=document.createElement("div")).style.lineHeight="1.2em",e.style.padding="6px",e.innerHTML=n,p.appendChild(e),(n=document.createElement("div")).style.marginTop="12px",n.style.textAlign="center",null!=s&&((e=mxUtils.button(mxResources.get("tryAgain"),function(){t.hideDialog(),s()})).className="geBtn",n.appendChild(e),n.style.textAlign="center"),null!=h&&((h=mxUtils.button(h,function(){null!=d&&d()})).className="geBtn",n.appendChild(h)),mxUtils.button(i,function(){a&&t.hideDialog(),null!=l&&l()}));c.className="geBtn",n.appendChild(c),null!=o&&((i=mxUtils.button(o,function(){a&&t.hideDialog(),null!=r&&r()})).className="geBtn gePrimaryBtn",n.appendChild(i)),this.init=function(){c.focus()},p.appendChild(n),this.container=p},PrintDialog=function(t,e){this.create(t,e)},PageSetupDialog=(PrintDialog.prototype.create=function(t){function e(t){var e,n=a.checked||d.checked,i=parseInt(p.value)/100,l=(isNaN(i)&&(i=1,p.value="100%"),i*=.75,r.pageFormat||mxConstants.PAGE_FORMAT_A4_PORTRAIT),s=1/r.pageScale,o=(n&&(e=a.checked?1:parseInt(u.value),isNaN(e)||(s=mxUtils.getScaleForPageCount(e,r,l))),r.getGraphBounds(),e=0);(l=mxRectangle.fromRectangle(l)).width=Math.ceil(l.width*i),l.height=Math.ceil(l.height*i),s*=i,!n&&r.pageVisible?(e-=(i=r.getPageLayout()).x*l.width,o-=i.y*l.height):n=!0,(n=PrintDialog.createPrintPreview(r,s,l,0,e,o,n)).open(),t&&PrintDialog.printPreview(n)}var n,r=t.editor.graph,i=document.createElement("table"),l=(i.style.width="100%",i.style.height="100%",document.createElement("tbody")),s=document.createElement("tr"),a=document.createElement("input"),o=(a.setAttribute("type","checkbox"),document.createElement("td")),h=(o.setAttribute("colspan","2"),o.style.fontSize="10pt",o.appendChild(a),document.createElement("span")),d=(mxUtils.write(h," "+mxResources.get("fitPage")),o.appendChild(h),mxEvent.addListener(h,"click",function(t){a.checked=!a.checked,d.checked=!a.checked,mxEvent.consume(t)}),mxEvent.addListener(a,"change",function(){d.checked=!a.checked}),s.appendChild(o),l.appendChild(s),s=s.cloneNode(!1),document.createElement("input")),u=(d.setAttribute("type","checkbox"),(o=document.createElement("td")).style.fontSize="10pt",o.appendChild(d),h=document.createElement("span"),mxUtils.write(h," "+mxResources.get("posterPrint")+":"),o.appendChild(h),mxEvent.addListener(h,"click",function(t){d.checked=!d.checked,a.checked=!d.checked,mxEvent.consume(t)}),s.appendChild(o),document.createElement("input")),p=(u.setAttribute("value","1"),u.setAttribute("type","number"),u.setAttribute("min","1"),u.setAttribute("size","4"),u.setAttribute("disabled","disabled"),u.style.width="50px",(o=document.createElement("td")).style.fontSize="10pt",o.appendChild(u),mxUtils.write(o," "+mxResources.get("pages")+" (max)"),s.appendChild(o),l.appendChild(s),mxEvent.addListener(d,"change",function(){d.checked?u.removeAttribute("disabled"):u.setAttribute("disabled","disabled"),a.checked=!d.checked}),s=s.cloneNode(!1),o=document.createElement("td"),mxUtils.write(o,mxResources.get("pageScale")+":"),s.appendChild(o),o=document.createElement("td"),document.createElement("input"));p.setAttribute("value","100 %"),p.setAttribute("size","5"),p.style.width="50px",o.appendChild(p),s.appendChild(o),l.appendChild(s),s=document.createElement("tr"),(o=document.createElement("td")).colSpan=2,o.style.paddingTop="20px",o.setAttribute("align","right"),(h=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog()})).className="geBtn",t.editor.cancelFirst&&o.appendChild(h),PrintDialog.previewEnabled&&((n=mxUtils.button(mxResources.get("preview"),function(){t.hideDialog(),e(!1)})).className="geBtn",o.appendChild(n)),(n=mxUtils.button(mxResources.get(PrintDialog.previewEnabled?"print":"ok"),function(){t.hideDialog(),e(!0)})).className="geBtn gePrimaryBtn",o.appendChild(n),t.editor.cancelFirst||o.appendChild(h),s.appendChild(o),l.appendChild(s),i.appendChild(l),this.container=i},PrintDialog.printPreview=function(t){try{var e;null!=t.wnd&&(e=function(){t.wnd.focus(),t.wnd.print(),t.wnd.close()},mxClient.IS_GC?window.setTimeout(e,500):e())}catch(t){}},PrintDialog.createPrintPreview=function(t,e,n,i,l,s,o){(e=new mxPrintPreview(t,e,n,i,l,s)).title=mxResources.get("preview"),e.printBackgroundImage=!0,e.autoOrigin=o,null!=(t=t.background)&&""!=t&&t!=mxConstants.NONE||(t="#ffffff"),e.backgroundColor=t;var r=e.writeHead;return e.writeHead=function(t){r.apply(this,arguments),t.writeln('<style type="text/css">'),t.writeln("@media screen {"),t.writeln("  body > div { padding:30px;box-sizing:content-box; }"),t.writeln("}"),t.writeln("</style>")},e},PrintDialog.previewEnabled=!0,function(e){function n(){null==d||d==mxConstants.NONE?(h.style.backgroundColor="",h.style.backgroundImage="url('"+Dialog.prototype.noColorImage+"')"):(h.style.backgroundColor=d,h.style.backgroundImage="")}function i(){null==c?(p.removeAttribute("title"),p.style.fontSize="",p.innerHTML=mxUtils.htmlEntities(mxResources.get("change"))+"..."):(p.setAttribute("title",c.src),p.style.fontSize="11px",p.innerHTML=mxUtils.htmlEntities(c.src.substring(0,42))+"...")}var l=e.editor.graph,t=document.createElement("table"),s=(t.style.width="100%",t.style.height="100%",document.createElement("tbody")),o=document.createElement("tr"),r=document.createElement("td"),a=(r.style.verticalAlign="top",r.style.fontSize="10pt",mxUtils.write(r,mxResources.get("paperSize")+":"),o.appendChild(r),(r=document.createElement("td")).style.verticalAlign="top",r.style.fontSize="10pt",PageSetupDialog.addPageFormatPanel(r,"pagesetupdialog",l.pageFormat)),h=(o.appendChild(r),s.appendChild(o),o=document.createElement("tr"),r=document.createElement("td"),mxUtils.write(r,mxResources.get("background")+":"),o.appendChild(r),(r=document.createElement("td")).style.whiteSpace="nowrap",document.createElement("input").setAttribute("type","text"),document.createElement("button")),d=(h.style.width="18px",h.style.height="18px",h.style.marginRight="20px",h.style.backgroundPosition="center center",h.style.backgroundRepeat="no-repeat",l.background),u=(n(),mxEvent.addListener(h,"click",function(t){e.pickColor(d||"none",function(t){d=t,n()}),mxEvent.consume(t)}),r.appendChild(h),mxUtils.write(r,mxResources.get("gridSize")+":"),document.createElement("input")),p=(u.setAttribute("type","number"),u.setAttribute("min","0"),u.style.width="40px",u.style.marginLeft="6px",u.value=l.getGridSize(),r.appendChild(u),mxEvent.addListener(u,"change",function(){var t=parseInt(u.value);u.value=Math.max(1,isNaN(t)?l.getGridSize():t)}),o.appendChild(r),s.appendChild(o),o=document.createElement("tr"),r=document.createElement("td"),mxUtils.write(r,mxResources.get("image")+":"),o.appendChild(r),r=document.createElement("td"),document.createElement("a")),c=(p.style.textDecoration="underline",p.style.cursor="pointer",p.style.color="#a0a0a0",l.backgroundImage),m=(mxEvent.addListener(p,"click",function(t){e.showBackgroundImageDialog(function(t,e){e||(c=t,i())},c),mxEvent.consume(t)}),i(),r.appendChild(p),o.appendChild(r),s.appendChild(o),o=document.createElement("tr"),(r=document.createElement("td")).colSpan=2,r.style.paddingTop="16px",r.setAttribute("align","right"),mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()})),g=(m.className="geBtn",e.editor.cancelFirst&&r.appendChild(m),mxUtils.button(mxResources.get("apply"),function(){e.hideDialog();var t=parseInt(u.value);isNaN(t)||l.gridSize===t||l.setGridSize(t),(t=new ChangePageSetup(e,d,c,a.get())).ignoreColor=l.background==d,t.ignoreImage=(null!=l.backgroundImage?l.backgroundImage.src:null)===(null!=c?c.src:null),l.pageFormat.width==t.previousFormat.width&&l.pageFormat.height==t.previousFormat.height&&t.ignoreColor&&t.ignoreImage||l.model.execute(t)}));g.className="geBtn gePrimaryBtn",r.appendChild(g),e.editor.cancelFirst||r.appendChild(m),o.appendChild(r),s.appendChild(o),t.appendChild(s),this.container=t}),FilenameDialog=(PageSetupDialog.addPageFormatPanel=function(t,e,i,n){function l(t,e,n){if(n||u!=document.activeElement&&p!=document.activeElement){for(t=!1,e=0;e<m.length;e++)n=m[e],C?"custom"==n.key&&(r.value=n.key,C=!1):null!=n.format&&("a4"==n.key?826==i.width?(i=mxRectangle.fromRectangle(i)).width=827:826==i.height&&((i=mxRectangle.fromRectangle(i)).height=827):"a5"==n.key&&(584==i.width?(i=mxRectangle.fromRectangle(i)).width=583:584==i.height&&((i=mxRectangle.fromRectangle(i)).height=583)),i.width==n.format.width&&i.height==n.format.height?(r.value=n.key,s.setAttribute("checked","checked"),s.defaultChecked=!0,s.checked=!0,o.removeAttribute("checked"),o.defaultChecked=!1,t=!(o.checked=!1)):i.width==n.format.height&&i.height==n.format.width&&(r.value=n.key,s.removeAttribute("checked"),s.defaultChecked=!1,s.checked=!1,o.setAttribute("checked","checked"),o.defaultChecked=!0,t=o.checked=!0));t?(a.style.display="",d.style.display="none"):(u.value=i.width/100,p.value=i.height/100,s.setAttribute("checked","checked"),r.value="custom",a.style.display="none",d.style.display="")}}e="format-"+e;var s=document.createElement("input"),o=(s.setAttribute("name",e),s.setAttribute("type","radio"),s.setAttribute("value","portrait"),document.createElement("input")),r=(o.setAttribute("name",e),o.setAttribute("type","radio"),o.setAttribute("value","landscape"),document.createElement("select")),a=(r.style.marginBottom="8px",r.style.width="202px",document.createElement("div")),h=(a.style.marginLeft="4px",a.style.width="210px",a.style.height="24px",s.style.marginRight="6px",a.appendChild(s),(e=document.createElement("span")).style.maxWidth="100px",mxUtils.write(e,mxResources.get("portrait")),a.appendChild(e),o.style.marginLeft="10px",o.style.marginRight="6px",a.appendChild(o),document.createElement("span")),d=(h.style.width="100px",mxUtils.write(h,mxResources.get("landscape")),a.appendChild(h),document.createElement("div")),u=(d.style.marginLeft="4px",d.style.width="210px",d.style.height="24px",document.createElement("input")),p=(u.setAttribute("size","7"),u.style.textAlign="right",d.appendChild(u),mxUtils.write(d," in x "),document.createElement("input"));p.setAttribute("size","7"),p.style.textAlign="right",d.appendChild(p),mxUtils.write(d," in"),a.style.display="none",d.style.display="none";for(var c={},m=PageSetupDialog.getFormats(),g=0;g<m.length;g++){var x=m[g],y=(c[x.key]=x,document.createElement("option"));y.setAttribute("value",x.key),mxUtils.write(y,x.title),r.appendChild(y)}function f(t,e){null!=(t=c[r.value]).format?(u.value=t.format.width/100,p.value=t.format.height/100,d.style.display="none",a.style.display=""):(a.style.display="none",d.style.display=""),t=parseFloat(u.value),(isNaN(t)||t<=0)&&(u.value=i.width/100),t=parseFloat(p.value),(isNaN(t)||t<=0)&&(p.value=i.height/100),t=new mxRectangle(0,0,Math.floor(100*parseFloat(u.value)),Math.floor(100*parseFloat(p.value))),"custom"!=r.value&&o.checked&&(t=new mxRectangle(0,0,t.height,t.width)),e&&C||t.width==E.width&&t.height==E.height||(E=t,null!=n&&n(E))}var C=!1,E=(l(),t.appendChild(r),mxUtils.br(t),t.appendChild(a),t.appendChild(d),i);return mxEvent.addListener(e,"click",function(t){s.checked=!0,f(t),mxEvent.consume(t)}),mxEvent.addListener(h,"click",function(t){o.checked=!0,f(t),mxEvent.consume(t)}),mxEvent.addListener(u,"blur",f),mxEvent.addListener(u,"click",f),mxEvent.addListener(p,"blur",f),mxEvent.addListener(p,"click",f),mxEvent.addListener(o,"change",f),mxEvent.addListener(s,"change",f),mxEvent.addListener(r,"change",function(t){C="custom"==r.value,f(t,!0)}),f(),{set:function(t){i=t,l(null,null,!0)},get:function(){return E},widthInput:u,heightInput:p}},PageSetupDialog.getFormats=function(){return[{key:"letter",title:'US-Letter (8,5" x 11")',format:mxConstants.PAGE_FORMAT_LETTER_PORTRAIT},{key:"legal",title:'US-Legal (8,5" x 14")',format:new mxRectangle(0,0,850,1400)},{key:"tabloid",title:'US-Tabloid (11" x 17")',format:new mxRectangle(0,0,1100,1700)},{key:"executive",title:'US-Executive (7" x 10")',format:new mxRectangle(0,0,700,1e3)},{key:"a0",title:"A0 (841 mm x 1189 mm)",format:new mxRectangle(0,0,3300,4681)},{key:"a1",title:"A1 (594 mm x 841 mm)",format:new mxRectangle(0,0,2339,3300)},{key:"a2",title:"A2 (420 mm x 594 mm)",format:new mxRectangle(0,0,1654,2336)},{key:"a3",title:"A3 (297 mm x 420 mm)",format:new mxRectangle(0,0,1169,1654)},{key:"a4",title:"A4 (210 mm x 297 mm)",format:mxConstants.PAGE_FORMAT_A4_PORTRAIT},{key:"a5",title:"A5 (148 mm x 210 mm)",format:new mxRectangle(0,0,583,827)},{key:"a6",title:"A6 (105 mm x 148 mm)",format:new mxRectangle(0,0,413,583)},{key:"a7",title:"A7 (74 mm x 105 mm)",format:new mxRectangle(0,0,291,413)},{key:"b4",title:"B4 (250 mm x 353 mm)",format:new mxRectangle(0,0,980,1390)},{key:"b5",title:"B5 (176 mm x 250 mm)",format:new mxRectangle(0,0,690,980)},{key:"16-9",title:"16:9 (1600 x 900)",format:new mxRectangle(0,0,900,1600)},{key:"16-10",title:"16:10 (1920 x 1200)",format:new mxRectangle(0,0,1200,1920)},{key:"4-3",title:"4:3 (1600 x 1200)",format:new mxRectangle(0,0,1200,1600)},{key:"custom",title:mxResources.get("custom"),format:null}]},function(t,e,n,i,l,s,o,r,a,h,d,u){a=null==a||a;var p=document.createElement("table"),c=document.createElement("tbody"),m=(p.style.marginTop="8px",document.createElement("tr")),g=document.createElement("td"),x=(g.style.whiteSpace="nowrap",g.style.fontSize="10pt",g.style.width=d?"80px":"120px",mxUtils.write(g,(l||mxResources.get("filename"))+":"),m.appendChild(g),document.createElement("input")),y=(x.setAttribute("value",e||""),x.style.marginLeft="4px",x.style.width=null!=u?u+"px":"180px",mxUtils.button(n,function(){null!=s&&!s(x.value)||(a&&t.hideDialog(),i(x.value))}));y.className="geBtn gePrimaryBtn",this.init=function(){var t,e;null==l&&null!=o||(x.focus(),mxClient.IS_GC||mxClient.IS_FF||5<=document.documentMode?x.select():document.execCommand("selectAll",!1,null),Graph.fileSupport&&null!=(t=p.parentNode)&&(e=null,mxEvent.addListener(t,"dragleave",function(t){null!=e&&(e.style.backgroundColor="",e=null),t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(t,"dragover",mxUtils.bind(this,function(t){null==e&&(!mxClient.IS_IE||10<document.documentMode)&&((e=x).style.backgroundColor="#ebf2f9"),t.stopPropagation(),t.preventDefault()})),mxEvent.addListener(t,"drop",mxUtils.bind(this,function(t){null!=e&&(e.style.backgroundColor="",e=null),0<=mxUtils.indexOf(t.dataTransfer.types,"text/uri-list")&&(x.value=decodeURIComponent(t.dataTransfer.getData("text/uri-list")),y.click()),t.stopPropagation(),t.preventDefault()}))))},(g=document.createElement("td")).style.whiteSpace="nowrap",g.appendChild(x),m.appendChild(g),null==l&&null!=o||(c.appendChild(m),null!=d&&(null!=t.editor.diagramFileTypes&&((m=FilenameDialog.createFileTypes(t,x,t.editor.diagramFileTypes)).style.marginLeft="6px",m.style.width="74px",g.appendChild(m),x.style.width=null!=u?u-40+"px":"140px"),g.appendChild(FilenameDialog.createTypeHint(t,x,d)))),null!=o&&(m=document.createElement("tr"),(g=document.createElement("td")).colSpan=2,g.appendChild(o),m.appendChild(g),c.appendChild(m)),m=document.createElement("tr"),(g=document.createElement("td")).colSpan=2,g.style.paddingTop="20px",g.style.whiteSpace="nowrap",g.setAttribute("align","right"),(d=mxUtils.button(mxResources.get("cancel"),function(){t.hideDialog(),null!=h&&h()})).className="geBtn",t.editor.cancelFirst&&g.appendChild(d),null!=r&&((u=mxUtils.button(mxResources.get("help"),function(){t.editor.graph.openLink(r)})).className="geBtn",g.appendChild(u)),mxEvent.addListener(x,"keypress",function(t){13==t.keyCode&&y.click()}),g.appendChild(y),t.editor.cancelFirst||g.appendChild(d),m.appendChild(g),c.appendChild(m),p.appendChild(c),this.container=p});function ChangeGridColor(t,e){this.ui=t,this.color=e}function ChangePageSetup(t,e,n,i,l){this.ui=t,this.previousColor=this.color=e,this.previousImage=this.image=n,this.previousFormat=this.format=i,this.previousPageScale=this.pageScale=l,this.ignoreImage=this.ignoreColor=!1}function TableLayout(t){mxGraphLayout.call(this,t)}function Menubar(t,e){this.editorUi=t,this.container=e}function Menu(t,e){mxEventSource.call(this),this.funct=t,this.enabled=null==e||e}FilenameDialog.filenameHelpLink=null,FilenameDialog.createTypeHint=function(n,e,i){function t(){l.setAttribute("src",Editor.helpImage),l.setAttribute("title",mxResources.get("help"));for(var t=0;t<i.length;t++)if(0<i[t].ext.length&&e.value.toLowerCase().substring(e.value.length-i[t].ext.length-1)=="."+i[t].ext){l.setAttribute("src",mxClient.imageBasePath+"/warning.png"),l.setAttribute("title",mxResources.get(i[t].title));break}}var l=document.createElement("img");l.style.cssText="vertical-align:top;height:16px;width:16px;margin-left:4px;background-repeat:no-repeat;background-position:center bottom;cursor:pointer;",mxUtils.setOpacity(l,70);return mxEvent.addListener(e,"keyup",t),mxEvent.addListener(e,"change",t),mxEvent.addListener(l,"click",function(t){var e=l.getAttribute("title");l.getAttribute("src")==Editor.helpImage?n.editor.graph.openLink(FilenameDialog.filenameHelpLink):""!=e&&n.showError(null,e,mxResources.get("help"),function(){n.editor.graph.openLink(FilenameDialog.filenameHelpLink)},null,mxResources.get("ok"),null,null,null,340,90),mxEvent.consume(t)}),t(),l},FilenameDialog.createFileTypes=function(t,i,l){var s=document.createElement("select");for(t=0;t<l.length;t++){var e=document.createElement("option");e.setAttribute("value",t),mxUtils.write(e,mxResources.get(l[t].description)+" (."+l[t].extension+")"),s.appendChild(e)}return mxEvent.addListener(s,"change",function(t){t=l[s.value].extension;var e=i.value.lastIndexOf(".");0<e?(t=l[s.value].extension,i.value=i.value.substring(0,e+1)+t):i.value=i.value+"."+t,"createEvent"in document?((t=document.createEvent("HTMLEvents")).initEvent("change",!1,!0),i.dispatchEvent(t)):i.fireEvent("onchange")}),mxEvent.addListener(i,"change",t=function(t){if((t=0)<(e=i.value.lastIndexOf(".")))for(var e=i.value.toLowerCase().substring(e+1),n=0;n<l.length;n++)if(e==l[n].extension){t=n;break}s.value=t}),mxEvent.addListener(i,"keyup",t),t(),s},!function(){mxGraphView.prototype.validateBackgroundPage=function(){var e=this.graph;if(null!=e.container&&!e.transparentBackground){if(e.pageVisible){var t=this.getBackgroundPageBounds();if(null==this.backgroundPageShape){for(var n=e.container.firstChild;null!=n&&n.nodeType!=mxConstants.NODETYPE_ELEMENT;)n=n.nextSibling;null!=n&&(this.backgroundPageShape=this.createBackgroundPageShape(t),this.backgroundPageShape.scale=1,this.backgroundPageShape.isShadow=!0,this.backgroundPageShape.dialect=mxConstants.DIALECT_STRICTHTML,this.backgroundPageShape.init(e.container),n.style.position="absolute",e.container.insertBefore(this.backgroundPageShape.node,n),this.backgroundPageShape.redraw(),this.backgroundPageShape.node.className="geBackgroundPage",mxEvent.addListener(this.backgroundPageShape.node,"dblclick",mxUtils.bind(this,function(t){e.dblClick(t)})),mxEvent.addGestureListeners(this.backgroundPageShape.node,mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_DOWN,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){null!=e.tooltipHandler&&e.tooltipHandler.isHideOnHover()&&e.tooltipHandler.hide(),e.isMouseDown&&!mxEvent.isConsumed(t)&&e.fireMouseEvent(mxEvent.MOUSE_MOVE,new mxMouseEvent(t))}),mxUtils.bind(this,function(t){e.fireMouseEvent(mxEvent.MOUSE_UP,new mxMouseEvent(t))})))}else this.backgroundPageShape.scale=1,this.backgroundPageShape.bounds=t,this.backgroundPageShape.redraw()}else null!=this.backgroundPageShape&&(this.backgroundPageShape.destroy(),this.backgroundPageShape=null);this.validateBackgroundStyles()}},mxGraphView.prototype.validateBackgroundStyles=function(){var t,e=this.graph,n=null==e.background||e.background==mxConstants.NONE?e.defaultPageBackgroundColor:e.background,i=null!=n&&this.gridColor!=n.toLowerCase()?this.gridColor:"#ffffff",l="none",s="";(e.isGridEnabled()||e.gridVisible)&&(s=10,mxClient.IS_SVG?(l=unescape(encodeURIComponent(this.createSvgGrid(i))),l="url(data:image/svg+xml;base64,"+(l=window.btoa?btoa(l):Base64.encode(l,!0))+")",s=e.gridSize*this.scale*this.gridSteps):l="url("+this.gridImage+")",t=i=0,null!=e.view.backgroundPageShape&&(i=1+(t=this.getBackgroundPageBounds()).x,t=1+t.y),s=-Math.round(s-mxUtils.mod(this.translate.x*this.scale-i,s))+"px "+-Math.round(s-mxUtils.mod(this.translate.y*this.scale-t,s))+"px"),null!=(i=e.view.canvas).ownerSVGElement&&(i=i.ownerSVGElement),null!=e.view.backgroundPageShape?(e.view.backgroundPageShape.node.style.backgroundPosition=s,e.view.backgroundPageShape.node.style.backgroundImage=l,e.view.backgroundPageShape.node.style.backgroundColor=n,e.view.backgroundPageShape.node.style.borderColor=e.defaultPageBorderColor,e.container.className="geDiagramContainer geDiagramBackdrop",i.style.backgroundImage="none",i.style.backgroundColor=""):(e.container.className="geDiagramContainer",i.style.backgroundPosition=s,i.style.backgroundColor=n,i.style.backgroundImage=l)},mxGraphView.prototype.createSvgGrid=function(t){for(var e=this.graph.gridSize*this.scale;e<this.minGridSize;)e*=2;for(var n=this.gridSteps*e,i=[],l=1;l<this.gridSteps;l++){var s=l*e;i.push("M 0 "+s+" L "+n+" "+s+" M "+s+" 0 L "+s+" "+n)}return'<svg width="'+n+'" height="'+n+'" xmlns="'+mxConstants.NS_SVG+'"><defs><pattern id="grid" width="'+n+'" height="'+n+'" patternUnits="userSpaceOnUse"><path d="'+i.join(" ")+'" fill="none" stroke="'+t+'" opacity="0.2" stroke-width="1"/><path d="M '+n+" 0 L 0 0 0 "+n+'" fill="none" stroke="'+t+'" stroke-width="1"/></pattern></defs><rect width="100%" height="100%" fill="url(#grid)"/></svg>'};var l=mxGraph.prototype.panGraph,s=(mxGraph.prototype.panGraph=function(t,e){var n,i;l.apply(this,arguments),null!=this.shiftPreview1&&(null!=(n=this.view.canvas).ownerSVGElement&&(n=n.ownerSVGElement),i=this.gridSize*this.view.scale*this.view.gridSteps,i=-Math.round(i-mxUtils.mod(this.view.translate.x*this.view.scale+t,i))+"px "+-Math.round(i-mxUtils.mod(this.view.translate.y*this.view.scale+e,i))+"px",n.style.backgroundPosition=i)},mxGraph.prototype.updatePageBreaks=function(t,e,n){var i=this.view.scale,l=this.view.translate,s=this.pageFormat,o=i*this.pageScale,r=this.view.getBackgroundPageBounds(),a=(e=r.width,n=r.height,new mxRectangle(i*l.x,i*l.y,s.width*o,s.height*o)),h=(t=t&&Math.min(a.width,a.height)>this.minPageBreakDist)?Math.ceil(n/a.height)-1:0,d=t?Math.ceil(e/a.width)-1:0,u=r.x+e,p=r.y+n;null==this.horizontalPageBreaks&&0<h&&(this.horizontalPageBreaks=[]),null==this.verticalPageBreaks&&0<d&&(this.verticalPageBreaks=[]),(t=mxUtils.bind(this,function(t){if(null!=t){for(var e=t==this.horizontalPageBreaks?h:d,n=0;n<=e;n++){var i=t==this.horizontalPageBreaks?[new mxPoint(Math.round(r.x),Math.round(r.y+(n+1)*a.height)),new mxPoint(Math.round(u),Math.round(r.y+(n+1)*a.height))]:[new mxPoint(Math.round(r.x+(n+1)*a.width),Math.round(r.y)),new mxPoint(Math.round(r.x+(n+1)*a.width),Math.round(p))];null!=t[n]?(t[n].points=i,t[n].redraw()):((i=new mxPolyline(i,this.pageBreakColor)).dialect=this.dialect,i.isDashed=this.pageBreakDashed,i.pointerEvents=!1,i.init(this.view.backgroundPane),i.redraw(),t[n]=i)}for(n=e;n<t.length;n++)t[n].destroy();t.splice(e,t.length-e)}}))(this.horizontalPageBreaks),t(this.verticalPageBreaks)},mxGraphHandler.prototype.shouldRemoveCellsFromParent),t=(mxGraphHandler.prototype.shouldRemoveCellsFromParent=function(t,e,n){for(var i=0;i<e.length;i++){if(this.graph.isTableCell(e[i])||this.graph.isTableRow(e[i]))return!1;if(this.graph.getModel().isVertex(e[i])){var l=this.graph.getCellGeometry(e[i]);if(null!=l&&l.relative)return!1}}return s.apply(this,arguments)},mxConnectionHandler.prototype.createMarker),n=(mxConnectionHandler.prototype.createMarker=function(){var n=t.apply(this,arguments);return n.intersects=mxUtils.bind(this,function(t,e){return!!this.isConnecting()||mxCellMarker.prototype.intersects.apply(n,arguments)}),n},mxGraphView.prototype.createBackgroundPageShape=function(t){return new mxRectangleShape(t,"#ffffff",this.graph.defaultPageBorderColor)},mxGraphView.prototype.getBackgroundPageBounds=function(){var t=this.getGraphBounds(),e=0<t.width?t.x/this.scale-this.translate.x:0,n=0<t.height?t.y/this.scale-this.translate.y:0,i=this.graph.pageFormat,l=this.graph.pageScale,s=i.width*l,i=i.height*l,l=Math.floor(Math.min(0,e)/s),o=Math.floor(Math.min(0,n)/i);return new mxRectangle(this.scale*(this.translate.x+l*s),this.scale*(this.translate.y+o*i),this.scale*(Math.ceil(Math.max(1,e+t.width/this.scale)/s)-l)*s,this.scale*(Math.ceil(Math.max(1,n+t.height/this.scale)/i)-o)*i)},mxGraph.prototype.panGraph),r=(mxGraph.prototype.panGraph=function(t,e){n.apply(this,arguments),this.dialect==mxConstants.DIALECT_SVG||null==this.view.backgroundPageShape||this.useScrollbarsForPanning&&mxUtils.hasScrollbars(this.container)||(this.view.backgroundPageShape.node.style.marginLeft=t+"px",this.view.backgroundPageShape.node.style.marginTop=e+"px")},mxPopupMenu.prototype.addItem),o=(mxPopupMenu.prototype.addItem=function(t,e,n,i,l,s){var o=r.apply(this,arguments);return null==s||s||mxEvent.addListener(o,"mousedown",function(t){mxEvent.consume(t)}),o},mxGraphHandler.prototype.isPropagateSelectionCell);mxGraphHandler.prototype.isPropagateSelectionCell=function(t,e,n){var i,l=this.graph.model.getParent(t);return e?(i=this.graph.model.isEdge(t)?null:this.graph.getCellGeometry(t),i=!this.graph.model.isEdge(l)&&!this.graph.isSiblingSelected(t)&&(null!=i&&i.relative||!this.graph.isContainer(l)||this.graph.isPart(t))):(i=o.apply(this,arguments),(this.graph.isTableCell(t)||this.graph.isTableRow(t))&&(this.graph.isTable(i=l)||(i=this.graph.model.getParent(i)),i=!this.graph.selectionCellsHandler.isHandled(i)||this.graph.isCellSelected(i)&&this.graph.isToggleEvent(n.getEvent())||this.graph.isCellSelected(t)&&!this.graph.isToggleEvent(n.getEvent())||this.graph.isTableCell(t)&&this.graph.isCellSelected(l))),i},mxPopupMenuHandler.prototype.getCellForPopupEvent=function(t){t=t.getCell();for(var e=this.graph.getModel(),n=e.getParent(t),i=this.graph.view.getState(n),l=this.graph.isCellSelected(t);null!=i&&(e.isVertex(n)||e.isEdge(n));){var s=this.graph.isCellSelected(n),l=l||s;(s||!l&&(this.graph.isTableCell(t)||this.graph.isTableRow(t)))&&(t=n),n=e.getParent(n)}return t}}(),window.EditorUi=function(t,e,n){mxEventSource.call(this),this.destroyFunctions=[],this.editor=t||new Editor,this.container=e||document.body;var S=this.editor.graph;if(S.lightbox=n,this.initialDefaultVertexStyle=mxUtils.clone(S.defaultVertexStyle),this.initialDefaultEdgeStyle=mxUtils.clone(S.defaultEdgeStyle),S.useCssTransforms&&(this.lazyZoomDelay=0),mxClient.IS_SVG?mxPopupMenu.prototype.submenuImage="data:image/gif;base64,R0lGODlhCQAJAIAAAP///zMzMyH5BAEAAAAALAAAAAAJAAkAAAIPhI8WebHsHopSOVgb26AAADs=":(new Image).src=mxPopupMenu.prototype.submenuImage,mxClient.IS_SVG||null==mxConnectionHandler.prototype.connectImage||((new Image).src=mxConnectionHandler.prototype.connectImage.src),this.editor.chromeless&&!this.editor.editable&&(this.footerHeight=0,S.isEnabled=function(){return!1},S.panningHandler.isForcePanningEvent=function(t){return!mxEvent.isPopupTrigger(t.getEvent())}),this.actions=new Actions(this),this.menus=this.createMenus(),!S.standalone){var b="rounded shadow glass dashed dashPattern labelBackgroundColor comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification sketchStyle pointerEvents".split(" "),w="shape edgeStyle curved rounded elbow jumpStyle jumpSize comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification sketchStyle".split(" "),o=(this.setDefaultStyle=function(t){try{var e=S.view.getState(t);if(null!=e){var n=t.clone(),i=(n.style="",S.getCellStyle(n));for(o in t=[],n=[],e.style)i[o]!=e.style[o]&&(t.push(e.style[o]),n.push(o));for(var l=null!=(s=S.getModel().getStyle(e.cell))?s.split(";"):[],s=0;s<l.length;s++){var o,r,a=l[s],h=a.indexOf("=");0<=h&&(o=a.substring(0,h),r=a.substring(h+1),null!=i[o])&&"none"==r&&(t.push(r),n.push(o))}S.getModel().isEdge(e.cell)?S.currentEdgeStyle={}:S.currentVertexStyle={},this.fireEvent(new mxEventObject("styleChanged","keys",n,"values",t,"cells",[e.cell]))}}catch(t){this.handleError(t)}},this.clearDefaultStyle=function(){S.currentEdgeStyle=mxUtils.clone(S.defaultEdgeStyle),S.currentVertexStyle=mxUtils.clone(S.defaultVertexStyle),this.fireEvent(new mxEventObject("styleChanged","keys",[],"values",[],"cells",[]))},["fontFamily","fontSource","fontSize","fontColor"]);for(e=0;e<o.length;e++)mxUtils.indexOf(b,o[e])<0&&b.push(o[e]);var r="edgeStyle startArrow startFill startSize endArrow endFill endSize".split(" "),T=[["startArrow","startFill","endArrow","endFill"],["startSize","endSize"],["sourcePerimeterSpacing","targetPerimeterSpacing"],["strokeColor","strokeWidth"],["fillColor","gradientColor"],["opacity"],["align"],["html"]];for(e=0;e<T.length;e++)for(n=0;n<T[e].length;n++)b.push(T[e][n]);for(e=0;e<w.length;e++)mxUtils.indexOf(b,w[e])<0&&b.push(w[e]);var i,l=function(t,e,n,i,l){i=null!=i?i:S.currentVertexStyle,l=null!=l?l:S.currentEdgeStyle,(n=null!=n?n:S.getModel()).beginUpdate();try{for(var s=0;s<t.length;s++){var o=t[s];if(e)var r=["fontSize","fontFamily","fontColor"];else for(var a=n.getStyle(o),h=null!=a?a.split(";"):[],r=b.slice(),d=0;d<h.length;d++){var u=h[d],p=u.indexOf("=");if(0<=p){var c=u.substring(0,p),m=mxUtils.indexOf(r,c);0<=m&&r.splice(m,1);for(var g=0;g<T.length;g++){var x=T[g];if(0<=mxUtils.indexOf(x,c))for(var y=0;y<x.length;y++){var f=mxUtils.indexOf(r,x[y]);0<=f&&r.splice(f,1)}}}}for(var C=n.isEdge(o),g=C?l:i,E=n.getStyle(o),d=0;d<r.length;d++){var v=g[c=r[d]];null==v||"shape"==c&&!C||C&&!(mxUtils.indexOf(w,c)<0)||(E=mxUtils.setStyle(E,c,v))}Editor.simpleLabels&&(E=mxUtils.setStyle(mxUtils.setStyle(E,"html",null),"whiteSpace",null)),n.setStyle(o,E)}}finally{n.endUpdate()}},s=(S.addListener("cellsInserted",function(t,e){l(e.getProperty("cells"))}),S.addListener("textInserted",function(t,e){l(e.getProperty("cells"),!0)}),this.insertHandler=l,this.createDivs(),this.createUi(),this.refresh(),mxUtils.bind(this,function(t){return null==t&&(t=window.event),S.isEditing()||null!=t&&this.isSelectionAllowed(t)})),a=(this.container==document.body&&(this.menubarContainer.onselectstart=s,this.menubarContainer.onmousedown=s,this.toolbarContainer.onselectstart=s,this.toolbarContainer.onmousedown=s,this.diagramContainer.onselectstart=s,this.diagramContainer.onmousedown=s,this.sidebarContainer.onselectstart=s,this.sidebarContainer.onmousedown=s,this.formatContainer.onselectstart=s,this.formatContainer.onmousedown=s,this.footerContainer.onselectstart=s,this.footerContainer.onmousedown=s,null!=this.tabContainer)&&(this.tabContainer.onselectstart=s),!this.editor.chromeless||this.editor.editable?(e=function(t){if(null!=t){var e=mxEvent.getSource(t);if("A"==e.nodeName)for(;null!=e;){if("geHint"==e.className)return!0;e=e.parentNode}}return s(t)},mxClient.IS_IE&&(void 0===document.documentMode||document.documentMode<9)?mxEvent.addListener(this.diagramContainer,"contextmenu",e):this.diagramContainer.oncontextmenu=e):S.panningHandler.usePopupTrigger=!1,S.init(this.diagramContainer),mxClient.IS_SVG&&null!=S.view.getDrawPane()&&null!=(e=S.view.getDrawPane().ownerSVGElement)&&(e.style.position="absolute"),this.hoverIcons=this.createHoverIcons(),null!=S.graphHandler&&(i=S.graphHandler.start,S.graphHandler.start=function(){null!=f.hoverIcons&&f.hoverIcons.reset(),i.apply(this,arguments)}),mxEvent.addListener(this.diagramContainer,"mousemove",mxUtils.bind(this,function(t){var e=mxUtils.getOffset(this.diagramContainer);0<mxEvent.getClientX(t)-e.x-this.diagramContainer.clientWidth||0<mxEvent.getClientY(t)-e.y-this.diagramContainer.clientHeight?this.diagramContainer.setAttribute("title",mxResources.get("panTooltip")):this.diagramContainer.removeAttribute("title")})),!1),h=this.hoverIcons.isResetEvent,d=(this.hoverIcons.isResetEvent=function(t,e){return a||h.apply(this,arguments)},this.keydownHandler=mxUtils.bind(this,function(t){32!=t.which||S.isEditing()?mxEvent.isConsumed(t)||27!=t.keyCode||this.hideDialog(null,!0):(a=!0,this.hoverIcons.reset(),S.container.style.cursor="move",S.isEditing()||mxEvent.getSource(t)!=S.container||mxEvent.consume(t))}),mxEvent.addListener(document,"keydown",this.keydownHandler),this.keyupHandler=mxUtils.bind(this,function(t){S.container.style.cursor="",a=!1}),mxEvent.addListener(document,"keyup",this.keyupHandler),S.panningHandler.isForcePanningEvent),u=(S.panningHandler.isForcePanningEvent=function(t){return d.apply(this,arguments)||a||mxEvent.isMouseEvent(t.getEvent())&&(this.usePopupTrigger||!mxEvent.isPopupTrigger(t.getEvent()))&&(!mxEvent.isControlDown(t.getEvent())&&mxEvent.isRightMouseButton(t.getEvent())||mxEvent.isMiddleMouseButton(t.getEvent()))},S.cellEditor.isStopEditingEvent),p=(S.cellEditor.isStopEditingEvent=function(t){return u.apply(this,arguments)||13==t.keyCode&&(!mxClient.IS_SF&&mxEvent.isControlDown(t)||mxClient.IS_MAC&&mxEvent.isMetaDown(t)||mxClient.IS_SF&&mxEvent.isShiftDown(t))},S.isZoomWheelEvent),c=!(S.isZoomWheelEvent=function(){return a||p.apply(this,arguments)}),m=null,g=null,x=null,y=mxUtils.bind(this,function(){if(null!=this.toolbar&&c!=S.cellEditor.isContentEditing()){for(var t=this.toolbar.container.firstChild,e=[];null!=t;){var n=t.nextSibling;mxUtils.indexOf(this.toolbar.staticElements,t)<0&&(t.parentNode.removeChild(t),e.push(t)),t=n}if(t=this.toolbar.fontMenu,n=this.toolbar.sizeMenu,null==x)this.toolbar.createTextToolbar();else{for(var i=0;i<x.length;i++)this.toolbar.container.appendChild(x[i]);this.toolbar.fontMenu=m,this.toolbar.sizeMenu=g}c=S.cellEditor.isContentEditing(),m=t,g=n,x=e}}),f=this,C=S.cellEditor.startEditing,E=(S.cellEditor.startEditing=function(){var e,t;C.apply(this,arguments),y(),S.cellEditor.isContentEditing()&&(e=!1,mxEvent.addListener(S.cellEditor.textarea,"input",t=function(){e||(e=!0,window.setTimeout(function(){var t=S.getSelectedEditingElement();null!=t&&null!=(t=mxUtils.getCurrentStyle(t))&&null!=f.toolbar&&(f.toolbar.setFontName(Graph.stripQuotes(t.fontFamily)),f.toolbar.setFontSize(parseInt(t.fontSize))),e=!1},0))}),mxEvent.addListener(S.cellEditor.textarea,"touchend",t),mxEvent.addListener(S.cellEditor.textarea,"mouseup",t),mxEvent.addListener(S.cellEditor.textarea,"keyup",t),t())},S.cellEditor.stopEditing);if(S.cellEditor.stopEditing=function(t,e){try{E.apply(this,arguments),y()}catch(t){f.handleError(t)}},S.container.setAttribute("tabindex","0"),S.container.style.cursor="default",window.self===window.top&&null!=S.container.parentNode)try{S.container.focus()}catch(t){}var v=S.fireMouseEvent;S.fireMouseEvent=function(t,e,n){t==mxEvent.MOUSE_DOWN&&this.container.focus(),v.apply(this,arguments)},S.popupMenuHandler.autoExpand=!0,null!=this.menus&&(S.popupMenuHandler.factoryMethod=mxUtils.bind(this,function(t,e,n){this.menus.createPopupMenu(t,e,n)})),mxEvent.addGestureListeners(document,mxUtils.bind(this,function(t){S.popupMenuHandler.hideMenu()})),this.keyHandler=this.createKeyHandler(t),this.getKeyHandler=function(){return keyHandler},S.connectionHandler.addListener(mxEvent.CONNECT,function(t,e){t=[e.getProperty("cell")],e.getProperty("terminalInserted")&&t.push(e.getProperty("terminal")),l(t)}),this.addListener("styleChanged",mxUtils.bind(this,function(t,e){var n=e.getProperty("cells"),i=t=!1;if(0<n.length)for(var l=0;l<n.length&&(t=S.getModel().isVertex(n[l])||t,!(i=S.getModel().isEdge(n[l])||i)||!t);l++);else i=t=!0;for(n=e.getProperty("keys"),e=e.getProperty("values"),l=0;l<n.length;l++){var s=0<=mxUtils.indexOf(o,n[l]);("strokeColor"!=n[l]||null!=e[l]&&"none"!=e[l])&&(0<=mxUtils.indexOf(w,n[l])?i||0<=mxUtils.indexOf(r,n[l])?null==e[l]?delete S.currentEdgeStyle[n[l]]:S.currentEdgeStyle[n[l]]=e[l]:t&&0<=mxUtils.indexOf(b,n[l])&&(null==e[l]?delete S.currentVertexStyle[n[l]]:S.currentVertexStyle[n[l]]=e[l]):0<=mxUtils.indexOf(b,n[l])&&((t||s)&&(null==e[l]?delete S.currentVertexStyle[n[l]]:S.currentVertexStyle[n[l]]=e[l]),i||s||0<=mxUtils.indexOf(r,n[l]))&&(null==e[l]?delete S.currentEdgeStyle[n[l]]:S.currentEdgeStyle[n[l]]=e[l]))}null!=this.toolbar&&(this.toolbar.setFontName(S.currentVertexStyle.fontFamily||Menus.prototype.defaultFont),this.toolbar.setFontSize(S.currentVertexStyle.fontSize||Menus.prototype.defaultFontSize),null!=this.toolbar.edgeStyleMenu&&(this.toolbar.edgeStyleMenu.getElementsByTagName("div")[0].className="orthogonalEdgeStyle"==S.currentEdgeStyle.edgeStyle&&"1"==S.currentEdgeStyle.curved?"geSprite geSprite-curved":"straight"==S.currentEdgeStyle.edgeStyle||"none"==S.currentEdgeStyle.edgeStyle||null==S.currentEdgeStyle.edgeStyle?"geSprite geSprite-straight":"entityRelationEdgeStyle"==S.currentEdgeStyle.edgeStyle?"geSprite geSprite-entity":"elbowEdgeStyle"==S.currentEdgeStyle.edgeStyle?"geSprite geSprite-"+("vertical"==S.currentEdgeStyle.elbow?"verticalelbow":"horizontalelbow"):"isometricEdgeStyle"==S.currentEdgeStyle.edgeStyle?"geSprite geSprite-"+("vertical"==S.currentEdgeStyle.elbow?"verticalisometric":"horizontalisometric"):"geSprite geSprite-orthogonal"),null!=this.toolbar.edgeShapeMenu&&(this.toolbar.edgeShapeMenu.getElementsByTagName("div")[0].className="link"==S.currentEdgeStyle.shape?"geSprite geSprite-linkedge":"flexArrow"==S.currentEdgeStyle.shape?"geSprite geSprite-arrow":"arrow"==S.currentEdgeStyle.shape?"geSprite geSprite-simplearrow":"geSprite geSprite-connection"),null!=this.toolbar.lineStartMenu&&(this.toolbar.lineStartMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("start",S.currentEdgeStyle.shape,S.currentEdgeStyle[mxConstants.STYLE_STARTARROW],mxUtils.getValue(S.currentEdgeStyle,"startFill","1"))),null!=this.toolbar.lineEndMenu)&&(this.toolbar.lineEndMenu.getElementsByTagName("div")[0].className=this.getCssClassForMarker("end",S.currentEdgeStyle.shape,S.currentEdgeStyle[mxConstants.STYLE_ENDARROW],mxUtils.getValue(S.currentEdgeStyle,"endFill","1")))})),null!=this.toolbar&&(t=mxUtils.bind(this,function(){var t=S.currentVertexStyle.fontFamily||"Helvetica",e=String(S.currentVertexStyle.fontSize||"12"),n=S.getView().getState(S.getSelectionCell());null!=n&&(t=n.style[mxConstants.STYLE_FONTFAMILY]||t,e=n.style[mxConstants.STYLE_FONTSIZE]||e,10<t.length)&&(t=t.substring(0,8)+"..."),this.toolbar.setFontName(t),this.toolbar.setFontSize(e)}),S.getSelectionModel().addListener(mxEvent.CHANGE,t),S.getModel().addListener(mxEvent.CHANGE,t)),S.addListener(mxEvent.CELLS_ADDED,function(t,e){t=e.getProperty("cells"),e=e.getProperty("parent"),S.getModel().isLayer(e)&&!S.isCellVisible(e)&&null!=t&&0<t.length&&S.getModel().setVisible(e,!0)}),this.gestureHandler=mxUtils.bind(this,function(t){null!=this.currentMenu&&mxEvent.getSource(t)!=this.currentMenu.div&&this.hideCurrentMenu()}),mxEvent.addGestureListeners(document,this.gestureHandler),this.resizeHandler=mxUtils.bind(this,function(){window.setTimeout(mxUtils.bind(this,function(){null!=this.editor.graph&&this.refresh()}),0)}),mxEvent.addListener(window,"resize",this.resizeHandler),this.orientationChangeHandler=mxUtils.bind(this,function(){this.refresh()}),mxEvent.addListener(window,"orientationchange",this.orientationChangeHandler),mxClient.IS_IOS&&!window.navigator.standalone&&(this.scrollHandler=mxUtils.bind(this,function(){window.scrollTo(0,0)}),mxEvent.addListener(window,"scroll",this.scrollHandler)),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.resetScrollbars()})),this.addListener("gridEnabledChanged",mxUtils.bind(this,function(){S.view.validateBackground()})),this.addListener("backgroundColorChanged",mxUtils.bind(this,function(){S.view.validateBackground()})),S.addListener("gridSizeChanged",mxUtils.bind(this,function(){S.isGridEnabled()&&S.view.validateBackground()})),this.editor.resetGraph()}this.init(),S.standalone||this.open()},mxUtils.extend(EditorUi,mxEventSource),EditorUi.compactUi=!0,EditorUi.prototype.splitSize=mxClient.IS_TOUCH||mxClient.IS_POINTER?12:8,EditorUi.prototype.menubarHeight=30,EditorUi.prototype.formatEnabled=!0,EditorUi.prototype.formatWidth=240,EditorUi.prototype.toolbarHeight=38,EditorUi.prototype.footerHeight=28,EditorUi.prototype.sidebarFooterHeight=34,EditorUi.prototype.hsplitPosition=screen.width<=640?118:"large"!=urlParams["sidebar-entries"]?212:240,EditorUi.prototype.allowAnimation=!0,EditorUi.prototype.lightboxMaxFitScale=2,EditorUi.prototype.lightboxVerticalDivider=4,EditorUi.prototype.hsplitClickEnabled=!1,EditorUi.prototype.init=function(){var t,e,n=this.editor.graph;n.standalone||("0"!=urlParams["shape-picker"]&&this.installShapePicker(),mxEvent.addListener(n.container,"scroll",mxUtils.bind(this,function(){n.tooltipHandler.hide(),null!=n.connectionHandler&&null!=n.connectionHandler.constraintHandler&&n.connectionHandler.constraintHandler.reset()})),n.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){n.tooltipHandler.hide();var t=n.getRubberband();null!=t&&t.cancel()})),mxEvent.addListener(n.container,"keydown",mxUtils.bind(this,function(t){this.onKeyDown(t)})),mxEvent.addListener(n.container,"keypress",mxUtils.bind(this,function(t){this.onKeyPress(t)})),this.addUndoListener(),this.addBeforeUnloadListener(),n.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()})),n.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){this.updateActionStates()})),t=n.setDefaultParent,(e=this).editor.graph.setDefaultParent=function(){t.apply(this,arguments),e.updateActionStates()},n.editLink=e.actions.get("editLink").funct,this.updateActionStates(),this.initClipboard(),this.initCanvas(),null!=this.format&&this.format.init())},EditorUi.prototype.installShapePicker=function(){var t,n,r=this.editor.graph,a=this,e=(r.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){"mouseDown"==e.getProperty("eventName")&&a.hideShapePicker()})),r.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){a.hideShapePicker(!0)})),r.getSelectionModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){a.hideShapePicker(!0)})),r.getModel().addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){a.hideShapePicker(!0)})),r.popupMenuHandler.isMenuShowing),i=(r.popupMenuHandler.isMenuShowing=function(){return e.apply(this,arguments)||null!=a.shapePicker},r.dblClick);r.dblClick=function(t,e){var n;this.isEnabled()&&(null!=e||null==a.sidebar||mxEvent.isShiftDown(t)?i.apply(this,arguments):(mxEvent.consume(t),n=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),window.setTimeout(mxUtils.bind(this,function(){a.showShapePicker(n.x,n.y)}),30)))},null!=this.hoverIcons&&(t=this.hoverIcons.drag,this.hoverIcons.drag=function(){a.hideShapePicker(),t.apply(this,arguments)},n=this.hoverIcons.execute,this.hoverIcons.execute=function(l,s,o){var e=o.getEvent();this.graph.isCloneEvent(e)||mxEvent.isShiftDown(e)?n.apply(this,arguments):this.graph.connectVertex(l.cell,s,this.graph.defaultEdgeLength,e,null,null,mxUtils.bind(this,function(t,e,n){var i=r.getCompositeParent(l.cell);for(t=r.getCellGeometry(i),o.consume();null!=i&&r.model.isVertex(i)&&null!=t&&t.relative;)cell=i,i=r.model.getParent(cell),t=r.getCellGeometry(i);window.setTimeout(mxUtils.bind(this,function(){a.showShapePicker(o.getGraphX(),o.getGraphY(),i,mxUtils.bind(this,function(t){n(t)}),s)}),30)}),mxUtils.bind(this,function(t){this.graph.selectCellsForConnectVertex(t,e,this)}))})},EditorUi.prototype.showShapePicker=function(t,e,n,i,l){null!=(t=this.createShapePicker(t,e,n,i,l,mxUtils.bind(this,function(){this.hideShapePicker()}),this.getCellsForShapePicker(n)))&&(null!=this.hoverIcons&&this.hoverIcons.reset(),(e=this.editor.graph).popupMenuHandler.hideMenu(),e.tooltipHandler.hideTooltip(),this.hideCurrentMenu(),this.hideShapePicker(),this.shapePickerCallback=i,this.shapePicker=t)},EditorUi.prototype.createShapePicker=function(n,i,t,l,e,s,o){var r=null;if(null!=o&&0<o.length){var a=this,h=this.editor.graph,r=document.createElement("div"),d=(e=h.view.getState(t),null==t||null!=e&&h.isTransparentState(e)?null:h.copyStyle(t));for(t=o.length<6?35*o.length:140,r.className="geToolbarContainer geSidebarContainer geSidebar",r.style.cssText="position:absolute;left:"+n+"px;top:"+i+"px;width:"+t+"px;border-radius:10px;padding:4px;text-align:center;box-shadow:0px 0px 3px 1px #d1d1d1;padding: 6px 0 8px 0;",mxUtils.setPrefixedStyle(r.style,"transform","translate(-22px,-22px)"),null!=h.background&&h.background!=mxConstants.NONE&&(r.style.backgroundColor=h.background),h.container.appendChild(r),t=mxUtils.bind(this,function(e){var t=document.createElement("a");t.className="geItem",t.style.cssText="position:relative;display:inline-block;position:relative;width:30px;height:30px;cursor:pointer;overflow:hidden;padding:3px 0 0 3px;",r.appendChild(t),null!=d&&"1"!=urlParams.sketch?this.sidebar.graph.pasteStyle(d,[e]):a.insertHandler([e],""!=e.value&&"1"!=urlParams.sketch,this.sidebar.graph.model),this.sidebar.createThumb([e],25,25,t,null,!0,!1,e.geometry.width,e.geometry.height),mxEvent.addListener(t,"click",function(){var t=h.cloneCell(e);if(null!=l)l(t);else{t.geometry.x=h.snap(Math.round(n/h.view.scale)-h.view.translate.x-e.geometry.width/2),t.geometry.y=h.snap(Math.round(i/h.view.scale)-h.view.translate.y-e.geometry.height/2),h.model.beginUpdate();try{h.addCell(t)}finally{h.model.endUpdate()}h.setSelectionCell(t),h.scrollCellToVisible(t),h.startEditingAtCell(t),null!=a.hoverIcons&&a.hoverIcons.update(h.view.getState(t))}null!=s&&s()})}),e=0;e<o.length;e++)t(o[e])}return r},EditorUi.prototype.getCellsForShapePicker=function(t){var e=mxUtils.bind(this,function(t,e,n,i){return this.editor.graph.createVertex(null,null,i||"",0,0,e||120,n||60,t,!1)});return[null!=t?this.editor.graph.cloneCell(t):e("text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];autosize=1;strokeColor=none;",40,20,"Text"),e("whiteSpace=wrap;html=1;"),e("rounded=1;whiteSpace=wrap;html=1;"),e("ellipse;whiteSpace=wrap;html=1;"),e("rhombus;whiteSpace=wrap;html=1;",80,80),e("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;"),e("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60),e("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80),e("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80),e("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;"),e("triangle;whiteSpace=wrap;html=1;",60,80),e("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80),e("shape=tape;whiteSpace=wrap;html=1;",120,100),e("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80),e("shape=cylinder;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;",60,80),e("shape=callout;rounded=1;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80),e("shape=doubleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.3;"),e("shape=singleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.4;",80,60),e("shape=singleArrow;whiteSpace=wrap;html=1;arrowWidth=0.4;arrowSize=0.4;flipH=1;",80,60),e("shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",40,40)]},EditorUi.prototype.hideShapePicker=function(t){null!=this.shapePicker&&(this.shapePicker.parentNode.removeChild(this.shapePicker),this.shapePicker=null,t||null==this.shapePickerCallback||this.shapePickerCallback(),this.shapePickerCallback=null)},EditorUi.prototype.onKeyDown=function(t){var e=this.editor.graph;9!=t.which||!e.isEnabled()||mxEvent.isAltDown(t)||e.isEditing()&&mxEvent.isShiftDown(t)||(e.isEditing()?e.stopEditing(!1):e.selectCell(!mxEvent.isShiftDown(t)),mxEvent.consume(t))},EditorUi.prototype.onKeyPress=function(t){var e=this.editor.graph;!this.isImmediateEditingEvent(t)||e.isEditing()||e.isSelectionEmpty()||0===t.which||27===t.which||mxEvent.isAltDown(t)||mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)||(e.escape(),e.startEditing(),mxClient.IS_FF&&null!=(e=e.cellEditor).textarea&&(e.textarea.innerHTML=String.fromCharCode(t.which),(t=document.createRange()).selectNodeContents(e.textarea),t.collapse(!1),(e=window.getSelection()).removeAllRanges(),e.addRange(t)))},EditorUi.prototype.isImmediateEditingEvent=function(t){return!0},EditorUi.prototype.getCssClassForMarker=function(t,e,n,i){return"flexArrow"==e?null!=n&&n!=mxConstants.NONE?"geSprite geSprite-"+t+"blocktrans":"geSprite geSprite-noarrow":"box"==n||"halfCircle"==n?"geSprite geSvgSprite geSprite-"+n+("end"==t?" geFlipSprite":""):n==mxConstants.ARROW_CLASSIC?"1"==i?"geSprite geSprite-"+t+"classic":"geSprite geSprite-"+t+"classictrans":n==mxConstants.ARROW_CLASSIC_THIN?"1"==i?"geSprite geSprite-"+t+"classicthin":"geSprite geSprite-"+t+"classicthintrans":n==mxConstants.ARROW_OPEN?"geSprite geSprite-"+t+"open":n==mxConstants.ARROW_OPEN_THIN?"geSprite geSprite-"+t+"openthin":n==mxConstants.ARROW_BLOCK?"1"==i?"geSprite geSprite-"+t+"block":"geSprite geSprite-"+t+"blocktrans":n==mxConstants.ARROW_BLOCK_THIN?"1"==i?"geSprite geSprite-"+t+"blockthin":"geSprite geSprite-"+t+"blockthintrans":n==mxConstants.ARROW_OVAL?"1"==i?"geSprite geSprite-"+t+"oval":"geSprite geSprite-"+t+"ovaltrans":n==mxConstants.ARROW_DIAMOND?"1"==i?"geSprite geSprite-"+t+"diamond":"geSprite geSprite-"+t+"diamondtrans":n==mxConstants.ARROW_DIAMOND_THIN?"1"==i?"geSprite geSprite-"+t+"thindiamond":"geSprite geSprite-"+t+"thindiamondtrans":"openAsync"==n?"geSprite geSprite-"+t+"openasync":"dash"==n?"geSprite geSprite-"+t+"dash":"cross"==n?"geSprite geSprite-"+t+"cross":"async"==n?"1"==i?"geSprite geSprite-"+t+"async":"geSprite geSprite-"+t+"asynctrans":"circle"==n||"circlePlus"==n?"1"==i||"circle"==n?"geSprite geSprite-"+t+"circle":"geSprite geSprite-"+t+"circleplus":"ERone"==n?"geSprite geSprite-"+t+"erone":"ERmandOne"==n?"geSprite geSprite-"+t+"eronetoone":"ERmany"==n?"geSprite geSprite-"+t+"ermany":"ERoneToMany"==n?"geSprite geSprite-"+t+"eronetomany":"ERzeroToOne"==n?"geSprite geSprite-"+t+"eroneopt":"ERzeroToMany"==n?"geSprite geSprite-"+t+"ermanyopt":"geSprite geSprite-noarrow"},EditorUi.prototype.createMenus=function(){return null},EditorUi.prototype.updatePasteActionStates=function(){var t=this.editor.graph,e=this.actions.get("paste"),n=this.actions.get("pasteHere");e.setEnabled(this.editor.graph.cellEditor.isContentEditing()||(!mxClient.IS_FF&&null!=navigator.clipboard||!mxClipboard.isEmpty())&&t.isEnabled()&&!t.isCellLocked(t.getDefaultParent())),n.setEnabled(e.isEnabled())},EditorUi.prototype.initClipboard=function(){var d=this,e=mxClipboard.cut,n=(mxClipboard.cut=function(t){t.cellEditor.isContentEditing()?document.execCommand("cut",!1,null):e.apply(this,arguments),d.updatePasteActionStates()},mxClipboard.copy=function(t){var e=null;if(t.cellEditor.isContentEditing())document.execCommand("copy",!1,null);else{e=e||t.getSelectionCells();for(var e=t.getExportableCells(t.model.getTopmostCells(e)),n={},i=t.createCellLookup(e),l=t.cloneCells(e,null,n),s=new mxGraphModel,o=s.getChildAt(s.getRoot(),0),r=0;r<l.length;r++){s.add(o,l[r]);var a,h=t.view.getState(e[r]);null!=h&&null!=(a=t.getCellGeometry(l[r]))&&a.relative&&!s.isEdge(e[r])&&null==i[mxObjectIdentity.get(s.getParent(e[r]))]&&(a.offset=null,a.relative=!1,a.x=h.x/h.view.scale-h.view.translate.x,a.y=h.y/h.view.scale-h.view.translate.y)}t.updateCustomLinks(t.createCellMapping(n,i),l),mxClipboard.insertCount=1,mxClipboard.setCells(l)}return d.updatePasteActionStates(),e},mxClipboard.paste),t=(mxClipboard.paste=function(t){var e=null;return t.cellEditor.isContentEditing()?document.execCommand("paste",!1,null):e=n.apply(this,arguments),d.updatePasteActionStates(),e},this.editor.graph.cellEditor.startEditing),i=(this.editor.graph.cellEditor.startEditing=function(){t.apply(this,arguments),d.updatePasteActionStates()},this.editor.graph.cellEditor.stopEditing);this.editor.graph.cellEditor.stopEditing=function(t,e){i.apply(this,arguments),d.updatePasteActionStates()},this.updatePasteActionStates()},EditorUi.prototype.lazyZoomDelay=20,EditorUi.prototype.wheelZoomDelay=400,EditorUi.prototype.buttonZoomDelay=600,EditorUi.prototype.initCanvas=function(){var n,o,c=this.editor.graph,s=(c.timerAutoScroll=!0,c.getPagePadding=function(){return new mxPoint(Math.max(0,Math.round((c.container.offsetWidth-34)/c.view.scale)),Math.max(0,Math.round((c.container.offsetHeight-34)/c.view.scale)))},c.view.getBackgroundPageBounds=function(){var t=this.graph.getPageLayout(),e=this.graph.getPageSize();return new mxRectangle(this.scale*(this.translate.x+t.x*e.width),this.scale*(this.translate.y+t.y*e.height),this.scale*t.width*e.width,this.scale*t.height*e.height)},c.getPreferredPageSize=function(t,e,n){return t=this.getPageLayout(),e=this.getPageSize(),new mxRectangle(0,0,t.width*e.width,t.height*e.height)},null),r=this;if(this.editor.isChromelessView()){this.chromelessResize=s=mxUtils.bind(this,function(t,e,n,i){var l,s,o,r,a,h,d,u,p;null==c.container||c.isViewer()||(n=null!=n?n:0,i=null!=i?i:0,l=c.pageVisible?c.view.getBackgroundPageBounds():c.getGraphBounds(),s=mxUtils.hasScrollbars(c.container),o=c.view.translate,r=c.view.scale,(a=mxRectangle.fromRectangle(l)).x=a.x/r-o.x,a.y=a.y/r-o.y,a.width/=r,a.height/=r,o=c.container.scrollTop,h=c.container.scrollLeft,u=8<=document.documentMode?20:14,8!=document.documentMode&&9!=document.documentMode||(u+=3),d=c.container.offsetWidth-u,u=c.container.offsetHeight-u,e=(d-(t=t?Math.max(.3,Math.min(e||1,d/a.width)):r)*a.width)/2/t,p=0==this.lightboxVerticalDivider?0:(u-t*a.height)/this.lightboxVerticalDivider/t,s&&(e=Math.max(e,0),p=Math.max(p,0)),s||l.width<d||l.height<u?(c.view.scaleAndTranslate(t,Math.floor(e-a.x),Math.floor(p-a.y)),c.container.scrollTop=o*t/r,c.container.scrollLeft=h*t/r):0==n&&0==i||(l=c.view.translate,c.view.setTranslate(Math.floor(l.x+n/r),Math.floor(l.y+i/r))))}),this.chromelessWindowResize=mxUtils.bind(this,function(){this.chromelessResize(!1)});var t=mxUtils.bind(this,function(){this.chromelessWindowResize(!1)});if(mxEvent.addListener(window,"resize",t),this.destroyFunctions.push(function(){mxEvent.removeListener(window,"resize",t)}),this.editor.addListener("resetGraphView",mxUtils.bind(this,function(){this.chromelessResize(!0)})),this.actions.get("zoomIn").funct=mxUtils.bind(this,function(t){c.zoomIn(),this.chromelessResize(!1)}),this.actions.get("zoomOut").funct=mxUtils.bind(this,function(t){c.zoomOut(),this.chromelessResize(!1)}),"0"!=urlParams.toolbar){var e,i,l,a,h,d,u,p=JSON.parse(decodeURIComponent(urlParams["toolbar-config"]||"{}")),m=(this.chromelessToolbar=document.createElement("div"),this.chromelessToolbar.style.position="fixed",this.chromelessToolbar.style.overflow="hidden",this.chromelessToolbar.style.boxSizing="border-box",this.chromelessToolbar.style.whiteSpace="nowrap",this.chromelessToolbar.style.backgroundColor="#000000",this.chromelessToolbar.style.padding="10px 10px 8px 10px",this.chromelessToolbar.style.left=c.isViewer()?"0":"50%",mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"borderRadius","20px"),mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transition","opacity 600ms ease-in-out"),mxUtils.bind(this,function(){var t=mxUtils.getCurrentStyle(c.container);c.isViewer()?this.chromelessToolbar.style.top="0":this.chromelessToolbar.style.bottom=(null!=t?parseInt(t["margin-bottom"]||0):0)+(null!=this.tabContainer?20+parseInt(this.tabContainer.style.height):20)+"px"})),m=(this.editor.addListener("resetGraphView",m),m(),mxUtils.bind(this,function(t,e,n){0;var i=document.createElement("span");return i.style.paddingLeft="8px",i.style.paddingRight="8px",i.style.cursor="pointer",mxEvent.addListener(i,"click",t),null!=n&&i.setAttribute("title",n),(t=document.createElement("img")).setAttribute("border","0"),t.setAttribute("src",e),i.appendChild(t),this.chromelessToolbar.appendChild(i),i})),g=(null!=p.backBtn&&m(mxUtils.bind(this,function(t){window.location.href=p.backBtn.url,mxEvent.consume(t)}),Editor.backLargeImage,mxResources.get("back",null,"Back")),this.isPagesEnabled()&&(e=m(mxUtils.bind(this,function(t){this.actions.get("previousPage").funct(),mxEvent.consume(t)}),Editor.previousLargeImage,mxResources.get("previousPage")),(i=document.createElement("div")).style.display="inline-block",i.style.verticalAlign="top",i.style.fontFamily="Helvetica,Arial",i.style.marginTop="8px",i.style.fontSize="14px",i.style.color="#ffffff",this.chromelessToolbar.appendChild(i),l=m(mxUtils.bind(this,function(t){this.actions.get("nextPage").funct(),mxEvent.consume(t)}),Editor.nextLargeImage,mxResources.get("nextPage")),a=mxUtils.bind(this,function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage&&(i.innerHTML="",mxUtils.write(i,mxUtils.indexOf(this.pages,this.currentPage)+1+" / "+this.pages.length))}),e.style.paddingLeft="0px",e.style.paddingRight="4px",l.style.paddingLeft="4px",l.style.paddingRight="0px",h=mxUtils.bind(this,function(){null!=this.pages&&1<this.pages.length&&null!=this.currentPage?(l.style.display="",e.style.display="",i.style.display="inline-block"):(l.style.display="none",e.style.display="none",i.style.display="none"),a()}),this.editor.addListener("resetGraphView",h),this.editor.addListener("pageSelected",a)),m(mxUtils.bind(this,function(t){this.actions.get("zoomOut").funct(),mxEvent.consume(t)}),Editor.zoomOutLargeImage,mxResources.get("zoomOut")+" (Alt+Mousewheel)"),m(mxUtils.bind(this,function(t){this.actions.get("zoomIn").funct(),mxEvent.consume(t)}),Editor.zoomInLargeImage,mxResources.get("zoomIn")+" (Alt+Mousewheel)"),m(mxUtils.bind(this,function(t){c.isLightboxView()?(1==c.view.scale?this.lightboxFit():c.zoomTo(1),this.chromelessResize(!1)):this.chromelessResize(!0),mxEvent.consume(t)}),Editor.actualSizeLargeImage,mxResources.get("fit")),null),x=null,y=mxUtils.bind(this,function(t){null!=g&&(window.clearTimeout(g),g=null),null!=x&&(window.clearTimeout(x),x=null),g=window.setTimeout(mxUtils.bind(this,function(){mxUtils.setOpacity(this.chromelessToolbar,0),g=null,x=window.setTimeout(mxUtils.bind(this,function(){this.chromelessToolbar.style.display="none",x=null}),600)}),t||200)}),f=mxUtils.bind(this,function(t){null!=g&&(window.clearTimeout(g),g=null),null!=x&&(window.clearTimeout(x),x=null),this.chromelessToolbar.style.display="",mxUtils.setOpacity(this.chromelessToolbar,t||30)});if("1"==urlParams.layers&&(this.layersDialog=null,d=m(mxUtils.bind(this,function(t){var e;null!=this.layersDialog?(this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null):(this.layersDialog=c.createLayersDialog(),mxEvent.addListener(this.layersDialog,"mouseleave",mxUtils.bind(this,function(){this.layersDialog.parentNode.removeChild(this.layersDialog),this.layersDialog=null})),e=d.getBoundingClientRect(),mxUtils.setPrefixedStyle(this.layersDialog.style,"borderRadius","5px"),this.layersDialog.style.position="fixed",this.layersDialog.style.fontFamily="Helvetica,Arial",this.layersDialog.style.backgroundColor="#000000",this.layersDialog.style.width="160px",this.layersDialog.style.padding="4px 2px 4px 2px",this.layersDialog.style.color="#ffffff",mxUtils.setOpacity(this.layersDialog,70),this.layersDialog.style.left=e.left+"px",this.layersDialog.style.bottom=parseInt(this.chromelessToolbar.style.bottom)+this.chromelessToolbar.offsetHeight+4+"px",e=mxUtils.getCurrentStyle(this.editor.graph.container),this.layersDialog.style.zIndex=e.zIndex,document.body.appendChild(this.layersDialog)),mxEvent.consume(t)}),Editor.layersLargeImage,mxResources.get("layers")),(u=c.getModel()).addListener(mxEvent.CHANGE,function(){d.style.display=1<u.getChildCount(u.root)?"":"none"})),"1"!=urlParams.openInSameWin&&this.addChromelessToolbarItems(m),null==this.editor.editButtonLink&&null==this.editor.editButtonFunc||m(mxUtils.bind(this,function(t){null!=this.editor.editButtonFunc?this.editor.editButtonFunc():"_blank"==this.editor.editButtonLink?this.editor.editAsNew(this.getEditBlankXml()):c.openLink(this.editor.editButtonLink,"editWindow"),mxEvent.consume(t)}),Editor.editLargeImage,mxResources.get("edit")),null!=this.lightboxToolbarActions)for(h=0;h<this.lightboxToolbarActions.length;h++){var C=this.lightboxToolbarActions[h];m(C.fn,C.icon,C.tooltip)}null!=p.refreshBtn&&m(mxUtils.bind(this,function(t){p.refreshBtn.url?window.location.href=p.refreshBtn.url:window.location.reload(),mxEvent.consume(t)}),Editor.refreshLargeImage,mxResources.get("refresh",null,"Refresh")),null!=p.fullscreenBtn&&window.self!==window.top&&m(mxUtils.bind(this,function(t){p.fullscreenBtn.url?c.openLink(p.fullscreenBtn.url):c.openLink(window.location.href),mxEvent.consume(t)}),Editor.fullscreenLargeImage,mxResources.get("openInNewWindow",null,"Open in New Window")),(p.closeBtn&&window.self===window.top||c.lightbox&&("1"==urlParams.close||this.container!=document.body))&&m(mxUtils.bind(this,function(t){"1"==urlParams.close||p.closeBtn?window.close():(this.destroy(),mxEvent.consume(t))}),Editor.closeLargeImage,mxResources.get("close")+" (Escape)"),this.chromelessToolbar.style.display="none",c.isViewer()||mxUtils.setPrefixedStyle(this.chromelessToolbar.style,"transform","translate(-50%,0)"),c.container.appendChild(this.chromelessToolbar),mxEvent.addListener(c.container,mxClient.IS_POINTER?"pointermove":"mousemove",mxUtils.bind(this,function(t){mxEvent.isTouchEvent(t)||(mxEvent.isShiftDown(t)||f(30),y())})),mxEvent.addListener(this.chromelessToolbar,mxClient.IS_POINTER?"pointermove":"mousemove",function(t){mxEvent.consume(t)}),mxEvent.addListener(this.chromelessToolbar,"mouseenter",mxUtils.bind(this,function(t){mxEvent.isShiftDown(t)?y():f(100)})),mxEvent.addListener(this.chromelessToolbar,"mousemove",mxUtils.bind(this,function(t){mxEvent.isShiftDown(t)?y():f(100),mxEvent.consume(t)})),mxEvent.addListener(this.chromelessToolbar,"mouseleave",mxUtils.bind(this,function(t){mxEvent.isTouchEvent(t)||f(30)}));var E=c.getTolerance();c.addMouseListener({startX:0,startY:0,scrollLeft:0,scrollTop:0,mouseDown:function(t,e){this.startX=e.getGraphX(),this.startY=e.getGraphY(),this.scrollLeft=c.container.scrollLeft,this.scrollTop=c.container.scrollTop},mouseMove:function(t,e){},mouseUp:function(t,e){mxEvent.isTouchEvent(e.getEvent())&&Math.abs(this.scrollLeft-c.container.scrollLeft)<E&&Math.abs(this.scrollTop-c.container.scrollTop)<E&&Math.abs(this.startX-e.getGraphX())<E&&Math.abs(this.startY-e.getGraphY())<E&&(0<parseFloat(r.chromelessToolbar.style.opacity||0)?y():f(30))}})}this.editor.editable||this.addChromelessClickHandler()}else this.editor.extendCanvas&&(n=c.view.validate,c.view.validate=function(){var t,e;null!=this.graph.container&&mxUtils.hasScrollbars(this.graph.container)&&(t=this.graph.getPagePadding(),e=this.graph.getPageSize(),this.translate.x=t.x-(this.x0||0)*e.width,this.translate.y=t.y-(this.y0||0)*e.height),n.apply(this,arguments)},c.isViewer()||(o=c.sizeDidChange,c.sizeDidChange=function(){var t,e,n,i,l,s;null!=this.container&&mxUtils.hasScrollbars(this.container)?(t=this.getPageLayout(),e=this.getPagePadding(),n=this.getPageSize(),i=Math.ceil(2*e.x+t.width*n.width),l=Math.ceil(2*e.y+t.height*n.height),null!=(s=c.minimumGraphSize)&&s.width==i&&s.height==l||(c.minimumGraphSize=new mxRectangle(0,0,i,l)),i=e.x-t.x*n.width,e=e.y-t.y*n.height,this.autoTranslate||this.view.translate.x==i&&this.view.translate.y==e?o.apply(this,arguments):(this.autoTranslate=!0,this.view.x0=t.x,this.view.y0=t.y,t=c.view.translate.x,n=c.view.translate.y,c.view.setTranslate(i,e),c.container.scrollLeft+=Math.round((i-t)*c.view.scale),c.container.scrollTop+=Math.round((e-n)*c.view.scale),this.autoTranslate=!1)):this.fireEvent(new mxEventObject(mxEvent.SIZE,"bounds",this.getGraphBounds()))}));function v(t){null!=w&&window.clearTimeout(w),window.setTimeout(function(){c.isMouseDown&&!L||(w=window.setTimeout(mxUtils.bind(this,function(){c.isFastZoomEnabled()&&(null!=c.view.backgroundPageShape&&null!=c.view.backgroundPageShape.node&&(mxUtils.setPrefixedStyle(c.view.backgroundPageShape.node.style,"transform-origin",null),mxUtils.setPrefixedStyle(c.view.backgroundPageShape.node.style,"transform",null)),b.style.transformOrigin="",S.style.transformOrigin="",mxClient.IS_SF?(b.style.transform="scale(1)",S.style.transform="scale(1)",window.setTimeout(function(){b.style.transform="",S.style.transform=""},0)):(b.style.transform="",S.style.transform=""),c.view.getDecoratorPane().style.opacity="",c.view.getOverlayPane().style.opacity="");var t=new mxPoint(c.container.scrollLeft,c.container.scrollTop),e=mxUtils.getOffset(c.container),n=c.view.scale,i=0,l=0;null!=T&&(i=c.container.offsetWidth/2-T.x+e.x,l=c.container.offsetHeight/2-T.y+e.y),c.zoom(c.cumulativeZoomFactor),c.view.scale!=n&&(null!=A&&(i+=t.x-A.x,l+=t.y-A.y),null!=s&&r.chromelessResize(!1,null,i*(c.cumulativeZoomFactor-1),l*(c.cumulativeZoomFactor-1)),!mxUtils.hasScrollbars(c.container)||0==i&&0==l||(c.container.scrollLeft-=i*(c.cumulativeZoomFactor-1),c.container.scrollTop-=l*(c.cumulativeZoomFactor-1))),null!=M&&b.setAttribute("filter",M),c.cumulativeZoomFactor=1,M=L=T=A=w=null}),null!=t?t:c.isFastZoomEnabled()?r.wheelZoomDelay:r.lazyZoomDelay))},0)}var S=c.view.getBackgroundPane(),b=c.view.getDrawPane(),w=(c.cumulativeZoomFactor=1,null),T=null,A=null,L=null,M=null,R=Date.now();c.lazyZoom=function(t,e,n){var i;(e=e||!c.scrollbars)&&(T=new mxPoint(c.container.offsetLeft+c.container.clientWidth/2,c.container.offsetTop+c.container.clientHeight/2)),Date.now()-R<15||(R=Date.now(),t?this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale+.05)/this.view.scale:(this.cumulativeZoomFactor*=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale):this.view.scale*this.cumulativeZoomFactor<=.15?this.cumulativeZoomFactor*=(this.view.scale-.05)/this.view.scale:(this.cumulativeZoomFactor/=this.zoomFactor,this.cumulativeZoomFactor=Math.round(this.view.scale*this.cumulativeZoomFactor*20)/20/this.view.scale),this.cumulativeZoomFactor=Math.max(.05,Math.min(this.view.scale*this.cumulativeZoomFactor,160))/this.view.scale,c.isFastZoomEnabled()&&(null==M&&""!=b.getAttribute("filter")&&(M=b.getAttribute("filter"),b.removeAttribute("filter")),A=new mxPoint(c.container.scrollLeft,c.container.scrollTop),t=e?c.container.scrollLeft+c.container.clientWidth/2:T.x+c.container.scrollLeft-c.container.offsetLeft,i=e?c.container.scrollTop+c.container.clientHeight/2:T.y+c.container.scrollTop-c.container.offsetTop,b.style.transformOrigin=t+"px "+i+"px",b.style.transform="scale("+this.cumulativeZoomFactor+")",S.style.transformOrigin=t+"px "+i+"px",S.style.transform="scale("+this.cumulativeZoomFactor+")",null!=c.view.backgroundPageShape&&null!=c.view.backgroundPageShape.node&&(t=c.view.backgroundPageShape.node,mxUtils.setPrefixedStyle(t.style,"transform-origin",(e?c.container.clientWidth/2+c.container.scrollLeft-t.offsetLeft+"px":T.x+c.container.scrollLeft-t.offsetLeft-c.container.offsetLeft+"px")+" "+(e?c.container.clientHeight/2+c.container.scrollTop-t.offsetTop+"px":T.y+c.container.scrollTop-t.offsetTop-c.container.offsetTop+"px")),mxUtils.setPrefixedStyle(t.style,"transform","scale("+this.cumulativeZoomFactor+")")),c.view.getDecoratorPane().style.opacity="0",c.view.getOverlayPane().style.opacity="0",null!=r.hoverIcons)&&r.hoverIcons.reset(),v(n))},mxEvent.addGestureListeners(c.container,function(t){null!=w&&window.clearTimeout(w)},null,function(t){1!=c.cumulativeZoomFactor&&v(0)}),mxEvent.addListener(c.container,"scroll",function(t){null==w||c.isMouseDown||1==c.cumulativeZoomFactor||v(0)}),mxEvent.addMouseWheelListener(mxUtils.bind(this,function(t,e,n,i,l){if(null==this.dialogs||0==this.dialogs.length)if(c.scrollbars||n||!c.isScrollWheelEvent(t)){if(n||c.isZoomWheelEvent(t))for(var s=mxEvent.getSource(t);null!=s;){if(s==c.container)return c.tooltipHandler.hideTooltip(),T=null!=i&&null!=l?new mxPoint(i,l):new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),L=n,c.lazyZoom(e),mxEvent.consume(t),!1;s=s.parentNode}}else n=c.view.getTranslate(),i=40/c.view.scale,mxEvent.isShiftDown(t)?c.view.setTranslate(n.x+(e?-i:i),n.y):c.view.setTranslate(n.x,n.y+(e?i:-i))}),c.container),c.panningHandler.zoomGraph=function(t){c.cumulativeZoomFactor=t.scale,c.lazyZoom(0<t.scale,!0),mxEvent.consume(t)}},EditorUi.prototype.addChromelessToolbarItems=function(t){t(mxUtils.bind(this,function(t){this.actions.get("print").funct(),mxEvent.consume(t)}),Editor.printLargeImage,mxResources.get("print"))},EditorUi.prototype.isPagesEnabled=function(){return this.editor.editable||"1"!=urlParams["hide-pages"]},EditorUi.prototype.createTemporaryGraph=function(t){var e=new Graph(document.createElement("div"));return e.stylesheet.styles=mxUtils.clone(t.styles),e.resetViewOnRootChange=!1,e.setConnectable(!1),e.gridEnabled=!1,e.autoScroll=!1,e.setTooltips(!1),e.setEnabled(!1),e.container.style.visibility="hidden",e.container.style.position="absolute",e.container.style.overflow="hidden",e.container.style.height="1px",e.container.style.width="1px",e},EditorUi.prototype.addChromelessClickHandler=function(){var t=urlParams.highlight;null!=t&&0<t.length&&(t="#"+t),this.editor.graph.addClickHandler(t)},EditorUi.prototype.toggleFormatPanel=function(t){t=null!=t?t:0==this.formatWidth,null!=this.format&&(this.formatWidth=t?240:0,this.formatContainer.style.display=t?"":"none",this.refresh(),this.format.refresh(),this.fireEvent(new mxEventObject("formatWidthChanged")))},EditorUi.prototype.lightboxFit=function(t){var e,n;this.isDiagramEmpty()?this.editor.graph.view.setScale(1):(n=60,null!=(e=urlParams.border)&&(n=parseInt(e)),this.editor.graph.maxFitScale=this.lightboxMaxFitScale,this.editor.graph.fit(n,null,null,null,null,null,t),this.editor.graph.maxFitScale=null)},EditorUi.prototype.isDiagramEmpty=function(){var t=this.editor.graph.getModel();return 1==t.getChildCount(t.root)&&0==t.getChildCount(t.getChildAt(t.root,0))},EditorUi.prototype.isSelectionAllowed=function(t){return"SELECT"==mxEvent.getSource(t).nodeName||"INPUT"==mxEvent.getSource(t).nodeName&&mxUtils.isAncestorNode(this.formatContainer,mxEvent.getSource(t))},EditorUi.prototype.addBeforeUnloadListener=function(){window.onbeforeunload=mxUtils.bind(this,function(){return this.onBeforeUnload()})},EditorUi.prototype.onBeforeUnload=function(){if(this.editor.modified)return mxResources.get("allChangesLost")},EditorUi.prototype.open=function(){try{null!=window.opener&&null!=window.opener.openFile&&window.opener.openFile.setConsumer(mxUtils.bind(this,function(t,e){try{var n=mxUtils.parseXml(t);this.editor.setGraphXml(n.documentElement),this.editor.setModified(!1),this.editor.undoManager.clear(),null!=e&&(this.editor.setFilename(e),this.updateDocumentTitle())}catch(t){mxUtils.alert(mxResources.get("invalidOrMissingFile")+": "+t.message)}}))}catch(t){}this.editor.graph.view.validate(),this.editor.graph.sizeDidChange(),this.editor.fireEvent(new mxEventObject("resetGraphView"))},EditorUi.prototype.showPopupMenu=function(t,e,n,i){this.editor.graph.popupMenuHandler.hideMenu();var l=new mxPopupMenu(t);l.div.className+=" geMenubarMenu",l.smartSeparators=!0,l.showDisabled=!0,l.autoExpand=!0,l.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(l,arguments),l.destroy()}),l.popup(e,n,null,i),this.setCurrentMenu(l)},EditorUi.prototype.setCurrentMenu=function(t,e){this.currentMenuElt=e,this.currentMenu=t},EditorUi.prototype.resetCurrentMenu=function(){this.currentMenu=this.currentMenuElt=null},EditorUi.prototype.hideCurrentMenu=function(){null!=this.currentMenu&&(this.currentMenu.hideMenu(),this.resetCurrentMenu())},EditorUi.prototype.updateDocumentTitle=function(){var t=this.editor.getOrCreateFilename();null!=this.editor.appName&&(t+=" - "+this.editor.appName),document.title=t},EditorUi.prototype.createHoverIcons=function(){return new HoverIcons(this.editor.graph)},EditorUi.prototype.redo=function(){try{this.editor.graph.isEditing()?document.execCommand("redo",!1,null):this.editor.undoManager.redo()}catch(t){}},EditorUi.prototype.undo=function(){try{var t,e=this.editor.graph;e.isEditing()?(t=e.cellEditor.textarea.innerHTML,document.execCommand("undo",!1,null),t==e.cellEditor.textarea.innerHTML&&(e.stopEditing(!0),this.editor.undoManager.undo())):this.editor.undoManager.undo()}catch(t){}},EditorUi.prototype.canRedo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canRedo()},EditorUi.prototype.canUndo=function(){return this.editor.graph.isEditing()||this.editor.undoManager.canUndo()},EditorUi.prototype.getEditBlankXml=function(){return mxUtils.getXml(this.editor.getGraphXml())},EditorUi.prototype.getUrl=function(t){var e,n=0<(t=null!=t?t:window.location.pathname).indexOf("?")?1:0;for(e in urlParams)t=0==n?t+"?":t+"&",t+=e+"="+urlParams[e],n++;return t},EditorUi.prototype.setScrollbars=function(t){var e=this.editor.graph,n=e.container.style.overflow;e.scrollbars=t,this.editor.updateGraphComponents(),n!=e.container.style.overflow&&(e.container.scrollTop=0,e.container.scrollLeft=0,e.view.scaleAndTranslate(1,0,0),this.resetScrollbars()),this.fireEvent(new mxEventObject("scrollbarsChanged"))},EditorUi.prototype.hasScrollbars=function(){return this.editor.graph.scrollbars},EditorUi.prototype.resetScrollbars=function(){var t,e,n,i=this.editor.graph;this.editor.extendCanvas?this.editor.isChromelessView()||(mxUtils.hasScrollbars(i.container)?i.pageVisible?(t=i.getPagePadding(),i.container.scrollTop=Math.floor(t.y-this.editor.initialTopSpacing)-1,i.container.scrollLeft=Math.floor(Math.min(t.x,(i.container.scrollWidth-i.container.clientWidth)/2))-1,0<(t=i.getGraphBounds()).width&&0<t.height&&(t.x>i.container.scrollLeft+.9*i.container.clientWidth&&(i.container.scrollLeft=Math.min(t.x+t.width-i.container.clientWidth,t.x-10)),t.y>i.container.scrollTop+.9*i.container.clientHeight)&&(i.container.scrollTop=Math.min(t.y+t.height-i.container.clientHeight,t.y-10))):(t=i.getGraphBounds(),e=Math.max(t.width,i.scrollTileSize.width*i.view.scale),i.container.scrollTop=Math.floor(Math.max(0,t.y-Math.max(20,(i.container.clientHeight-Math.max(t.height,i.scrollTileSize.height*i.view.scale))/4))),i.container.scrollLeft=Math.floor(Math.max(0,t.x-Math.max(0,(i.container.clientWidth-e)/2)))):(t=mxRectangle.fromRectangle(i.pageVisible?i.view.getBackgroundPageBounds():i.getGraphBounds()),e=i.view.translate,n=i.view.scale,t.x=t.x/n-e.x,t.y=t.y/n-e.y,t.width/=n,t.height/=n,i.view.setTranslate(Math.floor(Math.max(0,(i.container.clientWidth-t.width)/2)-t.x+2),Math.floor((i.pageVisible?0:Math.max(0,(i.container.clientHeight-t.height)/4))-t.y+1)))):(i.container.scrollTop=0,i.container.scrollLeft=0,mxUtils.hasScrollbars(i.container)||i.view.setTranslate(0,0))},EditorUi.prototype.setPageVisible=function(t){var e=this.editor.graph,n=mxUtils.hasScrollbars(e.container),i=0,l=0;n&&(i=e.view.translate.x*e.view.scale-e.container.scrollLeft,l=e.view.translate.y*e.view.scale-e.container.scrollTop),e.pageVisible=t,e.pageBreaksVisible=t,e.preferPageSize=t,e.view.validateBackground(),n&&(t=e.getSelectionCells(),e.clearSelection(),e.setSelectionCells(t)),e.sizeDidChange(),n&&(e.container.scrollLeft=e.view.translate.x*e.view.scale-i,e.container.scrollTop=e.view.translate.y*e.view.scale-l),this.fireEvent(new mxEventObject("pageViewChanged"))},ChangeGridColor.prototype.execute=function(){var t=this.ui.editor.graph.view.gridColor;this.ui.setGridColor(this.color),this.color=t},!function(){var t=new mxObjectCodec(new ChangeGridColor,["ui"]);mxCodecRegistry.register(t)}(),ChangePageSetup.prototype.execute=function(){var t,e=this.ui.editor.graph;this.ignoreColor||(this.color=this.previousColor,t=e.background,this.ui.setBackgroundColor(this.previousColor),this.previousColor=t),this.ignoreImage||(this.image=this.previousImage,t=e.backgroundImage,this.ui.setBackgroundImage(this.previousImage),this.previousImage=t),null!=this.previousFormat&&(this.format=this.previousFormat,t=e.pageFormat,this.previousFormat.width!=t.width||this.previousFormat.height!=t.height)&&(this.ui.setPageFormat(this.previousFormat),this.previousFormat=t),null!=this.foldingEnabled&&this.foldingEnabled!=this.ui.editor.graph.foldingEnabled&&(this.ui.setFoldingEnabled(this.foldingEnabled),this.foldingEnabled=!this.foldingEnabled),null!=this.previousPageScale&&(e=this.ui.editor.graph.pageScale,this.previousPageScale!=e)&&(this.ui.setPageScale(this.previousPageScale),this.previousPageScale=e)},!function(){var t=new mxObjectCodec(new ChangePageSetup,["ui","previousColor","previousImage","previousFormat","previousPageScale"]);t.afterDecode=function(t,e,n){return n.previousColor=n.color,n.previousImage=n.image,n.previousFormat=n.format,n.previousPageScale=n.pageScale,null!=n.foldingEnabled&&(n.foldingEnabled=!n.foldingEnabled),n},mxCodecRegistry.register(t)}(),EditorUi.prototype.setBackgroundColor=function(t){this.editor.graph.background=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("backgroundColorChanged"))},EditorUi.prototype.setFoldingEnabled=function(t){this.editor.graph.foldingEnabled=t,this.editor.graph.view.revalidate(),this.fireEvent(new mxEventObject("foldingEnabledChanged"))},EditorUi.prototype.setPageFormat=function(t){this.editor.graph.pageFormat=t,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject("pageFormatChanged"))},EditorUi.prototype.setPageScale=function(t){this.editor.graph.pageScale=t,this.editor.graph.pageVisible?(this.editor.graph.view.validateBackground(),this.editor.graph.sizeDidChange()):this.actions.get("pageView").funct(),this.fireEvent(new mxEventObject("pageScaleChanged"))},EditorUi.prototype.setGridColor=function(t){this.editor.graph.view.gridColor=t,this.editor.graph.view.validateBackground(),this.fireEvent(new mxEventObject("gridColorChanged"))},EditorUi.prototype.addUndoListener=function(){var t=this.actions.get("undo"),e=this.actions.get("redo"),n=this.editor.undoManager,i=mxUtils.bind(this,function(){t.setEnabled(this.canUndo()),e.setEnabled(this.canRedo())}),l=(n.addListener(mxEvent.ADD,i),n.addListener(mxEvent.UNDO,i),n.addListener(mxEvent.REDO,i),n.addListener(mxEvent.CLEAR,i),this.editor.graph.cellEditor.startEditing),s=(this.editor.graph.cellEditor.startEditing=function(){l.apply(this,arguments),i()},this.editor.graph.cellEditor.stopEditing);this.editor.graph.cellEditor.stopEditing=function(t,e){s.apply(this,arguments),i()},i()},EditorUi.prototype.updateActionStates=function(){var t=this.editor.graph,e=!t.isSelectionEmpty(),n=!1,i=!1,l=!1,s=t.getSelectionCells();if(null!=s)for(var o=0;o<s.length;o++){var r=s[o];if(t.getModel().isEdge(r)&&(l=!0),t.getModel().isVertex(r)&&(n=!0,0<t.getModel().getChildCount(r)||t.isContainer(r))&&(i=!0),l&&n)break}for(s="cut copy bold italic underline delete duplicate editStyle editTooltip editLink backgroundColor borderColor edit toFront toBack lockUnlock solid dashed pasteSize dotted fillColor gradientColor shadow fontColor formattedText rounded toggleRounded sharp strokeColor".split(" "),o=0;o<s.length;o++)this.actions.get(s[o]).setEnabled(e);this.actions.get("setAsDefaultStyle").setEnabled(1==t.getSelectionCount()),this.actions.get("clearWaypoints").setEnabled(!t.isSelectionEmpty()),this.actions.get("copySize").setEnabled(1==t.getSelectionCount()),this.actions.get("turn").setEnabled(!t.isSelectionEmpty()),this.actions.get("curved").setEnabled(l),this.actions.get("rotation").setEnabled(n),this.actions.get("wordWrap").setEnabled(n),this.actions.get("autosize").setEnabled(n),l=n&&1==t.getSelectionCount(),this.actions.get("group").setEnabled(1<t.getSelectionCount()||l&&!t.isContainer(t.getSelectionCell())),this.actions.get("ungroup").setEnabled(i),this.actions.get("removeFromGroup").setEnabled(l&&t.getModel().isVertex(t.getModel().getParent(t.getSelectionCell()))),t.view.getState(t.getSelectionCell()),this.menus.get("navigation").setEnabled(e||null!=t.view.currentRoot),this.actions.get("collapsible").setEnabled(n&&(t.isContainer(t.getSelectionCell())||0<t.model.getChildCount(t.getSelectionCell()))),this.actions.get("home").setEnabled(null!=t.view.currentRoot),this.actions.get("exitGroup").setEnabled(null!=t.view.currentRoot),this.actions.get("enterGroup").setEnabled(1==t.getSelectionCount()&&t.isValidRoot(t.getSelectionCell())),e=1==t.getSelectionCount()&&t.isCellFoldable(t.getSelectionCell()),this.actions.get("expand").setEnabled(e),this.actions.get("collapse").setEnabled(e),this.actions.get("editLink").setEnabled(1==t.getSelectionCount()),this.actions.get("openLink").setEnabled(1==t.getSelectionCount()&&null!=t.getLinkForCell(t.getSelectionCell())),this.actions.get("guides").setEnabled(t.isEnabled()),this.actions.get("grid").setEnabled(!this.editor.chromeless||this.editor.editable),e=t.isEnabled()&&!t.isCellLocked(t.getDefaultParent()),this.menus.get("layout").setEnabled(e),this.menus.get("insert").setEnabled(e),this.menus.get("direction").setEnabled(e&&n),this.menus.get("align").setEnabled(e&&n&&1<t.getSelectionCount()),this.menus.get("distribute").setEnabled(e&&n&&1<t.getSelectionCount()),this.actions.get("selectVertices").setEnabled(e),this.actions.get("selectEdges").setEnabled(e),this.actions.get("selectAll").setEnabled(e),this.actions.get("selectNone").setEnabled(e),this.updatePasteActionStates()},EditorUi.prototype.zeroOffset=new mxPoint(0,0),EditorUi.prototype.getDiagramContainerOffset=function(){return this.zeroOffset},EditorUi.prototype.refresh=function(t){t=null==t||t;var e,n=this.container.clientWidth,i=this.container.clientHeight,l=(this.container==document.body&&(n=document.body.clientWidth||document.documentElement.clientWidth,i=document.documentElement.clientHeight),0),s=(mxClient.IS_IOS&&!window.navigator.standalone&&window.innerHeight!=document.documentElement.clientHeight&&(l=document.documentElement.clientHeight-window.innerHeight,window.scrollTo(0,0)),Math.max(0,Math.min(this.hsplitPosition,n-this.splitSize-20))),o=0,r=(null!=this.menubar&&(this.menubarContainer.style.height=this.menubarHeight+"px",o+=this.menubarHeight),null!=this.toolbar&&(this.toolbarContainer.style.top=this.menubarHeight+"px",this.toolbarContainer.style.height=this.toolbarHeight+"px",o+=this.toolbarHeight),0<o&&(o+=1),n=0,null!=this.sidebarFooterContainer&&(e=this.footerHeight+l,n=Math.max(0,Math.min(i-o-e,this.sidebarFooterHeight)),this.sidebarFooterContainer.style.width=s+"px",this.sidebarFooterContainer.style.height=n+"px",this.sidebarFooterContainer.style.bottom=e+"px"),i=null!=this.format?this.formatWidth:0,this.sidebarContainer.style.top=o+"px",this.sidebarContainer.style.width=s+"px",this.formatContainer.style.top=o+"px",this.formatContainer.style.width=i+"px",this.formatContainer.style.display=null!=this.format?"":"none",e=this.getDiagramContainerOffset(),null!=this.hsplit.parentNode?s+this.splitSize:0);this.diagramContainer.style.left=r+e.x+"px",this.diagramContainer.style.top=o+e.y+"px",this.footerContainer.style.height=this.footerHeight+"px",this.hsplit.style.top=this.sidebarContainer.style.top,this.hsplit.style.bottom=this.footerHeight+l+"px",this.hsplit.style.left=s+"px",this.footerContainer.style.display=0==this.footerHeight?"none":"",null!=this.tabContainer&&(this.tabContainer.style.left=r+"px"),0<this.footerHeight&&(this.footerContainer.style.bottom=l+"px"),this.diagramContainer.style.right=i+"px",s=0,null!=this.tabContainer&&(this.tabContainer.style.bottom=this.footerHeight+l+"px",this.tabContainer.style.right=this.diagramContainer.style.right,s=this.tabContainer.clientHeight),this.sidebarContainer.style.bottom=this.footerHeight+n+l+"px",this.formatContainer.style.bottom=this.footerHeight+l+"px",this.diagramContainer.style.bottom=this.footerHeight+l+s+"px",t&&this.editor.graph.sizeDidChange()},EditorUi.prototype.createTabContainer=function(){return null},EditorUi.prototype.createDivs=function(){this.menubarContainer=this.createDiv("geMenubarContainer"),this.toolbarContainer=this.createDiv("geToolbarContainer"),this.sidebarContainer=this.createDiv("geSidebarContainer"),this.formatContainer=this.createDiv("geSidebarContainer geFormatContainer"),this.diagramContainer=this.createDiv("geDiagramContainer"),this.footerContainer=this.createDiv("geFooterContainer"),this.hsplit=this.createDiv("geHsplit"),this.hsplit.setAttribute("title",mxResources.get("collapseExpand")),this.menubarContainer.style.top="0px",this.menubarContainer.style.left="0px",this.menubarContainer.style.right="0px",this.toolbarContainer.style.left="0px",this.toolbarContainer.style.right="0px",this.sidebarContainer.style.left="0px",this.formatContainer.style.right="0px",this.formatContainer.style.zIndex="1",this.diagramContainer.style.right=(null!=this.format?this.formatWidth:0)+"px",this.footerContainer.style.left="0px",this.footerContainer.style.right="0px",this.footerContainer.style.bottom="0px",this.footerContainer.style.zIndex=mxPopupMenu.prototype.zIndex-2,this.hsplit.style.width=this.splitSize+"px",(this.sidebarFooterContainer=this.createSidebarFooterContainer())&&(this.sidebarFooterContainer.style.left="0px"),this.editor.chromeless?this.diagramContainer.style.border="none":this.tabContainer=this.createTabContainer()},EditorUi.prototype.createSidebarFooterContainer=function(){return null},EditorUi.prototype.createUi=function(){this.menubar=this.editor.chromeless?null:this.menus.createMenubar(this.createDiv("geMenubar")),null!=this.menubar&&this.menubarContainer.appendChild(this.menubar.container),null!=this.menubar&&(this.statusContainer=this.createStatusContainer(),this.editor.addListener("statusChanged",mxUtils.bind(this,function(){this.setStatusText(this.editor.getStatus())})),this.setStatusText(this.editor.getStatus()),this.menubar.container.appendChild(this.statusContainer),this.container.appendChild(this.menubarContainer)),this.sidebar=this.editor.chromeless?null:this.createSidebar(this.sidebarContainer),null!=this.sidebar&&this.container.appendChild(this.sidebarContainer),this.format=this.editor.chromeless||!this.formatEnabled?null:this.createFormat(this.formatContainer),null!=this.format&&this.container.appendChild(this.formatContainer);var t=this.editor.chromeless?null:this.createFooter();null!=t&&(this.footerContainer.appendChild(t),this.container.appendChild(this.footerContainer)),null!=this.sidebar&&this.sidebarFooterContainer&&this.container.appendChild(this.sidebarFooterContainer),this.container.appendChild(this.diagramContainer),null!=this.container&&null!=this.tabContainer&&this.container.appendChild(this.tabContainer),this.toolbar=this.editor.chromeless?null:this.createToolbar(this.createDiv("geToolbar")),null!=this.toolbar&&(this.toolbarContainer.appendChild(this.toolbar.container),this.container.appendChild(this.toolbarContainer)),null!=this.sidebar&&(this.container.appendChild(this.hsplit),this.addSplitHandler(this.hsplit,!0,0,mxUtils.bind(this,function(t){this.hsplitPosition=t,this.refresh()})))},EditorUi.prototype.createStatusContainer=function(){var t=document.createElement("a");return t.className="geItem geStatus",t},EditorUi.prototype.setStatusText=function(t){this.statusContainer.innerHTML=t},EditorUi.prototype.createToolbar=function(t){return new Toolbar(this,t)},EditorUi.prototype.createSidebar=function(t){return new Sidebar(this,t)},EditorUi.prototype.createFormat=function(t){return new Format(this,t)},EditorUi.prototype.createFooter=function(){return this.createDiv("geFooter")},EditorUi.prototype.createDiv=function(t){var e=document.createElement("div");return e.className=t,e},EditorUi.prototype.addSplitHandler=function(e,n,i,l){function s(t){var e;null!=o&&(e=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),l(Math.max(0,r+(n?e.x-o.x:o.y-e.y)-i)),mxEvent.consume(t),r!=d())&&(a=!0,h=null)}function t(t){s(t),o=r=null}var o=null,r=null,a=!0,h=null,d=(mxClient.IS_POINTER&&(e.style.touchAction="none"),mxUtils.bind(this,function(){var t=parseInt(n?e.style.left:e.style.bottom);return t=n?t:t+i-this.footerHeight}));mxEvent.addGestureListeners(e,function(t){o=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),r=d(),a=!1,mxEvent.consume(t)}),mxEvent.addListener(e,"click",mxUtils.bind(this,function(t){var e;!a&&this.hsplitClickEnabled&&(e=null!=h?h-i:0,h=d(),l(e),mxEvent.consume(t))})),mxEvent.addGestureListeners(document,null,s,t),this.destroyFunctions.push(function(){mxEvent.removeGestureListeners(document,null,s,t)})},EditorUi.prototype.handleError=function(t,e,n,i,l){var s;null!=(t=null!=t&&null!=t.error?t.error:t)||null!=e?(l=mxUtils.htmlEntities(mxResources.get("unknownError")),s=mxResources.get("ok"),e=null!=e?e:mxResources.get("error"),null!=t&&null!=t.message&&(l=mxUtils.htmlEntities(t.message)),this.showError(e,l,s,n,null,null,null,null,null,null,null,null,i?n:null)):null!=n&&n()},EditorUi.prototype.showError=function(t,e,n,i,l,s,o,r,a,h,d,u,p){t=new ErrorDialog(this,t,e,n||mxResources.get("ok"),i,l,s,o,u,r,a),e=Math.ceil(null!=e?e.length/50:1),this.showDialog(t.container,h||340,d||100+20*e,!0,!1,p),t.init()},EditorUi.prototype.showDialog=function(t,e,n,i,l,s,o,r,a,h){this.editor.graph.tooltipHandler.resetTimer(),this.editor.graph.tooltipHandler.hideTooltip(),null==this.dialogs&&(this.dialogs=[]),this.dialog=new Dialog(this,t,e,n,i,l,s,o,r,a,h),this.dialogs.push(this.dialog)},EditorUi.prototype.hideDialog=function(t,e,n){null!=this.dialogs&&0<this.dialogs.length&&(null==n||n==this.dialog.container.firstChild)&&(0==(n=this.dialogs.pop()).close(t,e)?this.dialogs.push(n):(this.dialog=0<this.dialogs.length?this.dialogs[this.dialogs.length-1]:null,this.editor.fireEvent(new mxEventObject("hideDialog")),null==this.dialog&&"hidden"!=this.editor.graph.container.style.visibility&&window.setTimeout(mxUtils.bind(this,function(){(this.editor.graph.isEditing()&&null!=this.editor.graph.cellEditor.textarea?this.editor.graph.cellEditor.textarea:(mxUtils.clearSelection(),this.editor.graph.container)).focus()}),0)))},EditorUi.prototype.ctrlEnter=function(){var t=this.editor.graph;if(t.isEnabled())try{for(var e=t.getSelectionCells(),n=new mxDictionary,i=[],l=0;l<e.length;l++){var s=t.isTableCell(e[l])?t.model.getParent(e[l]):e[l];null==s||n.get(s)||(n.put(s,!0),i.push(s))}t.setSelectionCells(t.duplicateCells(i,!1))}catch(t){this.handleError(t)}},EditorUi.prototype.pickColor=function(t,e){var n=this.editor.graph,i=n.cellEditor.saveSelection(),l=230+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12));t=new ColorDialog(this,t||"none",function(t){n.cellEditor.restoreSelection(i),e(t)},function(){n.cellEditor.restoreSelection(i)}),this.showDialog(t.container,230,l,!0,!1),t.init()},EditorUi.prototype.openFile=function(){window.openFile=new OpenFile(mxUtils.bind(this,function(t){this.hideDialog(t)})),this.showDialog(new OpenDialog(this).container,Editor.useLocalStorage?640:320,Editor.useLocalStorage?480:220,!0,!0,function(){window.openFile=null})},EditorUi.prototype.extractGraphModelFromHtml=function(t){var e=null;try{var n,i=t.indexOf("&lt;mxGraphModel ");0<=i&&i<(n=t.lastIndexOf("&lt;/mxGraphModel&gt;"))&&(e=t.substring(i,n+21).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/\\&quot;/g,'"').replace(/\n/g,""))}catch(t){}return e},EditorUi.prototype.readGraphModelFromClipboard=function(n){this.readGraphModelFromClipboardWithType(mxUtils.bind(this,function(t){null!=t?n(t):this.readGraphModelFromClipboardWithType(mxUtils.bind(this,function(t){var e;null!=t&&(e=decodeURIComponent(t),this.isCompatibleString(e))&&(t=e),n(t)}),"text")}),"html")},EditorUi.prototype.readGraphModelFromClipboardWithType=function(o,e){navigator.clipboard.read().then(mxUtils.bind(this,function(t){null!=t&&0<t.length&&"html"==e&&0<=mxUtils.indexOf(t[0].types,"text/html")?t[0].getType("text/html").then(mxUtils.bind(this,function(t){t.text().then(mxUtils.bind(this,function(t){try{var e=this.parseHtmlData(t),n="text/plain"!=e.getAttribute("data-type")?e.innerHTML:mxUtils.trim(null==e.innerText?mxUtils.getTextContent(e):e.innerText);try{var i=n.lastIndexOf("%3E");0<=i&&i<n.length-3&&(n=n.substring(0,i+3))}catch(t){}try{var l=e.getElementsByTagName("span"),s=null!=l&&0<l.length?mxUtils.trim(decodeURIComponent(l[0].textContent)):decodeURIComponent(n);this.isCompatibleString(s)&&(n=s)}catch(t){}}catch(t){}o(this.isCompatibleString(n)?n:null)})).catch(function(t){o(null)})})).catch(function(t){o(null)}):null!=t&&0<t.length&&"text"==e&&0<=mxUtils.indexOf(t[0].types,"text/plain")?t[0].getType("text/plain").then(function(t){t.text().then(function(t){o(t)}).catch(function(){o(null)})}).catch(function(){o(null)}):o(null)})).catch(function(t){o(null)})},EditorUi.prototype.parseHtmlData=function(t){var e=null;if(null!=t&&0<t.length){var n="<meta "==t.substring(0,6);if((e=document.createElement("div")).innerHTML=(n?'<meta charset="utf-8">':"")+this.editor.graph.sanitizeHtml(t),asHtml=!0,null!=(t=e.getElementsByTagName("style")))for(;0<t.length;)t[0].parentNode.removeChild(t[0]);null!=e.firstChild&&e.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=e.firstChild.nextSibling&&e.firstChild.nextSibling.nodeType==mxConstants.NODETYPE_ELEMENT&&"META"==e.firstChild.nodeName&&"A"==e.firstChild.nextSibling.nodeName&&null==e.firstChild.nextSibling.nextSibling&&(t=null==e.firstChild.nextSibling.innerText?mxUtils.getTextContent(e.firstChild.nextSibling):e.firstChild.nextSibling.innerText)==e.firstChild.nextSibling.getAttribute("href")&&(mxUtils.setTextContent(e,t),asHtml=!1),null!=(n=n&&null!=e.firstChild?e.firstChild.nextSibling:e.firstChild)&&null==n.nextSibling&&n.nodeType==mxConstants.NODETYPE_ELEMENT&&"IMG"==n.nodeName?null!=(t=n.getAttribute("src"))&&("data:image/png;base64,"==t.substring(0,22)&&null!=(n=this.extractGraphModelFromPng(t))&&0<n.length&&(t=n),mxUtils.setTextContent(e,t),asHtml=!1):1==(n=e.getElementsByTagName("img")).length&&null!=(t=(n=n[0]).getAttribute("src"))&&n.parentNode==e&&1==e.children.length&&("data:image/png;base64,"==t.substring(0,22)&&null!=(n=this.extractGraphModelFromPng(t))&&0<n.length&&(t=n),mxUtils.setTextContent(e,t),asHtml=!1),asHtml&&Graph.removePasteFormatting(e)}return asHtml||e.setAttribute("data-type","text/plain"),e},EditorUi.prototype.extractGraphModelFromEvent=function(t){var e=null,n=null;return e=null!=(n=null!=t&&null!=(t=null!=t.dataTransfer?t.dataTransfer:t.clipboardData)&&(10==document.documentMode||11==document.documentMode?n=t.getData("Text"):(n=0<=mxUtils.indexOf(t.types,"text/html")?t.getData("text/html"):null,mxUtils.indexOf(t.types,null==n||0==n.length)&&(n=t.getData("text/plain"))),null!=n)&&(n=Graph.zapGremlins(mxUtils.trim(n)),null!=(t=this.extractGraphModelFromHtml(n)))?t:n)&&this.isCompatibleString(n)?n:e},EditorUi.prototype.isCompatibleString=function(t){return!1},EditorUi.prototype.saveFile=function(t){t||null==this.editor.filename?(t=new FilenameDialog(this,this.editor.getOrCreateFilename(),mxResources.get("save"),mxUtils.bind(this,function(t){this.save(t)}),null,mxUtils.bind(this,function(t){return null!=t&&0<t.length||(mxUtils.confirm(mxResources.get("invalidName")),!1)})),this.showDialog(t.container,300,100,!0,!0),t.init()):this.save(this.editor.getOrCreateFilename())},EditorUi.prototype.save=function(t){if(null!=t){this.editor.graph.isEditing()&&this.editor.graph.stopEditing();var e=mxUtils.getXml(this.editor.getGraphXml());try{if(Editor.useLocalStorage){if(null!=localStorage.getItem(t)&&!mxUtils.confirm(mxResources.get("replaceIt",[t])))return;localStorage.setItem(t,e),this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("saved"))+" "+new Date)}else{if(!(e.length<MAX_REQUEST_SIZE))return mxUtils.alert(mxResources.get("drawingTooLarge")),void mxUtils.popup(e);new mxXmlRequest(SAVE_URL,"filename="+encodeURIComponent(t)+"&xml="+encodeURIComponent(e)).simulate(document,"_blank")}this.editor.setModified(!1),this.editor.setFilename(t),this.updateDocumentTitle()}catch(t){this.editor.setStatus(mxUtils.htmlEntities(mxResources.get("errorSavingFile")))}}},EditorUi.prototype.executeLayout=function(t,e,n){var i=this.editor.graph;if(i.isEnabled()){i.getModel().beginUpdate();try{t()}catch(t){throw t}finally{this.allowAnimation&&e&&(null==navigator.userAgent||navigator.userAgent.indexOf("Camino")<0)?((t=new mxMorphing(i)).addListener(mxEvent.DONE,mxUtils.bind(this,function(){i.getModel().endUpdate(),null!=n&&n()})),t.startAnimation()):(i.getModel().endUpdate(),null!=n&&n())}}},EditorUi.prototype.showImageDialog=function(t,e,n,i){var l,s=(i=this.editor.graph.cellEditor).saveSelection(),o=mxUtils.prompt(t,e);i.restoreSelection(s),null!=o&&0<o.length?((l=new Image).onload=function(){n(o,l.width,l.height)},l.onerror=function(){n(null),mxUtils.alert(mxResources.get("fileNotFound"))},l.src=o):n(null)},EditorUi.prototype.showLinkDialog=function(t,e,n){t=new LinkDialog(this,t,e,n),this.showDialog(t.container,420,90,!0,!0),t.init()},EditorUi.prototype.showDataDialog=function(t){null!=t&&(t=new EditDataDialog(this,t),this.showDialog(t.container,480,420,!0,!1,null,!1),t.init())},EditorUi.prototype.showBackgroundImageDialog=function(t,e){t=null!=t?t:mxUtils.bind(this,function(t){(t=new ChangePageSetup(this,null,t)).ignoreColor=!0,this.editor.graph.model.execute(t)});var n=mxUtils.prompt(mxResources.get("backgroundImage"),null!=e?e.src:"");null!=n&&0<n.length?((e=new Image).onload=function(){t(new mxImage(n,e.width,e.height),!1)},e.onerror=function(){t(null,!0),mxUtils.alert(mxResources.get("fileNotFound"))},e.src=n):t(null)},EditorUi.prototype.setBackgroundImage=function(t){this.editor.graph.setBackgroundImage(t),this.editor.graph.view.validateBackgroundImage(),this.fireEvent(new mxEventObject("backgroundImageChanged"))},EditorUi.prototype.confirm=function(t,e,n){mxUtils.confirm(t)?null!=e&&e():null!=n&&n()},EditorUi.prototype.createOutline=function(t){var e=new mxOutline(this.editor.graph);return e.border=20,mxEvent.addListener(window,"resize",function(){e.update()}),this.addListener("pageFormatChanged",function(){e.update()}),e},EditorUi.prototype.altShiftActions={67:"clearWaypoints",65:"connectionArrows",76:"editLink",80:"connectionPoints",84:"editTooltip",86:"pasteSize",88:"copySize",66:"copyData",69:"pasteData"},EditorUi.prototype.createKeyHandler=function(t){function n(l,s,o){a.push(function(){if(!r.isSelectionEmpty()&&r.isEnabled())if(s=null!=s?s:1,o){r.getModel().beginUpdate();try{for(var t=r.getSelectionCells(),e=0;e<t.length;e++)r.getModel().isVertex(t[e])&&r.isCellResizable(t[e])&&null!=(i=r.getCellGeometry(t[e]))&&(i=i.clone(),37==l?i.width=Math.max(0,i.width-s):38==l?i.height=Math.max(0,i.height-s):39==l?i.width+=s:40==l&&(i.height+=s),r.getModel().setGeometry(t[e],i))}finally{r.getModel().endUpdate()}}else{var n=r.getSelectionCell(),i=r.model.getParent(n),t=null;if(null!=(t=1==r.getSelectionCount()&&r.model.isVertex(n)&&null!=r.layoutManager&&!r.isCellLocked(n)?r.layoutManager.getLayout(i):t)&&t.constructor==mxStackLayout)t=i.getIndex(n),37==l||38==l?r.model.add(i,n,Math.max(0,t-1)):39!=l&&40!=l||r.model.add(i,n,Math.min(r.model.getChildCount(i),t+1));else{for(t=r.getMovableCells(r.getSelectionCells()),n=[],e=0;e<t.length;e++)i=r.getCurrentCellStyle(t[e]),"1"==mxUtils.getValue(i,"part","0")?(i=r.model.getParent(t[e]),r.model.isVertex(i)&&mxUtils.indexOf(t,i)<0&&n.push(i)):n.push(t[e]);0<n.length&&(t=i=0,37==l?i=-s:38==l?t=-s:39==l?i=s:40==l&&(t=s),r.moveCells(n,i,t))}}}),null!=h&&window.clearTimeout(h),h=window.setTimeout(function(){if(0<a.length){r.getModel().beginUpdate();try{for(var t=0;t<a.length;t++)a[t]();a=[]}finally{r.getModel().endUpdate()}}},200)}var i=this,r=this.editor.graph,s=new mxKeyHandler(r),e=s.isEventIgnored,a=(s.isEventIgnored=function(t){return!(mxEvent.isShiftDown(t)&&9==t.keyCode)&&(!this.isControlDown(t)||mxEvent.isShiftDown(t)||90!=t.keyCode&&89!=t.keyCode&&188!=t.keyCode&&190!=t.keyCode&&85!=t.keyCode)&&(66!=t.keyCode&&73!=t.keyCode||!this.isControlDown(t)||this.graph.cellEditor.isContentEditing()&&!mxClient.IS_FF&&!mxClient.IS_SF)&&e.apply(this,arguments)},s.isEnabledForEvent=function(t){return!mxEvent.isConsumed(t)&&this.isGraphEvent(t)&&this.isEnabled()&&(null==i.dialogs||0==i.dialogs.length)},s.isControlDown=function(t){return mxEvent.isControlDown(t)||mxClient.IS_MAC&&t.metaKey},[]),h=null,l={37:mxConstants.DIRECTION_WEST,38:mxConstants.DIRECTION_NORTH,39:mxConstants.DIRECTION_EAST,40:mxConstants.DIRECTION_SOUTH},o=s.getFunction,d=(mxKeyHandler.prototype.getFunction=function(e){if(r.isEnabled()){if(mxEvent.isShiftDown(e)&&mxEvent.isAltDown(e)){var t=i.actions.get(i.altShiftActions[e.keyCode]);if(null!=t)return t.funct}if(9==e.keyCode&&mxEvent.isAltDown(e))return r.cellEditor.isContentEditing()?function(){document.execCommand("outdent",!1,null)}:mxEvent.isShiftDown(e)?function(){r.selectParentCell()}:function(){r.selectChildCell()};if(null!=l[e.keyCode]&&!r.isSelectionEmpty()){if(this.isControlDown(e)||!mxEvent.isShiftDown(e)||!mxEvent.isAltDown(e))return this.isControlDown(e)?function(){n(e.keyCode,mxEvent.isShiftDown(e)?r.gridSize:null,!0)}:function(){n(e.keyCode,mxEvent.isShiftDown(e)?r.gridSize:null)};if(r.model.isVertex(r.getSelectionCell()))return function(){var t=r.connectVertex(r.getSelectionCell(),l[e.keyCode],r.defaultEdgeLength,e,!0);null!=t&&0<t.length&&(1==t.length&&r.model.isEdge(t[0])?r.setSelectionCell(r.model.getTerminal(t[0],!1)):r.setSelectionCell(t[t.length-1]),r.scrollCellToVisible(r.getSelectionCell()),null!=i.hoverIcons)&&i.hoverIcons.update(r.view.getState(r.getSelectionCell()))}}}return o.apply(this,arguments)},s.bindAction=mxUtils.bind(this,function(t,e,n,i){var l=this.actions.get(n);null!=l&&(n=function(){l.isEnabled()&&l.funct()},e?i?s.bindControlShiftKey(t,n):s.bindControlKey(t,n):i?s.bindShiftKey(t,n):s.bindKey(t,n))}),this),u=s.escape;return s.escape=function(t){u.apply(this,arguments)},s.enter=function(){},s.bindControlShiftKey(36,function(){r.exitGroup()}),s.bindControlShiftKey(35,function(){r.enterGroup()}),s.bindShiftKey(36,function(){r.home()}),s.bindKey(35,function(){r.refresh()}),s.bindAction(107,!0,"zoomIn"),s.bindAction(109,!0,"zoomOut"),s.bindAction(80,!0,"print"),s.bindAction(79,!0,"outline",!0),this.editor.chromeless&&!this.editor.editable||(s.bindControlKey(36,function(){r.isEnabled()&&r.foldCells(!0)}),s.bindControlKey(35,function(){r.isEnabled()&&r.foldCells(!1)}),s.bindControlKey(13,function(){d.ctrlEnter()}),s.bindAction(8,!1,"delete"),s.bindAction(8,!0,"deleteAll"),s.bindAction(8,!1,"deleteLabels",!0),s.bindAction(46,!1,"delete"),s.bindAction(46,!0,"deleteAll"),s.bindAction(46,!1,"deleteLabels",!0),s.bindAction(36,!1,"resetView"),s.bindAction(72,!0,"fitWindow",!0),s.bindAction(74,!0,"fitPage"),s.bindAction(74,!0,"fitTwoPages",!0),s.bindAction(48,!0,"customZoom"),s.bindAction(82,!0,"turn"),s.bindAction(82,!0,"clearDefaultStyle",!0),s.bindAction(83,!0,"save"),s.bindAction(83,!0,"saveAs",!0),s.bindAction(65,!0,"selectAll"),s.bindAction(65,!0,"selectNone",!0),s.bindAction(73,!0,"selectVertices",!0),s.bindAction(69,!0,"selectEdges",!0),s.bindAction(69,!0,"editStyle"),s.bindAction(66,!0,"bold"),s.bindAction(66,!0,"toBack",!0),s.bindAction(70,!0,"toFront",!0),s.bindAction(68,!0,"duplicate"),s.bindAction(68,!0,"setAsDefaultStyle",!0),s.bindAction(90,!0,"undo"),s.bindAction(89,!0,"autosize",!0),s.bindAction(88,!0,"cut"),s.bindAction(67,!0,"copy"),s.bindAction(86,!0,"paste"),s.bindAction(71,!0,"group"),s.bindAction(77,!0,"editData"),s.bindAction(71,!0,"grid",!0),s.bindAction(73,!0,"italic"),s.bindAction(76,!0,"lockUnlock"),s.bindAction(76,!0,"layers",!0),s.bindAction(80,!0,"formatPanel",!0),s.bindAction(85,!0,"underline"),s.bindAction(85,!0,"ungroup",!0),s.bindAction(190,!0,"superscript"),s.bindAction(188,!0,"subscript"),s.bindAction(9,!1,"indent",!0),s.bindKey(13,function(){r.isEnabled()&&r.startEditingAtCell()}),s.bindKey(113,function(){r.isEnabled()&&r.startEditingAtCell()})),mxClient.IS_WIN?s.bindAction(89,!0,"redo"):s.bindAction(90,!0,"redo",!0),s},EditorUi.prototype.destroy=function(){if(null!=this.editor&&(this.editor.destroy(),this.editor=null),null!=this.menubar&&(this.menubar.destroy(),this.menubar=null),null!=this.toolbar&&(this.toolbar.destroy(),this.toolbar=null),null!=this.sidebar&&(this.sidebar.destroy(),this.sidebar=null),null!=this.keyHandler&&(this.keyHandler.destroy(),this.keyHandler=null),null!=this.keydownHandler&&(mxEvent.removeListener(document,"keydown",this.keydownHandler),this.keydownHandler=null),null!=this.keyupHandler&&(mxEvent.removeListener(document,"keyup",this.keyupHandler),this.keyupHandler=null),null!=this.resizeHandler&&(mxEvent.removeListener(window,"resize",this.resizeHandler),this.resizeHandler=null),null!=this.gestureHandler&&(mxEvent.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null),null!=this.orientationChangeHandler&&(mxEvent.removeListener(window,"orientationchange",this.orientationChangeHandler),this.orientationChangeHandler=null),null!=this.scrollHandler&&(mxEvent.removeListener(window,"scroll",this.scrollHandler),this.scrollHandler=null),null!=this.destroyFunctions){for(var t=0;t<this.destroyFunctions.length;t++)this.destroyFunctions[t]();this.destroyFunctions=null}for(var e=[this.menubarContainer,this.toolbarContainer,this.sidebarContainer,this.formatContainer,this.diagramContainer,this.footerContainer,this.chromelessToolbar,this.hsplit,this.sidebarFooterContainer,this.layersDialog],t=0;t<e.length;t++)null!=e[t]&&null!=e[t].parentNode&&e[t].parentNode.removeChild(e[t])},window.Format=function(t,e){this.editorUi=t,this.container=e},Format.inactiveTabBackgroundColor="#f1f3f4",Format.prototype.labelIndex=0,Format.prototype.diagramIndex=0,Format.prototype.currentIndex=0,Format.prototype.showCloseButton=!0,Format.prototype.roundableShapes="label rectangle internalStorage corner parallelogram swimlane triangle trapezoid ext step tee process link rhombus offPageConnector loopLimit hexagon manualInput card curlyBracket singleArrow callout doubleArrow flexArrow umlLifeline".split(" "),Format.prototype.init=function(){var t=this.editorUi,e=t.editor,n=e.graph;this.update=mxUtils.bind(this,function(t,e){this.clearSelectionState(),this.refresh()}),n.getSelectionModel().addListener(mxEvent.CHANGE,this.update),n.addListener(mxEvent.EDITING_STARTED,this.update),n.addListener(mxEvent.EDITING_STOPPED,this.update),n.getModel().addListener(mxEvent.CHANGE,this.update),n.getView().addListener("unitChanged",this.update),n.addListener(mxEvent.ROOT,mxUtils.bind(this,function(){this.refresh()})),t.addListener("styleChanged",mxUtils.bind(this,function(t,e){this.refresh()})),e.addListener("autosaveChanged",mxUtils.bind(this,function(){this.refresh()})),this.refresh()},Format.prototype.clearSelectionState=function(){this.selectionState=null},Format.prototype.getSelectionState=function(){return null==this.selectionState&&(this.selectionState=this.createSelectionState()),this.selectionState},Format.prototype.createSelectionState=function(){for(var t=this.editorUi.editor.graph.getSelectionCells(),e=this.initSelectionState(),n=0;n<t.length;n++)this.updateSelectionStateForCell(e,t[n],t,0==n);return e},Format.prototype.initSelectionState=function(){return{vertices:[],edges:[],x:null,y:null,width:null,height:null,style:{},containsImage:!1,containsLabel:!1,fill:!0,glass:!0,rounded:!0,comic:!0,autoSize:!1,image:!0,shadow:!0,lineJumps:!0,resizable:!0,table:!1,cell:!1,row:!1,movable:!0,rotatable:!0,stroke:!0}},Format.prototype.updateSelectionStateForCell=function(t,e,n,i){var l,s;(n=this.editorUi.editor.graph).getModel().isVertex(e)?(t.resizable=t.resizable&&n.isCellResizable(e),t.rotatable=t.rotatable&&n.isCellRotatable(e),t.movable=t.movable&&n.isCellMovable(e)&&!n.isTableRow(e)&&!n.isTableCell(e),t.table=t.table||n.isTable(e),t.cell=t.cell||n.isTableCell(e),t.row=t.row||n.isTableRow(e),t.vertices.push(e),null==(s=n.getCellGeometry(e))||(0<s.width?null==t.width?t.width=s.width:t.width!=s.width&&(t.width=""):t.containsLabel=!0,0<s.height?null==t.height?t.height=s.height:t.height!=s.height&&(t.height=""):t.containsLabel=!0,s.relative&&null==s.offset)||(l=(s.relative?s.offset:s).x,s=(s.relative?s.offset:s).y,null==t.x?t.x=l:t.x!=l&&(t.x=""),null==t.y?t.y=s:t.y!=s&&(t.y=""))):n.getModel().isEdge(e)&&(t.edges.push(e),t.resizable=!1,t.rotatable=!1,t.movable=!1),null!=(e=n.view.getState(e))&&(t.autoSize=t.autoSize||this.isAutoSizeState(e),t.glass=t.glass&&this.isGlassState(e),t.rounded=t.rounded&&this.isRoundedState(e),t.lineJumps=t.lineJumps&&this.isLineJumpState(e),t.image=t.image&&this.isImageState(e),t.shadow=t.shadow&&this.isShadowState(e),t.comic=t.comic&&this.isComicState(e),t.fill=t.fill&&this.isFillState(e),t.stroke=t.stroke&&this.isStrokeState(e),l=mxUtils.getValue(e.style,mxConstants.STYLE_SHAPE,null),t.containsImage=t.containsImage||"image"==l,n.mergeStyle(e.style,t.style,i))},Format.prototype.isComicState=function(t){return t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null),0<=mxUtils.indexOf("label rectangle internalStorage corner parallelogram note collate swimlane triangle trapezoid ext step tee process link rhombus offPageConnector loopLimit hexagon manualInput singleArrow doubleArrow flexArrow filledEdge card umlLifeline connector folder component sortShape cross umlFrame cube isoCube isoRectangle partialRectangle".split(" "),t)},Format.prototype.isFillState=function(t){return!this.isSpecialColor(t.style[mxConstants.STYLE_FILLCOLOR])&&(t.view.graph.model.isVertex(t.cell)||"arrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"filledEdge"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)||"flexArrow"==mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))},Format.prototype.isStrokeState=function(t){return!this.isSpecialColor(t.style[mxConstants.STYLE_STROKECOLOR])},Format.prototype.isSpecialColor=function(t){return 0<=mxUtils.indexOf([mxConstants.STYLE_STROKECOLOR,mxConstants.STYLE_FILLCOLOR,"inherit","swimlane","indicated"],t)},Format.prototype.isGlassState=function(t){return"label"==(t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))||"rectangle"==t||"internalStorage"==t||"ext"==t||"umlLifeline"==t||"swimlane"==t||"process"==t},Format.prototype.isRoundedState=function(t){return null!=t.shape?t.shape.isRoundable():0<=mxUtils.indexOf(this.roundableShapes,mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))},Format.prototype.isLineJumpState=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);return!mxUtils.getValue(t.style,mxConstants.STYLE_CURVED,!1)&&("connector"==e||"filledEdge"==e)},Format.prototype.isAutoSizeState=function(t){return"1"==mxUtils.getValue(t.style,mxConstants.STYLE_AUTOSIZE,null)},Format.prototype.isImageState=function(t){return"label"==(t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null))||"image"==t},Format.prototype.isShadowState=function(t){return"image"!=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null)},Format.prototype.clear=function(){if(this.container.innerHTML="",null!=this.panels)for(var t=0;t<this.panels.length;t++)this.panels[t].destroy();this.panels=[]},Format.prototype.refresh=function(){null!=this.pendingRefresh&&(window.clearTimeout(this.pendingRefresh),this.pendingRefresh=null),this.pendingRefresh=window.setTimeout(mxUtils.bind(this,function(){this.immediateRefresh()}))},Format.prototype.immediateRefresh=function(){var t,l,e,n,s,o,r,i,a,h,d,u;"0px"!=this.container.style.width&&(this.clear(),t=this.editorUi,l=t.editor.graph,(e=document.createElement("div")).style.whiteSpace="nowrap",e.style.color="rgb(112, 112, 112)",e.style.textAlign="left",e.style.cursor="default",(n=document.createElement("div")).className="geFormatSection",n.style.textAlign="center",n.style.fontWeight="bold",n.style.paddingTop="8px",n.style.fontSize="13px",n.style.borderWidth="0px 0px 1px 1px",n.style.borderStyle="solid",n.style.display="inline-block",n.style.height="25px",n.style.overflow="hidden",n.style.width="100%",this.container.appendChild(e),mxEvent.addListener(n,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})),s=this.getSelectionState().containsLabel,r=o=null,i=mxUtils.bind(this,function(e,n,i){var t=mxUtils.bind(this,function(t){o!=e&&(s?this.labelIndex=i:l.isSelectionEmpty()?this.diagramIndex=i:this.currentIndex=i,null!=o&&(o.style.backgroundColor=Format.inactiveTabBackgroundColor,o.style.borderBottomWidth="1px"),(o=e).style.backgroundColor="",o.style.borderBottomWidth="0px",r!=n)&&(null!=r&&(r.style.display="none"),(r=n).style.display="")});mxEvent.addListener(e,"click",t),mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})),i==(s?this.labelIndex:l.isSelectionEmpty()?this.diagramIndex:this.currentIndex)&&t()}),a=0,l.isSelectionEmpty()?(mxUtils.write(n,mxResources.get("diagram")),n.style.borderLeftWidth="0px",e.appendChild(n),h=e.cloneNode(!1),this.panels.push(new DiagramFormatPanel(this,t,h)),this.container.appendChild(h),null!=Editor.styles&&(h.style.display="none",n.style.width=this.showCloseButton?"106px":"50%",n.style.cursor="pointer",n.style.backgroundColor=Format.inactiveTabBackgroundColor,(d=n.cloneNode(!1)).style.borderLeftWidth="1px",d.style.borderRightWidth="1px",d.style.backgroundColor=Format.inactiveTabBackgroundColor,i(n,h,a++),(u=e.cloneNode(!1)).style.display="none",mxUtils.write(d,mxResources.get("style")),e.appendChild(d),this.panels.push(new DiagramStylePanel(this,t,u)),this.container.appendChild(u),i(d,u,a++)),this.showCloseButton&&((d=n.cloneNode(!1)).style.borderLeftWidth="1px",d.style.borderRightWidth="1px",d.style.borderBottomWidth="1px",d.style.backgroundColor=Format.inactiveTabBackgroundColor,d.style.position="absolute",d.style.right="0px",d.style.top="0px",d.style.width="25px",(i=document.createElement("img")).setAttribute("border","0"),i.setAttribute("src",Dialog.prototype.closeImage),i.setAttribute("title",mxResources.get("hide")),i.style.position="absolute",i.style.display="block",i.style.right="0px",i.style.top="8px",i.style.cursor="pointer",i.style.marginTop="1px",i.style.marginRight="6px",i.style.border="1px solid transparent",i.style.padding="1px",i.style.opacity=.5,d.appendChild(i),mxEvent.addListener(i,"click",function(){t.actions.get("formatPanel").funct()}),e.appendChild(d))):l.isEditing()?(mxUtils.write(n,mxResources.get("text")),e.appendChild(n),this.panels.push(new TextFormatPanel(this,t,e))):(n.style.backgroundColor=Format.inactiveTabBackgroundColor,n.style.borderLeftWidth="1px",n.style.cursor="pointer",n.style.width=s?"50%":"33.3%",h=(d=n.cloneNode(!1)).cloneNode(!1),d.style.backgroundColor=Format.inactiveTabBackgroundColor,h.style.backgroundColor=Format.inactiveTabBackgroundColor,s?d.style.borderLeftWidth="0px":(n.style.borderLeftWidth="0px",mxUtils.write(n,mxResources.get("style")),e.appendChild(n),(u=e.cloneNode(!1)).style.display="none",this.panels.push(new StyleFormatPanel(this,t,u)),this.container.appendChild(u),i(n,u,a++)),mxUtils.write(d,mxResources.get("text")),e.appendChild(d),(n=e.cloneNode(!1)).style.display="none",this.panels.push(new TextFormatPanel(this,t,n)),this.container.appendChild(n),mxUtils.write(h,mxResources.get("arrange")),e.appendChild(h),(e=e.cloneNode(!1)).style.display="none",this.panels.push(new ArrangePanel(this,t,e)),this.container.appendChild(e),i(d,n,a++),i(h,e,a++)))},window.BaseFormatPanel=function(t,e,n){this.format=t,this.editorUi=e,this.container=n,this.listeners=[]},BaseFormatPanel.prototype.buttonBackgroundColor="white",BaseFormatPanel.prototype.getSelectionState=function(){for(var t=this.editorUi.editor.graph,e=t.getSelectionCells(),n=null,i=0;i<e.length;i++){var l=t.view.getState(e[i]);if(null!=l&&null!=(l=mxUtils.getValue(l.style,mxConstants.STYLE_SHAPE,null)))if(null==n)n=l;else if(n!=l)return null}return n},BaseFormatPanel.prototype.installInputHandler=function(l,s,o,r,a,h,d,u){h=null!=h?h:"",u=null!=u&&u;var p=this.editorUi,c=p.editor.graph,m=(r=null!=r?r:1,a=null!=a?a:999,null),g=!1,t=mxUtils.bind(this,function(t){var e=(u?parseFloat:parseInt)(l.value);if(isNaN(e)||s!=mxConstants.STYLE_ROTATION||(e=mxUtils.mod(Math.round(100*e),36e3)/100),e=Math.min(a,Math.max(r,isNaN(e)?o:e)),c.cellEditor.isContentEditing()&&d)g||(g=!0,null!=m&&(c.cellEditor.restoreSelection(m),m=null),d(e),l.value=e+h,g=!1);else if(e!=mxUtils.getValue(this.format.getSelectionState().style,s,o)){c.isEditing()&&c.stopEditing(!0),c.getModel().beginUpdate();try{var n=c.getSelectionCells();c.setCellStyles(s,e,n),s==mxConstants.STYLE_FONTSIZE&&c.updateLabelElements(c.getSelectionCells(),function(t){t.style.fontSize=e+"px",t.removeAttribute("size")});for(var i=0;i<n.length;i++)0==c.model.getChildCount(n[i])&&c.autoSizeCell(n[i],!1);p.fireEvent(new mxEventObject("styleChanged","keys",[s],"values",[e],"cells",n))}finally{c.getModel().endUpdate()}}l.value=e+h,mxEvent.consume(t)});return d&&c.cellEditor.isContentEditing()&&(mxEvent.addListener(l,"mousedown",function(){document.activeElement==c.cellEditor.textarea&&(m=c.cellEditor.saveSelection())}),mxEvent.addListener(l,"touchstart",function(){document.activeElement==c.cellEditor.textarea&&(m=c.cellEditor.saveSelection())})),mxEvent.addListener(l,"change",t),mxEvent.addListener(l,"blur",t),t},BaseFormatPanel.prototype.createPanel=function(){var t=document.createElement("div");return t.className="geFormatSection",t.style.padding="12px 0px 12px 18px",t},BaseFormatPanel.prototype.createTitle=function(t){var e=document.createElement("div");return e.style.padding="0px 0px 6px 0px",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.style.width="200px",e.style.fontWeight="bold",mxUtils.write(e,t),e},BaseFormatPanel.prototype.createStepper=function(n,i,l,t,e,s,o){l=null!=l?l:1,t=null!=t?t:8,(mxClient.IS_MT||8<=document.documentMode)&&(t+=1);var r,a=document.createElement("div"),h=(mxUtils.setPrefixedStyle(a.style,"borderRadius","3px"),a.style.border="1px solid rgb(192, 192, 192)",a.style.position="absolute",document.createElement("div")),d=(h.style.borderBottom="1px solid rgb(192, 192, 192)",h.style.position="relative",h.style.height=t+"px",h.style.width="10px",h.className="geBtnUp",a.appendChild(h),h.cloneNode(!1));return d.style.border="none",d.style.height=t+"px",d.className="geBtnDown",a.appendChild(d),mxEvent.addListener(d,"click",function(t){""==n.value&&(n.value=s||"2");var e=(o?parseFloat:parseInt)(n.value);isNaN(e)||(n.value=e-l,null!=i&&i(t)),mxEvent.consume(t)}),mxEvent.addListener(h,"click",function(t){""==n.value&&(n.value=s||"0");var e=(o?parseFloat:parseInt)(n.value);isNaN(e)||(n.value=e+l,null!=i&&i(t)),mxEvent.consume(t)}),e&&(r=null,mxEvent.addGestureListeners(a,function(t){mxEvent.consume(t)},null,function(t){if(null!=r){try{r.select()}catch(t){}r=null,mxEvent.consume(t)}})),a},BaseFormatPanel.prototype.createOption=function(t,e,n,i,l){function s(t){h||(h=!0,t?(r.setAttribute("checked","checked"),r.defaultChecked=!0,r.checked=!0):(r.removeAttribute("checked"),r.defaultChecked=!1,r.checked=!1),d!=t&&(d=t,e()!=d)&&n(d),h=!1)}var o=document.createElement("div"),r=(o.style.padding="6px 0px 1px 0px",o.style.whiteSpace="nowrap",o.style.overflow="hidden",o.style.width="200px",o.style.height="18px",document.createElement("input")),a=(r.setAttribute("type","checkbox"),r.style.margin="0px 6px 0px 0px",o.appendChild(r),document.createElement("span")),h=(mxUtils.write(a,t),o.appendChild(a),!1),d=e();return mxEvent.addListener(o,"click",function(t){"disabled"!=r.getAttribute("disabled")&&((t=mxEvent.getSource(t))!=o&&t!=a||(r.checked=!r.checked),s(r.checked))}),s(d),null!=i&&(i.install(s),this.listeners.push(i)),null!=l&&l(o),o},BaseFormatPanel.prototype.createCellOption=function(t,n,e,i,l,s,o,r,a){var h=this.editorUi,d=h.editor.graph,u=(i=null!=i?"null"==i?null:i:1,l=null!=l?"null"==l?null:l:0,null!=a?d.getCommonStyle(a):this.format.selectionState.style);return this.createOption(t,function(){return mxUtils.getValue(u,n,e)!=l},function(t){if(r&&d.stopEditing(),null!=o)o.funct();else{d.getModel().beginUpdate();try{var e=null!=a?a:d.getSelectionCells();t=t?i:l,d.setCellStyles(n,t,e),null!=s&&s(e,t),h.fireEvent(new mxEventObject("styleChanged","keys",[n],"values",[t],"cells",e))}finally{d.getModel().endUpdate()}}},{install:function(t){this.listener=function(){t(mxUtils.getValue(u,n,e)!=l)},d.getModel().addListener(mxEvent.CHANGE,this.listener)},destroy:function(){d.getModel().removeListener(this.listener)}})},BaseFormatPanel.prototype.createColorOption=function(t,i,l,s,e,o,r){function n(t,e,n){p||(p=!0,t=/(^#?[a-zA-Z0-9]*$)/.test(t)?t:s,c.innerHTML='<div style="width:36px;height:12px;margin:3px;border:1px solid black;background-color:'+mxUtils.htmlEntities(null!=t&&t!=mxConstants.NONE?t:s)+';"></div>',null!=t&&t!=mxConstants.NONE?(h.setAttribute("checked","checked"),h.defaultChecked=!0,h.checked=!0):(h.removeAttribute("checked"),h.defaultChecked=!1,h.checked=!1),c.style.display=h.checked||r?"":"none",null!=o&&o(t),!e&&(u=t,n||r||i()!=u)&&l(u),p=!1)}var a=document.createElement("div"),h=(a.style.padding="6px 0px 1px 0px",a.style.whiteSpace="nowrap",a.style.overflow="hidden",a.style.width="200px",a.style.height="18px",document.createElement("input")),d=(h.setAttribute("type","checkbox"),h.style.margin="0px 6px 0px 0px",r||a.appendChild(h),document.createElement("span")),u=(mxUtils.write(d,t),a.appendChild(d),i()),p=!1,c=null;return(c=mxUtils.button("",mxUtils.bind(this,function(t){this.editorUi.pickColor(u,function(t){n(t,null,!0)}),mxEvent.consume(t)}))).style.position="absolute",c.style.marginTop="-4px",c.style.right="20px",c.style.height="22px",c.className="geColorBtn",c.style.display=h.checked||r?"":"none",a.appendChild(c),mxEvent.addListener(a,"click",function(t){(t=mxEvent.getSource(t))!=h&&"INPUT"==t.nodeName||(t!=h&&(h.checked=!h.checked),h.checked||null==u||u==mxConstants.NONE||s==mxConstants.NONE||(s=u),n(h.checked?s:mxConstants.NONE))}),n(u,!0),null!=e&&(e.install(n),this.listeners.push(e)),a},BaseFormatPanel.prototype.createCellColorOption=function(t,n,e,i,l){var s=this.editorUi,o=s.editor.graph;return this.createColorOption(t,function(){var t=o.view.getState(o.getSelectionCell());return null!=t?mxUtils.getValue(t.style,n,null):null},function(t){o.getModel().beginUpdate();try{o.setCellStyles(n,t,o.getSelectionCells()),null!=l&&l(t),s.fireEvent(new mxEventObject("styleChanged","keys",[n],"values",[t],"cells",o.getSelectionCells()))}finally{o.getModel().endUpdate()}},e||mxConstants.NONE,{install:function(e){this.listener=function(){var t=o.view.getState(o.getSelectionCell());null!=t&&e(mxUtils.getValue(t.style,n,null))},o.getModel().addListener(mxEvent.CHANGE,this.listener)},destroy:function(){o.getModel().removeListener(this.listener)}},i)},BaseFormatPanel.prototype.addArrow=function(t,e){e=null!=e?e:10;var n=document.createElement("div"),i=(n.style.display="inline-block",n.style.padding="6px",n.style.paddingRight="4px",10-e);return 2==i?n.style.paddingTop="6px":0<i?n.style.paddingTop=6-i+"px":n.style.marginTop="-2px",n.style.height=e+"px",n.style.borderLeft="1px solid #a0a0a0",n.innerHTML='<img border="0" src="'+(mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHBJREFUeNpidHB2ZyAGsACxDRBPIKCuA6TwCBB/h2rABu4A8SYmKCcXiP/iUFgAxL9gCi8A8SwsirZCMQMTkmANEH9E4v+CmsaArvAdyNFI/FlQ92EoBIE+qCRIUz168DBgsU4OqhinQpgHMABAgAEALY4XLIsJ20oAAAAASUVORK5CYII=":IMAGE_PATH+"/dropdown.png")+'" style="margin-bottom:4px;">',mxUtils.setOpacity(n,70),null!=(e=t.getElementsByTagName("div")[0])&&(e.style.paddingRight="6px",e.style.marginLeft="4px",e.style.marginTop="-1px",e.style.display="inline-block",mxUtils.setOpacity(e,60)),mxUtils.setOpacity(t,100),t.style.border="1px solid #a0a0a0",t.style.backgroundColor=this.buttonBackgroundColor,t.style.backgroundImage="none",t.style.width="auto",t.className+=" geColorBtn",mxUtils.setPrefixedStyle(t.style,"borderRadius","3px"),t.appendChild(n),e},BaseFormatPanel.prototype.addUnitInput=function(t,e,n,i,l,s,o,r,a){return o=null!=o?o:0,(e=document.createElement("input")).style.position="absolute",e.style.textAlign="right",e.style.marginTop="-2px",e.style.right=n+12+"px",e.style.width=i+"px",t.appendChild(e),(i=this.createStepper(e,l,s,null,r,null,a)).style.marginTop=o-2+"px",i.style.right=n+"px",t.appendChild(i),e},BaseFormatPanel.prototype.createRelativeOption=function(t,i,e,l,n){e=null!=e?e:44;var s,o=this.editorUi.editor.graph,r=this.createPanel(),a=(r.style.paddingTop="10px",r.style.paddingBottom="10px",mxUtils.write(r,t),r.style.fontWeight="bold",t=mxUtils.bind(this,function(t){var e,n;null!=l?l(a):(e=parseInt(a.value),e=Math.min(100,Math.max(0,isNaN(e)?100:e)),null!=(n=o.view.getState(o.getSelectionCell()))&&e!=mxUtils.getValue(n.style,i,100)&&(o.setCellStyles(i,e=100==e?null:e,o.getSelectionCells()),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[i],"values",[e],"cells",o.getSelectionCells()))),a.value=(null!=e?e:"100")+" %"),mxEvent.consume(t)}),this.addUnitInput(r,"%",20,e,t,10,-14,null!=l));return null!=i&&(s=mxUtils.bind(this,function(t,e,n){!n&&a==document.activeElement||(t=this.format.getSelectionState(),t=parseInt(mxUtils.getValue(t.style,i,100)),a.value=isNaN(t)?"":t+" %")}),mxEvent.addListener(a,"keydown",function(t){13==t.keyCode?(o.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(s(null,null,!0),o.container.focus(),mxEvent.consume(t))}),o.getModel().addListener(mxEvent.CHANGE,s),this.listeners.push({destroy:function(){o.getModel().removeListener(s)}}),s()),mxEvent.addListener(a,"blur",t),mxEvent.addListener(a,"change",t),null!=n&&n(a),r},BaseFormatPanel.prototype.addLabel=function(t,e,n,i){i=null!=i?i:61;var l=document.createElement("div");mxUtils.write(l,e),l.style.position="absolute",l.style.right=n+"px",l.style.width=i+"px",l.style.marginTop="6px",l.style.textAlign="center",t.appendChild(l)},BaseFormatPanel.prototype.addKeyHandler=function(t,e){mxEvent.addListener(t,"keydown",mxUtils.bind(this,function(t){13==t.keyCode?(this.editorUi.editor.graph.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(null!=e&&e(null,null,!0),this.editorUi.editor.graph.container.focus(),mxEvent.consume(t))}))},BaseFormatPanel.prototype.styleButtons=function(t){for(var e=0;e<t.length;e++)mxUtils.setPrefixedStyle(t[e].style,"borderRadius","3px"),mxUtils.setOpacity(t[e],100),t[e].style.border="1px solid #a0a0a0",t[e].style.padding="4px",t[e].style.paddingTop="3px",t[e].style.paddingRight="1px",t[e].style.margin="1px",t[e].style.width="24px",t[e].style.height="20px",t[e].className+=" geColorBtn"},BaseFormatPanel.prototype.destroy=function(){if(null!=this.listeners){for(var t=0;t<this.listeners.length;t++)this.listeners[t].destroy();this.listeners=null}},window.ArrangePanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(ArrangePanel,BaseFormatPanel),ArrangePanel.prototype.init=function(){var t=this.editorUi.editor.graph,e=this.format.getSelectionState();this.container.appendChild(this.addLayerOps(this.createPanel())),this.addGeometry(this.container),this.addEdgeGeometry(this.container),e.containsLabel&&0!=e.edges.length||this.container.appendChild(this.addAngle(this.createPanel())),e.containsLabel||0!=e.edges.length||"rectangle"==e.style.shape||"label"==e.style.shape||this.container.appendChild(this.addFlip(this.createPanel())),1<e.vertices.length&&(this.container.appendChild(this.addAlign(this.createPanel())),this.container.appendChild(this.addDistribute(this.createPanel()))),(t.isTable(e.vertices[0])||t.isTableRow(e.vertices[0])||t.isTableCell(e.vertices[0]))&&this.container.appendChild(this.addTable(this.createPanel())),this.container.appendChild(this.addGroupOps(this.createPanel())),e.containsLabel&&((t=document.createElement("div")).style.width="100%",t.style.marginTop="0px",t.style.fontWeight="bold",t.style.padding="10px 0 0 18px",mxUtils.write(t,mxResources.get("style")),this.container.appendChild(t),new StyleFormatPanel(this.format,this.editorUi,this.container))},ArrangePanel.prototype.addTable=function(t){var e=this.editorUi,n=e.editor.graph,i=this.format.getSelectionState(),l=(t.style.paddingTop="6px",t.style.paddingBottom="10px",document.createElement("div")),s=(l.style.marginTop="2px",l.style.marginBottom="8px",l.style.fontWeight="bold",mxUtils.write(l,mxResources.get("table")),t.appendChild(l),(l=document.createElement("div")).style.position="relative",l.style.paddingLeft="0px",l.style.borderWidth="0px",l.className="geToolbarContainer",[e.toolbar.addButton("geSprite-insertcolumnbefore",mxResources.get("insertColumnBefore"),mxUtils.bind(this,function(){try{n.insertTableColumn(i.vertices[0],!0)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertcolumnafter",mxResources.get("insertColumnAfter"),mxUtils.bind(this,function(){try{n.insertTableColumn(i.vertices[0],!1)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-deletecolumn",mxResources.get("deleteColumn"),mxUtils.bind(this,function(){try{n.deleteTableColumn(i.vertices[0])}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertrowbefore",mxResources.get("insertRowBefore"),mxUtils.bind(this,function(){try{n.insertTableRow(i.vertices[0],!0)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-insertrowafter",mxResources.get("insertRowAfter"),mxUtils.bind(this,function(){try{n.insertTableRow(i.vertices[0],!1)}catch(t){e.handleError(t)}}),l),e.toolbar.addButton("geSprite-deleterow",mxResources.get("deleteRow"),mxUtils.bind(this,function(){try{n.deleteTableRow(i.vertices[0])}catch(t){e.handleError(t)}}),l)]);return this.styleButtons(s),t.appendChild(l),s[2].style.marginRight="9px",t},ArrangePanel.prototype.addLayerOps=function(t){var e=this.editorUi,n=mxUtils.button(mxResources.get("toFront"),function(t){e.actions.get("toFront").funct()});return n.setAttribute("title",mxResources.get("toFront")+" ("+this.editorUi.actions.get("toFront").shortcut+")"),n.style.width="75px",n.className="btn btn-secondary",n.style.marginRight="2px",t.appendChild(n),(n=mxUtils.button(mxResources.get("toBack"),function(t){e.actions.get("toBack").funct()})).setAttribute("title",mxResources.get("toBack")+" ("+this.editorUi.actions.get("toBack").shortcut+")"),n.style.width="75px",n.className="btn btn-secondary",t.appendChild(n),t},ArrangePanel.prototype.addGroupOps=function(t){var e,n=this.editorUi,i=n.editor.graph,l=i.getSelectionCell(),s=this.format.getSelectionState(),o=0,r=null;return t.style.paddingTop="8px",t.style.paddingBottom="6px",1<i.getSelectionCount()?((r=mxUtils.button(mxResources.get("group"),function(t){n.actions.get("group").funct()})).setAttribute("title",mxResources.get("group")+" ("+this.editorUi.actions.get("group").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),o++):!(1!=i.getSelectionCount()||i.getModel().isEdge(l)||i.isSwimlane(l)||i.isTable(l)||s.row||s.cell)&&0<i.getModel().getChildCount(l)&&((r=mxUtils.button(mxResources.get("ungroup"),function(t){n.actions.get("ungroup").funct()})).setAttribute("title",mxResources.get("ungroup")+" ("+this.editorUi.actions.get("ungroup").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),o++),0<s.vertices.length&&(0<o&&(mxUtils.br(t),o=0),(r=mxUtils.button(mxResources.get("copySize"),function(t){n.actions.get("copySize").funct(t)})).setAttribute("title",mxResources.get("copySize")+" ("+this.editorUi.actions.get("copySize").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),o++,null!=n.copiedSize)&&((e=mxUtils.button(mxResources.get("pasteSize"),function(t){n.actions.get("pasteSize").funct(t)})).setAttribute("title",mxResources.get("pasteSize")+" ("+this.editorUi.actions.get("pasteSize").shortcut+")"),t.appendChild(e),o++,r.style.width="75px",r.className="btn btn-secondary",r.style.marginBottom="2px",e.style.width="75px",e.className="btn btn-secondary",e.style.marginBottom="2px"),0<i.getSelectionCount()&&0<o&&(mxUtils.br(t),o=0),1==i.getSelectionCount()&&i.getModel().isVertex(l)&&!s.row&&!s.cell&&i.getModel().isVertex(i.getModel().getParent(l))?(0<o&&mxUtils.br(t),(r=mxUtils.button(mxResources.get("removeFromGroup"),function(t){n.actions.get("removeFromGroup").funct()})).setAttribute("title",mxResources.get("removeFromGroup")),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),o++):0<i.getSelectionCount()&&(0<o&&mxUtils.br(t),(r=mxUtils.button(mxResources.get("clearWaypoints"),mxUtils.bind(this,function(t){this.editorUi.actions.get("clearWaypoints").funct()}))).setAttribute("title",mxResources.get("clearWaypoints")+" ("+this.editorUi.actions.get("clearWaypoints").shortcut+")"),r.style.width="178px",r.className="btn btn-secondary",r.style.marginBottom="2px",t.appendChild(r),o++),1==i.getSelectionCount()&&(0<o&&mxUtils.br(t),(r=mxUtils.button(mxResources.get("editLink"),mxUtils.bind(this,function(t){this.editorUi.actions.get("editLink").funct()}))).setAttribute("title",mxResources.get("editLink")+" ("+this.editorUi.actions.get("editLink").shortcut+")"),r.className="btn btn-secondary",r.style.width="178px",r.style.marginBottom="2px",t.appendChild(r),o++),0==o&&(t.style.display="none"),t},ArrangePanel.prototype.addAlign=function(t){var e=this.editorUi.editor.graph,n=(t.style.paddingTop="6px",t.style.paddingBottom="12px",t.appendChild(this.createTitle(mxResources.get("align"))),document.createElement("div")),i=(n.style.position="relative",n.style.paddingLeft="0px",n.style.borderWidth="0px",n.className="geToolbarContainer",this.editorUi.toolbar.addButton("geSprite-alignleft",mxResources.get("left"),function(){e.alignCells(mxConstants.ALIGN_LEFT)},n)),l=this.editorUi.toolbar.addButton("geSprite-aligncenter",mxResources.get("center"),function(){e.alignCells(mxConstants.ALIGN_CENTER)},n),s=this.editorUi.toolbar.addButton("geSprite-alignright",mxResources.get("right"),function(){e.alignCells(mxConstants.ALIGN_RIGHT)},n),o=this.editorUi.toolbar.addButton("geSprite-aligntop",mxResources.get("top"),function(){e.alignCells(mxConstants.ALIGN_TOP)},n),r=this.editorUi.toolbar.addButton("geSprite-alignmiddle",mxResources.get("middle"),function(){e.alignCells(mxConstants.ALIGN_MIDDLE)},n),a=this.editorUi.toolbar.addButton("geSprite-alignbottom",mxResources.get("bottom"),function(){e.alignCells(mxConstants.ALIGN_BOTTOM)},n);return this.styleButtons([i,l,s,o,r,a]),s.style.marginRight="6px",t.appendChild(n),t},ArrangePanel.prototype.addFlip=function(t){var e=this.editorUi.editor.graph,n=(t.style.paddingTop="6px",t.style.paddingBottom="10px",document.createElement("div"));return n.style.marginTop="2px",n.style.marginBottom="8px",n.style.fontWeight="bold",mxUtils.write(n,mxResources.get("flip")),t.appendChild(n),(n=mxUtils.button(mxResources.get("horizontal"),function(t){e.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)})).setAttribute("title",mxResources.get("horizontal")),n.style.width="75px",n.className="btn btn-secondary",n.style.marginRight="2px",t.appendChild(n),(n=mxUtils.button(mxResources.get("vertical"),function(t){e.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)})).setAttribute("title",mxResources.get("vertical")),n.style.width="75px",n.className="btn btn-secondary",t.appendChild(n),t},ArrangePanel.prototype.addDistribute=function(t){var e=this.editorUi.editor.graph,n=(t.style.paddingTop="6px",t.style.paddingBottom="12px",t.appendChild(this.createTitle(mxResources.get("distribute"))),mxUtils.button(mxResources.get("horizontal"),function(t){e.distributeCells(!0)}));return n.setAttribute("title",mxResources.get("horizontal")),n.style.width="75px",n.className="btn btn-secondary",n.style.marginRight="2px",t.appendChild(n),(n=mxUtils.button(mxResources.get("vertical"),function(t){e.distributeCells(!1)})).setAttribute("title",mxResources.get("vertical")),n.style.width="75px",n.className="btn btn-secondary",t.appendChild(n),t},ArrangePanel.prototype.addAngle=function(t){var e,n=this.editorUi,i=n.editor.graph,l=this.format.getSelectionState(),s=(t.style.paddingBottom="8px",document.createElement("div")),o=(s.style.position="absolute",s.style.width="70px",s.style.marginTop="0px",s.style.fontWeight="bold",null),r=null,a=null;return!l.rotatable||l.table||l.row||l.cell?t.style.paddingTop="8px":(mxUtils.write(s,mxResources.get("angle")),t.appendChild(s),o=this.addUnitInput(t,"°",20,44,function(){r.apply(this,arguments)}),mxUtils.br(t),t.style.paddingTop="10px"),l.containsLabel||(s=mxResources.get("reverse"),0<l.vertices.length&&0<l.edges.length?s=mxResources.get("turn")+" / "+s:0<l.vertices.length&&(s=mxResources.get("turn")),(a=mxUtils.button(s,function(t){n.actions.get("turn").funct(t)})).setAttribute("title",s+" ("+this.editorUi.actions.get("turn").shortcut+")"),a.style.width="178px",a.className="btn btn-secondary",t.appendChild(a),null!=o&&(a.style.marginTop="8px")),null!=o&&(e=mxUtils.bind(this,function(t,e,n){!n&&document.activeElement==o||(l=this.format.getSelectionState(),t=parseFloat(mxUtils.getValue(l.style,mxConstants.STYLE_ROTATION,0)),o.value=isNaN(t)?"":t+"°")}),r=this.installInputHandler(o,mxConstants.STYLE_ROTATION,0,0,360,"°",null,!0),this.addKeyHandler(o,e),i.getModel().addListener(mxEvent.CHANGE,e),this.listeners.push({destroy:function(){i.getModel().removeListener(e)}}),e()),t},BaseFormatPanel.prototype.getUnit=function(){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return"pt";case mxConstants.INCHES:return'"';case mxConstants.MILLIMETERS:return"mm"}},BaseFormatPanel.prototype.inUnit=function(t){return this.editorUi.editor.graph.view.formatUnitText(t)},BaseFormatPanel.prototype.fromUnit=function(t){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return t;case mxConstants.INCHES:return t*mxConstants.PIXELS_PER_INCH;case mxConstants.MILLIMETERS:return t*mxConstants.PIXELS_PER_MM}},BaseFormatPanel.prototype.isFloatUnit=function(){return this.editorUi.editor.graph.view.unit!=mxConstants.POINTS},BaseFormatPanel.prototype.getUnitStep=function(){switch(this.editorUi.editor.graph.view.unit){case mxConstants.POINTS:return 1;case mxConstants.INCHES:return.1;case mxConstants.MILLIMETERS:return.5}},ArrangePanel.prototype.addGeometry=function(t){var e,i=this,n=this.editorUi,l=n.editor.graph,s=l.getModel(),o=this.format.getSelectionState(),r=this.createPanel(),a=(r.style.paddingBottom="8px",document.createElement("div")),h=(a.style.position="absolute",a.style.width="50px",a.style.marginTop="0px",a.style.fontWeight="bold",mxUtils.write(a,mxResources.get("size")),r.appendChild(a),this.addUnitInput(r,this.getUnit(),84,44,function(){m.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit())),d=this.addUnitInput(r,this.getUnit(),20,44,function(){g.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),u=document.createElement("div"),p=(u.className="geSprite geSprite-fit",u.setAttribute("title",mxResources.get("autosize")+" ("+this.editorUi.actions.get("autosize").shortcut+")"),u.style.position="relative",u.style.cursor="pointer",u.style.marginTop="-3px",u.style.border="0px",u.style.left="42px",mxUtils.setOpacity(u,50),mxEvent.addListener(u,"mouseenter",function(){mxUtils.setOpacity(u,100)}),mxEvent.addListener(u,"mouseleave",function(){mxUtils.setOpacity(u,50)}),mxEvent.addListener(u,"click",function(){n.actions.get("autosize").funct()}),r.appendChild(u),o.row?(h.style.visibility="hidden",h.nextSibling.style.visibility="hidden"):this.addLabel(r,mxResources.get("width"),84),this.addLabel(r,mxResources.get("height"),20),mxUtils.br(r),(a=document.createElement("div")).style.paddingTop="8px",a.style.paddingRight="20px",a.style.whiteSpace="nowrap",a.style.textAlign="right",this.createCellOption(mxResources.get("constrainProportions"),mxConstants.STYLE_ASPECT,null,"fixed","null")),c=(p.style.width="100%",a.appendChild(p),o.cell||o.row?u.style.visibility="hidden":r.appendChild(a),p.getElementsByTagName("input")[0]),m=(this.addKeyHandler(h,void 0),this.addKeyHandler(d,void 0),this.addGeometryHandler(h,function(t,e,n){if(l.isTableCell(n))return l.setTableColumnWidth(n,e-t.width,!0),!0;0<t.width&&(e=Math.max(1,i.fromUnit(e)),c.checked&&(t.height=Math.round(t.height*e*100/t.width)/100),t.width=e)})),g=this.addGeometryHandler(d,function(t,e,n){if(l.isTableCell(n)&&(n=l.model.getParent(n)),l.isTableRow(n))return l.setTableRowHeight(n,e-t.height),!0;0<t.height&&(e=Math.max(1,i.fromUnit(e)),c.checked&&(t.width=Math.round(t.width*e*100/t.height)/100),t.height=e)}),x=((o.resizable||o.row||o.cell)&&t.appendChild(r),this.createPanel()),y=(x.style.paddingBottom="30px",(a=document.createElement("div")).style.position="absolute",a.style.width="70px",a.style.marginTop="0px",a.style.fontWeight="bold",mxUtils.write(a,mxResources.get("position")),x.appendChild(a),this.addUnitInput(x,this.getUnit(),84,44,function(){E.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit())),f=this.addUnitInput(x,this.getUnit(),20,44,function(){v.apply(this,arguments)},this.getUnitStep(),null,null,this.isFloatUnit()),C=(mxUtils.br(x),this.addLabel(x,mxResources.get("left"),84),this.addLabel(x,mxResources.get("top"),20),mxUtils.bind(this,function(t,e,n){(o=this.format.getSelectionState()).containsLabel||o.vertices.length!=l.getSelectionCount()||null==o.width||null==o.height?r.style.display="none":(r.style.display="",!n&&document.activeElement==h||(h.value=this.inUnit(o.width)+(""==o.width?"":" "+this.getUnit())),!n&&document.activeElement==d||(d.value=this.inUnit(o.height)+(""==o.height?"":" "+this.getUnit()))),o.vertices.length==l.getSelectionCount()&&null!=o.x&&null!=o.y?(x.style.display="",!n&&document.activeElement==y||(y.value=this.inUnit(o.x)+(""==o.x?"":" "+this.getUnit())),!n&&document.activeElement==f||(f.value=this.inUnit(o.y)+(""==o.y?"":" "+this.getUnit()))):x.style.display="none"})),E=(this.addKeyHandler(y,C),this.addKeyHandler(f,C),s.addListener(mxEvent.CHANGE,C),this.listeners.push({destroy:function(){s.removeListener(C)}}),C(),this.addGeometryHandler(y,function(t,e){e=i.fromUnit(e),t.relative?t.offset.x=e:t.x=e})),v=this.addGeometryHandler(f,function(t,e){e=i.fromUnit(e),t.relative?t.offset.y=e:t.y=e});o.movable&&(0==o.edges.length&&1==o.vertices.length&&s.isEdge(s.getParent(o.vertices[0]))&&null!=(e=l.getCellGeometry(o.vertices[0]))&&e.relative&&((a=mxUtils.button(mxResources.get("center"),mxUtils.bind(this,function(t){s.beginUpdate();try{(e=e.clone()).x=0,e.y=0,e.offset=new mxPoint,s.setGeometry(o.vertices[0],e)}finally{s.endUpdate()}}))).setAttribute("title",mxResources.get("center")),a.style.width="202px",a.style.position="absolute",mxUtils.br(x),mxUtils.br(x),x.appendChild(a)),t.appendChild(x))},ArrangePanel.prototype.addGeometryHandler=function(o,r){function t(t){if(""!=o.value){var e=parseFloat(o.value);if(isNaN(e))o.value=h+" "+d.getUnit();else if(e!=h){a.getModel().beginUpdate();try{for(var n,i,l=a.getSelectionCells(),s=0;s<l.length;s++)!a.getModel().isVertex(l[s])||null==(n=a.getCellGeometry(l[s]))||(n=n.clone(),r(n,e,l[s]))||(null!=(i=a.view.getState(l[s]))&&a.isRecursiveVertexResize(i)&&a.resizeChildCells(l[s],n),a.getModel().setGeometry(l[s],n),a.constrainChildCells(l[s]))}finally{a.getModel().endUpdate()}h=e,o.value=e+" "+d.getUnit()}}mxEvent.consume(t)}var a=this.editorUi.editor.graph,h=null,d=this;return mxEvent.addListener(o,"blur",t),mxEvent.addListener(o,"change",t),mxEvent.addListener(o,"focus",function(){h=o.value}),t},ArrangePanel.prototype.addEdgeGeometryHandler=function(s,o){function t(t){if(""!=s.value){var e=parseFloat(s.value);if(isNaN(e))s.value=a+" pt";else if(e!=a){r.getModel().beginUpdate();try{for(var n,i=r.getSelectionCells(),l=0;l<i.length;l++)r.getModel().isEdge(i[l])&&null!=(n=r.getCellGeometry(i[l]))&&(n=n.clone(),o(n,e),r.getModel().setGeometry(i[l],n))}finally{r.getModel().endUpdate()}a=e,s.value=e+" pt"}}mxEvent.consume(t)}var r=this.editorUi.editor.graph,a=null;return mxEvent.addListener(s,"blur",t),mxEvent.addListener(s,"change",t),mxEvent.addListener(s,"focus",function(){a=s.value}),t},ArrangePanel.prototype.addEdgeGeometry=function(t){function e(t){var e=parseInt(r.value);(e=Math.min(999,Math.max(1,isNaN(e)?1:e)))!=mxUtils.getValue(l.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth)&&(i.setCellStyles("width",e,i.getSelectionCells()),n.fireEvent(new mxEventObject("styleChanged","keys",["width"],"values",[e],"cells",i.getSelectionCells()))),r.value=e+" pt",mxEvent.consume(t)}var n=this.editorUi,i=n.editor.graph,l=this.format.getSelectionState(),s=this.createPanel(),o=document.createElement("div"),r=(o.style.position="absolute",o.style.width="70px",o.style.marginTop="0px",o.style.fontWeight="bold",mxUtils.write(o,mxResources.get("width")),s.appendChild(o),this.addUnitInput(s,"pt",20,44,function(){e.apply(this,arguments)})),a=(mxUtils.br(s),this.addKeyHandler(r,m),mxEvent.addListener(r,"blur",e),mxEvent.addListener(r,"change",e),t.appendChild(s),this.createPanel()),h=(a.style.paddingBottom="30px",(o=document.createElement("div")).style.position="absolute",o.style.width="70px",o.style.marginTop="0px",o.style.fontWeight="bold",mxUtils.write(o,"Start"),a.appendChild(o),this.addUnitInput(a,"pt",84,44,function(){g.apply(this,arguments)})),d=this.addUnitInput(a,"pt",20,44,function(){x.apply(this,arguments)}),u=(mxUtils.br(a),this.addLabel(a,mxResources.get("left"),84),this.addLabel(a,mxResources.get("top"),20),t.appendChild(a),this.addKeyHandler(h,m),this.addKeyHandler(d,m),this.createPanel()),p=(u.style.paddingBottom="30px",(o=document.createElement("div")).style.position="absolute",o.style.width="70px",o.style.marginTop="0px",o.style.fontWeight="bold",mxUtils.write(o,"End"),u.appendChild(o),this.addUnitInput(u,"pt",84,44,function(){y.apply(this,arguments)})),c=this.addUnitInput(u,"pt",20,44,function(){f.apply(this,arguments)}),m=(mxUtils.br(u),this.addLabel(u,mxResources.get("left"),84),this.addLabel(u,mxResources.get("top"),20),t.appendChild(u),this.addKeyHandler(p,m),this.addKeyHandler(c,m),mxUtils.bind(this,function(t,e,n){l=this.format.getSelectionState(),t=i.getSelectionCell(),"link"==l.style.shape||"flexArrow"==l.style.shape?(s.style.display="",!n&&document.activeElement==r||(n=mxUtils.getValue(l.style,"width",mxCellRenderer.defaultShapes.flexArrow.prototype.defaultWidth),r.value=n+" pt")):s.style.display="none",1==i.getSelectionCount()&&i.model.isEdge(t)?(null!=(n=i.model.getGeometry(t)).sourcePoint&&null==i.model.getTerminal(t,!0)?(h.value=n.sourcePoint.x,d.value=n.sourcePoint.y):a.style.display="none",null!=n.targetPoint&&null==i.model.getTerminal(t,!1)?(p.value=n.targetPoint.x,c.value=n.targetPoint.y):u.style.display="none"):(a.style.display="none",u.style.display="none")})),g=this.addEdgeGeometryHandler(h,function(t,e){t.sourcePoint.x=e}),x=this.addEdgeGeometryHandler(d,function(t,e){t.sourcePoint.y=e}),y=this.addEdgeGeometryHandler(p,function(t,e){t.targetPoint.x=e}),f=this.addEdgeGeometryHandler(c,function(t,e){t.targetPoint.y=e});i.getModel().addListener(mxEvent.CHANGE,m),this.listeners.push({destroy:function(){i.getModel().removeListener(m)}}),m()},window.TextFormatPanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(TextFormatPanel,BaseFormatPanel),TextFormatPanel.prototype.init=function(){this.container.style.borderBottom="none",this.addFont(this.container)},TextFormatPanel.prototype.addFont=function(t){function p(t,e){t.style.backgroundImage=e?"linear-gradient(#c5ecff 0px,#87d4fb 100%)":""}var e,n,i=this.editorUi,c=i.editor.graph,m=this.format.getSelectionState(),l=this.createTitle(mxResources.get("font")),g=(l.style.paddingLeft="18px",l.style.paddingTop="10px",l.style.paddingBottom="6px",t.appendChild(l),(l=this.createPanel()).style.paddingTop="2px",l.style.paddingBottom="2px",l.style.position="relative",l.style.marginLeft="-2px",l.style.borderWidth="0px",l.className="geToolbarContainer",c.cellEditor.isContentEditing()&&(e=l.cloneNode(),(n=this.editorUi.toolbar.addMenu(mxResources.get("style"),mxResources.get("style"),!0,"formatBlock",e,null,!0)).style.color="rgb(112, 112, 112)",n.style.whiteSpace="nowrap",n.style.overflow="hidden",n.style.margin="0px",this.addArrow(n),n.style.width="192px",n.style.height="15px",(n=n.getElementsByTagName("div")[0]).style.cssFloat="right",t.appendChild(e)),t.appendChild(l),(e=this.createPanel()).style.marginTop="8px",e.style.borderTop="1px solid #c0c0c0",e.style.paddingTop="6px",e.style.paddingBottom="6px",this.editorUi.toolbar.addMenu("Helvetica",mxResources.get("fontFamily"),!0,"fontFamily",l,null,!0)),x=(g.style.color="rgb(112, 112, 112)",g.style.whiteSpace="nowrap",g.style.overflow="hidden",g.style.margin="0px",this.addArrow(g),g.style.width="192px",g.style.height="15px",(n=l.cloneNode(!1)).style.marginLeft="-3px",this.editorUi.toolbar.addItems(["bold","italic","underline"],n,!0)),G=(x[0].setAttribute("title",mxResources.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),x[1].setAttribute("title",mxResources.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),x[2].setAttribute("title",mxResources.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")"),this.editorUi.toolbar.addItems(["vertical"],n,!0)[0]);t.appendChild(n),this.styleButtons(x),this.styleButtons([G]);(u=l.cloneNode(!1)).style.marginLeft="-3px",u.style.paddingBottom="0px";for(var s,D,_,y,f,C,E,o=function(t){return function(){return t()}},v=this.editorUi.toolbar.addButton("geSprite-left",mxResources.get("left"),c.cellEditor.isContentEditing()?function(t){c.cellEditor.alignText(mxConstants.ALIGN_LEFT,t)}:o(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_LEFT])),u),S=this.editorUi.toolbar.addButton("geSprite-center",mxResources.get("center"),c.cellEditor.isContentEditing()?function(t){c.cellEditor.alignText(mxConstants.ALIGN_CENTER,t)}:o(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_CENTER])),u),b=this.editorUi.toolbar.addButton("geSprite-right",mxResources.get("right"),c.cellEditor.isContentEditing()?function(t){c.cellEditor.alignText(mxConstants.ALIGN_RIGHT,t)}:o(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_ALIGN],[mxConstants.ALIGN_RIGHT])),u),k=(this.styleButtons([v,S,b]),c.cellEditor.isContentEditing()&&(s=this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources.get("strikethrough"),function(){document.execCommand("strikeThrough",!1,null)},n),this.styleButtons([s]),s.firstChild.style.background="url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PGRlZnM+PHBhdGggaWQ9ImEiIGQ9Ik0wIDBoMjR2MjRIMFYweiIvPjwvZGVmcz48Y2xpcFBhdGggaWQ9ImIiPjx1c2UgeGxpbms6aHJlZj0iI2EiIG92ZXJmbG93PSJ2aXNpYmxlIi8+PC9jbGlwUGF0aD48cGF0aCBjbGlwLXBhdGg9InVybCgjYikiIGZpbGw9IiMwMTAxMDEiIGQ9Ik03LjI0IDguNzVjLS4yNi0uNDgtLjM5LTEuMDMtLjM5LTEuNjcgMC0uNjEuMTMtMS4xNi40LTEuNjcuMjYtLjUuNjMtLjkzIDEuMTEtMS4yOS40OC0uMzUgMS4wNS0uNjMgMS43LS44My42Ni0uMTkgMS4zOS0uMjkgMi4xOC0uMjkuODEgMCAxLjU0LjExIDIuMjEuMzQuNjYuMjIgMS4yMy41NCAxLjY5Ljk0LjQ3LjQuODMuODggMS4wOCAxLjQzLjI1LjU1LjM4IDEuMTUuMzggMS44MWgtMy4wMWMwLS4zMS0uMDUtLjU5LS4xNS0uODUtLjA5LS4yNy0uMjQtLjQ5LS40NC0uNjgtLjItLjE5LS40NS0uMzMtLjc1LS40NC0uMy0uMS0uNjYtLjE2LTEuMDYtLjE2LS4zOSAwLS43NC4wNC0xLjAzLjEzLS4yOS4wOS0uNTMuMjEtLjcyLjM2LS4xOS4xNi0uMzQuMzQtLjQ0LjU1LS4xLjIxLS4xNS40My0uMTUuNjYgMCAuNDguMjUuODguNzQgMS4yMS4zOC4yNS43Ny40OCAxLjQxLjdINy4zOWMtLjA1LS4wOC0uMTEtLjE3LS4xNS0uMjV6TTIxIDEydi0ySDN2Mmg5LjYyYy4xOC4wNy40LjE0LjU1LjIuMzcuMTcuNjYuMzQuODcuNTEuMjEuMTcuMzUuMzYuNDMuNTcuMDcuMi4xMS40My4xMS42OSAwIC4yMy0uMDUuNDUtLjE0LjY2LS4wOS4yLS4yMy4zOC0uNDIuNTMtLjE5LjE1LS40Mi4yNi0uNzEuMzUtLjI5LjA4LS42My4xMy0xLjAxLjEzLS40MyAwLS44My0uMDQtMS4xOC0uMTNzLS42Ni0uMjMtLjkxLS40MmMtLjI1LS4xOS0uNDUtLjQ0LS41OS0uNzUtLjE0LS4zMS0uMjUtLjc2LS4yNS0xLjIxSDYuNGMwIC41NS4wOCAxLjEzLjI0IDEuNTguMTYuNDUuMzcuODUuNjUgMS4yMS4yOC4zNS42LjY2Ljk4LjkyLjM3LjI2Ljc4LjQ4IDEuMjIuNjUuNDQuMTcuOS4zIDEuMzguMzkuNDguMDguOTYuMTMgMS40NC4xMy44IDAgMS41My0uMDkgMi4xOC0uMjhzMS4yMS0uNDUgMS42Ny0uNzljLjQ2LS4zNC44Mi0uNzcgMS4wNy0xLjI3cy4zOC0xLjA3LjM4LTEuNzFjMC0uNi0uMS0xLjE0LS4zMS0xLjYxLS4wNS0uMTEtLjExLS4yMy0uMTctLjMzSDIxeiIvPjwvc3ZnPg==)",s.firstChild.style.backgroundPosition="2px 2px",s.firstChild.style.backgroundSize="18px 18px",this.styleButtons([s])),this.editorUi.toolbar.addButton("geSprite-top",mxResources.get("top"),o(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_TOP])),u)),V=this.editorUi.toolbar.addButton("geSprite-middle",mxResources.get("middle"),o(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_MIDDLE])),u),F=this.editorUi.toolbar.addButton("geSprite-bottom",mxResources.get("bottom"),o(this.editorUi.menus.createStyleChangeFunction([mxConstants.STYLE_VERTICAL_ALIGN],[mxConstants.ALIGN_BOTTOM])),u),r=(this.styleButtons([k,V,F]),t.appendChild(u),c.cellEditor.isContentEditing()?(k.style.display="none",V.style.display="none",F.style.display="none",G.style.display="none",(E=this.editorUi.toolbar.addButton("geSprite-justifyfull",mxResources.get("block"),function(){1==E.style.opacity&&document.execCommand("justifyfull",!1,null)},u)).style.marginRight="9px",E.style.opacity=1,this.styleButtons([E,D=this.editorUi.toolbar.addButton("geSprite-subscript",mxResources.get("subscript")+" ("+Editor.ctrlKey+"+,)",function(){document.execCommand("subscript",!1,null)},u),_=this.editorUi.toolbar.addButton("geSprite-superscript",mxResources.get("superscript")+" ("+Editor.ctrlKey+"+.)",function(){document.execCommand("superscript",!1,null)},u)]),D.style.marginLeft="9px",(o=u.cloneNode(!1)).style.paddingTop="4px",u=[this.editorUi.toolbar.addButton("geSprite-orderedlist",mxResources.get("numberedList"),function(){document.execCommand("insertorderedlist",!1,null)},o),this.editorUi.toolbar.addButton("geSprite-unorderedlist",mxResources.get("bulletedList"),function(){document.execCommand("insertunorderedlist",!1,null)},o),this.editorUi.toolbar.addButton("geSprite-outdent",mxResources.get("decreaseIndent"),function(){document.execCommand("outdent",!1,null)},o),this.editorUi.toolbar.addButton("geSprite-indent",mxResources.get("increaseIndent"),function(){document.execCommand("indent",!1,null)},o),this.editorUi.toolbar.addButton("geSprite-removeformat",mxResources.get("removeFormat"),function(){document.execCommand("removeformat",!1,null)},o),this.editorUi.toolbar.addButton("geSprite-code",mxResources.get("html"),function(){c.cellEditor.toggleViewMode()},o)],this.styleButtons(u),u[u.length-2].style.marginLeft="9px",t.appendChild(o)):(x[2].style.marginRight="9px",b.style.marginRight="9px"),(u=l.cloneNode(!1)).style.marginLeft="0px",u.style.paddingTop="8px",u.style.paddingBottom="4px",u.style.fontWeight="normal",mxUtils.write(u,mxResources.get("position")),document.createElement("select")),B=(r.style.position="absolute",r.style.right="20px",r.style.width="97px",r.style.marginTop="-2px",s="topLeft top topRight left center right bottomLeft bottom bottomRight".split(" "),{topLeft:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_TOP,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_BOTTOM],top:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_TOP,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_BOTTOM],topRight:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_TOP,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_BOTTOM],left:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE],center:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_MIDDLE],right:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_MIDDLE,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_MIDDLE],bottomLeft:[mxConstants.ALIGN_LEFT,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_TOP],bottom:[mxConstants.ALIGN_CENTER,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_CENTER,mxConstants.ALIGN_TOP],bottomRight:[mxConstants.ALIGN_RIGHT,mxConstants.ALIGN_BOTTOM,mxConstants.ALIGN_LEFT,mxConstants.ALIGN_TOP]}),o=0;o<s.length;o++){var a=document.createElement("option");a.setAttribute("value",s[o]),mxUtils.write(a,mxResources.get(s[o])),r.appendChild(a)}u.appendChild(r),(s=l.cloneNode(!1)).style.marginLeft="0px",s.style.paddingTop="4px",s.style.paddingBottom="4px",s.style.fontWeight="normal",mxUtils.write(s,mxResources.get("writingDirection"));var h=document.createElement("select"),z=(h.style.position="absolute",h.style.right="20px",h.style.width="97px",h.style.marginTop="-2px",a=["automatic","leftToRight","rightToLeft"],{automatic:null,leftToRight:mxConstants.TEXT_DIRECTION_LTR,rightToLeft:mxConstants.TEXT_DIRECTION_RTL});for(o=0;o<a.length;o++){var Y=document.createElement("option");Y.setAttribute("value",a[o]),mxUtils.write(Y,mxResources.get(a[o])),h.appendChild(Y)}s.appendChild(h),c.isEditing()||(t.appendChild(u),mxEvent.addListener(r,"change",function(t){c.getModel().beginUpdate();try{var e=B[r.value];null!=e&&(c.setCellStyles(mxConstants.STYLE_LABEL_POSITION,e[0],c.getSelectionCells()),c.setCellStyles(mxConstants.STYLE_VERTICAL_LABEL_POSITION,e[1],c.getSelectionCells()),c.setCellStyles(mxConstants.STYLE_ALIGN,e[2],c.getSelectionCells()),c.setCellStyles(mxConstants.STYLE_VERTICAL_ALIGN,e[3],c.getSelectionCells()))}finally{c.getModel().endUpdate()}mxEvent.consume(t)}),t.appendChild(s),mxEvent.addListener(h,"change",function(t){c.setCellStyles(mxConstants.STYLE_TEXT_DIRECTION,z[h.value],c.getSelectionCells()),mxEvent.consume(t)}));var d,w,W,T,A=document.createElement("input"),L=(A.style.textAlign="right",A.style.marginTop="4px",A.style.position="absolute",A.style.right="32px",A.style.width="40px",A.style.height="17px",n.appendChild(A),null),u=this.installInputHandler(A,mxConstants.STYLE_FONTSIZE,Menus.prototype.defaultFontSize,1,999," pt",function(n){if(!window.getSelection||mxClient.IS_IE||mxClient.IS_IE11){if((window.getSelection||document.selection)&&(t=function(t,e){for(;null!=e;){if(e===t)return!0;e=e.parentNode}return!1},l=null,document.selection?l=document.selection.createRange().parentElement():0<(i=window.getSelection()).rangeCount&&(l=i.getRangeAt(0).commonAncestorContainer),null!=l)&&t(c.cellEditor.textarea,l))for(L=n,document.execCommand("fontSize",!1,"4"),l=c.cellEditor.textarea.getElementsByTagName("font"),e=0;e<l.length;e++)if("4"==l[e].getAttribute("size")){l[e].removeAttribute("size"),l[e].style.fontSize=L+"px",window.setTimeout(function(){A.value=L+" pt",L=null},0);break}}else{var t=function(t,e){null!=c.cellEditor.textarea&&t!=c.cellEditor.textarea&&c.cellEditor.textarea.contains(t)&&(e||i.containsNode(t,!0))&&("FONT"==t.nodeName?(t.removeAttribute("size"),t.style.fontSize=n+"px"):mxUtils.getCurrentStyle(t).fontSize!=n+"px"&&(mxUtils.getCurrentStyle(t.parentNode).fontSize!=n+"px"?t.style.fontSize=n+"px":t.style.fontSize=""))},i=window.getSelection(),e=0<i.rangeCount?i.getRangeAt(0).commonAncestorContainer:c.cellEditor.textarea;if(e!=c.cellEditor.textarea&&e.nodeType==mxConstants.NODETYPE_ELEMENT||document.execCommand("fontSize",!1,"1"),null!=(e=e!=c.cellEditor.textarea?e.parentNode:e)&&e.nodeType==mxConstants.NODETYPE_ELEMENT){var l=e.getElementsByTagName("*");for(t(e),e=0;e<l.length;e++)t(l[e])}A.value=n+" pt"}},!0),M=((u=this.createStepper(A,u,1,10,!0,Menus.prototype.defaultFontSize)).style.display=A.style.display,u.style.marginTop="4px",u.style.right="20px",n.appendChild(u),(n=g.getElementsByTagName("div")[0]).style.cssFloat="right",null),j="#ffffff",R=null,X="#000000",I=c.cellEditor.isContentEditing()?this.createColorOption(mxResources.get("backgroundColor"),function(){return j},function(t){document.execCommand("backcolor",!1,t!=mxConstants.NONE?t:"transparent")},"#ffffff",{install:function(t){M=t},destroy:function(){M=null}},null,!0):this.createCellColorOption(mxResources.get("backgroundColor"),mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,"#ffffff",null,function(t){c.updateLabelElements(c.getSelectionCells(),function(t){t.style.backgroundColor=null})}),Z=(I.style.fontWeight="bold",this.createCellColorOption(mxResources.get("borderColor"),mxConstants.STYLE_LABEL_BORDERCOLOR,"#000000")),P=(Z.style.fontWeight="bold",n=1<=m.vertices.length?c.stylesheet.getDefaultVertexStyle():c.stylesheet.getDefaultEdgeStyle(),(n=c.cellEditor.isContentEditing()?this.createColorOption(mxResources.get("fontColor"),function(){return X},function(t){if(mxClient.IS_FF){for(var e=c.cellEditor.textarea.getElementsByTagName("font"),n=[],i=0;i<e.length;i++)n.push({node:e[i],color:e[i].getAttribute("color")});for(document.execCommand("forecolor",!1,t!=mxConstants.NONE?t:"transparent"),t=c.cellEditor.textarea.getElementsByTagName("font"),i=0;i<t.length;i++)if(i>=n.length||t[i]!=n[i].node||t[i]==n[i].node&&t[i].getAttribute("color")!=n[i].color){if(null!=(n=t[i].firstChild)&&"A"==n.nodeName&&null==n.nextSibling&&null!=n.firstChild){for(t[i].parentNode.insertBefore(n,t[i]),e=n.firstChild;null!=e;){var l=e.nextSibling;t[i].appendChild(e),e=l}n.appendChild(t[i])}break}}else document.execCommand("forecolor",!1,t!=mxConstants.NONE?t:"transparent")},null!=n[mxConstants.STYLE_FONTCOLOR]?n[mxConstants.STYLE_FONTCOLOR]:"#000000",{install:function(t){R=t},destroy:function(){R=null}},null,!0):this.createCellColorOption(mxResources.get("fontColor"),mxConstants.STYLE_FONTCOLOR,null!=n[mxConstants.STYLE_FONTCOLOR]?n[mxConstants.STYLE_FONTCOLOR]:"#000000",function(t){I.style.display=t==mxConstants.NONE?"none":"",Z.style.display=I.style.display},function(t){t==mxConstants.NONE?c.setCellStyles(mxConstants.STYLE_NOLABEL,"1",c.getSelectionCells()):c.setCellStyles(mxConstants.STYLE_NOLABEL,null,c.getSelectionCells()),c.updateCellStyles(mxConstants.STYLE_FONTCOLOR,t,c.getSelectionCells()),c.updateLabelElements(c.getSelectionCells(),function(t){t.removeAttribute("color"),t.style.color=null})})).style.fontWeight="bold",e.appendChild(n),e.appendChild(I),c.cellEditor.isContentEditing()||e.appendChild(Z),t.appendChild(e),(e=this.createPanel()).style.paddingTop="2px",e.style.paddingBottom="4px",n=c.filterSelectionCells(mxUtils.bind(this,function(t){var e=c.view.getState(t);return null==e||this.format.isAutoSizeState(e)||c.getModel().isEdge(t)||!c.isTableRow(t)&&!c.isTableCell(t)&&!c.isCellResizable(t)})),(u=this.createCellOption(mxResources.get("wordWrap"),mxConstants.STYLE_WHITE_SPACE,null,"wrap","null",null,null,!0,n)).style.fontWeight="bold",0<n.length&&e.appendChild(u),(n=this.createCellOption(mxResources.get("formattedText"),"html",0,null,null,null,i.actions.get("formattedText"))).style.fontWeight="bold",e.appendChild(n),(n=this.createPanel()).style.paddingTop="10px",n.style.paddingBottom="28px",n.style.fontWeight="normal",(u=document.createElement("div")).style.position="absolute",u.style.width="70px",u.style.marginTop="0px",u.style.fontWeight="bold",mxUtils.write(u,mxResources.get("spacing")),n.appendChild(u),this.addUnitInput(n,"pt",91,44,function(){Q.apply(this,arguments)})),O=this.addUnitInput(n,"pt",20,44,function(){q.apply(this,arguments)}),N=(mxUtils.br(n),this.addLabel(n,mxResources.get("top"),91),this.addLabel(n,mxResources.get("global"),20),mxUtils.br(n),mxUtils.br(n),this.addUnitInput(n,"pt",162,44,function(){tt.apply(this,arguments)})),H=this.addUnitInput(n,"pt",91,44,function(){$.apply(this,arguments)}),K=this.addUnitInput(n,"pt",20,44,function(){J.apply(this,arguments)}),U=(mxUtils.br(n),this.addLabel(n,mxResources.get("left"),162),this.addLabel(n,mxResources.get("bottom"),91),this.addLabel(n,mxResources.get("right"),20),c.cellEditor.isContentEditing()?(w=d=null,t.appendChild(this.createRelativeOption(mxResources.get("lineheight"),null,null,function(t){var e=""==t.value?120:parseInt(t.value),e=Math.max(0,isNaN(e)?120:e);null!=d&&(c.cellEditor.restoreSelection(d),d=null);for(var n=c.getSelectedElement();null!=n&&n.nodeType!=mxConstants.NODETYPE_ELEMENT;)n=n.parentNode;null!=n&&n==c.cellEditor.textarea&&null!=c.cellEditor.textarea.firstChild&&("P"!=c.cellEditor.textarea.firstChild.nodeName&&(c.cellEditor.textarea.innerHTML="<p>"+c.cellEditor.textarea.innerHTML+"</p>"),n=c.cellEditor.textarea.firstChild),null!=n&&null!=c.cellEditor.textarea&&n!=c.cellEditor.textarea&&c.cellEditor.textarea.contains(n)&&(n.style.lineHeight=e+"%"),t.value=e+" %"},function(t){w=t,mxEvent.addListener(t,"mousedown",function(){document.activeElement==c.cellEditor.textarea&&(d=c.cellEditor.saveSelection())}),mxEvent.addListener(t,"touchstart",function(){document.activeElement==c.cellEditor.textarea&&(d=c.cellEditor.saveSelection())}),t.value="120 %"})),(e=l.cloneNode(!1)).style.paddingLeft="0px",n=this.editorUi.toolbar.addItems(["link","image"],e,!0),u=[this.editorUi.toolbar.addButton("geSprite-horizontalrule",mxResources.get("insertHorizontalRule"),function(){document.execCommand("inserthorizontalrule",!1)},e),this.editorUi.toolbar.addMenuFunctionInContainer(e,"geSprite-table",mxResources.get("table"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.addInsertTableItem(t)}))],this.styleButtons(n),this.styleButtons(u),(n=this.createPanel()).style.paddingTop="10px",n.style.paddingBottom="10px",n.appendChild(this.createTitle(mxResources.get("insert"))),n.appendChild(e),t.appendChild(n),(n=l.cloneNode(!1)).style.paddingLeft="0px",u=[this.editorUi.toolbar.addButton("geSprite-insertcolumnbefore",mxResources.get("insertColumnBefore"),mxUtils.bind(this,function(){try{null!=y&&c.insertColumn(y,null!=f?f.cellIndex:0)}catch(t){this.editorUi.handleError(t)}}),n),this.editorUi.toolbar.addButton("geSprite-insertcolumnafter",mxResources.get("insertColumnAfter"),mxUtils.bind(this,function(){try{null!=y&&c.insertColumn(y,null!=f?f.cellIndex+1:-1)}catch(t){this.editorUi.handleError(t)}}),n),this.editorUi.toolbar.addButton("geSprite-deletecolumn",mxResources.get("deleteColumn"),mxUtils.bind(this,function(){try{null!=y&&null!=f&&c.deleteColumn(y,f.cellIndex)}catch(t){this.editorUi.handleError(t)}}),n),this.editorUi.toolbar.addButton("geSprite-insertrowbefore",mxResources.get("insertRowBefore"),mxUtils.bind(this,function(){try{null!=y&&null!=C&&c.insertRow(y,C.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}}),n),this.editorUi.toolbar.addButton("geSprite-insertrowafter",mxResources.get("insertRowAfter"),mxUtils.bind(this,function(){try{null!=y&&null!=C&&c.insertRow(y,C.sectionRowIndex+1)}catch(t){this.editorUi.handleError(t)}}),n),this.editorUi.toolbar.addButton("geSprite-deleterow",mxResources.get("deleteRow"),mxUtils.bind(this,function(){try{null!=y&&null!=C&&c.deleteRow(y,C.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}}),n)],this.styleButtons(u),u[2].style.marginRight="9px",(e=this.createPanel()).style.paddingTop="10px",e.style.paddingBottom="10px",e.appendChild(this.createTitle(mxResources.get("table"))),e.appendChild(n),(l=l.cloneNode(!1)).style.paddingLeft="0px",u=[this.editorUi.toolbar.addButton("geSprite-strokecolor",mxResources.get("borderColor"),mxUtils.bind(this,function(n){var t;null!=y&&(t=y.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),this.editorUi.pickColor(t,function(t){var e=null==f||null!=n&&mxEvent.isShiftDown(n)?y:f;c.processElements(e,function(t){t.style.border=null}),null==t||t==mxConstants.NONE?(e.removeAttribute("border"),e.style.border="",e.style.borderCollapse=""):(e.setAttribute("border","1"),e.style.border="1px solid "+t,e.style.borderCollapse="collapse")}))}),l),this.editorUi.toolbar.addButton("geSprite-fillcolor",mxResources.get("backgroundColor"),mxUtils.bind(this,function(n){var t;null!=y&&(t=y.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),this.editorUi.pickColor(t,function(t){var e=null==f||null!=n&&mxEvent.isShiftDown(n)?y:f;c.processElements(e,function(t){t.style.backgroundColor=null}),e.style.backgroundColor=null==t||t==mxConstants.NONE?"":t}))}),l),this.editorUi.toolbar.addButton("geSprite-fit",mxResources.get("spacing"),function(){var t;null!=y&&(t=y.getAttribute("cellPadding")||0,t=new FilenameDialog(i,t,mxResources.get("apply"),mxUtils.bind(this,function(t){null!=t&&0<t.length?y.setAttribute("cellPadding",t):y.removeAttribute("cellPadding")}),mxResources.get("spacing")),i.showDialog(t.container,300,80,!0,!0),t.init())},l),this.editorUi.toolbar.addButton("geSprite-left",mxResources.get("left"),function(){null!=y&&y.setAttribute("align","left")},l),this.editorUi.toolbar.addButton("geSprite-center",mxResources.get("center"),function(){null!=y&&y.setAttribute("align","center")},l),this.editorUi.toolbar.addButton("geSprite-right",mxResources.get("right"),function(){null!=y&&y.setAttribute("align","right")},l)],this.styleButtons(u),u[2].style.marginRight="9px",e.appendChild(l),t.appendChild(e),W=e):(t.appendChild(e),t.appendChild(this.createRelativeOption(mxResources.get("opacity"),mxConstants.STYLE_TEXT_OPACITY)),t.appendChild(n)),mxUtils.bind(this,function(t,e,n){m=this.format.getSelectionState(),t=mxUtils.getValue(m.style,mxConstants.STYLE_FONTSTYLE,0),p(x[0],(t&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD),p(x[1],(t&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC),p(x[2],(t&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE),g.firstChild.nodeValue=mxUtils.getValue(m.style,mxConstants.STYLE_FONTFAMILY,Menus.prototype.defaultFont),p(G,"0"==mxUtils.getValue(m.style,mxConstants.STYLE_HORIZONTAL,"1")),!n&&document.activeElement==A||(t=parseFloat(mxUtils.getValue(m.style,mxConstants.STYLE_FONTSIZE,Menus.prototype.defaultFontSize)),A.value=isNaN(t)?"":t+" pt"),t=mxUtils.getValue(m.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),p(v,t==mxConstants.ALIGN_LEFT),p(S,t==mxConstants.ALIGN_CENTER),p(b,t==mxConstants.ALIGN_RIGHT),t=mxUtils.getValue(m.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE),p(k,t==mxConstants.ALIGN_TOP),p(V,t==mxConstants.ALIGN_MIDDLE),p(F,t==mxConstants.ALIGN_BOTTOM),t=mxUtils.getValue(m.style,mxConstants.STYLE_LABEL_POSITION,mxConstants.ALIGN_CENTER),e=mxUtils.getValue(m.style,mxConstants.STYLE_VERTICAL_LABEL_POSITION,mxConstants.ALIGN_MIDDLE),r.value=t==mxConstants.ALIGN_LEFT&&e==mxConstants.ALIGN_TOP?"topLeft":t==mxConstants.ALIGN_CENTER&&e==mxConstants.ALIGN_TOP?"top":t==mxConstants.ALIGN_RIGHT&&e==mxConstants.ALIGN_TOP?"topRight":t==mxConstants.ALIGN_LEFT&&e==mxConstants.ALIGN_BOTTOM?"bottomLeft":t==mxConstants.ALIGN_CENTER&&e==mxConstants.ALIGN_BOTTOM?"bottom":t==mxConstants.ALIGN_RIGHT&&e==mxConstants.ALIGN_BOTTOM?"bottomRight":t==mxConstants.ALIGN_LEFT?"left":t==mxConstants.ALIGN_RIGHT?"right":"center",(t=mxUtils.getValue(m.style,mxConstants.STYLE_TEXT_DIRECTION,mxConstants.DEFAULT_TEXT_DIRECTION))==mxConstants.TEXT_DIRECTION_RTL?h.value="rightToLeft":t==mxConstants.TEXT_DIRECTION_LTR?h.value="leftToRight":t==mxConstants.TEXT_DIRECTION_AUTO&&(h.value="automatic"),!n&&document.activeElement==O||(t=parseFloat(mxUtils.getValue(m.style,mxConstants.STYLE_SPACING,2)),O.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==P||(t=parseFloat(mxUtils.getValue(m.style,mxConstants.STYLE_SPACING_TOP,0)),P.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==K||(t=parseFloat(mxUtils.getValue(m.style,mxConstants.STYLE_SPACING_RIGHT,0)),K.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==H||(t=parseFloat(mxUtils.getValue(m.style,mxConstants.STYLE_SPACING_BOTTOM,0)),H.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==N||(t=parseFloat(mxUtils.getValue(m.style,mxConstants.STYLE_SPACING_LEFT,0)),N.value=isNaN(t)?"":t+" pt")})),q=this.installInputHandler(O,mxConstants.STYLE_SPACING,2,-999,999," pt"),Q=this.installInputHandler(P,mxConstants.STYLE_SPACING_TOP,0,-999,999," pt"),J=this.installInputHandler(K,mxConstants.STYLE_SPACING_RIGHT,0,-999,999," pt"),$=this.installInputHandler(H,mxConstants.STYLE_SPACING_BOTTOM,0,-999,999," pt"),tt=this.installInputHandler(N,mxConstants.STYLE_SPACING_LEFT,0,-999,999," pt");return this.addKeyHandler(A,U),this.addKeyHandler(O,U),this.addKeyHandler(P,U),this.addKeyHandler(K,U),this.addKeyHandler(H,U),this.addKeyHandler(N,U),c.getModel().addListener(mxEvent.CHANGE,U),this.listeners.push({destroy:function(){c.getModel().removeListener(U)}}),U(),c.cellEditor.isContentEditing()&&(T=!1,l=function(){T||(T=!0,window.setTimeout(function(){var n=c.getSelectedEditingElement();if(null!=n){var t,e=function(t,e){if(null!=t&&null!=e){if(t==e)return!0;if(t.length>e.length+1)return t.substring(t.length-e.length-1,t.length)=="-"+e}return!1},i=function(t){if(null!=c.getParentByName(n,t,c.cellEditor.textarea))return!0;for(var e=n;null!=e&&1==e.childNodes.length;)if((e=e.childNodes[0]).nodeName==t)return!0;return!1},l=function(t){return null!=(t=null!=t?t.fontSize:null)&&"px"==t.substring(t.length-2)?parseFloat(t):mxConstants.DEFAULT_FONTSIZE},s=function(t,e,n){return null!=n.style&&null!=e?(e=e.lineHeight,null!=n.style.lineHeight&&"%"==n.style.lineHeight.substring(n.style.lineHeight.length-1)?parseInt(n.style.lineHeight)/100:"px"==e.substring(e.length-2)?parseFloat(e)/t:parseInt(e)):""},o=mxUtils.getCurrentStyle(n),r=l(o),a=s(r,o,n),h=n.getElementsByTagName("*");if(0<h.length&&window.getSelection&&!mxClient.IS_IE&&!mxClient.IS_IE11)for(var d=window.getSelection(),u=0;u<h.length;u++)d.containsNode(h[u],!0)&&(temp=mxUtils.getCurrentStyle(h[u]),(t=s(r=Math.max(l(temp),r),temp,h[u]))==a&&!isNaN(t)||(a=""));null!=o&&(p(x[0],"bold"==o.fontWeight||400<o.fontWeight||i("B")||i("STRONG")),p(x[1],"italic"==o.fontStyle||i("I")||i("EM")),p(x[2],i("U")),p(_,i("SUP")),p(D,i("SUB")),c.cellEditor.isTableSelected()?(p(E,e(o.textAlign,"justify")),p(v,e(o.textAlign,"left")),p(S,e(o.textAlign,"center")),p(b,e(o.textAlign,"right"))):(i=c.cellEditor.align||mxUtils.getValue(m.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),e(o.textAlign,"justify")?(p(E,e(o.textAlign,"justify")),p(v,!1),p(S,!1),p(b,!1)):(p(E,!1),p(v,i==mxConstants.ALIGN_LEFT),p(S,i==mxConstants.ALIGN_CENTER),p(b,i==mxConstants.ALIGN_RIGHT))),y=c.getParentByName(n,"TABLE",c.cellEditor.textarea),C=null==y?null:c.getParentByName(n,"TR",y),f=null==y?null:c.getParentByNames(n,["TD","TH"],y),W.style.display=null!=y?"":"none",document.activeElement!=A&&("FONT"==n.nodeName&&"4"==n.getAttribute("size")&&null!=L?(n.removeAttribute("size"),n.style.fontSize=L+" pt",L=null):A.value=isNaN(r)?"":r+" pt",t=parseFloat(a),isNaN(t)?w.value="100 %":w.value=Math.round(100*t)+" %"),e=o.color.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),r=o.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)}),null!=R&&(X="#"==e.charAt(0)?e:"#000000",R(X,!0)),null!=M&&(j="#"==r.charAt(0)?r:null,M(j,!0)),null!=g.firstChild)&&(g.firstChild.nodeValue=Graph.stripQuotes(o.fontFamily))}T=!1},0))},(mxClient.IS_FF||mxClient.IS_EDGE||mxClient.IS_IE||mxClient.IS_IE11)&&mxEvent.addListener(c.cellEditor.textarea,"DOMSubtreeModified",l),mxEvent.addListener(c.cellEditor.textarea,"input",l),mxEvent.addListener(c.cellEditor.textarea,"touchend",l),mxEvent.addListener(c.cellEditor.textarea,"mouseup",l),mxEvent.addListener(c.cellEditor.textarea,"keyup",l),this.listeners.push({destroy:function(){}}),l()),t},window.StyleFormatPanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(StyleFormatPanel,BaseFormatPanel),StyleFormatPanel.prototype.defaultStrokeColor="black",StyleFormatPanel.prototype.init=function(){var t=this.format.getSelectionState();t.containsLabel||(t.containsImage&&1==t.vertices.length&&"image"==t.style.shape&&null!=t.style.image&&"data:image/svg+xml;"==t.style.image.substring(0,19)&&this.container.appendChild(this.addSvgStyles(this.createPanel())),t.containsImage&&"image"!=t.style.shape||this.container.appendChild(this.addFill(this.createPanel())),this.container.appendChild(this.addStroke(this.createPanel())),this.container.appendChild(this.addLineJumps(this.createPanel())),(t=this.createRelativeOption(mxResources.get("opacity"),mxConstants.STYLE_OPACITY,41)).style.paddingTop="8px",t.style.paddingBottom="8px",this.container.appendChild(t),this.container.appendChild(this.addEffects(this.createPanel()))),null!=(t=this.addEditOps(this.createPanel())).firstChild&&mxUtils.br(t),this.container.appendChild(this.addStyleOps(t))},StyleFormatPanel.prototype.getCssRules=function(t){var e=document.implementation.createHTMLDocument(""),n=document.createElement("style");return mxUtils.setTextContent(n,t),e.body.appendChild(n),n.sheet.cssRules},StyleFormatPanel.prototype.addSvgStyles=function(t){var e=this.format.getSelectionState();t.style.paddingTop="6px",t.style.paddingBottom="6px",t.style.fontWeight="bold",t.style.display="none";try{if(null!=(a=e.style.editableCssRules)){var n=new RegExp(a),i=e.style.image.substring(e.style.image.indexOf(",")+1),l=window.atob?atob(i):Base64.decode(i,!0),s=mxUtils.parseXml(l);if(null!=s)for(var o=s.getElementsByTagName("style"),e=0;e<o.length;e++)for(var r=this.getCssRules(mxUtils.getTextContent(o[e])),a=0;a<r.length;a++)this.addSvgRule(t,r[a],s,o[e],r,a,n)}}catch(t){}return t},StyleFormatPanel.prototype.addSvgRule=function(l,t,s,o,r,a,e){var h=this.editorUi.editor.graph;e.test(t.selectorText)&&((e=mxUtils.bind(this,function(t,n,e){var i=mxUtils.trim(t.style[n]);""!=i&&"url("!=i.substring(0,4)&&(t=this.createColorOption(e+" "+t.selectorText,function(){var t=i;return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},function(t){r[a].style[n]=t,t="";for(var e=0;e<r.length;e++)t+=r[e].cssText+" ";o.textContent=t,t=mxUtils.getXml(s.documentElement),h.setCellStyles(mxConstants.STYLE_IMAGE,"data:image/svg+xml,"+(window.btoa?btoa(t):Base64.encode(t,!0)),h.getSelectionCells())},"#ffffff",{install:function(t){},destroy:function(){}}),l.appendChild(t),l.style.display="")}))(t,"fill",mxResources.get("fill")),e(t,"stroke",mxResources.get("line")),e(t,"stop-color",mxResources.get("gradient")))},StyleFormatPanel.prototype.addEditOps=function(t){this.format.getSelectionState();var e=null;return 1==this.editorUi.editor.graph.getSelectionCount()&&((e=mxUtils.button(mxResources.get("editStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("editStyle").funct()}))).setAttribute("title",mxResources.get("editStyle")+" ("+this.editorUi.actions.get("editStyle").shortcut+")"),e.style.width="188px",e.style.marginBottom="2px",e.className="btn btn-secondary",t.appendChild(e)),t},StyleFormatPanel.prototype.addFill=function(n){for(var e=this.editorUi.editor.graph,i=this.format.getSelectionState(),l=(n.style.paddingTop="6px",n.style.paddingBottom="6px",document.createElement("select")),s=(l.style.position="absolute",l.style.marginTop="-2px",l.style.right="72px",l.style.width="70px",l.cloneNode(!1)),t=(mxEvent.addListener(l,"click",function(t){mxEvent.consume(t)}),mxEvent.addListener(s,"click",function(t){mxEvent.consume(t)}),1<=i.vertices.length?e.stylesheet.getDefaultVertexStyle():e.stylesheet.getDefaultEdgeStyle()),o=this.createCellColorOption(mxResources.get("gradient"),mxConstants.STYLE_GRADIENTCOLOR,null!=t[mxConstants.STYLE_GRADIENTCOLOR]?t[mxConstants.STYLE_GRADIENTCOLOR]:"#ffffff",function(t){l.style.display=null==t||t==mxConstants.NONE?"none":""},function(t){e.updateCellStyles(mxConstants.STYLE_GRADIENTCOLOR,t,e.getSelectionCells())}),r="image"==i.style.shape?mxConstants.STYLE_IMAGE_BACKGROUND:mxConstants.STYLE_FILLCOLOR,a="image"==i.style.shape?mxResources.get("background"):mxResources.get("fill"),t=1<=i.vertices.length?e.stylesheet.getDefaultVertexStyle():e.stylesheet.getDefaultEdgeStyle(),h=((t=this.createCellColorOption(a,r,null!=t[r]?t[r]:"#ffffff",null,mxUtils.bind(this,function(t){e.updateCellStyles(r,t,e.getSelectionCells())}))).style.fontWeight="bold",a=mxUtils.getValue(i.style,r,null),o.style.display=null!=a&&a!=mxConstants.NONE&&i.fill&&"image"!=i.style.shape?"":"none",[mxConstants.DIRECTION_NORTH,mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST]),a=0;a<h.length;a++){var d=document.createElement("option");d.setAttribute("value",h[a]),mxUtils.write(d,mxResources.get(h[a])),l.appendChild(d)}o.appendChild(l);var u=mxUtils.bind(this,function(){i=this.format.getSelectionState();var t=mxUtils.getValue(i.style,mxConstants.STYLE_GRADIENT_DIRECTION,mxConstants.DIRECTION_SOUTH),e=mxUtils.getValue(i.style,"fillStyle","auto");""==t&&(t=mxConstants.DIRECTION_SOUTH),l.value=t,s.value=e,n.style.display=i.fill?"":"none",t=mxUtils.getValue(i.style,mxConstants.STYLE_FILLCOLOR,null),!i.fill||i.containsImage||null==t||t==mxConstants.NONE||"filledEdge"==i.style.shape?(s.style.display="none",o.style.display="none"):(s.style.display="1"==i.style.sketch?"":"none",o.style.display="1"!=i.style.sketch||"solid"==e||"auto"==e?"":"none")});for(e.getModel().addListener(mxEvent.CHANGE,u),this.listeners.push({destroy:function(){e.getModel().removeListener(u)}}),u(),mxEvent.addListener(l,"change",function(t){e.setCellStyles(mxConstants.STYLE_GRADIENT_DIRECTION,l.value,e.getSelectionCells()),mxEvent.consume(t)}),mxEvent.addListener(s,"change",function(t){e.setCellStyles("fillStyle",s.value,e.getSelectionCells()),mxEvent.consume(t)}),n.appendChild(t),n.appendChild(o),t=this.getCustomColors(),a=0;a<t.length;a++)n.appendChild(this.createCellColorOption(t[a].title,t[a].key,t[a].defaultValue));return n},StyleFormatPanel.prototype.getCustomColors=function(){var t=this.format.getSelectionState(),e=[];return"swimlane"!=t.style.shape&&"table"!=t.style.shape||e.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),e},StyleFormatPanel.prototype.addStroke=function(t){function e(t){var e=parseInt(x.value);(e=Math.min(999,Math.max(1,isNaN(e)?1:e)))!=mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)&&(s.setCellStyles(mxConstants.STYLE_STROKEWIDTH,e,s.getSelectionCells()),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_STROKEWIDTH],"values",[e],"cells",s.getSelectionCells()))),x.value=e+" pt",mxEvent.consume(t)}function n(t){var e=parseInt(y.value);(e=Math.min(999,Math.max(1,isNaN(e)?1:e)))!=mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)&&(s.setCellStyles(mxConstants.STYLE_STROKEWIDTH,e,s.getSelectionCells()),l.fireEvent(new mxEventObject("styleChanged","keys",[mxConstants.STYLE_STROKEWIDTH],"values",[e],"cells",s.getSelectionCells()))),y.value=e+" pt",mxEvent.consume(t)}var l=this.editorUi,s=l.editor.graph,o=this.format.getSelectionState(),i=(t.style.paddingTop="4px",t.style.paddingBottom="4px",t.style.whiteSpace="normal",document.createElement("div")),r=(i.style.fontWeight="bold",o.stroke||(i.style.display="none"),document.createElement("select"));r.style.position="absolute",r.style.marginTop="-2px",r.style.right="72px",r.style.width="80px";for(var a=["sharp","rounded","curved"],h=0;h<a.length;h++){var d=document.createElement("option");d.setAttribute("value",a[h]),mxUtils.write(d,mxResources.get(a[h])),r.appendChild(d)}mxEvent.addListener(r,"change",function(t){s.getModel().beginUpdate();try{var e=[mxConstants.STYLE_ROUNDED,mxConstants.STYLE_CURVED],n=["0",null];"rounded"==r.value?n=["1",null]:"curved"==r.value&&(n=[null,"1"]);for(var i=0;i<e.length;i++)s.setCellStyles(e[i],n[i],s.getSelectionCells());l.fireEvent(new mxEventObject("styleChanged","keys",e,"values",n,"cells",s.getSelectionCells()))}finally{s.getModel().endUpdate()}mxEvent.consume(t)}),mxEvent.addListener(r,"click",function(t){mxEvent.consume(t)});var u="image"==o.style.shape?mxConstants.STYLE_IMAGE_BORDER:mxConstants.STYLE_STROKECOLOR,a="image"==o.style.shape?mxResources.get("border"):mxResources.get("line"),h=1<=o.vertices.length?s.stylesheet.getDefaultVertexStyle():s.stylesheet.getDefaultEdgeStyle(),p=((a=this.createCellColorOption(a,u,null!=h[u]?h[u]:"#000000",null,mxUtils.bind(this,function(t){s.updateCellStyles(u,t,s.getSelectionCells())}))).appendChild(r),i.appendChild(a),i.cloneNode(!1)),c=(p.style.fontWeight="normal",p.style.whiteSpace="nowrap",p.style.position="relative",p.style.paddingLeft="16px",p.style.marginBottom="2px",p.style.marginTop="2px",p.className="geToolbarContainer",mxUtils.bind(this,function(t,e,n,i,l){return t=this.editorUi.menus.styleChange(t,"",i,l,"geIcon",null),(i=document.createElement("div")).style.width=e+"px",i.style.height="1px",i.style.borderBottom="1px "+n+" "+StyleFormatPanel.prototype.defaultStrokeColor,i.style.paddingTop="6px",t.firstChild.firstChild.style.padding="0px 4px 0px 4px",t.firstChild.firstChild.style.width=e+"px",t.firstChild.firstChild.appendChild(i),t})),m=(h=this.editorUi.toolbar.addMenuFunctionInContainer(p,"geSprite-orthogonal",mxResources.get("pattern"),!1,mxUtils.bind(this,function(t){c(t,75,"solid",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources.get("solid")),c(t,75,"dashed",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources.get("dashed")),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources.get("dotted")+" (1)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources.get("dotted")+" (2)"),c(t,75,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources.get("dotted")+" (3)")})),p.cloneNode(!1)),g=this.editorUi.toolbar.addMenuFunctionInContainer(m,"geSprite-connection",mxResources.get("connection"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources.get("line")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources.get("link")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources.get("arrow")),this.editorUi.menus.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources.get("simpleArrow"))})),d=this.editorUi.toolbar.addMenuFunctionInContainer(m,"geSprite-orthogonal",mxResources.get("pattern"),!1,mxUtils.bind(this,function(t){c(t,33,"solid",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],[null,null]).setAttribute("title",mxResources.get("solid")),c(t,33,"dashed",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1",null]).setAttribute("title",mxResources.get("dashed")),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 1"]).setAttribute("title",mxResources.get("dotted")+" (1)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 2"]).setAttribute("title",mxResources.get("dotted")+" (2)"),c(t,33,"dotted",[mxConstants.STYLE_DASHED,mxConstants.STYLE_DASH_PATTERN],["1","1 4"]).setAttribute("title",mxResources.get("dotted")+" (3)")})),x=(a=p.cloneNode(!1),document.createElement("input")),y=(x.style.textAlign="right",x.style.marginTop="2px",x.style.width="41px",x.setAttribute("title",mxResources.get("linewidth")),p.appendChild(x),x.cloneNode(!0)),f=(m.appendChild(y),this.createStepper(x,e,1,9)),C=(f.style.display=x.style.display,f.style.marginTop="2px",p.appendChild(f),this.createStepper(y,n,1,9)),E=(C.style.display=y.style.display,C.style.marginTop="2px",m.appendChild(C),x.style.position="absolute",x.style.height="15px",x.style.left="141px",f.style.left="190px",y.style.position="absolute",y.style.left="141px",y.style.height="15px",C.style.left="190px",mxEvent.addListener(x,"blur",e),mxEvent.addListener(x,"change",e),mxEvent.addListener(y,"blur",n),mxEvent.addListener(y,"change",n),this.editorUi.toolbar.addMenuFunctionInContainer(a,"geSprite-orthogonal",mxResources.get("waypoints"),!1,mxUtils.bind(this,function(t){"arrow"!=o.style.shape&&(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources.get("straight")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources.get("orthogonal")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),"connector"==o.style.shape&&this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources.get("curved")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources.get("entityRelation")))}))),v=this.editorUi.toolbar.addMenuFunctionInContainer(a,"geSprite-startclassic",mxResources.get("linestart"),!1,mxUtils.bind(this,function(t){var e;"connector"!=o.style.shape&&"flexArrow"!=o.style.shape&&"filledEdge"!=o.style.shape||((e=this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.NONE,0],"geIcon",null,!1)).setAttribute("title",mxResources.get("none")),e.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils.htmlEntities(mxResources.get("none"))+"</font>","connector"==o.style.shape||"filledEdge"==o.style.shape?(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC,1],"geIcon geSprite geSprite-startclassic",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-startclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OPEN,0],"geIcon geSprite geSprite-startopen",null,!1).setAttribute("title",mxResources.get("openArrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-startopenthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["openAsync",0],"geIcon geSprite geSprite-startopenasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK,1],"geIcon geSprite geSprite-startblock",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-startblockthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["async",1],"geIcon geSprite geSprite-startasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OVAL,1],"geIcon geSprite geSprite-startoval",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND,1],"geIcon geSprite geSprite-startdiamond",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-startthindiamond",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC,0],"geIcon geSprite geSprite-startclassictrans",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-startclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK,0],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-startblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["async",0],"geIcon geSprite geSprite-startasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_OVAL,0],"geIcon geSprite geSprite-startovaltrans",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND,0],"geIcon geSprite geSprite-startdiamondtrans",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],[mxConstants.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-startthindiamondtrans",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["box",0],"geIcon geSprite geSvgSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["dash",0],"geIcon geSprite geSprite-startdash",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["cross",0],"geIcon geSprite geSprite-startcross",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["circlePlus",0],"geIcon geSprite geSprite-startcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["circle",1],"geIcon geSprite geSprite-startcircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERone",0],"geIcon geSprite geSprite-starterone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERmandOne",0],"geIcon geSprite geSprite-starteronetoone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERmany",0],"geIcon geSprite geSprite-startermany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERoneToMany",0],"geIcon geSprite geSprite-starteronetomany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-starteroneopt",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW,"startFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-startermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_STARTARROW],[mxConstants.ARROW_BLOCK],"geIcon geSprite geSprite-startblocktrans",null,!1).setAttribute("title",mxResources.get("block")))})),S=this.editorUi.toolbar.addMenuFunctionInContainer(a,"geSprite-endclassic",mxResources.get("lineend"),!1,mxUtils.bind(this,function(t){var e;"connector"!=o.style.shape&&"flexArrow"!=o.style.shape&&"filledEdge"!=o.style.shape||((e=this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.NONE,0],"geIcon",null,!1)).setAttribute("title",mxResources.get("none")),e.firstChild.firstChild.innerHTML='<font style="font-size:10px;">'+mxUtils.htmlEntities(mxResources.get("none"))+"</font>","connector"==o.style.shape||"filledEdge"==o.style.shape?(this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC,1],"geIcon geSprite geSprite-endclassic",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC_THIN,1],"geIcon geSprite geSprite-endclassicthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OPEN,0],"geIcon geSprite geSprite-endopen",null,!1).setAttribute("title",mxResources.get("openArrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OPEN_THIN,0],"geIcon geSprite geSprite-endopenthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["openAsync",0],"geIcon geSprite geSprite-endopenasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK,1],"geIcon geSprite geSprite-endblock",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK_THIN,1],"geIcon geSprite geSprite-endblockthin",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["async",1],"geIcon geSprite geSprite-endasync",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OVAL,1],"geIcon geSprite geSprite-endoval",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND,1],"geIcon geSprite geSprite-enddiamond",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND_THIN,1],"geIcon geSprite geSprite-endthindiamond",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC,0],"geIcon geSprite geSprite-endclassictrans",null,!1).setAttribute("title",mxResources.get("classic")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_CLASSIC_THIN,0],"geIcon geSprite geSprite-endclassicthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK,0],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources.get("block")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_BLOCK_THIN,0],"geIcon geSprite geSprite-endblockthintrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["async",0],"geIcon geSprite geSprite-endasynctrans",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_OVAL,0],"geIcon geSprite geSprite-endovaltrans",null,!1).setAttribute("title",mxResources.get("oval")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND,0],"geIcon geSprite geSprite-enddiamondtrans",null,!1).setAttribute("title",mxResources.get("diamond")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],[mxConstants.ARROW_DIAMOND_THIN,0],"geIcon geSprite geSprite-endthindiamondtrans",null,!1).setAttribute("title",mxResources.get("diamondThin")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["box",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-box",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["halfCircle",0],"geIcon geSprite geSvgSprite geFlipSprite geSprite-halfCircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["dash",0],"geIcon geSprite geSprite-enddash",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["cross",0],"geIcon geSprite geSprite-endcross",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["circlePlus",0],"geIcon geSprite geSprite-endcircleplus",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["circle",1],"geIcon geSprite geSprite-endcircle",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERone",0],"geIcon geSprite geSprite-enderone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERmandOne",0],"geIcon geSprite geSprite-enderonetoone",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERmany",0],"geIcon geSprite geSprite-endermany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERoneToMany",0],"geIcon geSprite geSprite-enderonetomany",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERzeroToOne",1],"geIcon geSprite geSprite-enderoneopt",null,!1),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW,"endFill"],["ERzeroToMany",1],"geIcon geSprite geSprite-endermanyopt",null,!1)):this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_ENDARROW],[mxConstants.ARROW_BLOCK],"geIcon geSprite geSprite-endblocktrans",null,!1).setAttribute("title",mxResources.get("block")))})),b=(this.addArrow(g,8),this.addArrow(E),this.addArrow(v),this.addArrow(S),(f=this.addArrow(h,9)).className="geIcon",f.style.width="auto",(C=this.addArrow(d,9)).className="geIcon",C.style.width="22px",document.createElement("div")),w=(b.style.width="85px",b.style.height="1px",b.style.borderBottom="1px solid "+StyleFormatPanel.prototype.defaultStrokeColor,b.style.marginBottom="9px",f.appendChild(b),document.createElement("div")),T=(w.style.width="23px",w.style.height="1px",w.style.borderBottom="1px solid "+StyleFormatPanel.prototype.defaultStrokeColor,w.style.marginBottom="9px",C.appendChild(w),h.style.height="15px",d.style.height="15px",g.style.height="15px",E.style.height="17px",v.style.marginLeft="3px",v.style.height="17px",S.style.marginLeft="3px",S.style.height="17px",t.appendChild(i),t.appendChild(m),t.appendChild(p),(h=p.cloneNode(!1)).style.paddingBottom="6px",h.style.paddingTop="4px",h.style.fontWeight="normal",(d=document.createElement("div")).style.position="absolute",d.style.marginLeft="3px",d.style.marginBottom="12px",d.style.marginTop="2px",d.style.fontWeight="normal",d.style.width="76px",mxUtils.write(d,mxResources.get("lineend")),h.appendChild(d),this.addUnitInput(h,"pt",74,33,function(){H.apply(this,arguments)})),A=this.addUnitInput(h,"pt",20,33,function(){N.apply(this,arguments)}),L=(mxUtils.br(h),(f=document.createElement("div")).style.height="8px",h.appendChild(f),d=d.cloneNode(!1),mxUtils.write(d,mxResources.get("linestart")),h.appendChild(d),this.addUnitInput(h,"pt",74,33,function(){O.apply(this,arguments)})),M=this.addUnitInput(h,"pt",20,33,function(){P.apply(this,arguments)}),R=(mxUtils.br(h),this.addLabel(h,mxResources.get("spacing"),74,50),this.addLabel(h,mxResources.get("size"),20,50),mxUtils.br(h),(i=i.cloneNode(!1)).style.fontWeight="normal",i.style.position="relative",i.style.paddingLeft="16px",i.style.marginBottom="2px",i.style.marginTop="6px",i.style.borderWidth="0px",i.style.paddingBottom="18px",(d=document.createElement("div")).style.position="absolute",d.style.marginLeft="3px",d.style.marginBottom="12px",d.style.marginTop="1px",d.style.fontWeight="normal",d.style.width="120px",mxUtils.write(d,mxResources.get("perimeter")),i.appendChild(d),this.addUnitInput(i,"pt",20,41,function(){U.apply(this,arguments)})),I=(o.edges.length==s.getSelectionCount()?(t.appendChild(a),t.appendChild(h)):o.vertices.length==s.getSelectionCount()&&t.appendChild(i),mxUtils.bind(this,function(t,e,n){function i(t,e,n,i){return null!=(n=n.getElementsByTagName("div")[0])&&(n.className=l.getCssClassForMarker(i,o.style.shape,t,e),"geSprite geSprite-noarrow"==n.className)&&(n.innerHTML=mxUtils.htmlEntities(mxResources.get("none")),n.style.backgroundImage="none",n.style.verticalAlign="top",n.style.marginTop="5px",n.style.fontSize="10px",n.style.filter="none",n.style.color=StyleFormatPanel.prototype.defaultStrokeColor,n.nextSibling.style.marginTop="0px"),n}o=this.format.getSelectionState(),mxUtils.getValue(o.style,u,null),!n&&document.activeElement==x||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)),x.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==y||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_STROKEWIDTH,1)),y.value=isNaN(t)?"":t+" pt"),r.style.visibility="connector"==o.style.shape||"filledEdge"==o.style.shape?"":"hidden","1"==mxUtils.getValue(o.style,mxConstants.STYLE_CURVED,null)?r.value="curved":"1"==mxUtils.getValue(o.style,mxConstants.STYLE_ROUNDED,null)&&(r.value="rounded"),"1"==mxUtils.getValue(o.style,mxConstants.STYLE_DASHED,null)?null==mxUtils.getValue(o.style,mxConstants.STYLE_DASH_PATTERN,null)?b.style.borderBottom="1px dashed "+StyleFormatPanel.prototype.defaultStrokeColor:b.style.borderBottom="1px dotted "+StyleFormatPanel.prototype.defaultStrokeColor:b.style.borderBottom="1px solid "+StyleFormatPanel.prototype.defaultStrokeColor,w.style.borderBottom=b.style.borderBottom,null!=(t=E.getElementsByTagName("div")[0])&&(e=mxUtils.getValue(o.style,mxConstants.STYLE_EDGE,null),"orthogonalEdgeStyle"==(e="1"==mxUtils.getValue(o.style,mxConstants.STYLE_NOEDGESTYLE,null)?null:e)&&"1"==mxUtils.getValue(o.style,mxConstants.STYLE_CURVED,null)?t.className="geSprite geSprite-curved":t.className="straight"==e||"none"==e||null==e?"geSprite geSprite-straight":"entityRelationEdgeStyle"==e?"geSprite geSprite-entity":"elbowEdgeStyle"==e?"geSprite "+("vertical"==mxUtils.getValue(o.style,mxConstants.STYLE_ELBOW,null)?"geSprite-verticalelbow":"geSprite-horizontalelbow"):"isometricEdgeStyle"==e?"geSprite "+("vertical"==mxUtils.getValue(o.style,mxConstants.STYLE_ELBOW,null)?"geSprite-verticalisometric":"geSprite-horizontalisometric"):"geSprite geSprite-orthogonal"),null!=(t=g.getElementsByTagName("div")[0])&&(t.className="link"==o.style.shape?"geSprite geSprite-linkedge":"flexArrow"==o.style.shape?"geSprite geSprite-arrow":"arrow"==o.style.shape?"geSprite geSprite-simplearrow":"geSprite geSprite-connection"),o.edges.length==s.getSelectionCount()?(m.style.display="",p.style.display="none"):(m.style.display="none",p.style.display=""),t=i(mxUtils.getValue(o.style,mxConstants.STYLE_STARTARROW,null),mxUtils.getValue(o.style,"startFill","1"),v,"start"),e=i(mxUtils.getValue(o.style,mxConstants.STYLE_ENDARROW,null),mxUtils.getValue(o.style,"endFill","1"),S,"end"),null!=t&&null!=e&&("arrow"==o.style.shape?(t.className="geSprite geSprite-noarrow",e.className="geSprite geSprite-endblocktrans"):"link"==o.style.shape&&(t.className="geSprite geSprite-noarrow",e.className="geSprite geSprite-noarrow")),mxUtils.setOpacity(E,"arrow"==o.style.shape?30:100),"connector"!=o.style.shape&&"flexArrow"!=o.style.shape&&"filledEdge"!=o.style.shape?(mxUtils.setOpacity(v,30),mxUtils.setOpacity(S,30)):(mxUtils.setOpacity(v,100),mxUtils.setOpacity(S,100)),!n&&document.activeElement==M||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE)),M.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==L||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_SOURCE_PERIMETER_SPACING,0)),L.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==A||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE)),A.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==L||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_TARGET_PERIMETER_SPACING,0)),T.value=isNaN(t)?"":t+" pt"),!n&&document.activeElement==R||(t=parseInt(mxUtils.getValue(o.style,mxConstants.STYLE_PERIMETER_SPACING,0)),R.value=isNaN(t)?"":t+" pt")})),P=this.installInputHandler(M,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_MARKERSIZE,0,999," pt"),O=this.installInputHandler(L,mxConstants.STYLE_SOURCE_PERIMETER_SPACING,0,-999,999," pt"),N=this.installInputHandler(A,mxConstants.STYLE_ENDSIZE,mxConstants.DEFAULT_MARKERSIZE,0,999," pt"),H=this.installInputHandler(T,mxConstants.STYLE_TARGET_PERIMETER_SPACING,0,-999,999," pt"),U=this.installInputHandler(R,mxConstants.STYLE_PERIMETER_SPACING,0,0,999," pt");return this.addKeyHandler(x,I),this.addKeyHandler(M,I),this.addKeyHandler(L,I),this.addKeyHandler(A,I),this.addKeyHandler(T,I),this.addKeyHandler(R,I),s.getModel().addListener(mxEvent.CHANGE,I),this.listeners.push({destroy:function(){s.getModel().removeListener(I)}}),I(),t},StyleFormatPanel.prototype.addLineJumps=function(t){var i=this.format.getSelectionState();if(Graph.lineJumpsEnabled&&0<i.edges.length&&0==i.vertices.length&&i.lineJumps){t.style.padding="8px 0px 24px 18px";var e=this.editorUi,n=e.editor.graph,l=((s=document.createElement("div")).style.position="absolute",s.style.fontWeight="bold",s.style.width="80px",mxUtils.write(s,mxResources.get("lineJumps")),t.appendChild(s),document.createElement("select"));l.style.position="absolute",l.style.marginTop="-2px",l.style.right="76px",l.style.width="62px";for(var s=["none","arc","gap","sharp"],o=0;o<s.length;o++){var r=document.createElement("option");r.setAttribute("value",s[o]),mxUtils.write(r,mxResources.get(s[o])),l.appendChild(r)}mxEvent.addListener(l,"change",function(t){n.getModel().beginUpdate();try{n.setCellStyles("jumpStyle",l.value,n.getSelectionCells()),e.fireEvent(new mxEventObject("styleChanged","keys",["jumpStyle"],"values",[l.value],"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}mxEvent.consume(t)}),mxEvent.addListener(l,"click",function(t){mxEvent.consume(t)}),t.appendChild(l);var a=this.addUnitInput(t,"pt",22,33,function(){h.apply(this,arguments)}),h=this.installInputHandler(a,"jumpSize",Graph.defaultJumpSize,0,999," pt"),d=mxUtils.bind(this,function(t,e,n){i=this.format.getSelectionState(),l.value=mxUtils.getValue(i.style,"jumpStyle","none"),!n&&document.activeElement==a||(t=parseInt(mxUtils.getValue(i.style,"jumpSize",Graph.defaultJumpSize)),a.value=isNaN(t)?"":t+" pt")});this.addKeyHandler(a,d),n.getModel().addListener(mxEvent.CHANGE,d),this.listeners.push({destroy:function(){n.getModel().removeListener(d)}}),d()}else t.style.display="none";return t},StyleFormatPanel.prototype.addEffects=function(t){var i,e=this.editorUi.editor.graph,n=(this.format.getSelectionState(),t.style.paddingTop="0px",t.style.paddingBottom="2px",document.createElement("table")),l=(n.style.width="100%",n.style.fontWeight="bold",n.style.paddingRight="20px",document.createElement("tbody")),s=document.createElement("tr"),o=(s.style.padding="0px",document.createElement("td")),r=(o.style.padding="0px",o.style.width="50%",o.setAttribute("valign","top"),o.cloneNode(!0)),a=(r.style.paddingLeft="8px",s.appendChild(o),s.appendChild(r),l.appendChild(s),n.appendChild(l),t.appendChild(n),o),h=mxUtils.bind(this,function(t,e,n){(t=this.createCellOption(t,e,n)).style.width="100%",a.appendChild(t),a=a==o?r:o,0}),d=mxUtils.bind(this,function(t,e,n){i=this.format.getSelectionState(),o.innerHTML="",r.innerHTML="",a=o,i.rounded&&h(mxResources.get("rounded"),mxConstants.STYLE_ROUNDED,0),"swimlane"==i.style.shape&&h(mxResources.get("divider"),"swimlaneLine",1),i.containsImage||h(mxResources.get("shadow"),mxConstants.STYLE_SHADOW,0),i.glass&&h(mxResources.get("glass"),mxConstants.STYLE_GLASS,0),i.comic&&h(mxResources.get("comic"),"comic",0)});return e.getModel().addListener(mxEvent.CHANGE,d),this.listeners.push({destroy:function(){e.getModel().removeListener(d)}}),d(),t},StyleFormatPanel.prototype.addStyleOps=function(t){t.style.paddingTop="10px",t.style.paddingBottom="10px";var e=mxUtils.button(mxResources.get("setAsDefaultStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("setAsDefaultStyle").funct()}));return e.setAttribute("title",mxResources.get("setAsDefaultStyle")+" ("+this.editorUi.actions.get("setAsDefaultStyle").shortcut+")"),e.style.width="188px",e.className="btn btn-secondary",t.appendChild(e),t},window.DiagramStylePanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(DiagramStylePanel,BaseFormatPanel),DiagramStylePanel.prototype.init=function(){this.container.appendChild(this.addView(this.createPanel()))},DiagramStylePanel.prototype.addView=function(t){var i=this.editorUi,h=i.editor.graph,d=h.getModel(),l=(t.style.whiteSpace="normal","1"==h.currentVertexStyle.sketch&&"1"==h.currentEdgeStyle.sketch),u="1"==h.currentVertexStyle.rounded,p="1"==h.currentEdgeStyle.curved,e=document.createElement("div"),n=(e.style.paddingBottom="12px",e.style.marginRight="16px",t.style.paddingTop="8px",document.createElement("table")),s=(n.style.width="100%",n.style.fontWeight="bold",document.createElement("tbody")),o=document.createElement("tr"),r=(o.style.padding="0px",document.createElement("td")),a=(r.style.padding="0px",r.style.width="50%",r.setAttribute("valign","middle"),r.cloneNode(!0)),c=(a.style.paddingLeft="8px",o.appendChild(r),o.appendChild(a),s.appendChild(o),n.appendChild(s),r.appendChild(this.createOption(mxResources.get("sketch"),function(){return l},function(t){(l=t)?(h.currentEdgeStyle.sketch="1",h.currentVertexStyle.sketch="1"):(delete h.currentEdgeStyle.sketch,delete h.currentVertexStyle.sketch),h.updateCellStyles("sketch",t?"1":null,h.getVerticesAndEdges())},null,function(t){t.style.width="auto"})),a.appendChild(this.createOption(mxResources.get("rounded"),function(){return u},function(t){(u=t)?h.currentVertexStyle.rounded="1":delete h.currentVertexStyle.rounded,h.updateCellStyles("rounded",t?"1":null,h.getVerticesAndEdges(!0,!0))},null,function(t){t.style.width="auto"})),r=r.cloneNode(!1),a=a.cloneNode(!1),(o=o.cloneNode(!1)).appendChild(r),o.appendChild(a),s.appendChild(o),r.appendChild(this.createOption(mxResources.get("curved"),function(){return p},function(t){(p=t)?h.currentEdgeStyle.curved="1":delete h.currentEdgeStyle.curved,h.updateCellStyles("curved",t?"1":null,h.getVerticesAndEdges(!1,!0))},null,function(t){t.style.width="auto"})),e.appendChild(n),t.appendChild(e),["fillColor","strokeColor","fontColor","gradientColor"]),m=mxUtils.bind(this,function(t,e){var n=h.getVerticesAndEdges();d.beginUpdate();try{for(var i=0;i<n.length;i++){var l=h.getCellStyle(n[i]);null!=l.labelBackgroundColor&&h.updateCellStyles("labelBackgroundColor",null!=e?e.background:null,[n[i]]);for(var s=d.isEdge(n[i]),o=d.getStyle(n[i]),r=s?h.currentEdgeStyle:h.currentVertexStyle,a=0;a<t.length;a++)(null!=l[t[a]]&&l[t[a]]!=mxConstants.NONE||t[a]!=mxConstants.STYLE_FILLCOLOR&&t[a]!=mxConstants.STYLE_STROKECOLOR)&&(o=mxUtils.setStyle(o,t[a],r[t[a]]));d.setStyle(n[i],o)}}finally{d.endUpdate()}}),g=mxUtils.bind(this,function(t,e,n){if(null!=t)for(var i=0;i<e.length;i++)(null!=t[e[i]]&&t[e[i]]!=mxConstants.NONE||e[i]!=mxConstants.STYLE_FILLCOLOR&&e[i]!=mxConstants.STYLE_STROKECOLOR)&&(t[e[i]]=n[e[i]])}),x=mxUtils.bind(this,function(t,e,n,i,l){if(null!=t)for(var s in null!=n&&null!=e.labelBackgroundColor&&(i=null!=i?i.background:null,l=null!=l?l:h,null==(i=null==i?l.background:i)&&(i=l.defaultPageBackgroundColor),e.labelBackgroundColor=i),t)(null==n||null!=e[s]&&e[s]!=mxConstants.NONE||s!=mxConstants.STYLE_FILLCOLOR&&s!=mxConstants.STYLE_STROKECOLOR)&&(e[s]=t[s])}),y=((r=mxUtils.button(mxResources.get("reset"),mxUtils.bind(this,function(t){if(0<(t=h.getVerticesAndEdges(!0,!0)).length){d.beginUpdate();try{h.updateCellStyles("sketch",null,t),h.updateCellStyles("rounded",null,t),h.updateCellStyles("curved",null,h.getVerticesAndEdges(!1,!0))}finally{d.endUpdate()}}h.defaultVertexStyle=mxUtils.clone(i.initialDefaultVertexStyle),h.defaultEdgeStyle=mxUtils.clone(i.initialDefaultEdgeStyle),i.clearDefaultStyle()}))).setAttribute("title",mxResources.get("reset")),r.style.textOverflow="ellipsis",r.style.maxWidth="90px",a.appendChild(r),mxUtils.bind(this,function(l,s,o,r,t){var e=document.createElement("div"),a=(e.style.cssText="position:absolute;display:inline-block;width:100%;height:100%;overflow:hidden;pointer-events:none;",t.appendChild(e),new Graph(e,null,null,h.getStylesheet()));a.resetViewOnRootChange=!1,a.foldingEnabled=!1,a.gridEnabled=!1,a.autoScroll=!1,a.setTooltips(!1),a.setConnectable(!1),a.setPanning(!1),a.setEnabled(!1),a.getCellStyle=function(t){var e=mxUtils.clone(Graph.prototype.getCellStyle.apply(this,arguments)),n=h.stylesheet.getDefaultVertexStyle(),i=s;return d.isEdge(t)&&(n=h.stylesheet.getDefaultEdgeStyle(),i=o),g(e,c,n),x(l,e,t,r,a),x(i,e,t,r,a),e},a.model.beginUpdate();try{var n=a.insertVertex(a.getDefaultParent(),null,"Shape",14,8,70,40,"strokeWidth=2;"),i=a.insertEdge(a.getDefaultParent(),null,"Connector",n,n,"edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;endSize=5;strokeWidth=2;");i.geometry.points=[new mxPoint(32,70)],i.geometry.offset=new mxPoint(0,8)}finally{a.model.endUpdate()}})),f=document.createElement("div"),C=(f.style.position="relative",t.appendChild(f),null==this.format.cachedStyleEntries&&(this.format.cachedStyleEntries=[]),mxUtils.bind(this,function(s,o,r,a,t){var n=this.format.cachedStyleEntries[t];null==n&&((n=document.createElement("div")).style.cssText="display:inline-block;position:relative;width:96px;height:90px;cursor:pointer;border:1px solid gray;margin:2px;overflow:hidden;",null!=a&&null!=a.background&&(n.style.backgroundColor=a.background),y(s,o,r,a,n),mxEvent.addGestureListeners(n,mxUtils.bind(this,function(t){n.style.opacity=.5}),null,mxUtils.bind(this,function(t){n.style.opacity=1,h.defaultVertexStyle=mxUtils.clone(i.initialDefaultVertexStyle),h.defaultEdgeStyle=mxUtils.clone(i.initialDefaultEdgeStyle),x(s,h.defaultVertexStyle),x(s,h.defaultEdgeStyle),x(o,h.defaultVertexStyle),x(r,h.defaultEdgeStyle),i.clearDefaultStyle(),l?(h.currentEdgeStyle.sketch="1",h.currentVertexStyle.sketch="1"):(h.currentEdgeStyle.sketch="0",h.currentVertexStyle.sketch="0"),h.currentVertexStyle.rounded=u?"1":"0",h.currentEdgeStyle.rounded="1",h.currentEdgeStyle.curved=p?"1":"0",d.beginUpdate();try{m(c,a);var e=new ChangePageSetup(i,null!=a?a.background:null);e.ignoreImage=!0,d.execute(e),d.execute(new ChangeGridColor(i,null!=a&&null!=a.gridColor?a.gridColor:h.view.defaultGridColor))}finally{d.endUpdate()}})),mxEvent.addListener(n,"mouseenter",mxUtils.bind(this,function(t){var l=h.getCellStyle,e=(t=h.background,h.view.gridColor);h.background=null!=a?a.background:null,h.view.gridColor=null!=a&&null!=a.gridColor?a.gridColor:h.view.defaultGridColor,h.getCellStyle=function(t){var e=mxUtils.clone(l.apply(this,arguments)),n=h.stylesheet.getDefaultVertexStyle(),i=o;return d.isEdge(t)&&(n=h.stylesheet.getDefaultEdgeStyle(),i=r),g(e,c,n),x(s,e,t,a),x(i,e,t,a),e},h.refresh(),h.getCellStyle=l,h.background=t,h.view.gridColor=e})),mxEvent.addListener(n,"mouseleave",mxUtils.bind(this,function(t){h.refresh()})),mxClient.IS_IE||mxClient.IS_IE11||(this.format.cachedStyleEntries[t]=n)),f.appendChild(n)})),E=Math.ceil(Editor.styles.length/10),v=(this.format.currentStylePage=null!=this.format.currentStylePage?this.format.currentStylePage:0,[]),S=mxUtils.bind(this,function(){0<v.length&&(v[this.format.currentStylePage].style.background="#84d7ff");for(var t=10*this.format.currentStylePage;t<Math.min(10*(this.format.currentStylePage+1),Editor.styles.length);t++){var e=Editor.styles[t];C(e.commonStyle,e.vertexStyle,e.edgeStyle,e.graph,t)}}),b=mxUtils.bind(this,function(t){0<=t&&t<E&&(v[this.format.currentStylePage].style.background="transparent",f.innerHTML="",this.format.currentStylePage=t,S())});if(1<E){for((e=document.createElement("div")).style.whiteSpace="nowrap",e.style.position="relative",e.style.textAlign="center",e.style.paddingTop="4px",e.style.width="210px",t.style.paddingBottom="8px",a=0;a<E;a++){var w=document.createElement("div");w.style.display="inline-block",w.style.width="6px",w.style.height="6px",w.style.marginLeft="4px",w.style.marginRight="3px",w.style.borderRadius="3px",w.style.cursor="pointer",w.style.background="transparent",w.style.border="1px solid #b5b6b7",mxUtils.bind(this,function(t,e){mxEvent.addListener(w,"click",mxUtils.bind(this,function(){b(t)}))})(a,w),e.appendChild(w),v.push(w)}t.appendChild(e),S(),E<15&&(n=function(t){mxEvent.addListener(t,"mouseenter",function(){t.style.opacity="1"}),mxEvent.addListener(t,"mouseleave",function(){t.style.opacity="0.5"})},(r=document.createElement("div")).style.cssText="position:absolute;left:0px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ4eHh3d3d1dXVxcXF2dnZ2dnZ2dnZxcXF2dnYmb3w1AAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADRJREFUCNdjwACMAmBKaiGYs2oJmLPKAZ3DabU8AMRTXpUKopislqFyVzCAuUZgikkBZjoAcMYLnp53P/UAAAAASUVORK5CYII=);",mxEvent.addListener(r,"click",mxUtils.bind(this,function(){b(mxUtils.mod(this.format.currentStylePage-1,E))})),(a=document.createElement("div")).style.cssText="position:absolute;right:2px;top:4px;bottom:0px;width:20px;margin:0px;opacity:0.5;background-repeat:no-repeat;background-position:center center;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAQBAMAAADQT4M0AAAAIVBMVEUAAAB2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnZ2dnYBuwCcAAAACnRSTlMAfCTkhhvb7cQSPH2JPgAAADZJREFUCNdjQAOMAmBKaiGY8loF5rKswsZlrVo8AUiFrTICcbIWK8A5DF1gDoMymMPApIAwHwCS0Qx/U7qCBQAAAABJRU5ErkJggg==);",e.appendChild(r),e.appendChild(a),mxEvent.addListener(a,"click",mxUtils.bind(this,function(){b(mxUtils.mod(this.format.currentStylePage+1,E))})),n(r),n(a))}else S();return t},window.DiagramFormatPanel=function(t,e,n){BaseFormatPanel.call(this,t,e,n),this.init()},mxUtils.extend(DiagramFormatPanel,BaseFormatPanel),DiagramFormatPanel.showPageView=!0,DiagramFormatPanel.prototype.showBackgroundImageOption=!0,DiagramFormatPanel.prototype.init=function(){var t=this.editorUi.editor.graph;this.container.appendChild(this.addView(this.createPanel())),t.isEnabled()&&(this.container.appendChild(this.addOptions(this.createPanel())),this.container.appendChild(this.addPaperSize(this.createPanel())),this.container.appendChild(this.addStyleOps(this.createPanel())))},DiagramFormatPanel.prototype.addView=function(t){var e,n,i=this.editorUi,l=i.editor.graph;return t.appendChild(this.createTitle(mxResources.get("view"))),this.addGridOption(t),DiagramFormatPanel.showPageView&&t.appendChild(this.createOption(mxResources.get("pageView"),function(){return l.pageVisible},function(t){i.actions.get("pageView").funct()},{install:function(t){this.listener=function(){t(l.pageVisible)},i.addListener("pageViewChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}})),l.isEnabled()&&(e=this.createColorOption(mxResources.get("background"),function(){return l.background},function(t){(t=new ChangePageSetup(i,t)).ignoreImage=!0,l.model.execute(t)},"#ffffff",{install:function(t){this.listener=function(){t(l.background)},i.addListener("backgroundColorChanged",this.listener)},destroy:function(){i.removeListener(this.listener)}}),this.showBackgroundImageOption&&((n=mxUtils.button(mxResources.get("image"),function(t){i.showBackgroundImageDialog(null,i.editor.graph.backgroundImage),mxEvent.consume(t)})).style.position="absolute",n.className="geColorBtn",n.style.marginTop="-4px",n.style.paddingBottom=11==document.documentMode||mxClient.IS_MT?"0px":"2px",n.style.height="22px",n.style.right="72px",n.style.width="56px",e.appendChild(n)),t.appendChild(e)),t},DiagramFormatPanel.prototype.addOptions=function(t){var e=this.editorUi,n=e.editor.graph;return t.appendChild(this.createTitle(mxResources.get("options"))),n.isEnabled()&&(t.appendChild(this.createOption(mxResources.get("connectionArrows"),function(){return n.connectionArrowsEnabled},function(t){e.actions.get("connectionArrows").funct()},{install:function(t){this.listener=function(){t(n.connectionArrowsEnabled)},e.addListener("connectionArrowsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),t.appendChild(this.createOption(mxResources.get("connectionPoints"),function(){return n.connectionHandler.isEnabled()},function(t){e.actions.get("connectionPoints").funct()},{install:function(t){this.listener=function(){t(n.connectionHandler.isEnabled())},e.addListener("connectionPointsChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}})),t.appendChild(this.createOption(mxResources.get("guides"),function(){return n.graphHandler.guidesEnabled},function(t){e.actions.get("guides").funct()},{install:function(t){this.listener=function(){t(n.graphHandler.guidesEnabled)},e.addListener("guidesEnabledChanged",this.listener)},destroy:function(){e.removeListener(this.listener)}}))),t},DiagramFormatPanel.prototype.addGridOption=function(t){function e(t){var e=(i.isFloatUnit()?parseFloat:parseInt)(o.value);(e=i.fromUnit(Math.max(i.inUnit(1),isNaN(e)?i.inUnit(10):e)))!=s.getGridSize()&&s.setGridSize(e),o.value=i.inUnit(e)+" "+i.getUnit(),mxEvent.consume(t)}var n,i=this,l=this.editorUi,s=l.editor.graph,o=document.createElement("input"),r=(o.style.position="absolute",o.style.textAlign="right",o.style.width="38px",o.value=this.inUnit(s.getGridSize())+" "+this.getUnit(),this.createStepper(o,e,this.getUnitStep(),null,null,null,this.isFloatUnit()));o.style.display=s.isGridEnabled()?"":"none",r.style.display=o.style.display,mxEvent.addListener(o,"keydown",function(t){13==t.keyCode?(s.container.focus(),mxEvent.consume(t)):27==t.keyCode&&(o.value=s.getGridSize(),s.container.focus(),mxEvent.consume(t))}),mxEvent.addListener(o,"blur",e),mxEvent.addListener(o,"change",e),mxClient.IS_SVG?(o.style.marginTop="-2px",o.style.right="84px",r.style.marginTop=mxClient.IS_FF?"-16px":"-18px",r.style.right="72px",(n=this.createColorOption(mxResources.get("grid"),function(){var t=s.view.gridColor;return s.isGridEnabled()?t:null},function(t){var e=s.isGridEnabled();t==mxConstants.NONE?s.setGridEnabled(!1):(s.setGridEnabled(!0),l.setGridColor(t)),o.style.display=s.isGridEnabled()?"":"none",r.style.display=o.style.display,e!=s.isGridEnabled()&&l.fireEvent(new mxEventObject("gridEnabledChanged"))},Editor.isDarkMode()?s.view.defaultDarkGridColor:s.view.defaultGridColor,{install:function(t){this.listener=function(){t(s.isGridEnabled()?s.view.gridColor:null)},l.addListener("gridColorChanged",this.listener),l.addListener("gridEnabledChanged",this.listener)},destroy:function(){l.removeListener(this.listener)}})).appendChild(o),n.appendChild(r),t.appendChild(n)):(o.style.marginTop="2px",o.style.right="32px",r.style.marginTop="2px",r.style.right="20px",t.appendChild(o),t.appendChild(r),t.appendChild(this.createOption(mxResources.get("grid"),function(){return s.isGridEnabled()},function(t){s.setGridEnabled(t),s.isGridEnabled()&&(s.view.gridColor="#e0e0e0"),l.fireEvent(new mxEventObject("gridEnabledChanged"))},{install:function(t){this.listener=function(){o.style.display=s.isGridEnabled()?"":"none",r.style.display=o.style.display,t(s.isGridEnabled())},l.addListener("gridEnabledChanged",this.listener)},destroy:function(){l.removeListener(this.listener)}})))},DiagramFormatPanel.prototype.addDocumentProperties=function(t){return t.appendChild(this.createTitle(mxResources.get("options"))),t},DiagramFormatPanel.prototype.addPaperSize=function(t){function e(){l.set(i.pageFormat)}var n=this.editorUi,i=n.editor.graph,l=(t.appendChild(this.createTitle(mxResources.get("paperSize"))),PageSetupDialog.addPageFormatPanel(t,"formatpanel",i.pageFormat,function(t){null!=i.pageFormat&&i.pageFormat.width==t.width&&i.pageFormat.height==t.height||((t=new ChangePageSetup(n,null,null,t)).ignoreColor=!0,t.ignoreImage=!0,i.model.execute(t))}));this.addKeyHandler(l.widthInput,function(){l.set(i.pageFormat)}),this.addKeyHandler(l.heightInput,function(){l.set(i.pageFormat)});return n.addListener("pageFormatChanged",e),this.listeners.push({destroy:function(){n.removeListener(e)}}),i.getModel().addListener(mxEvent.CHANGE,e),this.listeners.push({destroy:function(){i.getModel().removeListener(e)}}),t},DiagramFormatPanel.prototype.addStyleOps=function(t){var e=mxUtils.button(mxResources.get("editData"),mxUtils.bind(this,function(t){this.editorUi.actions.get("editData").funct()}));return e.setAttribute("title",mxResources.get("editData")+" ("+this.editorUi.actions.get("editData").shortcut+")"),e.style.width="188px",e.style.marginBottom="2px",e.className="btn btn-secondary",t.appendChild(e),mxUtils.br(t),(e=mxUtils.button(mxResources.get("clearDefaultStyle"),mxUtils.bind(this,function(t){this.editorUi.actions.get("clearDefaultStyle").funct()}))).setAttribute("title",mxResources.get("clearDefaultStyle")+" ("+this.editorUi.actions.get("clearDefaultStyle").shortcut+")"),e.style.width="188px",e.className="btn btn-secondary",t.appendChild(e),t},DiagramFormatPanel.prototype.destroy=function(){BaseFormatPanel.prototype.destroy.apply(this,arguments),this.gridEnabledListener&&(this.editorUi.removeListener(this.gridEnabledListener),this.gridEnabledListener=null)},"undefined"!=typeof html4&&(html4.ATTRIBS["a::target"]=0,html4.ATTRIBS["source::src"]=0,html4.ATTRIBS["video::src"]=0),Date.prototype.toISOString||function(){function t(t){return t=1===(t=String(t)).length?"0"+t:t}Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+t(this.getUTCMonth()+1)+"-"+t(this.getUTCDate())+"T"+t(this.getUTCHours())+":"+t(this.getUTCMinutes())+":"+t(this.getUTCSeconds())+"."+String((this.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z"}}(),Date.now||(Date.now=function(){return(new Date).getTime()}),Uint8Array.from||(Uint8Array.from=function(){function a(t){return"function"==typeof t||"[object Function]"===e.call(t)}var e=Object.prototype.toString,h=Math.pow(2,53)-1;return function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!a(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}var l=Number(e.length),l=isNaN(l)?0:0!==l&&isFinite(l)?(0<l?1:-1)*Math.floor(Math.abs(l)):l;l=Math.min(Math.max(l,0),h);for(var s,o=a(this)?Object(new this(l)):Array(l),r=0;r<l;)s=e[r],o[r]=i?void 0===n?i(s,r):i.call(n,s,r):s,r+=1;return o.length=l,o}}()),mxConstants.POINTS=1,mxConstants.MILLIMETERS=2,mxConstants.INCHES=3,mxConstants.PIXELS_PER_MM=3.937,mxConstants.PIXELS_PER_INCH=100,mxConstants.SHADOW_OPACITY=.25,mxConstants.SHADOWCOLOR="#000000",mxConstants.VML_SHADOWCOLOR="#d0d0d0",mxGraph.prototype.pageBreakColor="#c0c0c0",mxGraph.prototype.pageScale=1,!function(){try{var t;null!=navigator&&null!=navigator.language&&(t=navigator.language.toLowerCase(),mxGraph.prototype.pageFormat="en-us"===t||"en-ca"===t||"es-mx"===t?mxConstants.PAGE_FORMAT_LETTER_PORTRAIT:mxConstants.PAGE_FORMAT_A4_PORTRAIT)}catch(t){}}(),mxText.prototype.baseSpacingTop=5,mxText.prototype.baseSpacingBottom=1,mxGraphModel.prototype.ignoreRelativeEdgeParent=!1,mxGraphView.prototype.gridImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhCgAKAJEAAAAAAP///8zMzP///yH5BAEAAAMALAAAAAAKAAoAAAIJ1I6py+0Po2wFADs=":IMAGE_PATH+"/grid.gif",mxGraphView.prototype.gridSteps=4,mxGraphView.prototype.minGridSize=4,mxGraphView.prototype.defaultGridColor="#d0d0d0",mxGraphView.prototype.defaultDarkGridColor="#6e6e6e",mxGraphView.prototype.gridColor=mxGraphView.prototype.defaultGridColor,mxGraphView.prototype.unit=mxConstants.POINTS,mxGraphView.prototype.setUnit=function(t){this.unit!=t&&(this.unit=t,this.fireEvent(new mxEventObject("unitChanged","unit",t)))},mxSvgCanvas2D.prototype.foAltText="[Not supported by viewer]",mxShape.prototype.getConstraints=function(t,e,n){return null},mxImageShape.prototype.getImageDataUri=function(){var t=this.image;return"data:image/svg+xml;base64,"==t.substring(0,26)&&null!=this.style&&"1"==mxUtils.getValue(this.style,"clipSvg","0")&&(null!=this.clippedSvg&&this.clippedImage==t||(this.clippedSvg=Graph.clipSvgDataUri(t),this.clippedImage=t),t=this.clippedSvg),t},window.Graph=function(t,e,n,i,l,s){var o,r,a,h,d,u,p,c,m,g,x,y,f,C,E,v,S,b,w,T,A,L;mxGraph.call(this,t,e,n,i),this.themes=l||this.defaultThemes,this.currentEdgeStyle=mxUtils.clone(this.defaultEdgeStyle),this.currentVertexStyle=mxUtils.clone(this.defaultVertexStyle),this.standalone=null!=s&&s,e=(t=this.baseUrl).indexOf("//"),this.domainPathUrl=this.domainUrl="",0<e&&(0<(e=t.indexOf("/",e+2))&&(this.domainUrl=t.substring(0,e)),0<(e=t.lastIndexOf("/")))&&(this.domainPathUrl=t.substring(0,e+1)),this.isHtmlLabel=function(t){return null!=(t=this.getCurrentCellStyle(t))&&("1"==t.html||"wrap"==t[mxConstants.STYLE_WHITE_SPACE])},this.edgeMode&&(h=a=r=o=null,d=!1,this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){if("mouseDown"==e.getProperty("eventName")&&this.isEnabled()){var n,i,l,s=(t=e.getProperty("event")).getState();if(!mxEvent.isAltDown(t.getEvent())&&null!=s)if(this.model.isEdge(s.cell))o=new mxPoint(t.getGraphX(),t.getGraphY()),d=this.isCellSelected(s.cell),r=t,null!=(a=s).text&&null!=s.text.boundingBox&&mxUtils.contains(s.text.boundingBox,t.getGraphX(),t.getGraphY())?h=mxEvent.LABEL_HANDLE:null!=(l=this.selectionCellsHandler.getHandler(s.cell))&&null!=l.bends&&0<l.bends.length&&(h=l.getHandleForEvent(t));else if(!this.panningHandler.isActive()&&!mxEvent.isControlDown(t.getEvent())&&(null==(l=this.selectionCellsHandler.getHandler(s.cell))||null==l.getHandleForEvent(t)))for((e=new mxRectangle(t.getGraphX()-1,t.getGraphY()-1)).grow(mxEvent.isTouchEvent(t.getEvent())?mxShape.prototype.svgStrokeTolerance-1:(mxShape.prototype.svgStrokeTolerance+1)/2),this.isTableCell(s.cell)&&!this.isCellSelected(s.cell)&&(n=this.model.getParent(s.cell),l=this.model.getParent(n),!this.isCellSelected(l))&&(mxUtils.intersects(e,new mxRectangle(s.x,s.y-2,s.width,3))&&this.model.getChildAt(l,0)!=n||mxUtils.intersects(e,new mxRectangle(s.x,s.y+s.height-2,s.width,3))||mxUtils.intersects(e,new mxRectangle(s.x-2,s.y,2,s.height))&&this.model.getChildAt(n,0)!=s.cell||mxUtils.intersects(e,new mxRectangle(s.x+s.width-2,s.y,2,s.height)))&&(n=this.selectionCellsHandler.isHandled(l),this.selectCellForEvent(l,t.getEvent()),null!=(l=this.selectionCellsHandler.getHandler(l)))&&null!=(i=l.getHandleForEvent(t))&&(l.start(t.getGraphX(),t.getGraphY(),i),l.blockDelayedSelection=!n,t.consume());!t.isConsumed()&&null!=s&&(this.isTableCell(s.cell)||this.isTableRow(s.cell)||this.isTable(s.cell));)this.isSwimlane(s.cell)&&(l=this.getActualStartSize(s.cell),n=this.view.scale,(0<l.x||0<l.width)&&mxUtils.intersects(e,new mxRectangle(s.x+(l.x-l.width-1)*n+(0==l.x?s.width:0),s.y,1,s.height))||(0<l.y||0<l.height)&&mxUtils.intersects(e,new mxRectangle(s.x,s.y+(l.y-l.height-1)*n+(0==l.y?s.height:0),s.width,1)))&&(this.selectCellForEvent(s.cell,t.getEvent()),null!=(l=this.selectionCellsHandler.getHandler(s.cell))&&(i=mxEvent.CUSTOM_HANDLE-l.customHandles.length+1,l.start(t.getGraphX(),t.getGraphY(),i),t.consume())),s=this.view.getState(this.model.getParent(s.cell))}})),this.addMouseListener({mouseDown:function(t,e){},mouseMove:mxUtils.bind(this,function(t,e){for(var n in t=this.selectionCellsHandler.handlers.map)if(null!=t[n].index)return;if(this.isEnabled()&&!this.panningHandler.isActive()&&!mxEvent.isAltDown(e.getEvent()))if(t=this.tolerance,null!=o&&null!=a&&null!=r){var i,l,s,n=a;(Math.abs(o.x-e.getGraphX())>t||Math.abs(o.y-e.getGraphY())>t)&&(null!=(i=null==(i=this.selectionCellsHandler.getHandler(n.cell))&&this.model.isEdge(n.cell)?this.createHandler(n):i)&&null!=i.bends&&0<i.bends.length&&(t=i.getHandleForEvent(r),s=(l=this.view.getEdgeStyle(n))==mxEdgeStyle.EntityRelation,d||h!=mxEvent.LABEL_HANDLE||(t=h),s&&0!=t&&t!=i.bends.length-1&&t!=mxEvent.LABEL_HANDLE?!s||null==n.visibleSourceState&&null==n.visibleTargetState||(this.graphHandler.reset(),e.consume()):t!=mxEvent.LABEL_HANDLE&&0!=t&&null==n.visibleSourceState&&t!=i.bends.length-1&&null==n.visibleTargetState||(s||t==mxEvent.LABEL_HANDLE||(null!=(s=n.absolutePoints)&&(null==l&&null==t||l==mxEdgeStyle.OrthConnector)&&null==(t=h)&&((t=new mxRectangle(o.x,o.y)).grow(mxEdgeHandler.prototype.handleImage.width/2),t=mxUtils.contains(t,s[0].x,s[0].y)?0:mxUtils.contains(t,s[s.length-1].x,s[s.length-1].y)?i.bends.length-1:null!=l&&(2==s.length||3==s.length&&(0==Math.round(s[0].x-s[1].x)&&0==Math.round(s[1].x-s[2].x)||0==Math.round(s[0].y-s[1].y)&&0==Math.round(s[1].y-s[2].y)))?2:(t=mxUtils.findNearestSegment(n,o.x,o.y),null==l?mxEvent.VIRTUAL_HANDLE-t:t+1)),null==t&&(t=mxEvent.VIRTUAL_HANDLE)),i.start(e.getGraphX(),e.getGraphX(),t),e.consume(),this.graphHandler.reset())),null!=i&&(this.selectionCellsHandler.isHandlerActive(i)?this.isCellSelected(n.cell)||(this.selectionCellsHandler.handlers.put(n.cell,i),this.selectCellForEvent(n.cell,e.getEvent())):this.isCellSelected(n.cell)||i.destroy()),d=!1,o=r=a=h=null)}else if(null!=(n=e.getState())){if(i=null,this.model.isEdge(n.cell))(t=new mxRectangle(e.getGraphX(),e.getGraphY())).grow(mxEdgeHandler.prototype.handleImage.width/2),null!=(s=n.absolutePoints)&&(null!=n.text&&null!=n.text.boundingBox&&mxUtils.contains(n.text.boundingBox,e.getGraphX(),e.getGraphY())?i="move":mxUtils.contains(t,s[0].x,s[0].y)||mxUtils.contains(t,s[s.length-1].x,s[s.length-1].y)?i="pointer":null==n.visibleSourceState&&null==n.visibleTargetState||(i="crosshair",(t=this.view.getEdgeStyle(n))!=mxEdgeStyle.EntityRelation&&this.isOrthogonal(n)&&(e=mxUtils.findNearestSegment(n,e.getGraphX(),e.getGraphY()))<s.length-1&&0<=e&&(i=0==Math.round(s[e].x-s[e+1].x)?"col-resize":"row-resize")));else if(!mxEvent.isControlDown(e.getEvent()))for((t=new mxRectangle(e.getGraphX()-1,e.getGraphY()-1)).grow(mxShape.prototype.svgStrokeTolerance/2),this.isTableCell(n.cell)&&(e=this.model.getParent(n.cell),s=this.model.getParent(e),!this.isCellSelected(s))&&(mxUtils.intersects(t,new mxRectangle(n.x-2,n.y,2,n.height))&&this.model.getChildAt(e,0)!=n.cell||mxUtils.intersects(t,new mxRectangle(n.x+n.width-2,n.y,2,n.height))?i="col-resize":(mxUtils.intersects(t,new mxRectangle(n.x,n.y-2,n.width,3))&&this.model.getChildAt(s,0)!=e||mxUtils.intersects(t,new mxRectangle(n.x,n.y+n.height-2,n.width,3)))&&(i="row-resize")),e=n;null==i&&null!=e&&(this.isTableCell(e.cell)||this.isTableRow(e.cell)||this.isTable(e.cell));)this.isSwimlane(e.cell)&&(s=this.getActualStartSize(e.cell),l=this.view.scale,(0<s.x||0<s.width)&&mxUtils.intersects(t,new mxRectangle(e.x+(s.x-s.width-1)*l+(0==s.x?e.width*l:0),e.y,1,e.height))?i="col-resize":(0<s.y||0<s.height)&&mxUtils.intersects(t,new mxRectangle(e.x,e.y+(s.y-s.height-1)*l+(0==s.y?e.height:0),e.width,1))&&(i="row-resize")),e=this.view.getState(this.model.getParent(e.cell));null!=i&&n.setCursor(i)}}),mouseUp:mxUtils.bind(this,function(t,e){h=o=r=a=null})})),this.cellRenderer.getLabelValue=function(t){var e=mxCellRenderer.prototype.getLabelValue.apply(this,arguments);return e=t.view.graph.isHtmlLabel(t.cell)?1!=t.style.html?mxUtils.htmlEntities(e,!1):t.view.graph.sanitizeHtml(e):e},void 0!==mxVertexHandler&&(this.setConnectable(!0),this.setDropEnabled(!0),this.setPanning(!0),this.setTooltips(!0),this.setAllowLoops(!0),this.allowAutoPanning=!0,this.constrainChildren=this.resetEdgesOnConnect=!1,this.constrainRelativeChildren=!0,this.graphHandler.scrollOnMove=!1,this.graphHandler.scaleGrid=!0,this.connectionHandler.setCreateTarget(!1),this.connectionHandler.insertBeforeSource=!0,this.connectionHandler.isValidSource=function(t,e){return!1},this.alternateEdgeStyle="vertical",null==i&&this.loadStylesheet(),u=this.graphHandler.getGuideStates,this.graphHandler.getGuideStates=function(){var t=u.apply(this,arguments);if(this.graph.pageVisible){for(var e=[],n=this.graph.pageFormat,i=this.graph.pageScale,l=n.width*i,n=n.height*i,i=this.graph.view.translate,s=this.graph.view.scale,o=this.graph.getPageLayout(),r=0;r<o.width;r++)e.push(new mxRectangle(((o.x+r)*l+i.x)*s,(o.y*n+i.y)*s,l*s,n*s));for(r=1;r<o.height;r++)e.push(new mxRectangle((o.x*l+i.x)*s,((o.y+r)*n+i.y)*s,l*s,n*s));t=e.concat(t)}return t},mxDragSource.prototype.dragElementZIndex=mxPopupMenu.prototype.zIndex,mxGuide.prototype.getGuideColor=function(t,e){return null==t.cell?"#ffa500":mxConstants.GUIDE_COLOR},this.graphHandler.createPreviewShape=function(t){return this.previewColor="#000000"==this.graph.background?"#ffffff":mxGraphHandler.prototype.previewColor,mxGraphHandler.prototype.createPreviewShape.apply(this,arguments)},p=this.graphHandler.getCells,this.graphHandler.getCells=function(t){for(var e=p.apply(this,arguments),n=new mxDictionary,i=[],l=0;l<e.length;l++){var s=this.graph.isTableCell(t)&&this.graph.isTableCell(e[l])&&this.graph.isCellSelected(e[l])?this.graph.model.getParent(e[l]):this.graph.isTableRow(t)&&this.graph.isTableRow(e[l])&&this.graph.isCellSelected(e[l])?e[l]:this.graph.getCompositeParent(e[l]);null==s||n.get(s)||(n.put(s,!0),i.push(s))}return i},c=this.graphHandler.start,this.graphHandler.start=function(t,e,n,i){var l=!1;this.graph.isTableCell(t)&&(this.graph.isCellSelected(t)?l=!0:t=this.graph.model.getParent(t)),l||this.graph.isTableRow(t)&&this.graph.isCellSelected(t)||(t=this.graph.getCompositeParent(t)),c.apply(this,arguments)},this.connectionHandler.createTargetVertex=function(t,e){return e=this.graph.getCompositeParent(e),mxConnectionHandler.prototype.createTargetVertex.apply(this,arguments)},m=new mxRubberband(this),this.getRubberband=function(){return m},g=(new Date).getTime(),x=0,y=this.connectionHandler.mouseMove,this.connectionHandler.mouseMove=function(){var t=this.currentState;y.apply(this,arguments),x=t!=this.currentState?(g=(new Date).getTime(),0):(new Date).getTime()-g},f=this.connectionHandler.isOutlineConnectEvent,this.connectionHandler.isOutlineConnectEvent=function(t){return null!=this.currentState&&t.getState()==this.currentState&&2e3<x||(null==this.currentState||"0"!=mxUtils.getValue(this.currentState.style,"outlineConnect","1"))&&f.apply(this,arguments)},C=this.isToggleEvent,this.isToggleEvent=function(t){return C.apply(this,arguments)||!mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t)},E=m.isForceRubberbandEvent,m.isForceRubberbandEvent=function(t){return E.apply(this,arguments)&&!mxEvent.isShiftDown(t.getEvent())&&!mxEvent.isControlDown(t.getEvent())||mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t.getEvent())||mxUtils.hasScrollbars(this.graph.container)&&mxClient.IS_FF&&mxClient.IS_WIN&&null==t.getState()&&mxEvent.isTouchEvent(t.getEvent())},v=null,this.panningHandler.addListener(mxEvent.PAN_START,mxUtils.bind(this,function(){this.isEnabled()&&(v=this.container.style.cursor,this.container.style.cursor="move")})),this.panningHandler.addListener(mxEvent.PAN_END,mxUtils.bind(this,function(){this.isEnabled()&&(this.container.style.cursor=v)})),this.popupMenuHandler.autoExpand=!0,this.popupMenuHandler.isSelectOnPopup=function(t){return mxEvent.isMouseEvent(t.getEvent())},S=this.click,this.click=function(t){var e=null==t.state&&null!=t.sourceState&&this.isCellLocked(t.sourceState.cell);if(this.isEnabled()&&!e||t.isConsumed())return S.apply(this,arguments);t=e?t.sourceState.cell:t.getCell();null!=t&&null!=(t=this.getClickableLinkForCell(t))&&(this.isCustomLink(t)?this.customLinkClicked(t):this.openLink(t)),this.isEnabled()&&e&&this.clearSelection()},this.tooltipHandler.getStateForEvent=function(t){return t.sourceState},b=this.tooltipHandler.show,this.tooltipHandler.show=function(){if(b.apply(this,arguments),null!=this.div)for(var t=this.div.getElementsByTagName("a"),e=0;e<t.length;e++)null!=t[e].getAttribute("href")&&null==t[e].getAttribute("target")&&t[e].setAttribute("target","_blank")},this.tooltipHandler.getStateForEvent=function(t){return t.sourceState},this.getCursorForMouseEvent=function(t){var e=null==t.state&&null!=t.sourceState&&this.isCellLocked(t.sourceState.cell);return this.getCursorForCell(e?t.sourceState.cell:t.getCell())},w=this.getCursorForCell,this.getCursorForCell=function(t){if(!this.isEnabled()||this.isCellLocked(t)){if(null!=this.getClickableLinkForCell(t))return"pointer";if(this.isCellLocked(t))return"default"}return w.apply(this,arguments)},this.selectRegion=function(t,e){return t=this.getCells(t.x,t.y,t.width,t.height,null,null,null,function(t){return"1"==mxUtils.getValue(t.style,"locked","0")},!0),this.selectCellsForEvent(t,e),t},T=this.graphHandler.shouldRemoveCellsFromParent,this.graphHandler.shouldRemoveCellsFromParent=function(t,e,n){return!this.graph.isCellSelected(t)&&T.apply(this,arguments)},this.isCellLocked=function(t){for(;null!=t;){if("1"==mxUtils.getValue(this.getCurrentCellStyle(t),"locked","0"))return!0;t=this.model.getParent(t)}return!1},A=null,this.addListener(mxEvent.FIRE_MOUSE_EVENT,mxUtils.bind(this,function(t,e){"mouseDown"==e.getProperty("eventName")&&(t=e.getProperty("event").getState(),A=null==t||this.isSelectionEmpty()||this.isCellSelected(t.cell)?null:this.getSelectionCells())})),this.addListener(mxEvent.TAP_AND_HOLD,mxUtils.bind(this,function(t,e){var n;mxEvent.isMultiTouchEvent(e)||(t=e.getProperty("event"),null==(n=e.getProperty("cell"))?(t=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),m.start(t.x,t.y)):null!=A?this.addSelectionCells(A):1<this.getSelectionCount()&&this.isCellSelected(n)&&this.removeSelectionCell(n),A=null,e.consume())})),this.connectionHandler.selectCells=function(t,e){this.graph.setSelectionCell(e||t)},this.connectionHandler.constraintHandler.isStateIgnored=function(t,e){var n=t.view.graph;return e&&(n.isCellSelected(t.cell)||n.isTableRow(t.cell)&&n.selectionCellsHandler.isHandled(n.model.getParent(t.cell)))},this.selectionModel.addListener(mxEvent.CHANGE,mxUtils.bind(this,function(){var t=this.connectionHandler.constraintHandler;null!=t.currentFocus&&t.isStateIgnored(t.currentFocus,!0)&&(t.currentFocus=null,t.constraints=null,t.destroyIcons()),t.destroyFocusHighlight()})),Graph.touchStyle&&this.initTouch(),L=this.updateMouseEvent,this.updateMouseEvent=function(t){return null!=(t=L.apply(this,arguments)).state&&this.isCellLocked(t.getCell())&&(t.state=null),t}),this.currentTranslate=new mxPoint(0,0)},Graph.touchStyle=mxClient.IS_TOUCH||mxClient.IS_FF&&mxClient.IS_WIN||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints||null==window.urlParams||"1"==urlParams.touch,Graph.fileSupport=null!=window.File&&null!=window.FileReader&&null!=window.FileList&&(null==window.urlParams||"0"!=urlParams.filesupport),Graph.translateDiagram="1"==urlParams["translate-diagram"],Graph.diagramLanguage=null!=urlParams["diagram-language"]?urlParams["diagram-language"]:mxClient.language,Graph.lineJumpsEnabled=!0,Graph.defaultJumpSize=6,Graph.minTableColumnWidth=20,Graph.minTableRowHeight=20,Graph.foreignObjectWarningText="Viewer does not support full SVG 1.1",Graph.foreignObjectWarningLink="https://www.diagrams.net/doc/faq/svg-export-text-problems",Graph.pasteStyles="rounded shadow dashed dashPattern fontFamily fontSource fontSize fontColor fontStyle align verticalAlign strokeColor strokeWidth fillColor gradientColor swimlaneFillColor textOpacity gradientDirection glass labelBackgroundColor labelBorderColor opacity spacing spacingTop spacingLeft spacingBottom spacingRight endFill endArrow endSize targetPerimeterSpacing startFill startArrow startSize sourcePerimeterSpacing arcSize comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification comicStyle".split(" "),Graph.createSvgImage=function(t,e,n,i,l){return n=unescape(encodeURIComponent('<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+t+'px" height="'+e+'px" '+(null!=i&&null!=l?'viewBox="0 0 '+i+" "+l+'" ':"")+'version="1.1">'+n+"</svg>")),new mxImage("data:image/svg+xml;base64,"+(window.btoa?btoa(n):Base64.encode(n,!0)),t,e)},Graph.zapGremlins=function(t){for(var e=0,n=[],i=0;i<t.length;i++){var l=t.charCodeAt(i);(32<=l||9==l||10==l||13==l)&&65535!=l&&65534!=l||(n.push(t.substring(e,i)),e=i+1)}return 0<e&&e<t.length&&n.push(t.substring(e)),0==n.length?t:n.join("")},Graph.stringToBytes=function(t){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e},Graph.bytesToString=function(t){for(var e=Array(t.length),n=0;n<t.length;n++)e[n]=String.fromCharCode(t[n]);return e.join("")},Graph.base64EncodeUnicode=function(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))},Graph.base64DecodeUnicode=function(t){return decodeURIComponent(Array.prototype.map.call(atob(t),function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""))},Graph.compressNode=function(t,e){return t=mxUtils.getXml(t),Graph.compress(e?t:Graph.zapGremlins(t))},Graph.arrayBufferToString=function(t){for(var e="",n=(t=new Uint8Array(t)).byteLength,i=0;i<n;i++)e+=String.fromCharCode(t[i]);return e},Graph.stringToArrayBuffer=function(t){return Uint8Array.from(t,function(t){return t.charCodeAt(0)})},Graph.arrayBufferIndexOfString=function(t,e,n){var i=e.charCodeAt(0),l=1,s=-1;for(n=n||0;n<t.byteLength;n++)if(t[n]==i){s=n;break}for(n=s+1;-1<s&&n<t.byteLength&&n<s+e.length-1;n++){if(t[n]!=e.charCodeAt(l))return Graph.arrayBufferIndexOfString(t,e,s+1);l++}return l==e.length-1?s:-1},Graph.compress=function(t,e){return null==t||0==t.length||"undefined"==typeof pako?t:(t=e?pako.deflate(encodeURIComponent(t)):pako.deflateRaw(encodeURIComponent(t)),btoa(Graph.arrayBufferToString(new Uint8Array(t))))},Graph.decompress=function(t,e,n){return null==t||0==t.length||"undefined"==typeof pako?t:(t=Graph.stringToArrayBuffer(atob(t)),e=decodeURIComponent(e?pako.inflate(t,{to:"string"}):pako.inflateRaw(t,{to:"string"})),n?e:Graph.zapGremlins(e))},Graph.removePasteFormatting=function(t){for(;null!=t;)null!=t.firstChild&&Graph.removePasteFormatting(t.firstChild),t.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=t.style&&(t.style.whiteSpace="","#000000"==t.style.color)&&(t.style.color=""),t=t.nextSibling},Graph.sanitizeHtml=function(t,e){return html_sanitize(t,function(t){return null!=t&&"javascript:"!==t.toString().toLowerCase().substring(0,11)?t:null},function(t){return t})},Graph.sanitizeSvg=function(t){for(var e=t.getElementsByTagName("*"),n=0;n<e.length;n++)for(var i=0;i<e[n].attributes.length;i++){var l=e[n].attributes[i];2<l.name.length&&"on"==l.name.toLowerCase().substring(0,2)&&e[n].removeAttribute(l.name)}for(t=t.getElementsByTagName("script");0<t.length;)t[0].parentNode.removeChild(t[0])},Graph.clipSvgDataUri=function(t){if(!mxClient.IS_IE&&!mxClient.IS_IE11&&null!=t&&"data:image/svg+xml;base64,"==t.substring(0,26))try{var e=document.createElement("div"),n=(e.style.position="absolute",e.style.visibility="hidden",decodeURIComponent(escape(atob(t.substring(26))))),i=n.indexOf("<svg");if(0<=i){e.innerHTML=n.substring(i),Graph.sanitizeSvg(e);var l=e.getElementsByTagName("svg");if(0<l.length){document.body.appendChild(e);try{var s=l[0].getBBox();0<s.width&&0<s.height&&(e.getElementsByTagName("svg")[0].setAttribute("viewBox",s.x+" "+s.y+" "+s.width+" "+s.height),e.getElementsByTagName("svg")[0].setAttribute("width",s.width),e.getElementsByTagName("svg")[0].setAttribute("height",s.height))}catch(t){}finally{document.body.removeChild(e)}t=Editor.createSvgDataUri(mxUtils.getXml(l[0]))}}}catch(t){}return t},Graph.stripQuotes=function(t){return t=null!=t&&'"'==(t='"'==(t="'"==(t="'"==t.charAt(0)?t.substring(1):t).charAt(t.length-1)?t.substring(0,t.length-1):t).charAt(0)?t.substring(1):t).charAt(t.length-1)?t.substring(0,t.length-1):t},Graph.isLink=function(t){return null!=t&&Graph.linkPattern.test(t)},Graph.linkPattern=/^(https?:\/\/)?((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|((\d{1,3}\.){3}\d{1,3}))(\:\d+)?(\/[-a-z\d%_.~+]*)*(\?[;&a-z\d%_.~+=-]*)?(\#[-a-z\d_]*)?$/i,mxUtils.extend(Graph,mxGraph),Graph.prototype.minFitScale=null,Graph.prototype.maxFitScale=null,Graph.prototype.linkPolicy="frame"==urlParams.target?"blank":urlParams.target||"auto",Graph.prototype.linkTarget="frame"==urlParams.target?"_self":"_blank",Graph.prototype.linkRelation="nofollow noopener noreferrer",Graph.prototype.defaultScrollbars=!mxClient.IS_IOS,Graph.prototype.defaultPageVisible=!0,Graph.prototype.defaultGridEnabled=!0,Graph.prototype.lightbox=!1,Graph.prototype.defaultPageBackgroundColor="#ffffff",Graph.prototype.defaultPageBorderColor="#ffffff",Graph.prototype.scrollTileSize=new mxRectangle(0,0,400,400),Graph.prototype.transparentBackground=!0,Graph.prototype.selectParentAfterDelete=!1,Graph.prototype.defaultEdgeLength=80,Graph.prototype.edgeMode=!1,Graph.prototype.connectionArrowsEnabled=!0,Graph.prototype.placeholderPattern=/%(date{.*}|[^%^{^}]+)%/g,Graph.prototype.absoluteUrlPattern=/^(?:[a-z]+:)?\/\//i,Graph.prototype.defaultThemeName="default",Graph.prototype.defaultThemes={},Graph.prototype.baseUrl=null!=urlParams.base?decodeURIComponent(urlParams.base):(window!=window.top?document.referrer:document.location.toString()).split("#")[0],Graph.prototype.editAfterInsert=!1,Graph.prototype.builtInProperties=["label","tooltip","placeholders","placeholder"],Graph.prototype.standalone=!1,Graph.prototype.enableFlowAnimation=!1,Graph.prototype.init=function(t){var e;mxGraph.prototype.init.apply(this,arguments),this.cellRenderer.initializeLabel=function(n,i){mxCellRenderer.prototype.initializeLabel.apply(this,arguments);var e=n.view.graph.tolerance,l=!0,s=null,t=mxUtils.bind(this,function(t){l=!0,s=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t))}),o=mxUtils.bind(this,function(t){l=l&&null!=s&&Math.abs(s.x-mxEvent.getClientX(t))<e&&Math.abs(s.y-mxEvent.getClientY(t))<e}),r=mxUtils.bind(this,function(t){if(l)for(var e=mxEvent.getSource(t);null!=e&&e!=i.node;){if("a"==e.nodeName.toLowerCase()){n.view.graph.labelLinkClicked(n,e,t);break}e=e.parentNode}});mxEvent.addGestureListeners(i.node,t,o,r),mxEvent.addListener(i.node,"click",function(t){mxEvent.consume(t)})},null!=this.tooltipHandler&&(e=this.tooltipHandler.init,this.tooltipHandler.init=function(){e.apply(this,arguments),null!=this.div&&mxEvent.addListener(this.div,"click",mxUtils.bind(this,function(t){var e=mxEvent.getSource(t);"A"==e.nodeName&&null!=(e=e.getAttribute("href"))&&this.graph.isCustomLink(e)&&(mxEvent.isTouchEvent(t)||!mxEvent.isPopupTrigger(t))&&this.graph.customLinkClicked(e)&&mxEvent.consume(t)}))}),this.addListener(mxEvent.SIZE,mxUtils.bind(this,function(t,e){null!=this.container&&this.flowAnimationStyle&&(t=this.flowAnimationStyle.getAttribute("id"),this.flowAnimationStyle.innerHTML=this.getFlowAnimationStyleCss(t))})),this.initLayoutManager()},!function(){Graph.prototype.useCssTransforms=!1,Graph.prototype.currentScale=1,Graph.prototype.currentTranslate=new mxPoint(0,0),Graph.prototype.getVerticesAndEdges=function(e,n){e=null==e||e,n=null==n||n;var i=this.model;return i.filterDescendants(function(t){return e&&i.isVertex(t)||n&&i.isEdge(t)},i.getRoot())},Graph.prototype.getCommonStyle=function(t){for(var e={},n=0;n<t.length;n++){var i=this.view.getState(t[n]);this.mergeStyle(i.style,e,0==n)}return e},Graph.prototype.mergeStyle=function(t,e,n){if(null!=t){var i,l={};for(i in t){var s=t[i];null!=s&&(l[i]=!0,null==e[i]&&n?e[i]=s:e[i]!=s&&delete e[i])}for(i in e)l[i]||delete e[i]}},Graph.prototype.getStartEditingCell=function(t,e){if(e=this.getCellStyle(t),e=parseInt(mxUtils.getValue(e,mxConstants.STYLE_STARTSIZE,0)),this.isTable(t)&&(!this.isSwimlane(t)||0==e)&&""==this.getLabel(t)&&0<this.model.getChildCount(t)&&(t=this.model.getChildAt(t,0),e=this.getCellStyle(t),e=parseInt(mxUtils.getValue(e,mxConstants.STYLE_STARTSIZE,0))),this.isTableRow(t)&&(!this.isSwimlane(t)||0==e)&&""==this.getLabel(t)&&0<this.model.getChildCount(t))for(e=0;e<this.model.getChildCount(t);e++){var n=this.model.getChildAt(t,e);if(this.isCellEditable(n)){t=n;break}}return t},Graph.prototype.copyStyle=function(t){var e=null;if(null!=t){e=mxUtils.clone(this.getCurrentCellStyle(t)),t=null!=(t=this.model.getStyle(t))?t.split(";"):[];for(var n=0;n<t.length;n++){var i,l=t[n],s=l.indexOf("=");0<=s&&(i=l.substring(0,s),l=l.substring(s+1),null==e[i])&&l==mxConstants.NONE&&(e[i]=mxConstants.NONE)}}return e},Graph.prototype.pasteStyle=function(t,e,n){n=null!=n?n:Graph.pasteStyles,this.model.beginUpdate();try{for(var i=0;i<e.length;i++)for(var l=this.getCurrentCellStyle(e[i]),s=0;s<n.length;s++){var o=l[n[s]],r=t[n[s]];o==r||null==o&&r==mxConstants.NONE||this.setCellStyles(n[s],r,[e[i]])}}finally{this.model.endUpdate()}},Graph.prototype.isFastZoomEnabled=function(){return"nocss"!=urlParams.zoom&&!mxClient.NO_FO&&!mxClient.IS_EDGE&&!this.useCssTransforms&&this.isCssTransformsSupported()},Graph.prototype.isCssTransformsSupported=function(){return!(this.dialect!=mxConstants.DIALECT_SVG||mxClient.NO_FO||this.lightbox&&mxClient.IS_SF)},Graph.prototype.getCellAt=function(t,e,n,i,l,s){return this.useCssTransforms&&(t=t/this.currentScale-this.currentTranslate.x,e=e/this.currentScale-this.currentTranslate.y),this.getScaledCellAt.apply(this,arguments)},Graph.prototype.getScaledCellAt=function(t,e,n,i,l,s){if(i=null==i||i,l=null==l||l,null!=(n=null==n&&null==(n=this.getCurrentRoot())?this.getModel().getRoot():n))for(var o=this.model.getChildCount(n)-1;0<=o;o--){var r=this.model.getChildAt(n,o),a=this.getScaledCellAt(t,e,r,i,l,s);if(null!=a)return a;if(this.isCellVisible(r)&&(l&&this.model.isEdge(r)||i&&this.model.isVertex(r))&&null!=(a=this.view.getState(r))&&(null==s||!s(a,t,e))&&this.intersects(a,t,e))return r}return null},Graph.prototype.isRecursiveVertexResize=function(t){return!this.isSwimlane(t.cell)&&0<this.model.getChildCount(t.cell)&&!this.isCellCollapsed(t.cell)&&"1"==mxUtils.getValue(t.style,"recursiveResize","1")&&null==mxUtils.getValue(t.style,"childLayout",null)},Graph.prototype.isPart=function(t){return"1"==mxUtils.getValue(this.getCurrentCellStyle(t),"part","0")||this.isTableCell(t)||this.isTableRow(t)},Graph.prototype.getCompositeParent=function(t){for(;this.isPart(t);){var e=this.model.getParent(t);if(!this.model.isVertex(e))break;t=e}return t},Graph.prototype.filterSelectionCells=function(t){var e=this.getSelectionCells();if(null!=t){for(var n=[],i=0;i<e.length;i++)t(e[i])||n.push(e[i]);e=n}return e},mxCellHighlight.prototype.getStrokeWidth=function(t){return t=this.strokeWidth,this.graph.useCssTransforms&&(t/=this.graph.currentScale),t},mxGraphView.prototype.getGraphBounds=function(){var t,e,n=this.graphBounds;return this.graph.useCssTransforms&&(t=this.graph.currentTranslate,e=this.graph.currentScale,n=new mxRectangle((n.x+t.x)*e,(n.y+t.y)*e,n.width*e,n.height*e)),n},mxGraphView.prototype.viewStateChanged=function(){this.graph.useCssTransforms?this.validate():this.revalidate(),this.graph.sizeDidChange()};var e=mxGraphView.prototype.validate,i=(mxGraphView.prototype.validate=function(t){this.graph.useCssTransforms&&(this.graph.currentScale=this.scale,this.graph.currentTranslate.x=this.translate.x,this.graph.currentTranslate.y=this.translate.y,this.scale=1,this.translate.x=0,this.translate.y=0),e.apply(this,arguments),this.graph.useCssTransforms&&(this.graph.updateCssTransform(),this.scale=this.graph.currentScale,this.translate.x=this.graph.currentTranslate.x,this.translate.y=this.graph.currentTranslate.y)},mxGraph.prototype.getCellsForGroup),l=(Graph.prototype.getCellsForGroup=function(t){t=i.apply(this,arguments);for(var e=[],n=0;n<t.length;n++)this.isTableRow(t[n])||this.isTableCell(t[n])||e.push(t[n]);return e},mxGraph.prototype.getCellsForUngroup),s=(Graph.prototype.getCellsForUngroup=function(t){t=l.apply(this,arguments);for(var e=[],n=0;n<t.length;n++)this.isTable(t[n])||this.isTableRow(t[n])||this.isTableCell(t[n])||e.push(t[n]);return e},Graph.prototype.updateCssTransform=function(){var t=this.view.getDrawPane();if(null!=t)if(t=t.parentNode,this.useCssTransforms){var e,n=t.getAttribute("transform"),i=(t.setAttribute("transformOrigin","0 0"),Math.round(100*this.currentScale)/100);if(t.setAttribute("transform","scale("+i+","+i+")translate("+Math.round(100*this.currentTranslate.x)/100+","+Math.round(100*this.currentTranslate.y)/100+")"),n!=t.getAttribute("transform"))try{mxClient.IS_EDGE&&(e=t.style.display,t.style.display="none",t.getBBox(),t.style.display=e)}catch(t){}}else t.removeAttribute("transformOrigin"),t.removeAttribute("transform")},mxGraphView.prototype.validateBackgroundPage),o=(mxGraphView.prototype.validateBackgroundPage=function(){var t=this.graph.useCssTransforms,e=this.scale,n=this.translate;t&&(this.scale=this.graph.currentScale,this.translate=this.graph.currentTranslate),s.apply(this,arguments),t&&(this.scale=e,this.translate=n)},mxGraph.prototype.updatePageBreaks);mxGraph.prototype.updatePageBreaks=function(t,e,n){var i=this.useCssTransforms,l=this.view.scale,s=this.view.translate;i&&(this.view.scale=1,this.view.translate=new mxPoint(0,0),this.useCssTransforms=!1),o.apply(this,arguments),i&&(this.view.scale=l,this.view.translate=s,this.useCssTransforms=!0)}}(),Graph.prototype.isLightboxView=function(){return this.lightbox},Graph.prototype.isViewer=function(){return!1},Graph.prototype.labelLinkClicked=function(t,e,n){null!=(e=e.getAttribute("href"))&&!this.isCustomLink(e)&&(mxEvent.isLeftMouseButton(n)&&!mxEvent.isPopupTrigger(n)||mxEvent.isTouchEvent(n))&&(this.isEnabled()&&!this.isCellLocked(t.cell)||(t=this.isBlankLink(e)?this.linkTarget:"_top",this.openLink(this.getAbsoluteUrl(e),t)),mxEvent.consume(n))},Graph.prototype.openLink=function(t,e,n){var i,l=window;try{"_self"==e&&window!=window.top?window.location.href=t:t.substring(0,this.baseUrl.length)==this.baseUrl&&"#"==t.charAt(this.baseUrl.length)&&"_top"==e&&window==window.top?(i=t.split("#")[1],window.location.hash=="#"+i&&(window.location.hash=""),window.location.hash=i):null==(l=window.open(t,null!=e?e:"_blank"))||n||(l.opener=null)}catch(t){}return l},Graph.prototype.getLinkTitle=function(t){return t.substring(t.lastIndexOf("/")+1)},Graph.prototype.isCustomLink=function(t){return"data:"==t.substring(0,5)},Graph.prototype.customLinkClicked=function(t){return!1},Graph.prototype.isExternalProtocol=function(t){return"mailto:"===t.substring(0,7)},Graph.prototype.isBlankLink=function(t){return!this.isExternalProtocol(t)&&("blank"===this.linkPolicy||"self"!==this.linkPolicy&&!this.isRelativeUrl(t)&&t.substring(0,this.domainUrl.length)!==this.domainUrl)},Graph.prototype.isRelativeUrl=function(t){return null!=t&&!this.absoluteUrlPattern.test(t)&&"data:"!==t.substring(0,5)&&!this.isExternalProtocol(t)},Graph.prototype.getAbsoluteUrl=function(t){return t=null!=t&&this.isRelativeUrl(t)?"#"==t.charAt(0)?this.baseUrl+t:"/"==t.charAt(0)?this.domainUrl+t:this.domainPathUrl+t:t},Graph.prototype.initLayoutManager=function(){this.layoutManager=new mxLayoutManager(this),this.layoutManager.hasLayout=function(t,e){return null!=this.graph.getCellStyle(t).childLayout},this.layoutManager.getLayout=function(t,e){var n=this.graph.model.getParent(t);if(e!=mxEvent.BEGIN_UPDATE||this.hasLayout(n,e)){if("stackLayout"==(t=this.graph.getCellStyle(t)).childLayout)return(e=new mxStackLayout(this.graph,!0)).resizeParentMax="1"==mxUtils.getValue(t,"resizeParentMax","1"),e.horizontal="1"==mxUtils.getValue(t,"horizontalStack","1"),e.resizeParent="1"==mxUtils.getValue(t,"resizeParent","1"),e.resizeLast="1"==mxUtils.getValue(t,"resizeLast","0"),e.spacing=t.stackSpacing||e.spacing,e.border=t.stackBorder||e.border,e.marginLeft=t.marginLeft||0,e.marginRight=t.marginRight||0,e.marginTop=t.marginTop||0,e.marginBottom=t.marginBottom||0,e.allowGaps=t.allowGaps||0,e.fill=!0,e.allowGaps&&(e.gridSize=parseFloat(mxUtils.getValue(t,"stackUnitSize",20))),e;if("treeLayout"==t.childLayout)return(e=new mxCompactTreeLayout(this.graph)).horizontal="1"==mxUtils.getValue(t,"horizontalTree","1"),e.resizeParent="1"==mxUtils.getValue(t,"resizeParent","1"),e.groupPadding=mxUtils.getValue(t,"parentPadding",20),e.levelDistance=mxUtils.getValue(t,"treeLevelDistance",30),e.maintainParentLocation=!0,e.edgeRouting=!1,e.resetEdges=!1,e;if("flowLayout"==t.childLayout)return(e=new mxHierarchicalLayout(this.graph,mxUtils.getValue(t,"flowOrientation",mxConstants.DIRECTION_EAST))).resizeParent="1"==mxUtils.getValue(t,"resizeParent","1"),e.parentBorder=mxUtils.getValue(t,"parentPadding",20),e.maintainParentLocation=!0,e.intraCellSpacing=mxUtils.getValue(t,"intraCellSpacing",mxHierarchicalLayout.prototype.intraCellSpacing),e.interRankCellSpacing=mxUtils.getValue(t,"interRankCellSpacing",mxHierarchicalLayout.prototype.interRankCellSpacing),e.interHierarchySpacing=mxUtils.getValue(t,"interHierarchySpacing",mxHierarchicalLayout.prototype.interHierarchySpacing),e.parallelEdgeSpacing=mxUtils.getValue(t,"parallelEdgeSpacing",mxHierarchicalLayout.prototype.parallelEdgeSpacing),e;if("circleLayout"==t.childLayout)return new mxCircleLayout(this.graph);if("organicLayout"==t.childLayout)return new mxFastOrganicLayout(this.graph);if("tableLayout"==t.childLayout)return new TableLayout(this.graph)}return null}},Graph.prototype.getPageSize=function(){return this.pageVisible?new mxRectangle(0,0,this.pageFormat.width*this.pageScale,this.pageFormat.height*this.pageScale):this.scrollTileSize},Graph.prototype.getPageLayout=function(){var t,e,n=this.getPageSize(),i=this.getGraphBounds();return 0==i.width||0==i.height?new mxRectangle(0,0,1,1):new mxRectangle(t=Math.floor(Math.ceil(i.x/this.view.scale-this.view.translate.x)/n.width),e=Math.floor(Math.ceil(i.y/this.view.scale-this.view.translate.y)/n.height),Math.ceil((Math.floor((i.x+i.width)/this.view.scale)-this.view.translate.x)/n.width)-t,Math.ceil((Math.floor((i.y+i.height)/this.view.scale)-this.view.translate.y)/n.height)-e)},Graph.prototype.sanitizeHtml=function(t,e){return Graph.sanitizeHtml(t,e)},Graph.prototype.updatePlaceholders=function(){var t,e=!1;for(t in this.model.cells){var n=this.model.cells[t];this.isReplacePlaceholders(n)&&(this.view.invalidate(n,!1,!1),e=!0)}e&&this.view.validate()},Graph.prototype.isReplacePlaceholders=function(t){return null!=t.value&&"object"==typeof t.value&&"1"==t.value.getAttribute("placeholders")},Graph.prototype.isZoomWheelEvent=function(t){return mxEvent.isAltDown(t)||mxEvent.isControlDown(t)},Graph.prototype.isScrollWheelEvent=function(t){return!this.isZoomWheelEvent(t)},Graph.prototype.isTransparentClickEvent=function(t){return mxEvent.isAltDown(t)||mxClient.IS_CHROMEOS&&mxEvent.isShiftDown(t)},Graph.prototype.isIgnoreTerminalEvent=function(t){return mxEvent.isShiftDown(t)&&(mxEvent.isControlDown(t)||mxClient.IS_MAC&&mxEvent.isMetaDown(t))},Graph.prototype.isEdgeIgnored=function(t){var e=!1;return null!=t&&(t=this.getCurrentCellStyle(t),e="1"==mxUtils.getValue(t,"ignoreEdge","0")),e},Graph.prototype.isSplitTarget=function(t,e,n){return!this.model.isEdge(e[0])&&!mxEvent.isAltDown(n)&&!mxEvent.isShiftDown(n)&&mxGraph.prototype.isSplitTarget.apply(this,arguments)},Graph.prototype.getLabel=function(t){var e=mxGraph.prototype.getLabel.apply(this,arguments);return e=null!=e&&this.isReplacePlaceholders(t)&&null==t.getAttribute("placeholder")?this.replacePlaceholders(t,e):e},Graph.prototype.isLabelMovable=function(t){var e=this.getCurrentCellStyle(t);return!this.isCellLocked(t)&&(this.model.isEdge(t)&&this.edgeLabelsMovable||this.model.isVertex(t)&&(this.vertexLabelsMovable||"1"==mxUtils.getValue(e,"labelMovable","0")))},Graph.prototype.setGridSize=function(t){this.gridSize=t,this.fireEvent(new mxEventObject("gridSizeChanged"))},Graph.prototype.setDefaultParent=function(t){this.defaultParent=t,this.fireEvent(new mxEventObject("defaultParentChanged"))},Graph.prototype.getClickableLinkForCell=function(t){do{var e=this.getLinkForCell(t);if(null!=e)return e}while(null!=(t=this.model.getParent(t)));return null},Graph.prototype.getGlobalVariable=function(t){var e=null;return"date"==t?e=(new Date).toLocaleDateString():"time"==t?e=(new Date).toLocaleTimeString():"timestamp"==t?e=(new Date).toLocaleString():"date{"==t.substring(0,5)&&(t=t.substring(5,t.length-1),e=this.formatDate(new Date,t)),e},Graph.prototype.formatDate=function(t,e,n){null==this.dateFormatCache&&(this.dateFormatCache={i18n:{dayNames:"Sun Mon Tue Wed Thu Fri Sat Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),monthNames:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec January February March April May June July August September October November December".split(" ")},masks:{default:"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"}});function i(t,e){for(t=String(t),e=e||2;t.length<e;)t="0"+t;return t}var l=this.dateFormatCache;if(1!=arguments.length||"[object String]"!=Object.prototype.toString.call(t)||/\d/.test(t)||(e=t,t=void 0),t=t?new Date(t):new Date,isNaN(t))throw SyntaxError("invalid date");"UTC:"==(e=String(l.masks[e]||e||l.masks.default)).slice(0,4)&&(e=e.slice(4),n=!0);var s=t[(p=n?"getUTC":"get")+"Date"](),o=t[p+"Day"](),r=t[p+"Month"](),a=t[p+"FullYear"](),h=t[p+"Hours"](),d=t[p+"Minutes"](),u=t[p+"Seconds"](),p=t[p+"Milliseconds"](),c=n?0:t.getTimezoneOffset(),m={d:s,dd:i(s),ddd:l.i18n.dayNames[o],dddd:l.i18n.dayNames[o+7],m:r+1,mm:i(r+1),mmm:l.i18n.monthNames[r],mmmm:l.i18n.monthNames[r+12],yy:String(a).slice(2),yyyy:a,h:h%12||12,hh:i(h%12||12),H:h,HH:i(h),M:d,MM:i(d),s:u,ss:i(u),l:i(p,3),L:i(99<p?Math.round(p/10):p),t:h<12?"a":"p",tt:h<12?"am":"pm",T:h<12?"A":"P",TT:h<12?"AM":"PM",Z:n?"UTC":(String(t).match(/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g)||[""]).pop().replace(/[^-+\dA-Z]/g,""),o:(0<c?"-":"+")+i(100*Math.floor(Math.abs(c)/60)+Math.abs(c)%60,4),S:["th","st","nd","rd"][3<s%10?0:(10!=s%100-s%10)*s%10]};return e.replace(/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,function(t){return t in m?m[t]:t.slice(1,t.length-1)})},Graph.prototype.createLayersDialog=function(l){var s=document.createElement("div");s.style.position="absolute";for(var o=this.getModel(),t=o.getChildCount(o.root),e=0;e<t;e++)mxUtils.bind(this,function(t){var e=document.createElement("div"),n=(e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.padding="2px",e.style.whiteSpace="nowrap",document.createElement("input")),i=(n.style.display="inline-block",n.setAttribute("type","checkbox"),o.isVisible(t)&&(n.setAttribute("checked","checked"),n.defaultChecked=!0),e.appendChild(n),this.convertValueToString(t)||mxResources.get("background")||"Background");e.setAttribute("title",i),mxUtils.write(e,i),s.appendChild(e),mxEvent.addListener(n,"click",function(){null!=n.getAttribute("checked")?n.removeAttribute("checked"):n.setAttribute("checked","checked"),o.setVisible(t,n.checked),null!=l&&l(t)})})(o.getChildAt(o.root,e));return s},Graph.prototype.replacePlaceholders=function(t,e,n,i){if(i=[],null!=e){for(var l=0;match=this.placeholderPattern.exec(e);){var s=match[0];if(2<s.length&&"%label%"!=s&&"%tooltip%"!=s){var o=null;if(match.index>l&&"%"==e.charAt(match.index-1))o=s.substring(1);else{var r=s.substring(1,s.length-1);if("id"==r)o=t.id;else if(r.indexOf("{")<0)for(var a=t;null==o&&null!=a;)null!=a.value&&"object"==typeof a.value&&null==(o=Graph.translateDiagram&&null!=Graph.diagramLanguage?a.getAttribute(r+"_"+Graph.diagramLanguage):o)&&(o=a.hasAttribute(r)?null!=a.getAttribute(r)?a.getAttribute(r):"":null),a=this.model.getParent(a);null==(o=null==o?this.getGlobalVariable(r):o)&&null!=n&&(o=n[r])}i.push(e.substring(l,match.index)+(null!=o?o:s)),l=match.index+s.length}}i.push(e.substring(l))}return i.join("")},Graph.prototype.restoreSelection=function(t){if(null!=t&&0<t.length){for(var e=[],n=0;n<t.length;n++){var i=this.model.getCell(t[n].id);null!=i&&e.push(i)}this.setSelectionCells(e)}else this.clearSelection()},Graph.prototype.selectCellsForConnectVertex=function(t,e,n){2==t.length&&this.model.isVertex(t[1])?(this.setSelectionCell(t[1]),this.scrollCellToVisible(t[1]),null!=n&&(mxEvent.isTouchEvent(e)?n.update(n.getState(this.view.getState(t[1]))):n.reset())):this.setSelectionCells(t)},Graph.prototype.isCloneConnectSource=function(t){var e=null;return null!=this.layoutManager&&(e=this.layoutManager.getLayout(this.model.getParent(t))),this.isTableRow(t)||this.isTableCell(t)||null!=e&&e.constructor==mxStackLayout},Graph.prototype.connectVertex=function(s,o,t,r,e,n,a,h){if(n=n||!1,s.geometry.relative&&this.model.isEdge(s.parent))return[];for(;s.geometry.relative&&this.model.isVertex(s.parent);)s=s.parent;var d=this.isCloneConnectSource(s),i=d?s:this.getCompositeParent(s),u=s.geometry.relative&&null!=s.parent.geometry?new mxPoint(s.parent.geometry.width*s.geometry.x,s.parent.geometry.height*s.geometry.y):new mxPoint(i.geometry.x,i.geometry.y),l=(o==mxConstants.DIRECTION_NORTH?(u.x+=i.geometry.width/2,u.y-=t):o==mxConstants.DIRECTION_SOUTH?(u.x+=i.geometry.width/2,u.y+=i.geometry.height+t):(u.x=o==mxConstants.DIRECTION_WEST?u.x-t:u.x+(i.geometry.width+t),u.y+=i.geometry.height/2),this.view.getState(this.model.getParent(s)));t=this.view.scale;var i=(p=this.view.translate).x*t,p=p.y*t,c=(null!=l&&this.model.isVertex(l.cell)&&(i=l.x,p=l.y),this.model.isVertex(s.parent)&&s.geometry.relative&&(u.x+=s.parent.geometry.x,u.y+=s.parent.geometry.y),null!=(n=null!=(n=n?null:new mxRectangle(i+u.x*t,p+u.y*t).grow(40))?this.getCells(0,0,0,0,null,null,n):null)&&0<n.length?n.reverse()[0]:null),m=!1;for(null!=c&&this.model.isAncestor(c,s)&&(m=!0,c=null),null==c&&null!=(n=this.getSwimlaneAt(i+u.x*t,p+u.y*t))&&(m=!1,c=n),n=c;null!=n;){if(this.isCellLocked(n)){c=null;break}n=this.model.getParent(n)}null!=c&&(n=this.view.getState(s),l=this.view.getState(c),null!=n)&&null!=l&&mxUtils.intersects(n,l)&&(c=null);var g=!mxEvent.isShiftDown(r)||mxEvent.isControlDown(r)||e,x=(g&&("1"!=urlParams.sketch||e)&&(o==mxConstants.DIRECTION_NORTH?u.y-=s.geometry.height/2:o==mxConstants.DIRECTION_SOUTH?u.y+=s.geometry.height/2:u.x=o==mxConstants.DIRECTION_WEST?u.x-s.geometry.width/2:u.x+s.geometry.width/2),null==c||this.isCellConnectable(c)||this.isSwimlane(c)||(e=this.getModel().getParent(c),this.getModel().isVertex(e)&&this.isCellConnectable(e)&&(c=e)),c!=s&&!this.model.isEdge(c)&&(this.isCellConnectable(c)||this.isSwimlane(c))||(c=null),[]),y=null!=c&&this.isSwimlane(c),f=y?null:c;if(e=mxUtils.bind(this,function(t){if(null==a||null!=t||null==c&&d){this.model.beginUpdate();try{if(null==f&&g){for(var e=null!=t?t:s,n=this.getCellGeometry(e);null!=n&&n.relative;)e=this.getModel().getParent(e),n=this.getCellGeometry(e);e=d?s:this.getCompositeParent(e),f=null!=t?t:this.duplicateCells([e],!1)[0],null!=t&&this.addCells([f],this.model.getParent(s),null,null,null,!0),null!=(n=this.getCellGeometry(f))&&(null!=t&&"1"==urlParams.sketch&&(o==mxConstants.DIRECTION_NORTH?u.y-=n.height/2:o==mxConstants.DIRECTION_SOUTH?u.y+=n.height/2:u.x=o==mxConstants.DIRECTION_WEST?u.x-n.width/2:u.x+n.width/2),n.x=u.x-n.width/2,n.y=u.y-n.height/2),y?(this.addCells([f],c,null,null,null,!0),c=null):!g||null!=c||m||d||this.addCells([f],this.getDefaultParent(),null,null,null,!0)}var i=mxEvent.isControlDown(r)&&mxEvent.isShiftDown(r)&&g||null==c&&d?null:this.insertEdge(this.model.getParent(s),null,"",s,f,this.createCurrentEdgeStyle());if(null!=i&&this.connectionHandler.insertBeforeSource){var l=null;for(t=s;null!=t.parent&&null!=t.geometry&&t.geometry.relative&&t.parent!=i.parent;)t=this.model.getParent(t);null!=t&&null!=t.parent&&t.parent==i.parent&&(l=t.parent.getIndex(t),this.model.add(t.parent,i,l))}null==c&&null!=f&&null!=s.parent&&d&&o==mxConstants.DIRECTION_WEST&&(l=s.parent.getIndex(s),this.model.add(s.parent,f,l)),null!=i&&x.push(i),null==c&&null!=f&&x.push(f),null==f&&null!=i&&i.geometry.setTerminalPoint(u,!1),null!=i&&this.fireEvent(new mxEventObject("cellsInserted","cells",[i]))}finally{this.model.endUpdate()}}if(null==h)return x;h(x)}),null==a||null!=f||!g||null==c&&d)return e(f);a(i+u.x*t,p+u.y*t,e)},Graph.prototype.getIndexableText=function(){var t,e=document.createElement("div"),n=[];for(t in this.model.cells){var i=this.model.cells[t];(this.model.isVertex(i)||this.model.isEdge(i))&&(i=this.isHtmlLabel(i)?(e.innerHTML=this.sanitizeHtml(this.getLabel(i)),mxUtils.extractTextWithWhitespace([e])):this.getLabel(i),0<(i=mxUtils.trim(i.replace(/[\x00-\x1F\x7F-\x9F]|\s+/g," "))).length)&&n.push(i)}return n.join(" ")},Graph.prototype.convertValueToString=function(t){if(null==(n=this.model.getValue(t))||"object"!=typeof n)return mxGraph.prototype.convertValueToString.apply(this,arguments);var e=null;if(this.isReplacePlaceholders(t)&&null!=t.getAttribute("placeholder"))for(var n=t.getAttribute("placeholder"),i=t;null==e&&null!=i;)null!=i.value&&"object"==typeof i.value&&(e=i.hasAttribute(n)?null!=i.getAttribute(n)?i.getAttribute(n):"":null),i=this.model.getParent(i);else(e=null)==(e=Graph.translateDiagram&&null!=Graph.diagramLanguage?n.getAttribute("label_"+Graph.diagramLanguage):e)&&(e=n.getAttribute("label")||"");return e||""},Graph.prototype.getLinksForState=function(t){return null!=t&&null!=t.text&&null!=t.text.node?t.text.node.getElementsByTagName("a"):null},Graph.prototype.getLinkForCell=function(t){return null!=t.value&&"object"==typeof t.value?t=null!=(t=t.value.getAttribute("link"))&&"javascript:"===t.toLowerCase().substring(0,11)?t.substring(11):t:null},Graph.prototype.getLinkTargetForCell=function(t){return null!=t.value&&"object"==typeof t.value?t.value.getAttribute("linkTarget"):null},Graph.prototype.getCellStyle=function(t){var e,n=mxGraph.prototype.getCellStyle.apply(this,arguments);return null!=t&&null!=this.layoutManager&&(e=this.model.getParent(t),this.model.isVertex(e))&&this.isCellCollapsed(t)&&null!=(e=this.layoutManager.getLayout(e))&&e.constructor==mxStackLayout&&(n[mxConstants.STYLE_HORIZONTAL]=!e.horizontal),n},Graph.prototype.updateAlternateBounds=function(t,e,n){null!=t&&null!=e&&null!=this.layoutManager&&null!=e.alternateBounds&&null!=(t=this.layoutManager.getLayout(this.model.getParent(t)))&&t.constructor==mxStackLayout&&(t.horizontal?e.alternateBounds.height=0:e.alternateBounds.width=0),mxGraph.prototype.updateAlternateBounds.apply(this,arguments)},Graph.prototype.isMoveCellsEvent=function(t,e){return mxEvent.isShiftDown(t)||"1"==mxUtils.getValue(e.style,"moveCells","0")},Graph.prototype.foldCells=function(t,e,n,i,l){if(null!=(n=null==n?this.getFoldableCells(this.getSelectionCells(),t):n)){this.model.beginUpdate();try{if(mxGraph.prototype.foldCells.apply(this,arguments),null!=this.layoutManager)for(var s=0;s<n.length;s++){var o,r,a,h,d=this.view.getState(n[s]),u=this.getCellGeometry(n[s]);null!=d&&null!=u&&(o=Math.round(u.width-d.width/this.view.scale),0==(r=Math.round(u.height-d.height/this.view.scale))&&0==o||(a=this.model.getParent(n[s]),null==(h=this.layoutManager.getLayout(a))?null!=l&&this.isMoveCellsEvent(l,d)&&this.moveSiblings(d,a,o,r):null!=l&&mxEvent.isAltDown(l)||h.constructor!=mxStackLayout||h.resizeLast||this.resizeParentStacks(a,h,o,r)))}}finally{this.model.endUpdate()}this.isEnabled()&&this.setSelectionCells(n)}},Graph.prototype.moveSiblings=function(t,e,n,i){this.model.beginUpdate();try{var l,s,o=this.getCellsBeyond(t.x,t.y,e,!0,!0);for(e=0;e<o.length;e++)o[e]!=t.cell&&(l=this.view.getState(o[e]),s=this.getCellGeometry(o[e]),null!=l)&&null!=s&&((s=s.clone()).translate(Math.round(n*Math.max(0,Math.min(1,(l.x-t.x)/t.width))),Math.round(i*Math.max(0,Math.min(1,(l.y-t.y)/t.height)))),this.model.setGeometry(o[e],s))}finally{this.model.endUpdate()}},Graph.prototype.resizeParentStacks=function(t,e,n,i){if(null!=this.layoutManager&&null!=e&&e.constructor==mxStackLayout&&!e.resizeLast){this.model.beginUpdate();try{for(var l=e.horizontal;null!=t&&null!=e&&e.constructor==mxStackLayout&&e.horizontal==l&&!e.resizeLast;){var s=this.getCellGeometry(t),o=this.view.getState(t);null!=o&&null!=s&&(s=s.clone(),e.horizontal?s.width+=n+Math.min(0,o.width/this.view.scale-s.width):s.height+=i+Math.min(0,o.height/this.view.scale-s.height),this.model.setGeometry(t,s)),t=this.model.getParent(t),e=this.layoutManager.getLayout(t)}}finally{this.model.endUpdate()}}},Graph.prototype.isContainer=function(t){var e=this.getCurrentCellStyle(t);return this.isSwimlane(t)?"0"!=e.container:"1"==e.container},Graph.prototype.isCellConnectable=function(t){t=this.getCurrentCellStyle(t);return null!=t.connectable?"0"!=t.connectable:mxGraph.prototype.isCellConnectable.apply(this,arguments)},Graph.prototype.isLabelMovable=function(t){t=this.getCurrentCellStyle(t);return null!=t.movableLabel?"0"!=t.movableLabel:mxGraph.prototype.isLabelMovable.apply(this,arguments)},Graph.prototype.selectAll=function(t){t=t||this.getDefaultParent(),this.isCellLocked(t)||mxGraph.prototype.selectAll.apply(this,arguments)},Graph.prototype.selectCells=function(t,e,n){n=n||this.getDefaultParent(),this.isCellLocked(n)||mxGraph.prototype.selectCells.apply(this,arguments)},Graph.prototype.getSwimlaneAt=function(t,e,n){var i=mxGraph.prototype.getSwimlaneAt.apply(this,arguments);return i=this.isCellLocked(i)?null:i},Graph.prototype.isCellFoldable=function(t){var e=this.getCurrentCellStyle(t);return this.foldingEnabled&&("1"==e.treeFolding||!this.isCellLocked(t)&&(this.isContainer(t)&&"0"!=e.collapsible||!this.isContainer(t)&&"1"==e.collapsible))},Graph.prototype.reset=function(){this.isEditing()&&this.stopEditing(!0),this.escape(),this.isSelectionEmpty()||this.clearSelection()},Graph.prototype.zoom=function(t,e){t=Math.max(.01,Math.min(this.view.scale*t,160))/this.view.scale,mxGraph.prototype.zoom.apply(this,arguments)},Graph.prototype.zoomIn=function(){this.view.scale<.15?this.zoom((this.view.scale+.01)/this.view.scale):this.zoom(Math.round(this.view.scale*this.zoomFactor*20)/20/this.view.scale)},Graph.prototype.zoomOut=function(){this.view.scale<=.15?this.zoom((this.view.scale-.01)/this.view.scale):this.zoom(Math.round(1/this.zoomFactor*this.view.scale*20)/20/this.view.scale)},Graph.prototype.fitWindow=function(t,e){var n,i=this.container.clientWidth-(e=null!=e?e:10),l=this.container.clientHeight-e,s=Math.floor(20*Math.min(i/t.width,l/t.height))/20;this.zoomTo(s),mxUtils.hasScrollbars(this.container)&&(n=this.view.translate,this.container.scrollTop=(t.y+n.y)*s-Math.max((l-t.height*s)/2+e/2,0),this.container.scrollLeft=(t.x+n.x)*s-Math.max((i-t.width*s)/2+e/2,0))},Graph.prototype.getTooltipForCell=function(t){var e="";if(mxUtils.isNode(t.value)){var n=null;if(null!=(n=null==(n=Graph.translateDiagram&&null!=Graph.diagramLanguage?t.value.getAttribute("tooltip_"+Graph.diagramLanguage):n)?t.value.getAttribute("tooltip"):n))this.isReplacePlaceholders(t)&&(n=this.replacePlaceholders(t,n)),e=this.sanitizeHtml(n);else{n=this.builtInProperties,t=t.value.attributes;var i=[];this.isEnabled()&&(n.push("linkTarget"),n.push("link"));for(var l=0;l<t.length;l++)mxUtils.indexOf(n,t[l].nodeName)<0&&0<t[l].nodeValue.length&&i.push({name:t[l].nodeName,value:t[l].nodeValue});for(i.sort(function(t,e){return t.name<e.name?-1:t.name>e.name?1:0}),l=0;l<i.length;l++)"link"==i[l].name&&this.isCustomLink(i[l].value)||(e+=("link"!=i[l].name?"<b>"+i[l].name+":</b> ":"")+mxUtils.htmlEntities(i[l].value)+"\n");0<e.length&&(e=e.substring(0,e.length-1),mxClient.IS_SVG)&&(e='<div style="max-width:360px;text-overflow:ellipsis;overflow:hidden;">'+e+"</div>")}}return e},Graph.prototype.getFlowAnimationStyle=function(){var t,e=document.getElementsByTagName("head")[0];return null!=e&&null==this.flowAnimationStyle&&(this.flowAnimationStyle=document.createElement("style"),this.flowAnimationStyle.setAttribute("id","geEditorFlowAnimation-"+Editor.guid()),this.flowAnimationStyle.type="text/css",t=this.flowAnimationStyle.getAttribute("id"),this.flowAnimationStyle.innerHTML=this.getFlowAnimationStyleCss(t),e.appendChild(this.flowAnimationStyle)),this.flowAnimationStyle},Graph.prototype.getFlowAnimationStyleCss=function(t){return"."+t+" {\nanimation: "+t+" 0.5s linear;\nanimation-iteration-count: infinite;\n}\n@keyframes "+t+" {\nto {\nstroke-dashoffset: "+-16*this.view.scale+";\n}\n}"},Graph.prototype.stringToBytes=function(t){return Graph.stringToBytes(t)},Graph.prototype.bytesToString=function(t){return Graph.bytesToString(t)},Graph.prototype.compressNode=function(t){return Graph.compressNode(t)},Graph.prototype.compress=function(t,e){return Graph.compress(t,e)},Graph.prototype.decompress=function(t,e){return Graph.decompress(t,e)},Graph.prototype.zapGremlins=function(t){return Graph.zapGremlins(t)},window.HoverIcons=function(t){this.graph=t,this.init()},HoverIcons.prototype.arrowSpacing=2,HoverIcons.prototype.updateDelay=500,HoverIcons.prototype.activationDelay=140,HoverIcons.prototype.currentState=null,HoverIcons.prototype.activeArrow=null,HoverIcons.prototype.inactiveOpacity=15,HoverIcons.prototype.cssCursor="copy",HoverIcons.prototype.checkCollisions=!0,HoverIcons.prototype.arrowFill="#29b6f2",HoverIcons.prototype.triangleUp=mxClient.IS_SVG?Graph.createSvgImage(18,28,'<path d="m 6 26 L 12 26 L 12 12 L 18 12 L 9 1 L 1 12 L 6 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-up.png",26,14),HoverIcons.prototype.triangleRight=mxClient.IS_SVG?Graph.createSvgImage(26,18,'<path d="m 1 6 L 14 6 L 14 1 L 26 9 L 14 18 L 14 12 L 1 12 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-right.png",14,26),HoverIcons.prototype.triangleDown=mxClient.IS_SVG?Graph.createSvgImage(18,26,'<path d="m 6 1 L 6 14 L 1 14 L 9 26 L 18 14 L 12 14 L 12 1 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-down.png",26,14),HoverIcons.prototype.triangleLeft=mxClient.IS_SVG?Graph.createSvgImage(28,18,'<path d="m 1 9 L 12 1 L 12 6 L 26 6 L 26 12 L 12 12 L 12 18 z" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/triangle-left.png",14,26),HoverIcons.prototype.roundDrop=mxClient.IS_SVG?Graph.createSvgImage(26,26,'<circle cx="13" cy="13" r="12" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'"/>'):new mxImage(IMAGE_PATH+"/round-drop.png",26,26),HoverIcons.prototype.refreshTarget=new mxImage(mxClient.IS_SVG?"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjM2cHgiIGhlaWdodD0iMzZweCI+PGVsbGlwc2UgZmlsbD0iIzI5YjZmMiIgY3g9IjEyIiBjeT0iMTIiIHJ4PSIxMiIgcnk9IjEyIi8+PHBhdGggdHJhbnNmb3JtPSJzY2FsZSgwLjgpIHRyYW5zbGF0ZSgyLjQsIDIuNCkiIHN0cm9rZT0iI2ZmZiIgZmlsbD0iI2ZmZiIgZD0iTTEyIDZ2M2w0LTQtNC00djNjLTQuNDIgMC04IDMuNTgtOCA4IDAgMS41Ny40NiAzLjAzIDEuMjQgNC4yNkw2LjcgMTQuOGMtLjQ1LS44My0uNy0xLjc5LS43LTIuOCAwLTMuMzEgMi42OS02IDYtNnptNi43NiAxLjc0TDE3LjMgOS4yYy40NC44NC43IDEuNzkuNyAyLjggMCAzLjMxLTIuNjkgNi02IDZ2LTNsLTQgNCA0IDR2LTNjNC40MiAwIDgtMy41OCA4LTggMC0xLjU3LS40Ni0zLjAzLTEuMjQtNC4yNnoiLz48cGF0aCBkPSJNMCAwaDI0djI0SDB6IiBmaWxsPSJub25lIi8+PC9zdmc+Cg==":IMAGE_PATH+"/refresh.png",38,38),HoverIcons.prototype.tolerance=mxClient.IS_TOUCH?6:0,HoverIcons.prototype.init=function(){this.arrowUp=this.createArrow(this.triangleUp,mxResources.get("plusTooltip")),this.arrowRight=this.createArrow(this.triangleRight,mxResources.get("plusTooltip")),this.arrowDown=this.createArrow(this.triangleDown,mxResources.get("plusTooltip")),this.arrowLeft=this.createArrow(this.triangleLeft,mxResources.get("plusTooltip")),this.elts=[this.arrowUp,this.arrowRight,this.arrowDown,this.arrowLeft],this.resetHandler=mxUtils.bind(this,function(){this.reset()}),this.repaintHandler=mxUtils.bind(this,function(){this.repaint()}),this.graph.selectionModel.addListener(mxEvent.CHANGE,this.resetHandler),this.graph.model.addListener(mxEvent.CHANGE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE_AND_TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.TRANSLATE,this.repaintHandler),this.graph.view.addListener(mxEvent.SCALE,this.repaintHandler),this.graph.view.addListener(mxEvent.DOWN,this.repaintHandler),this.graph.view.addListener(mxEvent.UP,this.repaintHandler),this.graph.addListener(mxEvent.ROOT,this.repaintHandler),this.graph.addListener(mxEvent.ESCAPE,this.resetHandler),mxEvent.addListener(this.graph.container,"scroll",this.resetHandler),this.graph.addListener(mxEvent.ESCAPE,mxUtils.bind(this,function(){this.mouseDownPoint=null})),mxEvent.addListener(this.graph.container,"mouseleave",mxUtils.bind(this,function(t){null!=t.relatedTarget&&mxEvent.getSource(t)==this.graph.container&&this.setDisplay("none")})),this.graph.addListener(mxEvent.START_EDITING,mxUtils.bind(this,function(t){this.reset()}));var e=this.graph.click,n=(this.graph.click=mxUtils.bind(this,function(t){e.apply(this.graph,arguments),null==this.currentState||this.graph.isCellSelected(this.currentState.cell)||!mxEvent.isTouchEvent(t.getEvent())||this.graph.model.isVertex(t.getCell())||this.reset()}),!1);this.graph.addMouseListener({mouseDown:mxUtils.bind(this,function(t,e){n=!1,t=e.getEvent(),this.isResetEvent(t)?this.reset():this.isActive()||null==(e=this.getState(e.getState()))&&mxEvent.isTouchEvent(t)||this.update(e),this.setDisplay("none")}),mouseMove:mxUtils.bind(this,function(t,e){t=e.getEvent(),this.isResetEvent(t)?this.reset():this.graph.isMouseDown||mxEvent.isTouchEvent(t)||this.update(this.getState(e.getState()),e.getGraphX(),e.getGraphY()),null!=this.graph.connectionHandler&&null!=this.graph.connectionHandler.shape&&(n=!0)}),mouseUp:mxUtils.bind(this,function(t,e){t=e.getEvent(),mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),this.isResetEvent(t)?this.reset():this.isActive()&&!n&&null!=this.mouseDownPoint?this.click(this.currentState,this.getDirection(),e):this.isActive()?1==this.graph.getSelectionCount()&&this.graph.model.isEdge(this.graph.getSelectionCell())?this.reset():this.update(this.getState(this.graph.view.getState(this.graph.getCellAt(e.getGraphX(),e.getGraphY())))):mxEvent.isTouchEvent(t)||null!=this.bbox&&mxUtils.contains(this.bbox,e.getGraphX(),e.getGraphY())?(this.setDisplay(""),this.repaint()):mxEvent.isTouchEvent(t)||this.reset(),n=!1,this.resetActiveArrow()})})},HoverIcons.prototype.isResetEvent=function(t,e){return mxEvent.isAltDown(t)||null==this.activeArrow&&mxEvent.isShiftDown(t)||mxEvent.isPopupTrigger(t)&&!this.graph.isCloneEvent(t)},HoverIcons.prototype.createArrow=function(t,e){var n=null;return(n=mxUtils.createImage(t.src)).style.width=t.width+"px",n.style.height=t.height+"px",n.style.padding=this.tolerance+"px",null!=e&&n.setAttribute("title",e),n.style.position="absolute",n.style.cursor=this.cssCursor,mxEvent.addGestureListeners(n,mxUtils.bind(this,function(t){null==this.currentState||this.isResetEvent(t)||(this.mouseDownPoint=mxUtils.convertPoint(this.graph.container,mxEvent.getClientX(t),mxEvent.getClientY(t)),this.drag(t,this.mouseDownPoint.x,this.mouseDownPoint.y),this.activeArrow=n,this.setDisplay("none"),mxEvent.consume(t))})),mxEvent.redirectMouseEvents(n,this.graph,this.currentState),mxEvent.addListener(n,"mouseenter",mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)&&(null!=this.activeArrow&&this.activeArrow!=n&&mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.graph.connectionHandler.constraintHandler.reset(),mxUtils.setOpacity(n,100),this.activeArrow=n)})),mxEvent.addListener(n,"mouseleave",mxUtils.bind(this,function(t){this.graph.isMouseDown||this.resetActiveArrow()})),n},HoverIcons.prototype.resetActiveArrow=function(){null!=this.activeArrow&&(mxUtils.setOpacity(this.activeArrow,this.inactiveOpacity),this.activeArrow=null)},HoverIcons.prototype.getDirection=function(){var t=mxConstants.DIRECTION_EAST;return this.activeArrow==this.arrowUp?t=mxConstants.DIRECTION_NORTH:this.activeArrow==this.arrowDown?t=mxConstants.DIRECTION_SOUTH:this.activeArrow==this.arrowLeft&&(t=mxConstants.DIRECTION_WEST),t},HoverIcons.prototype.visitNodes=function(t){for(var e=0;e<this.elts.length;e++)null!=this.elts[e]&&t(this.elts[e])},HoverIcons.prototype.removeNodes=function(){this.visitNodes(function(t){null!=t.parentNode&&t.parentNode.removeChild(t)})},HoverIcons.prototype.setDisplay=function(e){this.visitNodes(function(t){t.style.display=e})},HoverIcons.prototype.isActive=function(){return null!=this.activeArrow&&null!=this.currentState},HoverIcons.prototype.drag=function(t,e,n){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),null!=this.currentState&&(this.graph.connectionHandler.start(this.currentState,e,n),this.graph.isMouseTrigger=mxEvent.isMouseEvent(t),this.graph.isMouseDown=!0,null!=(e=this.graph.selectionCellsHandler.getHandler(this.currentState.cell))&&e.setHandlesVisible(!1),e=this.graph.connectionHandler.edgeState,null!=t)&&mxEvent.isShiftDown(t)&&mxEvent.isControlDown(t)&&null!=e&&"orthogonalEdgeStyle"===mxUtils.getValue(e.style,mxConstants.STYLE_EDGE,null)&&(t=this.getDirection(),e.cell.style=mxUtils.setStyle(e.cell.style,"sourcePortConstraint",t),e.style.sourcePortConstraint=t)},HoverIcons.prototype.getStateAt=function(t,e,n){return this.graph.view.getState(this.graph.getCellAt(e,n))},HoverIcons.prototype.click=function(t,e,n){var i=n.getEvent(),l=n.getGraphX(),s=n.getGraphY();null==(l=this.getStateAt(t,l,s))||!this.graph.model.isEdge(l.cell)||this.graph.isCloneEvent(i)||l.getVisibleTerminalState(!0)!=t&&l.getVisibleTerminalState(!1)!=t?null!=t&&this.execute(t,e,n):(this.graph.setSelectionCell(l.cell),this.reset()),n.consume()},HoverIcons.prototype.execute=function(t,e,n){n=n.getEvent(),this.graph.selectCellsForConnectVertex(this.graph.connectVertex(t.cell,e,this.graph.defaultEdgeLength,n,this.graph.isCloneEvent(n),this.graph.isCloneEvent(n)),n,this)},HoverIcons.prototype.reset=function(t){null!=t&&!t||null==this.updateThread||window.clearTimeout(this.updateThread),this.activeArrow=this.currentState=this.mouseDownPoint=null,this.removeNodes(),this.bbox=null},HoverIcons.prototype.repaint=function(){var l,t,e,n,i,s,o;(this.bbox=null)!=this.currentState&&(this.currentState=this.getState(this.currentState),null!=this.currentState&&this.graph.model.isVertex(this.currentState.cell)&&this.graph.isCellConnectable(this.currentState.cell)?(i=mxRectangle.fromRectangle(this.currentState),(i=null!=this.currentState.shape&&null!=this.currentState.shape.boundingBox?mxRectangle.fromRectangle(this.currentState.shape.boundingBox):i).grow(this.graph.tolerance),i.grow(this.arrowSpacing),t=this.graph.selectionCellsHandler.getHandler(this.currentState.cell),(l=null)!=(t=this.graph.isTableRow(this.currentState.cell)?this.graph.selectionCellsHandler.getHandler(this.graph.model.getParent(this.currentState.cell)):t)&&(i.x-=t.horizontalOffset/2,i.y-=t.verticalOffset/2,i.width+=t.horizontalOffset,i.height+=t.verticalOffset,null!=t.rotationShape)&&null!=t.rotationShape.node&&"hidden"!=t.rotationShape.node.style.visibility&&"none"!=t.rotationShape.node.style.display&&null!=t.rotationShape.boundingBox&&(l=t.rotationShape.boundingBox),(t=mxUtils.bind(this,function(t,e,n){var i;null!=l&&(i=new mxRectangle(e,n,t.clientWidth,t.clientHeight),mxUtils.intersects(i,l))&&(t==this.arrowUp?n-=i.y+i.height-l.y:t==this.arrowRight?e+=l.x+l.width-i.x:t==this.arrowDown?n+=l.y+l.height-i.y:t==this.arrowLeft&&(e-=i.x+i.width-l.x)),t.style.left=e+"px",t.style.top=n+"px",mxUtils.setOpacity(t,this.inactiveOpacity)}))(this.arrowUp,Math.round(this.currentState.getCenterX()-this.triangleUp.width/2-this.tolerance),Math.round(i.y-this.triangleUp.height-this.tolerance)),t(this.arrowRight,Math.round(i.x+i.width-this.tolerance),Math.round(this.currentState.getCenterY()-this.triangleRight.height/2-this.tolerance)),t(this.arrowDown,parseInt(this.arrowUp.style.left),Math.round(i.y+i.height-this.tolerance)),t(this.arrowLeft,Math.round(i.x-this.triangleLeft.width-this.tolerance),parseInt(this.arrowRight.style.top)),this.checkCollisions?(t=this.graph.getCellAt(i.x+i.width+this.triangleRight.width/2,this.currentState.getCenterY()),e=this.graph.getCellAt(i.x-this.triangleLeft.width/2,this.currentState.getCenterY()),n=this.graph.getCellAt(this.currentState.getCenterX(),i.y-this.triangleUp.height/2),i=this.graph.getCellAt(this.currentState.getCenterX(),i.y+i.height+this.triangleDown.height/2),null!=t&&t==e&&e==n&&n==i&&(i=n=e=t=null),s=this.graph.getCellGeometry(this.currentState.cell),(o=mxUtils.bind(this,function(t,e){var n=this.graph.model.isVertex(t)&&this.graph.getCellGeometry(t);null==t||this.graph.model.isAncestor(t,this.currentState.cell)||this.graph.isSwimlane(t)||!(null==n||null==s||n.height<3*s.height&&n.width<3*s.width)?e.style.visibility="visible":e.style.visibility="hidden"}))(t,this.arrowRight),o(e,this.arrowLeft),o(n,this.arrowUp),o(i,this.arrowDown)):(this.arrowLeft.style.visibility="visible",this.arrowRight.style.visibility="visible",this.arrowUp.style.visibility="visible",this.arrowDown.style.visibility="visible"),this.graph.tooltipHandler.isEnabled()?(this.arrowLeft.setAttribute("title",mxResources.get("plusTooltip")),this.arrowRight.setAttribute("title",mxResources.get("plusTooltip")),this.arrowUp.setAttribute("title",mxResources.get("plusTooltip")),this.arrowDown.setAttribute("title",mxResources.get("plusTooltip"))):(this.arrowLeft.removeAttribute("title"),this.arrowRight.removeAttribute("title"),this.arrowUp.removeAttribute("title"),this.arrowDown.removeAttribute("title"))):this.reset(),null!=this.currentState)&&(this.bbox=this.computeBoundingBox(),null!=this.bbox)&&this.bbox.grow(10)},HoverIcons.prototype.computeBoundingBox=function(){var e=this.graph.model.isEdge(this.currentState.cell)?null:mxRectangle.fromRectangle(this.currentState);return this.visitNodes(function(t){null!=t.parentNode&&(t=new mxRectangle(t.offsetLeft,t.offsetTop,t.offsetWidth,t.offsetHeight),null==e?e=t:e.add(t))}),e},HoverIcons.prototype.getState=function(t){var e;return null!=t&&(t=t.cell,this.graph.getModel().contains(t)&&(this.graph.getModel().isVertex(t)&&!this.graph.isCellConnectable(t)&&(e=this.graph.getModel().getParent(t),this.graph.getModel().isVertex(e))&&this.graph.isCellConnectable(e)&&(t=e),(this.graph.isCellLocked(t)||this.graph.model.isEdge(t))&&(t=null),null==(t=this.graph.view.getState(t))||null!=t.style)||(t=null)),t},HoverIcons.prototype.update=function(t,e,n){var i;!this.graph.connectionArrowsEnabled||null!=t&&"0"==mxUtils.getValue(t.style,"allowArrows","1")?this.reset():(null!=t&&null!=t.cell.geometry&&t.cell.geometry.relative&&this.graph.model.isEdge(t.cell.parent)&&(t=null),i=null,this.prev!=t||this.isActive()?(this.startTime=(new Date).getTime(),this.prev=t,i=0,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=t&&(this.updateThread=window.setTimeout(mxUtils.bind(this,function(){this.isActive()||this.graph.isMouseDown||this.graph.panningHandler.isActive()||(this.prev=t,this.update(t,e,n))}),this.updateDelay+10))):null!=this.startTime&&(i=(new Date).getTime()-this.startTime),this.setDisplay(""),null!=this.currentState&&this.currentState!=t&&i<this.activationDelay&&null!=this.bbox&&!mxUtils.contains(this.bbox,e,n)?this.reset(!1):(null!=this.currentState||i>this.activationDelay)&&this.currentState!=t&&(i>this.updateDelay&&null!=t||null==this.bbox||null==e||null==n||!mxUtils.contains(this.bbox,e,n))&&(null!=t&&this.graph.isEnabled()?(this.removeNodes(),this.setCurrentState(t),this.repaint(),this.graph.connectionHandler.constraintHandler.currentFocus!=t&&this.graph.connectionHandler.constraintHandler.reset()):this.reset()))},HoverIcons.prototype.setCurrentState=function(t){"eastwest"!=t.style.portConstraint&&(this.graph.container.appendChild(this.arrowUp),this.graph.container.appendChild(this.arrowDown)),this.graph.container.appendChild(this.arrowRight),this.graph.container.appendChild(this.arrowLeft),this.currentState=t},Graph.prototype.createParent=function(t,e,n,i,l){t=this.cloneCell(t);for(var s=0;s<n;s++){var o=this.cloneCell(e),r=this.getCellGeometry(o);null!=r&&(r.x+=s*i,r.y+=s*l),t.insert(o)}return t},Graph.prototype.createTable=function(t,e,n,i,l,s,o,r,a){return s=null!=s?s:30,r=null!=r?r:"shape=partialRectangle;html=1;whiteSpace=wrap;collapsible=0;dropTarget=0;pointerEvents=0;fillColor=none;top=0;left=0;bottom=0;right=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",a=null!=a?a:"shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;overflow=hidden;fillColor=none;top=0;left=0;bottom=0;right=0;",this.createParent(this.createVertex(null,null,null!=l?l:"",0,0,e*(n=null!=n?n:60),t*(i=null!=i?i:40)+(null!=l?s:0),null!=o?o:"shape=table;html=1;whiteSpace=wrap;startSize="+(null!=l?s:"0")+";container=1;collapsible=0;childLayout=tableLayout;"),this.createParent(this.createVertex(null,null,"",0,0,e*n,i,r),this.createVertex(null,null,"",0,0,n,i,a),e,n,0),t,0,i)},Graph.prototype.setTableValues=function(t,e,n){for(var i=this.model.getChildCells(t,!0),l=0;l<i.length;l++)if(null!=n&&(i[l].value=n[l]),null!=e)for(var s=this.model.getChildCells(i[l],!0),o=0;o<s.length;o++)null!=e[l][o]&&(s[o].value=e[l][o]);return t},Graph.prototype.createCrossFunctionalSwimlane=function(t,e,n,i,l,s,o,r,a){return l=null!=l?l:40,o=null!=o?o:"swimlane;horizontal=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;startSize="+l+";html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;",r=null!=r?r:"swimlane;connectable=0;startSize=40;html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;",a=null!=a?a:"swimlane;connectable=0;startSize=0;html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;",l=this.createVertex(null,null,"",0,0,e*(n=null!=n?n:120),t*(i=null!=i?i:120),null!=s?s:"shape=table;childLayout=tableLayout;rowLines=0;columnLines=0;startSize="+l+";html=1;whiteSpace=wrap;collapsible=0;recursiveResize=0;expand=0;pointerEvents=0;"),s=mxUtils.getValue(this.getCellStyle(l),mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE),l.geometry.width+=s,l.geometry.height+=s,o=this.createVertex(null,null,"",0,s,e*n+s,i,o),l.insert(this.createParent(o,this.createVertex(null,null,"",s,0,n,i,r),e,n,0)),1<t?(o.geometry.y=i+s,this.createParent(l,this.createParent(o,this.createVertex(null,null,"",s,0,n,i,a),e,n,0),t-1,0,i)):l},Graph.prototype.isTableCell=function(t){return this.model.isVertex(t)&&this.isTableRow(this.model.getParent(t))},Graph.prototype.isTableRow=function(t){return this.model.isVertex(t)&&this.isTable(this.model.getParent(t))},Graph.prototype.isTable=function(t){return null!=(t=this.getCellStyle(t))&&"tableLayout"==t.childLayout},Graph.prototype.setTableRowHeight=function(t,e,n){n=null==n||n;var i=this.getModel();i.beginUpdate();try{var l,s,o,r,a,h,d=this.getCellGeometry(t);null!=d&&((d=d.clone()).height+=e,i.setGeometry(t,d),l=i.getParent(t),s=i.getChildCells(l,!0),n||(o=mxUtils.indexOf(s,t))<s.length-1&&(r=s[o+1],null!=(a=this.getCellGeometry(r)))&&((a=a.clone()).y+=e,a.height-=e,i.setGeometry(r,a)),null!=(h=this.getCellGeometry(l))&&(n=n||t==s[s.length-1])&&((h=h.clone()).height+=e,i.setGeometry(l,h)),null!=this.layoutManager)&&this.layoutManager.executeLayout(l,!0)}finally{i.endUpdate()}},Graph.prototype.setTableColumnWidth=function(t,e,n){n=null!=n&&n;var i=this.getModel(),l=i.getParent(t),s=i.getParent(l),o=i.getChildCells(l,!0),r=(t=mxUtils.indexOf(o,t))==o.length-1;i.beginUpdate();try{for(var a,h=i.getChildCells(s,!0),d=0;d<h.length;d++){var l=h[d],u=(o=i.getChildCells(l,!0))[t],p=this.getCellGeometry(u);null!=p&&((p=p.clone()).width+=e,i.setGeometry(u,p)),t<o.length-1&&(u=o[t+1],null!=(p=this.getCellGeometry(u)))&&((p=p.clone()).x+=e,n||(p.width-=e),i.setGeometry(u,p))}(r||n)&&null!=(a=this.getCellGeometry(s))&&((a=a.clone()).width+=e,i.setGeometry(s,a)),null!=this.layoutManager&&this.layoutManager.executeLayout(s,!0)}finally{i.endUpdate()}},TableLayout.prototype=new mxStackLayout,TableLayout.prototype.constructor=TableLayout,TableLayout.prototype.isHorizontal=function(){return!1},TableLayout.prototype.isVertexIgnored=function(t){return!this.graph.getModel().isVertex(t)||!this.graph.isCellVisible(t)},TableLayout.prototype.getSize=function(t,e){for(var n,i=0,l=0;l<t.length;l++)this.isVertexIgnored(t[l])||null!=(n=this.graph.getCellGeometry(t[l]))&&(i+=e?n.width:n.height);return i},TableLayout.prototype.getRowLayout=function(t,e){for(var n=this.graph.model.getChildCells(t,!0),i=this.graph.getActualStartSize(t,!0),l=(t=this.getSize(n,!0),e=e-i.x-i.width,[]),i=i.x,s=0;s<n.length;s++){var o=this.graph.getCellGeometry(n[s]);null!=o&&(i+=o.width*e/t,l.push(Math.round(i)))}return l},TableLayout.prototype.layoutRow=function(t,e,n,i){var l=this.graph.getModel(),s=l.getChildCells(t,!0),o=(t=this.graph.getActualStartSize(t,!0)).x,r=0;null!=e&&(e=e.slice()).splice(0,0,t.x);for(var a=0;a<s.length;a++){var h=this.graph.getCellGeometry(s[a]);null!=h&&((h=h.clone()).y=t.y,h.height=n-t.y-t.height,null!=e?(h.x=e[a],h.width=e[a+1]-h.x,a==s.length-1&&a<e.length-2&&(h.width=i-h.x-t.x-t.width)):(h.x=o,o+=h.width,a==s.length-1?h.width=i-t.x-t.width-r:r+=h.width),l.setGeometry(s[a],h))}return r},TableLayout.prototype.execute=function(t){if(null!=t){var e=this.graph.getActualStartSize(t,!0),n=this.graph.getCellGeometry(t),i=this.graph.getCellStyle(t),l="1"==mxUtils.getValue(i,"resizeLastRow","0"),s="1"==mxUtils.getValue(i,"resizeLast","0"),i="1"==mxUtils.getValue(i,"fixedRows","0"),o=this.graph.getModel(),r=0;o.beginUpdate();try{var a,h=n.height-e.y-e.height,d=n.width-e.x-e.width,u=o.getChildCells(t,!0),p=this.getSize(u,!1);if(0<h&&0<d&&0<u.length&&0<p){l&&null!=(a=this.graph.getCellGeometry(u[u.length-1]))&&((a=a.clone()).height=h-p+a.height,o.setGeometry(u[u.length-1],a));for(var c=s?null:this.getRowLayout(u[0],d),m=e.y,g=0;g<u.length;g++)null!=(a=this.graph.getCellGeometry(u[g]))&&((a=a.clone()).x=e.x,a.width=d,a.y=Math.round(m),m=l||i?m+a.height:m+a.height/p*h,a.height=Math.round(m)-a.y,o.setGeometry(u[g],a)),r=Math.max(r,this.layoutRow(u[g],c,a.height,d));i&&h<p&&((n=n.clone()).height=m+e.height,o.setGeometry(t,n)),s&&d<r+Graph.minTableColumnWidth&&((n=n.clone()).width=r+e.width+e.x+Graph.minTableColumnWidth,o.setGeometry(t,n))}}finally{o.endUpdate()}}},!function(){var t=mxGraphView.prototype.resetValidationState,n=(mxGraphView.prototype.resetValidationState=function(){t.apply(this,arguments),this.validEdges=[]},mxGraphView.prototype.validateCellState),i=(mxGraphView.prototype.validateCellState=function(t,e){e=null==e||e;t=this.getState(t);return null!=t&&e&&this.graph.model.isEdge(t.cell)&&null!=t.style&&1!=t.style[mxConstants.STYLE_CURVED]&&!t.invalid&&this.updateLineJumps(t)&&this.graph.cellRenderer.redraw(t,!1,this.isRendering()),null!=(t=n.apply(this,arguments))&&e&&this.graph.model.isEdge(t.cell)&&null!=t.style&&1!=t.style[mxConstants.STYLE_CURVED]&&this.validEdges.push(t),t},mxShape.prototype.paint),l=(mxShape.prototype.paint=function(){var t,e;i.apply(this,arguments),null!=this.state&&null!=this.node&&this.state.view.graph.enableFlowAnimation&&this.state.view.graph.model.isEdge(this.state.cell)&&"1"==mxUtils.getValue(this.state.style,"flowAnimation","0")&&1<(t=this.node.getElementsByTagName("path")).length&&("1"!=mxUtils.getValue(this.state.style,mxConstants.STYLE_DASHED,"0")&&t[1].setAttribute("stroke-dasharray",8*this.state.view.scale),null!=(e=this.state.view.graph.getFlowAnimationStyle()))&&t[1].setAttribute("class",e.getAttribute("id"))},mxCellRenderer.prototype.isShapeInvalid),e=(mxCellRenderer.prototype.isShapeInvalid=function(t,e){return l.apply(this,arguments)||null!=t.routedPoints&&null!=e.routedPoints&&!mxUtils.equalPoints(e.routedPoints,t.routedPoints)},mxGraphView.prototype.updateCellState),x=(mxGraphView.prototype.updateCellState=function(t){e.apply(this,arguments),this.graph.model.isEdge(t.cell)&&1!=t.style[mxConstants.STYLE_CURVED]&&this.updateLineJumps(t)},mxGraphView.prototype.updateLineJumps=function(l){var t=l.absolutePoints;if(Graph.lineJumpsEnabled){var e=null!=l.routedPoints,s=null;if(null!=t&&null!=this.validEdges&&"none"!==mxUtils.getValue(l.style,"jumpStyle","none")){var n=function(t,e,n){var i=new mxPoint(e,n);return i.type=t,s.push(i),null==(i=null!=l.routedPoints?l.routedPoints[s.length-1]:null)||i.type!=t||i.x!=e||i.y!=n},i=.5*this.scale;e=!1;for(var s=[],o=0;o<t.length-1;o++){for(var r=t[o+1],a=t[o],h=[],d=t[o+2];o<t.length-2&&mxUtils.ptSegDistSq(a.x,a.y,d.x,d.y,r.x,r.y)<+this.scale*this.scale;)r=d,d=t[++o+2];for(var e=n(0,a.x,a.y)||e,u=0;u<this.validEdges.length;u++){var p=this.validEdges[u],c=p.absolutePoints;if(null!=c&&mxUtils.intersects(l,p)&&"1"!=p.style.noJump)for(p=0;p<c.length-1;p++){for(var m=c[p+1],g=c[p],d=c[p+2];p<c.length-2&&mxUtils.ptSegDistSq(g.x,g.y,d.x,d.y,m.x,m.y)<+this.scale*this.scale;)m=d,d=c[++p+2];if(null!=(d=mxUtils.intersection(a.x,a.y,r.x,r.y,g.x,g.y,m.x,m.y))&&(Math.abs(d.x-a.x)>i||Math.abs(d.y-a.y)>i)&&(Math.abs(d.x-r.x)>i||Math.abs(d.y-r.y)>i)&&(Math.abs(d.x-g.x)>i||Math.abs(d.y-g.y)>i)&&(Math.abs(d.x-m.x)>i||Math.abs(d.y-m.y)>i)){for(d={distSq:(m=d.x-a.x)*m+(g=d.y-a.y)*g,x:d.x,y:d.y},m=0;m<h.length;m++)if(h[m].distSq>d.distSq){h.splice(m,0,d),d=null;break}null==d||0!=h.length&&h[h.length-1].x===d.x&&h[h.length-1].y===d.y||h.push(d)}}}for(p=0;p<h.length;p++)e=n(1,h[p].x,h[p].y)||e}e=n(0,(d=t[t.length-1]).x,d.y)||e}return l.routedPoints=s,e}return!1},mxConnector.prototype.paintLine),s=(mxConnector.prototype.paintLine=function(t,e,n){if(this.routedPoints=null!=this.state?this.state.routedPoints:null,this.outline||null==this.state||null==this.style||null==this.state.routedPoints||0==this.state.routedPoints.length)x.apply(this,arguments);else{var i=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,l=(parseInt(mxUtils.getValue(this.style,"jumpSize",Graph.defaultJumpSize))-2)/2+this.strokewidth,s=mxUtils.getValue(this.style,"jumpStyle","none"),o=!0,r=null,a=null,h=[],d=null;t.begin();for(var u=0;u<this.state.routedPoints.length;u++){var p,c=this.state.routedPoints[u],m=new mxPoint(c.x/this.scale,c.y/this.scale),g=(0==u?m=e[0]:u==this.state.routedPoints.length-1&&(m=e[e.length-1]),!1);null!=r&&1==c.type?(c=(c=(p=this.state.routedPoints[u+1]).x/this.scale-m.x)*c+(p=p.y/this.scale-m.y)*p,null==d&&(d=new mxPoint(m.x-r.x,m.y-r.y),0<(a=Math.sqrt(d.x*d.x+d.y*d.y))?(d.x=d.x*l/a,d.y=d.y*l/a):d=null),l*l<c&&0<a&&l*l<(c=r.x-m.x)*c+(p=r.y-m.y)*p&&(g=new mxPoint(m.x-d.x,m.y-d.y),c=new mxPoint(m.x+d.x,m.y+d.y),h.push(g),this.addPoints(t,h,n,i,!1,null,o),h=Math.round(d.x)<0||0==Math.round(d.x)&&Math.round(d.y)<=0?1:-1,o=!1,"sharp"==s?(t.lineTo(g.x-d.y*h,g.y+d.x*h),t.lineTo(c.x-d.y*h,c.y+d.x*h),t.lineTo(c.x,c.y)):"arc"==s?(h*=1.3,t.curveTo(g.x-d.y*h,g.y+d.x*h,c.x-d.y*h,c.y+d.x*h,c.x,c.y)):(t.moveTo(c.x,c.y),o=!0),h=[c],g=!0)):d=null,g||(h.push(m),r=m)}this.addPoints(t,h,n,i,!1,null,o),t.stroke()}},mxGraphView.prototype.getFixedTerminalPoint),d=(mxGraphView.prototype.getFixedTerminalPoint=function(t,e,n,i){return null!=e&&"centerPerimeter"==e.style[mxConstants.STYLE_PERIMETER]?new mxPoint(e.getCenterX(),e.getCenterY()):s.apply(this,arguments)},mxGraphView.prototype.updateFloatingTerminalPoint),o=(mxGraphView.prototype.updateFloatingTerminalPoint=function(t,e,n,i){var l,s,o,r,a,h;null==e||null==t||"1"!=e.style.snapToPoint&&"1"!=t.style.snapToPoint?d.apply(this,arguments):(e=this.getTerminalPort(t,e,i),h=this.getNextPoint(t,n,i),l=this.graph.isOrthogonal(t),s=mxUtils.toRadians(Number(e.style[mxConstants.STYLE_ROTATION]||"0")),o=new mxPoint(e.getCenterX(),e.getCenterY()),0!=s&&(r=Math.cos(-s),a=Math.sin(-s),h=mxUtils.getRotatedPoint(h,r,a,o)),r=parseFloat(t.style[mxConstants.STYLE_PERIMETER_SPACING]||0),r+=parseFloat(t.style[i?mxConstants.STYLE_SOURCE_PERIMETER_SPACING:mxConstants.STYLE_TARGET_PERIMETER_SPACING]||0),h=this.getPerimeterPoint(e,h,0==s&&l,r),0!=s&&(r=Math.cos(s),a=Math.sin(s),h=mxUtils.getRotatedPoint(h,r,a,o)),t.setAbsoluteTerminalPoint(this.snapToAnchorPoint(t,e,n,i,h),i))},mxGraphView.prototype.snapToAnchorPoint=function(t,e,n,i,l){if(null!=e&&null!=t){if((i=n=null)!=(t=this.graph.getAllConnectionConstraints(e)))for(var s=0;s<t.length;s++){var o,r=this.graph.getConnectionPoint(e,t[s]);null!=r&&(o=(r.x-l.x)*(r.x-l.x)+(r.y-l.y)*(r.y-l.y),null==i||o<i)&&(n=r,i=o)}null!=n&&(l=n)}return l},mxStencil.prototype.evaluateTextAttribute),r=(mxStencil.prototype.evaluateTextAttribute=function(t,e,n){var i=o.apply(this,arguments);return i="1"==t.getAttribute("placeholders")&&null!=n.state?n.state.view.graph.replacePlaceholders(n.state.cell,i):i},mxCellRenderer.prototype.createShape);mxCellRenderer.prototype.createShape=function(t){if(null!=t.style&&"undefined"!=typeof pako){t=mxUtils.getValue(t.style,mxConstants.STYLE_SHAPE,null);if(null!=t&&"string"==typeof t&&"stencil("==t.substring(0,8))try{var e=t.substring(8,t.length-1);return new mxShape(new mxStencil(mxUtils.parseXml(Graph.decompress(e)).documentElement))}catch(t){null!=window.console&&console.log("Error in shape: "+t)}}return r.apply(this,arguments)}}(),mxStencilRegistry.libraries={},mxStencilRegistry.dynamicLoading=!0,mxStencilRegistry.allowEval=!0,mxStencilRegistry.packages=[],mxStencilRegistry.filesLoaded={},mxStencilRegistry.getStencil=function(e){var n=mxStencilRegistry.stencils[e];if(null==n&&null==mxCellRenderer.defaultShapes[e]&&mxStencilRegistry.dynamicLoading){var i=mxStencilRegistry.getBasenameForStencil(e);if(null!=i){if(null!=(n=mxStencilRegistry.libraries[i])){if(null==mxStencilRegistry.packages[i]){for(var t=0;t<n.length;t++){var l,s=n[t];if(!mxStencilRegistry.filesLoaded[s])if(mxStencilRegistry.filesLoaded[s]=!0,".xml"==s.toLowerCase().substring(s.length-4,s.length))mxStencilRegistry.loadStencilSet(s,null);else if(".js"==s.toLowerCase().substring(s.length-3,s.length))try{mxStencilRegistry.allowEval&&null!=(l=mxUtils.load(s))&&200<=l.getStatus()&&l.getStatus()<=299&&eval.call(window,l.getText())}catch(t){null!=window.console&&console.log("error in getStencil:",e,i,n,s,t)}}mxStencilRegistry.packages[i]=1}}else i=i.replace("_-_","_"),mxStencilRegistry.loadStencilSet(STENCIL_PATH+"/"+i+".xml",null);n=mxStencilRegistry.stencils[e]}}return n},mxStencilRegistry.getBasenameForStencil=function(t){var e=null;if(null!=t&&"string"==typeof t&&0<(t=t.split(".")).length&&"mxgraph"==t[0])for(var e=t[1],n=2;n<t.length-1;n++)e+="/"+t[n];return e},mxStencilRegistry.loadStencilSet=function(e,n,t,i){var l=mxStencilRegistry.packages[e];if(null!=t&&t||null==l){var s=!1;if(null==l)try{if(i)return void mxStencilRegistry.loadStencil(e,mxUtils.bind(this,function(t){null!=t&&null!=t.documentElement&&(mxStencilRegistry.packages[e]=t,s=!0,mxStencilRegistry.parseStencilSet(t.documentElement,n,s))}));l=mxStencilRegistry.loadStencil(e),mxStencilRegistry.packages[e]=l,s=!0}catch(t){null!=window.console&&console.log("error in loadStencilSet:",e,t)}null!=l&&null!=l.documentElement&&mxStencilRegistry.parseStencilSet(l.documentElement,n,s)}},mxStencilRegistry.loadStencil=function(t,e){if(null==e)return mxUtils.load(t).getXml();mxUtils.get(t,mxUtils.bind(this,function(t){e(200<=t.getStatus()&&t.getStatus()<=299?t.getXml():null)}))},mxStencilRegistry.parseStencilSets=function(t){for(var e=0;e<t.length;e++)mxStencilRegistry.parseStencilSet(mxUtils.parseXml(t[e]).documentElement)},mxStencilRegistry.parseStencilSet=function(t,e,n){if("stencils"==t.nodeName)for(var i=t.firstChild;null!=i;)"shapes"==i.nodeName&&mxStencilRegistry.parseStencilSet(i,e,n),i=i.nextSibling;else{n=null==n||n;var l,s,o,i=t.firstChild,r="";for(null!=(t=t.getAttribute("name"))&&(r=t+".");null!=i;)i.nodeType==mxConstants.NODETYPE_ELEMENT&&null!=(t=i.getAttribute("name"))&&(r=r.toLowerCase(),l=t.replace(/ /g,"_"),n&&mxStencilRegistry.addStencil(r+l.toLowerCase(),new mxStencil(i)),null!=e&&(s=i.getAttribute("w"),o=i.getAttribute("h"),e(r,l,t,s=null==s?80:parseInt(s,10),o=null==o?80:parseInt(o,10)))),i=i.nextSibling}},void 0!==mxVertexHandler&&function(){function s(){var t=document.createElement("div");return t.className="geHint",t.style.whiteSpace="nowrap",t.style.position="absolute",t}function o(t,e){switch(e){case mxConstants.POINTS:return t;case mxConstants.MILLIMETERS:return(t/mxConstants.PIXELS_PER_MM).toFixed(1);case mxConstants.INCHES:return(t/mxConstants.PIXELS_PER_INCH).toFixed(2)}}mxConstants.HANDLE_FILLCOLOR="#29b6f2",mxConstants.HANDLE_STROKECOLOR="#0088cf",mxConstants.VERTEX_SELECTION_COLOR="#00a8ff",mxConstants.OUTLINE_COLOR="#00a8ff",mxConstants.OUTLINE_HANDLE_FILLCOLOR="#99ccff",mxConstants.OUTLINE_HANDLE_STROKECOLOR="#00a8ff",mxConstants.CONNECT_HANDLE_FILLCOLOR="#cee7ff",mxConstants.EDGE_SELECTION_COLOR="#00a8ff",mxConstants.DEFAULT_VALID_COLOR="#00a8ff",mxConstants.LABEL_HANDLE_FILLCOLOR="#cee7ff",mxConstants.GUIDE_COLOR="#0088cf",mxConstants.HIGHLIGHT_OPACITY=30,mxConstants.HIGHLIGHT_SIZE=5,mxEdgeHandler.prototype.snapToTerminals=!0,mxGraphHandler.prototype.guidesEnabled=!0,mxGraphHandler.prototype.removeEmptyParents=!0,mxRubberband.prototype.fadeOut=!0,mxGuide.prototype.isEnabledForEvent=function(t){return!mxEvent.isAltDown(t)};var n,e=mxGraphLayout.prototype.isVertexIgnored,i=(mxGraphLayout.prototype.isVertexIgnored=function(t){return e.apply(this,arguments)||this.graph.isTableRow(t)||this.graph.isTableCell(t)},mxGraphLayout.prototype.isEdgeIgnored),l=(mxGraphLayout.prototype.isEdgeIgnored=function(t){return i.apply(this,arguments)||this.graph.isEdgeIgnored(t)},mxConnectionHandler.prototype.isCreateTarget),r=(mxConnectionHandler.prototype.isCreateTarget=function(t){return this.graph.isCloneEvent(t)||l.apply(this,arguments)},mxConstraintHandler.prototype.createHighlightShape=function(){var t=new mxEllipse(null,this.highlightColor,this.highlightColor,0);return t.opacity=mxConstants.HIGHLIGHT_OPACITY,t},mxConnectionHandler.prototype.livePreview=!0,mxConnectionHandler.prototype.cursor="crosshair",mxConnectionHandler.prototype.createEdgeState=function(t){for(var e in t=this.graph.createCurrentEdgeStyle(),t=this.graph.createEdge(null,null,null,null,null,t),t=new mxCellState(this.graph.view,t,this.graph.getCellStyle(t)),this.graph.currentEdgeStyle)t.style[e]=this.graph.currentEdgeStyle[e];return t},mxConnectionHandler.prototype.createShape),a=(mxConnectionHandler.prototype.createShape=function(){var t=r.apply(this,arguments);return t.isDashed="1"==this.graph.currentEdgeStyle[mxConstants.STYLE_DASHED],t},mxConnectionHandler.prototype.updatePreview=function(t){},mxConnectionHandler.prototype.createMarker),h=(mxConnectionHandler.prototype.createMarker=function(){var t=a.apply(this,arguments),n=t.getCell;return t.getCell=mxUtils.bind(this,function(t){var e=n.apply(this,arguments);return this.error=null,e}),t},Graph.prototype.defaultVertexStyle={},Graph.prototype.defaultEdgeStyle={edgeStyle:"orthogonalEdgeStyle",rounded:"0",jettySize:"auto",orthogonalLoop:"1"},Graph.prototype.createCurrentEdgeStyle=function(){for(var t="edgeStyle="+(this.currentEdgeStyle.edgeStyle||"none")+";",e="shape curved rounded comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification comicStyle jumpStyle jumpSize".split(" "),n=0;n<e.length;n++)null!=this.currentEdgeStyle[e[n]]&&(t+=e[n]+"="+this.currentEdgeStyle[e[n]]+";");return null!=this.currentEdgeStyle.orthogonalLoop?t+="orthogonalLoop="+this.currentEdgeStyle.orthogonalLoop+";":null!=Graph.prototype.defaultEdgeStyle.orthogonalLoop&&(t+="orthogonalLoop="+Graph.prototype.defaultEdgeStyle.orthogonalLoop+";"),null!=this.currentEdgeStyle.jettySize?t+="jettySize="+this.currentEdgeStyle.jettySize+";":null!=Graph.prototype.defaultEdgeStyle.jettySize&&(t+="jettySize="+Graph.prototype.defaultEdgeStyle.jettySize+";"),"elbowEdgeStyle"==this.currentEdgeStyle.edgeStyle&&null!=this.currentEdgeStyle.elbow&&(t+="elbow="+this.currentEdgeStyle.elbow+";"),null!=this.currentEdgeStyle.html?t+("html="+this.currentEdgeStyle.html)+";":t+"html=1;"},Graph.prototype.updateCellStyles=function(t,e,n){this.model.beginUpdate();try{for(var i,l=0;l<n.length;l++)(this.model.isVertex(n[l])||this.model.isEdge(n[l]))&&(this.setCellStyles(t,null,[n[l]]),e!=(null==(i=this.getCellStyle(n[l])[t])?mxConstants.NONE:i))&&this.setCellStyles(t,e,[n[l]])}finally{this.model.endUpdate()}},Graph.prototype.getPagePadding=function(){return new mxPoint(0,0)},Graph.prototype.loadStylesheet=function(){var t=null!=this.themes?this.themes[this.defaultThemeName]:mxStyleRegistry.dynamicLoading?mxUtils.load(STYLE_PATH+"/default.xml").getDocumentElement():null;null!=t&&new mxCodec(t.ownerDocument).decode(t,this.getStylesheet())},Graph.prototype.createCellLookup=function(t,e){e=null!=e?e:{};for(var n=0;n<t.length;n++){var i=t[n];e[mxObjectIdentity.get(i)]=i.getId();for(var l=this.model.getChildCount(i),s=0;s<l;s++)this.createCellLookup([this.model.getChildAt(i,s)],e)}return e},Graph.prototype.createCellMapping=function(t,e,n){for(var i in n=null!=n?n:{},t){var l=e[i];null==n[l]&&(n[l]=t[i].getId()||"")}return n},Graph.prototype.importGraphModel=function(t,e,n,i){e=null!=e?e:0,n=null!=n?n:0;var l=new mxCodec(t.ownerDocument),s=new mxGraphModel,o=(l.decode(t,s),t=[],l={},{});if(null!=(h=s.getChildren(this.cloneCell(s.root,this.isCloneInvalidEdges(),l)))){var r,a=this.createCellLookup([s.root]),h=h.slice();this.model.beginUpdate();try{if(1!=h.length||this.isCellLocked(this.getDefaultParent()))for(s=0;s<h.length;s++)null!=(d=this.model.getChildren(this.moveCells([h[s]],e,n,!1,this.model.getRoot())[0]))&&(t=t.concat(d));else{var d=s.getChildren(h[0]);null!=d&&(t=this.moveCells(d,e,n,!1,this.getDefaultParent()),o[s.getChildAt(s.root,0).getId()]=this.getDefaultParent().getId())}null!=t&&(this.createCellMapping(l,a,o),this.updateCustomLinks(o,t),i)&&(this.isGridEnabled()&&(e=this.snap(e),n=this.snap(n)),null!=(r=this.getBoundingBoxFromGeometry(t,!0))&&this.moveCells(t,e-r.x,n-r.y))}finally{this.model.endUpdate()}}return t},Graph.prototype.encodeCells=function(t){for(var e={},n=this.cloneCells(t,null,e),i=new mxDictionary,l=0;l<t.length;l++)i.put(t[l],!0);for(var s=new mxCodec,o=new mxGraphModel,r=o.getChildAt(o.getRoot(),0),l=0;l<n.length;l++){o.add(r,n[l]);var a,h=this.view.getState(t[l]);null!=h&&null!=(a=this.getCellGeometry(n[l]))&&a.relative&&!this.model.isEdge(t[l])&&null==i.get(this.model.getParent(t[l]))&&(a.offset=null,a.relative=!1,a.x=h.x/h.view.scale-h.view.translate.x,a.y=h.y/h.view.scale-h.view.translate.y)}return this.updateCustomLinks(this.createCellMapping(e,this.createCellLookup(t)),n),s.encode(o)},Graph.prototype.isSwimlane=function(t,e){return null!=t&&this.model.getParent(t)!=this.model.getRoot()&&!this.model.isEdge(t)&&((t=this.getCurrentCellStyle(t,e)[mxConstants.STYLE_SHAPE])==mxConstants.SHAPE_SWIMLANE||"table"==t)},Graph.prototype.isExtendParent),c=(Graph.prototype.isExtendParent=function(t){t=this.model.getParent(t);if(null!=t){var e=this.getCurrentCellStyle(t);if(null!=e.expand)return"0"!=e.expand}return h.apply(this,arguments)&&(null==t||!this.isTable(t))},Graph.prototype.splitEdge),d=(Graph.prototype.splitEdge=function(t,e,n,i,l,s,o,r){null==r&&(r=this.model.getParent(t),this.isTable(r)||this.isTableRow(r))&&(r=this.getCellAt(s,o,null,!0,!1)),n=null,this.model.beginUpdate();try{n=c.apply(this,[t,e,n,i,l,s,o,r]),this.model.setValue(n,"");var a=this.getChildCells(n,!0);for(e=0;e<a.length;e++){var h=this.getCellGeometry(a[e]);null!=h&&h.relative&&0<h.x&&this.model.remove(a[e])}var d=this.getChildCells(t,!0);for(e=0;e<d.length;e++)null!=(h=this.getCellGeometry(d[e]))&&h.relative&&h.x<=0&&this.model.remove(d[e]);this.setCellStyles(mxConstants.STYLE_TARGET_PERIMETER_SPACING,null,[n]),this.setCellStyles(mxConstants.STYLE_ENDARROW,mxConstants.NONE,[n]),this.setCellStyles(mxConstants.STYLE_SOURCE_PERIMETER_SPACING,null,[t]),this.setCellStyles(mxConstants.STYLE_STARTARROW,mxConstants.NONE,[t]);var u,p=this.model.getTerminal(n,!1);null!=p&&null!=(u=this.getCurrentCellStyle(p))&&"1"==u.snapToPoint&&(this.setCellStyles(mxConstants.STYLE_EXIT_X,null,[t]),this.setCellStyles(mxConstants.STYLE_EXIT_Y,null,[t]),this.setCellStyles(mxConstants.STYLE_ENTRY_X,null,[n]),this.setCellStyles(mxConstants.STYLE_ENTRY_Y,null,[n]))}finally{this.model.endUpdate()}return n},Graph.prototype.selectCell),v=(Graph.prototype.selectCell=function(n,t,e){var i,l,s,o;t||e?d.apply(this,arguments):(i=this.getSelectionCell(),l=null,s=[],(o=mxUtils.bind(this,function(t){if(null!=this.view.getState(t)&&(this.model.isVertex(t)||this.model.isEdge(t)))if(s.push(t),t==i)l=s.length-1;else if(n&&null==i&&0<s.length||null!=l&&n&&l<s.length||!n&&0<l)return;for(var e=0;e<this.model.getChildCount(t);e++)o(this.model.getChildAt(t,e))}))(this.model.root),0<s.length&&(l=null!=l?mxUtils.mod(l+(n?1:-1),s.length):0,this.setSelectionCell(s[l])))},Graph.prototype.moveCells),u=(Graph.prototype.moveCells=function(t,e,n,i,l,s,o){if(o=null!=o?o:{},this.isTable(l)){for(var r=[],a=0;a<t.length;a++)this.isTable(t[a])?r=r.concat(this.model.getChildCells(t[a],!0).reverse()):r.push(t[a]);t=r}this.model.beginUpdate();try{for(r=[],a=0;a<t.length;a++)if(null!=l&&this.isTableRow(t[a])){var h=this.model.getParent(t[a]),d=this.getCellGeometry(t[a]);if(this.isTable(h)&&r.push(h),null!=h&&null!=d&&this.isTable(h)&&this.isTable(l)&&(i||h!=l)){i||null!=(u=this.getCellGeometry(h))&&((u=u.clone()).height-=d.height,this.model.setGeometry(h,u)),null!=(u=this.getCellGeometry(l))&&((u=u.clone()).height+=d.height,this.model.setGeometry(l,u));var u,p=this.model.getChildCells(l,!0);if(0<p.length){t[a]=i?this.cloneCell(t[a]):t[a];var c=this.model.getChildCells(t[a],!0),m=this.model.getChildCells(p[0],!0),g=m.length-c.length;if(0<g)for(var x=0;x<g;x++){var y=this.cloneCell(c[c.length-1]);null!=y&&(y.value="",this.model.add(t[a],y))}else if(g<0)for(x=0;g<x;x--)this.model.remove(c[c.length+x-1]);for(c=this.model.getChildCells(t[a],!0),x=0;x<m.length;x++){var f=this.getCellGeometry(m[x]),C=this.getCellGeometry(c[x]);null!=f&&null!=C&&((C=C.clone()).width=f.width,this.model.setGeometry(c[x],C))}}}}for(var E=v.apply(this,arguments),a=0;a<r.length;a++)!i&&this.model.contains(r[a])&&0==this.model.getChildCount(r[a])&&this.model.remove(r[a]);i&&this.updateCustomLinks(this.createCellMapping(o,this.createCellLookup(t)),E)}finally{this.model.endUpdate()}return E},Graph.prototype.removeCells),p=(Graph.prototype.removeCells=function(t,e){var n=[];this.model.beginUpdate();try{for(var i=0;i<t.length;i++)if(this.isTableCell(t[i])){var l=this.model.getParent(t[i]),s=this.model.getParent(l);1==this.model.getChildCount(l)&&1==this.model.getChildCount(s)?mxUtils.indexOf(t,s)<0&&mxUtils.indexOf(n,s)<0&&n.push(s):this.labelChanged(t[i],"")}else{if(this.isTableRow(t[i])&&(s=this.model.getParent(t[i]),mxUtils.indexOf(t,s)<0)&&mxUtils.indexOf(n,s)<0){for(var o=this.model.getChildCells(s,!0),r=0,a=0;a<o.length;a++)0<=mxUtils.indexOf(t,o[a])&&r++;r==o.length&&n.push(s)}n.push(t[i])}n=u.apply(this,[n,e])}finally{this.model.endUpdate()}return n},Graph.prototype.updateCustomLinks=function(t,e){for(var n=0;n<e.length;n++)null!=e[n]&&this.updateCustomLinksForCell(t,e[n])},Graph.prototype.updateCustomLinksForCell=function(t,e){},Graph.prototype.getAllConnectionConstraints=function(t,e){if(null!=t){if(null!=(e=mxUtils.getValue(t.style,"points",null))){t=[];try{var n=JSON.parse(e);for(e=0;e<n.length;e++){var i=n[e];t.push(new mxConnectionConstraint(new mxPoint(i[0],i[1]),!(2<i.length)||"0"!=i[2],null,3<i.length?i[3]:0,4<i.length?i[4]:0))}}catch(t){}return t}if(null!=t.shape&&null!=t.shape.bounds){i=t.shape.direction,e=t.shape.bounds;var l=t.shape.scale,n=e.width/l;if(e=e.height/l,i!=mxConstants.DIRECTION_NORTH&&i!=mxConstants.DIRECTION_SOUTH||(i=n,n=e,e=i),null!=(e=t.shape.getConstraints(t.style,n,e)))return e;if(null!=t.shape.stencil&&null!=t.shape.stencil.constraints)return t.shape.stencil.constraints;if(null!=t.shape.constraints)return t.shape.constraints}}return null},Graph.prototype.flipEdge=function(t){var e;null!=t&&(e=this.getCurrentCellStyle(t),e=mxUtils.getValue(e,mxConstants.STYLE_ELBOW,mxConstants.ELBOW_HORIZONTAL)==mxConstants.ELBOW_HORIZONTAL?mxConstants.ELBOW_VERTICAL:mxConstants.ELBOW_HORIZONTAL,this.setCellStyles(mxConstants.STYLE_ELBOW,e,[t]))},Graph.prototype.isValidRoot=function(t){for(var e=this.model.getChildCount(t),n=0,i=0;i<e;i++){var l=this.model.getChildAt(t,i);this.model.isVertex(l)&&(null==(l=this.getCellGeometry(l))||l.relative||n++)}return 0<n||this.isContainer(t)},Graph.prototype.isValidDropTarget=function(t,e,n){for(var i=this.getCurrentCellStyle(t),l=!0,s=!0,o=0;o<e.length&&s;o++)l=l&&this.isTable(e[o]),s=s&&this.isTableRow(e[o]);return("1"!=mxUtils.getValue(i,"part","0")||this.isContainer(t))&&"0"!=mxUtils.getValue(i,"dropTarget","1")&&(mxGraph.prototype.isValidDropTarget.apply(this,arguments)||this.isContainer(t))&&!this.isTableRow(t)&&(!this.isTable(t)||s||l)},Graph.prototype.createGroupCell=function(){var t=mxGraph.prototype.createGroupCell.apply(this,arguments);return t.setStyle("group"),t},Graph.prototype.isExtendParentsOnAdd=function(t){var e=mxGraph.prototype.isExtendParentsOnAdd.apply(this,arguments);return e=e&&null!=t&&null!=this.layoutManager&&null!=(t=this.model.getParent(t))&&null!=(t=this.layoutManager.getLayout(t))&&t.constructor==mxStackLayout?!1:e},Graph.prototype.getPreferredSizeForCell=function(t){var e=mxGraph.prototype.getPreferredSizeForCell.apply(this,arguments);return null!=e&&(e.width+=10,e.height+=4,this.gridEnabled)&&(e.width=this.snap(e.width),e.height=this.snap(e.height)),e},Graph.prototype.turnShapes=function(t,e){var n=this.getModel(),i=[];n.beginUpdate();try{for(var l=0;l<t.length;l++){var s,o,r,a,h,d,u,p,c,m,g,x,y,f,C,E=t[l];n.isEdge(E)?(s=n.getTerminal(E,!0),o=n.getTerminal(E,!1),n.setTerminal(E,o,!0),n.setTerminal(E,s,!1),null!=(r=n.getGeometry(E))&&(null!=(r=r.clone()).points&&r.points.reverse(),a=r.getTerminalPoint(!0),h=r.getTerminalPoint(!1),r.setTerminalPoint(a,!1),r.setTerminalPoint(h,!0),n.setGeometry(E,r),d=this.view.getState(E),u=this.view.getState(s),p=this.view.getState(o),null!=d&&(c=null!=u?this.getConnectionConstraint(d,u,!0):null,m=null!=p?this.getConnectionConstraint(d,p,!1):null,this.setConnectionConstraint(E,s,!0,m),this.setConnectionConstraint(E,o,!1,c),g=mxUtils.getValue(d.style,mxConstants.STYLE_SOURCE_PERIMETER_SPACING),this.setCellStyles(mxConstants.STYLE_SOURCE_PERIMETER_SPACING,mxUtils.getValue(d.style,mxConstants.STYLE_TARGET_PERIMETER_SPACING),[E]),this.setCellStyles(mxConstants.STYLE_TARGET_PERIMETER_SPACING,g,[E])),i.push(E))):n.isVertex(E)&&null!=(r=this.getCellGeometry(E))&&(this.isTable(E)||this.isTableRow(E)||this.isTableCell(E)||this.isSwimlane(E)||((r=r.clone()).x+=r.width/2-r.height/2,r.y+=r.height/2-r.width/2,x=r.width,r.width=r.height,r.height=x,n.setGeometry(E,r)),null!=(y=this.view.getState(E))&&(f=[mxConstants.DIRECTION_EAST,mxConstants.DIRECTION_SOUTH,mxConstants.DIRECTION_WEST,mxConstants.DIRECTION_NORTH],C=mxUtils.getValue(y.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST),this.setCellStyles(mxConstants.STYLE_DIRECTION,f[mxUtils.mod(mxUtils.indexOf(f,C)+(e?-1:1),f.length)],[E])),i.push(E))}}finally{n.endUpdate()}return i},Graph.prototype.stencilHasPlaceholders=function(t){if(null!=t&&null!=t.fgNode)for(t=t.fgNode.firstChild;null!=t;){if("text"==t.nodeName&&"1"==t.getAttribute("placeholders"))return!0;t=t.nextSibling}return!1},Graph.prototype.processChange),m=(Graph.prototype.processChange=function(t){var e,n;t instanceof mxGeometryChange&&(this.isTableCell(t.cell)||this.isTableRow(t.cell))&&(null==t.previous&&null!=t.geometry||null!=t.previous&&!t.previous.equals(t.geometry))&&(e=t.cell,this.isTableCell(e)&&(e=this.model.getParent(e)),this.isTableRow(e)&&(e=this.model.getParent(e)),null!=(n=this.view.getState(e)))&&null!=n.shape&&(this.view.invalidate(e),n.shape.bounds=null),p.apply(this,arguments),t instanceof mxValueChange&&null!=t.cell&&null!=t.cell.value&&"object"==typeof t.cell.value&&this.invalidateDescendantsWithPlaceholders(t.cell)},Graph.prototype.invalidateDescendantsWithPlaceholders=function(t){if(0<(t=this.model.getDescendants(t)).length)for(var e=0;e<t.length;e++){var n=this.view.getState(t[e]);null!=n&&null!=n.shape&&null!=n.shape.stencil&&this.stencilHasPlaceholders(n.shape.stencil)?this.removeStateForCell(t[e]):this.isReplacePlaceholders(t[e])&&this.view.invalidate(t[e],!1,!1)}},Graph.prototype.replaceElement=function(t,e){e=t.ownerDocument.createElement(null!=e?e:"span");for(var n=Array.prototype.slice.call(t.attributes);attr=n.pop();)e.setAttribute(attr.nodeName,attr.nodeValue);e.innerHTML=t.innerHTML,t.parentNode.replaceChild(e,t)},Graph.prototype.processElements=function(t,e){if(null!=t){t=t.getElementsByTagName("*");for(var n=0;n<t.length;n++)e(t[n])}},Graph.prototype.updateLabelElements=function(t,e,n){t=null!=t?t:this.getSelectionCells();for(var i=document.createElement("div"),l=0;l<t.length;l++)if(this.isHtmlLabel(t[l])){var s=this.convertValueToString(t[l]);if(null!=s&&0<s.length){i.innerHTML=s;for(var o=i.getElementsByTagName(null!=n?n:"*"),r=0;r<o.length;r++)e(o[r]);i.innerHTML!=s&&this.cellLabelChanged(t[l],i.innerHTML)}}},Graph.prototype.cellLabelChanged=function(t,e,n){e=Graph.zapGremlins(e),this.model.beginUpdate();try{if(null!=t.value&&"object"==typeof t.value){if(this.isReplacePlaceholders(t)&&null!=t.getAttribute("placeholder"))for(var i=t.getAttribute("placeholder"),l=t;null!=l;){if(l==this.model.getRoot()||null!=l.value&&"object"==typeof l.value&&l.hasAttribute(i)){this.setAttributeForCell(l,i,e);break}l=this.model.getParent(l)}var s=t.value.cloneNode(!0);Graph.translateDiagram&&null!=Graph.diagramLanguage&&s.hasAttribute("label_"+Graph.diagramLanguage)?s.setAttribute("label_"+Graph.diagramLanguage,e):s.setAttribute("label",e),e=s}mxGraph.prototype.cellLabelChanged.apply(this,arguments)}finally{this.model.endUpdate()}},Graph.prototype.cellsRemoved=function(t){if(null!=t){for(var e=new mxDictionary,n=0;n<t.length;n++)e.put(t[n],!0);for(var i=[],n=0;n<t.length;n++){var l=this.model.getParent(t[n]);null==l||e.get(l)||(e.put(l,!0),i.push(l))}for(n=0;n<i.length;n++)if(null!=(l=this.view.getState(i[n]))&&(this.model.isEdge(l.cell)||this.model.isVertex(l.cell))&&this.isCellDeletable(l.cell)&&this.isTransparentState(l)){for(var s=!0,o=0;o<this.model.getChildCount(l.cell)&&s;o++)e.get(this.model.getChildAt(l.cell,o))||(s=!1);s&&t.push(l.cell)}}mxGraph.prototype.cellsRemoved.apply(this,arguments)},Graph.prototype.removeCellsAfterUngroup=function(t){for(var e=[],n=0;n<t.length;n++)this.isCellDeletable(t[n])&&this.isTransparentState(this.view.getState(t[n]))&&e.push(t[n]);t=e,mxGraph.prototype.removeCellsAfterUngroup.apply(this,arguments)},Graph.prototype.setLinkForCell=function(t,e){this.setAttributeForCell(t,"link",e)},Graph.prototype.setTooltipForCell=function(t,e){var n="tooltip";Graph.translateDiagram&&null!=Graph.diagramLanguage&&mxUtils.isNode(t.value)&&t.value.hasAttribute("tooltip_"+Graph.diagramLanguage)&&(n="tooltip_"+Graph.diagramLanguage),this.setAttributeForCell(t,n,e)},Graph.prototype.getAttributeForCell=function(t,e,n){return null!=(t=null!=t.value&&"object"==typeof t.value?t.value.getAttribute(e):null)?t:n},Graph.prototype.setAttributeForCell=function(t,e,n){var i;null!=t.value&&"object"==typeof t.value?i=t.value.cloneNode(!0):(i=mxUtils.createXmlDocument().createElement("UserObject")).setAttribute("label",t.value||""),null!=n?i.setAttribute(e,n):i.removeAttribute(e),this.model.setValue(t,i)},Graph.prototype.getDropTarget),g=(Graph.prototype.getDropTarget=function(t,e,n,i){if(this.getModel(),mxEvent.isAltDown(e))return null;for(var l=0;l<t.length;l++)if(this.model.isEdge(this.model.getParent(t[l])))return null;for(var e=m.apply(this,arguments),s=!0,l=0;l<t.length&&s;l++)s=s&&this.isTableRow(t[l]);return s&&(this.isTableCell(e)&&(e=this.model.getParent(e)),this.isTableRow(e)&&(e=this.model.getParent(e)),this.isTable(e)||(e=null)),e},Graph.prototype.click=function(t){mxGraph.prototype.click.call(this,t),this.firstClickState=t.getState(),this.firstClickSource=t.getSource()},Graph.prototype.dblClick=function(t,e){this.isEnabled()&&(e=this.insertTextForEvent(t,e),mxGraph.prototype.dblClick.call(this,t,e))},Graph.prototype.insertTextForEvent=function(t,e){var n,i,l=mxUtils.convertPoint(this.container,mxEvent.getClientX(t),mxEvent.getClientY(t));return null==t||this.model.isVertex(e)||(n=this.model.isEdge(e)?this.view.getState(e):null,i=mxEvent.getSource(t),this.firstClickState!=n)||this.firstClickSource!=i||null!=n&&null!=n.text&&null!=n.text.node&&null!=n.text.boundingBox&&(mxUtils.contains(n.text.boundingBox,l.x,l.y)||mxUtils.isAncestorNode(n.text.node,mxEvent.getSource(t)))||(null!=n||this.isCellLocked(this.getDefaultParent()))&&(null==n||this.isCellLocked(n.cell))||!(null!=n||mxClient.IS_SVG&&i==this.view.getCanvas().ownerSVGElement)||(null==n&&(n=this.view.getState(this.getCellAt(l.x,l.y))),e=this.addText(l.x,l.y,n)),e},Graph.prototype.getInsertPoint=function(){var t,e,n=this.getGridSize(),i=this.container.scrollLeft/this.view.scale-this.view.translate.x,l=this.container.scrollTop/this.view.scale-this.view.translate.y;return this.pageVisible&&(t=this.getPageLayout(),e=this.getPageSize(),i=Math.max(i,t.x*e.width),l=Math.max(l,t.y*e.height)),new mxPoint(this.snap(i+n),this.snap(l+n))},Graph.prototype.getFreeInsertPoint=function(){var t=this.view,e=this.getGraphBounds(),n=this.getInsertPoint();return new mxPoint(this.snap(Math.round(Math.max(n.x,e.x/t.scale-t.translate.x+(0==e.width?2*this.gridSize:0)))),this.snap(Math.round(Math.max(n.y,(e.y+e.height)/t.scale-t.translate.y+2*this.gridSize))))},Graph.prototype.getCenterInsertPoint=function(t){return t=null!=t?t:new mxRectangle,mxUtils.hasScrollbars(this.container)?new mxPoint(this.snap(Math.round((this.container.scrollLeft+this.container.clientWidth/2)/this.view.scale-this.view.translate.x-t.width/2)),this.snap(Math.round((this.container.scrollTop+this.container.clientHeight/2)/this.view.scale-this.view.translate.y-t.height/2))):new mxPoint(this.snap(Math.round(this.container.clientWidth/2/this.view.scale-this.view.translate.x-t.width/2)),this.snap(Math.round(this.container.clientHeight/2/this.view.scale-this.view.translate.y-t.height/2)))},Graph.prototype.isMouseInsertPoint=function(){return!1},Graph.prototype.addText=function(t,e,n){var i,l,s=new mxCell;s.value="Text",s.geometry=new mxGeometry(0,0,0,0),s.vertex=!0,null!=n&&this.model.isEdge(n.cell)?(s.style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];",s.geometry.relative=!0,s.connectable=!1,i=this.view.getRelativePoint(n,t,e),s.geometry.x=Math.round(1e4*i.x)/1e4,s.geometry.y=Math.round(i.y),s.geometry.offset=new mxPoint(0,0),i=this.view.getPoint(n,s.geometry),l=this.view.scale,s.geometry.offset=new mxPoint(Math.round((t-i.x)/l),Math.round((e-i.y)/l))):(i=this.view.translate,s.style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];",s.geometry.width=40,s.geometry.height=20,s.geometry.x=Math.round(t/this.view.scale)-i.x-(null!=n?n.origin.x:0),s.geometry.y=Math.round(e/this.view.scale)-i.y-(null!=n?n.origin.y:0),s.style+="autosize=1;"),this.getModel().beginUpdate();try{this.addCells([s],null!=n?n.cell:null),this.fireEvent(new mxEventObject("textInserted","cells",[s])),this.autoSizeCell(s)}finally{this.getModel().endUpdate()}return s},Graph.prototype.addClickHandler=function(t,i,l){var e=mxUtils.bind(this,function(){var t=this.container.getElementsByTagName("a");if(null!=t)for(var e=0;e<t.length;e++){var n=this.getAbsoluteUrl(t[e].getAttribute("href"));null!=n&&(t[e].setAttribute("rel",this.linkRelation),t[e].setAttribute("href",n),null!=i)&&mxEvent.addGestureListeners(t[e],null,null,i)}}),n=(this.model.addListener(mxEvent.CHANGE,e),e(),this.container.style.cursor),s=this.getTolerance(),o=this,r={currentState:null,currentLink:null,currentTarget:null,highlight:null!=t&&""!=t&&t!=mxConstants.NONE?new mxCellHighlight(o,t,4):null,startX:0,startY:0,scrollLeft:0,scrollTop:0,updateCurrentState:function(t){var e=t.sourceState;null!=e&&null!=o.getLinkForCell(e.cell)||(t=o.getCellAt(t.getGraphX(),t.getGraphY(),null,null,null,function(t,e,n){return null==o.getLinkForCell(t.cell)}),e=o.view.getState(t)),e!=this.currentState&&(null!=this.currentState&&this.clear(),this.currentState=e,null!=this.currentState)&&this.activate(this.currentState)},mouseDown:function(t,e){this.startX=e.getGraphX(),this.startY=e.getGraphY(),this.scrollLeft=o.container.scrollLeft,this.scrollTop=o.container.scrollTop,null==this.currentLink&&"auto"==o.container.style.overflow&&(o.container.style.cursor="move"),this.updateCurrentState(e)},mouseMove:function(t,e){if(o.isMouseDown)null!=this.currentLink&&(t=Math.abs(this.startX-e.getGraphX()),e=Math.abs(this.startY-e.getGraphY()),s<t||s<e)&&this.clear();else{for(t=e.getSource();null!=t&&"a"!=t.nodeName.toLowerCase();)t=t.parentNode;null!=t?this.clear():(null!=o.tooltipHandler&&null!=this.currentLink&&null!=this.currentState&&o.tooltipHandler.reset(e,!0,this.currentState),null!=this.currentState&&(e.getState()==this.currentState||null==e.sourceState)&&o.intersects(this.currentState,e.getGraphX(),e.getGraphY())||this.updateCurrentState(e))}},mouseUp:function(t,e){var n=e.getSource();for(t=e.getEvent();null!=n&&"a"!=n.nodeName.toLowerCase();)n=n.parentNode;null==n&&Math.abs(this.scrollLeft-o.container.scrollLeft)<s&&Math.abs(this.scrollTop-o.container.scrollTop)<s&&(null==e.sourceState||!e.isSource(e.sourceState.control))&&((mxEvent.isLeftMouseButton(t)||mxEvent.isMiddleMouseButton(t))&&!mxEvent.isPopupTrigger(t)||mxEvent.isTouchEvent(t))&&(null!=this.currentLink?(n=o.isBlankLink(this.currentLink),"data:"!==this.currentLink.substring(0,5)&&n||null==i||i(t,this.currentLink),mxEvent.isConsumed(t)||(t=null!=this.currentTarget?this.currentTarget:mxEvent.isMiddleMouseButton(t)?"_blank":n?o.linkTarget:"_top",o.openLink(this.currentLink,t),e.consume())):null!=l&&!e.isConsumed()&&Math.abs(this.scrollLeft-o.container.scrollLeft)<s&&Math.abs(this.scrollTop-o.container.scrollTop)<s&&Math.abs(this.startX-e.getGraphX())<s&&Math.abs(this.startY-e.getGraphY())<s&&l(e.getEvent())),this.clear()},activate:function(t){this.currentLink=o.getAbsoluteUrl(o.getLinkForCell(t.cell)),null!=this.currentLink&&(this.currentTarget=o.getLinkTargetForCell(t.cell),o.container.style.cursor="pointer",null!=this.highlight)&&this.highlight.highlight(t)},clear:function(){null!=o.container&&(o.container.style.cursor=n),(this.currentLink=this.currentState=this.currentTarget=null)!=this.highlight&&this.highlight.hide(),null!=o.tooltipHandler&&o.tooltipHandler.hide()}};o.click=function(t){},o.addMouseListener(r),mxEvent.addListener(document,"mouseleave",function(t){r.clear()})},Graph.prototype.duplicateCells=function(t,e){t=null!=t?t:this.getSelectionCells(),e=null==e||e;for(var n=0;n<t.length;n++)this.isTableCell(t[n])&&(t[n]=this.model.getParent(t[n]));t=this.model.getTopmostCells(t);var i=this.getModel(),l=this.gridSize,s=[];i.beginUpdate();try{for(var o=this.cloneCells(t,!1,null,!0),n=0;n<t.length;n++){var r,a,h,d=i.getParent(t[n]),u=this.moveCells([o[n]],l,l,!1)[0];s.push(u),e?i.add(d,o[n]):(r=d.getIndex(t[n]),i.add(d,o[n],r+1)),this.isTable(d)&&(a=this.getCellGeometry(o[n]),h=this.getCellGeometry(d),null!=a)&&null!=h&&((h=h.clone()).height+=a.height,i.setGeometry(d,h))}}finally{i.endUpdate()}return s},Graph.prototype.insertImage=function(t,e,n){if(null!=t&&null!=this.cellEditor.textarea){for(var i=this.cellEditor.textarea.getElementsByTagName("img"),l=[],s=0;s<i.length;s++)l.push(i[s]);if(document.execCommand("insertimage",!1,t),(t=this.cellEditor.textarea.getElementsByTagName("img")).length==l.length+1)for(s=t.length-1;0<=s;s--)if(0==s||t[s]!=l[s-1]){t[s].setAttribute("width",e),t[s].setAttribute("height",n);break}}},Graph.prototype.insertLink=function(t){if(null!=this.cellEditor.textarea)if(0==t.length)document.execCommand("unlink",!1);else if(mxClient.IS_FF){for(var e=this.cellEditor.textarea.getElementsByTagName("a"),n=[],i=0;i<e.length;i++)n.push(e[i]);if(document.execCommand("createlink",!1,mxUtils.trim(t)),(e=this.cellEditor.textarea.getElementsByTagName("a")).length==n.length+1)for(i=e.length-1;0<=i;i--)if(e[i]!=n[i-1]){for(e=e[i].getElementsByTagName("a");0<e.length;){for(n=e[0].parentNode;null!=e[0].firstChild;)n.insertBefore(e[0].firstChild,e[0]);n.removeChild(e[0])}break}}else document.execCommand("createlink",!1,mxUtils.trim(t))},Graph.prototype.isCellResizable=function(t){var e=mxGraph.prototype.isCellResizable.apply(this,arguments),n=this.getCurrentCellStyle(t);return!this.isTableCell(t)&&!this.isTableRow(t)&&(e||"0"!=mxUtils.getValue(n,mxConstants.STYLE_RESIZABLE,"1")&&"wrap"==n[mxConstants.STYLE_WHITE_SPACE])},Graph.prototype.distributeCells=function(n,t){if(null!=(t=null==t?this.getSelectionCells():t)&&1<t.length){for(var e,i,l=[],s=null,o=null,r=0;r<t.length;r++)this.getModel().isVertex(t[r])&&null!=(e=this.view.getState(t[r]))&&(i=n?e.getCenterX():e.getCenterY(),s=null!=s?Math.max(s,i):i,o=null!=o?Math.min(o,i):i,l.push(e));if(2<l.length){l.sort(function(t,e){return n?t.x-e.x:t.y-e.y}),e=this.view.translate,o=o/(i=this.view.scale)-(n?e.x:e.y),s=s/i-(n?e.x:e.y),this.getModel().beginUpdate();try{var a=(s-o)/(l.length-1);for(s=o,r=1;r<l.length-1;r++){var h=this.view.getState(this.model.getParent(l[r].cell)),d=this.getCellGeometry(l[r].cell);s+=a,null!=d&&null!=h&&(d=d.clone(),n?d.x=Math.round(s-d.width/2)-h.origin.x:d.y=Math.round(s-d.height/2)-h.origin.y,this.getModel().setGeometry(l[r].cell,d))}}finally{this.getModel().endUpdate()}}}return t},Graph.prototype.isCloneEvent=function(t){return mxClient.IS_MAC&&mxEvent.isMetaDown(t)||mxEvent.isControlDown(t)},Graph.prototype.createSvgImageExport=function(){var t=new mxImageExport;return t.getLinkForCellState=mxUtils.bind(this,function(t,e){return this.getLinkForCell(t.cell)}),t},Graph.prototype.getSvg=function(t,e,n,i,l,s,o,r,a,h,d,u,p,c){var m=null;if(null!=c)for(m=new mxDictionary,d=0;d<c.length;d++)m.put(c[d],!0);(c=this.useCssTransforms)&&(this.useCssTransforms=!1,this.view.revalidate(),this.sizeDidChange());try{e=null!=e?e:1,n=null!=n?n:0,l=null==l||l,s=null==s||s,o=null==o||o;var g="page"==p?this.view.getBackgroundPageBounds():s&&null==m||i||"diagram"==p?this.getGraphBounds():this.getBoundingBox(this.getSelectionCells());if(null==g)throw Error(mxResources.get("drawingEmpty"));var x,y,f=this.view.scale,C=mxUtils.createXmlDocument(),E=null!=C.createElementNS?C.createElementNS(mxConstants.NS_SVG,"svg"):C.createElement("svg"),v=(null!=t&&(null!=E.style?E.style.backgroundColor=t:E.setAttribute("style","background-color:"+t)),null==C.createElementNS?(E.setAttribute("xmlns",mxConstants.NS_SVG),E.setAttribute("xmlns:xlink",mxConstants.NS_XLINK)):E.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",mxConstants.NS_XLINK),t=e/f,Math.max(1,Math.ceil(g.width*t)+2*n)+(h?5:0)),S=Math.max(1,Math.ceil(g.height*t)+2*n)+(h?5:0),b=(E.setAttribute("version","1.1"),E.setAttribute("width",v+"px"),E.setAttribute("height",S+"px"),E.setAttribute("viewBox",(l?"-0.5 -0.5":"0 0")+" "+v+" "+S),C.appendChild(E),null!=C.createElementNS?C.createElementNS(mxConstants.NS_SVG,"g"):C.createElement("g")),w=(E.appendChild(b),this.createSvgCanvas(b)),T=(w.foOffset=l?-.5:0,w.textOffset=l?-.5:0,w.imageOffset=l?-.5:0,w.translate(Math.floor((n/e-g.x)/f),Math.floor((n/e-g.y)/f)),document.createElement("div")),A=w.getAlternateText,L=(w.getAlternateText=function(t,e,n,i,l,s,o,r,a,h,d,u,p){if(!(null!=s&&0<this.state.fontSize))return A.apply(this,arguments);try{s=mxUtils.isNode(s)?s.innerText:(T.innerHTML=s,mxUtils.extractTextWithWhitespace(T.childNodes));for(var c=Math.ceil(2*i/this.state.fontSize),m=[],g=0,x=0;(0==c||g<c)&&x<s.length;){var y=s.charCodeAt(x);if(10==y||13==y){if(0<g)break}else m.push(s.charAt(x)),y<255&&g++;x++}return s=m.length<s.length&&1<s.length-m.length?mxUtils.trim(m.join(""))+"...":s}catch(t){return A.apply(this,arguments)}},this.backgroundImage),M=(null!=L&&(e=f/e,y=new mxRectangle((x=this.view.translate).x*e,x.y*e,L.width*e,L.height*e),mxUtils.intersects(g,y))&&w.image(x.x,x.y,L.width,L.height,L.src,!0),w.scale(t),w.textEnabled=o,(r=null!=r?r:this.createSvgImageExport()).drawCellState),R=r.getLinkForCellState;return r.getLinkForCellState=function(t,e){var n=R.apply(this,arguments);return null==n||t.view.graph.isCustomLink(n)?null:n},r.getLinkTargetForCellState=function(t,e){return t.view.graph.getLinkTargetForCell(t.cell)},r.drawCellState=function(t,e){for(var n=t.view.graph,i=null!=m?m.get(t.cell):n.isCellSelected(t.cell),l=n.model.getParent(t.cell);!(s&&null==m||i)&&null!=l;)i=null!=m?m.get(l):n.isCellSelected(l),l=n.model.getParent(l);(s&&null==m||i)&&M.apply(this,arguments)},r.drawState(this.getView().getState(this.model.root),w),this.updateSvgLinks(E,a,!0),this.addForeignObjectWarning(w,E),E}finally{c&&(this.useCssTransforms=!0,this.view.revalidate(),this.sizeDidChange())}},Graph.prototype.addForeignObjectWarning=function(t,e){var n,i,l;"0"!=urlParams["svg-warning"]&&0<e.getElementsByTagName("foreignObject").length&&(n=t.createElement("switch"),(i=t.createElement("g")).setAttribute("requiredFeatures","http://www.w3.org/TR/SVG11/feature#Extensibility"),(l=t.createElement("a")).setAttribute("transform","translate(0,-5)"),null==l.setAttributeNS||e.ownerDocument!=document&&null==document.documentMode?(l.setAttribute("xlink:href",Graph.foreignObjectWarningLink),l.setAttribute("target","_blank")):(l.setAttributeNS(mxConstants.NS_XLINK,"xlink:href",Graph.foreignObjectWarningLink),l.setAttributeNS(mxConstants.NS_XLINK,"target","_blank")),(t=t.createElement("text")).setAttribute("text-anchor","middle"),t.setAttribute("font-size","10px"),t.setAttribute("x","50%"),t.setAttribute("y","100%"),mxUtils.write(t,Graph.foreignObjectWarningText),n.appendChild(i),l.appendChild(t),n.appendChild(l),e.appendChild(n))},Graph.prototype.updateSvgLinks=function(t,e,n){t=t.getElementsByTagName("a");for(var i,l=0;l<t.length;l++)null==t[l].getAttribute("target")&&null!=(i=null==(i=t[l].getAttribute("href"))?t[l].getAttribute("xlink:href"):i)&&(null!=e&&/^https?:\/\//.test(i)?t[l].setAttribute("target",e):n&&this.isCustomLink(i)&&t[l].setAttribute("href","javascript:void(0);"))},Graph.prototype.createSvgCanvas=function(t){return(t=new mxSvgCanvas2D(t)).pointerEvents=!0,t},Graph.prototype.getSelectedElement=function(){var t,e=null;return window.getSelection?(t=window.getSelection()).getRangeAt&&t.rangeCount&&(e=t.getRangeAt(0).commonAncestorContainer):document.selection&&(e=document.selection.createRange().parentElement()),e},Graph.prototype.getSelectedEditingElement=function(){for(var t=this.getSelectedElement();null!=t&&t.nodeType!=mxConstants.NODETYPE_ELEMENT;)t=t.parentNode;return t=null!=t&&t==this.cellEditor.textarea&&1==this.cellEditor.textarea.children.length&&this.cellEditor.textarea.firstChild.nodeType==mxConstants.NODETYPE_ELEMENT?this.cellEditor.textarea.firstChild:t},Graph.prototype.getParentByName=function(t,e,n){for(;null!=t&&t.nodeName!=e;){if(t==n)return null;t=t.parentNode}return t},Graph.prototype.getParentByNames=function(t,e,n){for(;null!=t&&!(0<=mxUtils.indexOf(e,t.nodeName));){if(t==n)return null;t=t.parentNode}return t},Graph.prototype.selectNode=function(t){var e,n=null;window.getSelection?(n=window.getSelection()).getRangeAt&&n.rangeCount&&((e=document.createRange()).selectNode(t),n.removeAllRanges(),n.addRange(e)):(n=document.selection)&&"Control"!=n.type&&((t=n.createRange()).collapse(!0),(e=n.createRange()).setEndPoint("StartToStart",t),e.select())},Graph.prototype.deleteCells=function(t,e){var n=null;if(null!=t&&0<t.length){this.model.beginUpdate();try{for(var i=0;i<t.length;i++){var l,s,o=this.model.getParent(t[i]);this.isTable(o)&&(l=this.getCellGeometry(t[i]),s=this.getCellGeometry(o),null!=l)&&null!=s&&((s=s.clone()).height-=l.height,this.model.setGeometry(o,s))}var r=this.selectParentAfterDelete?this.model.getParents(t):null;this.removeCells(t,e)}finally{this.model.endUpdate()}if(null!=r)for(n=[],i=0;i<r.length;i++)this.model.contains(r[i])&&(this.model.isVertex(r[i])||this.model.isEdge(r[i]))&&n.push(r[i])}return n},Graph.prototype.insertTableColumn=function(t,e){var n=this.getModel();n.beginUpdate();try{var i,l=t,s=0,o=(this.isTableCell(t)?(i=n.getParent(t),l=n.getParent(i),s=mxUtils.indexOf(n.getChildCells(i,!0),t)):(this.isTableRow(t)?l=n.getParent(t):t=n.getChildCells(l,!0)[0],e||(s=n.getChildCells(t,!0).length-1)),n.getChildCells(l,!0)),r=Graph.minTableColumnWidth;for(t=0;t<o.length;t++){var a,h=n.getChildCells(o[t],!0)[s],d=n.cloneCell(h,!1),u=this.getCellGeometry(d);(d.value=null)!=u&&(r=u.width,null!=(a=this.getCellGeometry(o[t])))&&(u.height=a.height),n.add(o[t],d,s+(e?0:1))}var p=this.getCellGeometry(l);null!=p&&((p=p.clone()).width+=r,n.setGeometry(l,p))}finally{n.endUpdate()}},Graph.prototype.insertTableRow=function(t,e){var n=this.getModel();n.beginUpdate();try{var i,l=t,s=t,o=(this.isTableCell(t)?(s=n.getParent(t),l=n.getParent(s)):this.isTableRow(t)?l=n.getParent(t):s=(i=n.getChildCells(l,!0))[e?0:i.length-1],n.getChildCells(s,!0)),r=l.getIndex(s),a=((s=n.cloneCell(s,!1)).value=null,this.getCellGeometry(s));if(null!=a){for(i=0;i<o.length;i++){t=n.cloneCell(o[i],!1),s.insert(t),t.value=null;var h=this.getCellGeometry(t);null!=h&&(h.height=a.height)}n.add(l,s,r+(e?0:1));var d=this.getCellGeometry(l);null!=d&&((d=d.clone()).height+=a.height,n.setGeometry(l,d))}}finally{n.endUpdate()}},Graph.prototype.deleteTableColumn=function(t){var e=this.getModel();e.beginUpdate();try{var n=t,i=t,l=(this.isTableCell(t)&&(i=e.getParent(t)),this.isTableRow(i)&&(n=e.getParent(i)),e.getChildCells(n,!0));if(0==l.length)e.remove(n);else{this.isTableRow(i)||(i=l[0]);var s=e.getChildCells(i,!0);if(s.length<=1)e.remove(n);else{var o=s.length-1;for(this.isTableCell(t)&&(o=mxUtils.indexOf(s,t)),i=t=0;i<l.length;i++){var r=e.getChildCells(l[i],!0)[o],a=(e.remove(r),this.getCellGeometry(r));null!=a&&(t=Math.max(t,a.width))}var h=this.getCellGeometry(n);null!=h&&((h=h.clone()).width-=t,e.setGeometry(n,h))}}}finally{e.endUpdate()}},Graph.prototype.deleteTableRow=function(t){var e=this.getModel();e.beginUpdate();try{var n,i,l=t,s=t,o=(this.isTableCell(t)&&(t=s=e.getParent(t)),this.isTableRow(t)&&(l=e.getParent(s)),e.getChildCells(l,!0));o.length<=1?e.remove(l):(this.isTableRow(s)||(s=o[o.length-1]),e.remove(s),t=0,null!=(n=this.getCellGeometry(s))&&(t=n.height),null!=(i=this.getCellGeometry(l))&&((i=i.clone()).height-=t,e.setGeometry(l,i)))}finally{e.endUpdate()}},Graph.prototype.insertRow=function(t,e){for(var n=t.tBodies[0],i=n.rows[0].cells,l=t=0;l<i.length;l++){var s=i[l].getAttribute("colspan");t+=null!=s?parseInt(s):1}for(e=n.insertRow(e),l=0;l<t;l++)mxUtils.br(e.insertCell(-1));return e.cells[0]},Graph.prototype.deleteRow=function(t,e){t.tBodies[0].deleteRow(e)},Graph.prototype.insertColumn=function(t,e){var n=t.tHead;if(null!=n)for(var i=0;i<n.rows.length;i++){var l=document.createElement("th");n.rows[i].appendChild(l),mxUtils.br(l)}for(t=t.tBodies[0],n=0;n<t.rows.length;n++)i=t.rows[n].insertCell(e),mxUtils.br(i);return t.rows[0].cells[0<=e?e:t.rows[0].cells.length-1]},Graph.prototype.deleteColumn=function(t,e){if(0<=e){t=t.tBodies[0].rows;for(var n=0;n<t.length;n++)t[n].cells.length>e&&t[n].deleteCell(e)}},Graph.prototype.pasteHtmlAtCaret=function(t){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount){(e=e.getRangeAt(0)).deleteContents();var n,i=document.createElement("div");for(i.innerHTML=t,t=document.createDocumentFragment();n=i.firstChild;)lastNode=t.appendChild(n);e.insertNode(t)}}else(e=document.selection)&&"Control"!=e.type&&e.createRange().pasteHTML(t)},Graph.prototype.createLinkForHint=function(e,t){function n(t,e){return t=t.length>e?t.substring(0,Math.round(e/2))+"..."+t.substring(t.length-Math.round(e/4)):t}e=null!=e?e:"javascript:void(0);",null!=t&&0!=t.length||(t=this.isCustomLink(e)?this.getLinkTitle(e):e);var i=document.createElement("a");return i.setAttribute("rel",this.linkRelation),i.setAttribute("href",this.getAbsoluteUrl(e)),i.setAttribute("title",n(this.isCustomLink(e)?this.getLinkTitle(e):e,80)),null!=this.linkTarget&&i.setAttribute("target",this.linkTarget),mxUtils.write(i,n(t,40)),this.isCustomLink(e)&&mxEvent.addListener(i,"click",mxUtils.bind(this,function(t){this.customLinkClicked(e),mxEvent.consume(t)})),i},Graph.prototype.initTouch=function(){this.connectionHandler.marker.isEnabled=function(){return null!=this.graph.connectionHandler.first},this.addListener(mxEvent.START_EDITING,function(t,e){this.popupMenuHandler.hideMenu()});var n=this.updateMouseEvent,i=!(this.updateMouseEvent=function(t){var e;return t=n.apply(this,arguments),!mxEvent.isTouchEvent(t.getEvent())||null!=t.getState()||null!=(e=this.getCellAt(t.graphX,t.graphY))&&this.isSwimlane(e)&&this.hitsSwimlaneContent(e,t.graphX,t.graphY)||(t.state=this.view.getState(e),null!=t.state&&null!=t.state.shape&&(this.container.style.cursor=t.state.shape.node.style.cursor)),null==t.getState()&&this.isEnabled()&&(this.container.style.cursor="default"),t}),l=!1,s=!1,o=this.fireMouseEvent;this.fireMouseEvent=function(t,e,n){t==mxEvent.MOUSE_DOWN&&(e=this.updateMouseEvent(e),i=this.isCellSelected(e.getCell()),l=this.isSelectionEmpty(),s=this.popupMenuHandler.isMenuShowing()),o.apply(this,arguments)},this.popupMenuHandler.mouseUp=mxUtils.bind(this,function(t,e){this.popupMenuHandler.popupTrigger=!this.isEditing()&&this.isEnabled()&&(null==e.getState()||!e.isSource(e.getState().control))&&(this.popupMenuHandler.popupTrigger||!s&&!mxEvent.isMouseEvent(e.getEvent())&&(l&&null==e.getCell()&&this.isSelectionEmpty()||i&&this.isCellSelected(e.getCell()))),mxPopupMenuHandler.prototype.mouseUp.apply(this.popupMenuHandler,arguments)})},mxCellEditor.prototype.isContentEditing=function(){var t=this.graph.view.getState(this.editingCell);return null!=t&&1==t.style.html},mxCellEditor.prototype.isTableSelected=function(){return null!=this.graph.getParentByName(this.graph.getSelectedElement(),"TABLE",this.textarea)},mxCellEditor.prototype.alignText=function(t,e){var n,i=null!=e&&mxEvent.isShiftDown(e);(i||null!=window.getSelection&&null!=window.getSelection().containsNode)&&(n=!0,this.graph.processElements(this.textarea,function(t){i||window.getSelection().containsNode(t,!0)?(t.removeAttribute("align"),t.style.textAlign=null):n=!1}),n)&&this.graph.cellEditor.setAlign(t),document.execCommand("justify"+t.toLowerCase(),!1,null)},mxCellEditor.prototype.saveSelection=function(){if(window.getSelection){var t=window.getSelection();if(t.getRangeAt&&t.rangeCount){for(var e=[],n=0,i=t.rangeCount;n<i;++n)e.push(t.getRangeAt(n));return e}}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null},mxCellEditor.prototype.restoreSelection=function(t){try{if(t)if(window.getSelection){(sel=window.getSelection()).removeAllRanges();for(var e=0,n=t.length;e<n;++e)sel.addRange(t[e])}else document.selection&&t.select&&t.select()}catch(t){}},mxCellRenderer.prototype.initializeLabel),x=(mxCellRenderer.prototype.initializeLabel=function(t){null!=t.text&&(t.text.replaceLinefeeds="0"!=mxUtils.getValue(t.style,"nl2Br","1")),g.apply(this,arguments)},mxConstraintHandler.prototype.update),y=(mxConstraintHandler.prototype.update=function(t,e){this.isKeepFocusEvent(t)||!mxEvent.isAltDown(t.getEvent())?x.apply(this,arguments):this.reset()},mxGuide.prototype.createGuideShape=function(t){return new mxPolyline([],mxConstants.GUIDE_COLOR,mxConstants.GUIDE_STROKEWIDTH)},mxCellEditor.prototype.escapeCancelsEditing=!1,mxCellEditor.prototype.startEditing),f=(mxCellEditor.prototype.startEditing=function(t,e){t=this.graph.getStartEditingCell(t,e),y.apply(this,arguments);var e=this.graph.view.getState(t),n=(this.textarea.className=null!=e&&1==e.style.html?"mxCellEditor geContentEditable":"mxCellEditor mxPlainTextEditor",this.codeViewMode=!1,this.switchSelectionState=null,this.graph.setSelectionCell(t),e=this.graph.getModel().getParent(t),this.graph.getCellGeometry(t));(this.graph.getModel().isEdge(e)&&null!=n&&n.relative||this.graph.getModel().isEdge(t))&&(this.textarea.style.outline=mxClient.IS_IE||mxClient.IS_IE11||mxClient.IS_FF&&mxClient.IS_WIN?"gray dotted 1px":"")},mxCellEditor.prototype.installListeners),C=(mxCellEditor.prototype.installListeners=function(t){function l(t){for(var e=t.firstChild;null!=e;){var n=e.nextSibling;l(e),e=n}1==t.nodeType&&("BR"===t.nodeName||null!=t.firstChild)||3==t.nodeType&&0!=mxUtils.trim(mxUtils.getTextContent(t)).length?(3==t.nodeType&&mxUtils.setTextContent(t,mxUtils.getTextContent(t).replace(/\n|\r/g,"")),1==t.nodeType&&(t.removeAttribute("style"),t.removeAttribute("class"),t.removeAttribute("width"),t.removeAttribute("cellpadding"),t.removeAttribute("cellspacing"),t.removeAttribute("border"))):t.parentNode.removeChild(t)}f.apply(this,arguments),7!==document.documentMode&&8!==document.documentMode&&mxEvent.addListener(this.textarea,"paste",mxUtils.bind(this,function(t){var e=function t(e,n){e=(n.originalNode=e).firstChild;for(var i=n.firstChild;null!=e&&null!=i;)t(e,i),e=e.nextSibling,i=i.nextSibling;return n}(this.textarea,this.textarea.cloneNode(!0));window.setTimeout(mxUtils.bind(this,function(){null!=this.textarea&&(0<=this.textarea.innerHTML.indexOf("<o:OfficeDocumentSettings>")||0<=this.textarea.innerHTML.indexOf("\x3c!--[if !mso]>")?function t(e,n){if(null!=e)if(n.originalNode!=e)l(e);else for(e=e.firstChild,n=n.firstChild;null!=e;){var i=e.nextSibling;null==n?l(e):(t(e,n),n=n.nextSibling),e=i}}(this.textarea,e):Graph.removePasteFormatting(this.textarea))}),0)}))},mxCellEditor.prototype.toggleViewMode=function(){var t,e,n,i,l,s,o,r,a=this.graph.view.getState(this.editingCell);null!=a&&(e=null!=a&&"0"!=mxUtils.getValue(a.style,"nl2Br","1"),t=this.saveSelection(),this.codeViewMode?(0<(o=mxUtils.extractTextWithWhitespace(this.textarea.childNodes)).length&&"\n"==o.charAt(o.length-1)&&(o=o.substring(0,o.length-1)),o=this.graph.sanitizeHtml(e?o.replace(/\n/g,"<br/>"):o,!0),this.textarea.className="mxCellEditor geContentEditable",r=mxUtils.getValue(a.style,mxConstants.STYLE_FONTSIZE,mxConstants.DEFAULT_FONTSIZE),e=mxUtils.getValue(a.style,mxConstants.STYLE_FONTFAMILY,mxConstants.DEFAULT_FONTFAMILY),n=mxUtils.getValue(a.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_LEFT),i=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_BOLD)==mxConstants.FONT_BOLD,l=(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_ITALIC)==mxConstants.FONT_ITALIC,s=[],(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_UNDERLINE)==mxConstants.FONT_UNDERLINE&&s.push("underline"),(mxUtils.getValue(a.style,mxConstants.STYLE_FONTSTYLE,0)&mxConstants.FONT_STRIKETHROUGH)==mxConstants.FONT_STRIKETHROUGH&&s.push("line-through"),this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(r*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(r)+"px",this.textarea.style.textDecoration=s.join(" "),this.textarea.style.fontWeight=i?"bold":"normal",this.textarea.style.fontStyle=l?"italic":"",this.textarea.style.fontFamily=e,this.textarea.style.textAlign=n,this.textarea.style.padding="0px",this.textarea.innerHTML!=o&&(this.textarea.innerHTML=o,0==this.textarea.innerHTML.length)&&(this.textarea.innerHTML=this.getEmptyLabelText(),this.clearOnChange=0<this.textarea.innerHTML.length),this.codeViewMode=!1):(this.clearOnChange&&this.textarea.innerHTML==this.getEmptyLabelText()&&(this.clearOnChange=!1,this.textarea.innerHTML=""),o=mxUtils.htmlEntities(this.textarea.innerHTML),8!=document.documentMode&&(o=mxUtils.replaceTrailingNewlines(o,"<div><br></div>")),o=this.graph.sanitizeHtml(e?o.replace(/\n/g,"").replace(/&lt;br\s*.?&gt;/g,"<br>"):o,!0),this.textarea.className="mxCellEditor mxPlainTextEditor",r=mxConstants.DEFAULT_FONTSIZE,this.textarea.style.lineHeight=mxConstants.ABSOLUTE_LINE_HEIGHT?Math.round(r*mxConstants.LINE_HEIGHT)+"px":mxConstants.LINE_HEIGHT,this.textarea.style.fontSize=Math.round(r)+"px",this.textarea.style.textDecoration="",this.textarea.style.fontWeight="normal",this.textarea.style.fontStyle="",this.textarea.style.fontFamily=mxConstants.DEFAULT_FONTFAMILY,this.textarea.style.textAlign="left",this.textarea.style.padding="2px",this.textarea.innerHTML!=o&&(this.textarea.innerHTML=o),this.codeViewMode=!0),this.textarea.focus(),null!=this.switchSelectionState&&this.restoreSelection(this.switchSelectionState),this.switchSelectionState=t,this.resize())},mxCellEditor.prototype.resize),E=(mxCellEditor.prototype.resize=function(t,e){var n,i;null!=this.textarea&&(t=this.graph.getView().getState(this.editingCell),this.codeViewMode&&null!=t?(n=t.view.scale,this.bounds=mxRectangle.fromRectangle(t),0==this.bounds.width&&0==this.bounds.height&&(this.bounds.width=160*n,this.bounds.height=60*n,null==(i=null!=t.text?t.text.margin:null)&&(i=mxUtils.getAlignmentAsPoint(mxUtils.getValue(t.style,mxConstants.STYLE_ALIGN,mxConstants.ALIGN_CENTER),mxUtils.getValue(t.style,mxConstants.STYLE_VERTICAL_ALIGN,mxConstants.ALIGN_MIDDLE))),this.bounds.x+=i.x*this.bounds.width,this.bounds.y+=i.y*this.bounds.height),this.textarea.style.width=Math.round((this.bounds.width-4)/n)+"px",this.textarea.style.height=Math.round((this.bounds.height-4)/n)+"px",this.textarea.style.overflow="auto",this.textarea.clientHeight<this.textarea.offsetHeight&&(this.textarea.style.height=Math.round(this.bounds.height/n)+(this.textarea.offsetHeight-this.textarea.clientHeight)+"px",this.bounds.height=parseInt(this.textarea.style.height)*n),this.textarea.clientWidth<this.textarea.offsetWidth&&(this.textarea.style.width=Math.round(this.bounds.width/n)+(this.textarea.offsetWidth-this.textarea.clientWidth)+"px",this.bounds.width=parseInt(this.textarea.style.width)*n),this.textarea.style.left=Math.round(this.bounds.x)+"px",this.textarea.style.top=Math.round(this.bounds.y)+"px",mxUtils.setPrefixedStyle(this.textarea.style,"transform","scale("+n+","+n+")")):(this.textarea.style.height="",this.textarea.style.overflow="",C.apply(this,arguments)))},window.mxCellEditorGetInitialValue=mxCellEditor.prototype.getInitialValue,mxCellEditor.prototype.getInitialValue=function(t,e){return"0"==mxUtils.getValue(t.style,"html","0")?mxCellEditorGetInitialValue.apply(this,arguments):(e=this.graph.getEditingValue(t.cell,e),"1"==mxUtils.getValue(t.style,"nl2Br","1")&&(e=e.replace(/\n/g,"<br/>")),this.graph.sanitizeHtml(e,!0))},window.mxCellEditorGetCurrentValue=mxCellEditor.prototype.getCurrentValue,mxCellEditor.prototype.getCurrentValue=function(t){var e;return"0"==mxUtils.getValue(t.style,"html","0")?mxCellEditorGetCurrentValue.apply(this,arguments):(e=this.graph.sanitizeHtml(this.textarea.innerHTML,!0),"1"==mxUtils.getValue(t.style,"nl2Br","1")?e.replace(/\r\n/g,"<br/>").replace(/\n/g,"<br/>"):e.replace(/\r\n/g,"").replace(/\n/g,""))},mxCellEditor.prototype.stopEditing),S=(mxCellEditor.prototype.stopEditing=function(t){this.codeViewMode&&this.toggleViewMode(),E.apply(this,arguments),this.focusContainer()},mxCellEditor.prototype.focusContainer=function(){try{this.graph.container.focus()}catch(t){}},mxCellEditor.prototype.applyValue),b=(mxCellEditor.prototype.applyValue=function(t,e){this.graph.getModel().beginUpdate();try{S.apply(this,arguments),""==e&&this.graph.isCellDeletable(t.cell)&&0==this.graph.model.getChildCount(t.cell)&&this.graph.isTransparentState(t)&&this.graph.removeCells([t.cell],!1)}finally{this.graph.getModel().endUpdate()}},mxCellEditor.prototype.getBackgroundColor=function(t){var e=mxUtils.getValue(t.style,mxConstants.STYLE_LABEL_BACKGROUNDCOLOR,null);return e=(e=null!=e&&e!=mxConstants.NONE||!(null!=t.cell.geometry&&0<t.cell.geometry.width)||0==mxUtils.getValue(t.style,mxConstants.STYLE_ROTATION,0)&&0!=mxUtils.getValue(t.style,mxConstants.STYLE_HORIZONTAL,1)?e:mxUtils.getValue(t.style,mxConstants.STYLE_FILLCOLOR,null))==mxConstants.NONE?null:e},mxCellEditor.prototype.getMinimumSize=function(t){var e=this.graph.getView().scale;return new mxRectangle(0,0,null==t.text?30:t.text.size*e+20,30)},window.mxGraphHandlerIsValidDropTarget=mxGraphHandler.prototype.isValidDropTarget,mxGraphHandler.prototype.isValidDropTarget=function(t,e){return mxGraphHandlerIsValidDropTarget.apply(this,arguments)&&!mxEvent.isAltDown(e.getEvent)},mxGraphView.prototype.formatUnitText=function(t){return t&&o(t,this.unit)},mxGraphHandler.prototype.updateHint=function(t){var e,n;null==this.pBounds||null==this.shape&&!this.livePreviewActive||(null==this.hint&&(this.hint=s(),this.graph.container.appendChild(this.hint)),e=this.graph.view.translate,n=this.graph.view.scale,t=this.roundLength((this.bounds.x+this.currentDx)/n-e.x),e=this.roundLength((this.bounds.y+this.currentDy)/n-e.y),n=this.graph.view.unit,this.hint.innerHTML=o(t,n)+", "+o(e,n),this.hint.style.left=this.pBounds.x+this.currentDx+Math.round((this.pBounds.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=this.pBounds.y+this.currentDy+this.pBounds.height+Editor.hintOffset+"px")},mxGraphHandler.prototype.removeHint=function(){null!=this.hint&&(this.hint.parentNode.removeChild(this.hint),this.hint=null)},mxStackLayout.prototype.resizeCell),w=(mxStackLayout.prototype.resizeCell=function(t,e){b.apply(this,arguments);var n,i,l,s=this.graph.getCellStyle(t);null==s.childLayout&&null!=(l=null!=(t=this.graph.model.getParent(t))?this.graph.getCellGeometry(t):null)&&"stackLayout"==(s=this.graph.getCellStyle(t)).childLayout&&(n=parseFloat(mxUtils.getValue(s,"stackBorder",mxStackLayout.prototype.border)),s="1"==mxUtils.getValue(s,"horizontalStack","1"),i=this.graph.getActualStartSize(t),l=l.clone(),s?l.height=e.height+i.y+i.height+2*n:l.width=e.width+i.x+i.width+2*n,this.graph.model.setGeometry(t,l))},mxSelectionCellsHandler.prototype.getHandledSelectionCells),T=(mxSelectionCellsHandler.prototype.getHandledSelectionCells=function(){function t(t){n.get(t)||(n.put(t,!0),l.push(t))}for(var e=w.apply(this,arguments),n=new mxDictionary,i=this.graph.model,l=[],s=0;s<e.length;s++){var o=e[s];this.graph.isTableCell(o)?t(i.getParent(i.getParent(o))):this.graph.isTableRow(o)&&t(i.getParent(o)),t(o)}return l},mxVertexHandler.prototype.createParentHighlightShape),A=(mxVertexHandler.prototype.createParentHighlightShape=function(t){var e=T.apply(this,arguments);return e.stroke="#C0C0C0",e.strokewidth=1,e},mxEdgeHandler.prototype.createParentHighlightShape),t=(mxEdgeHandler.prototype.createParentHighlightShape=function(t){var e=A.apply(this,arguments);return e.stroke="#C0C0C0",e.strokewidth=1,e},mxVertexHandler.prototype.rotationHandleVSpacing=-12,mxVertexHandler.prototype.getRotationHandlePosition=function(){var t=this.getHandlePadding();return new mxPoint(this.bounds.x+this.bounds.width-this.rotationHandleVSpacing+t.x/2,this.bounds.y+this.rotationHandleVSpacing-t.y/2)},mxVertexHandler.prototype.isRecursiveResize=function(t,e){return this.graph.isRecursiveVertexResize(t)&&!mxEvent.isControlDown(e.getEvent())},mxVertexHandler.prototype.isCenteredEvent=function(t,e){return!(!this.graph.isSwimlane(t.cell)&&0<this.graph.model.getChildCount(t.cell)&&!this.graph.isCellCollapsed(t.cell)&&"1"==mxUtils.getValue(t.style,"recursiveResize","1")&&null==mxUtils.getValue(t.style,"childLayout",null))&&mxEvent.isControlDown(e.getEvent())||mxEvent.isMetaDown(e.getEvent())},mxVertexHandler.prototype.isRotationHandleVisible),L=(mxVertexHandler.prototype.isRotationHandleVisible=function(){return t.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)&&!this.graph.isTable(this.state.cell)},mxVertexHandler.prototype.getSizerBounds=function(){return this.graph.isTableCell(this.state.cell)?this.graph.view.getState(this.graph.model.getParent(this.graph.model.getParent(this.state.cell))):this.bounds},mxVertexHandler.prototype.isParentHighlightVisible),M=(mxVertexHandler.prototype.isParentHighlightVisible=function(){return L.apply(this,arguments)&&!this.graph.isTableCell(this.state.cell)&&!this.graph.isTableRow(this.state.cell)},mxVertexHandler.prototype.isCustomHandleVisible),R=(mxVertexHandler.prototype.isCustomHandleVisible=function(t){return t.tableHandle||M.apply(this,arguments)&&(!this.graph.isTable(this.state.cell)||this.graph.isCellSelected(this.state.cell))},mxVertexHandler.prototype.getSelectionBorderInset=function(){var t=0;return this.graph.isTableRow(this.state.cell)?t=1:this.graph.isTableCell(this.state.cell)&&(t=2),t},mxVertexHandler.prototype.getSelectionBorderBounds),I=(mxVertexHandler.prototype.getSelectionBorderBounds=function(){return R.apply(this,arguments).grow(-this.getSelectionBorderInset())},mxVertexHandler.prototype.createCustomHandles),P=(mxVertexHandler.prototype.createCustomHandles=function(){var n=I.apply(this,arguments);if(this.graph.isTable(this.state.cell)){var r=this.graph,t=r.model,a=this.state,h=this.selectionBorder,d=this,l=(null==n&&(n=[]),r.view.getCellStates(t.getChildCells(this.state.cell,!0)));if(0<l.length){for(var u=r.view.getCellStates(t.getChildCells(l[0].cell,!0)),t=0;t<u.length;t++)mxUtils.bind(this,function(e){var i=u[e],l=e<u.length-1?u[e+1]:null,t=new mxLine(new mxRectangle,mxConstants.NONE,1,!0),s=(t.isDashed=h.isDashed,t.svgStrokeTolerance++,(t=new mxHandle(i,"col-resize",null,t)).tableHandle=!0,0),o=(t.shape.node.parentNode.insertBefore(t.shape.node,t.shape.node.parentNode.firstChild),!(t.redraw=function(){var t;null!=this.shape&&null!=this.state.shape&&(t=r.getActualStartSize(a.cell),this.shape.stroke=0==s?mxConstants.NONE:h.stroke,this.shape.bounds.x=this.state.x+this.state.width+s*this.graph.view.scale,this.shape.bounds.width=1,this.shape.bounds.y=a.y+(e==u.length-1?0:t.y*this.graph.view.scale),this.shape.bounds.height=a.height-(e==u.length-1?0:(t.height+t.y)*this.graph.view.scale),this.shape.redraw())}));t.setPosition=function(t,e,n){s=Math.max(Graph.minTableColumnWidth-t.width,e.x-t.x-t.width),o=mxEvent.isShiftDown(n.getEvent()),null==l||o||(s=Math.min((l.x+l.width-i.x-i.width)/r.view.scale-Graph.minTableColumnWidth,s))},t.execute=function(t){var e;0!=s?r.setTableColumnWidth(this.state.cell,s,o):d.blockDelayedSelection||(e=r.getCellAt(t.getGraphX(),t.getGraphY())||a.cell,r.graphHandler.selectCellForEvent(e,t)),s=0},t.reset=function(){s=0},n.push(t)})(t);for(t=0;t<l.length;t++)mxUtils.bind(this,function(t){t=l[t];var e=new mxLine(new mxRectangle,mxConstants.NONE,1),i=(e.isDashed=h.isDashed,e.svgStrokeTolerance++,(t=new mxHandle(t,"row-resize",null,e)).tableHandle=!0,0);t.shape.node.parentNode.insertBefore(t.shape.node,t.shape.node.parentNode.firstChild),t.redraw=function(){null!=this.shape&&null!=this.state.shape&&(this.shape.stroke=0==i?mxConstants.NONE:h.stroke,this.shape.bounds.x=this.state.x,this.shape.bounds.width=this.state.width,this.shape.bounds.y=this.state.y+this.state.height+i*this.graph.view.scale,this.shape.bounds.height=1,this.shape.redraw())},t.setPosition=function(t,e,n){i=Math.max(Graph.minTableRowHeight-t.height,e.y-t.y-t.height)},t.execute=function(t){var e;0!=i?r.setTableRowHeight(this.state.cell,i,!mxEvent.isShiftDown(t.getEvent())):d.blockDelayedSelection||(e=r.getCellAt(t.getGraphX(),t.getGraphY())||a.cell,r.graphHandler.selectCellForEvent(e,t)),i=0},t.reset=function(){i=0},n.push(t)})(t)}}return null!=n?n.reverse():null},mxVertexHandler.prototype.setHandlesVisible),O=(mxVertexHandler.prototype.setHandlesVisible=function(t){if(P.apply(this,arguments),null!=this.moveHandles)for(var e=0;e<this.moveHandles.length;e++)this.moveHandles[e].style.visibility=t?"":"hidden";if(null!=this.cornerHandles)for(e=0;e<this.cornerHandles.length;e++)this.cornerHandles[e].node.style.visibility=t?"":"hidden"},mxVertexHandler.prototype.refreshMoveHandles=function(){var n=this.graph.model;if(null!=this.moveHandles){for(var t=0;t<this.moveHandles.length;t++)this.moveHandles[t].parentNode.removeChild(this.moveHandles[t]);this.moveHandles=null}for(this.moveHandles=[],t=0;t<n.getChildCount(this.state.cell);t++)mxUtils.bind(this,function(e){var t;null!=e&&n.isVertex(e.cell)&&((t=mxUtils.createImage(Editor.rowMoveImage)).style.position="absolute",t.style.cursor="pointer",t.style.width="7px",t.style.height="4px",t.style.padding="4px 2px 4px 2px",t.rowState=e,mxEvent.addGestureListeners(t,mxUtils.bind(this,function(t){this.graph.popupMenuHandler.hideMenu(),this.graph.stopEditing(!1),!this.graph.isToggleEvent(t)&&this.graph.isCellSelected(e.cell)||this.graph.selectCellForEvent(e.cell,t),mxEvent.isPopupTrigger(t)||(this.graph.graphHandler.start(this.state.cell,mxEvent.getClientX(t),mxEvent.getClientY(t),this.graph.getSelectionCells()),this.graph.graphHandler.cellWasClicked=!0,this.graph.isMouseTrigger=mxEvent.isMouseEvent(t),this.graph.isMouseDown=!0),mxEvent.consume(t)}),null,mxUtils.bind(this,function(t){mxEvent.isPopupTrigger(t)&&(this.graph.popupMenuHandler.popup(mxEvent.getClientX(t),mxEvent.getClientY(t),e.cell,t),mxEvent.consume(t))})),this.moveHandles.push(t),this.graph.container.appendChild(t))})(this.graph.view.getState(n.getChildAt(this.state.cell,t)))},mxVertexHandler.prototype.refresh=function(){if(null!=this.customHandles){for(var t=0;t<this.customHandles.length;t++)this.customHandles[t].destroy();this.customHandles=this.createCustomHandles()}this.graph.isTable(this.state.cell)&&this.refreshMoveHandles()},mxVertexHandler.prototype.getHandlePadding),N=(mxVertexHandler.prototype.getHandlePadding=function(){var t=new mxPoint(0,0),e=this.tolerance,n=this.state.style.shape;if(null==mxCellRenderer.defaultShapes[n]&&mxStencilRegistry.getStencil(n),!(n=this.graph.isTable(this.state.cell)||this.graph.cellEditor.getEditingCell()==this.state.cell)&&null!=this.customHandles)for(var i=0;i<this.customHandles.length;i++)if(null!=this.customHandles[i].shape&&null!=this.customHandles[i].shape.bounds){var l=this.customHandles[i].shape.bounds,s=l.getCenterX(),o=l.getCenterY();if(Math.abs(this.state.x-s)<l.width/2||Math.abs(this.state.y-o)<l.height/2||Math.abs(this.state.x+this.state.width-s)<l.width/2||Math.abs(this.state.y+this.state.height-o)<l.height/2){n=!0;break}}return n&&null!=this.sizers&&0<this.sizers.length&&null!=this.sizers[0]?(e/=2,this.graph.isTable(this.state.cell)&&(e+=7),t.x=this.sizers[0].bounds.width+e,t.y=this.sizers[0].bounds.height+e):t=O.apply(this,arguments),t},mxVertexHandler.prototype.updateHint=function(t){var e;this.index!=mxEvent.LABEL_HANDLE&&(null==this.hint&&(this.hint=s(),this.state.view.graph.container.appendChild(this.hint)),this.index==mxEvent.ROTATION_HANDLE?this.hint.innerHTML=this.currentAlpha+"&deg;":(t=this.state.view.scale,e=this.state.view.unit,this.hint.innerHTML=o(this.roundLength(this.bounds.width/t),e)+" x "+o(this.roundLength(this.bounds.height/t),e)),null==(t=mxUtils.getBoundingBox(this.bounds,null!=this.currentAlpha?this.currentAlpha:this.state.style[mxConstants.STYLE_ROTATION]||"0"))&&(t=this.bounds),this.hint.style.left=t.x+Math.round((t.width-this.hint.clientWidth)/2)+"px",this.hint.style.top=t.y+t.height+Editor.hintOffset+"px",null!=this.linkHint)&&(this.linkHint.style.display="none")},mxVertexHandler.prototype.removeHint=function(){mxGraphHandler.prototype.removeHint.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.mouseMove),G=(mxEdgeHandler.prototype.mouseMove=function(t,e){N.apply(this,arguments),null!=this.linkHint&&"none"!=this.linkHint.style.display&&null!=this.graph.graphHandler&&null!=this.graph.graphHandler.first&&(this.linkHint.style.display="none")},mxEdgeHandler.prototype.mouseUp),D=(mxEdgeHandler.prototype.mouseUp=function(t,e){G.apply(this,arguments),null!=this.linkHint&&"none"==this.linkHint.style.display&&(this.linkHint.style.display="")},mxEdgeHandler.prototype.updateHint=function(t,e){null==this.hint&&(this.hint=s(),this.state.view.graph.container.appendChild(this.hint));var n=this.graph.view.translate,i=this.graph.view.scale,l=this.roundLength(e.x/i-n.x),n=this.roundLength(e.y/i-n.y),i=this.graph.view.unit;this.hint.innerHTML=o(l,i)+", "+o(n,i),this.hint.style.visibility="visible",(this.isSource||this.isTarget)&&(null!=this.constraintHandler.currentConstraint&&null!=this.constraintHandler.currentFocus?(l=this.constraintHandler.currentConstraint.point,this.hint.innerHTML="["+Math.round(100*l.x)+"%, "+Math.round(100*l.y)+"%]"):this.marker.hasValidState()&&(this.hint.style.visibility="hidden")),this.hint.style.left=Math.round(t.getGraphX()-this.hint.clientWidth/2)+"px",this.hint.style.top=Math.max(t.getGraphY(),e.y)+Editor.hintOffset+"px",null!=this.linkHint&&(this.linkHint.style.display="none")},mxEdgeHandler.prototype.removeHint=mxVertexHandler.prototype.removeHint,HoverIcons.prototype.mainHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/>'):new mxImage(IMAGE_PATH+"/handle-main.png",17,17),HoverIcons.prototype.secondaryHandle=mxClient.IS_SVG?Graph.createSvgImage(16,16,'<path d="m 8 3 L 13 8 L 8 13 L 3 8 z" stroke="#fff" fill="#fca000"/>'):new mxImage(IMAGE_PATH+"/handle-secondary.png",17,17),HoverIcons.prototype.fixedHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><path d="m 7 7 L 11 11 M 7 11 L 11 7" stroke="#fff"/>'):new mxImage(IMAGE_PATH+"/handle-fixed.png",17,17),HoverIcons.prototype.terminalHandle=mxClient.IS_SVG?Graph.createSvgImage(18,18,'<circle cx="9" cy="9" r="5" stroke="#fff" fill="'+HoverIcons.prototype.arrowFill+'" stroke-width="1"/><circle cx="9" cy="9" r="2" stroke="#fff" fill="transparent"/>'):new mxImage(IMAGE_PATH+"/handle-terminal.png",17,17),HoverIcons.prototype.rotationHandle=mxClient.IS_SVG?Graph.createSvgImage(16,16,'<path stroke="'+HoverIcons.prototype.arrowFill+'" fill="'+HoverIcons.prototype.arrowFill+'" d="M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"/>',24,24):new mxImage(IMAGE_PATH+"/handle-rotate.png",16,16),mxClient.IS_SVG&&(mxConstraintHandler.prototype.pointImage=Graph.createSvgImage(5,5,'<path d="m 0 0 L 5 5 M 0 5 L 5 0" stroke="'+HoverIcons.prototype.arrowFill+'"/>')),mxVertexHandler.TABLE_HANDLE_COLOR="#fca000",mxVertexHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxVertexHandler.prototype.secondaryHandleImage=HoverIcons.prototype.secondaryHandle,mxEdgeHandler.prototype.handleImage=HoverIcons.prototype.mainHandle,mxEdgeHandler.prototype.terminalHandleImage=HoverIcons.prototype.terminalHandle,mxEdgeHandler.prototype.fixedHandleImage=HoverIcons.prototype.fixedHandle,mxEdgeHandler.prototype.labelHandleImage=HoverIcons.prototype.secondaryHandle,mxOutline.prototype.sizerImage=HoverIcons.prototype.mainHandle,Sidebar.prototype.triangleUp=HoverIcons.prototype.triangleUp,Sidebar.prototype.triangleRight=HoverIcons.prototype.triangleRight,Sidebar.prototype.triangleDown=HoverIcons.prototype.triangleDown,Sidebar.prototype.triangleLeft=HoverIcons.prototype.triangleLeft,Sidebar.prototype.refreshTarget=HoverIcons.prototype.refreshTarget,Sidebar.prototype.roundDrop=HoverIcons.prototype.roundDrop,mxClient.IS_SVG||((new Image).src=HoverIcons.prototype.mainHandle.src,(new Image).src=HoverIcons.prototype.fixedHandle.src,(new Image).src=HoverIcons.prototype.terminalHandle.src,(new Image).src=HoverIcons.prototype.secondaryHandle.src,(new Image).src=HoverIcons.prototype.rotationHandle.src,(new Image).src=HoverIcons.prototype.triangleUp.src,(new Image).src=HoverIcons.prototype.triangleRight.src,(new Image).src=HoverIcons.prototype.triangleDown.src,(new Image).src=HoverIcons.prototype.triangleLeft.src,(new Image).src=HoverIcons.prototype.refreshTarget.src,(new Image).src=HoverIcons.prototype.roundDrop.src),mxVertexHandler.prototype.rotationEnabled=!0,mxVertexHandler.prototype.manageSizers=!0,mxVertexHandler.prototype.livePreview=!0,mxGraphHandler.prototype.maxLivePreview=16,mxRubberband.prototype.defaultOpacity=30,mxConnectionHandler.prototype.outlineConnect=!0,mxCellHighlight.prototype.keepOnTop=!0,mxVertexHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.parentHighlightEnabled=!0,mxEdgeHandler.prototype.dblClickRemoveEnabled=!0,mxEdgeHandler.prototype.straightRemoveEnabled=!0,mxEdgeHandler.prototype.virtualBendsEnabled=!0,mxEdgeHandler.prototype.mergeRemoveEnabled=!0,mxEdgeHandler.prototype.manageLabelHandle=!0,mxEdgeHandler.prototype.outlineConnect=!0,mxEdgeHandler.prototype.isAddVirtualBendEvent=function(t){return!mxEvent.isShiftDown(t.getEvent())},mxEdgeHandler.prototype.isCustomHandleEvent=function(t){return!mxEvent.isShiftDown(t.getEvent())},Graph.touchStyle?((mxClient.IS_TOUCH||0<navigator.maxTouchPoints||0<navigator.msMaxTouchPoints)&&(mxShape.prototype.svgStrokeTolerance=18,mxVertexHandler.prototype.tolerance=12,mxEdgeHandler.prototype.tolerance=12,Graph.prototype.tolerance=12,mxVertexHandler.prototype.rotationHandleVSpacing=-16,mxConstraintHandler.prototype.getTolerance=function(t){return mxEvent.isMouseEvent(t.getEvent())?4:this.graph.getTolerance()}),mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return null==t.getState()&&!mxEvent.isMouseEvent(e)||mxEvent.isPopupTrigger(e)&&(null==t.getState()||mxEvent.isControlDown(e)||mxEvent.isShiftDown(e))},n=mxGraphHandler.prototype.mouseDown,mxGraphHandler.prototype.mouseDown=function(t,e){n.apply(this,arguments),mxEvent.isTouchEvent(e.getEvent())&&this.graph.isCellSelected(e.getCell())&&1<this.graph.getSelectionCount()&&(this.delayedSelection=!1)}):mxPanningHandler.prototype.isPanningTrigger=function(t){var e=t.getEvent();return mxEvent.isLeftMouseButton(e)&&(this.useLeftButtonForPanning&&null==t.getState()||mxEvent.isControlDown(e)&&!mxEvent.isShiftDown(e))||this.usePopupTrigger&&mxEvent.isPopupTrigger(e)},mxRubberband.prototype.isSpaceEvent=function(t){return this.graph.isEnabled()&&!this.graph.isCellLocked(this.graph.getDefaultParent())&&mxEvent.isControlDown(t.getEvent())&&mxEvent.isShiftDown(t.getEvent())},mxRubberband.prototype.cancelled=!1,mxRubberband.prototype.cancel=function(){this.isActive()&&(this.cancelled=!0,this.reset())},mxRubberband.prototype.mouseUp=function(t,e){if(this.cancelled)this.cancelled=!1,e.consume();else{var n,i,l=null!=this.div&&"none"!=this.div.style.display,s=null,o=null,r=t=null;if(null!=this.first&&null!=this.currentX&&null!=this.currentY&&(s=this.first.x,o=this.first.y,t=(this.currentX-s)/this.graph.view.scale,r=(this.currentY-o)/this.graph.view.scale,mxEvent.isAltDown(e.getEvent())||(t=this.graph.snap(t),r=this.graph.snap(r),this.graph.isGridEnabled())||(Math.abs(t)<this.graph.tolerance&&(t=0),Math.abs(r)<this.graph.tolerance&&(r=0))),this.reset(),l){if(mxEvent.isAltDown(e.getEvent())&&this.graph.isToggleEvent(e.getEvent())){var a=new mxRectangle(this.x,this.y,this.width,this.height),a=this.graph.getCells(a.x,a.y,a.width,a.height);this.graph.removeSelectionCells(a)}else if(this.isSpaceEvent(e)){this.graph.model.beginUpdate();try{for(a=this.graph.getCellsBeyond(s,o,this.graph.getDefaultParent(),!0,!0),l=0;l<a.length;l++)this.graph.isCellMovable(a[l])&&(n=this.graph.view.getState(a[l]),i=this.graph.getCellGeometry(a[l]),null!=n)&&null!=i&&((i=i.clone()).translate(t,r),this.graph.model.setGeometry(a[l],i))}finally{this.graph.model.endUpdate()}}else a=new mxRectangle(this.x,this.y,this.width,this.height),this.graph.selectRegion(a,e.getEvent());e.consume()}}},mxRubberband.prototype.mouseMove=function(t,e){var n,i,l,s;!e.isConsumed()&&null!=this.first&&(n=mxUtils.getScrollOrigin(this.graph.container),t=mxUtils.getOffset(this.graph.container),n.x-=t.x,n.y-=t.y,t=e.getX()+n.x,n=e.getY()+n.y,i=this.first.x-t,l=this.first.y-n,s=this.graph.tolerance,null!=this.div||Math.abs(i)>s||Math.abs(l)>s)&&(null==this.div&&(this.div=this.createShape()),mxUtils.clearSelection(),this.update(t,n),this.isSpaceEvent(e)?(t=this.x+this.width,n=this.y+this.height,i=this.graph.view.scale,mxEvent.isAltDown(e.getEvent())||(this.width=this.graph.snap(this.width/i)*i,this.height=this.graph.snap(this.height/i)*i,this.graph.isGridEnabled()||(this.width<this.graph.tolerance&&(this.width=0),this.height<this.graph.tolerance&&(this.height=0)),this.x<this.first.x&&(this.x=t-this.width),this.y<this.first.y&&(this.y=n-this.height)),this.div.style.borderStyle="dashed",this.div.style.backgroundColor="white",this.div.style.left=this.x+"px",this.div.style.top=this.y+"px",this.div.style.width=Math.max(0,this.width)+"px",this.div.style.height=this.graph.container.clientHeight+"px",this.div.style.borderWidth=this.width<=0?"0px 1px 0px 0px":"0px 1px 0px 1px",null==this.secondDiv&&(this.secondDiv=this.div.cloneNode(!0),this.div.parentNode.appendChild(this.secondDiv)),this.secondDiv.style.left=this.x+"px",this.secondDiv.style.top=this.y+"px",this.secondDiv.style.width=this.graph.container.clientWidth+"px",this.secondDiv.style.height=Math.max(0,this.height)+"px",this.secondDiv.style.borderWidth=this.height<=0?"1px 0px 0px 0px":"1px 0px 1px 0px"):(this.div.style.backgroundColor="",this.div.style.borderWidth="",this.div.style.borderStyle="",null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null)),e.consume())},mxRubberband.prototype.reset),H=(mxRubberband.prototype.reset=function(){null!=this.secondDiv&&(this.secondDiv.parentNode.removeChild(this.secondDiv),this.secondDiv=null),D.apply(this,arguments)},(new Date).getTime()),U=0,_=mxEdgeHandler.prototype.updatePreviewState,k=(mxEdgeHandler.prototype.updatePreviewState=function(t,e,n,i){_.apply(this,arguments),U=n!=this.currentTerminalState?(H=(new Date).getTime(),0):(new Date).getTime()-H,this.currentTerminalState=n},mxEdgeHandler.prototype.isOutlineConnectEvent),V=(mxEdgeHandler.prototype.isOutlineConnectEvent=function(t){return null!=this.currentTerminalState&&t.getState()==this.currentTerminalState&&2e3<U||(null==this.currentTerminalState||"0"!=mxUtils.getValue(this.currentTerminalState.style,"outlineConnect","1"))&&k.apply(this,arguments)},mxEdgeHandler.prototype.createHandleShape=function(t,e){var n=this.state.getVisibleTerminalState(e=null!=t&&0==t);return null!=(t=null!=(null!=(t=null!=t&&(0==t||t>=this.state.absolutePoints.length-1||this.constructor==mxElbowEdgeHandler&&2==t)?this.graph.getConnectionConstraint(this.state,n,e):null)?this.graph.getConnectionPoint(this.state.getVisibleTerminalState(e),t):null)?this.fixedHandleImage:null!=t&&null!=n?this.terminalHandleImage:this.handleImage)?((t=new mxImageShape(new mxRectangle(0,0,t.width,t.height),t.src)).preserveImageAspect=!1,t):(t=mxConstants.HANDLE_SIZE,this.preferHtml&&--t,new mxRectangleShape(new mxRectangle(0,0,t,t),mxConstants.HANDLE_FILLCOLOR,mxConstants.HANDLE_STROKECOLOR))},mxVertexHandler.prototype.createSizerShape),F=(mxVertexHandler.prototype.createSizerShape=function(t,e,n){return this.handleImage=e==mxEvent.ROTATION_HANDLE?HoverIcons.prototype.rotationHandle:e==mxEvent.LABEL_HANDLE?this.secondaryHandleImage:this.handleImage,V.apply(this,arguments)},mxGraphHandler.prototype.getBoundingBox),B=(mxGraphHandler.prototype.getBoundingBox=function(t){if(null!=t&&1==t.length){var e=this.graph.getModel(),n=e.getParent(t[0]),i=this.graph.getCellGeometry(t[0]);if(e.isEdge(n)&&null!=i&&i.relative&&null!=(e=this.graph.view.getState(t[0]))&&e.width<2&&e.height<2&&null!=e.text&&null!=e.text.boundingBox)return mxRectangle.fromRectangle(e.text.boundingBox)}return F.apply(this,arguments)},mxGraphHandler.prototype.getGuideStates),z=(mxGraphHandler.prototype.getGuideStates=function(){for(var t=B.apply(this,arguments),e=[],n=0;n<t.length;n++)"1"!=mxUtils.getValue(t[n].style,"part","0")&&e.push(t[n]);return e},mxVertexHandler.prototype.getSelectionBounds),Y=(mxVertexHandler.prototype.getSelectionBounds=function(t){var e=this.graph.getModel(),n=e.getParent(t.cell),i=this.graph.getCellGeometry(t.cell);return e.isEdge(n)&&null!=i&&i.relative&&t.width<2&&t.height<2&&null!=t.text&&null!=t.text.boundingBox?(e=t.text.unrotatedBoundingBox||t.text.boundingBox,new mxRectangle(Math.round(e.x),Math.round(e.y),Math.round(e.width),Math.round(e.height))):z.apply(this,arguments)},mxVertexHandler.prototype.mouseDown),W=(mxVertexHandler.prototype.mouseDown=function(t,e){var n=this.graph.getModel(),i=n.getParent(this.state.cell),l=this.graph.getCellGeometry(this.state.cell);(this.getHandleForEvent(e)==mxEvent.ROTATION_HANDLE||!n.isEdge(i)||null==l||!l.relative||null==this.state||2<=this.state.width||2<=this.state.height)&&Y.apply(this,arguments)},mxVertexHandler.prototype.rotateClick=function(){var t=mxUtils.getValue(this.state.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE),e=mxUtils.getValue(this.state.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE);this.state.view.graph.model.isVertex(this.state.cell)&&t==mxConstants.NONE&&e==mxConstants.NONE?(t=mxUtils.mod(mxUtils.getValue(this.state.style,mxConstants.STYLE_ROTATION,0)+90,360),this.state.view.graph.setCellStyles(mxConstants.STYLE_ROTATION,t,[this.state.cell])):this.state.view.graph.turnShapes([this.state.cell])},mxVertexHandler.prototype.mouseMove),j=(mxVertexHandler.prototype.mouseMove=function(t,e){W.apply(this,arguments),null!=this.graph.graphHandler.first&&(null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display="none"),null!=this.linkHint)&&"none"!=this.linkHint.style.display&&(this.linkHint.style.display="none")},mxVertexHandler.prototype.mouseUp),X=(mxVertexHandler.prototype.mouseUp=function(t,e){j.apply(this,arguments),null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.linkHint&&"none"==this.linkHint.style.display&&(this.linkHint.style.display=""),this.blockDelayedSelection=null},mxVertexHandler.prototype.init),Z=(mxVertexHandler.prototype.init=function(){X.apply(this,arguments);var t=!1;if(null!=this.rotationShape&&this.rotationShape.node.setAttribute("title",mxResources.get("rotateTooltip")),this.graph.isTable(this.state.cell))this.refreshMoveHandles();else if(1==this.graph.getSelectionCount()&&(this.graph.isTableCell(this.state.cell)||this.graph.isTableRow(this.state.cell))){this.cornerHandles=[];for(var e=0;e<4;e++){var n=new mxRectangleShape(new mxRectangle(0,0,6,6),"#ffffff",mxConstants.HANDLE_STROKECOLOR);n.dialect=mxConstants.DIALECT_SVG,n.init(this.graph.view.getOverlayPane()),this.cornerHandles.push(n)}}var i=mxUtils.bind(this,function(){null!=this.specialHandle&&(this.specialHandle.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none"),this.redrawHandles()});this.changeHandler=mxUtils.bind(this,function(t,e){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),i()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.editingHandler=mxUtils.bind(this,function(t,e){this.redrawHandles()}),this.graph.addListener(mxEvent.EDITING_STOPPED,this.editingHandler),e=this.graph.getLinkForCell(this.state.cell),n=this.graph.getLinksForState(this.state),this.updateLinkHint(e,n),(t=null!=e||null!=n&&0<n.length?!0:t)&&this.redrawHandles()},mxVertexHandler.prototype.updateLinkHint=function(t,e){try{if(null==t&&(null==e||0==e.length)||1<this.graph.getSelectionCount())null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null);else if(null!=t||null!=e&&0<e.length){var n,i;if(null==this.linkHint&&(this.linkHint=s(),this.linkHint.style.padding="6px 8px 6px 8px",this.linkHint.style.opacity="1",this.linkHint.style.filter="",this.graph.container.appendChild(this.linkHint)),this.linkHint.innerHTML="",null!=t&&(this.linkHint.appendChild(this.graph.createLinkForHint(t)),this.graph.isEnabled())&&"function"==typeof this.graph.editLink&&((n=document.createElement("img")).setAttribute("src",Editor.editImage),n.setAttribute("title",mxResources.get("editLink")),n.setAttribute("width","11"),n.setAttribute("height","11"),n.style.marginLeft="10px",n.style.marginBottom="-1px",n.style.cursor="pointer",this.linkHint.appendChild(n),mxEvent.addListener(n,"click",mxUtils.bind(this,function(t){this.graph.setSelectionCell(this.state.cell),this.graph.editLink(),mxEvent.consume(t)})),(i=document.createElement("img")).setAttribute("src",Dialog.prototype.clearImage),i.setAttribute("title",mxResources.get("removeIt",[mxResources.get("link")])),i.setAttribute("width","13"),i.setAttribute("height","10"),i.style.marginLeft="4px",i.style.marginBottom="-1px",i.style.cursor="pointer",this.linkHint.appendChild(i),mxEvent.addListener(i,"click",mxUtils.bind(this,function(t){this.graph.setLinkForCell(this.state.cell,null),mxEvent.consume(t)}))),null!=e)for(n=0;n<e.length;n++){var l=document.createElement("div");l.style.marginTop=null!=t||0<n?"6px":"0px",l.appendChild(this.graph.createLinkForHint(e[n].getAttribute("href"),mxUtils.getTextContent(e[n]))),this.linkHint.appendChild(l)}}}catch(t){}},mxEdgeHandler.prototype.updateLinkHint=mxVertexHandler.prototype.updateLinkHint,mxEdgeHandler.prototype.init),K=(mxEdgeHandler.prototype.init=function(){Z.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.state.view.graph.connectionHandler.isEnabled()});var n=mxUtils.bind(this,function(){null!=this.linkHint&&(this.linkHint.style.display=1==this.graph.getSelectionCount()?"":"none"),null!=this.labelShape&&(this.labelShape.node.style.display=this.graph.isEnabled()&&this.graph.getSelectionCount()<this.graph.graphHandler.maxCells?"":"none")}),t=(this.changeHandler=mxUtils.bind(this,function(t,e){this.updateLinkHint(this.graph.getLinkForCell(this.state.cell),this.graph.getLinksForState(this.state)),n(),this.redrawHandles()}),this.graph.getSelectionModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getModel().addListener(mxEvent.CHANGE,this.changeHandler),this.graph.getLinkForCell(this.state.cell)),e=this.graph.getLinksForState(this.state);(null!=t||null!=e&&0<e.length)&&(this.updateLinkHint(t,e),this.redrawHandles())},mxConnectionHandler.prototype.init),q=(mxConnectionHandler.prototype.init=function(){K.apply(this,arguments),this.constraintHandler.isEnabled=mxUtils.bind(this,function(){return this.graph.connectionHandler.isEnabled()})},mxVertexHandler.prototype.redrawHandles),Q=(mxVertexHandler.prototype.redrawHandles=function(){if(null!=this.moveHandles)for(var t=0;t<this.moveHandles.length;t++)this.moveHandles[t].style.left=this.moveHandles[t].rowState.x+this.moveHandles[t].rowState.width-5+"px",this.moveHandles[t].style.top=this.moveHandles[t].rowState.y+this.moveHandles[t].rowState.height/2-6+"px";if(null!=this.cornerHandles){var t=this.getSelectionBorderInset(),e=this.cornerHandles,n=e[0].bounds.height/2;for(e[0].bounds.x=this.state.x-e[0].bounds.width/2+t,e[0].bounds.y=this.state.y-n+t,e[0].redraw(),e[1].bounds.x=e[0].bounds.x+this.state.width-2*t,e[1].bounds.y=e[0].bounds.y,e[1].redraw(),e[2].bounds.x=e[0].bounds.x,e[2].bounds.y=this.state.y+this.state.height-2*t,e[2].redraw(),e[3].bounds.x=e[1].bounds.x,e[3].bounds.y=e[2].bounds.y,e[3].redraw(),t=0;t<this.cornerHandles.length;t++)this.cornerHandles[t].node.style.display=1==this.graph.getSelectionCount()?"":"none"}null!=this.rotationShape&&null!=this.rotationShape.node&&(this.rotationShape.node.style.display=null!=this.moveHandles||1!=this.graph.getSelectionCount()||null!=this.index&&this.index!=mxEvent.ROTATION_HANDLE?"none":""),q.apply(this),null!=this.state&&null!=this.linkHint&&(t=new mxPoint(this.state.getCenterX(),this.state.getCenterY()),e=new mxRectangle(this.state.x,this.state.y-22,this.state.width+24,this.state.height+22),t=null!=(n=mxUtils.getBoundingBox(e,this.state.style[mxConstants.STYLE_ROTATION]||"0",t))?mxUtils.getBoundingBox(this.state,this.state.style[mxConstants.STYLE_ROTATION]||"0"):this.state,e=null!=this.state.text?this.state.text.boundingBox:null,n=(n=null==n?this.state:n).y+n.height,null!=e&&(n=Math.max(n,e.y+e.height)),this.linkHint.style.left=Math.max(0,Math.round(t.x+(t.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(n+this.verticalOffset/2+Editor.hintOffset)+"px")},mxVertexHandler.prototype.destroy),J=(mxVertexHandler.prototype.destroy=function(){if(Q.apply(this,arguments),null!=this.moveHandles){for(var t=0;t<this.moveHandles.length;t++)null!=this.moveHandles[t]&&null!=this.moveHandles[t].parentNode&&this.moveHandles[t].parentNode.removeChild(this.moveHandles[t]);this.moveHandles=null}if(null!=this.cornerHandles){for(t=0;t<this.cornerHandles.length;t++)null!=this.cornerHandles[t]&&null!=this.cornerHandles[t].node&&null!=this.cornerHandles[t].node.parentNode&&this.cornerHandles[t].node.parentNode.removeChild(this.cornerHandles[t].node);this.cornerHandles=null}null!=this.linkHint&&(null!=this.linkHint.parentNode&&this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.changeHandler&&(this.graph.getSelectionModel().removeListener(this.changeHandler),this.graph.getModel().removeListener(this.changeHandler),this.changeHandler=null),null!=this.editingHandler&&(this.graph.removeListener(this.editingHandler),this.editingHandler=null)},mxEdgeHandler.prototype.redrawHandles),$=(mxEdgeHandler.prototype.redrawHandles=function(){var t;null!=this.marker&&(J.apply(this),null!=this.state)&&null!=this.linkHint&&(t=this.state,null!=this.state.text&&null!=this.state.text.bounds&&(t=new mxRectangle(t.x,t.y,t.width,t.height)).add(this.state.text.bounds),this.linkHint.style.left=Math.max(0,Math.round(t.x+(t.width-this.linkHint.clientWidth)/2))+"px",this.linkHint.style.top=Math.round(t.y+t.height+Editor.hintOffset)+"px")},mxEdgeHandler.prototype.reset),tt=(mxEdgeHandler.prototype.reset=function(){$.apply(this,arguments),null!=this.linkHint&&(this.linkHint.style.visibility="")},mxEdgeHandler.prototype.destroy);mxEdgeHandler.prototype.destroy=function(){tt.apply(this,arguments),null!=this.linkHint&&(this.linkHint.parentNode.removeChild(this.linkHint),this.linkHint=null),null!=this.changeHandler&&(this.graph.getModel().removeListener(this.changeHandler),this.graph.getSelectionModel().removeListener(this.changeHandler),this.changeHandler=null)}}(),window.urlParams=window.urlParams||{},window.MAX_REQUEST_SIZE=window.MAX_REQUEST_SIZE||10485760,window.MAX_AREA=window.MAX_AREA||225e6,window.EXPORT_URL=window.EXPORT_URL||"/export",window.SAVE_URL=window.SAVE_URL||"/save",window.OPEN_URL=window.OPEN_URL||"/open",window.RESOURCES_PATH=window.RESOURCES_PATH||"resources",window.RESOURCE_BASE=window.RESOURCE_BASE||window.RESOURCES_PATH+"/grapheditor",window.STENCIL_PATH=window.STENCIL_PATH||"stencils",window.IMAGE_PATH=window.IMAGE_PATH||"images",window.STYLE_PATH=window.STYLE_PATH||"styles",window.CSS_PATH=window.CSS_PATH||"styles",window.OPEN_FORM=window.OPEN_FORM||"open.html",window.mxBasePath=window.mxBasePath||"../src",window.mxLanguage=window.mxLanguage||urlParams.lang,window.mxLanguages=window.mxLanguages||["de"],window.Menus=function(t){this.editorUi=t,this.menus={},this.init(),mxClient.IS_SVG||((new Image).src=this.checkmarkImage)},Menus.prototype.defaultFont="Helvetica",Menus.prototype.defaultFontSize="12",Menus.prototype.defaultMenuItems="file edit view arrange extras help".split(" "),Menus.prototype.defaultFonts="Helvetica;Verdana;Times New Roman;Garamond;Comic Sans MS;Courier New;Georgia;Lucida Console;Tahoma".split(";"),Menus.prototype.init=function(){var s=this.editorUi.editor.graph,t=mxUtils.bind(s,s.isEnabled);this.customFonts=[],this.customFontSizes=[],this.put("fontFamily",new Menu(mxUtils.bind(this,function(e,n){for(var t=mxUtils.bind(this,function(t){this.styleChange(e,t,[mxConstants.STYLE_FONTFAMILY],[t],null,n,function(){document.execCommand("fontname",!1,t)},function(){s.updateLabelElements(s.getSelectionCells(),function(t){t.removeAttribute("face"),t.style.fontFamily=null,"PRE"==t.nodeName&&s.replaceElement(t,"div")})}).firstChild.nextSibling.style.fontFamily=t}),i=0;i<this.defaultFonts.length;i++)t(this.defaultFonts[i]);if(e.addSeparator(n),0<this.customFonts.length){for(i=0;i<this.customFonts.length;i++)t(this.customFonts[i]);e.addSeparator(n),e.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFonts=[],this.editorUi.fireEvent(new mxEventObject("customFontsChanged"))}),n),e.addSeparator(n)}this.promptChange(e,mxResources.get("custom")+"...","",mxConstants.DEFAULT_FONTFAMILY,mxConstants.STYLE_FONTFAMILY,n,!0,mxUtils.bind(this,function(t){mxUtils.indexOf(this.customFonts,t)<0&&(this.customFonts.push(t),this.editorUi.fireEvent(new mxEventObject("customFontsChanged")))}))}))),this.put("formatBlock",new Menu(mxUtils.bind(this,function(n,i){function t(t,e){return n.addItem(t,null,mxUtils.bind(this,function(){null!=s.cellEditor.textarea&&(s.cellEditor.textarea.focus(),document.execCommand("formatBlock",!1,"<"+e+">"))}),i)}t(mxResources.get("normal"),"p"),t("","h1").firstChild.nextSibling.innerHTML='<h1 style="margin:0px;">'+mxResources.get("heading")+" 1</h1>",t("","h2").firstChild.nextSibling.innerHTML='<h2 style="margin:0px;">'+mxResources.get("heading")+" 2</h2>",t("","h3").firstChild.nextSibling.innerHTML='<h3 style="margin:0px;">'+mxResources.get("heading")+" 3</h3>",t("","h4").firstChild.nextSibling.innerHTML='<h4 style="margin:0px;">'+mxResources.get("heading")+" 4</h4>",t("","h5").firstChild.nextSibling.innerHTML='<h5 style="margin:0px;">'+mxResources.get("heading")+" 5</h5>",t("","h6").firstChild.nextSibling.innerHTML='<h6 style="margin:0px;">'+mxResources.get("heading")+" 6</h6>",t("","pre").firstChild.nextSibling.innerHTML='<pre style="margin:0px;">'+mxResources.get("formatted")+"</pre>",t("","blockquote").firstChild.nextSibling.innerHTML='<blockquote style="margin-top:0px;margin-bottom:0px;">'+mxResources.get("blockquote")+"</blockquote>"}))),this.put("fontSize",new Menu(mxUtils.bind(this,function(t,e){for(var n=[6,8,9,10,11,12,14,18,24,36,48,72],i=mxUtils.bind(this,function(n){this.styleChange(t,n,[mxConstants.STYLE_FONTSIZE],[n],null,e,function(){if(null!=s.cellEditor.textarea){document.execCommand("fontSize",!1,"3");for(var t=s.cellEditor.textarea.getElementsByTagName("font"),e=0;e<t.length;e++)if("3"==t[e].getAttribute("size")){t[e].removeAttribute("size"),t[e].style.fontSize=n+"px";break}}})}),l=0;l<n.length;l++)i(n[l]);if(t.addSeparator(e),0<this.customFontSizes.length){for(l=0;l<this.customFontSizes.length;l++)i(this.customFontSizes[l]);t.addSeparator(e),t.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFontSizes=[]}),e),t.addSeparator(e)}this.promptChange(t,mxResources.get("custom")+"...","(pt)","12",mxConstants.STYLE_FONTSIZE,e,!0,mxUtils.bind(this,function(t){this.customFontSizes.push(t)}))}))),this.put("direction",new Menu(mxUtils.bind(this,function(t,e){t.addItem(mxResources.get("flipH"),null,function(){s.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)},e),t.addItem(mxResources.get("flipV"),null,function(){s.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)},e),this.addMenuItems(t,["-","rotation"],e)}))),this.put("align",new Menu(mxUtils.bind(this,function(t,e){t.addItem(mxResources.get("leftAlign"),null,function(){s.alignCells(mxConstants.ALIGN_LEFT)},e),t.addItem(mxResources.get("center"),null,function(){s.alignCells(mxConstants.ALIGN_CENTER)},e),t.addItem(mxResources.get("rightAlign"),null,function(){s.alignCells(mxConstants.ALIGN_RIGHT)},e),t.addSeparator(e),t.addItem(mxResources.get("topAlign"),null,function(){s.alignCells(mxConstants.ALIGN_TOP)},e),t.addItem(mxResources.get("middle"),null,function(){s.alignCells(mxConstants.ALIGN_MIDDLE)},e),t.addItem(mxResources.get("bottomAlign"),null,function(){s.alignCells(mxConstants.ALIGN_BOTTOM)},e)}))),this.put("distribute",new Menu(mxUtils.bind(this,function(t,e){t.addItem(mxResources.get("horizontal"),null,function(){s.distributeCells(!0)},e),t.addItem(mxResources.get("vertical"),null,function(){s.distributeCells(!1)},e)}))),this.put("line",new Menu(mxUtils.bind(this,function(t,e){var n=s.view.getState(s.getSelectionCell());null!=n&&("arrow"!=(n=mxUtils.getValue(n.style,mxConstants.STYLE_SHAPE))&&(this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",e,!0).setAttribute("title",mxResources.get("straight")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",e,!0).setAttribute("title",mxResources.get("orthogonal")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",e,!0).setAttribute("title",mxResources.get("simple")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",e,!0).setAttribute("title",mxResources.get("simple")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",e,!0).setAttribute("title",mxResources.get("isometric")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",e,!0).setAttribute("title",mxResources.get("isometric")),"connector"==n&&this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",e,!0).setAttribute("title",mxResources.get("curved")),this.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",e,!0).setAttribute("title",mxResources.get("entityRelation"))),t.addSeparator(e),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],[null,null,null,null],"geIcon geSprite geSprite-connection",e,!0,null,!0).setAttribute("title",mxResources.get("line")),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["link",null,null,null],"geIcon geSprite geSprite-linkedge",e,!0,null,!0).setAttribute("title",mxResources.get("link")),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["flexArrow",null,null,null],"geIcon geSprite geSprite-arrow",e,!0,null,!0).setAttribute("title",mxResources.get("arrow")),this.styleChange(t,"",[mxConstants.STYLE_SHAPE,mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE,"width"],["arrow",null,null,null],"geIcon geSprite geSprite-simplearrow",e,!0,null,!0).setAttribute("title",mxResources.get("simpleArrow")))}))),this.put("layout",new Menu(mxUtils.bind(this,function(t,e){var i=mxUtils.bind(this,function(t,e){t=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),function(t){e(parseFloat(t))},mxResources.get("spacing")),this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()});t.addItem(mxResources.get("horizontalFlow"),null,mxUtils.bind(this,function(){var e=new mxHierarchicalLayout(s,mxConstants.DIRECTION_WEST);this.editorUi.executeLayout(function(){var t=s.getSelectionCells();e.execute(s.getDefaultParent(),0==t.length?null:t)},!0)}),e),t.addItem(mxResources.get("verticalFlow"),null,mxUtils.bind(this,function(){var e=new mxHierarchicalLayout(s,mxConstants.DIRECTION_NORTH);this.editorUi.executeLayout(function(){var t=s.getSelectionCells();e.execute(s.getDefaultParent(),0==t.length?null:t)},!0)}),e),t.addSeparator(e),t.addItem(mxResources.get("horizontalTree"),null,mxUtils.bind(this,function(){var e,n=s.getSelectionCell(),t=null;null==n||0==s.getModel().getChildCount(n)?0==s.getModel().getEdgeCount(n)&&(t=s.findTreeRoots(s.getDefaultParent())):t=s.findTreeRoots(n),null!=(n=null!=t&&0<t.length?t[0]:n)&&((e=new mxCompactTreeLayout(s,!0)).edgeRouting=!1,e.levelDistance=30,i(e.levelDistance,mxUtils.bind(this,function(t){e.levelDistance=t,this.editorUi.executeLayout(function(){e.execute(s.getDefaultParent(),n)},!0)})))}),e),t.addItem(mxResources.get("verticalTree"),null,mxUtils.bind(this,function(){var e,n=s.getSelectionCell(),t=null;null==n||0==s.getModel().getChildCount(n)?0==s.getModel().getEdgeCount(n)&&(t=s.findTreeRoots(s.getDefaultParent())):t=s.findTreeRoots(n),null!=(n=null!=t&&0<t.length?t[0]:n)&&((e=new mxCompactTreeLayout(s,!1)).edgeRouting=!1,e.levelDistance=30,i(e.levelDistance,mxUtils.bind(this,function(t){e.levelDistance=t,this.editorUi.executeLayout(function(){e.execute(s.getDefaultParent(),n)},!0)})))}),e),t.addItem(mxResources.get("radialTree"),null,mxUtils.bind(this,function(){var e,n=s.getSelectionCell(),t=null;null==n||0==s.getModel().getChildCount(n)?0==s.getModel().getEdgeCount(n)&&(t=s.findTreeRoots(s.getDefaultParent())):t=s.findTreeRoots(n),null!=(n=null!=t&&0<t.length?t[0]:n)&&((e=new mxRadialTreeLayout(s,!1)).levelDistance=80,e.autoRadius=!0,i(e.levelDistance,mxUtils.bind(this,function(t){e.levelDistance=t,this.editorUi.executeLayout(function(){e.execute(s.getDefaultParent(),n),s.isSelectionEmpty()||(n=s.getModel().getParent(n),s.getModel().isVertex(n)&&s.updateGroupBounds([n],2*s.gridSize,!0))},!0)})))}),e),t.addSeparator(e),t.addItem(mxResources.get("organic"),null,mxUtils.bind(this,function(){var e=new mxFastOrganicLayout(s);i(e.forceConstant,mxUtils.bind(this,function(t){e.forceConstant=t,this.editorUi.executeLayout(function(){var t=s.getSelectionCell();null!=t&&0!=s.getModel().getChildCount(t)||(t=s.getDefaultParent()),e.execute(t),s.getModel().isVertex(t)&&s.updateGroupBounds([t],2*s.gridSize,!0)},!0)}))}),e),t.addItem(mxResources.get("circle"),null,mxUtils.bind(this,function(){var e=new mxCircleLayout(s);this.editorUi.executeLayout(function(){var t=s.getSelectionCell();null!=t&&0!=s.getModel().getChildCount(t)||(t=s.getDefaultParent()),e.execute(t),s.getModel().isVertex(t)&&s.updateGroupBounds([t],2*s.gridSize,!0)},!0)}),e)}))),this.put("navigation",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,"home - exitGroup enterGroup - expand collapse - collapsible".split(" "),e)}))),this.put("arrange",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["toFront","toBack","-"],e),this.addSubmenu("direction",t,e),this.addMenuItems(t,["turn","-"],e),this.addSubmenu("align",t,e),this.addSubmenu("distribute",t,e),t.addSeparator(e),this.addSubmenu("navigation",t,e),this.addSubmenu("insert",t,e),this.addSubmenu("layout",t,e),this.addMenuItems(t,"- group ungroup removeFromGroup - clearWaypoints autosize".split(" "),e)}))).isEnabled=t,this.put("insert",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["insertLink","insertImage"],e)}))),this.put("view",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,(null!=this.editorUi.format?["formatPanel"]:[]).concat("outline layers - pageView pageScale - scrollbars tooltips - grid guides - connectionArrows connectionPoints - resetView zoomIn zoomOut".split(" "),e))}))),this.put("viewPanels",new Menu(mxUtils.bind(this,function(t,e){null!=this.editorUi.format&&this.addMenuItems(t,["formatPanel"],e),this.addMenuItems(t,["outline","layers"],e)}))),this.put("viewZoom",new Menu(mxUtils.bind(this,function(e,n){this.addMenuItems(e,["resetView","-"],n);for(var t=[.25,.5,.75,1,1.25,1.5,2,3,4],i=0;i<t.length;i++)!function(t){e.addItem(100*t+"%",null,function(){s.zoomTo(t)},n)}(t[i]);this.addMenuItems(e,"- fitWindow fitPageWidth fitPage fitTwoPages - customZoom".split(" "),n)}))),this.put("file",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,"new open - save saveAs - import export - pageSetup print".split(" "),e)}))),this.put("edit",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,"undo redo - cut copy paste delete - duplicate - editData editTooltip - editStyle - edit - editLink openLink - selectVertices selectEdges selectAll selectNone - lockUnlock".split(" "))}))),this.put("extras",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["copyConnect","collapseExpand","-","editDiagram"])}))),this.put("help",new Menu(mxUtils.bind(this,function(t,e){this.addMenuItems(t,["help","-","about"])})))},Menus.prototype.put=function(t,e){return this.menus[t]=e},Menus.prototype.get=function(t){return this.menus[t]},Menus.prototype.addSubmenu=function(t,e,n,i){var l=this.get(t);null!=l&&(l=l.isEnabled(),e.showDisabled||l)&&(n=e.addItem(i||mxResources.get(t),null,null,n,null,l),this.addMenu(t,e,n))},Menus.prototype.addMenu=function(t,e,n){var i=this.get(t);null!=i&&(e.showDisabled||i.isEnabled())&&this.get(t).execute(e,n)},Menus.prototype.addInsertTableCellItem=function(t,e){var i=this.editorUi.editor.graph;this.addInsertTableItem(t,mxUtils.bind(this,function(t,e,n){e=mxEvent.isControlDown(t)||mxEvent.isMetaDown(t)?i.createCrossFunctionalSwimlane(e,n):i.createTable(e,n,null,null,mxEvent.isShiftDown(t)?"Table":null),t=mxEvent.isAltDown(t)?i.getFreeInsertPoint():i.getCenterInsertPoint(i.getBoundingBoxFromGeometry([e],!0)),null!=(t=i.importCells([e],t.x,t.y))&&0<t.length&&(i.scrollCellToVisible(t[0]),i.setSelectionCells(t))}),e)},Menus.prototype.addInsertTableItem=function(t,n,e){function i(t){var e=!1;if(null!=(d=a.getParentByName(mxEvent.getSource(t),"TD"))){h=a.getParentByName(d,"TR");for(var n=mxEvent.isMouseEvent(t)?2:4,i=u,l=Math.min(20,h.sectionRowIndex+n),n=Math.min(20,d.cellIndex+n),s=i.rows.length;s<l;s++)for(var o=i.insertRow(s),r=0;r<i.rows[0].cells.length;r++)o.insertCell(-1);for(s=0;s<i.rows.length;s++)for(r=(o=i.rows[s]).cells.length;r<n;r++)o.insertCell(-1);for(p.innerHTML=d.cellIndex+1+"x"+(h.sectionRowIndex+1),i=0;i<u.rows.length;i++)for(l=u.rows[i],n=0;n<l.cells.length;n++)s=l.cells[n],i==h.sectionRowIndex&&n==d.cellIndex&&(e="blue"==s.style.backgroundColor),s.style.backgroundColor=i<=h.sectionRowIndex&&n<=d.cellIndex?"blue":"transparent"}return mxEvent.consume(t),e}n=null!=n?n:mxUtils.bind(this,function(t,e,n){var i=this.editorUi.editor.graph;if(null!=(t=i.getParentByName(mxEvent.getSource(t),"TD"))&&null!=i.cellEditor.textarea){i.getParentByName(t,"TR");var l=i.cellEditor.textarea.getElementsByTagName("table");t=[];for(var s=0;s<l.length;s++)t.push(l[s]);if(i.container.focus(),i.pasteHtmlAtCaret(function(t,e){for(var n=["<table>"],i=0;i<t;i++){n.push("<tr>");for(var l=0;l<e;l++)n.push("<td><br></td>");n.push("</tr>")}return n.push("</table>"),n.join("")}(e,n)),(e=i.cellEditor.textarea.getElementsByTagName("table")).length==t.length+1)for(s=e.length-1;0<=s;s--)if(0==s||e[s]!=t[s-1]){i.selectNode(e[s].rows[0].cells[0]);break}}});var a=this.editorUi.editor.graph,h=null,d=null,u=((t=t.addItem("",null,null,e,null,null,null,!0)).firstChild.innerHTML="",function(){var t=document.createElement("table");t.setAttribute("border","1"),t.style.borderCollapse="collapse",t.style.borderStyle="solid",t.setAttribute("cellPadding","8");for(var e=0;e<5;e++)for(var n=t.insertRow(e),i=0;i<5;i++)n.insertCell(-1);return t}()),p=(t.firstChild.appendChild(u),document.createElement("div"));p.style.padding="4px",p.style.fontSize=Menus.prototype.defaultFontSize+"px",p.innerHTML="1x1",t.firstChild.appendChild(p),mxEvent.addGestureListeners(u,null,null,mxUtils.bind(this,function(t){var e=i(t);null!=d&&null!=h&&e&&(n(t,h.sectionRowIndex+1,d.cellIndex+1),window.setTimeout(mxUtils.bind(this,function(){this.editorUi.hideCurrentMenu()}),0))})),mxEvent.addListener(u,"mouseover",i)},Menus.prototype.edgeStyleChange=function(t,e,r,a,n,i,h){return this.showIconOnly(t.addItem(e,null,mxUtils.bind(this,function(){var t=this.editorUi.editor.graph;t.stopEditing(!1),t.getModel().beginUpdate();try{for(var e=t.getSelectionCells(),n=[],i=0;i<e.length;i++){var l,s=e[i];if(t.getModel().isEdge(s)){h&&null!=(l=t.getCellGeometry(s))&&((l=l.clone()).points=null,t.getModel().setGeometry(s,l));for(var o=0;o<r.length;o++)t.setCellStyles(r[o],a[o],[s]);n.push(s)}}this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",r,"values",a,"cells",n))}finally{t.getModel().endUpdate()}}),i,n))},Menus.prototype.showIconOnly=function(t){for(var e=t.getElementsByTagName("td"),n=0;n<e.length;n++)"mxPopupMenuItem"==e[n].getAttribute("class")&&(e[n].style.display="none");return t},Menus.prototype.styleChange=function(t,e,n,i,l,s,o,r,a){var h=this.createStyleChangeFunction(n,i);return t=t.addItem(e,null,mxUtils.bind(this,function(){var t=this.editorUi.editor.graph;null!=o&&t.cellEditor.isContentEditing()?o():h(r)}),s,l),a&&this.showIconOnly(t),t},Menus.prototype.createStyleChangeFunction=function(s,o){return mxUtils.bind(this,function(t){var e=this.editorUi.editor.graph;e.stopEditing(!1),e.getModel().beginUpdate();try{for(var n=e.getSelectionCells(),i=!1,l=0;l<s.length;l++)e.setCellStyles(s[l],o[l],n),s[l]==mxConstants.STYLE_ALIGN&&e.updateLabelElements(n,function(t){t.removeAttribute("align"),t.style.textAlign=null}),s[l]!=mxConstants.STYLE_FONTFAMILY&&"fontSource"!=s[l]||(i=!0);if(i)for(i=0;i<n.length;i++)0==e.model.getChildCount(n[i])&&e.autoSizeCell(n[i],!1);null!=t&&t(),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",s,"values",o,"cells",n))}finally{e.getModel().endUpdate()}})},Menus.prototype.promptChange=function(t,e,i,l,s,n,o,r,a){return t.addItem(e,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph,t=l,n=e.getView().getState(e.getSelectionCell());null!=n&&(t=n.style[s]||t),t=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),mxUtils.bind(this,function(t){if(null!=t&&0<t.length){e.getModel().beginUpdate();try{e.stopEditing(!1),e.setCellStyles(s,t)}finally{e.getModel().endUpdate()}null!=r&&r(t)}}),mxResources.get("enterValue")+(0<i.length?" "+i:"")),this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}),n,a,o)},Menus.prototype.pickColor=function(t,e,n){var i,l,s=this.editorUi.editor.graph,o=226+17*(Math.ceil(ColorDialog.prototype.presetColors.length/12)+Math.ceil(ColorDialog.prototype.defaultColors.length/12));(null!=e&&s.cellEditor.isContentEditing()?(i=s.cellEditor.saveSelection(),t=new ColorDialog(this.editorUi,n||"000000",mxUtils.bind(this,function(t){s.cellEditor.restoreSelection(i),document.execCommand(e,!1,t!=mxConstants.NONE?t:"transparent")}),function(){s.cellEditor.restoreSelection(i)}),this.editorUi.showDialog(t.container,230,o,!0,!0),t):(null==this.colorDialog&&(this.colorDialog=new ColorDialog(this.editorUi)),this.colorDialog.currentColorKey=t,(l="none")==(l=null!=(n=s.getView().getState(s.getSelectionCell()))?n.style[t]||l:l)?(this.colorDialog.picker.fromString(l="ffffff"),this.colorDialog.colorInput.value="none"):this.colorDialog.picker.fromString(l),this.editorUi.showDialog(this.colorDialog.container,230,o,!0,!0),this.colorDialog)).init()},Menus.prototype.toggleStyle=function(t,e){var n=this.editorUi.editor.graph;e=n.toggleCellStyles(t,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[t],"values",[e],"cells",n.getSelectionCells()))},Menus.prototype.addMenuItem=function(t,e,n,i,l,s){var o=this.editorUi.actions.get(e);return null!=o&&(t.showDisabled||o.isEnabled())&&o.visible?(e=t.addItem(s||o.label,null,function(t){o.funct(i,t)},n,l,o.isEnabled()),o.toggleAction&&o.isSelected()&&t.addCheckmark(e,Editor.checkmarkImage),this.addShortcut(e,o),e):null},Menus.prototype.addShortcut=function(t,e){var n;null!=e.shortcut&&(t=t.firstChild.nextSibling.nextSibling,(n=document.createElement("span")).style.color="gray",mxUtils.write(n,e.shortcut),t.appendChild(n))},Menus.prototype.addMenuItems=function(t,e,n,i,l){for(var s=0;s<e.length;s++)"-"==e[s]?t.addSeparator(n):this.addMenuItem(t,e[s],n,i,null!=l?l[s]:null)},Menus.prototype.createPopupMenu=function(t,e,n){t.smartSeparators=!0,this.addPopupMenuHistoryItems(t,e,n),this.addPopupMenuEditItems(t,e,n),this.addPopupMenuStyleItems(t,e,n),this.addPopupMenuArrangeItems(t,e,n),this.addPopupMenuCellItems(t,e,n),this.addPopupMenuSelectionItems(t,e,n)},Menus.prototype.addPopupMenuHistoryItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["undo","redo"],null,n)},Menus.prototype.addPopupMenuEditItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()?this.addMenuItems(t,["pasteHere"],null,n):this.addMenuItems(t,"delete - cut copy - duplicate".split(" "),null,n)},Menus.prototype.addPopupMenuStyleItems=function(t,e,n){1==this.editorUi.editor.graph.getSelectionCount()?this.addMenuItems(t,["-","setAsDefaultStyle"],null,n):this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["-","clearDefaultStyle"],null,n)},Menus.prototype.addPopupMenuArrangeItems=function(t,e,n){var i=this.editorUi.editor.graph;i.isSelectionEmpty()||this.addMenuItems(t,["-","toFront","toBack"],null,n),1<i.getSelectionCount()?this.addMenuItems(t,["-","group"],null,n):1==i.getSelectionCount()&&!i.getModel().isEdge(e)&&!i.isSwimlane(e)&&0<i.getModel().getChildCount(e)&&this.addMenuItems(t,["-","ungroup"],null,n)},Menus.prototype.addPopupMenuCellItems=function(t,e,n){var i,l,s,o=this.editorUi.editor.graph,r=(e=o.getSelectionCell(),o.view.getState(e));t.addSeparator(),null!=r&&(i=!1,1==o.getSelectionCount()&&o.getModel().isEdge(e)&&(t.addSeparator(),this.addSubmenu("line",t)),o.getModel().isEdge(e)&&"entityRelationEdgeStyle"!=mxUtils.getValue(r.style,mxConstants.STYLE_EDGE,null)&&"arrow"!=mxUtils.getValue(r.style,mxConstants.STYLE_SHAPE,null)&&(l=!1,(i=o.selectionCellsHandler.getHandler(e))instanceof mxEdgeHandler&&null!=i.bends&&2<i.bends.length&&(l=i.getHandleForEvent(o.updateMouseEvent(new mxMouseEvent(n))),(s=this.editorUi.actions.get("removeWaypoint")).handler=i,l=0<(s.index=l)&&l<i.bends.length-1),t.addSeparator(),this.addMenuItem(t,"turn",null,n,null,mxResources.get("reverse")),this.addMenuItems(t,[l?"removeWaypoint":"addWaypoint"],null,n),i=null!=(i=o.getModel().getGeometry(e))&&null!=i.points&&0<i.points.length),1==o.getSelectionCount()&&(i||o.getModel().isVertex(e)&&0<o.getModel().getEdgeCount(e))&&this.addMenuItems(t,["-","clearWaypoints"],null,n),1==o.getSelectionCount())&&(this.addMenuItems(t,["-","editStyle","editData","editLink"],null,n),o.getModel().isVertex(e))&&null!=mxUtils.getValue(r.style,mxConstants.STYLE_IMAGE,null)&&(t.addSeparator(),this.addMenuItem(t,"image",null,n).firstChild.nextSibling.innerHTML=mxResources.get("editImage")+"...")},Menus.prototype.addPopupMenuSelectionItems=function(t,e,n){this.editorUi.editor.graph.isSelectionEmpty()&&this.addMenuItems(t,["-","selectVertices","selectEdges","selectAll"],null,n)},Menus.prototype.createMenubar=function(t){for(var n=new Menubar(this.editorUi,t),i=this.defaultMenuItems,l=0;l<i.length;l++)mxUtils.bind(this,function(t){var e=n.addMenu(mxResources.get(i[l]),mxUtils.bind(this,function(){t.funct.apply(this,arguments)}));this.menuCreated(t,e)})(this.get(i[l]));return n},Menus.prototype.menuCreated=function(t,e,n){null!=e&&(n=null!=n?n:"geItem",t.addListener("stateChanged",function(){(e.enabled=t.enabled)?(e.className=n,8==document.documentMode&&(e.style.color="")):(e.className=n+" mxDisabled",8==document.documentMode&&(e.style.color="#c3c3c3"))}))},Menubar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},Menubar.prototype.addMenu=function(t,e,n){var i=document.createElement("a");return i.className="geItem",mxUtils.write(i,t),this.addMenuHandler(i,e),null!=n?this.container.insertBefore(i,n):this.container.appendChild(i),i},Menubar.prototype.addMenuHandler=function(i,l){var s,e;null!=l&&(s=!0,e=mxUtils.bind(this,function(t){var e,n;(s&&null==i.enabled||i.enabled)&&(this.editorUi.editor.graph.popupMenuHandler.hideMenu(),(e=new mxPopupMenu(l)).div.className+=" geMenubarMenu",e.smartSeparators=!0,e.showDisabled=!0,e.autoExpand=!0,e.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(e,arguments),this.editorUi.resetCurrentMenu(),e.destroy()}),n=mxUtils.getOffset(i),e.popup(n.x,n.y+i.offsetHeight,null,t),this.editorUi.setCurrentMenu(e,i)),mxEvent.consume(t)}),mxEvent.addListener(i,"mousemove",mxUtils.bind(this,function(t){null!=this.editorUi.currentMenu&&this.editorUi.currentMenuElt!=i&&(this.editorUi.hideCurrentMenu(),e(t))})),mxEvent.addListener(i,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){s=this.currentElt!=i,t.preventDefault()})),mxEvent.addListener(i,"click",mxUtils.bind(this,function(t){e(t),s=!0})))},Menubar.prototype.destroy=function(){},mxUtils.extend(Menu,mxEventSource),Menu.prototype.isEnabled=function(){return this.enabled},Menu.prototype.setEnabled=function(t){this.enabled!=t&&(this.enabled=t,this.fireEvent(new mxEventObject("stateChanged")))},Menu.prototype.execute=function(t,e){this.funct(t,e)},EditorUi.prototype.createMenus=function(){return new Menus(this)},module.exports={Action:Action,Actions:Actions,Dialog:Dialog,Editor:Editor,EditorUi:EditorUi,Format:Format,Graph:Graph,Menu:Menu,Menubar:Menubar,Menus:Menus,Sidebar:Sidebar,Toolbar:Toolbar,mxUtils:mxUtils,mxResources:mxResources,mxClient:mxClient,mxGraph:mxGraph,mxCodec:mxCodec,mxEventObject:mxEventObject,mxKeyHandler:mxKeyHandler,DiagramFormatPanel:DiagramFormatPanel,ChangePageSetup:ChangePageSetup,BaseFormatPanel:BaseFormatPanel,mxEvent:mxEvent,mxConstants:mxConstants,ArrangePanel:ArrangePanel,mxGeometry:mxGeometry,mxPoint:mxPoint,mxCell:mxCell,mxStencilRegistry:mxStencilRegistry,mxGraphView:mxGraphView,mxRectangle:mxRectangle,mxPolyline:mxPolyline,mxRectangleShape:mxRectangleShape,mxPopupMenu:mxPopupMenu,mxGraphHandler:mxGraphHandler,mxPopupMenuHandler:mxPopupMenuHandler,mxShape:mxShape,mxSvgCanvas2D:mxSvgCanvas2D,mxClient:mxClient,mxCellHighlight:mxCellHighlight,mxCellRenderer:mxCellRenderer,mxConnectionHandler:mxConnectionHandler,mxClipboard:mxClipboard},!function(){function t(){mxCylinder.call(this)}mxUtils.extend(t,mxCylinder),t.prototype.size=20,t.prototype.darkOpacity=0,t.prototype.darkOpacity2=0,t.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity)))),r=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity2",this.darkOpacity2))));t.translate(e,n),t.begin(),t.moveTo(0,0),t.lineTo(i-s,0),t.lineTo(i,s),t.lineTo(i,l),t.lineTo(s,l),t.lineTo(0,l-s),t.lineTo(0,0),t.close(),t.end(),t.fillAndStroke(),this.outline||(t.setShadow(!1),0!=o&&(t.setFillAlpha(Math.abs(o)),t.setFillColor(o<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(0,0),t.lineTo(i-s,0),t.lineTo(i,s),t.lineTo(s,s),t.close(),t.fill()),0!=r&&(t.setFillAlpha(Math.abs(r)),t.setFillColor(r<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(0,0),t.lineTo(s,s),t.lineTo(s,l),t.lineTo(0,l-s),t.close(),t.fill()),t.begin(),t.moveTo(s,l),t.lineTo(s,s),t.lineTo(0,0),t.moveTo(s,s),t.lineTo(i,s),t.end(),t.stroke())},t.prototype.getLabelMargins=function(t){var e;return mxUtils.getValue(this.style,"boundedLbl",!1)?new mxRectangle(e=parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale,e,0,0):null},mxCellRenderer.registerShape("cube",t);var G=Math.tan(mxUtils.toRadians(30)),r=(.5-G)/2;function e(){mxActor.call(this)}function D(){mxCylinder.call(this)}function _(){mxCylinder.call(this)}function n(){mxCylinder.call(this)}function k(){mxActor.call(this)}function i(){mxCylinder.call(this)}function l(){mxActor.call(this)}function s(){mxActor.call(this)}function o(){mxActor.call(this)}mxUtils.extend(e,mxActor),e.prototype.size=20,e.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i,l/G);t.translate((i-s)/2,(l-s)/2+s/4),t.moveTo(0,.25*s),t.lineTo(.5*s,s*r),t.lineTo(s,.25*s),t.lineTo(.5*s,(.5-r)*s),t.lineTo(0,.25*s),t.close(),t.end()},mxCellRenderer.registerShape("isoRectangle",e),mxUtils.extend(D,mxCylinder),D.prototype.size=20,D.prototype.redrawPath=function(t,e,n,i,l,s){var o=Math.min(i,l/(.5+G));s?(t.moveTo(0,.25*o),t.lineTo(.5*o,(.5-r)*o),t.lineTo(o,.25*o),t.moveTo(.5*o,(.5-r)*o),t.lineTo(.5*o,(1-r)*o)):(t.translate((i-o)/2,(l-o)/2),t.moveTo(0,.25*o),t.lineTo(.5*o,o*r),t.lineTo(o,.25*o),t.lineTo(o,.75*o),t.lineTo(.5*o,(1-r)*o),t.lineTo(0,.75*o),t.close()),t.end()},mxCellRenderer.registerShape("isoCube",D),mxUtils.extend(_,mxCylinder),_.prototype.redrawPath=function(t,e,n,i,l,s){var o=Math.min(l/2,Math.round(l/8)+this.strokewidth-1);(s&&null!=this.fill||!s&&null==this.fill)&&(t.moveTo(0,o),t.curveTo(0,2*o,i,2*o,i,o),s||(t.stroke(),t.begin()),t.translate(0,o/2),t.moveTo(0,o),t.curveTo(0,2*o,i,2*o,i,o),s||(t.stroke(),t.begin()),t.translate(0,o/2),t.moveTo(0,o),t.curveTo(0,2*o,i,2*o,i,o),s||(t.stroke(),t.begin()),t.translate(0,-o)),s||(t.moveTo(0,o),t.curveTo(0,-o/3,i,-o/3,i,o),t.lineTo(i,l-o),t.curveTo(i,l+o/3,0,l+o/3,0,l-o),t.close())},_.prototype.getLabelMargins=function(t){return new mxRectangle(0,2.5*Math.min(t.height/2,Math.round(t.height/8)+this.strokewidth-1),0,0)},mxCellRenderer.registerShape("datastore",_),mxUtils.extend(n,mxCylinder),n.prototype.size=30,n.prototype.darkOpacity=0,n.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=Math.max(-1,Math.min(1,parseFloat(mxUtils.getValue(this.style,"darkOpacity",this.darkOpacity))));t.translate(e,n),t.begin(),t.moveTo(0,0),t.lineTo(i-s,0),t.lineTo(i,s),t.lineTo(i,l),t.lineTo(0,l),t.lineTo(0,0),t.close(),t.end(),t.fillAndStroke(),this.outline||(t.setShadow(!1),0!=o&&(t.setFillAlpha(Math.abs(o)),t.setFillColor(o<0?"#FFFFFF":"#000000"),t.begin(),t.moveTo(i-s,0),t.lineTo(i-s,s),t.lineTo(i,s),t.close(),t.fill()),t.begin(),t.moveTo(i-s,0),t.lineTo(i-s,s),t.lineTo(i,s),t.end(),t.stroke())},mxCellRenderer.registerShape("note",n),mxUtils.extend(k,mxActor),k.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i/2,.5*l,i,0),t.quadTo(.5*i,l/2,i,l),t.quadTo(i/2,.5*l,0,l),t.quadTo(.5*i,l/2,0,0),t.end()},mxCellRenderer.registerShape("switch",k),mxUtils.extend(i,mxCylinder),i.prototype.tabWidth=60,i.prototype.tabHeight=20,i.prototype.tabPosition="right",i.prototype.redrawPath=function(t,e,n,i,l,s){var o=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"tabWidth",this.tabWidth)))),r=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"tabHeight",this.tabHeight)))),a=mxUtils.getValue(this.style,"tabPosition",this.tabPosition);s?"left"==a?(t.moveTo(0,r),t.lineTo(o,r)):(t.moveTo(i-o,r),t.lineTo(i,r)):("left"==a?(t.moveTo(0,0),t.lineTo(o,0),t.lineTo(o,r),t.lineTo(i,r)):(t.moveTo(0,r),t.lineTo(i-o,r),t.lineTo(i-o,0),t.lineTo(i,0)),t.lineTo(i,l),t.lineTo(0,l),t.lineTo(0,r),t.close()),t.end()},mxCellRenderer.registerShape("folder",i),mxUtils.extend(l,mxActor),l.prototype.size=30,l.prototype.isRoundable=function(){return!0},l.prototype.redrawPath=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(s,0),new mxPoint(i,0),new mxPoint(i,l),new mxPoint(0,l),new mxPoint(0,s)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("card",l),mxUtils.extend(s,mxActor),s.prototype.size=.4,s.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(0,s/2),t.quadTo(i/4,1.4*s,i/2,s/2),t.quadTo(3*i/4,s*(1-1.4),i,s/2),t.lineTo(i,l-s/2),t.quadTo(3*i/4,l-1.4*s,i/2,l-s/2),t.quadTo(i/4,l-s*(1-1.4),0,l-s/2),t.lineTo(0,s/2),t.close(),t.end()},s.prototype.getLabelBounds=function(t){var e,n,i,l;return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=mxUtils.getValue(this.style,"size",this.size),n=t.width,i=t.height,null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST?new mxRectangle(t.x,t.y+(l=i*e),n,i-2*l):new mxRectangle(t.x+(l=n*e),t.y,n-2*l,i)):t},mxCellRenderer.registerShape("tape",s),mxUtils.extend(o,mxActor),o.prototype.size=.3,o.prototype.getLabelMargins=function(t){return mxUtils.getValue(this.style,"boundedLbl",!1)?new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*t.height):null},o.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(0,0),t.lineTo(i,0),t.lineTo(i,l-s/2),t.quadTo(3*i/4,l-1.4*s,i/2,l-s/2),t.quadTo(i/4,l-s*(1-1.4),0,l-s/2),t.lineTo(0,s/2),t.close(),t.end()},mxCellRenderer.registerShape("document",o);var V=mxCylinder.prototype.getCylinderSize;function h(){mxActor.call(this)}function u(){mxActor.call(this)}function F(){mxActor.call(this)}function B(){mxActor.call(this)}function a(t,e){this.canvas=t,this.canvas.setLineJoin("round"),this.canvas.setLineCap("round"),this.defaultVariation=e,this.originalLineTo=this.canvas.lineTo,this.canvas.lineTo=mxUtils.bind(this,a.prototype.lineTo),this.originalMoveTo=this.canvas.moveTo,this.canvas.moveTo=mxUtils.bind(this,a.prototype.moveTo),this.originalClose=this.canvas.close,this.canvas.close=mxUtils.bind(this,a.prototype.close),this.originalQuadTo=this.canvas.quadTo,this.canvas.quadTo=mxUtils.bind(this,a.prototype.quadTo),this.originalCurveTo=this.canvas.curveTo,this.canvas.curveTo=mxUtils.bind(this,a.prototype.curveTo),this.originalArcTo=this.canvas.arcTo,this.canvas.arcTo=mxUtils.bind(this,a.prototype.arcTo)}mxCylinder.prototype.getCylinderSize=function(t,e,n,i){var l=mxUtils.getValue(this.style,"size");return null!=l?i*Math.max(0,Math.min(1,l)):V.apply(this,arguments)},mxCylinder.prototype.getLabelMargins=function(t){var e;return mxUtils.getValue(this.style,"boundedLbl",!1)?(e=2*mxUtils.getValue(this.style,"size",.15),new mxRectangle(0,Math.min(this.maxHeight*this.scale,t.height*e),0,0)):null},mxUtils.extend(h,mxActor),h.prototype.size=.2,h.prototype.isRoundable=function(){return!0},h.prototype.redrawPath=function(t,e,n,i,l){var s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(s,0),new mxPoint(i,0),new mxPoint(i-s,l)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("parallelogram",h),mxUtils.extend(u,mxActor),u.prototype.size=.2,u.prototype.isRoundable=function(){return!0},u.prototype.redrawPath=function(t,e,n,i,l){var s=i*Math.max(0,Math.min(.5,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(s,0),new mxPoint(i-s,0),new mxPoint(i,l)],this.isRounded,o,!0)},mxCellRenderer.registerShape("trapezoid",u),mxUtils.extend(F,mxActor),F.prototype.size=.5,F.prototype.redrawPath=function(t,e,n,i,l){t.setFillColor(null);var s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(i,0),new mxPoint(s,0),new mxPoint(s,l/2),new mxPoint(0,l/2),new mxPoint(s,l/2),new mxPoint(s,l),new mxPoint(i,l)],this.isRounded,o,!1),t.end()},mxCellRenderer.registerShape("curlyBracket",F),mxUtils.extend(B,mxActor),B.prototype.redrawPath=function(t,e,n,i,l){t.setStrokeWidth(1),t.setFillColor(this.stroke);i/=5;t.rect(0,0,i,l),t.fillAndStroke(),t.rect(2*i,0,i,l),t.fillAndStroke(),t.rect(4*i,0,i,l),t.fillAndStroke()},mxCellRenderer.registerShape("parallelMarker",B),a.prototype.moveTo=function(t,e){this.originalMoveTo.apply(this.canvas,arguments),this.lastX=t,this.lastY=e,this.firstX=t,this.firstY=e},a.prototype.close=function(){null!=this.firstX&&null!=this.firstY&&(this.lineTo(this.firstX,this.firstY),this.originalClose.apply(this.canvas,arguments)),this.originalClose.apply(this.canvas,arguments)},a.prototype.quadTo=function(t,e,n,i){this.originalQuadTo.apply(this.canvas,arguments),this.lastX=n,this.lastY=i},a.prototype.curveTo=function(t,e,n,i,l,s){this.originalCurveTo.apply(this.canvas,arguments),this.lastX=l,this.lastY=s},a.prototype.arcTo=function(t,e,n,i,l,s,o){this.originalArcTo.apply(this.canvas,arguments),this.lastX=s,this.lastY=o},a.prototype.lineTo=function(t,e){if(null!=this.lastX&&null!=this.lastY){var n=Math.abs(t-this.lastX),i=Math.abs(e-this.lastY),l=Math.sqrt(n*n+i*i);if(l<2)this.originalLineTo.apply(this.canvas,arguments);else{for(var s=Math.round(l/10),o=this.defaultVariation,r=(s<5&&(s=5,o/=3),g(t-this.lastX)*n/s),a=g(e-this.lastY)*i/s,h=n/l,d=i/l,u=0;u<s;u++){var p=r*u+this.lastX,c=a*u+this.lastY,m=(Math.random()-.5)*o;this.originalLineTo.call(this.canvas,p-m*d,c-m*h)}this.originalLineTo.call(this.canvas,t,e)}function g(t){return"number"==typeof t?t?t<0?-1:1:t==t?0:NaN:NaN}}else this.originalLineTo.apply(this.canvas,arguments);this.lastX=t,this.lastY=e},a.prototype.destroy=function(){this.canvas.lineTo=this.originalLineTo,this.canvas.moveTo=this.originalMoveTo,this.canvas.close=this.originalClose,this.canvas.quadTo=this.originalQuadTo,this.canvas.curveTo=this.originalCurveTo,this.canvas.arcTo=this.originalArcTo};var z=mxShape.prototype.paint,Y=(mxShape.prototype.defaultJiggle=1.5,mxShape.prototype.paint=function(t){null!=this.style&&"0"!=mxUtils.getValue(this.style,"comic","0")&&null==t.handHiggle&&(t.handJiggle=new a(t,mxUtils.getValue(this.style,"jiggle",this.defaultJiggle))),z.apply(this,arguments),null!=t.handJiggle&&(t.handJiggle.destroy(),delete t.handJiggle)},mxRhombus.prototype.defaultJiggle=2,mxRectangleShape.prototype.isHtmlAllowed),W=(mxRectangleShape.prototype.isHtmlAllowed=function(){return(null==this.style||"0"==mxUtils.getValue(this.style,"comic","0"))&&Y.apply(this,arguments)},mxRectangleShape.prototype.paintBackground),j=(mxRectangleShape.prototype.paintBackground=function(t,e,n,i,l){var s,o;null==t.handJiggle?W.apply(this,arguments):(o=!0,((o=null!=this.style?"1"==mxUtils.getValue(this.style,mxConstants.STYLE_POINTER_EVENTS,"1"):o)||null!=this.fill&&this.fill!=mxConstants.NONE||null!=this.stroke&&this.stroke!=mxConstants.NONE)&&(o||null!=this.fill&&this.fill!=mxConstants.NONE||(t.pointerEvents=!1),t.begin(),this.isRounded?(o="1"==mxUtils.getValue(this.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,o=0)?Math.min(i/2,Math.min(l/2,mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2)):(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,Math.min(i*s,l*s)),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.quadTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+l-o),t.quadTo(e+i,n+l,e+i-o,n+l),t.lineTo(e+o,n+l),t.quadTo(e,n+l,e,n+l-o),t.lineTo(e,n+o),t.quadTo(e,n,e+o,n)):(t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e+i,n+l),t.lineTo(e,n+l),t.lineTo(e,n)),t.close(),t.end(),t.fillAndStroke()))},mxRectangleShape.prototype.paintForeground);function d(){mxRectangleShape.call(this)}function X(){mxRectangleShape.call(this)}function p(){mxActor.call(this)}function c(){mxActor.call(this)}function m(){mxActor.call(this)}function Z(){mxRectangleShape.call(this)}mxRectangleShape.prototype.paintForeground=function(t,e,n,i,l){null==t.handJiggle&&j.apply(this,arguments)},mxUtils.extend(d,mxRectangleShape),d.prototype.size=.1,d.prototype.isHtmlAllowed=function(){return!1},d.prototype.getLabelBounds=function(t){var e,n,i,l,s;return mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,!0)==(null==this.direction||this.direction==mxConstants.DIRECTION_EAST||this.direction==mxConstants.DIRECTION_WEST)?(e=t.width,n=t.height,i=new mxRectangle(t.x,t.y,e,n),s=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),this.isRounded&&(l=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.max(s,Math.min(e*l,n*l))),i.x+=Math.round(s),i.width-=Math.round(2*s),i):t},d.prototype.paintForeground=function(t,e,n,i,l){var s,o=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));this.isRounded&&(s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,o=Math.max(o,Math.min(i*s,l*s))),o=Math.round(o),t.begin(),t.moveTo(e+o,n),t.lineTo(e+o,n+l),t.moveTo(e+i-o,n),t.lineTo(e+i-o,n+l),t.end(),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("process",d),mxUtils.extend(X,mxRectangleShape),X.prototype.paintBackground=function(t,e,n,i,l){t.setFillColor(mxConstants.NONE),t.rect(e,n,i,l),t.fill()},X.prototype.paintForeground=function(t,e,n,i,l){},mxCellRenderer.registerShape("transparent",X),mxUtils.extend(p,mxHexagon),p.prototype.size=30,p.prototype.position=.5,p.prototype.position2=.5,p.prototype.base=20,p.prototype.getLabelMargins=function(){return new mxRectangle(0,0,0,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale)},p.prototype.isRoundable=function(){return!0},p.prototype.redrawPath=function(t,e,n,i,l){var s=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),r=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position",this.position)))),a=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position2",this.position2)))),h=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"base",this.base))));this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,l-o),new mxPoint(Math.min(i,r+h),l-o),new mxPoint(a,l),new mxPoint(Math.max(0,r),l-o),new mxPoint(0,l-o)],this.isRounded,s,!0,[4])},mxCellRenderer.registerShape("callout",p),mxUtils.extend(c,mxActor),c.prototype.size=.2,c.prototype.fixedSize=20,c.prototype.isRoundable=function(){return!0},c.prototype.redrawPath=function(t,e,n,i,l){var s="0"!=mxUtils.getValue(this.style,"fixedSize","0")?Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"size",this.fixedSize)))):i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,0),new mxPoint(i-s,0),new mxPoint(i,l/2),new mxPoint(i-s,l),new mxPoint(0,l),new mxPoint(s,l/2)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("step",c),mxUtils.extend(m,mxHexagon),m.prototype.size=.25,m.prototype.isRoundable=function(){return!0},m.prototype.redrawPath=function(t,e,n,i,l){var s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(s,0),new mxPoint(i-s,0),new mxPoint(i,.5*l),new mxPoint(i-s,l),new mxPoint(s,l),new mxPoint(0,.5*l)],this.isRounded,o,!0)},mxCellRenderer.registerShape("hexagon",m),mxUtils.extend(Z,mxRectangleShape),Z.prototype.isHtmlAllowed=function(){return!1},Z.prototype.paintForeground=function(t,e,n,i,l){var s=Math.min(i/5,l/5)+1;t.begin(),t.moveTo(e+i/2,n+s),t.lineTo(e+i/2,n+l-s),t.moveTo(e+s,n+l/2),t.lineTo(e+i-s,n+l/2),t.end(),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("plus",Z);var K,g,q,Q=mxRhombus.prototype.paintVertexShape;function J(){mxRectangleShape.call(this)}function $(){mxCylinder.call(this)}function tt(){mxShape.call(this)}function et(){mxShape.call(this)}function nt(){mxEllipse.call(this)}function it(){mxShape.call(this)}function lt(){mxShape.call(this)}function x(){mxRectangleShape.call(this)}function y(){mxShape.call(this)}function st(){mxShape.call(this)}function ot(){mxShape.call(this)}function rt(){mxShape.call(this)}function at(){mxShape.call(this)}function f(){mxCylinder.call(this)}function C(){mxCylinder.call(this)}function ht(){mxRectangleShape.call(this)}function E(){mxDoubleEllipse.call(this)}function dt(){E.call(this)}function v(){mxArrowConnector.call(this),this.spacing=0}function S(){mxArrowConnector.call(this),this.spacing=0}function b(){mxActor.call(this)}function w(){mxRectangleShape.call(this)}function T(){mxActor.call(this)}function ut(){mxActor.call(this)}function A(){mxActor.call(this)}function L(){mxActor.call(this)}function pt(){mxActor.call(this)}function M(){mxActor.call(this)}function ct(){mxActor.call(this)}function mt(){mxActor.call(this)}function R(){mxActor.call(this)}function I(){mxActor.call(this)}function gt(){mxEllipse.call(this)}function xt(){mxEllipse.call(this)}function yt(){mxEllipse.call(this)}function ft(){mxRhombus.call(this)}function Ct(){mxEllipse.call(this)}function Et(){mxEllipse.call(this)}function vt(){mxEllipse.call(this)}function St(){mxEllipse.call(this)}function bt(){mxActor.call(this)}function P(){mxActor.call(this)}function O(){mxActor.call(this)}function N(){mxConnector.call(this)}function wt(t,e,n,i,l,s,o,r,a,h){var o=o+a,d=i.clone();return i.x-=l*(2*o+a),i.y-=s*(2*o+a),l*=o+a,s*=o+a,function(){t.ellipse(d.x-l-o,d.y-s-o,2*o,2*o),h?t.fillAndStroke():t.stroke()}}function H(t,e,n,i,l,s){var o,r=new mxHandle(t,null,mxVertexHandler.prototype.secondaryHandleImage);return r.execute=function(){for(var t=0;t<e.length;t++)this.copyStyle(e[t])},r.getPosition=n,r.setPosition=i,r.ignoreGrid=null==l||l,s&&(o=r.positionChanged,r.positionChanged=function(){o.apply(this,arguments),t.view.invalidate(this.state.cell),t.view.validate()}),r}function U(i,l){return H(i,[mxConstants.STYLE_ARCSIZE],function(t){var e,n=null!=l?l:t.height/8;return"1"==mxUtils.getValue(i.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?(e=mxUtils.getValue(i.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2,new mxPoint(t.x+t.width-Math.min(t.width/2,e),t.y+n)):(e=Math.max(0,parseFloat(mxUtils.getValue(i.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)))/100,new mxPoint(t.x+t.width-Math.min(Math.max(t.width/2,t.height/2),Math.min(t.width,t.height)*e),t.y+n))},function(t,e,n){"1"==mxUtils.getValue(i.style,mxConstants.STYLE_ABSOLUTE_ARCSIZE,0)?this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(Math.max(0,Math.min(t.width,2*(t.x+t.width-e.x)))):(e=Math.min(50,Math.max(0,100*(t.width-e.x+t.x)/Math.min(t.width,t.height))),this.state.style[mxConstants.STYLE_ARCSIZE]=Math.round(e))})}function Tt(){return function(t){var e=[];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(U(t)),e}}function At(n){return function(t){var e=[H(t,["size"],function(t){var e=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.state.style,"size",u.prototype.size))));return new mxPoint(t.x+e*t.width*.75,t.y+t.height/4)},function(t,e){this.state.style.size=Math.max(0,Math.min(n,(e.x-t.x)/(.75*t.width)))},null,!0)];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(U(t)),e}}function Lt(i,e,s,n,o){return s=null!=s?s:1,function(l){var t=[H(l,["size"],function(t){var e=null!=o?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null,n=parseFloat(mxUtils.getValue(this.state.style,"size",e?o:i));return new mxPoint(t.x+Math.max(0,Math.min(t.width,n*(e?1:t.width))),t.getCenterY())},function(t,e,n){var i=null!=o?"0"!=mxUtils.getValue(this.state.style,"fixedSize","0"):null,e=i?e.x-t.x:Math.max(0,Math.min(s,(e.x-t.x)/t.width));i&&!mxEvent.isAltDown(n.getEvent())&&(e=l.view.graph.snap(e)),this.state.style.size=e},null,n)];return e&&mxUtils.getValue(l.style,mxConstants.STYLE_ROUNDED,!1)&&t.push(U(l)),t}}function Mt(n,i,l){return function(t){var e=[H(t,["size"],function(t){var e=Math.max(0,Math.min(t.width,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",i)))))*n;return new mxPoint(t.x+e,t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,e.x-t.x),Math.min(t.height,e.y-t.y)))/n)})];return l&&mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(U(t)),e}}function Rt(i){return function(t){return[H(t,["arrowWidth","arrowSize"],function(t){var e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"arrowWidth",L.prototype.arrowWidth))),n=Math.max(0,Math.min(i,mxUtils.getValue(this.state.style,"arrowSize",L.prototype.arrowSize)));return new mxPoint(t.x+(1-n)*t.width,t.y+(1-e)*t.height/2)},function(t,e){this.state.style.arrowWidth=Math.max(0,Math.min(1,Math.abs(t.y+t.height/2-e.y)/t.height*2)),this.state.style.arrowSize=Math.max(0,Math.min(i,(t.x+t.width-e.x)/t.width))})]}}function It(d,t,u,a,p){return H(d,t,function(t){var e=d.absolutePoints,n=e.length-1,i=d.view.translate,l=d.view.scale,s=u?e[0]:e[n],e=u?e[1]:e[n-1],n=e.x-s.x,o=e.y-s.y,r=Math.sqrt(n*n+o*o),n=a.call(this,r,n/r,o/r,s,e);return new mxPoint(n.x/l-i.x,n.y/l-i.y)},function(t,e,n){var i=d.absolutePoints,l=i.length-1,s=d.view.translate,o=d.view.scale,r=u?i[0]:i[l],i=u?i[1]:i[l-1],l=i.x-r.x,a=i.y-r.y,h=Math.sqrt(l*l+a*a);e.x=(e.x+s.x)*o,e.y=(e.y+s.y)*o,p.call(this,h,l/h,a/h,r,i,e,n)})}function Pt(o,t,r){return It(o,["width"],t,function(t,e,n,i,l){var s=o.shape.getEdgeWidth()*o.view.scale+r;return new mxPoint(i.x+e*t/4+n*s/2,i.y+n*t/4-e*s/2)},function(t,e,n,i,l,s){i=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y));o.style.width=Math.round(2*i)/o.view.scale-r})}mxRhombus.prototype.getLabelBounds=function(t){var e;return 1==this.style.double?(e=(2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale,new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)):t},mxRhombus.prototype.paintVertexShape=function(t,e,n,i,l){var s;Q.apply(this,arguments),this.outline||1!=this.style.double||(e+=s=2*Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0),n+=s,l-=2*s,0<(i-=2*s)&&0<l&&(t.setShadow(!1),Q.apply(this,[t,e,n,i,l])))},mxUtils.extend(J,mxRectangleShape),J.prototype.isHtmlAllowed=function(){return!1},J.prototype.getLabelBounds=function(t){var e;return 1==this.style.double?(e=(Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0))*this.scale,new mxRectangle(t.x+e,t.y+e,t.width-2*e,t.height-2*e)):t},J.prototype.paintForeground=function(t,e,n,i,l){if(null!=this.style){this.outline||1!=this.style.double||(e+=s=Math.max(2,this.strokewidth+1)+parseFloat(this.style[mxConstants.STYLE_MARGIN]||0),n+=s,l-=2*s,0<(i-=2*s)&&0<l&&mxRectangleShape.prototype.paintBackground.apply(this,arguments)),t.setDashed(!1);var s,o,r,a,h,d,u,p,c,m=0,g=null;do{}while(null!=(g=mxCellRenderer.defaultShapes[this.style["symbol"+m]])&&(c=this.style["symbol"+m+"Align"],o=this.style["symbol"+m+"VerticalAlign"],r=this.style["symbol"+m+"Width"],a=this.style["symbol"+m+"Height"],h=this.style["symbol"+m+"Spacing"]||0,d=this.style["symbol"+m+"VSpacing"]||h,null!=(u=this.style["symbol"+m+"ArcSpacing"])&&(h+=u=this.getArcSize(i+this.strokewidth,l+this.strokewidth)*u,d+=u),u=e,p=n,c==mxConstants.ALIGN_CENTER?u+=(i-r)/2:c==mxConstants.ALIGN_RIGHT?u+=i-r-h:u+=h,o==mxConstants.ALIGN_MIDDLE?p+=(l-a)/2:o==mxConstants.ALIGN_BOTTOM?p+=l-a-d:p+=d,t.save(),(c=new g).style=this.style,g.prototype.paintVertexShape.call(c,t,u,p,r,a),t.restore()),m++,null!=g)}mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("ext",J),mxUtils.extend($,mxCylinder),$.prototype.redrawPath=function(t,e,n,i,l,s){s?(t.moveTo(0,0),t.lineTo(i/2,l/2),t.lineTo(i,0),t.end()):(t.moveTo(0,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(0,l),t.close())},mxCellRenderer.registerShape("message",$),mxUtils.extend(tt,mxShape),tt.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.ellipse(i/4,0,i/2,l/4),t.fillAndStroke(),t.begin(),t.moveTo(i/2,l/4),t.lineTo(i/2,2*l/3),t.moveTo(i/2,l/3),t.lineTo(0,l/3),t.moveTo(i/2,l/3),t.lineTo(i,l/3),t.moveTo(i/2,2*l/3),t.lineTo(0,l),t.moveTo(i/2,2*l/3),t.lineTo(i,l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlActor",tt),mxUtils.extend(et,mxShape),et.prototype.getLabelMargins=function(t){return new mxRectangle(t.width/6,0,0,0)},et.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(0,l/4),t.lineTo(0,3*l/4),t.end(),t.stroke(),t.begin(),t.moveTo(0,l/2),t.lineTo(i/6,l/2),t.end(),t.stroke(),t.ellipse(i/6,0,5*i/6,l),t.fillAndStroke()},mxCellRenderer.registerShape("umlBoundary",et),mxUtils.extend(nt,mxEllipse),nt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.begin(),t.moveTo(e+i/8,n+l),t.lineTo(e+7*i/8,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlEntity",nt),mxUtils.extend(it,mxShape),it.prototype.paintVertexShape=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(i,0),t.lineTo(0,l),t.moveTo(0,0),t.lineTo(i,l),t.end(),t.stroke()},mxCellRenderer.registerShape("umlDestroy",it),mxUtils.extend(lt,mxShape),lt.prototype.getLabelBounds=function(t){return new mxRectangle(t.x,t.y+t.height/8,t.width,7*t.height/8)},lt.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(3*i/8,l/8*1.1),t.lineTo(5*i/8,0),t.end(),t.stroke(),t.ellipse(0,l/8,i,7*l/8),t.fillAndStroke()},lt.prototype.paintForeground=function(t,e,n,i,l){t.begin(),t.moveTo(3*i/8,l/8*1.1),t.lineTo(5*i/8,l/4),t.end(),t.stroke()},mxCellRenderer.registerShape("umlControl",lt),mxUtils.extend(x,mxRectangleShape),x.prototype.size=40,x.prototype.isHtmlAllowed=function(){return!1},x.prototype.getLabelBounds=function(t){var e=Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(this.style,"size",this.size))*this.scale));return new mxRectangle(t.x,t.y,t.width,e)},x.prototype.paintBackground=function(t,e,n,i,l){var s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,"participant");null==o||null==this.state?mxRectangleShape.prototype.paintBackground.call(this,t,e,n,i,s):null!=(o=this.state.view.graph.cellRenderer.getShape(o))&&o!=x&&((o=new o).apply(this.state),t.save(),o.paintVertexShape(t,e,n,i,s),t.restore()),s<l&&(t.setDashed(!0),t.begin(),t.moveTo(e+i/2,n+s),t.lineTo(e+i/2,n+l),t.end(),t.stroke())},x.prototype.paintForeground=function(t,e,n,i,l){var s=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))));mxRectangleShape.prototype.paintForeground.call(this,t,e,n,i,Math.min(l,s))},mxCellRenderer.registerShape("umlLifeline",x),mxUtils.extend(y,mxShape),y.prototype.width=60,y.prototype.height=30,y.prototype.corner=10,y.prototype.getLabelMargins=function(t){return new mxRectangle(0,0,t.width-parseFloat(mxUtils.getValue(this.style,"width",this.width)*this.scale),t.height-parseFloat(mxUtils.getValue(this.style,"height",this.height)*this.scale))},y.prototype.paintBackground=function(t,e,n,i,l){var s=this.corner,o=Math.min(i,Math.max(s,parseFloat(mxUtils.getValue(this.style,"width",this.width)))),r=Math.min(l,Math.max(1.5*s,parseFloat(mxUtils.getValue(this.style,"height",this.height)))),a=mxUtils.getValue(this.style,mxConstants.STYLE_SWIMLANE_FILLCOLOR,mxConstants.NONE);a!=mxConstants.NONE&&(t.setFillColor(a),t.rect(e,n,i,l),t.fill()),null!=this.fill&&this.fill!=mxConstants.NONE&&this.gradient&&this.gradient!=mxConstants.NONE?(this.getGradientBounds(t,e,n,i,l),t.setGradient(this.fill,this.gradient,e,n,i,l,this.gradientDirection)):t.setFillColor(this.fill),t.begin(),t.moveTo(e,n),t.lineTo(e+o,n),t.lineTo(e+o,n+Math.max(0,r-1.5*s)),t.lineTo(e+Math.max(0,o-s),n+r),t.lineTo(e,n+r),t.close(),t.fillAndStroke(),t.begin(),t.moveTo(e+o,n),t.lineTo(e+i,n),t.lineTo(e+i,n+l),t.lineTo(e,n+l),t.lineTo(e,n+r),t.stroke()},mxCellRenderer.registerShape("umlFrame",y),mxPerimeter.LifelinePerimeter=function(t,e,n,i){var l=x.prototype.size,e=(null!=e&&(l=mxUtils.getValue(e.style,"size",l)*e.view.scale),parseFloat(e.style[mxConstants.STYLE_STROKEWIDTH]||1)*e.view.scale/2-1);return n.x<t.getCenterX()&&(e=-1*(e+1)),new mxPoint(t.getCenterX()+e,Math.min(t.y+t.height,Math.max(t.y+l,n.y)))},mxStyleRegistry.putValue("lifelinePerimeter",mxPerimeter.LifelinePerimeter),mxPerimeter.OrthogonalPerimeter=function(t,e,n,i){return mxPerimeter.RectanglePerimeter.apply(this,arguments)},mxStyleRegistry.putValue("orthogonalPerimeter",mxPerimeter.OrthogonalPerimeter),mxPerimeter.BackbonePerimeter=function(t,e,n,i){var l=parseFloat(e.style[mxConstants.STYLE_STROKEWIDTH]||1)*e.view.scale/2-1;return null!=e.style.backboneSize&&(l+=parseFloat(e.style.backboneSize)*e.view.scale/2-1),"south"==e.style[mxConstants.STYLE_DIRECTION]||"north"==e.style[mxConstants.STYLE_DIRECTION]?(n.x<t.getCenterX()&&(l=-1*(l+1)),new mxPoint(t.getCenterX()+l,Math.min(t.y+t.height,Math.max(t.y,n.y)))):(n.y<t.getCenterY()&&(l=-1*(l+1)),new mxPoint(Math.min(t.x+t.width,Math.max(t.x,n.x)),t.getCenterY()+l))},mxStyleRegistry.putValue("backbonePerimeter",mxPerimeter.BackbonePerimeter),mxPerimeter.CalloutPerimeter=function(t,e,n,i){return mxPerimeter.RectanglePerimeter(mxUtils.getDirectedBounds(t,new mxRectangle(0,0,0,Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(e.style,"size",p.prototype.size))*e.view.scale))),e.style),e,n,i)},mxStyleRegistry.putValue("calloutPerimeter",mxPerimeter.CalloutPerimeter),mxPerimeter.ParallelogramPerimeter=function(t,e,n,i){var l=h.prototype.size,s=(null!=e&&(l=mxUtils.getValue(e.style,"size",l)),t.x),o=t.y,r=t.width,a=t.height,e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,a=(l=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH?(e=a*Math.max(0,Math.min(1,l)),[new mxPoint(s,o),new mxPoint(s+r,o+e),new mxPoint(s+r,o+a),new mxPoint(s,o+a-e),new mxPoint(s,o)]):[new mxPoint(s+(e=r*Math.max(0,Math.min(1,l))),o),new mxPoint(s+r,o),new mxPoint(s+r-e,o+a),new mxPoint(s,o+a),new mxPoint(s+e,o)],t.getCenterX()),e=new mxPoint(a,t.getCenterY());return i&&(n.x<s||n.x>s+r?e.y=n.y:e.x=n.x),mxUtils.getPerimeterPoint(l,e,n)},mxStyleRegistry.putValue("parallelogramPerimeter",mxPerimeter.ParallelogramPerimeter),mxPerimeter.TrapezoidPerimeter=function(t,e,n,i){var l,s,o=u.prototype.size,r=(null!=e&&(o=mxUtils.getValue(e.style,"size",o)),t.x),a=t.y,h=t.width,d=t.height,e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,e=(l=e==mxConstants.DIRECTION_EAST?[new mxPoint(r+(l=h*Math.max(0,Math.min(1,o))),a),new mxPoint(r+h-l,a),new mxPoint(r+h,a+d),new mxPoint(r,a+d),new mxPoint(r+l,a)]:e==mxConstants.DIRECTION_WEST?(l=h*Math.max(0,Math.min(1,o)),[new mxPoint(r,a),new mxPoint(r+h,a),new mxPoint(r+h-l,a+d),new mxPoint(r+l,a+d),new mxPoint(r,a)]):e==mxConstants.DIRECTION_NORTH?[new mxPoint(r,a+(s=d*Math.max(0,Math.min(1,o)))),new mxPoint(r+h,a),new mxPoint(r+h,a+d),new mxPoint(r,a+d-s),new mxPoint(r,a+s)]:(s=d*Math.max(0,Math.min(1,o)),[new mxPoint(r,a),new mxPoint(r+h,a+s),new mxPoint(r+h,a+d-s),new mxPoint(r,a+d),new mxPoint(r,a)]),t.getCenterX()),o=new mxPoint(e,t.getCenterY());return i&&(n.x<r||n.x>r+h?o.y=n.y:o.x=n.x),mxUtils.getPerimeterPoint(l,o,n)},mxStyleRegistry.putValue("trapezoidPerimeter",mxPerimeter.TrapezoidPerimeter),mxPerimeter.StepPerimeter=function(t,e,n,i){var l,s,o="0"!=mxUtils.getValue(e.style,"fixedSize","0"),r=o?c.prototype.fixedSize:c.prototype.size,a=(null!=e&&(r=mxUtils.getValue(e.style,"size",r)),t.x),h=t.y,d=t.width,u=t.height,p=t.getCenterX(),t=t.getCenterY(),e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,e=(l=e==mxConstants.DIRECTION_EAST?(l=o?Math.max(0,Math.min(d,r)):d*Math.max(0,Math.min(1,r)),[new mxPoint(a,h),new mxPoint(a+d-l,h),new mxPoint(a+d,t),new mxPoint(a+d-l,h+u),new mxPoint(a,h+u),new mxPoint(a+l,t),new mxPoint(a,h)]):e==mxConstants.DIRECTION_WEST?[new mxPoint(a+(l=o?Math.max(0,Math.min(d,r)):d*Math.max(0,Math.min(1,r))),h),new mxPoint(a+d,h),new mxPoint(a+d-l,t),new mxPoint(a+d,h+u),new mxPoint(a+l,h+u),new mxPoint(a,t),new mxPoint(a+l,h)]:e==mxConstants.DIRECTION_NORTH?[new mxPoint(a,h+(s=o?Math.max(0,Math.min(u,r)):u*Math.max(0,Math.min(1,r)))),new mxPoint(p,h),new mxPoint(a+d,h+s),new mxPoint(a+d,h+u),new mxPoint(p,h+u-s),new mxPoint(a,h+u),new mxPoint(a,h+s)]:(s=o?Math.max(0,Math.min(u,r)):u*Math.max(0,Math.min(1,r)),[new mxPoint(a,h),new mxPoint(p,h+s),new mxPoint(a+d,h),new mxPoint(a+d,h+u-s),new mxPoint(p,h+u),new mxPoint(a,h+u-s),new mxPoint(a,h)]),new mxPoint(p,t));return i&&(n.x<a||n.x>a+d?e.y=n.y:e.x=n.x),mxUtils.getPerimeterPoint(l,e,n)},mxStyleRegistry.putValue("stepPerimeter",mxPerimeter.StepPerimeter),mxPerimeter.HexagonPerimeter2=function(t,e,n,i){var l=m.prototype.size,s=(null!=e&&(l=mxUtils.getValue(e.style,"size",l)),t.x),o=t.y,r=t.width,a=t.height,h=t.getCenterX(),t=t.getCenterY(),e=null!=e?mxUtils.getValue(e.style,mxConstants.STYLE_DIRECTION,mxConstants.DIRECTION_EAST):mxConstants.DIRECTION_EAST,a=(l=e==mxConstants.DIRECTION_NORTH||e==mxConstants.DIRECTION_SOUTH?(e=a*Math.max(0,Math.min(1,l)),[new mxPoint(h,o),new mxPoint(s+r,o+e),new mxPoint(s+r,o+a-e),new mxPoint(h,o+a),new mxPoint(s,o+a-e),new mxPoint(s,o+e),new mxPoint(h,o)]):[new mxPoint(s+(e=r*Math.max(0,Math.min(1,l))),o),new mxPoint(s+r-e,o),new mxPoint(s+r,t),new mxPoint(s+r-e,o+a),new mxPoint(s+e,o+a),new mxPoint(s,t),new mxPoint(s+e,o)],new mxPoint(h,t));return i&&(n.x<s||n.x>s+r?a.y=n.y:a.x=n.x),mxUtils.getPerimeterPoint(l,a,n)},mxStyleRegistry.putValue("hexagonPerimeter2",mxPerimeter.HexagonPerimeter2),mxUtils.extend(st,mxShape),st.prototype.size=10,st.prototype.paintBackground=function(t,e,n,i,l){var s=parseFloat(mxUtils.getValue(this.style,"size",this.size));t.translate(e,n),t.ellipse((i-s)/2,0,s,s),t.fillAndStroke(),t.begin(),t.moveTo(i/2,s),t.lineTo(i/2,l),t.end(),t.stroke()},mxCellRenderer.registerShape("lollipop",st),mxUtils.extend(ot,mxShape),ot.prototype.size=10,ot.prototype.inset=2,ot.prototype.paintBackground=function(t,e,n,i,l){var s=parseFloat(mxUtils.getValue(this.style,"size",this.size)),o=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;t.translate(e,n),t.begin(),t.moveTo(i/2,s+o),t.lineTo(i/2,l),t.end(),t.stroke(),t.begin(),t.moveTo((i-s)/2-o,s/2),t.quadTo((i-s)/2-o,s+o,i/2,s+o),t.quadTo((i+s)/2+o,s+o,(i+s)/2+o,s/2),t.end(),t.stroke()},mxCellRenderer.registerShape("requires",ot),mxUtils.extend(rt,mxShape),rt.prototype.paintBackground=function(t,e,n,i,l){t.translate(e,n),t.begin(),t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.end(),t.stroke()},mxCellRenderer.registerShape("requiredInterface",rt),mxUtils.extend(at,mxShape),at.prototype.inset=2,at.prototype.paintBackground=function(t,e,n,i,l){var s=parseFloat(mxUtils.getValue(this.style,"inset",this.inset))+this.strokewidth;t.translate(e,n),t.ellipse(0,s,i-2*s,l-2*s),t.fillAndStroke(),t.begin(),t.moveTo(i/2,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i/2,l),t.end(),t.stroke()},mxCellRenderer.registerShape("providedRequiredInterface",at),mxUtils.extend(f,mxCylinder),f.prototype.jettyWidth=20,f.prototype.jettyHeight=10,f.prototype.redrawPath=function(t,e,n,i,l,s){var o=parseFloat(mxUtils.getValue(this.style,"jettyWidth",this.jettyWidth)),r=parseFloat(mxUtils.getValue(this.style,"jettyHeight",this.jettyHeight)),a=o/2,o=a+o/2,h=Math.min(r,l-r),d=Math.min(h+2*r,l-r);s?(t.moveTo(a,h),t.lineTo(o,h),t.lineTo(o,h+r),t.lineTo(a,h+r),t.moveTo(a,d),t.lineTo(o,d),t.lineTo(o,d+r),t.lineTo(a,d+r)):(t.moveTo(a,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(a,l),t.lineTo(a,d+r),t.lineTo(0,d+r),t.lineTo(0,d),t.lineTo(a,d),t.lineTo(a,h+r),t.lineTo(0,h+r),t.lineTo(0,h),t.lineTo(a,h),t.close()),t.end()},mxCellRenderer.registerShape("module",f),mxUtils.extend(C,mxCylinder),C.prototype.jettyWidth=32,C.prototype.jettyHeight=12,C.prototype.redrawPath=function(t,e,n,i,l,s){var o=parseFloat(mxUtils.getValue(this.style,"jettyWidth",this.jettyWidth)),r=parseFloat(mxUtils.getValue(this.style,"jettyHeight",this.jettyHeight)),a=o/2,o=a+o/2,h=.3*l-r/2,d=.7*l-r/2;s?(t.moveTo(a,h),t.lineTo(o,h),t.lineTo(o,h+r),t.lineTo(a,h+r),t.moveTo(a,d),t.lineTo(o,d),t.lineTo(o,d+r),t.lineTo(a,d+r)):(t.moveTo(a,0),t.lineTo(i,0),t.lineTo(i,l),t.lineTo(a,l),t.lineTo(a,d+r),t.lineTo(0,d+r),t.lineTo(0,d),t.lineTo(a,d),t.lineTo(a,h+r),t.lineTo(0,h+r),t.lineTo(0,h),t.lineTo(a,h),t.close()),t.end()},mxCellRenderer.registerShape("component",C),mxUtils.extend(ht,mxRectangleShape),ht.prototype.paintForeground=function(t,e,n,i,l){var s=i/2,o=l/2,r=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;t.begin(),this.addPoints(t,[new mxPoint(e+s,n),new mxPoint(e+i,n+o),new mxPoint(e+s,n+l),new mxPoint(e,n+o)],this.isRounded,r,!0),t.stroke(),mxRectangleShape.prototype.paintForeground.apply(this,arguments)},mxCellRenderer.registerShape("associativeEntity",ht),mxUtils.extend(E,mxDoubleEllipse),E.prototype.outerStroke=!0,E.prototype.paintVertexShape=function(t,e,n,i,l){var s=Math.min(4,Math.min(i/5,l/5));0<i&&0<l&&(t.ellipse(e+s,n+s,i-2*s,l-2*s),t.fillAndStroke()),t.setShadow(!1),this.outerStroke&&(t.ellipse(e,n,i,l),t.stroke())},mxCellRenderer.registerShape("endState",E),mxUtils.extend(dt,E),dt.prototype.outerStroke=!1,mxCellRenderer.registerShape("startState",dt),mxUtils.extend(v,mxArrowConnector),v.prototype.defaultWidth=4,v.prototype.isOpenEnded=function(){return!0},v.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},v.prototype.isArrowRounded=function(){return this.isRounded},mxCellRenderer.registerShape("link",v),mxUtils.extend(S,mxArrowConnector),S.prototype.defaultWidth=10,S.prototype.defaultArrowWidth=20,S.prototype.getStartArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"startWidth",this.defaultArrowWidth)},S.prototype.getEndArrowWidth=function(){return this.getEdgeWidth()+mxUtils.getNumber(this.style,"endWidth",this.defaultArrowWidth)},S.prototype.getEdgeWidth=function(){return mxUtils.getNumber(this.style,"width",this.defaultWidth)+Math.max(0,this.strokewidth-1)},mxCellRenderer.registerShape("flexArrow",S),mxUtils.extend(b,mxActor),b.prototype.size=30,b.prototype.isRoundable=function(){return!0},b.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l),new mxPoint(0,s),new mxPoint(i,0),new mxPoint(i,l)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("manualInput",b),mxUtils.extend(w,mxRectangleShape),w.prototype.dx=20,w.prototype.dy=20,w.prototype.isHtmlAllowed=function(){return!1},w.prototype.paintForeground=function(t,e,n,i,l){mxRectangleShape.prototype.paintForeground.apply(this,arguments);var s=0,o=(this.isRounded&&(o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,100*mxConstants.RECTANGLE_ROUNDING_FACTOR)/100,s=Math.max(s,Math.min(i*o,l*o))),Math.max(s,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx))))),s=Math.max(s,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));t.begin(),t.moveTo(e,n+s),t.lineTo(e+i,n+s),t.end(),t.stroke(),t.begin(),t.moveTo(e+o,n),t.lineTo(e+o,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("internalStorage",w),mxUtils.extend(T,mxActor),T.prototype.dx=20,T.prototype.dy=20,T.prototype.redrawPath=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),r=(Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2);this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,o),new mxPoint(s,o),new mxPoint(s,l),new mxPoint(0,l)],this.isRounded,r,!0),t.end()},mxCellRenderer.registerShape("corner",T),mxUtils.extend(ut,mxActor),ut.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.lineTo(0,l),t.end(),t.moveTo(i,0),t.lineTo(i,l),t.end(),t.moveTo(0,l/2),t.lineTo(i,l/2),t.end()},mxCellRenderer.registerShape("crossbar",ut),mxUtils.extend(A,mxActor),A.prototype.dx=20,A.prototype.dy=20,A.prototype.redrawPath=function(t,e,n,i,l){var s=Math.max(0,Math.min(i,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),o=Math.max(0,Math.min(l,parseFloat(mxUtils.getValue(this.style,"dy",this.dy)))),r=(Math.abs(i-s),Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2);this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,o),new mxPoint((i+s)/2,o),new mxPoint((i+s)/2,l),new mxPoint((i-s)/2,l),new mxPoint((i-s)/2,o),new mxPoint(0,o)],this.isRounded,r,!0),t.end()},mxCellRenderer.registerShape("tee",A),mxUtils.extend(L,mxActor),L.prototype.arrowWidth=.3,L.prototype.arrowSize=.2,L.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",this.arrowWidth)))),o=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",this.arrowSize)))),r=(l-s)/2,s=r+s,a=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,r),new mxPoint(i-o,r),new mxPoint(i-o,0),new mxPoint(i,l/2),new mxPoint(i-o,l),new mxPoint(i-o,s),new mxPoint(0,s)],this.isRounded,a,!0),t.end()},mxCellRenderer.registerShape("singleArrow",L),mxUtils.extend(pt,mxActor),pt.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",L.prototype.arrowWidth)))),o=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",L.prototype.arrowSize)))),r=(l-s)/2,s=r+s,a=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,l/2),new mxPoint(o,0),new mxPoint(o,r),new mxPoint(i-o,r),new mxPoint(i-o,0),new mxPoint(i,l/2),new mxPoint(i-o,l),new mxPoint(i-o,s),new mxPoint(o,s),new mxPoint(o,l)],this.isRounded,a,!0),t.end()},mxCellRenderer.registerShape("doubleArrow",pt),mxUtils.extend(M,mxActor),M.prototype.size=.1,M.prototype.redrawPath=function(t,e,n,i,l){var s=i*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size))));t.moveTo(s,0),t.lineTo(i,0),t.quadTo(i-2*s,l/2,i,l),t.lineTo(s,l),t.quadTo(s-2*s,l/2,s,0),t.close(),t.end()},mxCellRenderer.registerShape("dataStorage",M),mxUtils.extend(ct,mxActor),ct.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.close(),t.end()},mxCellRenderer.registerShape("or",ct),mxUtils.extend(mt,mxActor),mt.prototype.redrawPath=function(t,e,n,i,l){t.moveTo(0,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,0,l),t.quadTo(i/2,l/2,0,0),t.close(),t.end()},mxCellRenderer.registerShape("xor",mt),mxUtils.extend(R,mxActor),R.prototype.size=20,R.prototype.isRoundable=function(){return!0},R.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i/2,Math.min(l,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(s,0),new mxPoint(i-s,0),new mxPoint(i,.8*s),new mxPoint(i,l),new mxPoint(0,l),new mxPoint(0,.8*s)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("loopLimit",R),mxUtils.extend(I,mxActor),I.prototype.size=3/8,I.prototype.isRoundable=function(){return!0},I.prototype.redrawPath=function(t,e,n,i,l){var s=l*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE)/2;this.addPoints(t,[new mxPoint(0,0),new mxPoint(i,0),new mxPoint(i,l-s),new mxPoint(i/2,l),new mxPoint(0,l-s)],this.isRounded,o,!0),t.end()},mxCellRenderer.registerShape("offPageConnector",I),mxUtils.extend(gt,mxEllipse),gt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.begin(),t.moveTo(e+i/2,n+l),t.lineTo(e+i,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("tapeData",gt),mxUtils.extend(xt,mxEllipse),xt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2),t.end(),t.stroke(),t.begin(),t.moveTo(e+i/2,n),t.lineTo(e+i/2,n+l),t.end(),t.stroke()},mxCellRenderer.registerShape("orEllipse",xt),mxUtils.extend(yt,mxEllipse),yt.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments);t.setShadow(!1),t.begin(),t.moveTo(e+.145*i,n+.145*l),t.lineTo(e+.855*i,n+.855*l),t.end(),t.stroke(),t.begin(),t.moveTo(e+.855*i,n+.145*l),t.lineTo(e+.145*i,n+.855*l),t.end(),t.stroke()},mxCellRenderer.registerShape("sumEllipse",yt),mxUtils.extend(ft,mxRhombus),ft.prototype.paintVertexShape=function(t,e,n,i,l){mxRhombus.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2),t.end(),t.stroke()},mxCellRenderer.registerShape("sortShape",ft),mxUtils.extend(Ct,mxEllipse),Ct.prototype.paintVertexShape=function(t,e,n,i,l){t.begin(),t.moveTo(e,n),t.lineTo(e+i,n),t.lineTo(e+i/2,n+l/2),t.close(),t.fillAndStroke(),t.begin(),t.moveTo(e,n+l),t.lineTo(e+i,n+l),t.lineTo(e+i/2,n+l/2),t.close(),t.fillAndStroke()},mxCellRenderer.registerShape("collate",Ct),mxUtils.extend(Et,mxEllipse),Et.prototype.paintVertexShape=function(t,e,n,i,l){var s=n+l-5;t.begin(),t.moveTo(e,n),t.lineTo(e,n+l),t.moveTo(e,s),t.lineTo(e+10,s-5),t.moveTo(e,s),t.lineTo(e+10,5+s),t.moveTo(e,s),t.lineTo(e+i,s),t.moveTo(e+i,n),t.lineTo(e+i,n+l),t.moveTo(e+i,s),t.lineTo(e+i-10,s-5),t.moveTo(e+i,s),t.lineTo(e+i-10,5+s),t.end(),t.stroke()},mxCellRenderer.registerShape("dimension",Et),mxUtils.extend(vt,mxEllipse),vt.prototype.paintVertexShape=function(t,e,n,i,l){this.outline||t.setStrokeColor(null),mxRectangleShape.prototype.paintBackground.apply(this,arguments),null!=this.style&&(t.setStrokeColor(this.stroke),t.rect(e,n,i,l),t.fill(),t.begin(),t.moveTo(e,n),"1"==mxUtils.getValue(this.style,"top","1")?t.lineTo(e+i,n):t.moveTo(e+i,n),"1"==mxUtils.getValue(this.style,"right","1")?t.lineTo(e+i,n+l):t.moveTo(e+i,n+l),"1"==mxUtils.getValue(this.style,"bottom","1")?t.lineTo(e,n+l):t.moveTo(e,n+l),"1"==mxUtils.getValue(this.style,"left","1")&&t.lineTo(e,n),t.end(),t.stroke())},mxCellRenderer.registerShape("partialRectangle",vt),mxUtils.extend(St,mxEllipse),St.prototype.paintVertexShape=function(t,e,n,i,l){mxEllipse.prototype.paintVertexShape.apply(this,arguments),t.setShadow(!1),t.begin(),"vertical"==mxUtils.getValue(this.style,"line")?(t.moveTo(e+i/2,n),t.lineTo(e+i/2,n+l)):(t.moveTo(e,n+l/2),t.lineTo(e+i,n+l/2)),t.end(),t.stroke()},mxCellRenderer.registerShape("lineEllipse",St),mxUtils.extend(bt,mxActor),bt.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i,l/2);t.moveTo(0,0),t.lineTo(i-s,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i-s,l),t.lineTo(0,l),t.close(),t.end()},mxCellRenderer.registerShape("delay",bt),mxUtils.extend(P,mxActor),P.prototype.size=.2,P.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(l,i),s=Math.max(0,Math.min(s,s*parseFloat(mxUtils.getValue(this.style,"size",this.size)))),o=(l-s)/2,r=o+s,a=(i-s)/2,s=a+s;t.moveTo(0,o),t.lineTo(a,o),t.lineTo(a,0),t.lineTo(s,0),t.lineTo(s,o),t.lineTo(i,o),t.lineTo(i,r),t.lineTo(s,r),t.lineTo(s,l),t.lineTo(a,l),t.lineTo(a,r),t.lineTo(0,r),t.close(),t.end()},mxCellRenderer.registerShape("cross",P),mxUtils.extend(O,mxActor),O.prototype.size=.25,O.prototype.redrawPath=function(t,e,n,i,l){var s=Math.min(i,l/2),o=Math.min(i-s,Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size)))*i);t.moveTo(0,l/2),t.lineTo(o,0),t.lineTo(i-s,0),t.quadTo(i,0,i,l/2),t.quadTo(i,l,i-s,l),t.lineTo(o,l),t.close(),t.end()},mxCellRenderer.registerShape("display",O),mxUtils.extend(N,mxConnector),N.prototype.origPaintEdgeShape=N.prototype.paintEdgeShape,N.prototype.paintEdgeShape=function(t,e,n){for(var i=[],l=0;l<e.length;l++)i.push(mxUtils.clone(e[l]));var s,o=t.state.dashed,r=t.state.fixDash;N.prototype.origPaintEdgeShape.apply(this,[t,i,n]),3<=t.state.strokeWidth&&null!=(s=mxUtils.getValue(this.style,"fillColor",null))&&(t.setStrokeColor(s),t.setStrokeWidth(t.state.strokeWidth-2),t.setDashed(o,r),N.prototype.origPaintEdgeShape.apply(this,[t,e,n]))},mxCellRenderer.registerShape("filledEdge",N),"undefined"!=typeof StyleFormatPanel&&(K=StyleFormatPanel.prototype.getCustomColors,StyleFormatPanel.prototype.getCustomColors=function(){var t=this.format.getSelectionState(),e=K.apply(this,arguments);return"umlFrame"==t.style.shape&&e.push({title:mxResources.get("laneColor"),key:"swimlaneFillColor",defaultValue:"#ffffff"}),e}),mxMarker.addMarker("dash",function(t,e,n,i,l,s,o,r,a,h){var d=l*(o+a+1),u=s*(o+a+1);return function(){t.begin(),t.moveTo(i.x-d/2-u/2,i.y-u/2+d/2),t.lineTo(i.x+u/2-3*d/2,i.y-3*u/2-d/2),t.stroke()}}),mxMarker.addMarker("box",function(t,e,n,i,l,s,o,r,a,h){var d=l*(o+a+1),u=s*(o+a+1),p=i.x+d/2,c=i.y+u/2;return i.x-=d,i.y-=u,function(){t.begin(),t.moveTo(p-d/2-u/2,c-u/2+d/2),t.lineTo(p-d/2+u/2,c-u/2-d/2),t.lineTo(p+u/2-3*d/2,c-3*u/2-d/2),t.lineTo(p-u/2-3*d/2,c-3*u/2+d/2),t.close(),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("cross",function(t,e,n,i,l,s,o,r,a,h){var d=l*(o+a+1),u=s*(o+a+1);return function(){t.begin(),t.moveTo(i.x-d/2-u/2,i.y-u/2+d/2),t.lineTo(i.x+u/2-3*d/2,i.y-3*u/2-d/2),t.moveTo(i.x-d/2+u/2,i.y-u/2-d/2),t.lineTo(i.x-u/2-3*d/2,i.y-3*u/2+d/2),t.stroke()}}),mxMarker.addMarker("circle",wt),mxMarker.addMarker("circlePlus",function(t,e,n,i,l,s,o,r,a,h){var d=i.clone(),u=wt.apply(this,arguments),p=l*(o+2*a),c=s*(o+2*a);return function(){u.apply(this,arguments),t.begin(),t.moveTo(d.x-l*a,d.y-s*a),t.lineTo(d.x-2*p+l*a,d.y-2*c+s*a),t.moveTo(d.x-p-c+s*a,d.y-c+p-l*a),t.lineTo(d.x+c-p-s*a,d.y-c-p+l*a),t.stroke()}}),mxMarker.addMarker("halfCircle",function(t,e,n,i,l,s,o,r,a,h){var d=l*(o+a+1),u=s*(o+a+1),p=i.clone();return i.x-=d,i.y-=u,function(){t.begin(),t.moveTo(p.x-u,p.y+d),t.quadTo(i.x-u,i.y+d,i.x,i.y),t.quadTo(i.x+u,i.y-d,p.x+u,p.y-d),t.stroke()}}),mxMarker.addMarker("async",function(t,e,n,i,l,s,o,r,a,h){var d=l*a*1.118,u=s*a*1.118,p=(l*=o+a,s*=o+a,i.clone());p.x-=d,p.y-=u;return i.x+=-l-d,i.y+=-s-u,function(){t.begin(),t.moveTo(p.x,p.y),r?t.lineTo(p.x-l-s/2,p.y-s+l/2):t.lineTo(p.x+s/2-l,p.y-s-l/2),t.lineTo(p.x-l,p.y-s),t.close(),h?t.fillAndStroke():t.stroke()}}),mxMarker.addMarker("openAsync",(g=null!=(g=2)?g:2,function(t,e,n,i,l,s,o,r,a,h){l*=o+a,s*=o+a;var d=i.clone();return function(){t.begin(),t.moveTo(d.x,d.y),r?t.lineTo(d.x-l-s/g,d.y-s+l/g):t.lineTo(d.x+s/g-l,d.y-s-l/g),t.stroke()}})),void 0!==mxVertexHandler?(q={link:function(t){return[Pt(t,!0,10),Pt(t,!1,10)]},flexArrow:function(r){var a=r.view.graph.gridSize/r.view.scale,t=[];return mxUtils.getValue(r.style,mxConstants.STYLE_STARTARROW,mxConstants.NONE)!=mxConstants.NONE&&(t.push(It(r,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(t,e,n,i,l){var s=(r.shape.getEdgeWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)+n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)-e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.width=Math.round(2*l)/r.view.scale,mxEvent.isControlDown(o.getEvent())&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE]),mxEvent.isAltDown(o.getEvent())||Math.abs(parseFloat(r.style[mxConstants.STYLE_STARTSIZE])-parseFloat(r.style[mxConstants.STYLE_ENDSIZE]))<a/6&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE])})),t.push(It(r,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!0,function(t,e,n,i,l){var s=(r.shape.getStartArrowWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_STARTSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)+n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)-e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_STARTSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.startWidth=Math.max(0,Math.round(2*l)-r.shape.getEdgeWidth())/r.view.scale,mxEvent.isControlDown(o.getEvent())&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE],r.style.endWidth=r.style.startWidth),mxEvent.isAltDown(o.getEvent())||(Math.abs(parseFloat(r.style[mxConstants.STYLE_STARTSIZE])-parseFloat(r.style[mxConstants.STYLE_ENDSIZE]))<a/6&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE]),Math.abs(parseFloat(r.style.startWidth)-parseFloat(r.style.endWidth))<a&&(r.style.startWidth=r.style.endWidth))}))),mxUtils.getValue(r.style,mxConstants.STYLE_ENDARROW,mxConstants.NONE)!=mxConstants.NONE&&(t.push(It(r,["width",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(t,e,n,i,l){var s=(r.shape.getEdgeWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)-n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)+e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.width=Math.round(2*l)/r.view.scale,mxEvent.isControlDown(o.getEvent())&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE]),mxEvent.isAltDown(o.getEvent())||Math.abs(parseFloat(r.style[mxConstants.STYLE_ENDSIZE])-parseFloat(r.style[mxConstants.STYLE_STARTSIZE]))<a/6&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE])})),t.push(It(r,["startWidth","endWidth",mxConstants.STYLE_STARTSIZE,mxConstants.STYLE_ENDSIZE],!1,function(t,e,n,i,l){var s=(r.shape.getEndArrowWidth()-r.shape.strokewidth)*r.view.scale,o=3*mxUtils.getNumber(r.style,mxConstants.STYLE_ENDSIZE,mxConstants.ARROW_SIZE/5)*r.view.scale;return new mxPoint(i.x+e*(o+r.shape.strokewidth*r.view.scale)-n*s/2,i.y+n*(o+r.shape.strokewidth*r.view.scale)+e*s/2)},function(t,e,n,i,l,s,o){l=Math.sqrt(mxUtils.ptSegDistSq(i.x,i.y,l.x,l.y,s.x,s.y)),n=mxUtils.ptLineDist(i.x,i.y,i.x+n,i.y-e,s.x,s.y);r.style[mxConstants.STYLE_ENDSIZE]=Math.round(100*(n-r.shape.strokewidth)/3)/100/r.view.scale,r.style.endWidth=Math.max(0,Math.round(2*l)-r.shape.getEdgeWidth())/r.view.scale,mxEvent.isControlDown(o.getEvent())&&(r.style[mxConstants.STYLE_STARTSIZE]=r.style[mxConstants.STYLE_ENDSIZE],r.style.startWidth=r.style.endWidth),mxEvent.isAltDown(o.getEvent())||(Math.abs(parseFloat(r.style[mxConstants.STYLE_ENDSIZE])-parseFloat(r.style[mxConstants.STYLE_STARTSIZE]))<a/6&&(r.style[mxConstants.STYLE_ENDSIZE]=r.style[mxConstants.STYLE_STARTSIZE]),Math.abs(parseFloat(r.style.endWidth)-parseFloat(r.style.startWidth))<a&&(r.style.endWidth=r.style.startWidth))}))),t},swimlane:function(n){var t,e=[H(n,[mxConstants.STYLE_STARTSIZE],function(t){var e=parseFloat(mxUtils.getValue(n.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE));return 1==mxUtils.getValue(n.style,mxConstants.STYLE_HORIZONTAL,1)?new mxPoint(t.getCenterX(),t.y+Math.max(0,Math.min(t.height,e))):new mxPoint(t.x+Math.max(0,Math.min(t.width,e)),t.getCenterY())},function(t,e){n.style[mxConstants.STYLE_STARTSIZE]=1==mxUtils.getValue(this.state.style,mxConstants.STYLE_HORIZONTAL,1)?Math.round(Math.max(0,Math.min(t.height,e.y-t.y))):Math.round(Math.max(0,Math.min(t.width,e.x-t.x)))})];return mxUtils.getValue(n.style,mxConstants.STYLE_ROUNDED)&&(t=parseFloat(mxUtils.getValue(n.style,mxConstants.STYLE_STARTSIZE,mxConstants.DEFAULT_STARTSIZE)),e.push(U(n,t/2))),e},label:Tt(),ext:Tt(),rectangle:Tt(),triangle:Tt(),rhombus:Tt(),umlLifeline:function(t){return[H(t,["size"],function(t){var e=Math.max(0,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",x.prototype.size))));return new mxPoint(t.getCenterX(),t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))},!1)]},umlFrame:function(t){return[H(t,["width","height"],function(t){var e=Math.max(y.prototype.corner,Math.min(t.width,mxUtils.getValue(this.state.style,"width",y.prototype.width))),n=Math.max(1.5*y.prototype.corner,Math.min(t.height,mxUtils.getValue(this.state.style,"height",y.prototype.height)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.width=Math.round(Math.max(y.prototype.corner,Math.min(t.width,e.x-t.x))),this.state.style.height=Math.round(Math.max(1.5*y.prototype.corner,Math.min(t.height,e.y-t.y)))},!1)]},process:function(t){var e=[H(t,["size"],function(t){var e=Math.max(0,Math.min(.5,parseFloat(mxUtils.getValue(this.state.style,"size",d.prototype.size))));return new mxPoint(t.x+t.width*e,t.y+t.height/4)},function(t,e){this.state.style.size=Math.max(0,Math.min(.5,(e.x-t.x)/t.width))})];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(U(t)),e},cross:function(t){return[H(t,["size"],function(t){var e=Math.min(t.width,t.height),e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"size",P.prototype.size)))*e/2;return new mxPoint(t.getCenterX()-e,t.getCenterY()-e)},function(t,e){var n=Math.min(t.width,t.height);this.state.style.size=Math.max(0,Math.min(1,Math.min(Math.max(0,t.getCenterY()-e.y)/n*2,Math.max(0,t.getCenterX()-e.x)/n*2)))})]},note:function(t){return[H(t,["size"],function(t){var e=Math.max(0,Math.min(t.width,Math.min(t.height,parseFloat(mxUtils.getValue(this.state.style,"size",n.prototype.size)))));return new mxPoint(t.x+t.width-e,t.y+e)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(Math.min(t.width,t.x+t.width-e.x),Math.min(t.height,e.y-t.y))))})]},manualInput:function(t){var e=[H(t,["size"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",b.prototype.size)));return new mxPoint(t.x+t.width/4,t.y+3*e/4)},function(t,e){this.state.style.size=Math.round(Math.max(0,Math.min(t.height,4*(e.y-t.y)/3)))})];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(U(t)),e},dataStorage:function(t){return[H(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",M.prototype.size))));return new mxPoint(t.x+(1-e)*t.width,t.getCenterY())},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(t.x+t.width-e.x)/t.width))})]},callout:function(t){var e=[H(t,["size","position"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",p.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",p.prototype.position)));Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",p.prototype.base)));return new mxPoint(t.x+n*t.width,t.y+t.height-e)},function(t,e){Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",p.prototype.base)));this.state.style.size=Math.round(Math.max(0,Math.min(t.height,t.y+t.height-e.y))),this.state.style.position=Math.round(100*Math.max(0,Math.min(1,(e.x-t.x)/t.width)))/100}),H(t,["position2"],function(t){var e=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position2",p.prototype.position2)));return new mxPoint(t.x+e*t.width,t.y+t.height)},function(t,e){this.state.style.position2=Math.round(100*Math.max(0,Math.min(1,(e.x-t.x)/t.width)))/100}),H(t,["base"],function(t){var e=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"size",p.prototype.size))),n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",p.prototype.position))),i=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"base",p.prototype.base)));return new mxPoint(t.x+Math.min(t.width,n*t.width+i),t.y+t.height-e)},function(t,e){var n=Math.max(0,Math.min(1,mxUtils.getValue(this.state.style,"position",p.prototype.position)));this.state.style.base=Math.round(Math.max(0,Math.min(t.width,e.x-t.x-n*t.width)))})];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(U(t)),e},internalStorage:function(t){var e=[H(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",w.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",w.prototype.dy)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))})];return mxUtils.getValue(t.style,mxConstants.STYLE_ROUNDED,!1)&&e.push(U(t)),e},module:function(t){return[H(t,["jettyWidth","jettyHeight"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"jettyWidth",f.prototype.jettyWidth))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"jettyHeight",f.prototype.jettyHeight)));return new mxPoint(t.x+e/2,t.y+2*n)},function(t,e){this.state.style.jettyWidth=Math.round(2*Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.jettyHeight=Math.round(Math.max(0,Math.min(t.height,e.y-t.y))/2)})]},corner:function(t){return[H(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",T.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",T.prototype.dy)));return new mxPoint(t.x+e,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,Math.min(t.width,e.x-t.x))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))})]},tee:function(t){return[H(t,["dx","dy"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"dx",A.prototype.dx))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"dy",A.prototype.dy)));return new mxPoint(t.x+(t.width+e)/2,t.y+n)},function(t,e){this.state.style.dx=Math.round(Math.max(0,2*Math.min(t.width/2,e.x-t.x-t.width/2))),this.state.style.dy=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))})]},singleArrow:Rt(1),doubleArrow:Rt(.5),folder:function(t){return[H(t,["tabWidth","tabHeight"],function(t){var e=Math.max(0,Math.min(t.width,mxUtils.getValue(this.state.style,"tabWidth",i.prototype.tabWidth))),n=Math.max(0,Math.min(t.height,mxUtils.getValue(this.state.style,"tabHeight",i.prototype.tabHeight)));return mxUtils.getValue(this.state.style,"tabPosition",i.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(e=t.width-e),new mxPoint(t.x+e,t.y+n)},function(t,e){var n=Math.max(0,Math.min(t.width,e.x-t.x));mxUtils.getValue(this.state.style,"tabPosition",i.prototype.tabPosition)==mxConstants.ALIGN_RIGHT&&(n=t.width-n),this.state.style.tabWidth=Math.round(n),this.state.style.tabHeight=Math.round(Math.max(0,Math.min(t.height,e.y-t.y)))})]},document:function(t){return[H(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",o.prototype.size))));return new mxPoint(t.x+3*t.width/4,t.y+(1-e)*t.height)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(t.y+t.height-e.y)/t.height))})]},tape:function(t){return[H(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",s.prototype.size))));return new mxPoint(t.getCenterX(),t.y+e*t.height/2)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(e.y-t.y)/t.height*2))})]},offPageConnector:function(t){return[H(t,["size"],function(t){var e=Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.state.style,"size",I.prototype.size))));return new mxPoint(t.getCenterX(),t.y+(1-e)*t.height)},function(t,e){this.state.style.size=Math.max(0,Math.min(1,(t.y+t.height-e.y)/t.height))})]},step:Lt(c.prototype.size,!0,null,!0,c.prototype.fixedSize),hexagon:Lt(m.prototype.size,!0,.5,!0),curlyBracket:Lt(F.prototype.size,!1),display:Lt(O.prototype.size,!1),cube:Mt(1,t.prototype.size,!1),card:Mt(.5,l.prototype.size,!0),loopLimit:Mt(.5,R.prototype.size,!0),trapezoid:At(.5),parallelogram:At(1)},Graph.createHandle=H,Graph.handleFactory=q,mxVertexHandler.prototype.createCustomHandles=function(){if(this.graph.isCellRotatable(this.state.cell)){var t=this.state.style.shape,t=(null==mxCellRenderer.defaultShapes[t]&&null==mxStencilRegistry.getStencil(t)&&(t=mxConstants.SHAPE_RECTANGLE),q[t]);if(null!=(t=null==t&&null!=this.state.shape&&this.state.shape.isRoundable()?q[mxConstants.SHAPE_RECTANGLE]:t))return t(this.state)}return null},mxEdgeHandler.prototype.createCustomHandles=function(){var t=this.state.style.shape,t=(null==mxCellRenderer.defaultShapes[t]&&null==mxStencilRegistry.getStencil(t)&&(t=mxConstants.SHAPE_CONNECTOR),q[t]);return null!=t?t(this.state):null}):(Graph.createHandle=function(){},Graph.handleFactory={});var Ot=new mxPoint(1,0),Nt=new mxPoint(1,0),Ht=mxUtils.toRadians(-30),Ut=Math.cos(Ht),Ht=Math.sin(Ht),Ot=mxUtils.getRotatedPoint(Ot,Ut,Ht),Ut=mxUtils.toRadians(-150),Ht=Math.cos(Ut),Ut=Math.sin(Ut),Nt=mxUtils.getRotatedPoint(Nt,Ht,Ut),Gt=(mxEdgeStyle.IsometricConnector=function(t,e,n,i,l){var s,o=t.view,i=null!=i&&0<i.length?i[0]:null,r=t.absolutePoints,a=r[0],r=r[r.length-1],h=(null!=i&&(i=o.transformControlPoint(t,i)),null==a&&null!=e&&(a=new mxPoint(e.getCenterX(),e.getCenterY())),null==r&&null!=n&&(r=new mxPoint(n.getCenterX(),n.getCenterY())),Ot.x),d=Ot.y,u=Nt.x,p=Nt.y,c="horizontal"==mxUtils.getValue(t.style,"elbow","horizontal");function m(t,e,n){var t=t-s.x,e=e-s.y,i=(p*t-u*e)/(h*p-d*u),t=(d*t-h*e)/(d*u-h*p);s=c?(n&&(s=new mxPoint(s.x+h*i,s.y+d*i),l.push(s)),new mxPoint(s.x+u*t,s.y+p*t)):(n&&(s=new mxPoint(s.x+u*t,s.y+p*t),l.push(s)),new mxPoint(s.x+h*i,s.y+d*i)),l.push(s)}null!=r&&null!=a&&(s=a,m((i=null==i?new mxPoint(a.x+(r.x-a.x)/2,a.y+(r.y-a.y)/2):i).x,i.y,!0),m(r.x,r.y,!1))},mxStyleRegistry.putValue("isometricEdgeStyle",mxEdgeStyle.IsometricConnector),Graph.prototype.createEdgeHandler);Graph.prototype.createEdgeHandler=function(t,e){return e==mxEdgeStyle.IsometricConnector?((e=new mxElbowEdgeHandler(t)).snapToTerminals=!1,e):Gt.apply(this,arguments)},e.prototype.constraints=[],D.prototype.getConstraints=function(t,e,n){var i=[],l=Math.tan(mxUtils.toRadians(30)),s=(.5-l)/2,l=Math.min(e,n/(.5+l)),e=(e-l)/2,n=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n+.25*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+.5*l,n+l*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+l,n+.25*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+l,n+.75*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e+.5*l,n+(1-s)*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n+.75*l)),i},p.prototype.getConstraints=function(t,e,n){var i=[],l=(mxUtils.getValue(this.style,mxConstants.STYLE_ARCSIZE,mxConstants.LINE_ARCSIZE),Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size))))),s=(Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position",this.position)))),e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"position2",this.position2)))));Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"base",this.base))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.25,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.75,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n-l))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-l))),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},mxRectangleShape.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0)],mxEllipse.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(0,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(1,.5))],mxLabel.prototype.constraints=mxRectangleShape.prototype.constraints,mxImageShape.prototype.constraints=mxRectangleShape.prototype.constraints,mxSwimlane.prototype.constraints=mxRectangleShape.prototype.constraints,Z.prototype.constraints=mxRectangleShape.prototype.constraints,n.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},l.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),2*l<=e&&i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i},t.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,Math.min(n,parseFloat(mxUtils.getValue(this.style,"size",this.size)))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n+l))),i.push(new mxConnectionConstraint(new mxPoint(1,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,n-.5*l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-l))),i},i.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"tabWidth",this.tabWidth)))),s=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"tabHeight",this.tabHeight))));return"left"==mxUtils.getValue(this.style,"tabPosition",this.tabPosition)?(i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s))):(i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-.5*l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.25*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.75*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.25*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.75*(n-s)+s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n)),i.push(new mxConnectionConstraint(new mxPoint(.25,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(.75,1),!1)),i},w.prototype.constraints=mxRectangleShape.prototype.constraints,M.prototype.constraints=mxRectangleShape.prototype.constraints,gt.prototype.constraints=mxEllipse.prototype.constraints,xt.prototype.constraints=mxEllipse.prototype.constraints,yt.prototype.constraints=mxEllipse.prototype.constraints,St.prototype.constraints=mxEllipse.prototype.constraints,b.prototype.constraints=mxRectangleShape.prototype.constraints,bt.prototype.constraints=mxRectangleShape.prototype.constraints,O.prototype.getConstraints=function(t,e,n){var i=[],l=Math.min(e,n/2),s=Math.min(e-l,Math.max(0,parseFloat(mxUtils.getValue(this.style,"size",this.size)))*e);return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(s+e-l),0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1,null)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(s+e-l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,n)),i},f.prototype.getConstraints=function(t,e,n){var i=parseFloat(mxUtils.getValue(t,"jettyWidth",f.prototype.jettyWidth))/2,t=parseFloat(mxUtils.getValue(t,"jettyHeight",f.prototype.jettyHeight)),l=[new mxConnectionConstraint(new mxPoint(0,0),!1,null,i),new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(1,0),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(0,1),!1,null,i),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(1,1),!0),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(n-.5*t,1.5*t)),new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,Math.min(n-.5*t,3.5*t))];return 5*t<n&&l.push(new mxConnectionConstraint(new mxPoint(0,.75),!1,null,i)),8*t<n&&l.push(new mxConnectionConstraint(new mxPoint(0,.5),!1,null,i)),15*t<n&&l.push(new mxConnectionConstraint(new mxPoint(0,.25),!1,null,i)),l},R.prototype.constraints=mxRectangleShape.prototype.constraints,I.prototype.constraints=mxRectangleShape.prototype.constraints,mxCylinder.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.15,.05),!1),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.85,.05),!1),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.3),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.7),!0),new mxConnectionConstraint(new mxPoint(.15,.95),!1),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.85,.95),!1)],tt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.1),!1),new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.75,.1),!1),new mxConnectionConstraint(new mxPoint(0,1/3),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(1,1/3),!1),new mxConnectionConstraint(new mxPoint(1,1),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1)],C.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.3),!0),new mxConnectionConstraint(new mxPoint(0,.7),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],mxActor.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.25,.2),!1),new mxConnectionConstraint(new mxPoint(.1,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.75,.25),!1),new mxConnectionConstraint(new mxPoint(.9,.5),!1),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0)],k.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(.5,.25),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.5,.75),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],s.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.35),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.65),!1),new mxConnectionConstraint(new mxPoint(1,.35),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,.65),!1),new mxConnectionConstraint(new mxPoint(.25,1),!1),new mxConnectionConstraint(new mxPoint(.75,0),!1)],c.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(.25,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.75,1),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxLine.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],st.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.5,0),!1),new mxConnectionConstraint(new mxPoint(.5,1),!1)],mxDoubleEllipse.prototype.constraints=mxEllipse.prototype.constraints,mxRhombus.prototype.constraints=mxEllipse.prototype.constraints,mxTriangle.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0)],mxHexagon.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.375,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.625,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0),new mxConnectionConstraint(new mxPoint(.375,1),!0),new mxConnectionConstraint(new mxPoint(.5,1),!0),new mxConnectionConstraint(new mxPoint(.625,1),!0)],mxCloud.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,.25),!1),new mxConnectionConstraint(new mxPoint(.4,.1),!1),new mxConnectionConstraint(new mxPoint(.16,.55),!1),new mxConnectionConstraint(new mxPoint(.07,.4),!1),new mxConnectionConstraint(new mxPoint(.31,.8),!1),new mxConnectionConstraint(new mxPoint(.13,.77),!1),new mxConnectionConstraint(new mxPoint(.8,.8),!1),new mxConnectionConstraint(new mxPoint(.55,.95),!1),new mxConnectionConstraint(new mxPoint(.875,.5),!1),new mxConnectionConstraint(new mxPoint(.96,.7),!1),new mxConnectionConstraint(new mxPoint(.625,.2),!1),new mxConnectionConstraint(new mxPoint(.88,.25),!1)],h.prototype.constraints=mxRectangleShape.prototype.constraints,u.prototype.constraints=mxRectangleShape.prototype.constraints,o.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.25,0),!0),new mxConnectionConstraint(new mxPoint(.5,0),!0),new mxConnectionConstraint(new mxPoint(.75,0),!0),new mxConnectionConstraint(new mxPoint(0,.25),!0),new mxConnectionConstraint(new mxPoint(0,.5),!0),new mxConnectionConstraint(new mxPoint(0,.75),!0),new mxConnectionConstraint(new mxPoint(1,.25),!0),new mxConnectionConstraint(new mxPoint(1,.5),!0),new mxConnectionConstraint(new mxPoint(1,.75),!0)],mxArrow.prototype.constraints=null,A.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),s=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));Math.abs(e-l);return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.75*e+.25*l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),.5*(n+s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),n)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),.5*(n+s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.25*e-.25*l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,.5*s)),i},T.prototype.getConstraints=function(t,e,n){var i=[],l=Math.max(0,Math.min(e,parseFloat(mxUtils.getValue(this.style,"dx",this.dx)))),s=Math.max(0,Math.min(n,parseFloat(mxUtils.getValue(this.style,"dy",this.dy))));return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(1,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,.5*(n+s))),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,1),!1)),i},ut.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,0),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,1),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.5,.5),!1),new mxConnectionConstraint(new mxPoint(.75,.5),!1),new mxConnectionConstraint(new mxPoint(1,0),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(1,1),!1)],L.prototype.getConstraints=function(t,e,n){var i=[],l=n*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",this.arrowWidth)))),s=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",this.arrowSize)))),l=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-s),l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e-s),n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,n-l)),i},pt.prototype.getConstraints=function(t,e,n){var i=[],l=n*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowWidth",L.prototype.arrowWidth)))),s=e*Math.max(0,Math.min(1,parseFloat(mxUtils.getValue(this.style,"arrowSize",L.prototype.arrowSize)))),l=(n-l)/2;return i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*e,l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,0)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e-s,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*e,n-l)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,s,n)),i},P.prototype.getConstraints=function(t,e,n){var i=[],l=Math.min(n,e),l=Math.max(0,Math.min(l,l*parseFloat(mxUtils.getValue(this.style,"size",this.size)))),s=(n-l)/2,o=s+l,r=(e-l)/2,l=r+l;return i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,0)),i.push(new mxConnectionConstraint(new mxPoint(.5,0),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,0)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,n-.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,n)),i.push(new mxConnectionConstraint(new mxPoint(.5,1),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,n-.5*s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,l,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,s)),i.push(new mxConnectionConstraint(new mxPoint(1,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,e,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*(e+l),o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*r,s)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,s)),i.push(new mxConnectionConstraint(new mxPoint(0,.5),!1)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,0,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,.5*r,o)),i.push(new mxConnectionConstraint(new mxPoint(0,0),!1,null,r,s)),i},x.prototype.constraints=null,ct.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.25),!1),new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(0,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],mt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(.175,.25),!1),new mxConnectionConstraint(new mxPoint(.25,.5),!1),new mxConnectionConstraint(new mxPoint(.175,.75),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1),new mxConnectionConstraint(new mxPoint(.7,.1),!1),new mxConnectionConstraint(new mxPoint(.7,.9),!1)],rt.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)],at.prototype.constraints=[new mxConnectionConstraint(new mxPoint(0,.5),!1),new mxConnectionConstraint(new mxPoint(1,.5),!1)]}();var $jscomp=$jscomp||{};function Sidebar(t,e){this.editorUi=t,this.container=e,this.palettes={},this.taglist={},this.showTooltips=!0,this.graph=t.createTemporaryGraph(this.editorUi.editor.graph.getStylesheet()),this.graph.cellRenderer.minSvgStrokeWidth=this.minThumbStrokeWidth,this.graph.cellRenderer.antiAlias=this.thumbAntiAlias,this.graph.container.style.visibility="hidden",this.graph.foldingEnabled=!1,document.body.appendChild(this.graph.container),this.pointerUpHandler=mxUtils.bind(this,function(){this.showTooltips=!0}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerDownHandler=mxUtils.bind(this,function(){this.showTooltips=!1,this.hideTooltip()}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerMoveHandler=mxUtils.bind(this,function(t){for(t=mxEvent.getSource(t);null!=t;){if(t==this.currentElt)return;t=t.parentNode}this.hideTooltip()}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerOutHandler=mxUtils.bind(this,function(t){null==t.toElement&&null==t.relatedTarget&&this.hideTooltip()}),mxEvent.addListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),mxEvent.addListener(e,"scroll",mxUtils.bind(this,function(){this.showTooltips=!0,this.hideTooltip()})),this.init()}function Toolbar(t,e){this.editorUi=t,this.container=e,this.staticElements=[],this.init(),this.gestureHandler=mxUtils.bind(this,function(t){null!=this.editorUi.currentMenu&&mxEvent.getSource(t)!=this.editorUi.currentMenu.div&&this.hideMenu()}),mxEvent.addGestureListeners(document,this.gestureHandler)}$jscomp.scope={},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},$jscomp.getGlobal=function(t){return("undefined"==typeof window||window!==t)&&"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,n,i){if(e){for(n=$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var l=t[i];l in n||(n[l]={}),n=n[l]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&$jscomp.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},$jscomp.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},$jscomp.arrayIterator=function(t){return{next:$jscomp.arrayIteratorImpl(t)}},$jscomp.SYMBOL_PREFIX="jscomp_symbol_",$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){},$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)},$jscomp.Symbol=function(){var e=0;return function(t){return $jscomp.SYMBOL_PREFIX+(t||"")+e++}}(),$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var t=(t=$jscomp.global.Symbol.iterator)||($jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[t]&&$jscomp.defineProperty(Array.prototype,t,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}}),$jscomp.initSymbolIterator=function(){}},$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();$jscomp.global.Symbol.asyncIterator||($jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}},$jscomp.iteratorPrototype=function(t){return $jscomp.initSymbolIterator(),(t={next:t})[$jscomp.global.Symbol.iterator]=function(){return this},t},$jscomp.iteratorFromArray=function(e,n){$jscomp.initSymbolIterator(),e instanceof String&&(e+="");var i=0,l={next:function(){var t;return i<e.length?(t=i++,{value:n(t,e[t]),done:!1}):(l.next=function(){return{done:!0,value:void 0}},l.next())}};return l[Symbol.iterator]=function(){return l},l},$jscomp.polyfill("Array.prototype.entries",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t,e){return[t,e]})}},"es6","es3"),$jscomp.polyfill("Object.is",function(t){return t||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},"es6","es3"),$jscomp.polyfill("Array.prototype.includes",function(t){return t||function(t,e){var n=this,i=(n=n instanceof String?String(n):n).length;for((e=e||0)<0&&(e=Math.max(e+i,0));e<i;e++){var l=n[e];if(l===t||Object.is(l,t))return!0}return!1}},"es7","es3"),$jscomp.checkStringArgs=function(t,e,n){if(null==t)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return t+""},$jscomp.polyfill("String.prototype.includes",function(t){return t||function(t,e){return-1!==$jscomp.checkStringArgs(this,t,"includes").indexOf(t,e||0)}},"es6","es3"),$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return $jscomp.iteratorFromArray(this,function(t){return t})}},"es6","es3"),Sidebar.prototype.init=function(){var t=STENCIL_PATH;this.addSearchPalette(!0),this.addGeneralPalette(!0),this.addMiscPalette(!1),this.addAdvancedPalette(!1),this.addBasicPalette(t),this.setCurrentSearchEntryLibrary("arrows"),this.addStencilPalette("arrows",mxResources.get("arrows"),t+"/arrows.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.addUmlPalette(!1),this.setCurrentSearchEntryLibrary("flowchart"),this.addStencilPalette("flowchart","Flowchart",t+"/flowchart.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2"),this.setCurrentSearchEntryLibrary(),this.setCurrentSearchEntryLibrary("clipart"),this.addImagePalette("clipart",mxResources.get("clipart"),t+"/clipart/","_128x128.png","Earth_globe Empty_Folder Full_Folder Gear Lock Software Virus Email Database Router_Icon iPad iMac Laptop MacBook Monitor_Tower Printer Server_Tower Workstation Firewall_02 Wireless_Router_N Credit_Card Piggy_Bank Graph Safe Shopping_Cart Suit1 Suit2 Suit3 Pilot1 Worker1 Soldier1 Doctor1 Tech1 Security1 Telesales1".split(" "),null,{Wireless_Router_N:"wireless router switch wap wifi access point wlan",Router_Icon:"router switch"}),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.collapsedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDozNUQyRTJFNjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozNUQyRTJFNzZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MEUxNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MEUyNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhSMj6lrwAjcC1GyahV+dcZJgeIIFgA7":IMAGE_PATH+"/collapsed.gif",Sidebar.prototype.expandedImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAJmZmf///yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxREY3NzBERjZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxREY3NzBFMDZGNUYxMUU1QjZEOThCNDYxMDQ2MzNCQiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjFERjc3MERENkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjFERjc3MERFNkY1RjExRTVCNkQ5OEI0NjEwNDYzM0JCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/expanded.gif",Sidebar.prototype.searchImage=mxClient.IS_SVG?"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAEaSURBVHjabNGxS5VxFIfxz71XaWuQUJCG/gCHhgTD9VpEETg4aMOlQRp0EoezObgcd220KQiXmpretTAHQRBdojlQEJyukPdt+b1ywfvAGc7wnHP4nlZd1yKijQW8xzNc4Su+ZOYfQ3T6/f4YNvEJYzjELXp4VVXVz263+7cR2niBxAFeZ2YPi3iHR/gYERPDwhpOsd6sz8x/mfkNG3iOlWFhFj8y89J9KvzGXER0GuEaD42mgwHqUtoljbcRsTBCeINpfM/MgZLKPpaxFxGbOCqDXmILN7hoJrTKH+axhxmcYRxP0MIDnOBDZv5q1XUNIuJxifJp+UNV7t7BFM6xeic0RMQ4Bpl5W/ol7GISx/eEUUTECrbx+f8A8xhiZht9zsgAAAAASUVORK5CYII=":IMAGE_PATH+"/search.png",Sidebar.prototype.enableTooltips=!0,Sidebar.prototype.tooltipBorder=16,Sidebar.prototype.tooltipDelay=300,Sidebar.prototype.dropTargetDelay=200,Sidebar.prototype.gearImage=STENCIL_PATH+"/clipart/Gear_128x128.png",Sidebar.prototype.thumbWidth=42,Sidebar.prototype.thumbHeight=42,Sidebar.prototype.minThumbStrokeWidth=1,Sidebar.prototype.thumbAntiAlias=!1,Sidebar.prototype.thumbPadding=5<=document.documentMode?2:3,Sidebar.prototype.thumbBorder=2,"large"!=urlParams["sidebar-entries"]&&(Sidebar.prototype.thumbPadding=5<=document.documentMode?0:1,Sidebar.prototype.thumbBorder=1,Sidebar.prototype.thumbWidth=32,Sidebar.prototype.thumbHeight=30,Sidebar.prototype.minThumbStrokeWidth=1.3,Sidebar.prototype.thumbAntiAlias=!0),Sidebar.prototype.sidebarTitleSize=9,Sidebar.prototype.sidebarTitles=!1,Sidebar.prototype.tooltipTitles=!0,Sidebar.prototype.maxTooltipWidth=400,Sidebar.prototype.maxTooltipHeight=400,Sidebar.prototype.addStencilsToIndex=!0,Sidebar.prototype.defaultImageWidth=80,Sidebar.prototype.defaultImageHeight=80,Sidebar.prototype.getTooltipOffset=function(t,e){return document.getElementsByClassName("geHsplit"),e=e.height+2*this.tooltipBorder,new mxPoint(this.container.offsetWidth+this.editorUi.splitSize+10+this.editorUi.container.offsetLeft,Math.min(Math.max(document.body.clientHeight||0,document.documentElement.clientHeight)-e-20,Math.max(0,this.editorUi.container.offsetTop+this.container.offsetTop+t.offsetTop-this.container.scrollTop-e/2+16)))},Sidebar.prototype.showTooltip=function(s,o,r,a,h,d){var t;this.enableTooltips&&this.showTooltips&&this.currentElt!=s&&(null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),t=mxUtils.bind(this,function(){null==this.tooltip&&(this.tooltip=document.createElement("div"),this.tooltip.className="geSidebarTooltip",this.tooltip.style.zIndex=mxPopupMenu.prototype.zIndex-1,document.body.appendChild(this.tooltip),this.graph2=new Graph(this.tooltip,null,null,this.editorUi.editor.graph.getStylesheet()),this.graph2.resetViewOnRootChange=!1,this.graph2.foldingEnabled=!1,this.graph2.gridEnabled=!1,this.graph2.autoScroll=!1,this.graph2.setTooltips(!1),this.graph2.setConnectable(!1),this.graph2.setEnabled(!1),mxClient.IS_SVG||(this.graph2.view.canvas.style.position="relative")),this.graph2.model.clear(),this.graph2.view.setTranslate(this.tooltipBorder,this.tooltipBorder),this.graph2.view.scale=r>this.maxTooltipWidth||a>this.maxTooltipHeight?Math.round(100*Math.min(this.maxTooltipWidth/r,this.maxTooltipHeight/a))/100:1,this.tooltip.style.display="block",this.graph2.labelsVisible=null==d||d;var t,e=mxClient.NO_FO,n=(mxClient.NO_FO=Editor.prototype.originalNoForeignObject,this.graph2.cloneCells(o)),i=(this.editorUi.insertHandler(n,null,this.graph2.model),this.graph2.addCells(n),mxClient.NO_FO=e,n=(e=this.graph2.getGraphBounds()).width+2*this.tooltipBorder+4,e.height+2*this.tooltipBorder),l=(this.tooltip.style.overflow="visible",this.tooltip.style.width=n+"px",n);this.tooltipTitles&&null!=h&&0<h.length?(null==this.tooltipTitle?(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.style.borderTop="1px solid gray",this.tooltipTitle.style.textAlign="center",this.tooltipTitle.style.width="100%",this.tooltipTitle.style.overflow="hidden",this.tooltipTitle.style.position="absolute",this.tooltipTitle.style.paddingTop="6px",this.tooltipTitle.style.bottom="6px",this.tooltip.appendChild(this.tooltipTitle)):this.tooltipTitle.innerHTML="",this.tooltipTitle.style.display="",mxUtils.write(this.tooltipTitle,h),l=Math.min(this.maxTooltipWidth,Math.max(n,this.tooltipTitle.scrollWidth+4)),i+=t=this.tooltipTitle.offsetHeight+10,mxClient.IS_SVG?this.tooltipTitle.style.marginTop=2-t+"px":this.tooltipTitle.style.top=(i-=6)-t+"px"):null!=this.tooltipTitle&&null!=this.tooltipTitle.parentNode&&(this.tooltipTitle.style.display="none"),n<l&&(this.tooltip.style.width=l+"px"),this.tooltip.style.height=i+"px",n=-Math.round(e.x-this.tooltipBorder)+(n<l?(l-n)/2:0),i=-Math.round(e.y-this.tooltipBorder),e=(l=this.getTooltipOffset(s,e)).x,l=l.y,mxClient.IS_SVG?0!=n||0!=i?this.graph2.view.canvas.setAttribute("transform","translate("+n+","+i+")"):this.graph2.view.canvas.removeAttribute("transform"):(this.graph2.view.drawPane.style.left=n+"px",this.graph2.view.drawPane.style.top=i+"px"),this.tooltip.style.position="absolute",this.tooltip.style.left=e+"px",this.tooltip.style.top=l+"px",mxUtils.fit(this.tooltip)}),null!=this.tooltip&&"none"!=this.tooltip.style.display?t():this.thread=window.setTimeout(t,this.tooltipDelay),this.currentElt=s)},Sidebar.prototype.hideTooltip=function(){null!=this.thread&&(window.clearTimeout(this.thread),this.thread=null),null!=this.tooltip&&(this.tooltip.style.display="none",this.currentElt=null)},Sidebar.prototype.addDataEntry=function(t,e,n,i,l){return this.addEntry(t,mxUtils.bind(this,function(){return this.createVertexTemplateFromData(l,e,n,i)}))},Sidebar.prototype.addEntries=function(t){for(var e=0;e<t.length;e++)mxUtils.bind(this,function(e){var n=e.data,t=null!=e.title?e.title:"";null!=e.tags&&(t+=" "+e.tags),null!=n&&0<t.length?this.addEntry(t,mxUtils.bind(this,function(){n=this.editorUi.convertDataUri(n);var t="shape=image;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;";return"fixed"==e.aspect&&(t+="aspect=fixed;"),this.createVertexTemplate(t+"image="+n,e.w,e.h,"",e.title||"",!1,!1,!0)})):null!=e.xml&&0<t.length&&this.addEntry(t,mxUtils.bind(this,function(){var t=this.editorUi.stringToCells(Graph.decompress(e.xml));return this.createVertexTemplateFromCells(t,e.w,e.h,e.title||"",!0,!1,!0)}))})(t[e])},Sidebar.prototype.setCurrentSearchEntryLibrary=function(t,e){this.currentSearchEntryLibrary=null!=t?{id:t,lib:e}:null},Sidebar.prototype.addEntry=function(t,n){if(null!=this.taglist&&null!=t&&0<t.length){null!=this.currentSearchEntryLibrary&&(n.parentLibraries=[this.currentSearchEntryLibrary]),t=t.toLowerCase().replace(/[\/,\(\)]/g," ").split(" ");for(var e=[],i={},l=mxUtils.bind(this,function(t){var e;null!=t&&1<t.length&&("object"!=typeof(e=this.taglist[t])&&(e={entries:[],dict:new mxDictionary},this.taglist[t]=e),null==e.dict.get(n))&&(e.dict.put(n,n),e.entries.push(n))}),s=0;s<t.length;s++){l(t[s]),null==i[t[s]]&&(i[t[s]]=!0,e.push(t[s]));var o=t[s].replace(/\.*\d*$/,"");o!=t[s]&&null==i[o]&&(i[o]=!0,e.push(o))}for(s=0;s<e.length;s++)this.addEntryForTag(e[s],n)}return n},Sidebar.prototype.addEntryForTag=function(t,e){var n;null!=t&&1<t.length&&("object"!=typeof(n=this.taglist[t])&&(this.taglist[t]=n={entries:[]}),n.entries.push(e))},Sidebar.prototype.searchEntries=function(t,e,n,i,l){if(null!=this.taglist&&null!=t){var s=t.toLowerCase().split(" ");t=new mxDictionary,l=(n+1)*e;for(var o=[],r=0,a={},h=[],d=0;d<s.length;d++)if(0<s[d].length){for(var u in o=[],this.taglist)u.includes(s[d])&&o.push(this.taglist[u]);for(var p=0;p<o.length;p++)if(o[p]&&o[p].dict){for(var c=Object.keys(o[p].dict.map),m=0;m<c.length;m++)a[c[m]]=o[p].dict.map[c[m]];for(c=0;c<o[p].entries.length;c++)-1===h.indexOf(o[p].entries[c])&&h.push(o[p].entries[c])}if(p={dict:a,entries:h},c=new mxDictionary,null!=p){for(h=p.entries,o=[],m=0;m<h.length;m++)if(p=h[m],0==r==(null==t.get(p))&&(c.put(p,p),o.push(p),d==s.length-1)&&o.length==l)return void i(o.slice(n*e,l),l,!0,s)}else o=[];t=c,r++}u=o.length,i(o.slice(n*e,(n+1)*e),u,!1,s)}else i([],null,null,s)},Sidebar.prototype.filterTags=function(t){if(null==t)return null;t=t.split(" ");for(var e=[],n={},i=0;i<t.length;i++)null==n[t[i]]&&(n[t[i]]="1",e.push(t[i]));return e.join(" ")},Sidebar.prototype.cloneCell=function(t,e){return t=t.clone(),null!=e&&(t.value=e),t},Sidebar.prototype.showPopupMenuForEntry=function(t,e,n){},Sidebar.prototype.addSearchPalette=function(t){var o,e=document.createElement("div"),r=(e.style.visibility="hidden",this.container.appendChild(e),document.createElement("div")),n=(r.className="geSidebar",r.style.boxSizing="border-box",r.style.overflow="hidden",r.style.width="100%",r.style.padding="8px",r.style.paddingTop="14px",r.style.paddingBottom="0px",t||(r.style.display="none"),document.createElement("div")),i=(n.style.whiteSpace="nowrap",n.style.textOverflow="clip",n.style.paddingBottom="8px",n.style.cursor="default",document.createElement("input")),l=(i.setAttribute("placeholder",mxResources.get("searchShapes")),i.setAttribute("type","text"),i.style.fontSize="12px",i.style.overflow="hidden",i.style.boxSizing="border-box",i.style.border="solid 1px #d5d5d5",i.style.borderRadius="4px",i.style.width="100%",i.style.outline="none",i.style.padding="6px",i.style.paddingRight="20px",n.appendChild(i),document.createElement("img")),a=(l.setAttribute("src",Sidebar.prototype.searchImage),l.setAttribute("title",mxResources.get("search")),l.style.position="relative",l.style.left="-18px",l.style.top="1px",l.style.background="url('"+this.editorUi.editor.transparentImage+"')",n.appendChild(l),r.appendChild(n),document.createElement("center")),h=mxUtils.button(mxResources.get("moreResults"),function(){s()}),d=(h.style.display="none",h.style.lineHeight="normal",h.style.fontSize="12px",h.style.padding="6px 12px 6px 12px",h.style.marginTop="4px",h.style.marginBottom="8px",a.style.paddingTop="4px",a.style.paddingBottom="4px",a.appendChild(h),r.appendChild(a),""),u=!1,p=!1,c=0,m={},g=mxUtils.bind(this,function(){u=!1,this.currentSearch=null;for(var t=r.firstChild;null!=t;){var e=t.nextSibling;t!=n&&t!=a&&t.parentNode.removeChild(t),t=e}}),s=(mxEvent.addListener(l,"click",function(){l.getAttribute("src")==Dialog.prototype.closeImage&&(l.setAttribute("src",Sidebar.prototype.searchImage),l.setAttribute("title",mxResources.get("search")),h.style.display="none",d=i.value="",g()),i.focus()}),mxUtils.bind(this,function(){var s;o=4*Math.max(1,Math.floor(this.container.clientWidth/(this.thumbWidth+10))),this.hideTooltip(),""!=i.value?null==a.parentNode||(d!=i.value&&(g(),d=i.value,p=!(m={}),c=0),u)||p||(h.setAttribute("disabled","true"),h.style.display="",h.style.cursor="wait",h.innerHTML=mxResources.get("loading")+"...",u=!0,this.currentSearch=s={},this.searchEntries(d,o,c,mxUtils.bind(this,function(t,e,n,i){if(this.currentSearch==s){for(u=!1,c++,this.insertSearchHint(r,d,o,c,t=null!=t?t:[],e,n,i),0==t.length&&1==c&&(d=""),null!=a.parentNode&&a.parentNode.removeChild(a),e=0;e<t.length;e++)try{var l=t[e]();null==m[l.innerHTML]&&(m[l.innerHTML]="1",r.appendChild(l))}catch(t){}n?(h.removeAttribute("disabled"),h.innerHTML=mxResources.get("moreResults")):(h.innerHTML=mxResources.get("reset"),h.style.display="none",p=!0),h.style.cursor="",r.appendChild(a)}}),mxUtils.bind(this,function(){h.style.cursor=""}))):(g(),d=i.value="",m={},h.style.display="none",p=!1,i.focus())}));mxEvent.addListener(i,"keydown",mxUtils.bind(this,function(t){t&&setTimeout(function(){2<=i.value.length?s():(g(),d="",h.style.display="none",p=!1,i.focus())},100),13==t.keyCode&&(s(),mxEvent.consume(t))})),mxEvent.addListener(i,"keyup",mxUtils.bind(this,function(t){""==i.value?(l.setAttribute("src",Sidebar.prototype.searchImage),l.setAttribute("title",mxResources.get("search"))):(l.setAttribute("src",Dialog.prototype.closeImage),l.setAttribute("title",mxResources.get("reset"))),""==i.value?(p=!0,h.style.display="none"):i.value!=d?(h.style.display="none",p=!1):u||(h.style.display=p?"none":"")})),mxEvent.addListener(i,"mousedown",function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}),mxEvent.addListener(i,"selectstart",function(t){t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0}),(t=document.createElement("div")).appendChild(r),this.container.appendChild(t),this.palettes.search=[e,t]},Sidebar.prototype.insertSearchHint=function(t,e,n,i,l,s,o,r){0==l.length&&1==i&&((n=document.createElement("div")).className="geTitle",n.style.cssText="background-color:transparent;border-color:transparent;color:gray;padding:6px 0px 0px 0px !important;margin:4px 8px 4px 8px;text-align:center;cursor:default !important",mxUtils.write(n,mxResources.get("noResultsFor",[e])),t.appendChild(n))},Sidebar.prototype.addGeneralPalette=function(t){this.setCurrentSearchEntryLibrary("general","general");var e=[this.createVertexTemplateEntry("rounded=0;whiteSpace=wrap;html=1;",120,60,"","Rectangle",null,null,"rect rectangle box"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;",120,60,"","Rounded Rectangle",null,null,"rounded rect rectangle box"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;",40,20,"Text","Text",null,null,"text textbox textarea label"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;",190,120,"<h1>Heading</h1><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>","Textbox",null,null,"text textbox textarea"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",120,80,"","Ellipse",null,null,"oval ellipse state"),this.createVertexTemplateEntry("whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Square",null,null,"square"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Circle",null,null,"circle"),this.createVertexTemplateEntry("shape=process;whiteSpace=wrap;html=1;backgroundOutline=1;",120,60,"","Process",null,null,"process task"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;",80,80,"","Diamond",null,null,"diamond rhombus if condition decision conditional question test"),this.createVertexTemplateEntry("shape=parallelogram;perimeter=parallelogramPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Parallelogram"),this.createVertexTemplateEntry("shape=hexagon;perimeter=hexagonPerimeter2;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Hexagon",null,null,"hexagon preparation"),this.createVertexTemplateEntry("triangle;whiteSpace=wrap;html=1;",60,80,"","Triangle",null,null,"triangle logic inverter buffer"),this.createVertexTemplateEntry("shape=cylinder3;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;size=15;",60,80,"","Cylinder",null,null,"cylinder data database"),this.createVertexTemplateEntry("ellipse;shape=cloud;whiteSpace=wrap;html=1;",120,80,"","Cloud",null,null,"cloud network"),this.createVertexTemplateEntry("shape=document;whiteSpace=wrap;html=1;boundedLbl=1;",120,80,"","Document"),this.createVertexTemplateEntry("shape=internalStorage;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Internal Storage"),this.createVertexTemplateEntry("shape=cube;whiteSpace=wrap;html=1;boundedLbl=1;backgroundOutline=1;darkOpacity=0.05;darkOpacity2=0.1;",120,80,"","Cube"),this.createVertexTemplateEntry("shape=step;perimeter=stepPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,80,"","Step"),this.createVertexTemplateEntry("shape=trapezoid;perimeter=trapezoidPerimeter;whiteSpace=wrap;html=1;fixedSize=1;",120,60,"","Trapezoid"),this.createVertexTemplateEntry("shape=tape;whiteSpace=wrap;html=1;",120,100,"","Tape"),this.createVertexTemplateEntry("shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;",80,100,"","Note"),this.createVertexTemplateEntry("shape=card;whiteSpace=wrap;html=1;",80,100,"","Card"),this.createVertexTemplateEntry("shape=callout;whiteSpace=wrap;html=1;perimeter=calloutPerimeter;",120,80,"","Callout",null,null,"bubble chat thought speech message"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;outlineConnect=0;",30,60,"Actor","Actor",!1,null,"user person human stickman"),this.createVertexTemplateEntry("shape=xor;whiteSpace=wrap;html=1;",60,80,"","Or",null,null,"logic or"),this.createVertexTemplateEntry("shape=or;whiteSpace=wrap;html=1;",60,80,"","And",null,null,"logic and"),this.createVertexTemplateEntry("shape=dataStorage;whiteSpace=wrap;html=1;fixedSize=1;",100,80,"","Data Storage"),this.addEntry("curve",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,50,50),"curved=1;endArrow=classic;html=1;");return t.geometry.setTerminalPoint(new mxPoint(0,50),!0),t.geometry.setTerminalPoint(new mxPoint(50,0),!1),t.geometry.points=[new mxPoint(50,50),new mxPoint(0,0)],t.geometry.relative=!0,t.edge=!0,this.createEdgeTemplateFromCells([t],t.geometry.width,t.geometry.height,"Curve")})),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;startArrow=classic;html=1;",100,100,"","Bidirectional Arrow",null,"line lines connector connectors connection connections arrow arrows bidirectional"),this.createEdgeTemplateEntry("shape=flexArrow;endArrow=classic;html=1;",50,50,"","Arrow",null,"line lines connector connectors connection connections arrow arrows directional directed"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;",50,50,"","Dashed Line",null,"line lines connector connectors connection connections arrow arrows dashed undirected no"),this.createEdgeTemplateEntry("endArrow=none;dashed=1;html=1;dashPattern=1 3;strokeWidth=2;",50,50,"","Dotted Line",null,"line lines connector connectors connection connections arrow arrows dotted undirected no"),this.createEdgeTemplateEntry("endArrow=none;html=1;",50,50,"","Line",null,"line lines connector connectors connection connections arrow arrows simple undirected plain blank no"),this.createEdgeTemplateEntry("endArrow=classic;startArrow=classic;html=1;",50,50,"","Bidirectional Connector",null,"line lines connector connectors connection connections arrow arrows bidirectional"),this.createEdgeTemplateEntry("endArrow=classic;html=1;",50,50,"","Directional Connector",null,"line lines connector connectors connection connections arrow arrows directional directed"),this.createEdgeTemplateEntry("shape=link;html=1;",100,0,"","Link",null,"line lines connector connectors connection connections arrow arrows link"),this.addEntry("line lines connector connectors connection connections arrow arrows edge title",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(100,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],100,0,"Connector with Label")})),this.addEntry("line lines connector connectors connection connections arrow arrows edge title multiplicity",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],160,0,"Connector with 2 Labels")})),this.addEntry("line lines connector connectors connection connections arrow arrows edge title multiplicity",mxUtils.bind(this,function(){var t=new mxCell("Label",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("Label",new mxGeometry(0,0,0,0),"edgeLabel;resizable=0;html=1;align=center;verticalAlign=middle;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("Source",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("Target",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),this.createEdgeTemplateFromCells([t],160,0,"Connector with 3 Labels")})),this.addEntry("line lines connector connectors connection connections arrow arrows edge shape symbol message mail email",mxUtils.bind(this,function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=classic;html=1;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(100,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("",new mxGeometry(0,0,20,14),"shape=message;html=1;outlineConnect=0;"));return e.geometry.relative=!0,e.vertex=!0,e.geometry.offset=new mxPoint(-10,-7),t.insert(e),this.createEdgeTemplateFromCells([t],100,0,"Connector with Symbol")}))];this.addPaletteFunctions("general",mxResources.get("general"),null==t||t,e),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addMiscPalette=function(t){var n=this,e=(this.setCurrentSearchEntryLibrary("general","misc"),[this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;fontSize=24;fontStyle=1;verticalAlign=middle;align=center;",100,40,"Title","Title",null,null,"text heading title"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ul><li>Value 1</li><li>Value 2</li><li>Value 3</li></ul>","Unordered List"),this.createVertexTemplateEntry("text;strokeColor=none;fillColor=none;html=1;whiteSpace=wrap;verticalAlign=middle;overflow=hidden;",100,80,"<ol><li>Value 1</li><li>Value 2</li><li>Value 3</li></ol>","Ordered List"),this.addDataEntry("table",180,120,"Table 1","7ZjJTsMwEIafJleUhZZybVgucAFewDTT2pLjiewpaXl6xolLVQFqWBJArZRKns2xv5H7y4myvFxdW1HJWyxAR9lllOUWkdpRucpB6yiNVRFlF1GaxvyL0qsPokkTjSthwVCXgrQteBJ6Ca2ndTha6+BwUlR+SOLRu6aSSl7mRcLDWiqC+0rMfLzmTbDPkbB0r569K2Z7hoaEMmBDzQy1FpVTzWRthlS6uBFrXNLmNRtrGpYHlmD14RYbV9jfNWAJZNecUquCZMiYtBhiCWohN2WBTSxc61i81m6J8SBAex9g1h0gL5mU0HcwI2EWXVi+ZVVYrB6EXQAFR4XKENjLJ6bhgm+utM5Ro0du0PgXEVYhqGG+qX1EIiyDYQOY10kbKKMpP4wpj09G0Yh3k7OdbG1+fLqlHI0jy432c4BwVIPr3MD0aw08/YH+nfbbP2N89rZ/324NMsq5xppNqYoCTFfG2V7G454Qjw4c8WoX7wDEx0fiO3/wAyA/O+pAbzqw3m3TELIwOZQTdPZrsnB+4IiHl4UkPiIfWheS5CgMfQvDZEBhSD5xY/7fZyjZf63u7dD0fKv++5B/QRwO5ia8h3mP6sDm9tNeE9v58vcC"),this.addDataEntry("table",180,120,"Table 2","7ZjBbqMwEIafhmuFISTptbTbS/eyrfbuBie2ZDzITEqyT79jMMlGWVTUBlqVSkTyjGeM+SbDLxPEab67t7yQPyETOojvgji1ANiM8l0qtA6iUGVBfBtEUUi/IPrRMcvq2bDgVhjskxA1CS9cb0XjaRwl7rV3lJIXboj82bluJOa0zVtGw0oqFI8FX7n5ih6CfCVyi4/qj3OFZK/AIFdGWJ+zAq15Uap6sSZCKp098D1ssb1Na7nobW4eKL/00Raqf02/f2FR7DoZ1C4P4F5ALtDuKaRSGUofsWw4hVKojWzTPLyQl41jc8g9IqWBp/p/wnF/wrRlVFz/EivkZtMH9jnMzELxxO1GoHcUoAwKe/dCNFpoa6V1ChpcTQwYdyOEwk9qsW5znwER8ha8B3NYtIaS3NBFmNLwKgkSepqUbHa06XLhFlMwJVr6J7g1BC+xEiX2LWD0tgLOLlC/2Vn9ftfDKGQXLaQxLvpYyHfXCIjpWkNFplRZJkxf2PGrsOcDsU46WV+2aT49690p5xHQzzvRx5NEf3j3j8B+8S0Rg0nE/rRMYyjGsrOVZl+0lRYfphjXnayTabEeXzFY2Ml+Pkn2Y0oGY9+aMbRmLEfUDHZ+EG+bafFFm4m9fiofrHvOD+Ut7eXEaH+AbnSfqK+nCX9A4SDz+DGxnjv51vgX"),this.addDataEntry("table title",180,120,"Table with Title 1","7ZhRb6MwDMc/Da8nAmPdvZbu9nJ7WfcFMnAhUohR4o12n34OpKumrmqlDXa6VqJS/Lcdkp8bWSFK82Z9Z2Vb32MJOkpvozS3iDSMmnUOWkdJrMooXURJEvMvSv4c8IreG7fSgqFTEpIh4UXqZxiUR/mkYVAdbXRQXS1bP6Tem85ranitC8HDrlYEy1YW3t/xTlhzJC0t1auX0piFAg1JZcCGpAK1lq1T/WyLPqJWuvwrN/hM2/dsrfmKs5dhMT5balUZHhe8Sz/lPOwCLMH6IIleChjuABsgu+GQTpVUh4ibgVZcg6rqbVoWROkGoXrP3YHlQWD7Oed0j/NBxLxkUlI/QEHSVKfQ3odZWmwfpa2AgtCi8qhuX5iGC9pKaZ2jRl8Tg8a/iLANTg2rbe4TEmETDBvAvE/aQ8nm/DCmPP6VRRnvJmdb7Gx+fLilHI0jy/8EPwdIRx04OrWAyecF3ATEoUzH6nn1DeW8GrecxvjoXTm/XClksiuNHZu1KkswpyJPj56Z65EQZ2eOeP0R7wTEry/E+4RkOuSzS1sYuy3MJmwLN+dygmY/1hZ+nzni6duCiC/Ip+4LQlwaw9iNQYgJO4PYv2j/p4dIHL9mj3ZqRr5l//uQf6A7nM1V+AjzEdsDm7svgr3vwwfDNw=="),this.addDataEntry("table title",180,150,"Table with Title 2","7Zhdb5swFIZ/DbcTHyVrbiFdb7Kbptq9Cw5YMj7IPi1kv37HYJK1FDWbQoOmSUSyz4dt3id+L/CitGrvNavL75Bz6UV3XpRqAOxHVZtyKb3QF7kXbbww9Onnhd8mskGX9WumucJzGsK+4YXJZ95HHtmT5H3U4EG6qClZbYfYZaOkxIrOuglo2JQC+a5mmc039CYUM8g07sRPG4p8CmSgkAnFtWvKQEpWG9GttukqSiHzLTvAMw77DLNkL1qeP0BjXLeGZkuLGde6p8V37qw2zaQoFI0zEsHumLiX5Bp5OylUF3Iq3XOoOOoDlTQix9JV3PZi+iUXRTm0xS7ITB8ojr0n3WngpH8fQzTCMEmAjoyCyQeeIVPFOTDGWuca6kemC44uUIOwUt29kBpHVYWUKUiwyBQouxFC7ZKS74feJ0CEaiDjhDku2okSJ/SQTKn/JfZiepuU5sFpTo8t15iCMqjpj2LX4Mxgww2eCzB8H+DBSewwfcQzugDOmxHO4KI8lbLVJ55/jMp/gwpI2r2EhqalyHOuztU8+vDS3MykcTzS+Ec3DP2Faz24U1+bGNpQqGLbd65mgNG+BvH7BZgLzupf8LO34JblZ6tP9LOvI5yX5bkcP1tdzc9uJ/1s4VrP52cTMK7gZ+v/fja3n60/0c8Cf8QzWvYl++s7tL6aoQXBpKMtXOz5HG2CxvyORtPTR4Uu9+qbwy8="),this.addDataEntry("crossfunctional cross-functional cross functional flowchart swimlane table",400,400,"Cross-Functional Flowchart","7ZhRb5swEMc/DY+bMCRt97jQpi+tVC2fwINbbMnYyD4C6aefjaHpBrTRlNCoTALJPp9t+P25O5kgTvL6XtOCPaoMRBDfBXGilULfyusEhAiikGdBfBtEUWjvIFqPjJJmNCyoBonHTIj8hB0VJXiL3dyYL+tSpsiVpM55LVSVMqrROxvci9bZMFq4JtKfzrRKGRfZA92rEjtr11tpVT1wCcYOhM5ViTKXry0G7RYb/uwWXDgDw9wCuSW2WTGOsClo6gYri8uvIGhheLN1s4KGtNSG7+AHGL+Os0JdUJm1nUJxiaDvdhZQt/EvJXHTvpTbjAq+lbadgnO1hhYSaIR6FHRjainfg8oB9d66VDxD5j0WoRcjZMC3DP8yUuMN25e5B91so5VuWMa4J+P3FJW2JtLXrOK5oNLJxZTmz/blqXhNp3mO5cpe9smS8OsyWNp5ie2TQ99ezl1joqRBTXmDAajBCgxejprHKBcNK7fvBPIz3hOSRCcQctET8olRA+8JmSopIW2j8GOD6Sji8TDxepT4C9yTE1+OEo/mQ5xcTYn8ahR5PB/k0c2UyK9HC8SbX/mnLBAnqAlD8XK+onDTE+/fw+TiQF9fTin4Nl/O0xYAEs6X9LR5n5Ae6S7xv1lr/yf+4cQ/pN75Ej/pH88/UZyQkRPzR6R+0j9Bz4f0xMm/f8adD+qzZn/bPfw5bMb++LH4Gw=="),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=#ffffff;overflow=fill;rounded=0;",280,160,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr style="background-color:#A7C942;color:#ffffff;border:1px solid #98bf21;"><th align="left">Title 1</th><th align="left">Title 2</th><th align="left">Title 3</th></tr><tr style="border:1px solid #98bf21;"><td>Value 1</td><td>Value 2</td><td>Value 3</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 4</td><td>Value 5</td><td>Value 6</td></tr><tr style="border:1px solid #98bf21;"><td>Value 7</td><td>Value 8</td><td>Value 9</td></tr><tr style="background-color:#EAF2D3;border:1px solid #98bf21;"><td>Value 10</td><td>Value 11</td><td>Value 12</td></tr></table>',"HTML Table 1"),this.createVertexTemplateEntry("text;html=1;strokeColor=#c0c0c0;fillColor=none;overflow=fill;",180,140,'<table border="0" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 2"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",180,140,'<table border="1" width="100%" height="100%" style="width:100%;height:100%;border-collapse:collapse;"><tr><td align="center">Value 1</td><td align="center">Value 2</td><td align="center">Value 3</td></tr><tr><td align="center">Value 4</td><td align="center">Value 5</td><td align="center">Value 6</td></tr><tr><td align="center">Value 7</td><td align="center">Value 8</td><td align="center">Value 9</td></tr></table>',"HTML Table 3"),this.createVertexTemplateEntry("text;html=1;strokeColor=none;fillColor=none;overflow=fill;",160,140,'<table border="1" width="100%" height="100%" cellpadding="4" style="width:100%;height:100%;border-collapse:collapse;"><tr><th align="center"><b>Title</b></th></tr><tr><td align="center">Section 1.1\nSection 1.2\nSection 1.3</td></tr><tr><td align="center">Section 2.1\nSection 2.2\nSection 2.3</td></tr></table>',"HTML Table 4"),this.addEntry("link hyperlink",mxUtils.bind(this,function(){var t=new mxCell("Link",new mxGeometry(0,0,60,40),"text;html=1;strokeColor=none;fillColor=none;whiteSpace=wrap;align=center;verticalAlign=middle;fontColor=#0000EE;fontStyle=4;");return t.vertex=!0,this.graph.setLinkForCell(t,"https://www.draw.io"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Link")})),this.addEntry("timestamp date time text label",mxUtils.bind(this,function(){var t=new mxCell("%date{ddd mmm dd yyyy HH:MM:ss}%",new mxGeometry(0,0,160,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return t.vertex=!0,this.graph.setAttributeForCell(t,"placeholders","1"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Timestamp")})),this.addEntry("variable placeholder metadata hello world text label",mxUtils.bind(this,function(){var t=new mxCell("%name% Text",new mxGeometry(0,0,80,20),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;overflow=hidden;");return t.vertex=!0,this.graph.setAttributeForCell(t,"placeholders","1"),this.graph.setAttributeForCell(t,"name","Variable"),this.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Variable")})),this.createVertexTemplateEntry("shape=ext;double=1;rounded=0;whiteSpace=wrap;html=1;",120,80,"","Double Rectangle",null,null,"rect rectangle box double"),this.createVertexTemplateEntry("shape=ext;double=1;rounded=1;whiteSpace=wrap;html=1;",120,80,"","Double Rounded Rectangle",null,null,"rounded rect rectangle box double"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;",100,60,"","Double Ellipse",null,null,"oval ellipse start end state double"),this.createVertexTemplateEntry("shape=ext;double=1;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Square",null,null,"double square"),this.createVertexTemplateEntry("ellipse;shape=doubleEllipse;whiteSpace=wrap;html=1;aspect=fixed;",80,80,"","Double Circle",null,null,"double circle"),this.createVertexTemplateEntry("rounded=1;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=4;hachureGap=8;hachureAngle=45;fillColor=#1ba1e2;sketch=1;",120,60,"","Rectangle Sketch",!0,null,"rectangle rect box text sketch comic retro"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=2;hachureGap=8;fillColor=#990000;fillStyle=dots;sketch=1;",120,60,"","Ellipse Sketch",!0,null,"ellipse oval sketch comic retro"),this.createVertexTemplateEntry("rhombus;whiteSpace=wrap;html=1;strokeWidth=2;fillWeight=-1;hachureGap=8;fillStyle=cross-hatch;fillColor=#006600;sketch=1;",120,60,"","Diamond Sketch",!0,null,"diamond sketch comic retro"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;shape=isoCube2;backgroundOutline=1;isoAngle=15;",90,100,"","Isometric Cube",!0,null,"cube box iso isometric"),this.createVertexTemplateEntry("html=1;whiteSpace=wrap;aspect=fixed;shape=isoRectangle;",150,90,"","Isometric Square",!0,null,"rectangle rect box iso isometric"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;",50,100,"","Isometric Edge 1"),this.createEdgeTemplateEntry("edgeStyle=isometricEdgeStyle;endArrow=none;html=1;elbow=vertical;",50,100,"","Isometric Edge 2"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;",20,120,"","Left Curly Bracket"),this.createVertexTemplateEntry("shape=curlyBracket;whiteSpace=wrap;html=1;rounded=1;flipH=1;",20,120,"","Right Curly Bracket"),this.createVertexTemplateEntry("line;strokeWidth=2;html=1;",160,10,"","Horizontal Line"),this.createVertexTemplateEntry("line;strokeWidth=2;direction=south;html=1;",10,160,"","Vertical Line"),this.createVertexTemplateEntry("line;strokeWidth=4;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",160,10,"","Horizontal Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("line;strokeWidth=4;direction=south;html=1;perimeter=backbonePerimeter;points=[];outlineConnect=0;",10,160,"","Vertical Backbone",!1,null,"backbone bus network"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;",120,20,"","Horizontal Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=crossbar;whiteSpace=wrap;html=1;rounded=1;direction=south;",20,120,"","Vertical Crossbar",!1,null,"crossbar distance measure dimension unit"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=1;aspect=fixed;image="+this.gearImage,52,61,"","Image (Fixed Aspect)",!1,null,"fixed image icon symbol"),this.createVertexTemplateEntry("shape=image;html=1;verticalLabelPosition=bottom;verticalAlign=top;imageAspect=0;image="+this.gearImage,50,60,"","Image (Variable Aspect)",!1,null,"strechted image icon symbol"),this.createVertexTemplateEntry("icon;html=1;image="+this.gearImage,60,60,"Icon","Icon",!1,null,"icon image symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;image="+this.gearImage,140,60,"Label","Label 1",null,null,"label image icon symbol"),this.createVertexTemplateEntry("label;whiteSpace=wrap;html=1;align=center;verticalAlign=bottom;spacingLeft=0;spacingBottom=4;imageAlign=center;imageVerticalAlign=top;image="+this.gearImage,120,80,"Label","Label 2",null,null,"label image icon symbol"),this.addEntry("shape group container",function(){var t=new mxCell("Label",new mxGeometry(0,0,160,70),"html=1;whiteSpace=wrap;container=1;recursiveResize=0;collapsible=0;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(20,20,20,30),"triangle;html=1;whiteSpace=wrap;"));return e.vertex=!0,t.insert(e),n.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Shape Group")}),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;left=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;top=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=1;right=1;left=1;top=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=waypoint;sketch=0;size=6;pointerEvents=1;points=[];fillColor=none;resizable=0;rotatable=0;perimeter=centerPerimeter;snapToPoint=1;",40,40,"","Waypoint"),this.createEdgeTemplateEntry("edgeStyle=segmentEdgeStyle;endArrow=classic;html=1;",50,50,"","Manual Line",null,"line lines connector connectors connection connections arrow arrows manual"),this.createEdgeTemplateEntry("shape=filledEdge;rounded=0;fixDash=1;endArrow=none;strokeWidth=10;fillColor=#ffffff;edgeStyle=orthogonalEdgeStyle;",60,40,"","Filled Edge"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=horizontal;endArrow=classic;html=1;",50,50,"","Horizontal Elbow",null,"line lines connector connectors connection connections arrow arrows elbow horizontal"),this.createEdgeTemplateEntry("edgeStyle=elbowEdgeStyle;elbow=vertical;endArrow=classic;html=1;",50,50,"","Vertical Elbow",null,"line lines connector connectors connection connections arrow arrows elbow vertical")]);this.addPaletteFunctions("misc",mxResources.get("misc"),null==t||t,e),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addAdvancedPalette=function(t){this.setCurrentSearchEntryLibrary("general","advanced"),this.addPaletteFunctions("advanced",mxResources.get("advanced"),null!=t&&t,this.createAdvancedShapes()),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.createAdvancedShapes=function(){var e=this,n=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return n.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return e.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var t=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(e.cloneCell(n,"Item 1")),t.insert(e.cloneCell(n,"Item 2")),t.insert(e.cloneCell(n,"Item 3")),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return e.createVertexTemplateFromCells([e.cloneCell(n,"List Item")],n.geometry.width,n.geometry.height,"List Item")})]},Sidebar.prototype.createAdvancedShapes=function(){var e=this,n=new mxCell("List Item",new mxGeometry(0,0,60,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;");return n.vertex=!0,[this.createVertexTemplateEntry("shape=tapeData;whiteSpace=wrap;html=1;perimeter=ellipsePerimeter;",80,80,"","Tape Data"),this.createVertexTemplateEntry("shape=manualInput;whiteSpace=wrap;html=1;",80,80,"","Manual Input"),this.createVertexTemplateEntry("shape=loopLimit;whiteSpace=wrap;html=1;",100,80,"","Loop Limit"),this.createVertexTemplateEntry("shape=offPageConnector;whiteSpace=wrap;html=1;",80,80,"","Off Page Connector"),this.createVertexTemplateEntry("shape=delay;whiteSpace=wrap;html=1;",80,40,"","Delay"),this.createVertexTemplateEntry("shape=display;whiteSpace=wrap;html=1;",80,40,"","Display"),this.createVertexTemplateEntry("shape=singleArrow;direction=west;whiteSpace=wrap;html=1;",100,60,"","Arrow Left"),this.createVertexTemplateEntry("shape=singleArrow;whiteSpace=wrap;html=1;",100,60,"","Arrow Right"),this.createVertexTemplateEntry("shape=singleArrow;direction=north;whiteSpace=wrap;html=1;",60,100,"","Arrow Up"),this.createVertexTemplateEntry("shape=singleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Arrow Down"),this.createVertexTemplateEntry("shape=doubleArrow;whiteSpace=wrap;html=1;",100,60,"","Double Arrow"),this.createVertexTemplateEntry("shape=doubleArrow;direction=south;whiteSpace=wrap;html=1;",60,100,"","Double Arrow Vertical",null,null,"double arrow"),this.createVertexTemplateEntry("shape=actor;whiteSpace=wrap;html=1;",40,60,"","User",null,null,"user person human"),this.createVertexTemplateEntry("shape=cross;whiteSpace=wrap;html=1;",80,80,"","Cross"),this.createVertexTemplateEntry("shape=corner;whiteSpace=wrap;html=1;",80,80,"","Corner"),this.createVertexTemplateEntry("shape=tee;whiteSpace=wrap;html=1;",80,80,"","Tee"),this.createVertexTemplateEntry("shape=datastore;whiteSpace=wrap;html=1;",60,60,"","Data Store",null,null,"data store cylinder database"),this.createVertexTemplateEntry("shape=orEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Or",null,null,"or circle oval ellipse"),this.createVertexTemplateEntry("shape=sumEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Sum",null,null,"sum circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with horizontal divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=lineEllipse;line=vertical;perimeter=ellipsePerimeter;whiteSpace=wrap;html=1;backgroundOutline=1;",80,80,"","Ellipse with vertical divider",null,null,"circle oval ellipse"),this.createVertexTemplateEntry("shape=sortShape;perimeter=rhombusPerimeter;whiteSpace=wrap;html=1;",80,80,"","Sort",null,null,"sort"),this.createVertexTemplateEntry("shape=collate;whiteSpace=wrap;html=1;",80,80,"","Collate",null,null,"collate"),this.createVertexTemplateEntry("shape=switch;whiteSpace=wrap;html=1;",60,60,"","Switch",null,null,"switch router"),this.addEntry("process bar",function(){return e.createVertexTemplateFromData("zZXRaoMwFIafJpcDjbNrb2233rRQ8AkyPdPQaCRJV+3T7yTG2rUVBoOtgpDzn/xJzncCIdGyateKNeVW5iBI9EqipZLS9KOqXYIQhAY8J9GKUBrgT+jbRDZ02aBhCmrzEwPtDZ9MHKBXdkpmoDWKCVN9VptO+Kw+8kqwGqMkK7nIN6yTB7uTNizbD1FSSsVPsjYMC1qFKHxwIZZSSIVxLZ1/nJNar5+oQPMT7IYCrqUta1ENzuqGaeOFTArBGs3f3Vmtoo2Se7ja1h00kSoHK4bBIKUNy3hdoPYU0mF91i9mT8EEL2ocZ3gKa00ayWujLZY4IfHKFonVDLsRGgXuQ90zBmWgneyTk3yT1iArMKrDKUeem9L3ajHrbSXwohxsQd/ggOleKM7ese048J2/fwuim1uQGmhQCW8vQMkacP3GCQgBFMftHEsr7cYYe95CnmKTPMFbYD8CQ++DGQy+/M5X4ku5wHYmdIktfvk9tecpavThqS3m/0YtnqIWPTy1cD77K2wYjo+Ay317I74A",296,100,"Process Bar")}),this.createVertexTemplateEntry("swimlane;",200,200,"Container","Container",null,null,"container swimlane lane pool group"),this.addEntry("list group erd table",function(){var t=new mxCell("List",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(e.cloneCell(n,"Item 1")),t.insert(e.cloneCell(n,"Item 2")),t.insert(e.cloneCell(n,"Item 3")),e.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"List")}),this.addEntry("list item entry value group erd table",function(){return e.createVertexTemplateFromCells([e.cloneCell(n,"List Item")],n.geometry.width,n.geometry.height,"List Item")})]},Sidebar.prototype.addBasicPalette=function(t){this.setCurrentSearchEntryLibrary("basic"),this.addStencilPalette("basic",mxResources.get("basic"),t+"/basic.xml",";whiteSpace=wrap;html=1;fillColor=#ffffff;strokeColor=#000000;strokeWidth=2",null,null,null,null,[this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;bottom=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;right=0;top=0;bottom=0;fillColor=none;routingCenterX=-0.5;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;bottom=0;right=0;fillColor=none;",120,60,"","Partial Rectangle"),this.createVertexTemplateEntry("shape=partialRectangle;whiteSpace=wrap;html=1;top=0;left=0;fillColor=none;",120,60,"","Partial Rectangle")]),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.addUmlPalette=function(t){var i=this,e=new mxCell("+ field: type",new mxGeometry(0,0,100,26),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=top;spacingLeft=4;spacingRight=4;overflow=hidden;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;"),n=(e.vertex=!0,new mxCell("",new mxGeometry(0,0,40,8),"line;strokeWidth=1;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=3;spacingRight=3;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;")),l=(n.vertex=!0,this.setCurrentSearchEntryLibrary("uml"),[this.createVertexTemplateEntry("html=1;",110,50,"Object","Object",null,null,"uml static class object instance"),this.createVertexTemplateEntry("html=1;",110,50,"&laquo;interface&raquo;<br><b>Name</b>","Interface",null,null,"uml static class interface object instance annotated annotation"),this.addEntry("uml static class object instance",function(){var t=new mxCell("Classname",new mxGeometry(0,0,160,90),"swimlane;fontStyle=1;align=center;verticalAlign=top;childLayout=stackLayout;horizontal=1;startSize=26;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(e.clone()),t.insert(n.clone()),t.insert(i.cloneCell(e,"+ method(type): type")),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Class")}),this.addEntry("uml static class section subsection",function(){var t=new mxCell("Classname",new mxGeometry(0,0,140,110),"swimlane;fontStyle=0;childLayout=stackLayout;horizontal=1;startSize=26;fillColor=none;horizontalStack=0;resizeParent=1;resizeParentMax=0;resizeLast=0;collapsible=1;marginBottom=0;");return t.vertex=!0,t.insert(e.clone()),t.insert(e.clone()),t.insert(e.clone()),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Class 2")}),this.addEntry("uml static class item member method function variable field attribute label",function(){return i.createVertexTemplateFromCells([i.cloneCell(e,"+ item: attribute")],e.geometry.width,e.geometry.height,"Item 1")}),this.addEntry("uml static class item member method function variable field attribute label",function(){var t=new mxCell("item: attribute",new mxGeometry(0,0,120,e.geometry.height),"label;fontStyle=0;strokeColor=none;fillColor=none;align=left;verticalAlign=top;overflow=hidden;spacingLeft=28;spacingRight=4;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;imageWidth=16;imageHeight=16;image="+i.gearImage);return t.vertex=!0,i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Item 2")}),this.addEntry("uml static class divider hline line separator",function(){return i.createVertexTemplateFromCells([n.clone()],n.geometry.width,n.geometry.height,"Divider")}),this.addEntry("uml static class spacer space gap separator",function(){var t=new mxCell("",new mxGeometry(0,0,20,14),"text;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;spacingTop=-1;spacingLeft=4;spacingRight=4;rotatable=0;labelPosition=right;points=[];portConstraint=eastwest;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Spacer")}),this.createVertexTemplateEntry("text;align=center;fontStyle=1;verticalAlign=middle;spacingLeft=3;spacingRight=3;strokeColor=none;rotatable=0;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;",80,26,"Title","Title",null,null,"uml static class title label"),this.addEntry("uml static class component",function(){var t=new mxCell("&laquo;Annotation&raquo;<br/><b>Component</b>",new mxGeometry(0,0,180,90),"html=1;dropTarget=0;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(1,0,20,20),"shape=module;jettyWidth=8;jettyHeight=4;"));return e.vertex=!0,e.geometry.relative=!0,e.geometry.offset=new mxPoint(-27,7),t.insert(e),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Component")}),this.addEntry("uml static class component",function(){var t=new mxCell('<p style="margin:0px;margin-top:6px;text-align:center;"><b>Component</b></p><hr/><p style="margin:0px;margin-left:8px;">+ Attribute1: Type<br/>+ Attribute2: Type</p>',new mxGeometry(0,0,180,90),"align=left;overflow=fill;html=1;dropTarget=0;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(1,0,20,20),"shape=component;jettyWidth=8;jettyHeight=4;"));return e.vertex=!0,e.geometry.relative=!0,e.geometry.offset=new mxPoint(-24,4),t.insert(e),i.createVertexTemplateFromCells([t],t.geometry.width,t.geometry.height,"Component with Attributes")}),this.createVertexTemplateEntry("verticalAlign=top;align=left;spacingTop=8;spacingLeft=2;spacingRight=12;shape=cube;size=10;direction=south;fontStyle=4;html=1;",180,120,"Block","Block",null,null,"uml static class block"),this.createVertexTemplateEntry("shape=module;align=left;spacingLeft=20;align=center;verticalAlign=top;",100,50,"Module","Module",null,null,"uml static class module component"),this.createVertexTemplateEntry("shape=folder;fontStyle=1;spacingTop=10;tabWidth=40;tabHeight=14;tabPosition=left;html=1;",70,50,"package","Package",null,null,"uml static class package"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;",160,90,'<p style="margin:0px;margin-top:4px;text-align:center;text-decoration:underline;"><b>Object:Type</b></p><hr/><p style="margin:0px;margin-left:8px;">field1 = value1<br/>field2 = value2<br>field3 = value3</p>',"Object",null,null,"uml static class object instance"),this.createVertexTemplateEntry("verticalAlign=top;align=left;overflow=fill;html=1;",180,90,'<div style="box-sizing:border-box;width:100%;background:#e4e4e4;padding:2px;">Tablename</div><table style="width:100%;font-size:1em;" cellpadding="2" cellspacing="0"><tr><td>PK</td><td>uniqueId</td></tr><tr><td>FK1</td><td>foreignKey</td></tr><tr><td></td><td>fieldname</td></tr></table>',"Entity",null,null,"er entity table"),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 3")}),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><div style="height:2px;"></div><hr size="1"/><div style="height:2px;"></div>',new mxGeometry(0,0,140,60),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 4")}),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><b>Class</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method(): Type</p>',new mxGeometry(0,0,160,90),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Class 5")}),this.addEntry("uml static class object instance",function(){var t=new mxCell('<p style="margin:0px;margin-top:4px;text-align:center;"><i>&lt;&lt;Interface&gt;&gt;</i><br/><b>Interface</b></p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ field1: Type<br/>+ field2: Type</p><hr size="1"/><p style="margin:0px;margin-left:4px;">+ method1(Type): Type<br/>+ method2(Type, Type): Type</p>',new mxGeometry(0,0,190,140),"verticalAlign=top;align=left;overflow=fill;fontSize=12;fontFamily=Helvetica;html=1;");return t.vertex=!0,i.createVertexTemplateFromCells([t.clone()],t.geometry.width,t.geometry.height,"Interface 2")}),this.createVertexTemplateEntry("shape=providedRequiredInterface;html=1;verticalLabelPosition=bottom;",20,20,"","Provided/Required Interface",null,null,"uml provided required interface lollipop notation"),this.createVertexTemplateEntry("shape=requiredInterface;html=1;verticalLabelPosition=bottom;",10,20,"","Required Interface",null,null,"uml required interface lollipop notation"),this.addEntry("uml lollipop notation provided required interface",function(){return i.createVertexTemplateFromData("zVTBrptADPyavVYEkt4b0uQd3pMq5dD2uAUD27dgZJwE8vX1spsQlETtpVWRIjFjex3PmFVJWvc70m31hjlYlXxWSUqI7N/qPgVrVRyZXCUbFceR/FS8fRJdjNGo1QQN/0lB7AuO2h7AM57oeLCBIDw0Obj8SCVrJK6wxEbbV8RWyIWQP4F52Juzq9AHRqEqrm2IQpN/IsKTwAYb8MzWWBuO9B0hL2E2BGsqIQyxvJ9rzApD7QBrYBokhcBqNsf5UbrzsLzmXUu/oJET42jwGat5QYcHyiDkTDLKy03TiRrFfSx08m+FrrQtUkOZvZdbFKThmwMfVhf4fQ43/W3uZriiPPT+KKhjwnf4anKuQv//wsg+NPJ7/9d9Xf7eVykwbeeMOFWGYd/qzEVO8tHP/Suw4a2ujXV/+gXsEdhkOgSC8os44BQt0tggicZHeG1N2QiXibhAV48epRayEDd8MT7Ct06TUaXVWq027tCuhcx5VZjebeeaoDNn/WMcb/p+j0AM/dNr6InLl4Lgzylsk6OCgRWYsuI592gNZh5OhgmcblPv7+1l+ws=",40,10,"Lollipop Notation")}),this.createVertexTemplateEntry("shape=umlBoundary;whiteSpace=wrap;html=1;",100,80,"Boundary Object","Boundary Object",null,null,"uml boundary object"),this.createVertexTemplateEntry("ellipse;shape=umlEntity;whiteSpace=wrap;html=1;",80,80,"Entity Object","Entity Object",null,null,"uml entity object"),this.createVertexTemplateEntry("ellipse;shape=umlControl;whiteSpace=wrap;html=1;",70,80,"Control Object","Control Object",null,null,"uml control object"),this.createVertexTemplateEntry("shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;",30,60,"Actor","Actor",!1,null,"uml actor"),this.createVertexTemplateEntry("ellipse;whiteSpace=wrap;html=1;",140,70,"Use Case","Use Case",null,null,"uml use case usecase"),this.addEntry("uml activity state start",function(){var t=new mxCell("",new mxGeometry(0,0,30,30),"ellipse;html=1;shape=startState;fillColor=#000000;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return e.geometry.setTerminalPoint(new mxPoint(15,90),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],30,90,"Start")}),this.addEntry("uml activity state",function(){var t=new mxCell("Activity",new mxGeometry(0,0,120,40),"rounded=1;whiteSpace=wrap;html=1;arcSize=40;fontColor=#000000;fillColor=#ffffc0;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return e.geometry.setTerminalPoint(new mxPoint(60,100),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],120,100,"Activity")}),this.addEntry("uml activity composite state",function(){var t=new mxCell("Composite State",new mxGeometry(0,0,160,60),"swimlane;html=1;fontStyle=1;align=center;verticalAlign=middle;childLayout=stackLayout;horizontal=1;startSize=30;horizontalStack=0;resizeParent=0;resizeLast=1;container=0;fontColor=#000000;collapsible=0;rounded=1;arcSize=30;strokeColor=#ff0000;fillColor=#ffffc0;swimlaneFillColor=#ffffc0;dropTarget=0;"),e=(t.vertex=!0,new mxCell("Subtitle",new mxGeometry(0,0,200,26),"text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;spacingLeft=4;spacingRight=4;whiteSpace=wrap;overflow=hidden;rotatable=0;fontColor=#000000;"));return e.vertex=!0,t.insert(e),(e=new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;")).geometry.setTerminalPoint(new mxPoint(80,120),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],160,120,"Composite State")}),this.addEntry("uml activity condition",function(){var t=new mxCell("Condition",new mxGeometry(0,0,80,40),"rhombus;whiteSpace=wrap;html=1;fillColor=#ffffc0;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("no",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;")),n=(e.geometry.setTerminalPoint(new mxPoint(180,20),!1),e.geometry.relative=!0,e.geometry.x=-1,e.edge=!0,t.insertEdge(e,!0),new mxCell("yes",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;verticalAlign=top;endArrow=open;endSize=8;strokeColor=#ff0000;"));return n.geometry.setTerminalPoint(new mxPoint(40,100),!1),n.geometry.relative=!0,n.geometry.x=-1,n.edge=!0,t.insertEdge(n,!0),i.createVertexTemplateFromCells([t,e,n],180,100,"Condition")}),this.addEntry("uml activity fork join",function(){var t=new mxCell("",new mxGeometry(0,0,200,10),"shape=line;html=1;strokeWidth=6;strokeColor=#ff0000;"),e=(t.vertex=!0,new mxCell("",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;verticalAlign=bottom;endArrow=open;endSize=8;strokeColor=#ff0000;"));return e.geometry.setTerminalPoint(new mxPoint(100,80),!1),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!0),i.createVertexTemplateFromCells([t,e],200,80,"Fork/Join")}),this.createVertexTemplateEntry("ellipse;html=1;shape=endState;fillColor=#000000;strokeColor=#ff0000;",30,30,"","End",null,null,"uml activity state end"),this.createVertexTemplateEntry("shape=umlLifeline;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;outlineConnect=0;",100,300,":Object","Lifeline",null,null,"uml sequence participant lifeline"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlActor;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",20,300,"","Actor Lifeline",null,null,"uml sequence participant lifeline actor"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlBoundary;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",50,300,"","Boundary Lifeline",null,null,"uml sequence participant lifeline boundary"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlEntity;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Entity Lifeline",null,null,"uml sequence participant lifeline entity"),this.createVertexTemplateEntry("shape=umlLifeline;participant=umlControl;perimeter=lifelinePerimeter;whiteSpace=wrap;html=1;container=1;collapsible=0;recursiveResize=0;verticalAlign=top;spacingTop=36;outlineConnect=0;",40,300,"","Control Lifeline",null,null,"uml sequence participant lifeline control"),this.createVertexTemplateEntry("shape=umlFrame;whiteSpace=wrap;html=1;",300,200,"frame","Frame",null,null,"uml sequence frame"),this.createVertexTemplateEntry("shape=umlDestroy;whiteSpace=wrap;html=1;strokeWidth=3;",30,30,"","Destruction",null,null,"uml sequence destruction destroy"),this.addEntry("uml sequence invoke invocation call activation",function(){var t=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;"),e=(t.vertex=!0,new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;startArrow=oval;endArrow=block;startSize=8;"));return e.geometry.setTerminalPoint(new mxPoint(-60,0),!0),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!1),i.createVertexTemplateFromCells([t,e],10,80,"Found Message")}),this.addEntry("uml sequence invoke call delegation synchronous invocation activation",function(){var t=new mxCell("",new mxGeometry(0,0,10,80),"html=1;points=[];perimeter=orthogonalPerimeter;"),e=(t.vertex=!0,new mxCell("dispatch",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=block;entryX=0;entryY=0;")),n=(e.geometry.setTerminalPoint(new mxPoint(-70,0),!0),e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!1),new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;exitX=0;exitY=0.95;"));return n.geometry.setTerminalPoint(new mxPoint(-70,76),!1),n.geometry.relative=!0,n.edge=!0,t.insertEdge(n,!0),i.createVertexTemplateFromCells([t,e,n],10,80,"Synchronous Invocation")}),this.addEntry("uml sequence self call recursion delegation activation",function(){var t=new mxCell("",new mxGeometry(-5,20,10,40),"html=1;points=[];perimeter=orthogonalPerimeter;"),e=(t.vertex=!0,new mxCell("self call",new mxGeometry(0,0,0,0),"edgeStyle=orthogonalEdgeStyle;html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;entryX=1;entryY=0;"));return e.geometry.setTerminalPoint(new mxPoint(0,0),!0),e.geometry.points=[new mxPoint(30,0)],e.geometry.relative=!0,e.edge=!0,t.insertEdge(e,!1),i.createVertexTemplateFromCells([t,e],10,60,"Self Call")}),this.addEntry("uml sequence invoke call delegation callback activation",function(){return i.createVertexTemplateFromData("xZRNT8MwDIZ/Ta6oaymD47rBTkiTuMAxW6wmIm0q19s6fj1OE3V0Y2iCA4dK8euP2I+riGxedUuUjX52CqzIHkU2R+conKpuDtaKNDFKZAuRpgl/In264J303qSRCDVdk5CGhJ20WwhKEFo62ChoqritxURkReNMTa2X80LkC68AmgoIkEWHpF3pamlXR7WIFwASdBeb7KXY4RIc5+KBQ/ZGkY4RYY5Egyl1zLqLmmyDXQ6Zx4n5EIf+HkB2BmAjrV3LzftPIPw4hgNn1pQ1a2tH5Cp2QK1miG7vNeu4iJe4pdeY2BtvbCQDGlAljMCQxBJotJ8rWCFYSWY3LvUdmZi68rvkkLiU6QnL1m1xAzHoBOdw61WEb88II9AW67/ydQ2wq1Cy1aAGvOrFfPh6997qDA3g+dxzv3nIL6MPU/8T+kMw8+m4QPgdfrEJNo8PSQj/+s58Ag==",10,60,"Callback")}),this.createVertexTemplateEntry("html=1;points=[];perimeter=orthogonalPerimeter;",10,80,"","Activation",null,null,"uml sequence activation"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=oval;startFill=1;endArrow=block;startSize=8;",60,0,"dispatch","Found Message 1",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;startArrow=circle;startFill=1;endArrow=open;startSize=6;endSize=8;",80,0,"dispatch","Found Message 2",null,"uml sequence message call invoke dispatch"),this.createEdgeTemplateEntry("html=1;verticalAlign=bottom;endArrow=block;",80,0,"dispatch","Message",null,"uml sequence message call invoke dispatch"),this.addEntry("uml sequence return message",function(){var t=new mxCell("return",new mxGeometry(0,0,0,0),"html=1;verticalAlign=bottom;endArrow=open;dashed=1;endSize=8;");return t.geometry.setTerminalPoint(new mxPoint(80,0),!0),t.geometry.setTerminalPoint(new mxPoint(0,0),!1),t.geometry.relative=!0,t.edge=!0,i.createEdgeTemplateFromCells([t],80,0,"Return")}),this.addEntry("uml relation",function(){var t=new mxCell("name",new mxGeometry(0,0,0,0),"endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=top;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.edge=!0,new mxCell("1",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),i.createEdgeTemplateFromCells([t],160,0,"Relation 1")}),this.addEntry("uml association",function(){var t=new mxCell("",new mxGeometry(0,0,0,0),"endArrow=none;html=1;edgeStyle=orthogonalEdgeStyle;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("parent",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=bottom;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("child",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=bottom;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),i.createEdgeTemplateFromCells([t],160,0,"Association 1")}),this.addEntry("uml aggregation",function(){var t=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.geometry.y=3,t.edge=!0,i.createEdgeTemplateFromCells([t],160,0,"Aggregation 1")}),this.addEntry("uml composition",function(){var t=new mxCell("1",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;");return t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.geometry.x=-1,t.geometry.y=3,t.edge=!0,i.createEdgeTemplateFromCells([t],160,0,"Composition 1")}),this.addEntry("uml relation",function(){var t=new mxCell("Relation",new mxGeometry(0,0,0,0),"endArrow=open;html=1;endSize=12;startArrow=diamondThin;startSize=14;startFill=0;edgeStyle=orthogonalEdgeStyle;"),e=(t.geometry.setTerminalPoint(new mxPoint(0,0),!0),t.geometry.setTerminalPoint(new mxPoint(160,0),!1),t.geometry.relative=!0,t.edge=!0,new mxCell("0..n",new mxGeometry(-1,0,0,0),"edgeLabel;resizable=0;html=1;align=left;verticalAlign=top;"));return e.geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),(e=new mxCell("1",new mxGeometry(1,0,0,0),"edgeLabel;resizable=0;html=1;align=right;verticalAlign=top;")).geometry.relative=!0,e.setConnectable(!1),e.vertex=!0,t.insert(e),i.createEdgeTemplateFromCells([t],160,0,"Relation 2")}),this.createEdgeTemplateEntry("endArrow=open;endSize=12;dashed=1;html=1;",160,0,"Use","Dependency",null,"uml dependency use"),this.createEdgeTemplateEntry("endArrow=block;endSize=16;endFill=0;html=1;",160,0,"Extends","Generalization",null,"uml generalization extend"),this.createEdgeTemplateEntry("endArrow=block;startArrow=block;endFill=1;startFill=1;html=1;",160,0,"","Association 2",null,"uml association"),this.createEdgeTemplateEntry("endArrow=open;startArrow=circlePlus;endFill=0;startFill=0;endSize=8;html=1;",160,0,"","Inner Class",null,"uml inner class"),this.createEdgeTemplateEntry("endArrow=open;startArrow=cross;endFill=0;startFill=0;endSize=8;startSize=10;html=1;",160,0,"","Terminate",null,"uml terminate"),this.createEdgeTemplateEntry("endArrow=block;dashed=1;endFill=0;endSize=12;html=1;",160,0,"","Implementation",null,"uml realization implementation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=0;endSize=24;html=1;",160,0,"","Aggregation 2",null,"uml aggregation"),this.createEdgeTemplateEntry("endArrow=diamondThin;endFill=1;endSize=24;html=1;",160,0,"","Composition 2",null,"uml composition"),this.createEdgeTemplateEntry("endArrow=open;endFill=1;endSize=12;html=1;",160,0,"","Association 3",null,"uml association")]);this.addPaletteFunctions("uml",mxResources.get("uml"),t||!1,l),this.setCurrentSearchEntryLibrary()},Sidebar.prototype.createTitle=function(t){var e=document.createElement("a");return e.setAttribute("title",mxResources.get("sidebarTooltip")),e.className="geTitle",mxUtils.write(e,t),e},Sidebar.prototype.createThumb=function(t,e,n,i,l,s,o,r,a){return this.graph.labelsVisible=null==s||s,s=mxClient.NO_FO,mxClient.NO_FO=Editor.prototype.originalNoForeignObject,this.graph.view.scaleAndTranslate(1,0,0),t=this.graph.cloneCells(t),this.editorUi.insertHandler(t,null,this.graph.model,Graph.prototype.defaultVertexStyle,Graph.prototype.defaultEdgeStyle),this.graph.addCells(t),t=this.graph.getGraphBounds(),r=Math.floor(100*Math.min((e-2*this.thumbBorder)/t.width,(n-2*this.thumbBorder)/t.height))/100,this.graph.view.scaleAndTranslate(r,Math.floor((e-t.width*r)/2/r-t.x),Math.floor((n-t.height*r)/2/r-t.y)),this.graph.dialect!=mxConstants.DIALECT_SVG||mxClient.NO_FO||null==this.graph.view.getCanvas().ownerSVGElement?(r=this.graph.container.cloneNode(!1)).innerHTML=this.graph.container.innerHTML:r=this.graph.view.getCanvas().ownerSVGElement.cloneNode(!0),this.graph.getModel().clear(),mxClient.NO_FO=s,r.style.position="relative",r.style.overflow="hidden",r.style.left=this.thumbBorder+"px",r.style.top=this.thumbBorder+"px",r.style.width=e+"px",r.style.height=n+"px",r.style.visibility="",r.style.minWidth="",r.style.minHeight="",i.appendChild(r),this.sidebarTitles&&null!=l&&0!=o&&(i.style.height=this.thumbHeight+0+this.sidebarTitleSize+8+"px",(e=document.createElement("div")).style.fontSize=this.sidebarTitleSize+"px",e.style.color="#303030",e.style.textAlign="center",e.style.whiteSpace="nowrap",mxClient.IS_IE&&(e.style.height=this.sidebarTitleSize+12+"px"),e.style.paddingTop="4px",mxUtils.write(e,l),i.appendChild(e)),t},Sidebar.prototype.createSection=function(e){return mxUtils.bind(this,function(){var t=document.createElement("div");return t.setAttribute("title",e),t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.style.textAlign="center",t.style.overflow="hidden",t.style.width="100%",t.style.padding="14px 0",mxUtils.write(t,e),t})},Sidebar.prototype.createItem=function(e,n,i,t,l,s,o,r){r=null==r||r;var a=document.createElement("a"),h=(a.className="geItem",a.style.overflow="hidden",2*this.thumbBorder),d=(a.style.width=this.thumbWidth+h+"px",a.style.height=this.thumbHeight+h+"px",a.style.padding=this.thumbPadding+"px",mxEvent.addListener(a,"click",function(t){mxEvent.consume(t)}),this.createThumb(e,this.thumbWidth,this.thumbHeight,a,n,i,t,l,s),new mxRectangle(0,0,l,s));return 1<e.length||e[0].vertex?(t=this.createDragSource(a,this.createDropHandler(e,!0,o,d),this.createDragPreview(l,s),e,d),this.addClickHandler(a,t,e),t.isGuidesEnabled=mxUtils.bind(this,function(){return this.editorUi.editor.graph.graphHandler.guidesEnabled})):null!=e[0]&&e[0].edge&&(t=this.createDragSource(a,this.createDropHandler(e,!1,o,d),this.createDragPreview(l,s),e,d),this.addClickHandler(a,t,e)),!mxClient.IS_IOS&&r&&mxEvent.addGestureListeners(a,null,mxUtils.bind(this,function(t){mxEvent.isMouseEvent(t)&&this.showTooltip(a,e,d.width,d.height,n,i)})),a},Sidebar.prototype.updateShapes=function(t,e){var n=this.editorUi.editor.graph,i=n.getCellStyle(t),l=[];n.model.beginUpdate();try{for(var s=n.getModel().getStyle(t),o="shadow dashed dashPattern fontFamily fontSize fontColor align startFill startSize endFill endSize strokeColor strokeWidth fillColor gradientColor html part noEdgeStyle edgeStyle elbow childLayout recursiveResize container collapsible connectable comic sketch fillWeight hachureGap hachureAngle jiggle disableMultiStroke disableMultiStrokeFill fillStyle curveFitting simplification sketchStyle".split(" "),r=0;r<e.length;r++){var a=e[r];if(n.getModel().isVertex(a)==n.getModel().isVertex(t)||n.getModel().isEdge(a)==n.getModel().isEdge(t)){var h=n.getCurrentCellStyle(e[r]);if(n.getModel().setStyle(a,s),"1"==mxUtils.getValue(h,"composite","0"))for(var d=n.model.getChildCount(a);0<=d;d--)n.model.remove(n.model.getChildAt(a,d));for("umlLifeline"==h[mxConstants.STYLE_SHAPE]&&"umlLifeline"!=i[mxConstants.STYLE_SHAPE]&&(n.setCellStyles(mxConstants.STYLE_SHAPE,"umlLifeline",[a]),n.setCellStyles("participant",i[mxConstants.STYLE_SHAPE],[a])),d=0;d<o.length;d++){var u=h[o[d]];null!=u&&n.setCellStyles(o[d],u,[a])}l.push(a)}}}finally{n.model.endUpdate()}return l},Sidebar.prototype.createDropHandler=function(c,m,g,x){return g=null==g||g,mxUtils.bind(this,function(t,e,n,i,l,s){for(s=s?null:mxEvent.isTouchEvent(e)||mxEvent.isPenEvent(e)?document.elementFromPoint(mxEvent.getClientX(e),mxEvent.getClientY(e)):mxEvent.getSource(e);null!=s&&s!=this.container;)s=s.parentNode;if(null==s&&t.isEnabled()){if(0<(c=t.getImportableCells(c)).length){t.stopEditing(),s=null!=n&&!mxEvent.isAltDown(e)&&t.isValidDropTarget(n,c,e);var o,r,a,h,d,u=null;if(!t.isCellLocked((n=null==n||s?n:null)||t.getDefaultParent())){t.model.beginUpdate();try{if(i=Math.round(i),l=Math.round(l),m&&t.isSplitTarget(n,c,e)?(o=t.view.scale,a=(i+(r=t.view.translate).x)*o,h=(l+r.y)*o,d=t.cloneCells(c),t.splitEdge(n,d,null,i-x.width/2,l-x.height/2,a,h),u=d):0<c.length&&(u=t.importCells(c,i,l,n)),null!=t.layoutManager){var p=t.layoutManager.getLayout(n);if(null!=p)for(o=t.view.scale,a=(i+(r=t.view.translate).x)*o,h=(l+r.y)*o,n=0;n<u.length;n++)p.moveCell(u[n],a,h)}!g||null!=e&&mxEvent.isShiftDown(e)||t.fireEvent(new mxEventObject("cellsInserted","cells",u))}catch(t){this.editorUi.handleError(t)}finally{t.model.endUpdate()}null!=u&&0<u.length&&(t.scrollCellToVisible(u[0]),t.setSelectionCells(u)),t.editAfterInsert&&null!=e&&mxEvent.isMouseEvent(e)&&null!=u&&1==u.length&&window.setTimeout(function(){t.startEditing(u[0])},0)}}mxEvent.consume(e)}})},Sidebar.prototype.createDragPreview=function(t,e){var n=document.createElement("div");return n.className="geDragPreview",n.style.width=t+"px",n.style.height=e+"px",n},Sidebar.prototype.dropAndConnect=function(t,e,n,i,l){var s=this.getDropAndConnectGeometry(t,e[i],n,e),o=[];if(null!=s){var r=this.editorUi.editor.graph,a=null;r.model.beginUpdate();try{var h,d,u,p,c,m=r.getCellGeometry(t),g=r.getCellGeometry(e[i]),x=r.model.getParent(t),y=!0,f=(null!=r.layoutManager&&null!=(h=r.layoutManager.getLayout(x))&&h.constructor==mxStackLayout&&(y=!1),o=r.model.isEdge(t)?null:r.view.getState(x),h=0),C=(null!=o&&(h=(c=o.origin).x,f=c.y,null!=(d=s.getTerminalPoint(!1)))&&(d.x+=c.x,d.y+=c.y),!r.isTableRow(t)&&!r.isTableCell(t)&&(r.model.isEdge(t)||null!=m&&!m.relative&&y)),E=r.getCellAt((s.x+h+r.view.translate.x)*r.view.scale,(s.y+f+r.view.translate.y)*r.view.scale,null,null,null,function(t,e,n){return!r.isContainer(t.cell)});null!=E&&E!=x?null!=(o=r.view.getState(E))&&(c=o.origin,x=E,C=!0,r.model.isEdge(t)||(s.x-=c.x-h,s.y-=c.y-f)):y&&!r.isTableRow(t)&&!r.isTableCell(t)||(s.x+=h,s.y+=f),h=g.x,f=g.y,r.model.isEdge(e[i])&&(f=h=0),o=e=r.importCells(e,s.x-(C?h:0),s.y-(C?f:0),C?x:null),r.model.isEdge(t)?r.model.setTerminal(t,e[i],n==mxConstants.DIRECTION_NORTH):r.model.isEdge(e[i])?(r.model.setTerminal(e[i],t,!0),((u=r.getCellGeometry(e[i])).points=null)!=u.getTerminalPoint(!1)?u.setTerminalPoint(s.getTerminalPoint(!1),!1):C&&r.model.isVertex(x)&&(c=(p=r.view.getState(x)).cell!=r.view.currentRoot?p.origin:new mxPoint(0,0),r.cellsMoved(e,c.x,c.y,null,null,!0))):(g=r.getCellGeometry(e[i]),h=s.x-Math.round(g.x),f=s.y-Math.round(g.y),s.x=Math.round(g.x),s.y=Math.round(g.y),r.model.setGeometry(e[i],s),r.cellsMoved(e,h,f,null,null,!0),o=e.slice(),a=1==o.length?o[0]:null,e.push(r.insertEdge(null,null,"",t,e[i],r.createCurrentEdgeStyle()))),null!=l&&mxEvent.isShiftDown(l)||r.fireEvent(new mxEventObject("cellsInserted","cells",e))}catch(t){this.editorUi.handleError(t)}finally{r.model.endUpdate()}r.editAfterInsert&&null!=l&&mxEvent.isMouseEvent(l)&&null!=a&&window.setTimeout(function(){r.startEditing(a)},0)}return o},Sidebar.prototype.getDropAndConnectGeometry=function(t,e,n,i){var l=this.editorUi.editor.graph,s=l.view,o=1<i.length,r=l.getCellGeometry(t);return i=l.getCellGeometry(e),null!=r&&null!=i&&(i=i.clone(),l.model.isEdge(t)?(e=(r=(t=l.view.getState(t)).absolutePoints)[0],l=r[r.length-1],n==mxConstants.DIRECTION_NORTH?(i.x=e.x/s.scale-s.translate.x-i.width/2,i.y=e.y/s.scale-s.translate.y-i.height/2):(i.x=l.x/s.scale-s.translate.x-i.width/2,i.y=l.y/s.scale-s.translate.y-i.height/2)):(r.relative&&(t=l.view.getState(t),(r=r.clone()).x=(t.x-s.translate.x)/s.scale,r.y=(t.y-s.translate.y)/s.scale),s=l.defaultEdgeLength,l.model.isEdge(e)&&null!=i.getTerminalPoint(!0)&&null!=i.getTerminalPoint(!1)?(e=i.getTerminalPoint(!0),s=(l=i.getTerminalPoint(!1)).x-e.x,e=l.y-e.y,s=Math.sqrt(s*s+e*e),i.x=r.getCenterX(),i.y=r.getCenterY(),i.width=1,i.height=1,n==mxConstants.DIRECTION_NORTH?(i.height=s,i.y=r.y-s,i.setTerminalPoint(new mxPoint(i.x,i.y),!1)):n==mxConstants.DIRECTION_EAST?(i.width=s,i.x=r.x+r.width,i.setTerminalPoint(new mxPoint(i.x+i.width,i.y),!1)):n==mxConstants.DIRECTION_SOUTH?(i.height=s,i.y=r.y+r.height,i.setTerminalPoint(new mxPoint(i.x,i.y+i.height),!1)):n==mxConstants.DIRECTION_WEST&&(i.width=s,i.x=r.x-s,i.setTerminalPoint(new mxPoint(i.x,i.y),!1))):(!o&&45<i.width&&45<i.height&&45<r.width&&45<r.height&&(i.width*=r.height/i.height,i.height=r.height),i.x=r.x+r.width/2-i.width/2,i.y=r.y+r.height/2-i.height/2,n==mxConstants.DIRECTION_NORTH?i.y=i.y-r.height/2-i.height/2-s:n==mxConstants.DIRECTION_EAST?i.x=i.x+r.width/2+i.width/2+s:n==mxConstants.DIRECTION_SOUTH?i.y=i.y+r.height/2+i.height/2+s:n==mxConstants.DIRECTION_WEST&&(i.x=i.x-r.width/2-i.width/2-s),l.model.isEdge(e)&&null!=i.getTerminalPoint(!0)&&null!=e.getTerminal(!1)&&null!=(r=l.getCellGeometry(e.getTerminal(!1)))&&(n==mxConstants.DIRECTION_NORTH?(i.x-=r.getCenterX(),i.y-=r.getCenterY()+r.height/2):n==mxConstants.DIRECTION_EAST?(i.x-=r.getCenterX()-r.width/2,i.y-=r.getCenterY()):n==mxConstants.DIRECTION_SOUTH?(i.x-=r.getCenterX(),i.y-=r.getCenterY()-r.height/2):n==mxConstants.DIRECTION_WEST&&(i.x-=r.getCenterX()+r.width/2,i.y-=r.getCenterY()))))),i},Sidebar.prototype.isDropStyleEnabled=function(t,e){var n=!0;return n=null!=e&&1==t.length&&null!=(t=this.graph.getCellStyle(t[e]))?mxUtils.getValue(t,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(t,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE)!=mxConstants.NONE:n},Sidebar.prototype.isDropStyleTargetIgnored=function(t){return this.graph.isSwimlane(t.cell)||this.graph.isTableCell(t.cell)||this.graph.isTableRow(t.cell)||this.graph.isTable(t.cell)},Sidebar.prototype.createDragSource=function(t,o,e,d,u){function n(t,e){var n=mxUtils.createImage(t.src);return n.style.width=t.width+"px",n.style.height=t.height+"px",null!=e&&n.setAttribute("title",e),mxUtils.setOpacity(n,t==HoverIcons.prototype.refreshTarget?30:20),n.style.position="absolute",n.style.cursor="crosshair",n}function h(t,e,n,i){return null!=i.parentNode&&(mxUtils.contains(n,t,e)?(mxUtils.setOpacity(i,100),I=i):mxUtils.setOpacity(i,i==T?30:20)),n}for(var i=this.editorUi,l=i.editor.graph,p=null,c=null,m=this,s=0;s<d.length&&(null==c&&l.model.isVertex(d[s])?c=s:null==p&&l.model.isEdge(d[s])&&null==l.model.getTerminal(d[s],!0)&&(p=s),null==c||null==p);s++);var g=this.isDropStyleEnabled(d,c),x=mxUtils.makeDraggable(t,l,mxUtils.bind(this,function(t,e,n,i,l){var s;null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=d&&null!=C&&I==T?(s=t.isCellSelected(C.cell)?t.getSelectionCells():[C.cell],s=this.updateShapes(t.model.isEdge(C.cell)?d[0]:d[c],s),t.setSelectionCells(s)):null!=d&&null!=I&&null!=y&&I!=T?(s=t.model.isEdge(y.cell)||null==p?c:p,t.setSelectionCells(this.dropAndConnect(y.cell,d,R,s,e))):o.apply(this,arguments),null!=this.editorUi.hoverIcons&&this.editorUi.hoverIcons.update(t.view.getState(t.getSelectionCell()))}),e,0,0,l.autoscroll,!0,!0),r=(l.addListener(mxEvent.ESCAPE,function(t,e){x.isActive()&&x.reset()}),x.mouseDown),y=(x.mouseDown=function(t){mxEvent.isPopupTrigger(t)||mxEvent.isMultiTouchEvent(t)||(l.stopEditing(),r.apply(this,arguments))},null),f=null,C=null,E=!1,v=n(this.triangleUp,mxResources.get("connect")),S=n(this.triangleRight,mxResources.get("connect")),b=n(this.triangleDown,mxResources.get("connect")),w=n(this.triangleLeft,mxResources.get("connect")),T=n(HoverIcons.prototype.refreshTarget,mxResources.get("replace")),A=null,L=n(this.roundDrop),M=n(this.roundDrop),R=mxConstants.DIRECTION_NORTH,I=null,a=x.createPreviewElement,P=(x.createPreviewElement=function(t){var e=a.apply(this,arguments);return mxClient.IS_SVG&&(e.style.pointerEvents="none"),this.previewElementWidth=e.style.width,this.previewElementHeight=e.style.height,e},x.dragEnter),G=(x.dragEnter=function(t,e){null!=i.hoverIcons&&i.hoverIcons.setDisplay("none"),P.apply(this,arguments)},x.dragExit),O=(x.dragExit=function(t,e){null!=i.hoverIcons&&i.hoverIcons.setDisplay(""),G.apply(this,arguments)},x.dragOver=function(t,e){var n,i,l,s,o,r,a,h;mxDragSource.prototype.dragOver.apply(this,arguments),null!=this.currentGuide&&null!=I&&this.currentGuide.hide(),null!=this.previewElement&&(n=t.view,null!=C&&I==T?(this.previewElement.style.display=t.model.isEdge(C.cell)?"none":"",this.previewElement.style.left=C.x+"px",this.previewElement.style.top=C.y+"px",this.previewElement.style.width=C.width+"px",this.previewElement.style.height=C.height+"px"):null!=y&&null!=I?(null!=x.currentHighlight&&null!=x.currentHighlight.state&&x.currentHighlight.hide(),i=t.model.isEdge(y.cell)||null==p?c:p,l=m.getDropAndConnectGeometry(y.cell,d[i],R,d),s=t.model.isEdge(y.cell)?null:t.getCellGeometry(y.cell),o=t.getCellGeometry(d[i]),r=t.model.getParent(y.cell),a=n.translate.x*n.scale,h=n.translate.y*n.scale,null!=s&&!s.relative&&t.model.isVertex(r)&&r!=n.currentRoot&&(a=(h=n.getState(r)).x,h=h.y),s=o.x,o=o.y,t.model.isEdge(d[i])&&(o=s=0),this.previewElement.style.left=(l.x-s)*n.scale+a+"px",this.previewElement.style.top=(l.y-o)*n.scale+h+"px",1==d.length&&(this.previewElement.style.width=l.width*n.scale+"px",this.previewElement.style.height=l.height*n.scale+"px"),this.previewElement.style.display=""):null!=x.currentHighlight.state&&t.model.isEdge(x.currentHighlight.state.cell)?(this.previewElement.style.left=Math.round(parseInt(this.previewElement.style.left)-u.width*n.scale/2)+"px",this.previewElement.style.top=Math.round(parseInt(this.previewElement.style.top)-u.height*n.scale/2)+"px"):(this.previewElement.style.width=this.previewElementWidth,this.previewElement.style.height=this.previewElementHeight,this.previewElement.style.display=""))},(new Date).getTime()),N=0,H=null,U=this.editorUi.editor.graph.getCellStyle(d[0]);return x.getDropTarget=mxUtils.bind(this,function(i,t,e,n){var l,s,o,r=mxEvent.isAltDown(n)||null==d?null:i.getCellAt(t,e,null,null,null,function(t,e,n){return i.isContainer(t.cell)}),a=(null==r||this.graph.isCellConnectable(r)||this.graph.model.isEdge(r)||(o=this.graph.getModel().getParent(r),this.graph.getModel().isVertex(o)&&this.graph.isCellConnectable(o)&&(r=o)),i.isCellLocked(r)&&(r=null),i.view.getState(r));if(o=I=null,H!=a?(O=(new Date).getTime(),N=0,H=a,null!=this.updateThread&&window.clearTimeout(this.updateThread),null!=a&&(this.updateThread=window.setTimeout(function(){null==I&&(H=a,x.getDropTarget(i,t,e,n))},this.dropTargetDelay+10))):N=(new Date).getTime()-O,g&&N<2500&&null!=a&&!mxEvent.isShiftDown(n)&&(mxUtils.getValue(a.style,mxConstants.STYLE_SHAPE)!=mxUtils.getValue(U,mxConstants.STYLE_SHAPE)&&(mxUtils.getValue(a.style,mxConstants.STYLE_STROKECOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(a.style,mxConstants.STYLE_FILLCOLOR,mxConstants.NONE)!=mxConstants.NONE||mxUtils.getValue(a.style,mxConstants.STYLE_GRADIENTCOLOR,mxConstants.NONE)!=mxConstants.NONE)||"image"==mxUtils.getValue(U,mxConstants.STYLE_SHAPE)||1500<N||i.model.isEdge(a.cell))&&N>this.dropTargetDelay&&!this.isDropStyleTargetIgnored(a)&&(i.model.isVertex(a.cell)&&null!=c||i.model.isEdge(a.cell)&&i.model.isEdge(d[0]))?(C=a,l=new mxRectangle((l=i.model.isEdge(a.cell)?i.view.getPoint(a):new mxPoint(a.getCenterX(),a.getCenterY())).x-HoverIcons.prototype.refreshTarget.width/2,l.y-HoverIcons.prototype.refreshTarget.height/2,HoverIcons.prototype.refreshTarget.width,HoverIcons.prototype.refreshTarget.height),T.style.left=Math.floor(l.x)+"px",T.style.top=Math.floor(l.y)+"px",null==A&&(i.container.appendChild(T),A=T.parentNode),h(t,e,l,T)):null==C||!mxUtils.contains(C,t,e)||1500<N&&!mxEvent.isShiftDown(n)?(C=null)!=A&&(T.parentNode.removeChild(T),A=null):null!=C&&null!=A&&(l=new mxRectangle((l=i.model.isEdge(C.cell)?i.view.getPoint(C):new mxPoint(C.getCenterX(),C.getCenterY())).x-HoverIcons.prototype.refreshTarget.width/2,l.y-HoverIcons.prototype.refreshTarget.height/2,HoverIcons.prototype.refreshTarget.width,HoverIcons.prototype.refreshTarget.height),h(t,e,l,T)),E&&null!=y&&!mxEvent.isAltDown(n)&&null==I&&(o=mxRectangle.fromRectangle(y),i.model.isEdge(y.cell)?(s=y.absolutePoints,null!=L.parentNode&&(l=s[0],o.add(h(t,e,new mxRectangle(l.x-this.roundDrop.width/2,l.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),L))),null!=M.parentNode&&(s=s[s.length-1],o.add(h(t,e,new mxRectangle(s.x-this.roundDrop.width/2,s.y-this.roundDrop.height/2,this.roundDrop.width,this.roundDrop.height),M)))):(l=mxRectangle.fromRectangle(y),(l=null!=y.shape&&null!=y.shape.boundingBox?mxRectangle.fromRectangle(y.shape.boundingBox):l).grow(this.graph.tolerance),l.grow(HoverIcons.prototype.arrowSpacing),null!=(s=this.graph.selectionCellsHandler.getHandler(y.cell))&&(l.x-=s.horizontalOffset/2,l.y-=s.verticalOffset/2,l.width+=s.horizontalOffset,l.height+=s.verticalOffset,null!=s.rotationShape)&&null!=s.rotationShape.node&&"hidden"!=s.rotationShape.node.style.visibility&&"none"!=s.rotationShape.node.style.display&&null!=s.rotationShape.boundingBox&&l.add(s.rotationShape.boundingBox),o.add(h(t,e,new mxRectangle(y.getCenterX()-this.triangleUp.width/2,l.y-this.triangleUp.height,this.triangleUp.width,this.triangleUp.height),v)),o.add(h(t,e,new mxRectangle(l.x+l.width,y.getCenterY()-this.triangleRight.height/2,this.triangleRight.width,this.triangleRight.height),S)),o.add(h(t,e,new mxRectangle(y.getCenterX()-this.triangleDown.width/2,l.y+l.height,this.triangleDown.width,this.triangleDown.height),b)),o.add(h(t,e,new mxRectangle(l.x-this.triangleLeft.width,y.getCenterY()-this.triangleLeft.height/2,this.triangleLeft.width,this.triangleLeft.height),w))),null!=o)&&o.grow(10),R=mxConstants.DIRECTION_NORTH,I==S?R=mxConstants.DIRECTION_EAST:I==b||I==M?R=mxConstants.DIRECTION_SOUTH:I==w&&(R=mxConstants.DIRECTION_WEST),null!=C&&I==T&&(a=C),l=(null==c||i.isCellConnectable(d[c]))&&(i.model.isEdge(r)&&null!=c||i.model.isVertex(r)&&i.isCellConnectable(r)),null!=y&&5e3<=N||y!=a&&(null==o||!mxUtils.contains(o,t,e)||500<N&&null==I&&l))if(E=!1,null!=(y=N<5e3&&N>this.dropTargetDelay||i.model.isEdge(r)?a:null)&&l){for(o=[L,M,v,S,b,w],l=0;l<o.length;l++)null!=o[l].parentNode&&o[l].parentNode.removeChild(o[l]);i.model.isEdge(r)?null!=(s=a.absolutePoints)&&(l=s[0],s=s[s.length-1],o=i.tolerance,new mxRectangle(t-o,e-o,2*o,2*o),L.style.left=Math.floor(l.x-this.roundDrop.width/2)+"px",L.style.top=Math.floor(l.y-this.roundDrop.height/2)+"px",M.style.left=Math.floor(s.x-this.roundDrop.width/2)+"px",M.style.top=Math.floor(s.y-this.roundDrop.height/2)+"px",null==i.model.getTerminal(r,!0)&&i.container.appendChild(L),null==i.model.getTerminal(r,!1))&&i.container.appendChild(M):(l=mxRectangle.fromRectangle(a),(l=null!=a.shape&&null!=a.shape.boundingBox?mxRectangle.fromRectangle(a.shape.boundingBox):l).grow(this.graph.tolerance),l.grow(HoverIcons.prototype.arrowSpacing),null!=(s=this.graph.selectionCellsHandler.getHandler(a.cell))&&(l.x-=s.horizontalOffset/2,l.y-=s.verticalOffset/2,l.width+=s.horizontalOffset,l.height+=s.verticalOffset,null!=s.rotationShape)&&null!=s.rotationShape.node&&"hidden"!=s.rotationShape.node.style.visibility&&"none"!=s.rotationShape.node.style.display&&null!=s.rotationShape.boundingBox&&l.add(s.rotationShape.boundingBox),v.style.left=Math.floor(a.getCenterX()-this.triangleUp.width/2)+"px",v.style.top=Math.floor(l.y-this.triangleUp.height)+"px",S.style.left=Math.floor(l.x+l.width)+"px",S.style.top=Math.floor(a.getCenterY()-this.triangleRight.height/2)+"px",b.style.left=v.style.left,b.style.top=Math.floor(l.y+l.height)+"px",w.style.left=Math.floor(l.x-this.triangleLeft.width)+"px",w.style.top=S.style.top,"eastwest"!=a.style.portConstraint&&(i.container.appendChild(v),i.container.appendChild(b)),i.container.appendChild(S),i.container.appendChild(w)),null!=a&&null!=(f=i.selectionCellsHandler.getHandler(a.cell))&&null!=f.setHandlesVisible&&f.setHandlesVisible(!1),E=!0}else for(o=[L,M,v,S,b,w],l=0;l<o.length;l++)null!=o[l].parentNode&&o[l].parentNode.removeChild(o[l]);if(E||null==f||f.setHandlesVisible(!0),r=mxEvent.isAltDown(n)&&!mxEvent.isShiftDown(n)||null!=C&&I==T?null:mxDragSource.prototype.getDropTarget.apply(this,arguments),o=i.getModel(),null!=r&&(null!=I||!i.isSplitTarget(r,d,n))){for(;null!=r&&!i.isValidDropTarget(r,d,n)&&o.isVertex(o.getParent(r));)r=o.getParent(r);null!=r&&(i.view.currentRoot==r||!i.isValidRoot(r)&&0==i.getModel().getChildCount(r)||i.isCellLocked(r)||o.isEdge(r)||!i.isValidDropTarget(r,d,n))&&(r=null)}return r}),x.stopDrag=function(){mxDragSource.prototype.stopDrag.apply(this,arguments);for(var t=[L,M,T,v,S,b,w],e=0;e<t.length;e++)null!=t[e].parentNode&&t[e].parentNode.removeChild(t[e]);null!=y&&null!=f&&f.reset(),I=A=C=y=f=null},x},Sidebar.prototype.itemClicked=function(t,e,n,i){if((i=this.editorUi.editor.graph).container.focus(),mxEvent.isAltDown(n)&&1==i.getSelectionCount()&&i.model.isVertex(i.getSelectionCell())){e=null;for(var l=0;l<t.length&&null==e;l++)i.model.isVertex(t[l])&&(e=l);null!=e&&(i.setSelectionCells(this.dropAndConnect(i.getSelectionCell(),t,mxEvent.isMetaDown(n)||mxEvent.isControlDown(n)?mxEvent.isShiftDown(n)?mxConstants.DIRECTION_WEST:mxConstants.DIRECTION_NORTH:mxEvent.isShiftDown(n)?mxConstants.DIRECTION_EAST:mxConstants.DIRECTION_SOUTH,e,n)),i.scrollCellToVisible(i.getSelectionCell()))}else mxEvent.isShiftDown(n)&&!i.isSelectionEmpty()?(this.updateShapes(t[0],i.getSelectionCells()),i.scrollCellToVisible(i.getSelectionCell())):(t=mxEvent.isAltDown(n)?i.getFreeInsertPoint():i.getCenterInsertPoint(i.getBoundingBoxFromGeometry(t,!0)),e.drop(i,n,null,t.x,t.y,!0))},Sidebar.prototype.addClickHandler=function(e,n,i){var l=n.mouseDown,s=n.mouseMove,o=n.mouseUp,r=this.editorUi.editor.graph.tolerance,a=null,h=this;n.mouseDown=function(t){l.apply(this,arguments),a=new mxPoint(mxEvent.getClientX(t),mxEvent.getClientY(t)),null!=this.dragElement&&(this.dragElement.style.display="none",mxUtils.setOpacity(e,50))},n.mouseMove=function(t){null!=this.dragElement&&"none"==this.dragElement.style.display&&null!=a&&(Math.abs(a.x-mxEvent.getClientX(t))>r||Math.abs(a.y-mxEvent.getClientY(t))>r)&&(this.dragElement.style.display="",mxUtils.setOpacity(e,100)),s.apply(this,arguments)},n.mouseUp=function(t){try{mxEvent.isPopupTrigger(t)||null!=this.currentGraph||null==this.dragElement||"none"!=this.dragElement.style.display||h.itemClicked(i,n,t,e),o.apply(n,arguments),mxUtils.setOpacity(e,100),a=null,h.currentElt=e}catch(t){n.reset(),h.editorUi.handleError(t)}}},Sidebar.prototype.createVertexTemplateEntry=function(t,e,n,i,l,s,o,r){return r=null!=r&&0<r.length?r:null!=l?l.toLowerCase():"",this.addEntry(r,mxUtils.bind(this,function(){return this.createVertexTemplate(t,e,n,i,l,s,o)}))},Sidebar.prototype.createVertexTemplate=function(t,e,n,i,l,s,o,r,a){return(t=[new mxCell(null!=i?i:"",new mxGeometry(0,0,e,n),t)])[0].vertex=!0,this.createVertexTemplateFromCells(t,e,n,l,s,o,r,a)},Sidebar.prototype.createVertexTemplateFromData=function(t,e,n,i,l,s,o,r){var a=new mxCodec(t=mxUtils.parseXml(Graph.decompress(t))),h=new mxGraphModel;return a.decode(t.documentElement,h),t=this.graph.cloneCells(h.root.getChildAt(0).children),this.createVertexTemplateFromCells(t,e,n,i,l,s,o,r)},Sidebar.prototype.createVertexTemplateFromCells=function(t,e,n,i,l,s,o,r){return this.createItem(t,i,l,s,e,n,o,r)},Sidebar.prototype.createEdgeTemplateEntry=function(t,e,n,i,l,s,o,r,a){return o=null!=o&&0<o.length?o:l.toLowerCase(),this.addEntry(o,mxUtils.bind(this,function(){return this.createEdgeTemplate(t,e,n,i,l,s,r,a)}))},Sidebar.prototype.createEdgeTemplate=function(t,e,n,i,l,s,o,r){return(t=new mxCell(null!=i?i:"",new mxGeometry(0,0,e,n),t)).geometry.setTerminalPoint(new mxPoint(0,n),!0),t.geometry.setTerminalPoint(new mxPoint(e,0),!1),t.geometry.relative=!0,t.edge=!0,this.createEdgeTemplateFromCells([t],e,n,l,s,o,r)},Sidebar.prototype.createEdgeTemplateFromCells=function(t,e,n,i,l,s,o){return this.createItem(t,i,l,!0,e,n,s,o)},Sidebar.prototype.addPaletteFunctions=function(t,e,n,i){this.addPalette(t,e,n,mxUtils.bind(this,function(t){for(var e=0;e<i.length;e++)t.appendChild(i[e](t))}))},Sidebar.prototype.addPalette=function(t,e,n,i){e=this.createTitle(e),this.container.appendChild(e);var l=document.createElement("div");return l.className="geSidebar",mxClient.IS_POINTER&&(l.style.touchAction="none"),n?(i(l),i=null):l.style.display="none",this.addFoldingHandler(e,l,i),(n=document.createElement("div")).appendChild(l),this.container.appendChild(n),null!=t&&(this.palettes[t]=[e,n]),l},Sidebar.prototype.addFoldingHandler=function(n,i,l){var s=!1;(!mxClient.IS_IE||8<=document.documentMode)&&(n.style.backgroundImage="none"==i.style.display?"url('"+this.collapsedImage+"')":"url('"+this.expandedImage+"')"),n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="0% 50%",mxEvent.addListener(n,"click",mxUtils.bind(this,function(t){var e;"none"==i.style.display?(!s&&(s=!0,null!=l)?(n.style.cursor="wait",e=n.innerHTML,n.innerHTML=mxResources.get("loading")+"...",window.setTimeout(function(){i.style.display="block",n.style.cursor="",n.innerHTML=e;var t=mxClient.NO_FO;mxClient.NO_FO=Editor.prototype.originalNoForeignObject,l(i,n),mxClient.NO_FO=t},mxClient.IS_FF?20:0)):i.style.display="block",n.style.backgroundImage="url('"+this.expandedImage+"')"):(n.style.backgroundImage="url('"+this.collapsedImage+"')",i.style.display="none"),mxEvent.consume(t)})),mxEvent.addListener(n,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()}))},Sidebar.prototype.removePalette=function(t){var e=this.palettes[t];if(null==e)return!1;for(this.palettes[t]=null,t=0;t<e.length;t++)this.container.removeChild(e[t]);return!0},Sidebar.prototype.addImagePalette=function(t,e,l,s,n,i,o){for(var r=[],a=0;a<n.length;a++)mxUtils.bind(this,function(t,e,n){var i;null==n&&(n=t.lastIndexOf("/"),i=t.lastIndexOf("."),n=t.substring(0<=n?n+1:0,0<=i?i:t.length).replace(/[-_]/g," ")),r.push(this.createVertexTemplateEntry("image;html=1;image="+l+t+s,this.defaultImageWidth,this.defaultImageHeight,"",e,null!=e,null,this.filterTags(n)))})(n[a],null!=i?i[a]:null,null!=o?o[n[a]]:null);this.addPaletteFunctions(t,e,!1,r)},Sidebar.prototype.getTagsForStencil=function(t,e,n){t=t.split(".");for(var i=1;i<t.length;i++)t[i]=t[i].replace(/_/g," ");return t.push(e.replace(/_/g," ")),null!=n&&t.push(n),t.slice(1,t.length)},Sidebar.prototype.addStencilPalette=function(t,e,n,o,r,i,a,h,l,s){if(a=null!=a?a:1,this.addStencilsToIndex){var d=[];if(null!=l)for(s=0;s<l.length;s++)d.push(l[s]);mxStencilRegistry.loadStencilSet(n,mxUtils.bind(this,function(t,e,n,i,l){var s;(null==r||mxUtils.indexOf(r,e)<0)&&(n=this.getTagsForStencil(t,e),null!=(s=null!=h?h[e]:null)&&n.push(s),d.push(this.createVertexTemplateEntry("shape="+t+e.toLowerCase()+o,Math.round(i*a),Math.round(l*a),"",e.replace(/_/g," "),null,null,this.filterTags(n.join(" ")))))}),!0,!0),this.addPaletteFunctions(t,e,!1,d)}else this.addPalette(t,e,!1,mxUtils.bind(this,function(s){if(null==o&&(o=""),null!=i&&i.call(this,s),null!=l)for(var t=0;t<l.length;t++)l[t](s);mxStencilRegistry.loadStencilSet(n,mxUtils.bind(this,function(t,e,n,i,l){(null==r||mxUtils.indexOf(r,e)<0)&&s.appendChild(this.createVertexTemplate("shape="+t+e.toLowerCase()+o,Math.round(i*a),Math.round(l*a),"",e.replace(/_/g," "),!0))}),!0)}))},Sidebar.prototype.destroy=function(){null!=this.graph&&(null!=this.graph.container&&null!=this.graph.container.parentNode&&this.graph.container.parentNode.removeChild(this.graph.container),this.graph.destroy(),this.graph=null),null!=this.pointerUpHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerup":"mouseup",this.pointerUpHandler),this.pointerUpHandler=null),null!=this.pointerDownHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerdown":"mousedown",this.pointerDownHandler),this.pointerDownHandler=null),null!=this.pointerMoveHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointermove":"mousemove",this.pointerMoveHandler),this.pointerMoveHandler=null),null!=this.pointerOutHandler&&(mxEvent.removeListener(document,mxClient.IS_POINTER?"pointerout":"mouseout",this.pointerOutHandler),this.pointerOutHandler=null)},Toolbar.prototype.dropdownImage=mxClient.IS_SVG?"data:image/gif;base64,R0lGODlhDQANAIABAHt7e////yH/C1hNUCBEYXRhWE1QPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpCREM1NkJFMjE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpCREM1NkJFMzE0NEMxMUU1ODk1Q0M5MjQ0MTA4QjNDMSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkQzOUMzMjZCMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkQzOUMzMjZDMTQ0QjExRTU4OTVDQzkyNDQxMDhCM0MxIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Af/+/fz7+vn49/b19PPy8fDv7u3s6+rp6Ofm5eTj4uHg397d3Nva2djX1tXU09LR0M/OzczLysnIx8bFxMPCwcC/vr28u7q5uLe2tbSzsrGwr66trKuqqainpqWko6KhoJ+enZybmpmYl5aVlJOSkZCPjo2Mi4qJiIeGhYSDgoGAf359fHt6eXh3dnV0c3JxcG9ubWxramloZ2ZlZGNiYWBfXl1cW1pZWFdWVVRTUlFQT05NTEtKSUhHRkVEQ0JBQD8+PTw7Ojk4NzY1NDMyMTAvLi0sKyopKCcmJSQjIiEgHx4dHBsaGRgXFhUUExIREA8ODQwLCgkIBwYFBAMCAQAAIfkEAQAAAQAsAAAAAA0ADQAAAhGMj6nL3QAjVHIu6azbvPtWAAA7":IMAGE_PATH+"/dropdown.gif",Toolbar.prototype.dropdownImageHtml='<img border="0" style="position:absolute;right:4px;top:'+(EditorUi.compactUi?6:8)+'px;" src="'+Toolbar.prototype.dropdownImage+'" valign="middle"/>',Toolbar.prototype.selectedBackground="#d0d0d0",Toolbar.prototype.unselectedBackground="none",Toolbar.prototype.staticElements=null,Toolbar.prototype.init=function(){var t,e=screen.width,n=(700<=(e-=740<screen.height?56:0)&&(t=this.addMenu("",mxResources.get("view")+" ("+mxResources.get("panTooltip")+")",!0,"viewPanels",null,!0),this.addDropDownArrow(t,"geSprite-formatpanel",38,50,-4,-3,36,-8),this.addSeparator()),this.addMenu("",mxResources.get("zoom")+" (Alt+Mousewheel)",!0,"viewZoom",null,!0));n.showDisabled=!0,n.style.whiteSpace="nowrap",n.style.position="relative",n.style.overflow="hidden",n.style.width=EditorUi.compactUi?"50px":"36px",420<=e&&(this.addSeparator(),(t=this.addItems(["zoomIn","zoomOut"]))[0].setAttribute("title",mxResources.get("zoomIn")+" ("+this.editorUi.actions.get("zoomIn").shortcut+")"),t[1].setAttribute("title",mxResources.get("zoomOut")+" ("+this.editorUi.actions.get("zoomOut").shortcut+")")),this.updateZoom=mxUtils.bind(this,function(){n.innerHTML=Math.round(100*this.editorUi.editor.graph.view.scale)+"%"+this.dropdownImageHtml,EditorUi.compactUi&&(n.getElementsByTagName("img")[0].style.right="1px",n.getElementsByTagName("img")[0].style.top="5px")}),this.editorUi.editor.graph.view.addListener(mxEvent.EVENT_SCALE,this.updateZoom),this.editorUi.editor.addListener("resetGraphView",this.updateZoom),(t=this.addItems(["-","undo","redo"]))[1].setAttribute("title",mxResources.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),t[2].setAttribute("title",mxResources.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),320<=e&&(t=this.addItems(["-","delete"]))[1].setAttribute("title",mxResources.get("delete")+" ("+this.editorUi.actions.get("delete").shortcut+")"),550<=e&&this.addItems(["-","toFront","toBack"]),740<=e&&(this.addItems(["-","fillColor"]),780<=e)&&(this.addItems(["strokeColor"]),820<=e)&&this.addItems(["shadow"]),400<=e&&(this.addSeparator(),440<=e&&(this.edgeShapeMenu=this.addMenuFunction("",mxResources.get("connection"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],[null,null],"geIcon geSprite geSprite-connection",null,!0).setAttribute("title",mxResources.get("line")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],["link",null],"geIcon geSprite geSprite-linkedge",null,!0).setAttribute("title",mxResources.get("link")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],["flexArrow",null],"geIcon geSprite geSprite-arrow",null,!0).setAttribute("title",mxResources.get("arrow")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_SHAPE,"width"],["arrow",null],"geIcon geSprite geSprite-simplearrow",null,!0).setAttribute("title",mxResources.get("simpleArrow"))})),this.addDropDownArrow(this.edgeShapeMenu,"geSprite-connection",44,50,0,0,22,-4)),this.edgeStyleMenu=this.addMenuFunction("geSprite-orthogonal",mxResources.get("waypoints"),!1,mxUtils.bind(this,function(t){this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],[null,null,null],"geIcon geSprite geSprite-straight",null,!0).setAttribute("title",mxResources.get("straight")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle",null,null],"geIcon geSprite geSprite-orthogonal",null,!0).setAttribute("title",mxResources.get("orthogonal")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["elbowEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalelbow",null,!0).setAttribute("title",mxResources.get("simple")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle",null,null,null],"geIcon geSprite geSprite-horizontalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_ELBOW,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["isometricEdgeStyle","vertical",null,null],"geIcon geSprite geSprite-verticalisometric",null,!0).setAttribute("title",mxResources.get("isometric")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["orthogonalEdgeStyle","1",null],"geIcon geSprite geSprite-curved",null,!0).setAttribute("title",mxResources.get("curved")),this.editorUi.menus.edgeStyleChange(t,"",[mxConstants.STYLE_EDGE,mxConstants.STYLE_CURVED,mxConstants.STYLE_NOEDGESTYLE],["entityRelationEdgeStyle",null,null],"geIcon geSprite geSprite-entity",null,!0).setAttribute("title",mxResources.get("entityRelation"))})),this.addDropDownArrow(this.edgeStyleMenu,"geSprite-orthogonal",44,50,0,0,22,-4)),this.addSeparator(),e=this.addMenu("",mxResources.get("insert")+" ("+mxResources.get("doubleClickTooltip")+")",!0,"insert",null,!0),this.addDropDownArrow(e,"geSprite-plus",38,48,-4,-3,36,-8),this.addTableDropDown()},Toolbar.prototype.addTableDropDown=function(){this.addSeparator();var t=this.addMenuFunction("geIcon geSprite geSprite-table",mxResources.get("table"),!1,mxUtils.bind(this,function(t){var e=this.editorUi.editor.graph,n=e.getSelectionCell();e.isTableCell(n)||e.isTableRow(n)||e.isTable(n)?(t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableColumn(n,!0)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnbefore").setAttribute("title",mxResources.get("insertColumnBefore")),t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableColumn(n,!1)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnafter").setAttribute("title",mxResources.get("insertColumnAfter")),t.addItem("Delete column",null,mxUtils.bind(this,function(){if(null!=n)try{e.deleteTableColumn(n)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deletecolumn").setAttribute("title",mxResources.get("deleteColumn")),t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableRow(n,!0)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowbefore").setAttribute("title",mxResources.get("insertRowBefore")),t.addItem("",null,mxUtils.bind(this,function(){try{e.insertTableRow(n,!1)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowafter").setAttribute("title",mxResources.get("insertRowAfter")),t.addItem("",null,mxUtils.bind(this,function(){try{e.deleteTableRow(n)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deleterow").setAttribute("title",mxResources.get("deleteRow"))):this.editorUi.menus.addInsertTableCellItem(t)})),e=(t.style.position="relative",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,t.style.width="30px",EditorUi.compactUi&&(t.getElementsByTagName("img")[0].style.left="22px",t.getElementsByTagName("img")[0].style.top="5px"),this.editorUi.menus.get("insert"));return null!=e&&"function"==typeof t.setEnabled&&e.addListener("stateChanged",function(){t.setEnabled(e.enabled)}),t},Toolbar.prototype.addDropDownArrow=function(t,e,n,i,l,s,o,r){l=EditorUi.compactUi?l:r,t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.position="relative",t.innerHTML='<div class="geSprite '+e+'" style="margin-left:'+l+"px;margin-top:"+s+'px;"></div>'+this.dropdownImageHtml,t.style.width=i-(null!=o?o:32)+"px",EditorUi.compactUi&&(t.getElementsByTagName("img")[0].style.left="24px",t.getElementsByTagName("img")[0].style.top="5px",t.style.width=n-10+"px")},Toolbar.prototype.setFontName=function(t){null!=this.fontMenu&&(this.fontMenu.innerHTML='<div style="width:60px;overflow:hidden;display:inline-block;">'+mxUtils.htmlEntities(t)+"</div>"+this.dropdownImageHtml)},Toolbar.prototype.setFontSize=function(t){null!=this.sizeMenu&&(this.sizeMenu.innerHTML='<div style="width:24px;overflow:hidden;display:inline-block;">'+mxUtils.htmlEntities(t)+"</div>"+this.dropdownImageHtml)},Toolbar.prototype.createTextToolbar=function(){var s=this.editorUi.editor.graph,t=this.addMenu("",mxResources.get("style"),!0,"formatBlock"),e=(t.style.position="relative",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.innerHTML=mxResources.get("style")+this.dropdownImageHtml,EditorUi.compactUi&&(t.style.paddingRight="18px",t.getElementsByTagName("img")[0].style.right="1px",t.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.fontMenu=this.addMenu("",mxResources.get("fontFamily"),!0,"fontFamily"),this.fontMenu.style.position="relative",this.fontMenu.style.whiteSpace="nowrap",this.fontMenu.style.overflow="hidden",this.fontMenu.style.width="60px",this.setFontName(Menus.prototype.defaultFont),EditorUi.compactUi&&(this.fontMenu.style.paddingRight="18px",this.fontMenu.getElementsByTagName("img")[0].style.right="1px",this.fontMenu.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.sizeMenu=this.addMenu(Menus.prototype.defaultFontSize,mxResources.get("fontSize"),!0,"fontSize"),this.sizeMenu.style.position="relative",this.sizeMenu.style.whiteSpace="nowrap",this.sizeMenu.style.overflow="hidden",this.sizeMenu.style.width="24px",this.setFontSize(Menus.prototype.defaultFontSize),EditorUi.compactUi&&(this.sizeMenu.style.paddingRight="18px",this.sizeMenu.getElementsByTagName("img")[0].style.right="1px",this.sizeMenu.getElementsByTagName("img")[0].style.top="5px"),(t=this.addItems("- undo redo - bold italic underline".split(" ")))[1].setAttribute("title",mxResources.get("undo")+" ("+this.editorUi.actions.get("undo").shortcut+")"),t[2].setAttribute("title",mxResources.get("redo")+" ("+this.editorUi.actions.get("redo").shortcut+")"),t[4].setAttribute("title",mxResources.get("bold")+" ("+this.editorUi.actions.get("bold").shortcut+")"),t[5].setAttribute("title",mxResources.get("italic")+" ("+this.editorUi.actions.get("italic").shortcut+")"),t[6].setAttribute("title",mxResources.get("underline")+" ("+this.editorUi.actions.get("underline").shortcut+")"),(t=this.addMenuFunction("",mxResources.get("align"),!1,mxUtils.bind(this,function(t){(e=t.addItem("",null,mxUtils.bind(this,function(t){s.cellEditor.alignText(mxConstants.ALIGN_LEFT,t)}),null,"geIcon geSprite geSprite-left")).setAttribute("title",mxResources.get("left")),(e=t.addItem("",null,mxUtils.bind(this,function(t){s.cellEditor.alignText(mxConstants.ALIGN_CENTER,t)}),null,"geIcon geSprite geSprite-center")).setAttribute("title",mxResources.get("center")),(e=t.addItem("",null,mxUtils.bind(this,function(t){s.cellEditor.alignText(mxConstants.ALIGN_RIGHT,t)}),null,"geIcon geSprite geSprite-right")).setAttribute("title",mxResources.get("right")),(e=t.addItem("",null,mxUtils.bind(this,function(){document.execCommand("justifyfull",!1,null)}),null,"geIcon geSprite geSprite-justifyfull")).setAttribute("title",mxResources.get("justifyfull")),(e=t.addItem("",null,mxUtils.bind(this,function(){document.execCommand("insertorderedlist",!1,null)}),null,"geIcon geSprite geSprite-orderedlist")).setAttribute("title",mxResources.get("numberedList")),(e=t.addItem("",null,mxUtils.bind(this,function(){document.execCommand("insertunorderedlist",!1,null)}),null,"geIcon geSprite geSprite-unorderedlist")).setAttribute("title",mxResources.get("bulletedList")),(e=t.addItem("",null,mxUtils.bind(this,function(){document.execCommand("outdent",!1,null)}),null,"geIcon geSprite geSprite-outdent")).setAttribute("title",mxResources.get("decreaseIndent")),(e=t.addItem("",null,mxUtils.bind(this,function(){document.execCommand("indent",!1,null)}),null,"geIcon geSprite geSprite-indent")).setAttribute("title",mxResources.get("increaseIndent"))}))).style.position="relative",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.innerHTML='<div class="geSprite geSprite-left" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,t.style.width="30px",EditorUi.compactUi&&(t.getElementsByTagName("img")[0].style.left="22px",t.getElementsByTagName("img")[0].style.top="5px"),(t=this.addMenuFunction("",mxResources.get("format"),!1,mxUtils.bind(this,function(t){(e=t.addItem("",null,this.editorUi.actions.get("subscript").funct,null,"geIcon geSprite geSprite-subscript")).setAttribute("title",mxResources.get("subscript")+" ("+Editor.ctrlKey+"+,)"),(e=t.addItem("",null,this.editorUi.actions.get("superscript").funct,null,"geIcon geSprite geSprite-superscript")).setAttribute("title",mxResources.get("superscript")+" ("+Editor.ctrlKey+"+.)"),(e=t.addItem("",null,this.editorUi.actions.get("fontColor").funct,null,"geIcon geSprite geSprite-fontcolor")).setAttribute("title",mxResources.get("fontColor")),(e=t.addItem("",null,this.editorUi.actions.get("backgroundColor").funct,null,"geIcon geSprite geSprite-fontbackground")).setAttribute("title",mxResources.get("backgroundColor")),(e=t.addItem("",null,mxUtils.bind(this,function(){document.execCommand("removeformat",!1,null)}),null,"geIcon geSprite geSprite-removeformat")).setAttribute("title",mxResources.get("removeFormat"))}))).style.position="relative",t.style.whiteSpace="nowrap",t.style.overflow="hidden",t.innerHTML='<div class="geSprite geSprite-dots" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,t.style.width="30px",EditorUi.compactUi&&(t.getElementsByTagName("img")[0].style.left="22px",t.getElementsByTagName("img")[0].style.top="5px"),this.addSeparator(),this.addButton("geIcon geSprite geSprite-code",mxResources.get("html"),function(){s.cellEditor.toggleViewMode(),0<s.cellEditor.textarea.innerHTML.length&&("&nbsp;"!=s.cellEditor.textarea.innerHTML||!s.cellEditor.clearOnChange)&&window.setTimeout(function(){document.execCommand("selectAll",!1,null)})}),this.addSeparator(),(t=this.addMenuFunction("",mxResources.get("insert"),!0,mxUtils.bind(this,function(t){t.addItem(mxResources.get("insertLink"),null,mxUtils.bind(this,function(){this.editorUi.actions.get("link").funct()})),t.addItem(mxResources.get("insertImage"),null,mxUtils.bind(this,function(){this.editorUi.actions.get("image").funct()})),t.addItem(mxResources.get("insertHorizontalRule"),null,mxUtils.bind(this,function(){document.execCommand("inserthorizontalrule",!1,null)}))}))).style.whiteSpace="nowrap",t.style.overflow="hidden",t.style.position="relative",t.innerHTML='<div class="geSprite geSprite-plus" style="margin-left:-4px;margin-top:-3px;"></div>'+this.dropdownImageHtml,t.style.width="16px",EditorUi.compactUi&&(t.getElementsByTagName("img")[0].style.left="24px",t.getElementsByTagName("img")[0].style.top="5px",t.style.width="30px"),this.addSeparator(),this.addMenuFunction("geIcon geSprite geSprite-table",mxResources.get("table"),!1,mxUtils.bind(this,function(t){var e,n=s.getSelectedElement(),i=s.getParentByNames(n,["TD","TH"],s.cellEditor.text2),l=s.getParentByName(n,"TR",s.cellEditor.text2);null==l?this.editorUi.menus.addInsertTableItem(t):(e=s.getParentByName(l,"TABLE",s.cellEditor.text2),(n=t.addItem("",null,mxUtils.bind(this,function(){try{s.selectNode(s.insertColumn(e,null!=i?i.cellIndex:0))}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnbefore")).setAttribute("title",mxResources.get("insertColumnBefore")),(n=t.addItem("",null,mxUtils.bind(this,function(){try{s.selectNode(s.insertColumn(e,null!=i?i.cellIndex+1:-1))}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertcolumnafter")).setAttribute("title",mxResources.get("insertColumnAfter")),(n=t.addItem("Delete column",null,mxUtils.bind(this,function(){if(null!=i)try{s.deleteColumn(e,i.cellIndex)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deletecolumn")).setAttribute("title",mxResources.get("deleteColumn")),(n=t.addItem("",null,mxUtils.bind(this,function(){try{s.selectNode(s.insertRow(e,l.sectionRowIndex))}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowbefore")).setAttribute("title",mxResources.get("insertRowBefore")),(n=t.addItem("",null,mxUtils.bind(this,function(){try{s.selectNode(s.insertRow(e,l.sectionRowIndex+1))}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-insertrowafter")).setAttribute("title",mxResources.get("insertRowAfter")),(n=t.addItem("",null,mxUtils.bind(this,function(){try{s.deleteRow(e,l.sectionRowIndex)}catch(t){this.editorUi.handleError(t)}}),null,"geIcon geSprite geSprite-deleterow")).setAttribute("title",mxResources.get("deleteRow")),(n=t.addItem("",null,mxUtils.bind(this,function(){var t=e.style.borderColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)});this.editorUi.pickColor(t,function(t){null==t||t==mxConstants.NONE?(e.removeAttribute("border"),e.style.border="",e.style.borderCollapse=""):(e.setAttribute("border","1"),e.style.border="1px solid "+t,e.style.borderCollapse="collapse")})}),null,"geIcon geSprite geSprite-strokecolor")).setAttribute("title",mxResources.get("borderColor")),(n=t.addItem("",null,mxUtils.bind(this,function(){var t=e.style.backgroundColor.replace(/\brgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/g,function(t,e,n,i){return"#"+("0"+Number(e).toString(16)).substr(-2)+("0"+Number(n).toString(16)).substr(-2)+("0"+Number(i).toString(16)).substr(-2)});this.editorUi.pickColor(t,function(t){e.style.backgroundColor=null==t||t==mxConstants.NONE?"":t})}),null,"geIcon geSprite geSprite-fillcolor")).setAttribute("title",mxResources.get("backgroundColor")),(n=t.addItem("",null,mxUtils.bind(this,function(){var t=e.getAttribute("cellPadding")||0,t=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),mxUtils.bind(this,function(t){null!=t&&0<t.length?e.setAttribute("cellPadding",t):e.removeAttribute("cellPadding")}),mxResources.get("spacing"));this.editorUi.showDialog(t.container,300,80,!0,!0),t.init()}),null,"geIcon geSprite geSprite-fit")).setAttribute("title",mxResources.get("spacing")),(n=t.addItem("",null,mxUtils.bind(this,function(){e.setAttribute("align","left")}),null,"geIcon geSprite geSprite-left")).setAttribute("title",mxResources.get("left")),(n=t.addItem("",null,mxUtils.bind(this,function(){e.setAttribute("align","center")}),null,"geIcon geSprite geSprite-center")).setAttribute("title",mxResources.get("center")),(n=t.addItem("",null,mxUtils.bind(this,function(){e.setAttribute("align","right")}),null,"geIcon geSprite geSprite-right")).setAttribute("title",mxResources.get("right")))})));e.style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="hidden",e.innerHTML='<div class="geSprite geSprite-table" style="margin-left:-2px;"></div>'+this.dropdownImageHtml,e.style.width="30px",EditorUi.compactUi&&(e.getElementsByTagName("img")[0].style.left="22px",e.getElementsByTagName("img")[0].style.top="5px")},Toolbar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},Toolbar.prototype.addMenu=function(t,e,n,i,l,s,o){var r=this.editorUi.menus.get(i),a=this.addMenuFunction(t,e,n,function(){r.funct.apply(r,arguments)},l,s);return o||"function"!=typeof a.setEnabled||r.addListener("stateChanged",function(){a.setEnabled(r.enabled)}),a},Toolbar.prototype.addMenuFunction=function(t,e,n,i,l,s){return this.addMenuFunctionInContainer(null!=l?l:this.container,t,e,n,i,s)},Toolbar.prototype.addMenuFunctionInContainer=function(t,e,n,i,l,s){return e=i?this.createLabel(e):this.createButton(e),this.initElement(e,n),this.addMenuHandler(e,i,l,s),t.appendChild(e),e},Toolbar.prototype.addSeparator=function(t){t=null!=t?t:this.container;var e=document.createElement("div");return e.className="geSeparator",t.appendChild(e),e},Toolbar.prototype.addItems=function(t,e,n){for(var i=[],l=0;l<t.length;l++){var s=t[l];i.push("-"==s?this.addSeparator(e):this.addItem("geSprite-"+s.toLowerCase(),s,e,n))}return i},Toolbar.prototype.addItem=function(t,e,n,i){var l=this.editorUi.actions.get(e),s=null;return null!=l&&(e=l.label,null!=l.shortcut&&(e+=" ("+l.shortcut+")"),s=this.addButton(t,e,l.funct,n),i||"function"!=typeof s.setEnabled||(s.setEnabled(l.enabled),l.addListener("stateChanged",function(){s.setEnabled(l.enabled)}))),s},Toolbar.prototype.addButton=function(t,e,n,i){return t=this.createButton(t),i=null!=i?i:this.container,this.initElement(t,e),this.addClickHandler(t,n),i.appendChild(t),t},Toolbar.prototype.initElement=function(t,e){null!=e&&t.setAttribute("title",e),this.addEnabledState(t)},Toolbar.prototype.addEnabledState=function(e){var n=e.className;e.setEnabled=function(t){e.enabled=t,e.className=t?n:n+" mxDisabled"},e.setEnabled(!0)},Toolbar.prototype.addClickHandler=function(e,n){null!=n&&(mxEvent.addListener(e,"click",function(t){e.enabled&&n(t),mxEvent.consume(t)}),mxEvent.addListener(e,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){t.preventDefault()})))},Toolbar.prototype.createButton=function(t){var e=document.createElement("a"),n=(e.className="geButton",document.createElement("div"));return null!=t&&(n.className="geSprite "+t),e.appendChild(n),e},Toolbar.prototype.createLabel=function(t,e){return(e=document.createElement("a")).className="geLabel",mxUtils.write(e,t),e},Toolbar.prototype.addMenuHandler=function(n,i,l,s){var o,r,a;null!=l&&(o=this.editorUi.editor.graph,a=!(r=null),mxEvent.addListener(n,"click",mxUtils.bind(this,function(t){var e;a&&(null==n.enabled||n.enabled)&&(o.popupMenuHandler.hideMenu(),(r=new mxPopupMenu(l)).div.className+=" geToolbarMenu",r.showDisabled=s,r.labels=i,r.autoExpand=!0,e=mxUtils.getOffset(n),r.popup(e.x,e.y+n.offsetHeight,null,t),this.editorUi.setCurrentMenu(r,n),!i&&r.div.scrollHeight>r.div.clientHeight&&(r.div.style.width="40px"),r.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(r,arguments),this.editorUi.resetCurrentMenu(),r.destroy()}),r.addListener(mxEvent.EVENT_HIDE,mxUtils.bind(this,function(){this.currentElt=null}))),a=!0,mxEvent.consume(t)})),mxEvent.addListener(n,mxClient.IS_POINTER?"pointerdown":"mousedown",mxUtils.bind(this,function(t){a=this.currentElt!=n,t.preventDefault()})))},Toolbar.prototype.destroy=function(){null!=this.gestureHandler&&(mxEvent.removeGestureListeners(document,this.gestureHandler),this.gestureHandler=null)};